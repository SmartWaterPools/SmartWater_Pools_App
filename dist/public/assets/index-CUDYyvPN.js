var $U=Object.defineProperty;var dA=t=>{throw TypeError(t)};var UU=(t,e,s)=>e in t?$U(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Se=(t,e,s)=>UU(t,typeof e!="symbol"?e+"":e,s),m1=(t,e,s)=>e.has(t)||dA("Cannot "+s);var ye=(t,e,s)=>(m1(t,e,"read from private field"),s?s.call(t):e.get(t)),Ht=(t,e,s)=>e.has(t)?dA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),_t=(t,e,s,r)=>(m1(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),Sn=(t,e,s)=>(m1(t,e,"access private method"),s);var Wg=(t,e,s,r)=>({set _(i){_t(t,e,i,s)},get _(){return ye(t,e,r)}});function yk(t,e){for(var s=0;s<e.length;s++){const r=e[s];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();var Hm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function td(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wk={exports:{}},Qv={},jk={exports:{}},Ln={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var og=Symbol.for("react.element"),WU=Symbol.for("react.portal"),HU=Symbol.for("react.fragment"),qU=Symbol.for("react.strict_mode"),GU=Symbol.for("react.profiler"),YU=Symbol.for("react.provider"),KU=Symbol.for("react.context"),ZU=Symbol.for("react.forward_ref"),QU=Symbol.for("react.suspense"),XU=Symbol.for("react.memo"),JU=Symbol.for("react.lazy"),uA=Symbol.iterator;function eW(t){return t===null||typeof t!="object"?null:(t=uA&&t[uA]||t["@@iterator"],typeof t=="function"?t:null)}var bk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nk=Object.assign,Ck={};function fm(t,e,s){this.props=t,this.context=e,this.refs=Ck,this.updater=s||bk}fm.prototype.isReactComponent={};fm.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fm.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sk(){}Sk.prototype=fm.prototype;function WN(t,e,s){this.props=t,this.context=e,this.refs=Ck,this.updater=s||bk}var HN=WN.prototype=new Sk;HN.constructor=WN;Nk(HN,fm.prototype);HN.isPureReactComponent=!0;var hA=Array.isArray,Ak=Object.prototype.hasOwnProperty,qN={current:null},Ek={key:!0,ref:!0,__self:!0,__source:!0};function _k(t,e,s){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Ak.call(e,r)&&!Ek.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=s;else if(1<c){for(var d=Array(c),h=0;h<c;h++)d[h]=arguments[h+2];i.children=d}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:og,type:t,key:a,ref:o,props:i,_owner:qN.current}}function tW(t,e){return{$$typeof:og,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function GN(t){return typeof t=="object"&&t!==null&&t.$$typeof===og}function nW(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var mA=/\/+/g;function f1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nW(""+t.key):e.toString(36)}function Px(t,e,s,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case og:case WU:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+f1(o,0):r,hA(i)?(s="",t!=null&&(s=t.replace(mA,"$&/")+"/"),Px(i,e,s,"",function(h){return h})):i!=null&&(GN(i)&&(i=tW(i,s+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(mA,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",hA(t))for(var c=0;c<t.length;c++){a=t[c];var d=r+f1(a,c);o+=Px(a,e,s,d,i)}else if(d=eW(t),typeof d=="function")for(t=d.call(t),c=0;!(a=t.next()).done;)a=a.value,d=r+f1(a,c++),o+=Px(a,e,s,d,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Hg(t,e,s){if(t==null)return t;var r=[],i=0;return Px(t,r,"","",function(a){return e.call(s,a,i++)}),r}function sW(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Oi={current:null},Rx={transition:null},rW={ReactCurrentDispatcher:Oi,ReactCurrentBatchConfig:Rx,ReactCurrentOwner:qN};function Ik(){throw Error("act(...) is not supported in production builds of React.")}Ln.Children={map:Hg,forEach:function(t,e,s){Hg(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return Hg(t,function(){e++}),e},toArray:function(t){return Hg(t,function(e){return e})||[]},only:function(t){if(!GN(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ln.Component=fm;Ln.Fragment=HU;Ln.Profiler=GU;Ln.PureComponent=WN;Ln.StrictMode=qU;Ln.Suspense=QU;Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rW;Ln.act=Ik;Ln.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Nk({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=qN.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(d in e)Ak.call(e,d)&&!Ek.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&c!==void 0?c[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=s;else if(1<d){c=Array(d);for(var h=0;h<d;h++)c[h]=arguments[h+2];r.children=c}return{$$typeof:og,type:t.type,key:i,ref:a,props:r,_owner:o}};Ln.createContext=function(t){return t={$$typeof:KU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:YU,_context:t},t.Consumer=t};Ln.createElement=_k;Ln.createFactory=function(t){var e=_k.bind(null,t);return e.type=t,e};Ln.createRef=function(){return{current:null}};Ln.forwardRef=function(t){return{$$typeof:ZU,render:t}};Ln.isValidElement=GN;Ln.lazy=function(t){return{$$typeof:JU,_payload:{_status:-1,_result:t},_init:sW}};Ln.memo=function(t,e){return{$$typeof:XU,type:t,compare:e===void 0?null:e}};Ln.startTransition=function(t){var e=Rx.transition;Rx.transition={};try{t()}finally{Rx.transition=e}};Ln.unstable_act=Ik;Ln.useCallback=function(t,e){return Oi.current.useCallback(t,e)};Ln.useContext=function(t){return Oi.current.useContext(t)};Ln.useDebugValue=function(){};Ln.useDeferredValue=function(t){return Oi.current.useDeferredValue(t)};Ln.useEffect=function(t,e){return Oi.current.useEffect(t,e)};Ln.useId=function(){return Oi.current.useId()};Ln.useImperativeHandle=function(t,e,s){return Oi.current.useImperativeHandle(t,e,s)};Ln.useInsertionEffect=function(t,e){return Oi.current.useInsertionEffect(t,e)};Ln.useLayoutEffect=function(t,e){return Oi.current.useLayoutEffect(t,e)};Ln.useMemo=function(t,e){return Oi.current.useMemo(t,e)};Ln.useReducer=function(t,e,s){return Oi.current.useReducer(t,e,s)};Ln.useRef=function(t){return Oi.current.useRef(t)};Ln.useState=function(t){return Oi.current.useState(t)};Ln.useSyncExternalStore=function(t,e,s){return Oi.current.useSyncExternalStore(t,e,s)};Ln.useTransition=function(){return Oi.current.useTransition()};Ln.version="18.3.1";jk.exports=Ln;var y=jk.exports;const Ne=td(y),Tk=yk({__proto__:null,default:Ne},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iW=y,aW=Symbol.for("react.element"),oW=Symbol.for("react.fragment"),lW=Object.prototype.hasOwnProperty,cW=iW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dW={key:!0,ref:!0,__self:!0,__source:!0};function Mk(t,e,s){var r,i={},a=null,o=null;s!==void 0&&(a=""+s),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lW.call(e,r)&&!dW.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:aW,type:t,key:a,ref:o,props:i,_owner:cW.current}}Qv.Fragment=oW;Qv.jsx=Mk;Qv.jsxs=Mk;wk.exports=Qv;var n=wk.exports,Dk={exports:{}},Ia={},kk={exports:{}},Pk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(se,re){var me=se.length;se.push(re);e:for(;0<me;){var Ce=me-1>>>1,$=se[Ce];if(0<i($,re))se[Ce]=re,se[me]=$,me=Ce;else break e}}function s(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var re=se[0],me=se.pop();if(me!==re){se[0]=me;e:for(var Ce=0,$=se.length,xe=$>>>1;Ce<xe;){var te=2*(Ce+1)-1,ae=se[te],ee=te+1,de=se[ee];if(0>i(ae,me))ee<$&&0>i(de,ae)?(se[Ce]=de,se[ee]=me,Ce=ee):(se[Ce]=ae,se[te]=me,Ce=te);else if(ee<$&&0>i(de,me))se[Ce]=de,se[ee]=me,Ce=ee;else break e}}return re}function i(se,re){var me=se.sortIndex-re.sortIndex;return me!==0?me:se.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var d=[],h=[],g=1,m=null,p=3,v=!1,j=!1,N=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(se){for(var re=s(h);re!==null;){if(re.callback===null)r(h);else if(re.startTime<=se)r(h),re.sortIndex=re.expirationTime,e(d,re);else break;re=s(h)}}function I(se){if(N=!1,C(se),!j)if(s(d)!==null)j=!0,he(P);else{var re=s(h);re!==null&&le(I,re.startTime-se)}}function P(se,re){j=!1,N&&(N=!1,_(M),M=-1),v=!0;var me=p;try{for(C(re),m=s(d);m!==null&&(!(m.expirationTime>re)||se&&!V());){var Ce=m.callback;if(typeof Ce=="function"){m.callback=null,p=m.priorityLevel;var $=Ce(m.expirationTime<=re);re=t.unstable_now(),typeof $=="function"?m.callback=$:m===s(d)&&r(d),C(re)}else r(d);m=s(d)}if(m!==null)var xe=!0;else{var te=s(h);te!==null&&le(I,te.startTime-re),xe=!1}return xe}finally{m=null,p=me,v=!1}}var L=!1,T=null,M=-1,k=5,O=-1;function V(){return!(t.unstable_now()-O<k)}function B(){if(T!==null){var se=t.unstable_now();O=se;var re=!0;try{re=T(!0,se)}finally{re?Y():(L=!1,T=null)}}else L=!1}var Y;if(typeof S=="function")Y=function(){S(B)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,G=z.port2;z.port1.onmessage=B,Y=function(){G.postMessage(null)}}else Y=function(){E(B,0)};function he(se){T=se,L||(L=!0,Y())}function le(se,re){M=E(function(){se(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(se){se.callback=null},t.unstable_continueExecution=function(){j||v||(j=!0,he(P))},t.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<se?Math.floor(1e3/se):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return s(d)},t.unstable_next=function(se){switch(p){case 1:case 2:case 3:var re=3;break;default:re=p}var me=p;p=re;try{return se()}finally{p=me}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(se,re){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var me=p;p=se;try{return re()}finally{p=me}},t.unstable_scheduleCallback=function(se,re,me){var Ce=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Ce+me:Ce):me=Ce,se){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=me+$,se={id:g++,callback:re,priorityLevel:se,startTime:me,expirationTime:$,sortIndex:-1},me>Ce?(se.sortIndex=me,e(h,se),s(d)===null&&se===s(h)&&(N?(_(M),M=-1):N=!0,le(I,me-Ce))):(se.sortIndex=$,e(d,se),j||v||(j=!0,he(P))),se},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(se){var re=p;return function(){var me=p;p=re;try{return se.apply(this,arguments)}finally{p=me}}}})(Pk);kk.exports=Pk;var uW=kk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hW=y,Aa=uW;function tt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rk=new Set,rp={};function uu(t,e){Hh(t,e),Hh(t+"Capture",e)}function Hh(t,e){for(rp[t]=e,t=0;t<e.length;t++)Rk.add(e[t])}var Ll=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xj=Object.prototype.hasOwnProperty,mW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fA={},pA={};function fW(t){return xj.call(pA,t)?!0:xj.call(fA,t)?!1:mW.test(t)?pA[t]=!0:(fA[t]=!0,!1)}function pW(t,e,s,r){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gW(t,e,s,r){if(e===null||typeof e>"u"||pW(t,e,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fi(t,e,s,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var ai={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ai[t]=new Fi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ai[e]=new Fi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ai[t]=new Fi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ai[t]=new Fi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ai[t]=new Fi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ai[t]=new Fi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ai[t]=new Fi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ai[t]=new Fi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ai[t]=new Fi(t,5,!1,t.toLowerCase(),null,!1,!1)});var YN=/[\-:]([a-z])/g;function KN(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(YN,KN);ai[e]=new Fi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(YN,KN);ai[e]=new Fi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(YN,KN);ai[e]=new Fi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ai[t]=new Fi(t,1,!1,t.toLowerCase(),null,!1,!1)});ai.xlinkHref=new Fi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ai[t]=new Fi(t,1,!1,t.toLowerCase(),null,!0,!0)});function ZN(t,e,s,r){var i=ai.hasOwnProperty(e)?ai[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gW(e,s,i,r)&&(s=null),r||i===null?fW(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):i.mustUseProperty?t[i.propertyName]=s===null?i.type===3?!1:"":s:(e=i.attributeName,r=i.attributeNamespace,s===null?t.removeAttribute(e):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,r?t.setAttributeNS(r,e,s):t.setAttribute(e,s))))}var Hl=hW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qg=Symbol.for("react.element"),qu=Symbol.for("react.portal"),Gu=Symbol.for("react.fragment"),QN=Symbol.for("react.strict_mode"),vj=Symbol.for("react.profiler"),Lk=Symbol.for("react.provider"),Ok=Symbol.for("react.context"),XN=Symbol.for("react.forward_ref"),yj=Symbol.for("react.suspense"),wj=Symbol.for("react.suspense_list"),JN=Symbol.for("react.memo"),cc=Symbol.for("react.lazy"),Fk=Symbol.for("react.offscreen"),gA=Symbol.iterator;function qm(t){return t===null||typeof t!="object"?null:(t=gA&&t[gA]||t["@@iterator"],typeof t=="function"?t:null)}var Js=Object.assign,p1;function jf(t){if(p1===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);p1=e&&e[1]||""}return`
`+p1+t}var g1=!1;function x1(t,e){if(!t||g1)return"";g1=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,c=a.length-1;1<=o&&0<=c&&i[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==a[c]){var d=`
`+i[o].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=o&&0<=c);break}}}finally{g1=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?jf(t):""}function xW(t){switch(t.tag){case 5:return jf(t.type);case 16:return jf("Lazy");case 13:return jf("Suspense");case 19:return jf("SuspenseList");case 0:case 2:case 15:return t=x1(t.type,!1),t;case 11:return t=x1(t.type.render,!1),t;case 1:return t=x1(t.type,!0),t;default:return""}}function jj(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gu:return"Fragment";case qu:return"Portal";case vj:return"Profiler";case QN:return"StrictMode";case yj:return"Suspense";case wj:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ok:return(t.displayName||"Context")+".Consumer";case Lk:return(t._context.displayName||"Context")+".Provider";case XN:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case JN:return e=t.displayName||null,e!==null?e:jj(t.type)||"Memo";case cc:e=t._payload,t=t._init;try{return jj(t(e))}catch{}}return null}function vW(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jj(e);case 8:return e===QN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Uc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Bk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yW(t){var e=Bk(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,a=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gg(t){t._valueTracker||(t._valueTracker=yW(t))}function zk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),r="";return t&&(r=Bk(t)?t.checked?"true":"false":t.value),t=r,t!==s?(e.setValue(t),!0):!1}function y0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bj(t,e){var s=e.checked;return Js({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function xA(t,e){var s=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;s=Uc(e.value!=null?e.value:s),t._wrapperState={initialChecked:r,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vk(t,e){e=e.checked,e!=null&&ZN(t,"checked",e,!1)}function Nj(t,e){Vk(t,e);var s=Uc(e.value),r=e.type;if(s!=null)r==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cj(t,e.type,s):e.hasOwnProperty("defaultValue")&&Cj(t,e.type,Uc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vA(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Cj(t,e,s){(e!=="number"||y0(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var bf=Array.isArray;function lh(t,e,s,r){if(t=t.options,e){e={};for(var i=0;i<s.length;i++)e["$"+s[i]]=!0;for(s=0;s<t.length;s++)i=e.hasOwnProperty("$"+t[s].value),t[s].selected!==i&&(t[s].selected=i),i&&r&&(t[s].defaultSelected=!0)}else{for(s=""+Uc(s),e=null,i=0;i<t.length;i++){if(t[i].value===s){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Sj(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Js({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yA(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(tt(92));if(bf(s)){if(1<s.length)throw Error(tt(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:Uc(s)}}function $k(t,e){var s=Uc(e.value),r=Uc(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),r!=null&&(t.defaultValue=""+r)}function wA(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Uk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Aj(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Uk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yg,Wk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,s,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yg=Yg||document.createElement("div"),Yg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ip(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var Vf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wW=["Webkit","ms","Moz","O"];Object.keys(Vf).forEach(function(t){wW.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vf[e]=Vf[t]})});function Hk(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||Vf.hasOwnProperty(t)&&Vf[t]?(""+e).trim():e+"px"}function qk(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var r=s.indexOf("--")===0,i=Hk(s,e[s],r);s==="float"&&(s="cssFloat"),r?t.setProperty(s,i):t[s]=i}}var jW=Js({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ej(t,e){if(e){if(jW[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(tt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(tt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(tt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(tt(62))}}function _j(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ij=null;function eC(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tj=null,ch=null,dh=null;function jA(t){if(t=dg(t)){if(typeof Tj!="function")throw Error(tt(280));var e=t.stateNode;e&&(e=ny(e),Tj(t.stateNode,t.type,e))}}function Gk(t){ch?dh?dh.push(t):dh=[t]:ch=t}function Yk(){if(ch){var t=ch,e=dh;if(dh=ch=null,jA(t),e)for(t=0;t<e.length;t++)jA(e[t])}}function Kk(t,e){return t(e)}function Zk(){}var v1=!1;function Qk(t,e,s){if(v1)return t(e,s);v1=!0;try{return Kk(t,e,s)}finally{v1=!1,(ch!==null||dh!==null)&&(Zk(),Yk())}}function ap(t,e){var s=t.stateNode;if(s===null)return null;var r=ny(s);if(r===null)return null;s=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(tt(231,e,typeof s));return s}var Mj=!1;if(Ll)try{var Gm={};Object.defineProperty(Gm,"passive",{get:function(){Mj=!0}}),window.addEventListener("test",Gm,Gm),window.removeEventListener("test",Gm,Gm)}catch{Mj=!1}function bW(t,e,s,r,i,a,o,c,d){var h=Array.prototype.slice.call(arguments,3);try{e.apply(s,h)}catch(g){this.onError(g)}}var $f=!1,w0=null,j0=!1,Dj=null,NW={onError:function(t){$f=!0,w0=t}};function CW(t,e,s,r,i,a,o,c,d){$f=!1,w0=null,bW.apply(NW,arguments)}function SW(t,e,s,r,i,a,o,c,d){if(CW.apply(this,arguments),$f){if($f){var h=w0;$f=!1,w0=null}else throw Error(tt(198));j0||(j0=!0,Dj=h)}}function hu(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function Xk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function bA(t){if(hu(t)!==t)throw Error(tt(188))}function AW(t){var e=t.alternate;if(!e){if(e=hu(t),e===null)throw Error(tt(188));return e!==t?null:t}for(var s=t,r=e;;){var i=s.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){s=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===s)return bA(i),t;if(a===r)return bA(i),e;a=a.sibling}throw Error(tt(188))}if(s.return!==r.return)s=i,r=a;else{for(var o=!1,c=i.child;c;){if(c===s){o=!0,s=i,r=a;break}if(c===r){o=!0,r=i,s=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===s){o=!0,s=a,r=i;break}if(c===r){o=!0,r=a,s=i;break}c=c.sibling}if(!o)throw Error(tt(189))}}if(s.alternate!==r)throw Error(tt(190))}if(s.tag!==3)throw Error(tt(188));return s.stateNode.current===s?t:e}function Jk(t){return t=AW(t),t!==null?eP(t):null}function eP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=eP(t);if(e!==null)return e;t=t.sibling}return null}var tP=Aa.unstable_scheduleCallback,NA=Aa.unstable_cancelCallback,EW=Aa.unstable_shouldYield,_W=Aa.unstable_requestPaint,mr=Aa.unstable_now,IW=Aa.unstable_getCurrentPriorityLevel,tC=Aa.unstable_ImmediatePriority,nP=Aa.unstable_UserBlockingPriority,b0=Aa.unstable_NormalPriority,TW=Aa.unstable_LowPriority,sP=Aa.unstable_IdlePriority,Xv=null,Xo=null;function MW(t){if(Xo&&typeof Xo.onCommitFiberRoot=="function")try{Xo.onCommitFiberRoot(Xv,t,void 0,(t.current.flags&128)===128)}catch{}}var jo=Math.clz32?Math.clz32:PW,DW=Math.log,kW=Math.LN2;function PW(t){return t>>>=0,t===0?32:31-(DW(t)/kW|0)|0}var Kg=64,Zg=4194304;function Nf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function N0(t,e){var s=t.pendingLanes;if(s===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=s&268435455;if(o!==0){var c=o&~i;c!==0?r=Nf(c):(a&=o,a!==0&&(r=Nf(a)))}else o=s&~i,o!==0?r=Nf(o):a!==0&&(r=Nf(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)s=31-jo(e),i=1<<s,r|=t[s],e&=~i;return r}function RW(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LW(t,e){for(var s=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-jo(a),c=1<<o,d=i[o];d===-1?(!(c&s)||c&r)&&(i[o]=RW(c,e)):d<=e&&(t.expiredLanes|=c),a&=~c}}function kj(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function rP(){var t=Kg;return Kg<<=1,!(Kg&4194240)&&(Kg=64),t}function y1(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function lg(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jo(e),t[e]=s}function OW(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<s;){var i=31-jo(s),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,s&=~a}}function nC(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var r=31-jo(s),i=1<<r;i&e|t[r]&e&&(t[r]|=e),s&=~i}}var ms=0;function iP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var aP,sC,oP,lP,cP,Pj=!1,Qg=[],Dc=null,kc=null,Pc=null,op=new Map,lp=new Map,mc=[],FW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function CA(t,e){switch(t){case"focusin":case"focusout":Dc=null;break;case"dragenter":case"dragleave":kc=null;break;case"mouseover":case"mouseout":Pc=null;break;case"pointerover":case"pointerout":op.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":lp.delete(e.pointerId)}}function Ym(t,e,s,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:s,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=dg(e),e!==null&&sC(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function BW(t,e,s,r,i){switch(e){case"focusin":return Dc=Ym(Dc,t,e,s,r,i),!0;case"dragenter":return kc=Ym(kc,t,e,s,r,i),!0;case"mouseover":return Pc=Ym(Pc,t,e,s,r,i),!0;case"pointerover":var a=i.pointerId;return op.set(a,Ym(op.get(a)||null,t,e,s,r,i)),!0;case"gotpointercapture":return a=i.pointerId,lp.set(a,Ym(lp.get(a)||null,t,e,s,r,i)),!0}return!1}function dP(t){var e=Md(t.target);if(e!==null){var s=hu(e);if(s!==null){if(e=s.tag,e===13){if(e=Xk(s),e!==null){t.blockedOn=e,cP(t.priority,function(){oP(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lx(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Rj(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var r=new s.constructor(s.type,s);Ij=r,s.target.dispatchEvent(r),Ij=null}else return e=dg(s),e!==null&&sC(e),t.blockedOn=s,!1;e.shift()}return!0}function SA(t,e,s){Lx(t)&&s.delete(e)}function zW(){Pj=!1,Dc!==null&&Lx(Dc)&&(Dc=null),kc!==null&&Lx(kc)&&(kc=null),Pc!==null&&Lx(Pc)&&(Pc=null),op.forEach(SA),lp.forEach(SA)}function Km(t,e){t.blockedOn===e&&(t.blockedOn=null,Pj||(Pj=!0,Aa.unstable_scheduleCallback(Aa.unstable_NormalPriority,zW)))}function cp(t){function e(i){return Km(i,t)}if(0<Qg.length){Km(Qg[0],t);for(var s=1;s<Qg.length;s++){var r=Qg[s];r.blockedOn===t&&(r.blockedOn=null)}}for(Dc!==null&&Km(Dc,t),kc!==null&&Km(kc,t),Pc!==null&&Km(Pc,t),op.forEach(e),lp.forEach(e),s=0;s<mc.length;s++)r=mc[s],r.blockedOn===t&&(r.blockedOn=null);for(;0<mc.length&&(s=mc[0],s.blockedOn===null);)dP(s),s.blockedOn===null&&mc.shift()}var uh=Hl.ReactCurrentBatchConfig,C0=!0;function VW(t,e,s,r){var i=ms,a=uh.transition;uh.transition=null;try{ms=1,rC(t,e,s,r)}finally{ms=i,uh.transition=a}}function $W(t,e,s,r){var i=ms,a=uh.transition;uh.transition=null;try{ms=4,rC(t,e,s,r)}finally{ms=i,uh.transition=a}}function rC(t,e,s,r){if(C0){var i=Rj(t,e,s,r);if(i===null)I1(t,e,r,S0,s),CA(t,r);else if(BW(i,t,e,s,r))r.stopPropagation();else if(CA(t,r),e&4&&-1<FW.indexOf(t)){for(;i!==null;){var a=dg(i);if(a!==null&&aP(a),a=Rj(t,e,s,r),a===null&&I1(t,e,r,S0,s),a===i)break;i=a}i!==null&&r.stopPropagation()}else I1(t,e,r,null,s)}}var S0=null;function Rj(t,e,s,r){if(S0=null,t=eC(r),t=Md(t),t!==null)if(e=hu(t),e===null)t=null;else if(s=e.tag,s===13){if(t=Xk(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return S0=t,null}function uP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IW()){case tC:return 1;case nP:return 4;case b0:case TW:return 16;case sP:return 536870912;default:return 16}default:return 16}}var Ec=null,iC=null,Ox=null;function hP(){if(Ox)return Ox;var t,e=iC,s=e.length,r,i="value"in Ec?Ec.value:Ec.textContent,a=i.length;for(t=0;t<s&&e[t]===i[t];t++);var o=s-t;for(r=1;r<=o&&e[s-r]===i[a-r];r++);return Ox=i.slice(t,1<r?1-r:void 0)}function Fx(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xg(){return!0}function AA(){return!1}function Ta(t){function e(s,r,i,a,o){this._reactName=s,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(s=t[c],this[c]=s?s(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Xg:AA,this.isPropagationStopped=AA,this}return Js(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Xg)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Xg)},persist:function(){},isPersistent:Xg}),e}var pm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aC=Ta(pm),cg=Js({},pm,{view:0,detail:0}),UW=Ta(cg),w1,j1,Zm,Jv=Js({},cg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oC,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zm&&(Zm&&t.type==="mousemove"?(w1=t.screenX-Zm.screenX,j1=t.screenY-Zm.screenY):j1=w1=0,Zm=t),w1)},movementY:function(t){return"movementY"in t?t.movementY:j1}}),EA=Ta(Jv),WW=Js({},Jv,{dataTransfer:0}),HW=Ta(WW),qW=Js({},cg,{relatedTarget:0}),b1=Ta(qW),GW=Js({},pm,{animationName:0,elapsedTime:0,pseudoElement:0}),YW=Ta(GW),KW=Js({},pm,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ZW=Ta(KW),QW=Js({},pm,{data:0}),_A=Ta(QW),XW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tH(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eH[t])?!!e[t]:!1}function oC(){return tH}var nH=Js({},cg,{key:function(t){if(t.key){var e=XW[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fx(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JW[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oC,charCode:function(t){return t.type==="keypress"?Fx(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fx(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sH=Ta(nH),rH=Js({},Jv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),IA=Ta(rH),iH=Js({},cg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oC}),aH=Ta(iH),oH=Js({},pm,{propertyName:0,elapsedTime:0,pseudoElement:0}),lH=Ta(oH),cH=Js({},Jv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dH=Ta(cH),uH=[9,13,27,32],lC=Ll&&"CompositionEvent"in window,Uf=null;Ll&&"documentMode"in document&&(Uf=document.documentMode);var hH=Ll&&"TextEvent"in window&&!Uf,mP=Ll&&(!lC||Uf&&8<Uf&&11>=Uf),TA=" ",MA=!1;function fP(t,e){switch(t){case"keyup":return uH.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yu=!1;function mH(t,e){switch(t){case"compositionend":return pP(e);case"keypress":return e.which!==32?null:(MA=!0,TA);case"textInput":return t=e.data,t===TA&&MA?null:t;default:return null}}function fH(t,e){if(Yu)return t==="compositionend"||!lC&&fP(t,e)?(t=hP(),Ox=iC=Ec=null,Yu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mP&&e.locale!=="ko"?null:e.data;default:return null}}var pH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function DA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pH[t.type]:e==="textarea"}function gP(t,e,s,r){Gk(r),e=A0(e,"onChange"),0<e.length&&(s=new aC("onChange","change",null,s,r),t.push({event:s,listeners:e}))}var Wf=null,dp=null;function gH(t){EP(t,0)}function ey(t){var e=Qu(t);if(zk(e))return t}function xH(t,e){if(t==="change")return e}var xP=!1;if(Ll){var N1;if(Ll){var C1="oninput"in document;if(!C1){var kA=document.createElement("div");kA.setAttribute("oninput","return;"),C1=typeof kA.oninput=="function"}N1=C1}else N1=!1;xP=N1&&(!document.documentMode||9<document.documentMode)}function PA(){Wf&&(Wf.detachEvent("onpropertychange",vP),dp=Wf=null)}function vP(t){if(t.propertyName==="value"&&ey(dp)){var e=[];gP(e,dp,t,eC(t)),Qk(gH,e)}}function vH(t,e,s){t==="focusin"?(PA(),Wf=e,dp=s,Wf.attachEvent("onpropertychange",vP)):t==="focusout"&&PA()}function yH(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ey(dp)}function wH(t,e){if(t==="click")return ey(e)}function jH(t,e){if(t==="input"||t==="change")return ey(e)}function bH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var So=typeof Object.is=="function"?Object.is:bH;function up(t,e){if(So(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),r=Object.keys(e);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var i=s[r];if(!xj.call(e,i)||!So(t[i],e[i]))return!1}return!0}function RA(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function LA(t,e){var s=RA(t);t=0;for(var r;s;){if(s.nodeType===3){if(r=t+s.textContent.length,t<=e&&r>=e)return{node:s,offset:e-t};t=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=RA(s)}}function yP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?yP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wP(){for(var t=window,e=y0();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=y0(t.document)}return e}function cC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function NH(t){var e=wP(),s=t.focusedElem,r=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&yP(s.ownerDocument.documentElement,s)){if(r!==null&&cC(s)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=s.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=LA(s,a);var o=LA(s,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var CH=Ll&&"documentMode"in document&&11>=document.documentMode,Ku=null,Lj=null,Hf=null,Oj=!1;function OA(t,e,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Oj||Ku==null||Ku!==y0(r)||(r=Ku,"selectionStart"in r&&cC(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hf&&up(Hf,r)||(Hf=r,r=A0(Lj,"onSelect"),0<r.length&&(e=new aC("onSelect","select",null,e,s),t.push({event:e,listeners:r}),e.target=Ku)))}function Jg(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var Zu={animationend:Jg("Animation","AnimationEnd"),animationiteration:Jg("Animation","AnimationIteration"),animationstart:Jg("Animation","AnimationStart"),transitionend:Jg("Transition","TransitionEnd")},S1={},jP={};Ll&&(jP=document.createElement("div").style,"AnimationEvent"in window||(delete Zu.animationend.animation,delete Zu.animationiteration.animation,delete Zu.animationstart.animation),"TransitionEvent"in window||delete Zu.transitionend.transition);function ty(t){if(S1[t])return S1[t];if(!Zu[t])return t;var e=Zu[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in jP)return S1[t]=e[s];return t}var bP=ty("animationend"),NP=ty("animationiteration"),CP=ty("animationstart"),SP=ty("transitionend"),AP=new Map,FA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nd(t,e){AP.set(t,e),uu(e,[t])}for(var A1=0;A1<FA.length;A1++){var E1=FA[A1],SH=E1.toLowerCase(),AH=E1[0].toUpperCase()+E1.slice(1);nd(SH,"on"+AH)}nd(bP,"onAnimationEnd");nd(NP,"onAnimationIteration");nd(CP,"onAnimationStart");nd("dblclick","onDoubleClick");nd("focusin","onFocus");nd("focusout","onBlur");nd(SP,"onTransitionEnd");Hh("onMouseEnter",["mouseout","mouseover"]);Hh("onMouseLeave",["mouseout","mouseover"]);Hh("onPointerEnter",["pointerout","pointerover"]);Hh("onPointerLeave",["pointerout","pointerover"]);uu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uu("onBeforeInput",["compositionend","keypress","textInput","paste"]);uu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cf));function BA(t,e,s){var r=t.type||"unknown-event";t.currentTarget=s,SW(r,e,void 0,t),t.currentTarget=null}function EP(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var r=t[s],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],d=c.instance,h=c.currentTarget;if(c=c.listener,d!==a&&i.isPropagationStopped())break e;BA(i,c,h),a=d}else for(o=0;o<r.length;o++){if(c=r[o],d=c.instance,h=c.currentTarget,c=c.listener,d!==a&&i.isPropagationStopped())break e;BA(i,c,h),a=d}}}if(j0)throw t=Dj,j0=!1,Dj=null,t}function Ds(t,e){var s=e[$j];s===void 0&&(s=e[$j]=new Set);var r=t+"__bubble";s.has(r)||(_P(e,t,2,!1),s.add(r))}function _1(t,e,s){var r=0;e&&(r|=4),_P(s,t,r,e)}var ex="_reactListening"+Math.random().toString(36).slice(2);function hp(t){if(!t[ex]){t[ex]=!0,Rk.forEach(function(s){s!=="selectionchange"&&(EH.has(s)||_1(s,!1,t),_1(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ex]||(e[ex]=!0,_1("selectionchange",!1,e))}}function _P(t,e,s,r){switch(uP(e)){case 1:var i=VW;break;case 4:i=$W;break;default:i=rC}s=i.bind(null,e,s,t),i=void 0,!Mj||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,s,{capture:!0,passive:i}):t.addEventListener(e,s,!0):i!==void 0?t.addEventListener(e,s,{passive:i}):t.addEventListener(e,s,!1)}function I1(t,e,s,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;o=o.return}for(;c!==null;){if(o=Md(c),o===null)return;if(d=o.tag,d===5||d===6){r=a=o;continue e}c=c.parentNode}}r=r.return}Qk(function(){var h=a,g=eC(s),m=[];e:{var p=AP.get(t);if(p!==void 0){var v=aC,j=t;switch(t){case"keypress":if(Fx(s)===0)break e;case"keydown":case"keyup":v=sH;break;case"focusin":j="focus",v=b1;break;case"focusout":j="blur",v=b1;break;case"beforeblur":case"afterblur":v=b1;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=EA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=HW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=aH;break;case bP:case NP:case CP:v=YW;break;case SP:v=lH;break;case"scroll":v=UW;break;case"wheel":v=dH;break;case"copy":case"cut":case"paste":v=ZW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=IA}var N=(e&4)!==0,E=!N&&t==="scroll",_=N?p!==null?p+"Capture":null:p;N=[];for(var S=h,C;S!==null;){C=S;var I=C.stateNode;if(C.tag===5&&I!==null&&(C=I,_!==null&&(I=ap(S,_),I!=null&&N.push(mp(S,I,C)))),E)break;S=S.return}0<N.length&&(p=new v(p,j,null,s,g),m.push({event:p,listeners:N}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&s!==Ij&&(j=s.relatedTarget||s.fromElement)&&(Md(j)||j[Ol]))break e;if((v||p)&&(p=g.window===g?g:(p=g.ownerDocument)?p.defaultView||p.parentWindow:window,v?(j=s.relatedTarget||s.toElement,v=h,j=j?Md(j):null,j!==null&&(E=hu(j),j!==E||j.tag!==5&&j.tag!==6)&&(j=null)):(v=null,j=h),v!==j)){if(N=EA,I="onMouseLeave",_="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(N=IA,I="onPointerLeave",_="onPointerEnter",S="pointer"),E=v==null?p:Qu(v),C=j==null?p:Qu(j),p=new N(I,S+"leave",v,s,g),p.target=E,p.relatedTarget=C,I=null,Md(g)===h&&(N=new N(_,S+"enter",j,s,g),N.target=C,N.relatedTarget=E,I=N),E=I,v&&j)t:{for(N=v,_=j,S=0,C=N;C;C=Iu(C))S++;for(C=0,I=_;I;I=Iu(I))C++;for(;0<S-C;)N=Iu(N),S--;for(;0<C-S;)_=Iu(_),C--;for(;S--;){if(N===_||_!==null&&N===_.alternate)break t;N=Iu(N),_=Iu(_)}N=null}else N=null;v!==null&&zA(m,p,v,N,!1),j!==null&&E!==null&&zA(m,E,j,N,!0)}}e:{if(p=h?Qu(h):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var P=xH;else if(DA(p))if(xP)P=jH;else{P=yH;var L=vH}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=wH);if(P&&(P=P(t,h))){gP(m,P,s,g);break e}L&&L(t,p,h),t==="focusout"&&(L=p._wrapperState)&&L.controlled&&p.type==="number"&&Cj(p,"number",p.value)}switch(L=h?Qu(h):window,t){case"focusin":(DA(L)||L.contentEditable==="true")&&(Ku=L,Lj=h,Hf=null);break;case"focusout":Hf=Lj=Ku=null;break;case"mousedown":Oj=!0;break;case"contextmenu":case"mouseup":case"dragend":Oj=!1,OA(m,s,g);break;case"selectionchange":if(CH)break;case"keydown":case"keyup":OA(m,s,g)}var T;if(lC)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Yu?fP(t,s)&&(M="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(M="onCompositionStart");M&&(mP&&s.locale!=="ko"&&(Yu||M!=="onCompositionStart"?M==="onCompositionEnd"&&Yu&&(T=hP()):(Ec=g,iC="value"in Ec?Ec.value:Ec.textContent,Yu=!0)),L=A0(h,M),0<L.length&&(M=new _A(M,t,null,s,g),m.push({event:M,listeners:L}),T?M.data=T:(T=pP(s),T!==null&&(M.data=T)))),(T=hH?mH(t,s):fH(t,s))&&(h=A0(h,"onBeforeInput"),0<h.length&&(g=new _A("onBeforeInput","beforeinput",null,s,g),m.push({event:g,listeners:h}),g.data=T))}EP(m,e)})}function mp(t,e,s){return{instance:t,listener:e,currentTarget:s}}function A0(t,e){for(var s=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=ap(t,s),a!=null&&r.unshift(mp(t,a,i)),a=ap(t,e),a!=null&&r.push(mp(t,a,i))),t=t.return}return r}function Iu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zA(t,e,s,r,i){for(var a=e._reactName,o=[];s!==null&&s!==r;){var c=s,d=c.alternate,h=c.stateNode;if(d!==null&&d===r)break;c.tag===5&&h!==null&&(c=h,i?(d=ap(s,a),d!=null&&o.unshift(mp(s,d,c))):i||(d=ap(s,a),d!=null&&o.push(mp(s,d,c)))),s=s.return}o.length!==0&&t.push({event:e,listeners:o})}var _H=/\r\n?/g,IH=/\u0000|\uFFFD/g;function VA(t){return(typeof t=="string"?t:""+t).replace(_H,`
`).replace(IH,"")}function tx(t,e,s){if(e=VA(e),VA(t)!==e&&s)throw Error(tt(425))}function E0(){}var Fj=null,Bj=null;function zj(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vj=typeof setTimeout=="function"?setTimeout:void 0,TH=typeof clearTimeout=="function"?clearTimeout:void 0,$A=typeof Promise=="function"?Promise:void 0,MH=typeof queueMicrotask=="function"?queueMicrotask:typeof $A<"u"?function(t){return $A.resolve(null).then(t).catch(DH)}:Vj;function DH(t){setTimeout(function(){throw t})}function T1(t,e){var s=e,r=0;do{var i=s.nextSibling;if(t.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(r===0){t.removeChild(i),cp(e);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=i}while(s);cp(e)}function Rc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function UA(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var gm=Math.random().toString(36).slice(2),Ho="__reactFiber$"+gm,fp="__reactProps$"+gm,Ol="__reactContainer$"+gm,$j="__reactEvents$"+gm,kH="__reactListeners$"+gm,PH="__reactHandles$"+gm;function Md(t){var e=t[Ho];if(e)return e;for(var s=t.parentNode;s;){if(e=s[Ol]||s[Ho]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=UA(t);t!==null;){if(s=t[Ho])return s;t=UA(t)}return e}t=s,s=t.parentNode}return null}function dg(t){return t=t[Ho]||t[Ol],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(tt(33))}function ny(t){return t[fp]||null}var Uj=[],Xu=-1;function sd(t){return{current:t}}function Ps(t){0>Xu||(t.current=Uj[Xu],Uj[Xu]=null,Xu--)}function As(t,e){Xu++,Uj[Xu]=t.current,t.current=e}var Wc={},ji=sd(Wc),Xi=sd(!1),Yd=Wc;function qh(t,e){var s=t.type.contextTypes;if(!s)return Wc;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in s)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ji(t){return t=t.childContextTypes,t!=null}function _0(){Ps(Xi),Ps(ji)}function WA(t,e,s){if(ji.current!==Wc)throw Error(tt(168));As(ji,e),As(Xi,s)}function IP(t,e,s){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(tt(108,vW(t)||"Unknown",i));return Js({},s,r)}function I0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wc,Yd=ji.current,As(ji,t),As(Xi,Xi.current),!0}function HA(t,e,s){var r=t.stateNode;if(!r)throw Error(tt(169));s?(t=IP(t,e,Yd),r.__reactInternalMemoizedMergedChildContext=t,Ps(Xi),Ps(ji),As(ji,t)):Ps(Xi),As(Xi,s)}var Al=null,sy=!1,M1=!1;function TP(t){Al===null?Al=[t]:Al.push(t)}function RH(t){sy=!0,TP(t)}function rd(){if(!M1&&Al!==null){M1=!0;var t=0,e=ms;try{var s=Al;for(ms=1;t<s.length;t++){var r=s[t];do r=r(!0);while(r!==null)}Al=null,sy=!1}catch(i){throw Al!==null&&(Al=Al.slice(t+1)),tP(tC,rd),i}finally{ms=e,M1=!1}}return null}var Ju=[],eh=0,T0=null,M0=0,Ha=[],qa=0,Kd=null,Il=1,Tl="";function jd(t,e){Ju[eh++]=M0,Ju[eh++]=T0,T0=t,M0=e}function MP(t,e,s){Ha[qa++]=Il,Ha[qa++]=Tl,Ha[qa++]=Kd,Kd=t;var r=Il;t=Tl;var i=32-jo(r)-1;r&=~(1<<i),s+=1;var a=32-jo(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Il=1<<32-jo(e)+i|s<<i|r,Tl=a+t}else Il=1<<a|s<<i|r,Tl=t}function dC(t){t.return!==null&&(jd(t,1),MP(t,1,0))}function uC(t){for(;t===T0;)T0=Ju[--eh],Ju[eh]=null,M0=Ju[--eh],Ju[eh]=null;for(;t===Kd;)Kd=Ha[--qa],Ha[qa]=null,Tl=Ha[--qa],Ha[qa]=null,Il=Ha[--qa],Ha[qa]=null}var Na=null,wa=null,Ws=!1,po=null;function DP(t,e){var s=Ka(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function qA(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Na=t,wa=Rc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Na=t,wa=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=Kd!==null?{id:Il,overflow:Tl}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Ka(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Na=t,wa=null,!0):!1;default:return!1}}function Wj(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hj(t){if(Ws){var e=wa;if(e){var s=e;if(!qA(t,e)){if(Wj(t))throw Error(tt(418));e=Rc(s.nextSibling);var r=Na;e&&qA(t,e)?DP(r,s):(t.flags=t.flags&-4097|2,Ws=!1,Na=t)}}else{if(Wj(t))throw Error(tt(418));t.flags=t.flags&-4097|2,Ws=!1,Na=t}}}function GA(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Na=t}function nx(t){if(t!==Na)return!1;if(!Ws)return GA(t),Ws=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zj(t.type,t.memoizedProps)),e&&(e=wa)){if(Wj(t))throw kP(),Error(tt(418));for(;e;)DP(t,e),e=Rc(e.nextSibling)}if(GA(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(tt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){wa=Rc(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}wa=null}}else wa=Na?Rc(t.stateNode.nextSibling):null;return!0}function kP(){for(var t=wa;t;)t=Rc(t.nextSibling)}function Gh(){wa=Na=null,Ws=!1}function hC(t){po===null?po=[t]:po.push(t)}var LH=Hl.ReactCurrentBatchConfig;function Qm(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(tt(309));var r=s.stateNode}if(!r)throw Error(tt(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var c=i.refs;o===null?delete c[a]:c[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(tt(284));if(!s._owner)throw Error(tt(290,t))}return t}function sx(t,e){throw t=Object.prototype.toString.call(e),Error(tt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function YA(t){var e=t._init;return e(t._payload)}function PP(t){function e(_,S){if(t){var C=_.deletions;C===null?(_.deletions=[S],_.flags|=16):C.push(S)}}function s(_,S){if(!t)return null;for(;S!==null;)e(_,S),S=S.sibling;return null}function r(_,S){for(_=new Map;S!==null;)S.key!==null?_.set(S.key,S):_.set(S.index,S),S=S.sibling;return _}function i(_,S){return _=Bc(_,S),_.index=0,_.sibling=null,_}function a(_,S,C){return _.index=C,t?(C=_.alternate,C!==null?(C=C.index,C<S?(_.flags|=2,S):C):(_.flags|=2,S)):(_.flags|=1048576,S)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function c(_,S,C,I){return S===null||S.tag!==6?(S=F1(C,_.mode,I),S.return=_,S):(S=i(S,C),S.return=_,S)}function d(_,S,C,I){var P=C.type;return P===Gu?g(_,S,C.props.children,I,C.key):S!==null&&(S.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===cc&&YA(P)===S.type)?(I=i(S,C.props),I.ref=Qm(_,S,C),I.return=_,I):(I=Hx(C.type,C.key,C.props,null,_.mode,I),I.ref=Qm(_,S,C),I.return=_,I)}function h(_,S,C,I){return S===null||S.tag!==4||S.stateNode.containerInfo!==C.containerInfo||S.stateNode.implementation!==C.implementation?(S=B1(C,_.mode,I),S.return=_,S):(S=i(S,C.children||[]),S.return=_,S)}function g(_,S,C,I,P){return S===null||S.tag!==7?(S=Ud(C,_.mode,I,P),S.return=_,S):(S=i(S,C),S.return=_,S)}function m(_,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return S=F1(""+S,_.mode,C),S.return=_,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case qg:return C=Hx(S.type,S.key,S.props,null,_.mode,C),C.ref=Qm(_,null,S),C.return=_,C;case qu:return S=B1(S,_.mode,C),S.return=_,S;case cc:var I=S._init;return m(_,I(S._payload),C)}if(bf(S)||qm(S))return S=Ud(S,_.mode,C,null),S.return=_,S;sx(_,S)}return null}function p(_,S,C,I){var P=S!==null?S.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return P!==null?null:c(_,S,""+C,I);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case qg:return C.key===P?d(_,S,C,I):null;case qu:return C.key===P?h(_,S,C,I):null;case cc:return P=C._init,p(_,S,P(C._payload),I)}if(bf(C)||qm(C))return P!==null?null:g(_,S,C,I,null);sx(_,C)}return null}function v(_,S,C,I,P){if(typeof I=="string"&&I!==""||typeof I=="number")return _=_.get(C)||null,c(S,_,""+I,P);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case qg:return _=_.get(I.key===null?C:I.key)||null,d(S,_,I,P);case qu:return _=_.get(I.key===null?C:I.key)||null,h(S,_,I,P);case cc:var L=I._init;return v(_,S,C,L(I._payload),P)}if(bf(I)||qm(I))return _=_.get(C)||null,g(S,_,I,P,null);sx(S,I)}return null}function j(_,S,C,I){for(var P=null,L=null,T=S,M=S=0,k=null;T!==null&&M<C.length;M++){T.index>M?(k=T,T=null):k=T.sibling;var O=p(_,T,C[M],I);if(O===null){T===null&&(T=k);break}t&&T&&O.alternate===null&&e(_,T),S=a(O,S,M),L===null?P=O:L.sibling=O,L=O,T=k}if(M===C.length)return s(_,T),Ws&&jd(_,M),P;if(T===null){for(;M<C.length;M++)T=m(_,C[M],I),T!==null&&(S=a(T,S,M),L===null?P=T:L.sibling=T,L=T);return Ws&&jd(_,M),P}for(T=r(_,T);M<C.length;M++)k=v(T,_,M,C[M],I),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?M:k.key),S=a(k,S,M),L===null?P=k:L.sibling=k,L=k);return t&&T.forEach(function(V){return e(_,V)}),Ws&&jd(_,M),P}function N(_,S,C,I){var P=qm(C);if(typeof P!="function")throw Error(tt(150));if(C=P.call(C),C==null)throw Error(tt(151));for(var L=P=null,T=S,M=S=0,k=null,O=C.next();T!==null&&!O.done;M++,O=C.next()){T.index>M?(k=T,T=null):k=T.sibling;var V=p(_,T,O.value,I);if(V===null){T===null&&(T=k);break}t&&T&&V.alternate===null&&e(_,T),S=a(V,S,M),L===null?P=V:L.sibling=V,L=V,T=k}if(O.done)return s(_,T),Ws&&jd(_,M),P;if(T===null){for(;!O.done;M++,O=C.next())O=m(_,O.value,I),O!==null&&(S=a(O,S,M),L===null?P=O:L.sibling=O,L=O);return Ws&&jd(_,M),P}for(T=r(_,T);!O.done;M++,O=C.next())O=v(T,_,M,O.value,I),O!==null&&(t&&O.alternate!==null&&T.delete(O.key===null?M:O.key),S=a(O,S,M),L===null?P=O:L.sibling=O,L=O);return t&&T.forEach(function(B){return e(_,B)}),Ws&&jd(_,M),P}function E(_,S,C,I){if(typeof C=="object"&&C!==null&&C.type===Gu&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case qg:e:{for(var P=C.key,L=S;L!==null;){if(L.key===P){if(P=C.type,P===Gu){if(L.tag===7){s(_,L.sibling),S=i(L,C.props.children),S.return=_,_=S;break e}}else if(L.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===cc&&YA(P)===L.type){s(_,L.sibling),S=i(L,C.props),S.ref=Qm(_,L,C),S.return=_,_=S;break e}s(_,L);break}else e(_,L);L=L.sibling}C.type===Gu?(S=Ud(C.props.children,_.mode,I,C.key),S.return=_,_=S):(I=Hx(C.type,C.key,C.props,null,_.mode,I),I.ref=Qm(_,S,C),I.return=_,_=I)}return o(_);case qu:e:{for(L=C.key;S!==null;){if(S.key===L)if(S.tag===4&&S.stateNode.containerInfo===C.containerInfo&&S.stateNode.implementation===C.implementation){s(_,S.sibling),S=i(S,C.children||[]),S.return=_,_=S;break e}else{s(_,S);break}else e(_,S);S=S.sibling}S=B1(C,_.mode,I),S.return=_,_=S}return o(_);case cc:return L=C._init,E(_,S,L(C._payload),I)}if(bf(C))return j(_,S,C,I);if(qm(C))return N(_,S,C,I);sx(_,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,S!==null&&S.tag===6?(s(_,S.sibling),S=i(S,C),S.return=_,_=S):(s(_,S),S=F1(C,_.mode,I),S.return=_,_=S),o(_)):s(_,S)}return E}var Yh=PP(!0),RP=PP(!1),D0=sd(null),k0=null,th=null,mC=null;function fC(){mC=th=k0=null}function pC(t){var e=D0.current;Ps(D0),t._currentValue=e}function qj(t,e,s){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===s)break;t=t.return}}function hh(t,e){k0=t,mC=th=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zi=!0),t.firstContext=null)}function to(t){var e=t._currentValue;if(mC!==t)if(t={context:t,memoizedValue:e,next:null},th===null){if(k0===null)throw Error(tt(308));th=t,k0.dependencies={lanes:0,firstContext:t}}else th=th.next=t;return e}var Dd=null;function gC(t){Dd===null?Dd=[t]:Dd.push(t)}function LP(t,e,s,r){var i=e.interleaved;return i===null?(s.next=s,gC(e)):(s.next=i.next,i.next=s),e.interleaved=s,Fl(t,r)}function Fl(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var dc=!1;function xC(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lc(t,e,s){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Xn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fl(t,s)}return i=r.interleaved,i===null?(e.next=e,gC(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fl(t,s)}function Bx(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,s|=r,e.lanes=s,nC(t,s)}}function KA(t,e){var s=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var i=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?i=a=o:a=a.next=o,s=s.next}while(s!==null);a===null?i=a=e:a=a.next=e}else i=a=e;s={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function P0(t,e,s,r){var i=t.updateQueue;dc=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,h=d.next;d.next=null,o===null?a=h:o.next=h,o=d;var g=t.alternate;g!==null&&(g=g.updateQueue,c=g.lastBaseUpdate,c!==o&&(c===null?g.firstBaseUpdate=h:c.next=h,g.lastBaseUpdate=d))}if(a!==null){var m=i.baseState;o=0,g=h=d=null,c=a;do{var p=c.lane,v=c.eventTime;if((r&p)===p){g!==null&&(g=g.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var j=t,N=c;switch(p=e,v=s,N.tag){case 1:if(j=N.payload,typeof j=="function"){m=j.call(v,m,p);break e}m=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=N.payload,p=typeof j=="function"?j.call(v,m,p):j,p==null)break e;m=Js({},m,p);break e;case 2:dc=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[c]:p.push(c))}else v={eventTime:v,lane:p,tag:c.tag,payload:c.payload,callback:c.callback,next:null},g===null?(h=g=v,d=m):g=g.next=v,o|=p;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;p=c,c=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(g===null&&(d=m),i.baseState=d,i.firstBaseUpdate=h,i.lastBaseUpdate=g,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Qd|=o,t.lanes=o,t.memoizedState=m}}function ZA(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=s,typeof i!="function")throw Error(tt(191,i));i.call(r)}}}var ug={},Jo=sd(ug),pp=sd(ug),gp=sd(ug);function kd(t){if(t===ug)throw Error(tt(174));return t}function vC(t,e){switch(As(gp,e),As(pp,t),As(Jo,ug),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Aj(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Aj(e,t)}Ps(Jo),As(Jo,e)}function Kh(){Ps(Jo),Ps(pp),Ps(gp)}function FP(t){kd(gp.current);var e=kd(Jo.current),s=Aj(e,t.type);e!==s&&(As(pp,t),As(Jo,s))}function yC(t){pp.current===t&&(Ps(Jo),Ps(pp))}var Ks=sd(0);function R0(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var D1=[];function wC(){for(var t=0;t<D1.length;t++)D1[t]._workInProgressVersionPrimary=null;D1.length=0}var zx=Hl.ReactCurrentDispatcher,k1=Hl.ReactCurrentBatchConfig,Zd=0,Xs=null,Mr=null,$r=null,L0=!1,qf=!1,xp=0,OH=0;function di(){throw Error(tt(321))}function jC(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!So(t[s],e[s]))return!1;return!0}function bC(t,e,s,r,i,a){if(Zd=a,Xs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zx.current=t===null||t.memoizedState===null?VH:$H,t=s(r,i),qf){a=0;do{if(qf=!1,xp=0,25<=a)throw Error(tt(301));a+=1,$r=Mr=null,e.updateQueue=null,zx.current=UH,t=s(r,i)}while(qf)}if(zx.current=O0,e=Mr!==null&&Mr.next!==null,Zd=0,$r=Mr=Xs=null,L0=!1,e)throw Error(tt(300));return t}function NC(){var t=xp!==0;return xp=0,t}function zo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $r===null?Xs.memoizedState=$r=t:$r=$r.next=t,$r}function no(){if(Mr===null){var t=Xs.alternate;t=t!==null?t.memoizedState:null}else t=Mr.next;var e=$r===null?Xs.memoizedState:$r.next;if(e!==null)$r=e,Mr=t;else{if(t===null)throw Error(tt(310));Mr=t,t={memoizedState:Mr.memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null},$r===null?Xs.memoizedState=$r=t:$r=$r.next=t}return $r}function vp(t,e){return typeof e=="function"?e(t):e}function P1(t){var e=no(),s=e.queue;if(s===null)throw Error(tt(311));s.lastRenderedReducer=t;var r=Mr,i=r.baseQueue,a=s.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,s.pending=null}if(i!==null){a=i.next,r=r.baseState;var c=o=null,d=null,h=a;do{var g=h.lane;if((Zd&g)===g)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:g,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(c=d=m,o=r):d=d.next=m,Xs.lanes|=g,Qd|=g}h=h.next}while(h!==null&&h!==a);d===null?o=r:d.next=c,So(r,e.memoizedState)||(Zi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=d,s.lastRenderedState=r}if(t=s.interleaved,t!==null){i=t;do a=i.lane,Xs.lanes|=a,Qd|=a,i=i.next;while(i!==t)}else i===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function R1(t){var e=no(),s=e.queue;if(s===null)throw Error(tt(311));s.lastRenderedReducer=t;var r=s.dispatch,i=s.pending,a=e.memoizedState;if(i!==null){s.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);So(a,e.memoizedState)||(Zi=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),s.lastRenderedState=a}return[a,r]}function BP(){}function zP(t,e){var s=Xs,r=no(),i=e(),a=!So(r.memoizedState,i);if(a&&(r.memoizedState=i,Zi=!0),r=r.queue,CC(UP.bind(null,s,r,t),[t]),r.getSnapshot!==e||a||$r!==null&&$r.memoizedState.tag&1){if(s.flags|=2048,yp(9,$P.bind(null,s,r,i,e),void 0,null),Hr===null)throw Error(tt(349));Zd&30||VP(s,e,i)}return i}function VP(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=Xs.updateQueue,e===null?(e={lastEffect:null,stores:null},Xs.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function $P(t,e,s,r){e.value=s,e.getSnapshot=r,WP(e)&&HP(t)}function UP(t,e,s){return s(function(){WP(e)&&HP(t)})}function WP(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!So(t,s)}catch{return!0}}function HP(t){var e=Fl(t,1);e!==null&&bo(e,t,1,-1)}function QA(t){var e=zo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vp,lastRenderedState:t},e.queue=t,t=t.dispatch=zH.bind(null,Xs,t),[e.memoizedState,t]}function yp(t,e,s,r){return t={tag:t,create:e,destroy:s,deps:r,next:null},e=Xs.updateQueue,e===null?(e={lastEffect:null,stores:null},Xs.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(r=s.next,s.next=t,t.next=r,e.lastEffect=t)),t}function qP(){return no().memoizedState}function Vx(t,e,s,r){var i=zo();Xs.flags|=t,i.memoizedState=yp(1|e,s,void 0,r===void 0?null:r)}function ry(t,e,s,r){var i=no();r=r===void 0?null:r;var a=void 0;if(Mr!==null){var o=Mr.memoizedState;if(a=o.destroy,r!==null&&jC(r,o.deps)){i.memoizedState=yp(e,s,a,r);return}}Xs.flags|=t,i.memoizedState=yp(1|e,s,a,r)}function XA(t,e){return Vx(8390656,8,t,e)}function CC(t,e){return ry(2048,8,t,e)}function GP(t,e){return ry(4,2,t,e)}function YP(t,e){return ry(4,4,t,e)}function KP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ZP(t,e,s){return s=s!=null?s.concat([t]):null,ry(4,4,KP.bind(null,e,t),s)}function SC(){}function QP(t,e){var s=no();e=e===void 0?null:e;var r=s.memoizedState;return r!==null&&e!==null&&jC(e,r[1])?r[0]:(s.memoizedState=[t,e],t)}function XP(t,e){var s=no();e=e===void 0?null:e;var r=s.memoizedState;return r!==null&&e!==null&&jC(e,r[1])?r[0]:(t=t(),s.memoizedState=[t,e],t)}function JP(t,e,s){return Zd&21?(So(s,e)||(s=rP(),Xs.lanes|=s,Qd|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zi=!0),t.memoizedState=s)}function FH(t,e){var s=ms;ms=s!==0&&4>s?s:4,t(!0);var r=k1.transition;k1.transition={};try{t(!1),e()}finally{ms=s,k1.transition=r}}function eR(){return no().memoizedState}function BH(t,e,s){var r=Fc(t);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},tR(t))nR(e,s);else if(s=LP(t,e,s,r),s!==null){var i=Di();bo(s,t,r,i),sR(s,e,r)}}function zH(t,e,s){var r=Fc(t),i={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(tR(t))nR(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,c=a(o,s);if(i.hasEagerState=!0,i.eagerState=c,So(c,o)){var d=e.interleaved;d===null?(i.next=i,gC(e)):(i.next=d.next,d.next=i),e.interleaved=i;return}}catch{}finally{}s=LP(t,e,i,r),s!==null&&(i=Di(),bo(s,t,r,i),sR(s,e,r))}}function tR(t){var e=t.alternate;return t===Xs||e!==null&&e===Xs}function nR(t,e){qf=L0=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function sR(t,e,s){if(s&4194240){var r=e.lanes;r&=t.pendingLanes,s|=r,e.lanes=s,nC(t,s)}}var O0={readContext:to,useCallback:di,useContext:di,useEffect:di,useImperativeHandle:di,useInsertionEffect:di,useLayoutEffect:di,useMemo:di,useReducer:di,useRef:di,useState:di,useDebugValue:di,useDeferredValue:di,useTransition:di,useMutableSource:di,useSyncExternalStore:di,useId:di,unstable_isNewReconciler:!1},VH={readContext:to,useCallback:function(t,e){return zo().memoizedState=[t,e===void 0?null:e],t},useContext:to,useEffect:XA,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Vx(4194308,4,KP.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Vx(4194308,4,t,e)},useInsertionEffect:function(t,e){return Vx(4,2,t,e)},useMemo:function(t,e){var s=zo();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var r=zo();return e=s!==void 0?s(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=BH.bind(null,Xs,t),[r.memoizedState,t]},useRef:function(t){var e=zo();return t={current:t},e.memoizedState=t},useState:QA,useDebugValue:SC,useDeferredValue:function(t){return zo().memoizedState=t},useTransition:function(){var t=QA(!1),e=t[0];return t=FH.bind(null,t[1]),zo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var r=Xs,i=zo();if(Ws){if(s===void 0)throw Error(tt(407));s=s()}else{if(s=e(),Hr===null)throw Error(tt(349));Zd&30||VP(r,e,s)}i.memoizedState=s;var a={value:s,getSnapshot:e};return i.queue=a,XA(UP.bind(null,r,a,t),[t]),r.flags|=2048,yp(9,$P.bind(null,r,a,s,e),void 0,null),s},useId:function(){var t=zo(),e=Hr.identifierPrefix;if(Ws){var s=Tl,r=Il;s=(r&~(1<<32-jo(r)-1)).toString(32)+s,e=":"+e+"R"+s,s=xp++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=OH++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$H={readContext:to,useCallback:QP,useContext:to,useEffect:CC,useImperativeHandle:ZP,useInsertionEffect:GP,useLayoutEffect:YP,useMemo:XP,useReducer:P1,useRef:qP,useState:function(){return P1(vp)},useDebugValue:SC,useDeferredValue:function(t){var e=no();return JP(e,Mr.memoizedState,t)},useTransition:function(){var t=P1(vp)[0],e=no().memoizedState;return[t,e]},useMutableSource:BP,useSyncExternalStore:zP,useId:eR,unstable_isNewReconciler:!1},UH={readContext:to,useCallback:QP,useContext:to,useEffect:CC,useImperativeHandle:ZP,useInsertionEffect:GP,useLayoutEffect:YP,useMemo:XP,useReducer:R1,useRef:qP,useState:function(){return R1(vp)},useDebugValue:SC,useDeferredValue:function(t){var e=no();return Mr===null?e.memoizedState=t:JP(e,Mr.memoizedState,t)},useTransition:function(){var t=R1(vp)[0],e=no().memoizedState;return[t,e]},useMutableSource:BP,useSyncExternalStore:zP,useId:eR,unstable_isNewReconciler:!1};function ho(t,e){if(t&&t.defaultProps){e=Js({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function Gj(t,e,s,r){e=t.memoizedState,s=s(r,e),s=s==null?e:Js({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var iy={isMounted:function(t){return(t=t._reactInternals)?hu(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var r=Di(),i=Fc(t),a=Dl(r,i);a.payload=e,s!=null&&(a.callback=s),e=Lc(t,a,i),e!==null&&(bo(e,t,i,r),Bx(e,t,i))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var r=Di(),i=Fc(t),a=Dl(r,i);a.tag=1,a.payload=e,s!=null&&(a.callback=s),e=Lc(t,a,i),e!==null&&(bo(e,t,i,r),Bx(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=Di(),r=Fc(t),i=Dl(s,r);i.tag=2,e!=null&&(i.callback=e),e=Lc(t,i,r),e!==null&&(bo(e,t,r,s),Bx(e,t,r))}};function JA(t,e,s,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!up(s,r)||!up(i,a):!0}function rR(t,e,s){var r=!1,i=Wc,a=e.contextType;return typeof a=="object"&&a!==null?a=to(a):(i=Ji(e)?Yd:ji.current,r=e.contextTypes,a=(r=r!=null)?qh(t,i):Wc),e=new e(s,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=iy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function eE(t,e,s,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,r),e.state!==t&&iy.enqueueReplaceState(e,e.state,null)}function Yj(t,e,s,r){var i=t.stateNode;i.props=s,i.state=t.memoizedState,i.refs={},xC(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=to(a):(a=Ji(e)?Yd:ji.current,i.context=qh(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Gj(t,e,a,s),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&iy.enqueueReplaceState(i,i.state,null),P0(t,s,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Zh(t,e){try{var s="",r=e;do s+=xW(r),r=r.return;while(r);var i=s}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function L1(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function Kj(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var WH=typeof WeakMap=="function"?WeakMap:Map;function iR(t,e,s){s=Dl(-1,s),s.tag=3,s.payload={element:null};var r=e.value;return s.callback=function(){B0||(B0=!0,ib=r),Kj(t,e)},s}function aR(t,e,s){s=Dl(-1,s),s.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;s.payload=function(){return r(i)},s.callback=function(){Kj(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){Kj(t,e),typeof r!="function"&&(Oc===null?Oc=new Set([this]):Oc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),s}function tE(t,e,s){var r=t.pingCache;if(r===null){r=t.pingCache=new WH;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(s)||(i.add(s),t=rq.bind(null,t,e,s),e.then(t,t))}function nE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sE(t,e,s,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=Dl(-1,1),e.tag=2,Lc(s,e,1))),s.lanes|=1),t)}var HH=Hl.ReactCurrentOwner,Zi=!1;function _i(t,e,s,r){e.child=t===null?RP(e,null,s,r):Yh(e,t.child,s,r)}function rE(t,e,s,r,i){s=s.render;var a=e.ref;return hh(e,i),r=bC(t,e,s,r,a,i),s=NC(),t!==null&&!Zi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bl(t,e,i)):(Ws&&s&&dC(e),e.flags|=1,_i(t,e,r,i),e.child)}function iE(t,e,s,r,i){if(t===null){var a=s.type;return typeof a=="function"&&!kC(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=a,oR(t,e,a,r,i)):(t=Hx(s.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(s=s.compare,s=s!==null?s:up,s(o,r)&&t.ref===e.ref)return Bl(t,e,i)}return e.flags|=1,t=Bc(a,r),t.ref=e.ref,t.return=e,e.child=t}function oR(t,e,s,r,i){if(t!==null){var a=t.memoizedProps;if(up(a,r)&&t.ref===e.ref)if(Zi=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(Zi=!0);else return e.lanes=t.lanes,Bl(t,e,i)}return Zj(t,e,s,r,i)}function lR(t,e,s){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},As(sh,pa),pa|=s;else{if(!(s&1073741824))return t=a!==null?a.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,As(sh,pa),pa|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:s,As(sh,pa),pa|=r}else a!==null?(r=a.baseLanes|s,e.memoizedState=null):r=s,As(sh,pa),pa|=r;return _i(t,e,i,s),e.child}function cR(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function Zj(t,e,s,r,i){var a=Ji(s)?Yd:ji.current;return a=qh(e,a),hh(e,i),s=bC(t,e,s,r,a,i),r=NC(),t!==null&&!Zi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bl(t,e,i)):(Ws&&r&&dC(e),e.flags|=1,_i(t,e,s,i),e.child)}function aE(t,e,s,r,i){if(Ji(s)){var a=!0;I0(e)}else a=!1;if(hh(e,i),e.stateNode===null)$x(t,e),rR(e,s,r),Yj(e,s,r,i),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var d=o.context,h=s.contextType;typeof h=="object"&&h!==null?h=to(h):(h=Ji(s)?Yd:ji.current,h=qh(e,h));var g=s.getDerivedStateFromProps,m=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||d!==h)&&eE(e,o,r,h),dc=!1;var p=e.memoizedState;o.state=p,P0(e,r,o,i),d=e.memoizedState,c!==r||p!==d||Xi.current||dc?(typeof g=="function"&&(Gj(e,s,g,r),d=e.memoizedState),(c=dc||JA(e,s,c,r,p,d,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),o.props=r,o.state=d,o.context=h,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,OP(t,e),c=e.memoizedProps,h=e.type===e.elementType?c:ho(e.type,c),o.props=h,m=e.pendingProps,p=o.context,d=s.contextType,typeof d=="object"&&d!==null?d=to(d):(d=Ji(s)?Yd:ji.current,d=qh(e,d));var v=s.getDerivedStateFromProps;(g=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||p!==d)&&eE(e,o,r,d),dc=!1,p=e.memoizedState,o.state=p,P0(e,r,o,i);var j=e.memoizedState;c!==m||p!==j||Xi.current||dc?(typeof v=="function"&&(Gj(e,s,v,r),j=e.memoizedState),(h=dc||JA(e,s,h,r,p,j,d)||!1)?(g||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,j,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,j,d)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=j),o.props=r,o.state=j,o.context=d,r=h):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Qj(t,e,s,r,a,i)}function Qj(t,e,s,r,i,a){cR(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&HA(e,s,!1),Bl(t,e,a);r=e.stateNode,HH.current=e;var c=o&&typeof s.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Yh(e,t.child,null,a),e.child=Yh(e,null,c,a)):_i(t,e,c,a),e.memoizedState=r.state,i&&HA(e,s,!0),e.child}function dR(t){var e=t.stateNode;e.pendingContext?WA(t,e.pendingContext,e.pendingContext!==e.context):e.context&&WA(t,e.context,!1),vC(t,e.containerInfo)}function oE(t,e,s,r,i){return Gh(),hC(i),e.flags|=256,_i(t,e,s,r),e.child}var Xj={dehydrated:null,treeContext:null,retryLane:0};function Jj(t){return{baseLanes:t,cachePool:null,transitions:null}}function uR(t,e,s){var r=e.pendingProps,i=Ks.current,a=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),As(Ks,i&1),t===null)return Hj(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=ly(o,r,0,null),t=Ud(t,r,s,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Jj(s),e.memoizedState=Xj,t):AC(e,o));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return qH(t,e,o,r,c,i,s);if(a){a=r.fallback,o=e.mode,i=t.child,c=i.sibling;var d={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=Bc(i,d),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?a=Bc(c,a):(a=Ud(a,o,s,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?Jj(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~s,e.memoizedState=Xj,r}return a=t.child,t=a.sibling,r=Bc(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=s),r.return=e,r.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=r,e.memoizedState=null,r}function AC(t,e){return e=ly({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rx(t,e,s,r){return r!==null&&hC(r),Yh(e,t.child,null,s),t=AC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qH(t,e,s,r,i,a,o){if(s)return e.flags&256?(e.flags&=-257,r=L1(Error(tt(422))),rx(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=ly({mode:"visible",children:r.children},i,0,null),a=Ud(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Yh(e,t.child,null,o),e.child.memoizedState=Jj(o),e.memoizedState=Xj,a);if(!(e.mode&1))return rx(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(tt(419)),r=L1(a,r,void 0),rx(t,e,o,r)}if(c=(o&t.childLanes)!==0,Zi||c){if(r=Hr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Fl(t,i),bo(r,t,i,-1))}return DC(),r=L1(Error(tt(421))),rx(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=iq.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,wa=Rc(i.nextSibling),Na=e,Ws=!0,po=null,t!==null&&(Ha[qa++]=Il,Ha[qa++]=Tl,Ha[qa++]=Kd,Il=t.id,Tl=t.overflow,Kd=e),e=AC(e,r.children),e.flags|=4096,e)}function lE(t,e,s){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),qj(t.return,e,s)}function O1(t,e,s,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=s,a.tailMode=i)}function hR(t,e,s){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(_i(t,e,r.children,s),r=Ks.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lE(t,s,e);else if(t.tag===19)lE(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(As(Ks,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(s=e.child,i=null;s!==null;)t=s.alternate,t!==null&&R0(t)===null&&(i=s),s=s.sibling;s=i,s===null?(i=e.child,e.child=null):(i=s.sibling,s.sibling=null),O1(e,!1,i,s,a);break;case"backwards":for(s=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&R0(t)===null){e.child=i;break}t=i.sibling,i.sibling=s,s=i,i=t}O1(e,!0,s,null,a);break;case"together":O1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $x(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bl(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),Qd|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(tt(153));if(e.child!==null){for(t=e.child,s=Bc(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Bc(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function GH(t,e,s){switch(e.tag){case 3:dR(e),Gh();break;case 5:FP(e);break;case 1:Ji(e.type)&&I0(e);break;case 4:vC(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;As(D0,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(As(Ks,Ks.current&1),e.flags|=128,null):s&e.child.childLanes?uR(t,e,s):(As(Ks,Ks.current&1),t=Bl(t,e,s),t!==null?t.sibling:null);As(Ks,Ks.current&1);break;case 19:if(r=(s&e.childLanes)!==0,t.flags&128){if(r)return hR(t,e,s);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),As(Ks,Ks.current),r)break;return null;case 22:case 23:return e.lanes=0,lR(t,e,s)}return Bl(t,e,s)}var mR,eb,fR,pR;mR=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};eb=function(){};fR=function(t,e,s,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,kd(Jo.current);var a=null;switch(s){case"input":i=bj(t,i),r=bj(t,r),a=[];break;case"select":i=Js({},i,{value:void 0}),r=Js({},r,{value:void 0}),a=[];break;case"textarea":i=Sj(t,i),r=Sj(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=E0)}Ej(s,r);var o;s=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var c=i[h];for(o in c)c.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(rp.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var d=r[h];if(c=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&d!==c&&(d!=null||c!=null))if(h==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(s||(s={}),s[o]=d[o])}else s||(a||(a=[]),a.push(h,s)),s=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(a=a||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(rp.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&Ds("scroll",t),a||c===d||(a=[])):(a=a||[]).push(h,d))}s&&(a=a||[]).push("style",s);var h=a;(e.updateQueue=h)&&(e.flags|=4)}};pR=function(t,e,s,r){s!==r&&(e.flags|=4)};function Xm(t,e){if(!Ws)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ui(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,r=0;if(e)for(var i=t.child;i!==null;)s|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)s|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=s,e}function YH(t,e,s){var r=e.pendingProps;switch(uC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ui(e),null;case 1:return Ji(e.type)&&_0(),ui(e),null;case 3:return r=e.stateNode,Kh(),Ps(Xi),Ps(ji),wC(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(nx(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,po!==null&&(lb(po),po=null))),eb(t,e),ui(e),null;case 5:yC(e);var i=kd(gp.current);if(s=e.type,t!==null&&e.stateNode!=null)fR(t,e,s,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(tt(166));return ui(e),null}if(t=kd(Jo.current),nx(e)){r=e.stateNode,s=e.type;var a=e.memoizedProps;switch(r[Ho]=e,r[fp]=a,t=(e.mode&1)!==0,s){case"dialog":Ds("cancel",r),Ds("close",r);break;case"iframe":case"object":case"embed":Ds("load",r);break;case"video":case"audio":for(i=0;i<Cf.length;i++)Ds(Cf[i],r);break;case"source":Ds("error",r);break;case"img":case"image":case"link":Ds("error",r),Ds("load",r);break;case"details":Ds("toggle",r);break;case"input":xA(r,a),Ds("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ds("invalid",r);break;case"textarea":yA(r,a),Ds("invalid",r)}Ej(s,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&tx(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&tx(r.textContent,c,t),i=["children",""+c]):rp.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Ds("scroll",r)}switch(s){case"input":Gg(r),vA(r,a,!0);break;case"textarea":Gg(r),wA(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=E0)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Uk(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(s,{is:r.is}):(t=o.createElement(s),s==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,s),t[Ho]=e,t[fp]=r,mR(t,e,!1,!1),e.stateNode=t;e:{switch(o=_j(s,r),s){case"dialog":Ds("cancel",t),Ds("close",t),i=r;break;case"iframe":case"object":case"embed":Ds("load",t),i=r;break;case"video":case"audio":for(i=0;i<Cf.length;i++)Ds(Cf[i],t);i=r;break;case"source":Ds("error",t),i=r;break;case"img":case"image":case"link":Ds("error",t),Ds("load",t),i=r;break;case"details":Ds("toggle",t),i=r;break;case"input":xA(t,r),i=bj(t,r),Ds("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Js({},r,{value:void 0}),Ds("invalid",t);break;case"textarea":yA(t,r),i=Sj(t,r),Ds("invalid",t);break;default:i=r}Ej(s,i),c=i;for(a in c)if(c.hasOwnProperty(a)){var d=c[a];a==="style"?qk(t,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Wk(t,d)):a==="children"?typeof d=="string"?(s!=="textarea"||d!=="")&&ip(t,d):typeof d=="number"&&ip(t,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(rp.hasOwnProperty(a)?d!=null&&a==="onScroll"&&Ds("scroll",t):d!=null&&ZN(t,a,d,o))}switch(s){case"input":Gg(t),vA(t,r,!1);break;case"textarea":Gg(t),wA(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Uc(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?lh(t,!!r.multiple,a,!1):r.defaultValue!=null&&lh(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=E0)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ui(e),null;case 6:if(t&&e.stateNode!=null)pR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(tt(166));if(s=kd(gp.current),kd(Jo.current),nx(e)){if(r=e.stateNode,s=e.memoizedProps,r[Ho]=e,(a=r.nodeValue!==s)&&(t=Na,t!==null))switch(t.tag){case 3:tx(r.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tx(r.nodeValue,s,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[Ho]=e,e.stateNode=r}return ui(e),null;case 13:if(Ps(Ks),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ws&&wa!==null&&e.mode&1&&!(e.flags&128))kP(),Gh(),e.flags|=98560,a=!1;else if(a=nx(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(tt(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(tt(317));a[Ho]=e}else Gh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ui(e),a=!1}else po!==null&&(lb(po),po=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ks.current&1?kr===0&&(kr=3):DC())),e.updateQueue!==null&&(e.flags|=4),ui(e),null);case 4:return Kh(),eb(t,e),t===null&&hp(e.stateNode.containerInfo),ui(e),null;case 10:return pC(e.type._context),ui(e),null;case 17:return Ji(e.type)&&_0(),ui(e),null;case 19:if(Ps(Ks),a=e.memoizedState,a===null)return ui(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Xm(a,!1);else{if(kr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=R0(t),o!==null){for(e.flags|=128,Xm(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=s,s=e.child;s!==null;)a=s,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return As(Ks,Ks.current&1|2),e.child}t=t.sibling}a.tail!==null&&mr()>Qh&&(e.flags|=128,r=!0,Xm(a,!1),e.lanes=4194304)}else{if(!r)if(t=R0(o),t!==null){if(e.flags|=128,r=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Xm(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ws)return ui(e),null}else 2*mr()-a.renderingStartTime>Qh&&s!==1073741824&&(e.flags|=128,r=!0,Xm(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(s=a.last,s!==null?s.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=mr(),e.sibling=null,s=Ks.current,As(Ks,r?s&1|2:s&1),e):(ui(e),null);case 22:case 23:return MC(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?pa&1073741824&&(ui(e),e.subtreeFlags&6&&(e.flags|=8192)):ui(e),null;case 24:return null;case 25:return null}throw Error(tt(156,e.tag))}function KH(t,e){switch(uC(e),e.tag){case 1:return Ji(e.type)&&_0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Kh(),Ps(Xi),Ps(ji),wC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yC(e),null;case 13:if(Ps(Ks),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(tt(340));Gh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ps(Ks),null;case 4:return Kh(),null;case 10:return pC(e.type._context),null;case 22:case 23:return MC(),null;case 24:return null;default:return null}}var ix=!1,pi=!1,ZH=typeof WeakSet=="function"?WeakSet:Set,kt=null;function nh(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){lr(t,e,r)}else s.current=null}function tb(t,e,s){try{s()}catch(r){lr(t,e,r)}}var cE=!1;function QH(t,e){if(Fj=C0,t=wP(),cC(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var o=0,c=-1,d=-1,h=0,g=0,m=t,p=null;t:for(;;){for(var v;m!==s||i!==0&&m.nodeType!==3||(c=o+i),m!==a||r!==0&&m.nodeType!==3||(d=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)p=m,m=v;for(;;){if(m===t)break t;if(p===s&&++h===i&&(c=o),p===a&&++g===r&&(d=o),(v=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=v}s=c===-1||d===-1?null:{start:c,end:d}}else s=null}s=s||{start:0,end:0}}else s=null;for(Bj={focusedElem:t,selectionRange:s},C0=!1,kt=e;kt!==null;)if(e=kt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,kt=t;else for(;kt!==null;){e=kt;try{var j=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var N=j.memoizedProps,E=j.memoizedState,_=e.stateNode,S=_.getSnapshotBeforeUpdate(e.elementType===e.type?N:ho(e.type,N),E);_.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(I){lr(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,kt=t;break}kt=e.return}return j=cE,cE=!1,j}function Gf(t,e,s){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&tb(e,s,a)}i=i.next}while(i!==r)}}function ay(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var r=s.create;s.destroy=r()}s=s.next}while(s!==e)}}function nb(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function gR(t){var e=t.alternate;e!==null&&(t.alternate=null,gR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ho],delete e[fp],delete e[$j],delete e[kH],delete e[PH])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xR(t){return t.tag===5||t.tag===3||t.tag===4}function dE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sb(t,e,s){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=E0));else if(r!==4&&(t=t.child,t!==null))for(sb(t,e,s),t=t.sibling;t!==null;)sb(t,e,s),t=t.sibling}function rb(t,e,s){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(rb(t,e,s),t=t.sibling;t!==null;)rb(t,e,s),t=t.sibling}var ni=null,fo=!1;function ec(t,e,s){for(s=s.child;s!==null;)vR(t,e,s),s=s.sibling}function vR(t,e,s){if(Xo&&typeof Xo.onCommitFiberUnmount=="function")try{Xo.onCommitFiberUnmount(Xv,s)}catch{}switch(s.tag){case 5:pi||nh(s,e);case 6:var r=ni,i=fo;ni=null,ec(t,e,s),ni=r,fo=i,ni!==null&&(fo?(t=ni,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):ni.removeChild(s.stateNode));break;case 18:ni!==null&&(fo?(t=ni,s=s.stateNode,t.nodeType===8?T1(t.parentNode,s):t.nodeType===1&&T1(t,s),cp(t)):T1(ni,s.stateNode));break;case 4:r=ni,i=fo,ni=s.stateNode.containerInfo,fo=!0,ec(t,e,s),ni=r,fo=i;break;case 0:case 11:case 14:case 15:if(!pi&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&tb(s,e,o),i=i.next}while(i!==r)}ec(t,e,s);break;case 1:if(!pi&&(nh(s,e),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(c){lr(s,e,c)}ec(t,e,s);break;case 21:ec(t,e,s);break;case 22:s.mode&1?(pi=(r=pi)||s.memoizedState!==null,ec(t,e,s),pi=r):ec(t,e,s);break;default:ec(t,e,s)}}function uE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new ZH),e.forEach(function(r){var i=aq.bind(null,t,r);s.has(r)||(s.add(r),r.then(i,i))})}}function co(t,e){var s=e.deletions;if(s!==null)for(var r=0;r<s.length;r++){var i=s[r];try{var a=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:ni=c.stateNode,fo=!1;break e;case 3:ni=c.stateNode.containerInfo,fo=!0;break e;case 4:ni=c.stateNode.containerInfo,fo=!0;break e}c=c.return}if(ni===null)throw Error(tt(160));vR(a,o,i),ni=null,fo=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(h){lr(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yR(e,t),e=e.sibling}function yR(t,e){var s=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(co(e,t),Bo(t),r&4){try{Gf(3,t,t.return),ay(3,t)}catch(N){lr(t,t.return,N)}try{Gf(5,t,t.return)}catch(N){lr(t,t.return,N)}}break;case 1:co(e,t),Bo(t),r&512&&s!==null&&nh(s,s.return);break;case 5:if(co(e,t),Bo(t),r&512&&s!==null&&nh(s,s.return),t.flags&32){var i=t.stateNode;try{ip(i,"")}catch(N){lr(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=s!==null?s.memoizedProps:a,c=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&Vk(i,a),_j(c,o);var h=_j(c,a);for(o=0;o<d.length;o+=2){var g=d[o],m=d[o+1];g==="style"?qk(i,m):g==="dangerouslySetInnerHTML"?Wk(i,m):g==="children"?ip(i,m):ZN(i,g,m,h)}switch(c){case"input":Nj(i,a);break;case"textarea":$k(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?lh(i,!!a.multiple,v,!1):p!==!!a.multiple&&(a.defaultValue!=null?lh(i,!!a.multiple,a.defaultValue,!0):lh(i,!!a.multiple,a.multiple?[]:"",!1))}i[fp]=a}catch(N){lr(t,t.return,N)}}break;case 6:if(co(e,t),Bo(t),r&4){if(t.stateNode===null)throw Error(tt(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(N){lr(t,t.return,N)}}break;case 3:if(co(e,t),Bo(t),r&4&&s!==null&&s.memoizedState.isDehydrated)try{cp(e.containerInfo)}catch(N){lr(t,t.return,N)}break;case 4:co(e,t),Bo(t);break;case 13:co(e,t),Bo(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(IC=mr())),r&4&&uE(t);break;case 22:if(g=s!==null&&s.memoizedState!==null,t.mode&1?(pi=(h=pi)||g,co(e,t),pi=h):co(e,t),Bo(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!g&&t.mode&1)for(kt=t,g=t.child;g!==null;){for(m=kt=g;kt!==null;){switch(p=kt,v=p.child,p.tag){case 0:case 11:case 14:case 15:Gf(4,p,p.return);break;case 1:nh(p,p.return);var j=p.stateNode;if(typeof j.componentWillUnmount=="function"){r=p,s=p.return;try{e=r,j.props=e.memoizedProps,j.state=e.memoizedState,j.componentWillUnmount()}catch(N){lr(r,s,N)}}break;case 5:nh(p,p.return);break;case 22:if(p.memoizedState!==null){mE(m);continue}}v!==null?(v.return=p,kt=v):mE(m)}g=g.sibling}e:for(g=null,m=t;;){if(m.tag===5){if(g===null){g=m;try{i=m.stateNode,h?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=m.stateNode,d=m.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=Hk("display",o))}catch(N){lr(t,t.return,N)}}}else if(m.tag===6){if(g===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(N){lr(t,t.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;g===m&&(g=null),m=m.return}g===m&&(g=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:co(e,t),Bo(t),r&4&&uE(t);break;case 21:break;default:co(e,t),Bo(t)}}function Bo(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(xR(s)){var r=s;break e}s=s.return}throw Error(tt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ip(i,""),r.flags&=-33);var a=dE(t);rb(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,c=dE(t);sb(t,c,o);break;default:throw Error(tt(161))}}catch(d){lr(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function XH(t,e,s){kt=t,wR(t)}function wR(t,e,s){for(var r=(t.mode&1)!==0;kt!==null;){var i=kt,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ix;if(!o){var c=i.alternate,d=c!==null&&c.memoizedState!==null||pi;c=ix;var h=pi;if(ix=o,(pi=d)&&!h)for(kt=i;kt!==null;)o=kt,d=o.child,o.tag===22&&o.memoizedState!==null?fE(i):d!==null?(d.return=o,kt=d):fE(i);for(;a!==null;)kt=a,wR(a),a=a.sibling;kt=i,ix=c,pi=h}hE(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,kt=a):hE(t)}}function hE(t){for(;kt!==null;){var e=kt;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pi||ay(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pi)if(s===null)r.componentDidMount();else{var i=e.elementType===e.type?s.memoizedProps:ho(e.type,s.memoizedProps);r.componentDidUpdate(i,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&ZA(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}ZA(e,o,s)}break;case 5:var c=e.stateNode;if(s===null&&e.flags&4){s=c;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&s.focus();break;case"img":d.src&&(s.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var g=h.memoizedState;if(g!==null){var m=g.dehydrated;m!==null&&cp(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}pi||e.flags&512&&nb(e)}catch(p){lr(e,e.return,p)}}if(e===t){kt=null;break}if(s=e.sibling,s!==null){s.return=e.return,kt=s;break}kt=e.return}}function mE(t){for(;kt!==null;){var e=kt;if(e===t){kt=null;break}var s=e.sibling;if(s!==null){s.return=e.return,kt=s;break}kt=e.return}}function fE(t){for(;kt!==null;){var e=kt;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{ay(4,e)}catch(d){lr(e,s,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(d){lr(e,i,d)}}var a=e.return;try{nb(e)}catch(d){lr(e,a,d)}break;case 5:var o=e.return;try{nb(e)}catch(d){lr(e,o,d)}}}catch(d){lr(e,e.return,d)}if(e===t){kt=null;break}var c=e.sibling;if(c!==null){c.return=e.return,kt=c;break}kt=e.return}}var JH=Math.ceil,F0=Hl.ReactCurrentDispatcher,EC=Hl.ReactCurrentOwner,Za=Hl.ReactCurrentBatchConfig,Xn=0,Hr=null,wr=null,ii=0,pa=0,sh=sd(0),kr=0,wp=null,Qd=0,oy=0,_C=0,Yf=null,Ki=null,IC=0,Qh=1/0,Nl=null,B0=!1,ib=null,Oc=null,ax=!1,_c=null,z0=0,Kf=0,ab=null,Ux=-1,Wx=0;function Di(){return Xn&6?mr():Ux!==-1?Ux:Ux=mr()}function Fc(t){return t.mode&1?Xn&2&&ii!==0?ii&-ii:LH.transition!==null?(Wx===0&&(Wx=rP()),Wx):(t=ms,t!==0||(t=window.event,t=t===void 0?16:uP(t.type)),t):1}function bo(t,e,s,r){if(50<Kf)throw Kf=0,ab=null,Error(tt(185));lg(t,s,r),(!(Xn&2)||t!==Hr)&&(t===Hr&&(!(Xn&2)&&(oy|=s),kr===4&&fc(t,ii)),ea(t,r),s===1&&Xn===0&&!(e.mode&1)&&(Qh=mr()+500,sy&&rd()))}function ea(t,e){var s=t.callbackNode;LW(t,e);var r=N0(t,t===Hr?ii:0);if(r===0)s!==null&&NA(s),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(s!=null&&NA(s),e===1)t.tag===0?RH(pE.bind(null,t)):TP(pE.bind(null,t)),MH(function(){!(Xn&6)&&rd()}),s=null;else{switch(iP(r)){case 1:s=tC;break;case 4:s=nP;break;case 16:s=b0;break;case 536870912:s=sP;break;default:s=b0}s=_R(s,jR.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function jR(t,e){if(Ux=-1,Wx=0,Xn&6)throw Error(tt(327));var s=t.callbackNode;if(mh()&&t.callbackNode!==s)return null;var r=N0(t,t===Hr?ii:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=V0(t,r);else{e=r;var i=Xn;Xn|=2;var a=NR();(Hr!==t||ii!==e)&&(Nl=null,Qh=mr()+500,$d(t,e));do try{nq();break}catch(c){bR(t,c)}while(!0);fC(),F0.current=a,Xn=i,wr!==null?e=0:(Hr=null,ii=0,e=kr)}if(e!==0){if(e===2&&(i=kj(t),i!==0&&(r=i,e=ob(t,i))),e===1)throw s=wp,$d(t,0),fc(t,r),ea(t,mr()),s;if(e===6)fc(t,r);else{if(i=t.current.alternate,!(r&30)&&!eq(i)&&(e=V0(t,r),e===2&&(a=kj(t),a!==0&&(r=a,e=ob(t,a))),e===1))throw s=wp,$d(t,0),fc(t,r),ea(t,mr()),s;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(tt(345));case 2:bd(t,Ki,Nl);break;case 3:if(fc(t,r),(r&130023424)===r&&(e=IC+500-mr(),10<e)){if(N0(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Di(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Vj(bd.bind(null,t,Ki,Nl),e);break}bd(t,Ki,Nl);break;case 4:if(fc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-jo(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=mr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JH(r/1960))-r,10<r){t.timeoutHandle=Vj(bd.bind(null,t,Ki,Nl),r);break}bd(t,Ki,Nl);break;case 5:bd(t,Ki,Nl);break;default:throw Error(tt(329))}}}return ea(t,mr()),t.callbackNode===s?jR.bind(null,t):null}function ob(t,e){var s=Yf;return t.current.memoizedState.isDehydrated&&($d(t,e).flags|=256),t=V0(t,e),t!==2&&(e=Ki,Ki=s,e!==null&&lb(e)),t}function lb(t){Ki===null?Ki=t:Ki.push.apply(Ki,t)}function eq(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var i=s[r],a=i.getSnapshot;i=i.value;try{if(!So(a(),i))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fc(t,e){for(e&=~_C,e&=~oy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-jo(e),r=1<<s;t[s]=-1,e&=~r}}function pE(t){if(Xn&6)throw Error(tt(327));mh();var e=N0(t,0);if(!(e&1))return ea(t,mr()),null;var s=V0(t,e);if(t.tag!==0&&s===2){var r=kj(t);r!==0&&(e=r,s=ob(t,r))}if(s===1)throw s=wp,$d(t,0),fc(t,e),ea(t,mr()),s;if(s===6)throw Error(tt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bd(t,Ki,Nl),ea(t,mr()),null}function TC(t,e){var s=Xn;Xn|=1;try{return t(e)}finally{Xn=s,Xn===0&&(Qh=mr()+500,sy&&rd())}}function Xd(t){_c!==null&&_c.tag===0&&!(Xn&6)&&mh();var e=Xn;Xn|=1;var s=Za.transition,r=ms;try{if(Za.transition=null,ms=1,t)return t()}finally{ms=r,Za.transition=s,Xn=e,!(Xn&6)&&rd()}}function MC(){pa=sh.current,Ps(sh)}function $d(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,TH(s)),wr!==null)for(s=wr.return;s!==null;){var r=s;switch(uC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_0();break;case 3:Kh(),Ps(Xi),Ps(ji),wC();break;case 5:yC(r);break;case 4:Kh();break;case 13:Ps(Ks);break;case 19:Ps(Ks);break;case 10:pC(r.type._context);break;case 22:case 23:MC()}s=s.return}if(Hr=t,wr=t=Bc(t.current,null),ii=pa=e,kr=0,wp=null,_C=oy=Qd=0,Ki=Yf=null,Dd!==null){for(e=0;e<Dd.length;e++)if(s=Dd[e],r=s.interleaved,r!==null){s.interleaved=null;var i=r.next,a=s.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}s.pending=r}Dd=null}return t}function bR(t,e){do{var s=wr;try{if(fC(),zx.current=O0,L0){for(var r=Xs.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}L0=!1}if(Zd=0,$r=Mr=Xs=null,qf=!1,xp=0,EC.current=null,s===null||s.return===null){kr=1,wp=e,wr=null;break}e:{var a=t,o=s.return,c=s,d=e;if(e=ii,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,g=c,m=g.tag;if(!(g.mode&1)&&(m===0||m===11||m===15)){var p=g.alternate;p?(g.updateQueue=p.updateQueue,g.memoizedState=p.memoizedState,g.lanes=p.lanes):(g.updateQueue=null,g.memoizedState=null)}var v=nE(o);if(v!==null){v.flags&=-257,sE(v,o,c,a,e),v.mode&1&&tE(a,h,e),e=v,d=h;var j=e.updateQueue;if(j===null){var N=new Set;N.add(d),e.updateQueue=N}else j.add(d);break e}else{if(!(e&1)){tE(a,h,e),DC();break e}d=Error(tt(426))}}else if(Ws&&c.mode&1){var E=nE(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),sE(E,o,c,a,e),hC(Zh(d,c));break e}}a=d=Zh(d,c),kr!==4&&(kr=2),Yf===null?Yf=[a]:Yf.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var _=iR(a,d,e);KA(a,_);break e;case 1:c=d;var S=a.type,C=a.stateNode;if(!(a.flags&128)&&(typeof S.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Oc===null||!Oc.has(C)))){a.flags|=65536,e&=-e,a.lanes|=e;var I=aR(a,c,e);KA(a,I);break e}}a=a.return}while(a!==null)}SR(s)}catch(P){e=P,wr===s&&s!==null&&(wr=s=s.return);continue}break}while(!0)}function NR(){var t=F0.current;return F0.current=O0,t===null?O0:t}function DC(){(kr===0||kr===3||kr===2)&&(kr=4),Hr===null||!(Qd&268435455)&&!(oy&268435455)||fc(Hr,ii)}function V0(t,e){var s=Xn;Xn|=2;var r=NR();(Hr!==t||ii!==e)&&(Nl=null,$d(t,e));do try{tq();break}catch(i){bR(t,i)}while(!0);if(fC(),Xn=s,F0.current=r,wr!==null)throw Error(tt(261));return Hr=null,ii=0,kr}function tq(){for(;wr!==null;)CR(wr)}function nq(){for(;wr!==null&&!EW();)CR(wr)}function CR(t){var e=ER(t.alternate,t,pa);t.memoizedProps=t.pendingProps,e===null?SR(t):wr=e,EC.current=null}function SR(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=KH(s,e),s!==null){s.flags&=32767,wr=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kr=6,wr=null;return}}else if(s=YH(s,e,pa),s!==null){wr=s;return}if(e=e.sibling,e!==null){wr=e;return}wr=e=t}while(e!==null);kr===0&&(kr=5)}function bd(t,e,s){var r=ms,i=Za.transition;try{Za.transition=null,ms=1,sq(t,e,s,r)}finally{Za.transition=i,ms=r}return null}function sq(t,e,s,r){do mh();while(_c!==null);if(Xn&6)throw Error(tt(327));s=t.finishedWork;var i=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(tt(177));t.callbackNode=null,t.callbackPriority=0;var a=s.lanes|s.childLanes;if(OW(t,a),t===Hr&&(wr=Hr=null,ii=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||ax||(ax=!0,_R(b0,function(){return mh(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=Za.transition,Za.transition=null;var o=ms;ms=1;var c=Xn;Xn|=4,EC.current=null,QH(t,s),yR(s,t),NH(Bj),C0=!!Fj,Bj=Fj=null,t.current=s,XH(s),_W(),Xn=c,ms=o,Za.transition=a}else t.current=s;if(ax&&(ax=!1,_c=t,z0=i),a=t.pendingLanes,a===0&&(Oc=null),MW(s.stateNode),ea(t,mr()),e!==null)for(r=t.onRecoverableError,s=0;s<e.length;s++)i=e[s],r(i.value,{componentStack:i.stack,digest:i.digest});if(B0)throw B0=!1,t=ib,ib=null,t;return z0&1&&t.tag!==0&&mh(),a=t.pendingLanes,a&1?t===ab?Kf++:(Kf=0,ab=t):Kf=0,rd(),null}function mh(){if(_c!==null){var t=iP(z0),e=Za.transition,s=ms;try{if(Za.transition=null,ms=16>t?16:t,_c===null)var r=!1;else{if(t=_c,_c=null,z0=0,Xn&6)throw Error(tt(331));var i=Xn;for(Xn|=4,kt=t.current;kt!==null;){var a=kt,o=a.child;if(kt.flags&16){var c=a.deletions;if(c!==null){for(var d=0;d<c.length;d++){var h=c[d];for(kt=h;kt!==null;){var g=kt;switch(g.tag){case 0:case 11:case 15:Gf(8,g,a)}var m=g.child;if(m!==null)m.return=g,kt=m;else for(;kt!==null;){g=kt;var p=g.sibling,v=g.return;if(gR(g),g===h){kt=null;break}if(p!==null){p.return=v,kt=p;break}kt=v}}}var j=a.alternate;if(j!==null){var N=j.child;if(N!==null){j.child=null;do{var E=N.sibling;N.sibling=null,N=E}while(N!==null)}}kt=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,kt=o;else e:for(;kt!==null;){if(a=kt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Gf(9,a,a.return)}var _=a.sibling;if(_!==null){_.return=a.return,kt=_;break e}kt=a.return}}var S=t.current;for(kt=S;kt!==null;){o=kt;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,kt=C;else e:for(o=S;kt!==null;){if(c=kt,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:ay(9,c)}}catch(P){lr(c,c.return,P)}if(c===o){kt=null;break e}var I=c.sibling;if(I!==null){I.return=c.return,kt=I;break e}kt=c.return}}if(Xn=i,rd(),Xo&&typeof Xo.onPostCommitFiberRoot=="function")try{Xo.onPostCommitFiberRoot(Xv,t)}catch{}r=!0}return r}finally{ms=s,Za.transition=e}}return!1}function gE(t,e,s){e=Zh(s,e),e=iR(t,e,1),t=Lc(t,e,1),e=Di(),t!==null&&(lg(t,1,e),ea(t,e))}function lr(t,e,s){if(t.tag===3)gE(t,t,s);else for(;e!==null;){if(e.tag===3){gE(e,t,s);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Oc===null||!Oc.has(r))){t=Zh(s,t),t=aR(e,t,1),e=Lc(e,t,1),t=Di(),e!==null&&(lg(e,1,t),ea(e,t));break}}e=e.return}}function rq(t,e,s){var r=t.pingCache;r!==null&&r.delete(e),e=Di(),t.pingedLanes|=t.suspendedLanes&s,Hr===t&&(ii&s)===s&&(kr===4||kr===3&&(ii&130023424)===ii&&500>mr()-IC?$d(t,0):_C|=s),ea(t,e)}function AR(t,e){e===0&&(t.mode&1?(e=Zg,Zg<<=1,!(Zg&130023424)&&(Zg=4194304)):e=1);var s=Di();t=Fl(t,e),t!==null&&(lg(t,e,s),ea(t,s))}function iq(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),AR(t,s)}function aq(t,e){var s=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(s=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(tt(314))}r!==null&&r.delete(e),AR(t,s)}var ER;ER=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xi.current)Zi=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return Zi=!1,GH(t,e,s);Zi=!!(t.flags&131072)}else Zi=!1,Ws&&e.flags&1048576&&MP(e,M0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$x(t,e),t=e.pendingProps;var i=qh(e,ji.current);hh(e,s),i=bC(null,e,r,t,i,s);var a=NC();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ji(r)?(a=!0,I0(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,xC(e),i.updater=iy,e.stateNode=i,i._reactInternals=e,Yj(e,r,t,s),e=Qj(null,e,r,!0,a,s)):(e.tag=0,Ws&&a&&dC(e),_i(null,e,i,s),e=e.child),e;case 16:r=e.elementType;e:{switch($x(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=lq(r),t=ho(r,t),i){case 0:e=Zj(null,e,r,t,s);break e;case 1:e=aE(null,e,r,t,s);break e;case 11:e=rE(null,e,r,t,s);break e;case 14:e=iE(null,e,r,ho(r.type,t),s);break e}throw Error(tt(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ho(r,i),Zj(t,e,r,i,s);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ho(r,i),aE(t,e,r,i,s);case 3:e:{if(dR(e),t===null)throw Error(tt(387));r=e.pendingProps,a=e.memoizedState,i=a.element,OP(t,e),P0(e,r,null,s);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Zh(Error(tt(423)),e),e=oE(t,e,r,s,i);break e}else if(r!==i){i=Zh(Error(tt(424)),e),e=oE(t,e,r,s,i);break e}else for(wa=Rc(e.stateNode.containerInfo.firstChild),Na=e,Ws=!0,po=null,s=RP(e,null,r,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Gh(),r===i){e=Bl(t,e,s);break e}_i(t,e,r,s)}e=e.child}return e;case 5:return FP(e),t===null&&Hj(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,zj(r,i)?o=null:a!==null&&zj(r,a)&&(e.flags|=32),cR(t,e),_i(t,e,o,s),e.child;case 6:return t===null&&Hj(e),null;case 13:return uR(t,e,s);case 4:return vC(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yh(e,null,r,s):_i(t,e,r,s),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ho(r,i),rE(t,e,r,i,s);case 7:return _i(t,e,e.pendingProps,s),e.child;case 8:return _i(t,e,e.pendingProps.children,s),e.child;case 12:return _i(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,As(D0,r._currentValue),r._currentValue=o,a!==null)if(So(a.value,o)){if(a.children===i.children&&!Xi.current){e=Bl(t,e,s);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var d=c.firstContext;d!==null;){if(d.context===r){if(a.tag===1){d=Dl(-1,s&-s),d.tag=2;var h=a.updateQueue;if(h!==null){h=h.shared;var g=h.pending;g===null?d.next=d:(d.next=g.next,g.next=d),h.pending=d}}a.lanes|=s,d=a.alternate,d!==null&&(d.lanes|=s),qj(a.return,s,e),c.lanes|=s;break}d=d.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(tt(341));o.lanes|=s,c=o.alternate,c!==null&&(c.lanes|=s),qj(o,s,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}_i(t,e,i.children,s),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,hh(e,s),i=to(i),r=r(i),e.flags|=1,_i(t,e,r,s),e.child;case 14:return r=e.type,i=ho(r,e.pendingProps),i=ho(r.type,i),iE(t,e,r,i,s);case 15:return oR(t,e,e.type,e.pendingProps,s);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ho(r,i),$x(t,e),e.tag=1,Ji(r)?(t=!0,I0(e)):t=!1,hh(e,s),rR(e,r,i),Yj(e,r,i,s),Qj(null,e,r,!0,t,s);case 19:return hR(t,e,s);case 22:return lR(t,e,s)}throw Error(tt(156,e.tag))};function _R(t,e){return tP(t,e)}function oq(t,e,s,r){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ka(t,e,s,r){return new oq(t,e,s,r)}function kC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lq(t){if(typeof t=="function")return kC(t)?1:0;if(t!=null){if(t=t.$$typeof,t===XN)return 11;if(t===JN)return 14}return 2}function Bc(t,e){var s=t.alternate;return s===null?(s=Ka(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Hx(t,e,s,r,i,a){var o=2;if(r=t,typeof t=="function")kC(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Gu:return Ud(s.children,i,a,e);case QN:o=8,i|=8;break;case vj:return t=Ka(12,s,e,i|2),t.elementType=vj,t.lanes=a,t;case yj:return t=Ka(13,s,e,i),t.elementType=yj,t.lanes=a,t;case wj:return t=Ka(19,s,e,i),t.elementType=wj,t.lanes=a,t;case Fk:return ly(s,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Lk:o=10;break e;case Ok:o=9;break e;case XN:o=11;break e;case JN:o=14;break e;case cc:o=16,r=null;break e}throw Error(tt(130,t==null?t:typeof t,""))}return e=Ka(o,s,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Ud(t,e,s,r){return t=Ka(7,t,r,e),t.lanes=s,t}function ly(t,e,s,r){return t=Ka(22,t,r,e),t.elementType=Fk,t.lanes=s,t.stateNode={isHidden:!1},t}function F1(t,e,s){return t=Ka(6,t,null,e),t.lanes=s,t}function B1(t,e,s){return e=Ka(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cq(t,e,s,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=y1(0),this.expirationTimes=y1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=y1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function PC(t,e,s,r,i,a,o,c,d){return t=new cq(t,e,s,c,d),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Ka(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},xC(a),t}function dq(t,e,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:s}}function IR(t){if(!t)return Wc;t=t._reactInternals;e:{if(hu(t)!==t||t.tag!==1)throw Error(tt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ji(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(tt(171))}if(t.tag===1){var s=t.type;if(Ji(s))return IP(t,s,e)}return e}function TR(t,e,s,r,i,a,o,c,d){return t=PC(s,r,!0,t,i,a,o,c,d),t.context=IR(null),s=t.current,r=Di(),i=Fc(s),a=Dl(r,i),a.callback=e??null,Lc(s,a,i),t.current.lanes=i,lg(t,i,r),ea(t,r),t}function cy(t,e,s,r){var i=e.current,a=Di(),o=Fc(i);return s=IR(s),e.context===null?e.context=s:e.pendingContext=s,e=Dl(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lc(i,e,o),t!==null&&(bo(t,i,o,a),Bx(t,i,o)),o}function $0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function RC(t,e){xE(t,e),(t=t.alternate)&&xE(t,e)}function uq(){return null}var MR=typeof reportError=="function"?reportError:function(t){console.error(t)};function LC(t){this._internalRoot=t}dy.prototype.render=LC.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(tt(409));cy(t,e,null,null)};dy.prototype.unmount=LC.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xd(function(){cy(null,t,null,null)}),e[Ol]=null}};function dy(t){this._internalRoot=t}dy.prototype.unstable_scheduleHydration=function(t){if(t){var e=lP();t={blockedOn:null,target:t,priority:e};for(var s=0;s<mc.length&&e!==0&&e<mc[s].priority;s++);mc.splice(s,0,t),s===0&&dP(t)}};function OC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function uy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vE(){}function hq(t,e,s,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var h=$0(o);a.call(h)}}var o=TR(e,r,t,0,null,!1,!1,"",vE);return t._reactRootContainer=o,t[Ol]=o.current,hp(t.nodeType===8?t.parentNode:t),Xd(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var h=$0(d);c.call(h)}}var d=PC(t,0,!1,null,null,!1,!1,"",vE);return t._reactRootContainer=d,t[Ol]=d.current,hp(t.nodeType===8?t.parentNode:t),Xd(function(){cy(e,d,s,r)}),d}function hy(t,e,s,r,i){var a=s._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var c=i;i=function(){var d=$0(o);c.call(d)}}cy(e,o,t,i)}else o=hq(s,e,t,i,r);return $0(o)}aP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=Nf(e.pendingLanes);s!==0&&(nC(e,s|1),ea(e,mr()),!(Xn&6)&&(Qh=mr()+500,rd()))}break;case 13:Xd(function(){var r=Fl(t,1);if(r!==null){var i=Di();bo(r,t,1,i)}}),RC(t,1)}};sC=function(t){if(t.tag===13){var e=Fl(t,134217728);if(e!==null){var s=Di();bo(e,t,134217728,s)}RC(t,134217728)}};oP=function(t){if(t.tag===13){var e=Fc(t),s=Fl(t,e);if(s!==null){var r=Di();bo(s,t,e,r)}RC(t,e)}};lP=function(){return ms};cP=function(t,e){var s=ms;try{return ms=t,e()}finally{ms=s}};Tj=function(t,e,s){switch(e){case"input":if(Nj(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var r=s[e];if(r!==t&&r.form===t.form){var i=ny(r);if(!i)throw Error(tt(90));zk(r),Nj(r,i)}}}break;case"textarea":$k(t,s);break;case"select":e=s.value,e!=null&&lh(t,!!s.multiple,e,!1)}};Kk=TC;Zk=Xd;var mq={usingClientEntryPoint:!1,Events:[dg,Qu,ny,Gk,Yk,TC]},Jm={findFiberByHostInstance:Md,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fq={bundleType:Jm.bundleType,version:Jm.version,rendererPackageName:Jm.rendererPackageName,rendererConfig:Jm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Jk(t),t===null?null:t.stateNode},findFiberByHostInstance:Jm.findFiberByHostInstance||uq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ox=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ox.isDisabled&&ox.supportsFiber)try{Xv=ox.inject(fq),Xo=ox}catch{}}Ia.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mq;Ia.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!OC(e))throw Error(tt(200));return dq(t,e,null,s)};Ia.createRoot=function(t,e){if(!OC(t))throw Error(tt(299));var s=!1,r="",i=MR;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=PC(t,1,!1,null,null,s,!1,r,i),t[Ol]=e.current,hp(t.nodeType===8?t.parentNode:t),new LC(e)};Ia.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(tt(188)):(t=Object.keys(t).join(","),Error(tt(268,t)));return t=Jk(e),t=t===null?null:t.stateNode,t};Ia.flushSync=function(t){return Xd(t)};Ia.hydrate=function(t,e,s){if(!uy(e))throw Error(tt(200));return hy(null,t,e,!0,s)};Ia.hydrateRoot=function(t,e,s){if(!OC(t))throw Error(tt(405));var r=s!=null&&s.hydratedSources||null,i=!1,a="",o=MR;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),e=TR(e,null,t,1,s??null,i,!1,a,o),t[Ol]=e.current,hp(t),r)for(t=0;t<r.length;t++)s=r[t],i=s._getVersion,i=i(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,i]:e.mutableSourceEagerHydrationData.push(s,i);return new dy(e)};Ia.render=function(t,e,s){if(!uy(e))throw Error(tt(200));return hy(null,t,e,!1,s)};Ia.unmountComponentAtNode=function(t){if(!uy(t))throw Error(tt(40));return t._reactRootContainer?(Xd(function(){hy(null,null,t,!1,function(){t._reactRootContainer=null,t[Ol]=null})}),!0):!1};Ia.unstable_batchedUpdates=TC;Ia.unstable_renderSubtreeIntoContainer=function(t,e,s,r){if(!uy(s))throw Error(tt(200));if(t==null||t._reactInternals===void 0)throw Error(tt(38));return hy(t,e,s,!1,r)};Ia.version="18.3.1-next-f1338f8080-20240426";function DR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(DR)}catch(t){console.error(t)}}DR(),Dk.exports=Ia;var ra=Dk.exports;const pq=td(ra);var kR,yE=ra;kR=yE.createRoot,yE.hydrateRoot;function gq(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var s,r,i,a,o=[],c="",d=t.split("/");for(d[0]||d.shift();i=d.shift();)s=i[0],s==="*"?(o.push(s),c+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):s===":"?(r=i.indexOf("?",1),a=i.indexOf(".",1),o.push(i.substring(1,~r?r:~a?a:i.length)),c+=~r&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(c+=(~r?"?":"")+"\\"+i.substring(a))):c+="/"+i;return{keys:o,pattern:new RegExp("^"+c+(e?"(?=$|/)":"/?$"),"i")}}var PR={exports:{}},RR={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xh=y;function xq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vq=typeof Object.is=="function"?Object.is:xq,yq=Xh.useState,wq=Xh.useEffect,jq=Xh.useLayoutEffect,bq=Xh.useDebugValue;function Nq(t,e){var s=e(),r=yq({inst:{value:s,getSnapshot:e}}),i=r[0].inst,a=r[1];return jq(function(){i.value=s,i.getSnapshot=e,z1(i)&&a({inst:i})},[t,s,e]),wq(function(){return z1(i)&&a({inst:i}),t(function(){z1(i)&&a({inst:i})})},[t]),bq(s),s}function z1(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!vq(t,s)}catch{return!0}}function Cq(t,e){return e()}var Sq=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Cq:Nq;RR.useSyncExternalStore=Xh.useSyncExternalStore!==void 0?Xh.useSyncExternalStore:Sq;PR.exports=RR;var LR=PR.exports;const Aq=Tk.useInsertionEffect,Eq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_q=Eq?y.useLayoutEffect:y.useEffect,Iq=Aq||_q,OR=t=>{const e=y.useRef([t,(...s)=>e[0](...s)]).current;return Iq(()=>{e[0]=t}),e[1]},Tq="popstate",FC="pushState",BC="replaceState",Mq="hashchange",wE=[Tq,FC,BC,Mq],Dq=t=>{for(const e of wE)addEventListener(e,t);return()=>{for(const e of wE)removeEventListener(e,t)}},FR=(t,e)=>LR.useSyncExternalStore(Dq,t,e),kq=()=>location.search,Pq=({ssrSearch:t=""}={})=>FR(kq,()=>t),jE=()=>location.pathname,Rq=({ssrPath:t}={})=>FR(jE,t?()=>t:jE),Lq=(t,{replace:e=!1,state:s=null}={})=>history[e?BC:FC](s,"",t),Oq=(t={})=>[Rq(t),Lq],bE=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[bE]>"u"){for(const t of[FC,BC]){const e=history[t];history[t]=function(){const s=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),s}}Object.defineProperty(window,bE,{value:!0})}const Fq=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",BR=(t="")=>t==="/"?"":t,Bq=(t,e)=>t[0]==="~"?t.slice(1):BR(e)+t,zq=(t="",e)=>Fq(NE(BR(t)),NE(e)),NE=t=>{try{return decodeURI(t)}catch{return t}},zR={hook:Oq,searchHook:Pq,parser:gq,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},VR=y.createContext(zR),xm=()=>y.useContext(VR),$R={},UR=y.createContext($R),id=()=>y.useContext(UR),my=t=>{const[e,s]=t.hook(t);return[zq(t.base,e),OR((r,i)=>s(Bq(r,t.base),i))]},_n=()=>my(xm()),zC=(t,e,s,r)=>{const{pattern:i,keys:a}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=i.exec(s)||[],[c,...d]=o;return c!==void 0?[!0,(()=>{const h=a!==!1?Object.fromEntries(a.map((m,p)=>[m,d[p]])):o.groups;let g={...d};return h&&Object.assign(g,h),g})(),...r?[c]:[]]:[!1,null]},ha=t=>zC(xm().parser,t,_n()[0]),Vq=({children:t,...e})=>{var g,m;const s=xm(),r=e.hook?zR:s;let i=r;const[a,o]=((g=e.ssrPath)==null?void 0:g.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=a),e.hrefs=e.hrefs??((m=e.hook)==null?void 0:m.hrefs);let c=y.useRef({}),d=c.current,h=d;for(let p in r){const v=p==="base"?r[p]+(e[p]||""):e[p]||r[p];d===h&&v!==h[p]&&(c.current=h={...h}),h[p]=v,v!==r[p]&&(i=h)}return y.createElement(VR.Provider,{value:i,children:t})},CE=({children:t,component:e},s)=>e?y.createElement(e,{params:s}):typeof t=="function"?t(s):t,$q=t=>{let e=y.useRef($R),s=e.current;for(const r in t)t[r]!==s[r]&&(s=t);return Object.keys(t).length===0&&(s=t),e.current=s},sn=({path:t,nest:e,match:s,...r})=>{const i=xm(),[a]=my(i),[o,c,d]=s??zC(i.parser,t,a,e),h=$q({...id(),...c});if(!o)return null;const g=d?y.createElement(Vq,{base:d},CE(r,h)):CE(r,h);return y.createElement(UR.Provider,{value:h,children:g})},rs=y.forwardRef((t,e)=>{const s=xm(),[r,i]=my(s),{to:a="",href:o=a,onClick:c,asChild:d,children:h,className:g,replace:m,state:p,...v}=t,j=OR(E=>{E.ctrlKey||E.metaKey||E.altKey||E.shiftKey||E.button!==0||(c==null||c(E),E.defaultPrevented||(E.preventDefault(),i(o,t)))}),N=s.hrefs(o[0]==="~"?o.slice(1):s.base+o,s);return d&&y.isValidElement(h)?y.cloneElement(h,{onClick:j,href:N}):y.createElement("a",{...v,onClick:j,href:N,className:g!=null&&g.call?g(r===o):g,children:h,ref:e})}),WR=t=>Array.isArray(t)?t.flatMap(e=>WR(e&&e.type===y.Fragment?e.props.children:e)):[t],SE=({children:t,location:e})=>{const s=xm(),[r]=my(s);for(const i of WR(t)){let a=0;if(y.isValidElement(i)&&(a=zC(s.parser,i.props.path,e||r,i.props.nest))[0])return y.cloneElement(i,{match:a})}return null};var vm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Jd=typeof window>"u"||"Deno"in globalThis;function $a(){}function Uq(t,e){return typeof t=="function"?t(e):t}function cb(t){return typeof t=="number"&&t>=0&&t!==1/0}function HR(t,e){return Math.max(t+(e||0)-Date.now(),0)}function fh(t,e){return typeof t=="function"?t(e):t}function go(t,e){return typeof t=="function"?t(e):t}function AE(t,e){const{type:s="all",exact:r,fetchStatus:i,predicate:a,queryKey:o,stale:c}=t;if(o){if(r){if(e.queryHash!==VC(o,e.options))return!1}else if(!jp(e.queryKey,o))return!1}if(s!=="all"){const d=e.isActive();if(s==="active"&&!d||s==="inactive"&&d)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||i&&i!==e.state.fetchStatus||a&&!a(e))}function EE(t,e){const{exact:s,status:r,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(s){if(eu(e.options.mutationKey)!==eu(a))return!1}else if(!jp(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function VC(t,e){return((e==null?void 0:e.queryKeyHashFn)||eu)(t)}function eu(t){return JSON.stringify(t,(e,s)=>db(s)?Object.keys(s).sort().reduce((r,i)=>(r[i]=s[i],r),{}):s)}function jp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(s=>!jp(t[s],e[s])):!1}function qR(t,e){if(t===e)return t;const s=_E(t)&&_E(e);if(s||db(t)&&db(e)){const r=s?t:Object.keys(t),i=r.length,a=s?e:Object.keys(e),o=a.length,c=s?[]:{};let d=0;for(let h=0;h<o;h++){const g=s?h:a[h];(!s&&r.includes(g)||s)&&t[g]===void 0&&e[g]===void 0?(c[g]=void 0,d++):(c[g]=qR(t[g],e[g]),c[g]===t[g]&&t[g]!==void 0&&d++)}return i===o&&d===i?t:c}return e}function U0(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}function _E(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function db(t){if(!IE(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!IE(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function IE(t){return Object.prototype.toString.call(t)==="[object Object]"}function Wq(t){return new Promise(e=>{setTimeout(e,t)})}function ub(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?qR(t,e):e}function Hq(t,e,s=0){const r=[...t,e];return s&&r.length>s?r.slice(1):r}function qq(t,e,s=0){const r=[e,...t];return s&&r.length>s?r.slice(0,-1):r}var $C=Symbol();function GR(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===$C?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Rd,vc,Dh,ET,Gq=(ET=class extends vm{constructor(){super();Ht(this,Rd);Ht(this,vc);Ht(this,Dh);_t(this,Dh,e=>{if(!Jd&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){ye(this,vc)||this.setEventListener(ye(this,Dh))}onUnsubscribe(){var e;this.hasListeners()||((e=ye(this,vc))==null||e.call(this),_t(this,vc,void 0))}setEventListener(e){var s;_t(this,Dh,e),(s=ye(this,vc))==null||s.call(this),_t(this,vc,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ye(this,Rd)!==e&&(_t(this,Rd,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof ye(this,Rd)=="boolean"?ye(this,Rd):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Rd=new WeakMap,vc=new WeakMap,Dh=new WeakMap,ET),UC=new Gq,kh,yc,Ph,_T,Yq=(_T=class extends vm{constructor(){super();Ht(this,kh,!0);Ht(this,yc);Ht(this,Ph);_t(this,Ph,e=>{if(!Jd&&window.addEventListener){const s=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){ye(this,yc)||this.setEventListener(ye(this,Ph))}onUnsubscribe(){var e;this.hasListeners()||((e=ye(this,yc))==null||e.call(this),_t(this,yc,void 0))}setEventListener(e){var s;_t(this,Ph,e),(s=ye(this,yc))==null||s.call(this),_t(this,yc,e(this.setOnline.bind(this)))}setOnline(e){ye(this,kh)!==e&&(_t(this,kh,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ye(this,kh)}},kh=new WeakMap,yc=new WeakMap,Ph=new WeakMap,_T),W0=new Yq;function hb(){let t,e;const s=new Promise((i,a)=>{t=i,e=a});s.status="pending",s.catch(()=>{});function r(i){Object.assign(s,i),delete s.resolve,delete s.reject}return s.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},s.reject=i=>{r({status:"rejected",reason:i}),e(i)},s}function Kq(t){return Math.min(1e3*2**t,3e4)}function YR(t){return(t??"online")==="online"?W0.isOnline():!0}var KR=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function V1(t){return t instanceof KR}function ZR(t){let e=!1,s=0,r=!1,i;const a=hb(),o=N=>{var E;r||(p(new KR(N)),(E=t.abort)==null||E.call(t))},c=()=>{e=!0},d=()=>{e=!1},h=()=>UC.isFocused()&&(t.networkMode==="always"||W0.isOnline())&&t.canRun(),g=()=>YR(t.networkMode)&&t.canRun(),m=N=>{var E;r||(r=!0,(E=t.onSuccess)==null||E.call(t,N),i==null||i(),a.resolve(N))},p=N=>{var E;r||(r=!0,(E=t.onError)==null||E.call(t,N),i==null||i(),a.reject(N))},v=()=>new Promise(N=>{var E;i=_=>{(r||h())&&N(_)},(E=t.onPause)==null||E.call(t)}).then(()=>{var N;i=void 0,r||(N=t.onContinue)==null||N.call(t)}),j=()=>{if(r)return;let N;const E=s===0?t.initialPromise:void 0;try{N=E??t.fn()}catch(_){N=Promise.reject(_)}Promise.resolve(N).then(m).catch(_=>{var L;if(r)return;const S=t.retry??(Jd?0:3),C=t.retryDelay??Kq,I=typeof C=="function"?C(s,_):C,P=S===!0||typeof S=="number"&&s<S||typeof S=="function"&&S(s,_);if(e||!P){p(_);return}s++,(L=t.onFail)==null||L.call(t,s,_),Wq(I).then(()=>h()?void 0:v()).then(()=>{e?p(_):j()})})};return{promise:a,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:c,continueRetry:d,canStart:g,start:()=>(g()?j():v().then(j),a)}}function Zq(){let t=[],e=0,s=c=>{c()},r=c=>{c()},i=c=>setTimeout(c,0);const a=c=>{e?t.push(c):i(()=>{s(c)})},o=()=>{const c=t;t=[],c.length&&i(()=>{r(()=>{c.forEach(d=>{s(d)})})})};return{batch:c=>{let d;e++;try{d=c()}finally{e--,e||o()}return d},batchCalls:c=>(...d)=>{a(()=>{c(...d)})},schedule:a,setNotifyFunction:c=>{s=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var Dr=Zq(),Ld,IT,QR=(IT=class{constructor(){Ht(this,Ld)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),cb(this.gcTime)&&_t(this,Ld,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Jd?1/0:5*60*1e3))}clearGcTimeout(){ye(this,Ld)&&(clearTimeout(ye(this,Ld)),_t(this,Ld,void 0))}},Ld=new WeakMap,IT),Rh,Lh,Va,mi,sg,Od,mo,yl,TT,Qq=(TT=class extends QR{constructor(e){super();Ht(this,mo);Ht(this,Rh);Ht(this,Lh);Ht(this,Va);Ht(this,mi);Ht(this,sg);Ht(this,Od);_t(this,Od,!1),_t(this,sg,e.defaultOptions),this.setOptions(e.options),this.observers=[],_t(this,Va,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,_t(this,Rh,Xq(this.options)),this.state=e.state??ye(this,Rh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ye(this,mi))==null?void 0:e.promise}setOptions(e){this.options={...ye(this,sg),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ye(this,Va).remove(this)}setData(e,s){const r=ub(this.state.data,e,this.options);return Sn(this,mo,yl).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(e,s){Sn(this,mo,yl).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var r,i;const s=(r=ye(this,mi))==null?void 0:r.promise;return(i=ye(this,mi))==null||i.cancel(e),s?s.then($a).catch($a):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ye(this,Rh))}isActive(){return this.observers.some(e=>go(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$C||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!HR(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=ye(this,mi))==null||s.continue()}onOnline(){var s;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=ye(this,mi))==null||s.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ye(this,Va).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(ye(this,mi)&&(ye(this,Od)?ye(this,mi).cancel({revert:!0}):ye(this,mi).cancelRetry()),this.scheduleGc()),ye(this,Va).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Sn(this,mo,yl).call(this,{type:"invalidate"})}fetch(e,s){var d,h,g;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(ye(this,mi))return ye(this,mi).continueRetry(),ye(this,mi).promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(_t(this,Od,!0),r.signal)})},a=()=>{const m=GR(this.options,s),p={queryKey:this.queryKey,meta:this.meta};return i(p),_t(this,Od,!1),this.options.persister?this.options.persister(m,p,this):m(p)},o={fetchOptions:s,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};i(o),(d=this.options.behavior)==null||d.onFetch(o,this),_t(this,Lh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=o.fetchOptions)==null?void 0:h.meta))&&Sn(this,mo,yl).call(this,{type:"fetch",meta:(g=o.fetchOptions)==null?void 0:g.meta});const c=m=>{var p,v,j,N;V1(m)&&m.silent||Sn(this,mo,yl).call(this,{type:"error",error:m}),V1(m)||((v=(p=ye(this,Va).config).onError)==null||v.call(p,m,this),(N=(j=ye(this,Va).config).onSettled)==null||N.call(j,this.state.data,m,this)),this.scheduleGc()};return _t(this,mi,ZR({initialPromise:s==null?void 0:s.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:m=>{var p,v,j,N;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(E){c(E);return}(v=(p=ye(this,Va).config).onSuccess)==null||v.call(p,m,this),(N=(j=ye(this,Va).config).onSettled)==null||N.call(j,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,p)=>{Sn(this,mo,yl).call(this,{type:"failed",failureCount:m,error:p})},onPause:()=>{Sn(this,mo,yl).call(this,{type:"pause"})},onContinue:()=>{Sn(this,mo,yl).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),ye(this,mi).start()}},Rh=new WeakMap,Lh=new WeakMap,Va=new WeakMap,mi=new WeakMap,sg=new WeakMap,Od=new WeakMap,mo=new WeakSet,yl=function(e){const s=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...XR(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return V1(i)&&i.revert&&ye(this,Lh)?{...ye(this,Lh),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=s(this.state),Dr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ye(this,Va).notify({query:this,type:"updated",action:e})})},TT);function XR(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:YR(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Xq(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,r=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Vo,MT,Jq=(MT=class extends vm{constructor(e={}){super();Ht(this,Vo);this.config=e,_t(this,Vo,new Map)}build(e,s,r){const i=s.queryKey,a=s.queryHash??VC(i,s);let o=this.get(a);return o||(o=new Qq({cache:this,queryKey:i,queryHash:a,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){ye(this,Vo).has(e.queryHash)||(ye(this,Vo).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=ye(this,Vo).get(e.queryHash);s&&(e.destroy(),s===e&&ye(this,Vo).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Dr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ye(this,Vo).get(e)}getAll(){return[...ye(this,Vo).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>AE(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>AE(e,r)):s}notify(e){Dr.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){Dr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Dr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Vo=new WeakMap,MT),$o,Si,Fd,Uo,ac,DT,eG=(DT=class extends QR{constructor(e){super();Ht(this,Uo);Ht(this,$o);Ht(this,Si);Ht(this,Fd);this.mutationId=e.mutationId,_t(this,Si,e.mutationCache),_t(this,$o,[]),this.state=e.state||JR(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ye(this,$o).includes(e)||(ye(this,$o).push(e),this.clearGcTimeout(),ye(this,Si).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){_t(this,$o,ye(this,$o).filter(s=>s!==e)),this.scheduleGc(),ye(this,Si).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ye(this,$o).length||(this.state.status==="pending"?this.scheduleGc():ye(this,Si).remove(this))}continue(){var e;return((e=ye(this,Fd))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,a,o,c,d,h,g,m,p,v,j,N,E,_,S,C,I,P,L,T;_t(this,Fd,ZR({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(M,k)=>{Sn(this,Uo,ac).call(this,{type:"failed",failureCount:M,error:k})},onPause:()=>{Sn(this,Uo,ac).call(this,{type:"pause"})},onContinue:()=>{Sn(this,Uo,ac).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ye(this,Si).canRun(this)}));const s=this.state.status==="pending",r=!ye(this,Fd).canStart();try{if(!s){Sn(this,Uo,ac).call(this,{type:"pending",variables:e,isPaused:r}),await((a=(i=ye(this,Si).config).onMutate)==null?void 0:a.call(i,e,this));const k=await((c=(o=this.options).onMutate)==null?void 0:c.call(o,e));k!==this.state.context&&Sn(this,Uo,ac).call(this,{type:"pending",context:k,variables:e,isPaused:r})}const M=await ye(this,Fd).start();return await((h=(d=ye(this,Si).config).onSuccess)==null?void 0:h.call(d,M,e,this.state.context,this)),await((m=(g=this.options).onSuccess)==null?void 0:m.call(g,M,e,this.state.context)),await((v=(p=ye(this,Si).config).onSettled)==null?void 0:v.call(p,M,null,this.state.variables,this.state.context,this)),await((N=(j=this.options).onSettled)==null?void 0:N.call(j,M,null,e,this.state.context)),Sn(this,Uo,ac).call(this,{type:"success",data:M}),M}catch(M){try{throw await((_=(E=ye(this,Si).config).onError)==null?void 0:_.call(E,M,e,this.state.context,this)),await((C=(S=this.options).onError)==null?void 0:C.call(S,M,e,this.state.context)),await((P=(I=ye(this,Si).config).onSettled)==null?void 0:P.call(I,void 0,M,this.state.variables,this.state.context,this)),await((T=(L=this.options).onSettled)==null?void 0:T.call(L,void 0,M,e,this.state.context)),M}finally{Sn(this,Uo,ac).call(this,{type:"error",error:M})}}finally{ye(this,Si).runNext(this)}}},$o=new WeakMap,Si=new WeakMap,Fd=new WeakMap,Uo=new WeakSet,ac=function(e){const s=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Dr.batch(()=>{ye(this,$o).forEach(r=>{r.onMutationUpdate(e)}),ye(this,Si).notify({mutation:this,type:"updated",action:e})})},DT);function JR(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var fa,rg,kT,tG=(kT=class extends vm{constructor(e={}){super();Ht(this,fa);Ht(this,rg);this.config=e,_t(this,fa,new Map),_t(this,rg,Date.now())}build(e,s,r){const i=new eG({mutationCache:this,mutationId:++Wg(this,rg)._,options:e.defaultMutationOptions(s),state:r});return this.add(i),i}add(e){const s=lx(e),r=ye(this,fa).get(s)??[];r.push(e),ye(this,fa).set(s,r),this.notify({type:"added",mutation:e})}remove(e){var r;const s=lx(e);if(ye(this,fa).has(s)){const i=(r=ye(this,fa).get(s))==null?void 0:r.filter(a=>a!==e);i&&(i.length===0?ye(this,fa).delete(s):ye(this,fa).set(s,i))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const s=(r=ye(this,fa).get(lx(e)))==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}runNext(e){var r;const s=(r=ye(this,fa).get(lx(e)))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}clear(){Dr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...ye(this,fa).values()].flat()}find(e){const s={exact:!0,...e};return this.getAll().find(r=>EE(s,r))}findAll(e={}){return this.getAll().filter(s=>EE(e,s))}notify(e){Dr.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return Dr.batch(()=>Promise.all(e.map(s=>s.continue().catch($a))))}},fa=new WeakMap,rg=new WeakMap,kT);function lx(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function TE(t){return{onFetch:(e,s)=>{var g,m,p,v,j;const r=e.options,i=(p=(m=(g=e.fetchOptions)==null?void 0:g.meta)==null?void 0:m.fetchMore)==null?void 0:p.direction,a=((v=e.state.data)==null?void 0:v.pages)||[],o=((j=e.state.data)==null?void 0:j.pageParams)||[];let c={pages:[],pageParams:[]},d=0;const h=async()=>{let N=!1;const E=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?N=!0:e.signal.addEventListener("abort",()=>{N=!0}),e.signal)})},_=GR(e.options,e.fetchOptions),S=async(C,I,P)=>{if(N)return Promise.reject();if(I==null&&C.pages.length)return Promise.resolve(C);const L={queryKey:e.queryKey,pageParam:I,direction:P?"backward":"forward",meta:e.options.meta};E(L);const T=await _(L),{maxPages:M}=e.options,k=P?qq:Hq;return{pages:k(C.pages,T,M),pageParams:k(C.pageParams,I,M)}};if(i&&a.length){const C=i==="backward",I=C?nG:ME,P={pages:a,pageParams:o},L=I(r,P);c=await S(P,L,C)}else{const C=t??a.length;do{const I=d===0?o[0]??r.initialPageParam:ME(r,c);if(d>0&&I==null)break;c=await S(c,I),d++}while(d<C)}return c};e.options.persister?e.fetchFn=()=>{var N,E;return(E=(N=e.options).persister)==null?void 0:E.call(N,h,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=h}}}function ME(t,{pages:e,pageParams:s}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,s[r],s):void 0}function nG(t,{pages:e,pageParams:s}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,s[0],s):void 0}var rr,wc,jc,Oh,Fh,bc,Bh,zh,PT,sG=(PT=class{constructor(t={}){Ht(this,rr);Ht(this,wc);Ht(this,jc);Ht(this,Oh);Ht(this,Fh);Ht(this,bc);Ht(this,Bh);Ht(this,zh);_t(this,rr,t.queryCache||new Jq),_t(this,wc,t.mutationCache||new tG),_t(this,jc,t.defaultOptions||{}),_t(this,Oh,new Map),_t(this,Fh,new Map),_t(this,bc,0)}mount(){Wg(this,bc)._++,ye(this,bc)===1&&(_t(this,Bh,UC.subscribe(async t=>{t&&(await this.resumePausedMutations(),ye(this,rr).onFocus())})),_t(this,zh,W0.subscribe(async t=>{t&&(await this.resumePausedMutations(),ye(this,rr).onOnline())})))}unmount(){var t,e;Wg(this,bc)._--,ye(this,bc)===0&&((t=ye(this,Bh))==null||t.call(this),_t(this,Bh,void 0),(e=ye(this,zh))==null||e.call(this),_t(this,zh,void 0))}isFetching(t){return ye(this,rr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ye(this,wc).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=ye(this,rr).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const s=this.defaultQueryOptions(t),r=ye(this,rr).build(this,s);return t.revalidateIfStale&&r.isStaleByTime(fh(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(e)}}getQueriesData(t){return ye(this,rr).findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),i=ye(this,rr).get(r.queryHash),a=i==null?void 0:i.state.data,o=Uq(e,a);if(o!==void 0)return ye(this,rr).build(this,r).setData(o,{...s,manual:!0})}setQueriesData(t,e,s){return Dr.batch(()=>ye(this,rr).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=ye(this,rr).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=ye(this,rr);Dr.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=ye(this,rr),r={type:"active",...t};return Dr.batch(()=>(s.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const s={revert:!0,...e},r=Dr.batch(()=>ye(this,rr).findAll(t).map(i=>i.cancel(s)));return Promise.all(r).then($a).catch($a)}invalidateQueries(t={},e={}){return Dr.batch(()=>{if(ye(this,rr).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const s={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(s,e)})}refetchQueries(t={},e){const s={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=Dr.batch(()=>ye(this,rr).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let a=i.fetch(void 0,s);return s.throwOnError||(a=a.catch($a)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then($a)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=ye(this,rr).build(this,e);return s.isStaleByTime(fh(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then($a).catch($a)}fetchInfiniteQuery(t){return t.behavior=TE(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then($a).catch($a)}ensureInfiniteQueryData(t){return t.behavior=TE(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return W0.isOnline()?ye(this,wc).resumePausedMutations():Promise.resolve()}getQueryCache(){return ye(this,rr)}getMutationCache(){return ye(this,wc)}getDefaultOptions(){return ye(this,jc)}setDefaultOptions(t){_t(this,jc,t)}setQueryDefaults(t,e){ye(this,Oh).set(eu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...ye(this,Oh).values()];let s={};return e.forEach(r=>{jp(t,r.queryKey)&&(s={...s,...r.defaultOptions})}),s}setMutationDefaults(t,e){ye(this,Fh).set(eu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...ye(this,Fh).values()];let s={};return e.forEach(r=>{jp(t,r.mutationKey)&&(s={...s,...r.defaultOptions})}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...ye(this,jc).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=VC(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===$C&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ye(this,jc).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ye(this,rr).clear(),ye(this,wc).clear()}},rr=new WeakMap,wc=new WeakMap,jc=new WeakMap,Oh=new WeakMap,Fh=new WeakMap,bc=new WeakMap,Bh=new WeakMap,zh=new WeakMap,PT),Gi,Un,ig,Ai,Bd,Vh,Nc,Wo,ag,$h,Uh,zd,Vd,Cc,Wh,ls,Sf,mb,fb,pb,gb,xb,vb,yb,eL,RT,rG=(RT=class extends vm{constructor(e,s){super();Ht(this,ls);Ht(this,Gi);Ht(this,Un);Ht(this,ig);Ht(this,Ai);Ht(this,Bd);Ht(this,Vh);Ht(this,Nc);Ht(this,Wo);Ht(this,ag);Ht(this,$h);Ht(this,Uh);Ht(this,zd);Ht(this,Vd);Ht(this,Cc);Ht(this,Wh,new Set);this.options=s,_t(this,Gi,e),_t(this,Wo,null),_t(this,Nc,hb()),this.options.experimental_prefetchInRender||ye(this,Nc).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ye(this,Un).addObserver(this),DE(ye(this,Un),this.options)?Sn(this,ls,Sf).call(this):this.updateResult(),Sn(this,ls,gb).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return wb(ye(this,Un),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return wb(ye(this,Un),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Sn(this,ls,xb).call(this),Sn(this,ls,vb).call(this),ye(this,Un).removeObserver(this)}setOptions(e,s){const r=this.options,i=ye(this,Un);if(this.options=ye(this,Gi).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof go(this.options.enabled,ye(this,Un))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Sn(this,ls,yb).call(this),ye(this,Un).setOptions(this.options),r._defaulted&&!U0(this.options,r)&&ye(this,Gi).getQueryCache().notify({type:"observerOptionsUpdated",query:ye(this,Un),observer:this});const a=this.hasListeners();a&&kE(ye(this,Un),i,this.options,r)&&Sn(this,ls,Sf).call(this),this.updateResult(s),a&&(ye(this,Un)!==i||go(this.options.enabled,ye(this,Un))!==go(r.enabled,ye(this,Un))||fh(this.options.staleTime,ye(this,Un))!==fh(r.staleTime,ye(this,Un)))&&Sn(this,ls,mb).call(this);const o=Sn(this,ls,fb).call(this);a&&(ye(this,Un)!==i||go(this.options.enabled,ye(this,Un))!==go(r.enabled,ye(this,Un))||o!==ye(this,Cc))&&Sn(this,ls,pb).call(this,o)}getOptimisticResult(e){const s=ye(this,Gi).getQueryCache().build(ye(this,Gi),e),r=this.createResult(s,e);return aG(this,r)&&(_t(this,Ai,r),_t(this,Vh,this.options),_t(this,Bd,ye(this,Un).state)),r}getCurrentResult(){return ye(this,Ai)}trackResult(e,s){const r={};return Object.keys(e).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),s==null||s(i),e[i])})}),r}trackProp(e){ye(this,Wh).add(e)}getCurrentQuery(){return ye(this,Un)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=ye(this,Gi).defaultQueryOptions(e),r=ye(this,Gi).getQueryCache().build(ye(this,Gi),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(e){return Sn(this,ls,Sf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),ye(this,Ai)))}createResult(e,s){var M;const r=ye(this,Un),i=this.options,a=ye(this,Ai),o=ye(this,Bd),c=ye(this,Vh),h=e!==r?e.state:ye(this,ig),{state:g}=e;let m={...g},p=!1,v;if(s._optimisticResults){const k=this.hasListeners(),O=!k&&DE(e,s),V=k&&kE(e,r,s,i);(O||V)&&(m={...m,...XR(g.data,e.options)}),s._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:j,errorUpdatedAt:N,status:E}=m;if(s.select&&m.data!==void 0)if(a&&m.data===(o==null?void 0:o.data)&&s.select===ye(this,ag))v=ye(this,$h);else try{_t(this,ag,s.select),v=s.select(m.data),v=ub(a==null?void 0:a.data,v,s),_t(this,$h,v),_t(this,Wo,null)}catch(k){_t(this,Wo,k)}else v=m.data;if(s.placeholderData!==void 0&&v===void 0&&E==="pending"){let k;if(a!=null&&a.isPlaceholderData&&s.placeholderData===(c==null?void 0:c.placeholderData))k=a.data;else if(k=typeof s.placeholderData=="function"?s.placeholderData((M=ye(this,Uh))==null?void 0:M.state.data,ye(this,Uh)):s.placeholderData,s.select&&k!==void 0)try{k=s.select(k),_t(this,Wo,null)}catch(O){_t(this,Wo,O)}k!==void 0&&(E="success",v=ub(a==null?void 0:a.data,k,s),p=!0)}ye(this,Wo)&&(j=ye(this,Wo),v=ye(this,$h),N=Date.now(),E="error");const _=m.fetchStatus==="fetching",S=E==="pending",C=E==="error",I=S&&_,P=v!==void 0,T={status:E,fetchStatus:m.fetchStatus,isPending:S,isSuccess:E==="success",isError:C,isInitialLoading:I,isLoading:I,data:v,dataUpdatedAt:m.dataUpdatedAt,error:j,errorUpdatedAt:N,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>h.dataUpdateCount||m.errorUpdateCount>h.errorUpdateCount,isFetching:_,isRefetching:_&&!S,isLoadingError:C&&!P,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:C&&P,isStale:WC(e,s),refetch:this.refetch,promise:ye(this,Nc)};if(this.options.experimental_prefetchInRender){const k=B=>{T.status==="error"?B.reject(T.error):T.data!==void 0&&B.resolve(T.data)},O=()=>{const B=_t(this,Nc,T.promise=hb());k(B)},V=ye(this,Nc);switch(V.status){case"pending":e.queryHash===r.queryHash&&k(V);break;case"fulfilled":(T.status==="error"||T.data!==V.value)&&O();break;case"rejected":(T.status!=="error"||T.error!==V.reason)&&O();break}}return T}updateResult(e){const s=ye(this,Ai),r=this.createResult(ye(this,Un),this.options);if(_t(this,Bd,ye(this,Un).state),_t(this,Vh,this.options),ye(this,Bd).data!==void 0&&_t(this,Uh,ye(this,Un)),U0(r,s))return;_t(this,Ai,r);const i={},a=()=>{if(!s)return!0;const{notifyOnChangeProps:o}=this.options,c=typeof o=="function"?o():o;if(c==="all"||!c&&!ye(this,Wh).size)return!0;const d=new Set(c??ye(this,Wh));return this.options.throwOnError&&d.add("error"),Object.keys(ye(this,Ai)).some(h=>{const g=h;return ye(this,Ai)[g]!==s[g]&&d.has(g)})};(e==null?void 0:e.listeners)!==!1&&a()&&(i.listeners=!0),Sn(this,ls,eL).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Sn(this,ls,gb).call(this)}},Gi=new WeakMap,Un=new WeakMap,ig=new WeakMap,Ai=new WeakMap,Bd=new WeakMap,Vh=new WeakMap,Nc=new WeakMap,Wo=new WeakMap,ag=new WeakMap,$h=new WeakMap,Uh=new WeakMap,zd=new WeakMap,Vd=new WeakMap,Cc=new WeakMap,Wh=new WeakMap,ls=new WeakSet,Sf=function(e){Sn(this,ls,yb).call(this);let s=ye(this,Un).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch($a)),s},mb=function(){Sn(this,ls,xb).call(this);const e=fh(this.options.staleTime,ye(this,Un));if(Jd||ye(this,Ai).isStale||!cb(e))return;const r=HR(ye(this,Ai).dataUpdatedAt,e)+1;_t(this,zd,setTimeout(()=>{ye(this,Ai).isStale||this.updateResult()},r))},fb=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ye(this,Un)):this.options.refetchInterval)??!1},pb=function(e){Sn(this,ls,vb).call(this),_t(this,Cc,e),!(Jd||go(this.options.enabled,ye(this,Un))===!1||!cb(ye(this,Cc))||ye(this,Cc)===0)&&_t(this,Vd,setInterval(()=>{(this.options.refetchIntervalInBackground||UC.isFocused())&&Sn(this,ls,Sf).call(this)},ye(this,Cc)))},gb=function(){Sn(this,ls,mb).call(this),Sn(this,ls,pb).call(this,Sn(this,ls,fb).call(this))},xb=function(){ye(this,zd)&&(clearTimeout(ye(this,zd)),_t(this,zd,void 0))},vb=function(){ye(this,Vd)&&(clearInterval(ye(this,Vd)),_t(this,Vd,void 0))},yb=function(){const e=ye(this,Gi).getQueryCache().build(ye(this,Gi),this.options);if(e===ye(this,Un))return;const s=ye(this,Un);_t(this,Un,e),_t(this,ig,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},eL=function(e){Dr.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(ye(this,Ai))}),ye(this,Gi).getQueryCache().notify({query:ye(this,Un),type:"observerResultsUpdated"})})},RT);function iG(t,e){return go(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function DE(t,e){return iG(t,e)||t.state.data!==void 0&&wb(t,e,e.refetchOnMount)}function wb(t,e,s){if(go(e.enabled,t)!==!1){const r=typeof s=="function"?s(t):s;return r==="always"||r!==!1&&WC(t,e)}return!1}function kE(t,e,s,r){return(t!==e||go(r.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&WC(t,s)}function WC(t,e){return go(e.enabled,t)!==!1&&t.isStaleByTime(fh(e.staleTime,t))}function aG(t,e){return!U0(t.getCurrentResult(),e)}var Sc,Ac,Yi,_l,Rl,qx,jb,LT,oG=(LT=class extends vm{constructor(s,r){super();Ht(this,Rl);Ht(this,Sc);Ht(this,Ac);Ht(this,Yi);Ht(this,_l);_t(this,Sc,s),this.setOptions(r),this.bindMethods(),Sn(this,Rl,qx).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){var i;const r=this.options;this.options=ye(this,Sc).defaultMutationOptions(s),U0(this.options,r)||ye(this,Sc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ye(this,Yi),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&eu(r.mutationKey)!==eu(this.options.mutationKey)?this.reset():((i=ye(this,Yi))==null?void 0:i.state.status)==="pending"&&ye(this,Yi).setOptions(this.options)}onUnsubscribe(){var s;this.hasListeners()||(s=ye(this,Yi))==null||s.removeObserver(this)}onMutationUpdate(s){Sn(this,Rl,qx).call(this),Sn(this,Rl,jb).call(this,s)}getCurrentResult(){return ye(this,Ac)}reset(){var s;(s=ye(this,Yi))==null||s.removeObserver(this),_t(this,Yi,void 0),Sn(this,Rl,qx).call(this),Sn(this,Rl,jb).call(this)}mutate(s,r){var i;return _t(this,_l,r),(i=ye(this,Yi))==null||i.removeObserver(this),_t(this,Yi,ye(this,Sc).getMutationCache().build(ye(this,Sc),this.options)),ye(this,Yi).addObserver(this),ye(this,Yi).execute(s)}},Sc=new WeakMap,Ac=new WeakMap,Yi=new WeakMap,_l=new WeakMap,Rl=new WeakSet,qx=function(){var r;const s=((r=ye(this,Yi))==null?void 0:r.state)??JR();_t(this,Ac,{...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset})},jb=function(s){Dr.batch(()=>{var r,i,a,o,c,d,h,g;if(ye(this,_l)&&this.hasListeners()){const m=ye(this,Ac).variables,p=ye(this,Ac).context;(s==null?void 0:s.type)==="success"?((i=(r=ye(this,_l)).onSuccess)==null||i.call(r,s.data,m,p),(o=(a=ye(this,_l)).onSettled)==null||o.call(a,s.data,null,m,p)):(s==null?void 0:s.type)==="error"&&((d=(c=ye(this,_l)).onError)==null||d.call(c,s.error,m,p),(g=(h=ye(this,_l)).onSettled)==null||g.call(h,void 0,s.error,m,p))}this.listeners.forEach(m=>{m(ye(this,Ac))})})},LT),tL=y.createContext(void 0),jn=t=>{const e=y.useContext(tL);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},lG=({client:t,children:e})=>(y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),n.jsx(tL.Provider,{value:t,children:e})),nL=y.createContext(!1),cG=()=>y.useContext(nL);nL.Provider;function dG(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var uG=y.createContext(dG()),hG=()=>y.useContext(uG);function sL(t,e){return typeof t=="function"?t(...e):!!t}function bb(){}var mG=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},fG=t=>{y.useEffect(()=>{t.clearReset()},[t])},pG=({result:t,errorResetBoundary:e,throwOnError:s,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&sL(s,[t.error,r]),gG=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},xG=(t,e)=>t.isLoading&&t.isFetching&&!e,vG=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,PE=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function yG(t,e,s){var g,m,p,v,j;const r=jn(),i=cG(),a=hG(),o=r.defaultQueryOptions(t);(m=(g=r.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||m.call(g,o),o._optimisticResults=i?"isRestoring":"optimistic",gG(o),mG(o,a),fG(a);const c=!r.getQueryCache().get(o.queryHash),[d]=y.useState(()=>new e(r,o)),h=d.getOptimisticResult(o);if(y.useSyncExternalStore(y.useCallback(N=>{const E=i?bb:d.subscribe(Dr.batchCalls(N));return d.updateResult(),E},[d,i]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),y.useEffect(()=>{d.setOptions(o,{listeners:!1})},[o,d]),vG(o,h))throw PE(o,d,a);if(pG({result:h,errorResetBoundary:a,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw h.error;if((v=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||v.call(p,o,h),o.experimental_prefetchInRender&&!Jd&&xG(h,i)){const N=c?PE(o,d,a):(j=r.getQueryCache().get(o.queryHash))==null?void 0:j.promise;N==null||N.catch(bb).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?h:d.trackResult(h)}function wt(t,e){return yG(t,rG)}function Pt(t,e){const s=jn(),[r]=y.useState(()=>new oG(s,t));y.useEffect(()=>{r.setOptions(t)},[r,t]);const i=y.useSyncExternalStore(y.useCallback(o=>r.subscribe(Dr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=y.useCallback((o,c)=>{r.mutate(o,c).catch(bb)},[r]);if(i.error&&sL(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}async function rL(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function pt(t,e){const s=await fetch(t,{method:(e==null?void 0:e.method)||"GET",headers:e!=null&&e.body?{"Content-Type":"application/json",...e==null?void 0:e.headers}:(e==null?void 0:e.headers)||{},body:e==null?void 0:e.body,credentials:"include"});return await rL(s),await s.json()}const wG=({on401:t})=>async({queryKey:e})=>{let s=e[0];e.length>1&&e[1]!==null&&e[1]!==void 0&&(s=`${s}/${e[1]}`),console.log(`Fetching data from: ${s}`);const r=await fetch(s,{credentials:"include"});return t==="returnNull"&&r.status===401?null:(await rL(r),await r.json())},ga=new sG({defaultOptions:{queries:{queryFn:wG({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jG=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),iL=(...t)=>t.filter((e,s,r)=>!!e&&r.indexOf(e)===s).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NG=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},d)=>y.createElement("svg",{ref:d,...bG,width:e,height:e,stroke:t,strokeWidth:r?Number(s)*24/Number(e):s,className:iL("lucide",i),...c},[...o.map(([h,g])=>y.createElement(h,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=(t,e)=>{const s=y.forwardRef(({className:r,...i},a)=>y.createElement(NG,{ref:a,iconNode:e,className:iL(`lucide-${jG(t)}`,r),...i}));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=$e("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CG=$e("AlignJustify",[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=$e("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SG=$e("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=$e("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=$e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=$e("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AG=$e("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EG=$e("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _G=$e("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=$e("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IG=$e("Beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=$e("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=$e("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=$e("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=$e("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=$e("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=$e("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=$e("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=$e("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=$e("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=$e("ChartColumnIncreasing",[["path",{d:"M13 17V9",key:"1fwyjl"}],["path",{d:"M18 17V5",key:"sfb6ij"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=$e("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=$e("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=$e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=$e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=$e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=$e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TG=$e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=$e("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=$e("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=$e("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MG=$e("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DG=$e("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=$e("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=$e("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=$e("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=$e("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kG=$e("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=$e("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=$e("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=$e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PG=$e("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RG=$e("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LG=$e("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=$e("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=$e("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=$e("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=$e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=$e("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=$e("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OG=$e("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=$e("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FG=$e("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BG=$e("FileCog",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3.2 12.9-.9-.4",key:"1i3dj5"}],["path",{d:"m3.2 15.1-.9.4",key:"1fvgj0"}],["path",{d:"M4.677 21.5a2 2 0 0 0 1.313.5H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v2.5",key:"1yo3oz"}],["path",{d:"m4.9 11.2-.4-.9",key:"otmhb9"}],["path",{d:"m4.9 16.8-.4.9",key:"1b8z07"}],["path",{d:"m7.5 10.3-.4.9",key:"11k65u"}],["path",{d:"m7.5 17.7-.4-.9",key:"431x55"}],["path",{d:"m9.7 12.5-.9.4",key:"87sjan"}],["path",{d:"m9.7 15.5-.9-.4",key:"khqm91"}],["circle",{cx:"6",cy:"14",r:"3",key:"a1xfv6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=$e("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zG=$e("FileHeart",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v2",key:"17k7jt"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10.29 10.7a2.43 2.43 0 0 0-2.66-.52c-.29.12-.56.3-.78.53l-.35.34-.35-.34a2.43 2.43 0 0 0-2.65-.53c-.3.12-.56.3-.79.53-.95.94-1 2.53.2 3.74L6.5 18l3.6-3.55c1.2-1.21 1.14-2.8.19-3.74Z",key:"1c1fso"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=$e("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VG=$e("FilePenLine",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=$e("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $G=$e("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=$e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=$e("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=$e("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=$e("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=$e("ImagePlus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=$e("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=$e("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=$e("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UG=$e("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=$e("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=$e("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WG=$e("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HG=$e("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=$e("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=$e("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=$e("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qG=$e("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=$e("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=$e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=$e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=$e("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=$e("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GG=$e("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YG=$e("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=$e("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=$e("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KG=$e("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=$e("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=$e("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZG=$e("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=$e("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=$e("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=$e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QG=$e("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XG=$e("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=$e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JG=$e("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=$e("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=$e("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=$e("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=$e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=$e("ServerOff",[["path",{d:"M7 2h13a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-5",key:"bt2siv"}],["path",{d:"M10 10 2.5 2.5C2 2 2 2.5 2 5v3a2 2 0 0 0 2 2h6z",key:"1hjrv1"}],["path",{d:"M22 17v-1a2 2 0 0 0-2-2h-1",key:"1iynyr"}],["path",{d:"M4 14a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16.5l1-.5.5.5-8-8H4z",key:"161ggg"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=$e("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=$e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=$e("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=$e("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=$e("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=$e("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=$e("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=$e("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eY=$e("SquareUser",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1m6ac2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=$e("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tY=$e("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=$e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=$e("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nY=$e("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=$e("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=$e("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sY=$e("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=$e("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=$e("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=$e("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=$e("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=$e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=$e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=$e("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=$e("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=$e("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=$e("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=$e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=$e("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function jL(t){var e,s,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(s=jL(t[e]))&&(r&&(r+=" "),r+=s)}else for(s in t)t[s]&&(r&&(r+=" "),r+=s);return r}function rY(){for(var t,e,s=0,r="",i=arguments.length;s<i;s++)(t=arguments[s])&&(e=jL(t))&&(r&&(r+=" "),r+=e);return r}const t2="-",iY=t=>{const e=oY(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const c=o.split(t2);return c[0]===""&&c.length!==1&&c.shift(),bL(c,e)||aY(o)},getConflictingClassGroupIds:(o,c)=>{const d=s[o]||[];return c&&r[o]?[...d,...r[o]]:d}}},bL=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const s=t[0],r=e.nextPart.get(s),i=r?bL(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(t2);return(o=e.validators.find(({validator:c})=>c(a)))==null?void 0:o.classGroupId},UE=/^\[(.+)\]$/,aY=t=>{if(UE.test(t)){const e=UE.exec(t)[1],s=e==null?void 0:e.substring(0,e.indexOf(":"));if(s)return"arbitrary.."+s}},oY=t=>{const{theme:e,prefix:s}=t,r={nextPart:new Map,validators:[]};return cY(Object.entries(t.classGroups),s).forEach(([a,o])=>{Ab(o,r,a,e)}),r},Ab=(t,e,s,r)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:WE(e,i);a.classGroupId=s;return}if(typeof i=="function"){if(lY(i)){Ab(i(r),e,s,r);return}e.validators.push({validator:i,classGroupId:s});return}Object.entries(i).forEach(([a,o])=>{Ab(o,WE(e,a),s,r)})})},WE=(t,e)=>{let s=t;return e.split(t2).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},lY=t=>t.isThemeGetter,cY=(t,e)=>e?t.map(([s,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,c])=>[e+o,c])):a);return[s,i]}):t,dY=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,s=new Map,r=new Map;const i=(a,o)=>{s.set(a,o),e++,e>t&&(e=0,r=s,s=new Map)};return{get(a){let o=s.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return i(a,o),o},set(a,o){s.has(a)?s.set(a,o):i(a,o)}}},NL="!",uY=t=>{const{separator:e,experimentalParseClassName:s}=t,r=e.length===1,i=e[0],a=e.length,o=c=>{const d=[];let h=0,g=0,m;for(let E=0;E<c.length;E++){let _=c[E];if(h===0){if(_===i&&(r||c.slice(E,E+a)===e)){d.push(c.slice(g,E)),g=E+a;continue}if(_==="/"){m=E;continue}}_==="["?h++:_==="]"&&h--}const p=d.length===0?c:c.substring(g),v=p.startsWith(NL),j=v?p.substring(1):p,N=m&&m>g?m-g:void 0;return{modifiers:d,hasImportantModifier:v,baseClassName:j,maybePostfixModifierPosition:N}};return s?c=>s({className:c,parseClassName:o}):o},hY=t=>{if(t.length<=1)return t;const e=[];let s=[];return t.forEach(r=>{r[0]==="["?(e.push(...s.sort(),r),s=[]):s.push(r)}),e.push(...s.sort()),e},mY=t=>({cache:dY(t.cacheSize),parseClassName:uY(t),...iY(t)}),fY=/\s+/,pY=(t,e)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],o=t.trim().split(fY);let c="";for(let d=o.length-1;d>=0;d-=1){const h=o[d],{modifiers:g,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:v}=s(h);let j=!!v,N=r(j?p.substring(0,v):p);if(!N){if(!j){c=h+(c.length>0?" "+c:c);continue}if(N=r(p),!N){c=h+(c.length>0?" "+c:c);continue}j=!1}const E=hY(g).join(":"),_=m?E+NL:E,S=_+N;if(a.includes(S))continue;a.push(S);const C=i(N,j);for(let I=0;I<C.length;++I){const P=C[I];a.push(_+P)}c=h+(c.length>0?" "+c:c)}return c};function gY(){let t=0,e,s,r="";for(;t<arguments.length;)(e=arguments[t++])&&(s=CL(e))&&(r&&(r+=" "),r+=s);return r}const CL=t=>{if(typeof t=="string")return t;let e,s="";for(let r=0;r<t.length;r++)t[r]&&(e=CL(t[r]))&&(s&&(s+=" "),s+=e);return s};function xY(t,...e){let s,r,i,a=o;function o(d){const h=e.reduce((g,m)=>m(g),t());return s=mY(h),r=s.cache.get,i=s.cache.set,a=c,c(d)}function c(d){const h=r(d);if(h)return h;const g=pY(d,s);return i(d,g),g}return function(){return a(gY.apply(null,arguments))}}const Ms=t=>{const e=s=>s[t]||[];return e.isThemeGetter=!0,e},SL=/^\[(?:([a-z-]+):)?(.+)\]$/i,vY=/^\d+\/\d+$/,yY=new Set(["px","full","screen"]),wY=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,jY=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bY=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,NY=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,CY=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fl=t=>xh(t)||yY.has(t)||vY.test(t),tc=t=>jm(t,"length",DY),xh=t=>!!t&&!Number.isNaN(Number(t)),H1=t=>jm(t,"number",xh),ef=t=>!!t&&Number.isInteger(Number(t)),SY=t=>t.endsWith("%")&&xh(t.slice(0,-1)),vn=t=>SL.test(t),nc=t=>wY.test(t),AY=new Set(["length","size","percentage"]),EY=t=>jm(t,AY,AL),_Y=t=>jm(t,"position",AL),IY=new Set(["image","url"]),TY=t=>jm(t,IY,PY),MY=t=>jm(t,"",kY),tf=()=>!0,jm=(t,e,s)=>{const r=SL.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):s(r[2]):!1},DY=t=>jY.test(t)&&!bY.test(t),AL=()=>!1,kY=t=>NY.test(t),PY=t=>CY.test(t),RY=()=>{const t=Ms("colors"),e=Ms("spacing"),s=Ms("blur"),r=Ms("brightness"),i=Ms("borderColor"),a=Ms("borderRadius"),o=Ms("borderSpacing"),c=Ms("borderWidth"),d=Ms("contrast"),h=Ms("grayscale"),g=Ms("hueRotate"),m=Ms("invert"),p=Ms("gap"),v=Ms("gradientColorStops"),j=Ms("gradientColorStopPositions"),N=Ms("inset"),E=Ms("margin"),_=Ms("opacity"),S=Ms("padding"),C=Ms("saturate"),I=Ms("scale"),P=Ms("sepia"),L=Ms("skew"),T=Ms("space"),M=Ms("translate"),k=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",vn,e],B=()=>[vn,e],Y=()=>["",fl,tc],z=()=>["auto",xh,vn],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],he=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],se=()=>["start","end","center","between","around","evenly","stretch"],re=()=>["","0",vn],me=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ce=()=>[xh,vn];return{cacheSize:500,separator:":",theme:{colors:[tf],spacing:[fl,tc],blur:["none","",nc,vn],brightness:Ce(),borderColor:[t],borderRadius:["none","","full",nc,vn],borderSpacing:B(),borderWidth:Y(),contrast:Ce(),grayscale:re(),hueRotate:Ce(),invert:re(),gap:B(),gradientColorStops:[t],gradientColorStopPositions:[SY,tc],inset:V(),margin:V(),opacity:Ce(),padding:B(),saturate:Ce(),scale:Ce(),sepia:re(),skew:Ce(),space:B(),translate:B()},classGroups:{aspect:[{aspect:["auto","square","video",vn]}],container:["container"],columns:[{columns:[nc]}],"break-after":[{"break-after":me()}],"break-before":[{"break-before":me()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),vn]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[N]}],"inset-x":[{"inset-x":[N]}],"inset-y":[{"inset-y":[N]}],start:[{start:[N]}],end:[{end:[N]}],top:[{top:[N]}],right:[{right:[N]}],bottom:[{bottom:[N]}],left:[{left:[N]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ef,vn]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",vn]}],grow:[{grow:re()}],shrink:[{shrink:re()}],order:[{order:["first","last","none",ef,vn]}],"grid-cols":[{"grid-cols":[tf]}],"col-start-end":[{col:["auto",{span:["full",ef,vn]},vn]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[tf]}],"row-start-end":[{row:["auto",{span:[ef,vn]},vn]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",vn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",vn]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...se()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...se(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...se(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",vn,e]}],"min-w":[{"min-w":[vn,e,"min","max","fit"]}],"max-w":[{"max-w":[vn,e,"none","full","min","max","fit","prose",{screen:[nc]},nc]}],h:[{h:[vn,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[vn,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[vn,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[vn,e,"auto","min","max","fit"]}],"font-size":[{text:["base",nc,tc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",H1]}],"font-family":[{font:[tf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",vn]}],"line-clamp":[{"line-clamp":["none",xh,H1]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",fl,vn]}],"list-image":[{"list-image":["none",vn]}],"list-style-type":[{list:["none","disc","decimal",vn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",fl,tc]}],"underline-offset":[{"underline-offset":["auto",fl,vn]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",vn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",vn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),_Y]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",EY]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},TY]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[j]}],"gradient-via-pos":[{via:[j]}],"gradient-to-pos":[{to:[j]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...he(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:he()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...he()]}],"outline-offset":[{"outline-offset":[fl,vn]}],"outline-w":[{outline:[fl,tc]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[fl,tc]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",nc,MY]}],"shadow-color":[{shadow:[tf]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",nc,vn]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[m]}],saturate:[{saturate:[C]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",vn]}],duration:[{duration:Ce()}],ease:[{ease:["linear","in","out","in-out",vn]}],delay:[{delay:Ce()}],animate:[{animate:["none","spin","ping","pulse","bounce",vn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[ef,vn]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",vn]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",vn]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",vn]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[fl,tc,H1]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},LY=xY(RY);function we(...t){return LY(rY(t))}function OY(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function xy(...t){return e=>t.forEach(s=>OY(s,e))}function Jt(...t){return y.useCallback(xy(...t),t)}var Eo=y.forwardRef((t,e)=>{const{children:s,...r}=t,i=y.Children.toArray(s),a=i.find(FY);if(a){const o=a.props.children,c=i.map(d=>d===a?y.Children.count(o)>1?y.Children.only(null):y.isValidElement(o)?o.props.children:null:d);return n.jsx(Eb,{...r,ref:e,children:y.isValidElement(o)?y.cloneElement(o,void 0,c):null})}return n.jsx(Eb,{...r,ref:e,children:s})});Eo.displayName="Slot";var Eb=y.forwardRef((t,e)=>{const{children:s,...r}=t;if(y.isValidElement(s)){const i=zY(s);return y.cloneElement(s,{...BY(r,s.props),ref:e?xy(e,i):i})}return y.Children.count(s)>1?y.Children.only(null):null});Eb.displayName="SlotClone";var EL=({children:t})=>n.jsx(n.Fragment,{children:t});function FY(t){return y.isValidElement(t)&&t.type===EL}function BY(t,e){const s={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...c)=>{a(...c),i(...c)}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...t,...s}}function zY(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function _L(t){var e,s,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(s=_L(t[e]))&&(r&&(r+=" "),r+=s);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function VY(){for(var t,e,s=0,r="";s<arguments.length;)(t=arguments[s++])&&(e=_L(t))&&(r&&(r+=" "),r+=e);return r}const HE=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,qE=VY,mg=(t,e)=>s=>{var r;if((e==null?void 0:e.variants)==null)return qE(t,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(h=>{const g=s==null?void 0:s[h],m=a==null?void 0:a[h];if(g===null)return null;const p=HE(g)||HE(m);return i[h][p]}),c=s&&Object.entries(s).reduce((h,g)=>{let[m,p]=g;return p===void 0||(h[m]=p),h},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,g)=>{let{class:m,className:p,...v}=g;return Object.entries(v).every(j=>{let[N,E]=j;return Array.isArray(E)?E.includes({...a,...c}[N]):{...a,...c}[N]===E})?[...h,m,p]:h},[]);return qE(t,o,d,s==null?void 0:s.class,s==null?void 0:s.className)},Ip=mg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),H=y.forwardRef(({className:t,variant:e,size:s,asChild:r=!1,...i},a)=>{const o=r?Eo:"button";return n.jsx(o,{className:we(Ip({variant:e,size:s,className:t})),ref:a,...i})});H.displayName="Button";const IL=y.createContext(void 0),GE=t=>t==="/"?n.jsx(Ep,{className:"h-4 w-4"}):t==="/projects"?n.jsx(zl,{className:"h-4 w-4"}):t==="/maintenance"?n.jsx(Jh,{className:"h-4 w-4"}):t==="/repairs"?n.jsx(so,{className:"h-4 w-4"}):t==="/clients"?n.jsx(yi,{className:"h-4 w-4"}):t==="/technicians"?n.jsx(Qf,{className:"h-4 w-4"}):t==="/client-portal"?n.jsx(fr,{className:"h-4 w-4"}):t.startsWith("/clients/")&&t.endsWith("/edit")?n.jsx(Qf,{className:"h-4 w-4"}):t.startsWith("/clients/")?n.jsx(Qf,{className:"h-4 w-4"}):n.jsx(fr,{className:"h-4 w-4"}),$Y=t=>{if(t==="/")return"Dashboard";if(t==="/projects")return"Build";if(t==="/maintenance")return"Schedule";if(t==="/repairs")return"Service";if(t==="/clients")return"Clients";if(t==="/technicians")return"Technicians";if(t==="/client-portal")return"Client Portal";const e=t.match(/^\/clients\/(\d+)$/);if(e)return`Client ${e[1]}`;const s=t.match(/^\/clients\/(\d+)\/edit$/);if(s)return`Edit Client ${s[1]}`;const r=t.split("/").filter(Boolean);if(r.length>0){const i=r[r.length-1];return i.charAt(0).toUpperCase()+i.slice(1).replace(/-/g," ")}return"New Tab"};function UY({children:t}){const[e,s]=_n(),[r,i]=y.useState(()=>{if(typeof window<"u")try{const C=localStorage.getItem("smartwater_tabs");if(C){const I=JSON.parse(C);if(Array.isArray(I)&&I.length>0)return I.map(P=>{const L=GE(P.path);return{...P,icon:L}})}}catch(C){console.error("Error loading tabs from localStorage:",C)}return[{id:`tab-${Date.now()}`,title:"Dashboard",path:"/",icon:n.jsx(Ep,{className:"h-4 w-4"}),lastAccessed:Date.now()}]}),[a,o]=y.useState(()=>{if(typeof window<"u")try{const C=localStorage.getItem("smartwater_active_tab");if(C&&r.some(I=>I.id===C))return C}catch(C){console.error("Error loading active tab from localStorage:",C)}return r.length>0?r[0].id:`tab-${Date.now()}`}),c=y.useCallback(C=>r.find(I=>I.id===C),[r]),d=y.useCallback(C=>r.find(I=>I.path===C),[r]),h=y.useCallback(C=>{const I=c(C);I&&(o(C),s(I.path),i(P=>P.map(L=>L.id===C?{...L,lastAccessed:Date.now()}:L)))},[c,s]),g=y.useCallback((C,I,P=!1)=>{if(C==="/"&&!P){const k=r.find(O=>O.path==="/");if(k)return i(O=>O.map(V=>V.id===k.id?{...V,lastAccessed:Date.now()}:V)),k.id}const L=`tab-${Date.now()}`,T=I||$Y(C),M={id:L,title:T,path:C,icon:GE(C),lastAccessed:Date.now()};return i(k=>[...k,M]),L},[r]),m=y.useCallback(C=>{r.findIndex(L=>L.id===C);const I=C===a,P=r.filter(L=>L.id!==C);if(I&&P.length>0){const T=[...P].sort((M,k)=>k.lastAccessed-M.lastAccessed)[0];o(T.id),s(T.path)}i(P)},[r,a,s]),p=y.useCallback(C=>{const I={...C,id:`tab-${Date.now()}`,title:`${C.title} (Copy)`,lastAccessed:Date.now()};i(P=>[...P,I]),h(I.id)},[h]),v=[...r].sort((C,I)=>I.lastAccessed-C.lastAccessed);y.useEffect(()=>{const C=d(e);if(C)C.id!==a&&h(C.id);else{if(e==="/404"||e==="/error")return;g(e)}},[e,d,g,a,h]),y.useEffect(()=>{const C=I=>{if(I.detail){const{path:P,title:L,icon:T,forceNew:M=!1,navigateToNewTab:k=!0}=I.detail;if(P){const O=g(P,L,M);k&&h(O)}}};return window.addEventListener("addTab",C),()=>{window.removeEventListener("addTab",C)}},[g,h]);const j=e.match(/^\/clients\/(\d+)$/),N=e.match(/^\/clients\/(\d+)\/edit$/),E=j?parseInt(j[1]):N?parseInt(N[1]):null,{data:_}=wt({queryKey:["/api/clients",E],enabled:!!E});y.useEffect(()=>{var C;if(_&&E){const I=((C=_.user)==null?void 0:C.name)||`Client ${E}`;i(P=>P.map(L=>L.path===`/clients/${E}`?{...L,title:I}:L.path===`/clients/${E}/edit`?{...L,title:`Edit ${I}`}:L))}},[_,E]),y.useEffect(()=>{if(typeof window<"u"&&r.length>0)try{const C=r.map(I=>{const{icon:P,...L}=I;return{...L,iconName:void 0}});localStorage.setItem("smartwater_tabs",JSON.stringify(C))}catch(C){console.error("Error saving tabs to localStorage:",C)}},[r]),y.useEffect(()=>{if(typeof window<"u"&&a)try{localStorage.setItem("smartwater_active_tab",a)}catch(C){console.error("Error saving active tab to localStorage:",C)}},[a]);const S={tabs:r,activeTabId:a,setActiveTabId:o,addTab:g,closeTab:m,duplicateTab:p,getTabById:c,getTabByPath:d,navigateToTab:h,recentTabs:v};return typeof window<"u"&&(window.__TAB_CONTEXT__=S),n.jsx(IL.Provider,{value:S,children:t})}function n2(){const t=Ne.useContext(IL);if(t===void 0)throw new Error("useTabs must be used within a TabProvider");return t}function WY(){const{tabs:t,activeTabId:e,navigateToTab:s,closeTab:r,duplicateTab:i,addTab:a}=n2(),[o,c]=y.useState(0),d=Ne.useRef(null),h=()=>{if(d.current){const I=Math.max(0,o-200);d.current.scrollTo({left:I,behavior:"smooth"}),c(I)}},g=()=>{if(d.current){const I=d.current.scrollWidth-d.current.clientWidth,P=Math.min(I,o+200);d.current.scrollTo({left:P,behavior:"smooth"}),c(P)}},m=()=>{d.current&&c(d.current.scrollLeft)},[p,v]=y.useState(!1),[j,N]=y.useState(!1);y.useEffect(()=>{const I=()=>{if(d.current){const{scrollLeft:L,scrollWidth:T,clientWidth:M}=d.current;v(L>0),N(L<T-M-5)}};I();const P=new ResizeObserver(I);return d.current&&P.observe(d.current),()=>{d.current&&P.unobserve(d.current)}},[t]);const E=I=>{s(I)},_=I=>{i(I)},S=(I,P)=>{I.stopPropagation(),r(P)},C=()=>{a("/","Dashboard",!0)};return y.useEffect(()=>{if(d.current){const I=d.current.querySelector(`[data-tab-id="${e}"]`);if(I){const P=d.current,L=I.getBoundingClientRect(),T=P.getBoundingClientRect();(L.left<T.left||L.right>T.right)&&(I.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}),setTimeout(()=>{c(P.scrollLeft)},300))}}},[e]),n.jsx("div",{className:"bg-white border-b border-gray-200 relative",children:n.jsxs("div",{className:"relative flex items-center",children:[p&&n.jsx(H,{variant:"ghost",size:"sm",className:"absolute left-0 z-10 px-1 h-full rounded-none shadow-sm bg-white/80 backdrop-blur-sm",onClick:h,title:"Scroll Left",children:n.jsx(Vl,{className:"h-4 w-4"})}),n.jsxs("div",{ref:d,className:"flex overflow-x-auto scrollbar-hide w-full",onScroll:m,style:{scrollBehavior:"smooth"},children:[t.map(I=>n.jsx("div",{"data-tab-id":I.id,onClick:()=>E(I.id),onDoubleClick:()=>_(I),title:"Click to switch to this tab. Double-click to duplicate this tab.",className:we("flex items-center py-2.5 px-4 cursor-pointer min-w-fit max-w-[180px] relative",e===I.id?"text-primary border-b-2 border-b-primary border-t-0 border-l-0 border-r-0":"text-gray-600 border-b-transparent border-b-2 border-t-0 border-l-0 border-r-0"),children:n.jsxs("div",{className:"flex items-center space-x-1 truncate",children:[I.icon&&n.jsx("span",{className:we("mr-1.5 flex-shrink-0",e===I.id?"text-primary":"text-gray-500"),children:I.icon}),n.jsx("span",{className:"truncate text-sm",children:I.title}),n.jsx("button",{onClick:P=>S(P,I.id),className:"p-0.5 rounded-full hover:bg-gray-100 ml-1 flex-shrink-0",title:"Close Tab",children:n.jsx(ys,{className:"h-3 w-3 text-gray-400 hover:text-gray-600"})})]})},I.id)),n.jsx(H,{variant:"ghost",size:"sm",className:"px-3 py-3 h-full rounded-none",onClick:C,title:"New Tab",children:n.jsx(os,{className:"h-4 w-4"})})]}),j&&n.jsx(H,{variant:"ghost",size:"sm",className:"absolute right-0 z-10 px-1 h-full rounded-none shadow-sm bg-white/80 backdrop-blur-sm",onClick:g,title:"Scroll Right",children:n.jsx(ad,{className:"h-4 w-4"})})]})})}const HY=1,qY=1e6;let q1=0;function GY(){return q1=(q1+1)%Number.MAX_SAFE_INTEGER,q1.toString()}const G1=new Map,YE=t=>{if(G1.has(t))return;const e=setTimeout(()=>{G1.delete(t),Xf({type:"REMOVE_TOAST",toastId:t})},qY);G1.set(t,e)},YY=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,HY)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=e;return s?YE(s):t.toasts.forEach(r=>{YE(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===s||s===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)}}},Yx=[];let Kx={toasts:[]};function Xf(t){Kx=YY(Kx,t),Yx.forEach(e=>{e(Kx)})}function Mi({...t}){const e=GY(),s=i=>Xf({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Xf({type:"DISMISS_TOAST",toastId:e});return Xf({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:s}}function Lt(){const[t,e]=y.useState(Kx);return y.useEffect(()=>(Yx.push(e),()=>{const s=Yx.indexOf(e);s>-1&&Yx.splice(s,1)}),[t]),{...t,toast:Mi,dismiss:s=>Xf({type:"DISMISS_TOAST",toastId:s})}}const TL=y.createContext(void 0),Kr=()=>{const t=y.useContext(TL);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},KY=({children:t})=>{const[e,s]=y.useState(null),[r,i]=y.useState(!1),[a,o]=y.useState(!1),[c,d]=y.useState(0),[h,g]=y.useState(0),{toast:m}=Lt();y.useEffect(()=>{console.log("Auth provider initialized, checking session"),o(!0);const S=setTimeout(()=>{a&&(console.log("Auth context timeout reached, forcing loading state to false"),o(!1))},3e3);return p().then(C=>{console.log("Initial session check complete:",C?"Authenticated":"Not authenticated")}).catch(C=>{console.error("Error during initial session check:",C),o(!1)}),()=>clearTimeout(S)},[]);const p=async()=>{try{const S=Date.now(),C=S-h;if(C<500&&c>3)return console.warn(`Too many session checks in rapid succession (${c} attempts in ${C}ms), skipping to prevent loop`),r;d(M=>M+1),g(S),o(!0),console.log(`Checking session... (attempt ${c+1})`);const I=new AbortController,P=setTimeout(()=>{console.warn("Session check request timeout - aborting"),I.abort()},2500),L=await fetch("/api/auth/session",{method:"GET",credentials:"include",headers:{Accept:"application/json","Cache-Control":"no-cache, no-store, must-revalidate"},signal:I.signal});if(clearTimeout(P),!L.ok)return console.warn(`Session check failed with status: ${L.status}`),s(null),i(!1),c>5&&(console.warn("Too many failed session checks, resetting counter"),d(0)),!1;const T=await L.json();return console.log("Session response:",T),T.isAuthenticated&&T.user?(console.log("Session contains authenticated user:",T.user.email),s(T.user),i(!0),d(0),!0):(console.log("Not authenticated"),s(null),i(!1),c>5&&(console.warn("Too many failed session checks, resetting counter"),d(0)),!1)}catch(S){return console.error("Session check error:",S),s(null),i(!1),c>5&&(console.warn("Too many failed session checks, resetting counter"),d(0)),!1}finally{o(!1)}},_={user:e,isAuthenticated:r,isLoading:a,login:async(S,C)=>{try{o(!0),console.log("Attempting login for user:",S);const I=await fetch("/api/auth/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:S,password:C})});if(!I.ok)return console.warn(`Login failed with status: ${I.status}`),!1;const P=await I.json();return console.log("Login response:",P),P.success&&P.user?(s(P.user),i(!0),!0):(console.warn("Login failed"),!1)}catch(I){return console.error("Login error:",I),!1}finally{o(!1)}},logout:async()=>{try{o(!0),console.log("Attempting logout");const S=await fetch("/api/auth/logout",{method:"POST",credentials:"include",headers:{Accept:"application/json"}});if(!S.ok){console.warn(`Logout failed with status: ${S.status}`),m({title:"Logout error",description:"Server error during logout. Please try again.",variant:"destructive"});return}s(null),i(!1),m({title:"Logout successful",description:"You have been logged out"})}catch(S){console.error("Logout error:",S),s(null),i(!1)}finally{o(!1)}},register:async S=>{try{o(!0),console.log("Attempting registration for user:",S.email,"with organization:",S.organizationName);const C=await fetch("/api/auth/register",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(S)});if(!C.ok){console.warn(`Registration failed with status: ${C.status}`);const P=await C.json().catch(()=>({message:"Unknown error"}));return m({title:"Registration failed",description:P.message||"Could not create account",variant:"destructive"}),s(null),i(!1),!1}const I=await C.json();return console.log("Registration response:",I),I.success&&I.user?(s(I.user),i(!0),m({title:"Registration successful",description:"Your account has been created"}),!0):(s(null),i(!1),m({title:"Registration failed",description:I.message||"Could not create account",variant:"destructive"}),!1)}catch(C){return console.error("Registration error:",C),s(null),i(!1),m({title:"Registration error",description:"Could not connect to the server. Please try again.",variant:"destructive"}),!1}finally{o(!1)}},googleLogin:async()=>{try{console.log("Preparing for Google OAuth login");const S=Date.now(),C=Math.random().toString(36).substring(2,10),I=`client_${S}_${C}`;localStorage.setItem("oauth_client_state",I),localStorage.setItem("oauth_timestamp",S.toString());try{console.log("Clearing previous OAuth state");const T=await fetch("/api/auth/clear-oauth-state",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});if(T.ok){const M=await T.json();console.log("OAuth state cleared:",M.message)}else console.warn("Failed to clear OAuth state (HTTP error):",T.status)}catch(T){if(T&&typeof T=="object"&&"name"in T){const M=T;M.name==="AbortError"||M.name==="TimeoutError"?console.warn("Timeout while clearing OAuth state"):console.warn("Error in OAuth state clearing:",M)}else console.warn("Unknown error in OAuth state clearing")}let P=null,L=!1;try{console.log("Preparing OAuth session with server");const T=await fetch("/api/auth/prepare-oauth",{method:"GET",credentials:"include",headers:{Accept:"application/json","Cache-Control":"no-cache, no-store, must-revalidate"},signal:AbortSignal.timeout(5e3)});if(T.ok){const M=await T.json();M.success&&M.state?(console.log("Server prepared OAuth session successfully"),P=M.state,L=!0,localStorage.setItem("oauth_server_state",P)):console.warn("Server returned success=false for OAuth preparation:",M.message)}else console.warn("OAuth preparation endpoint returned error:",T.status)}catch(T){if(T&&typeof T=="object"&&"name"in T){const M=T;M.name==="AbortError"||M.name==="TimeoutError"?console.warn("Timeout while preparing OAuth session"):console.error("Error preparing OAuth with server:",M)}else console.error("Unknown error preparing OAuth with server")}if(L&&P){console.log("Using server-generated state for OAuth:",P);const T=`/api/auth/google?state=${P}&prompt=select_account&source=server`;document.cookie=`oauth_token=${P}; path=/; max-age=900; SameSite=Lax`,document.cookie="oauth_source=server; path=/; max-age=900; SameSite=Lax",window.location.href=T}else{console.log("Using client-generated state for OAuth:",I);const T=`/api/auth/google?state=${I}&prompt=select_account&source=client`;document.cookie=`oauth_token=${I}; path=/; max-age=900; SameSite=Lax`,document.cookie="oauth_source=client; path=/; max-age=900; SameSite=Lax",window.location.href=T}}catch(S){console.error("Fatal error in Google OAuth preparation:",S);try{const C=`emergency_${Date.now()}_${Math.random().toString(36).substring(2,8)}`;localStorage.setItem("oauth_emergency_state",C),document.cookie=`oauth_token=${C}; path=/; max-age=900; SameSite=Lax`,document.cookie="oauth_source=emergency; path=/; max-age=900; SameSite=Lax",console.warn("Using emergency fallback for Google OAuth"),window.location.href=`/api/auth/google?state=${C}&prompt=select_account&source=emergency`}catch{console.error("Emergency fallback failed, using minimal OAuth redirect"),window.location.href="/api/auth/google?prompt=select_account"}}},checkSession:p};return n.jsx(TL.Provider,{value:_,children:t})};function ZY({user:t}){const[e,s]=y.useState(!1),[r]=_n(),{addTab:i,navigateToTab:a}=n2(),{user:o,logout:c}=Kr(),d=t||(o?{name:o.name||o.username,role:o.role}:{name:"Guest",role:"Not logged in"}),h=o&&["system_admin","org_admin","admin"].includes(o.role),[g]=ha("/"),[m]=ha("/projects"),[p]=ha("/maintenance"),[v]=ha("/repairs"),[j]=ha("/clients"),[N]=ha("/technicians"),[E]=ha("/communications"),[_]=ha("/business"),[S]=ha("/inventory"),[C]=ha("/inventory/barcode-demo"),[I]=ha("/settings"),[P]=ha("/admin"),L=()=>{s(!e)},T=y.useRef(0),M=y.useRef(""),k=y.useRef(null),O=(z,G)=>{z.preventDefault();const he=new Date().getTime(),le=300;if(G===M.current&&he-T.current<le){k.current&&(clearTimeout(k.current),k.current=null);const se=V(G),re=i(G,se,!0);a(re),T.current=0,M.current=""}else k.current&&(clearTimeout(k.current),k.current=null),T.current=he,M.current=G,k.current=setTimeout(()=>{if(G===M.current){const se=V(G);i(G,se,!0),T.current=0,M.current=""}},le)},V=z=>{switch(z){case"/":return"Dashboard";case"/projects":return"Build";case"/maintenance":return"Maintenance";case"/repairs":return"Repair";case"/clients":return"Clients";case"/technicians":return"Technicians";case"/communications":return"Communications";case"/business":return"Business";case"/settings":return"Settings";case"/admin":return"Admin Dashboard";default:return"New Tab"}},B=()=>n.jsxs("div",{className:we("hidden md:flex flex-col bg-white border-r border-gray-200 h-full transition-all duration-300",e?"w-20":"w-64"),children:[n.jsxs("div",{className:we("flex items-center h-16 border-b border-gray-200 px-4",e?"justify-center":"justify-between"),children:[!e&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ga,{className:"h-6 w-6 text-primary mr-2",fill:"#0077B6"}),n.jsx("h1",{className:"text-xl font-bold text-primary font-heading",children:"SmartWater Pools"})]}),e&&n.jsx(Ga,{className:"h-8 w-8 text-primary",fill:"#0077B6"}),n.jsx("button",{onClick:L,className:"p-1 rounded-md text-gray-500 hover:bg-gray-100",children:e?n.jsx(ad,{className:"h-5 w-5"}):n.jsx(Vl,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"flex flex-col flex-grow py-4 overflow-y-auto",children:[!e&&n.jsx("div",{className:"px-4 mb-6",children:n.jsxs("div",{className:"flex items-center p-2 bg-blue-50 rounded-lg",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary text-white flex items-center justify-center text-lg",children:d.name.charAt(0)}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:d.name}),n.jsx("p",{className:"text-xs text-gray-500",children:d.role})]})]})}),e&&n.jsx("div",{className:"flex justify-center py-4",children:n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary text-white flex items-center justify-center text-lg",children:d.name.charAt(0)})}),n.jsxs("nav",{className:we("flex-1",e?"px-1 space-y-3":"px-4 space-y-2"),children:[n.jsxs("div",{onClick:z=>O(z,"/"),className:we("flex cursor-pointer",e?"flex-col items-center justify-center p-2":"items-center py-2 px-3 rounded-md hover:bg-gray-50"),children:[n.jsx("div",{className:we("flex items-center justify-center",e?"p-1 rounded-md":"mr-3",g?"text-primary":"text-gray-500"),children:n.jsx(Ep,{className:"h-5 w-5"})}),e?n.jsx("span",{className:we("text-xs mt-0.5",g?"text-primary font-medium":"text-gray-500"),children:"Dashboard"}):n.jsx("span",{className:we("text-sm font-medium",g?"text-primary":"text-gray-700"),children:"Dashboard"})]}),n.jsxs("div",{onClick:z=>O(z,"/clients"),className:we("flex cursor-pointer",e?"flex-col items-center justify-center p-2":"items-center py-2 px-3 rounded-md hover:bg-gray-50"),children:[n.jsx("div",{className:we("flex items-center justify-center",e?"p-1 rounded-md":"mr-3",j?"text-primary":"text-gray-500"),children:n.jsx(yi,{className:"h-5 w-5"})}),e?n.jsx("span",{className:we("text-xs mt-0.5",j?"text-primary font-medium":"text-gray-500"),children:"Clients"}):n.jsx("span",{className:we("text-sm font-medium",j?"text-primary":"text-gray-700"),children:"Clients"})]}),n.jsxs("div",{onClick:z=>O(z,"/projects"),className:we("flex cursor-pointer",e?"flex-col items-center justify-center p-2":"items-center py-2 px-3 rounded-md hover:bg-gray-50"),children:[n.jsx("div",{className:we("flex items-center justify-center",e?"p-1 rounded-md":"mr-3",m?"text-primary":"text-gray-500"),children:n.jsx(zl,{className:"h-5 w-5"})}),e?n.jsx("span",{className:we("text-xs mt-0.5",m?"text-primary font-medium":"text-gray-500"),children:"Build"}):n.jsx("span",{className:we("text-sm font-medium",m?"text-primary":"text-gray-700"),children:"Build"})]}),n.jsxs("div",{onClick:z=>O(z,"/maintenance"),className:we("flex cursor-pointer",e?"flex-col items-center justify-center p-2":"items-center py-2 px-3 rounded-md hover:bg-gray-50"),children:[n.jsx("div",{className:we("flex items-center justify-center",e?"p-1 rounded-md":"mr-3",p?"text-primary":"text-gray-500"),children:n.jsx(Jh,{className:"h-5 w-5"})}),e?n.jsx("span",{className:we("text-xs mt-0.5",p?"text-primary font-medium":"text-gray-500"),children:"Maintenance"}):n.jsx("span",{className:we("text-sm font-medium",p?"text-primary":"text-gray-700"),children:"Maintenance"})]}),n.jsxs("div",{onClick:z=>O(z,"/repairs"),className:we("flex cursor-pointer",e?"flex-col items-center justify-center p-2":"items-center py-2 px-3 rounded-md hover:bg-gray-50"),children:[n.jsx("div",{className:we("flex items-center justify-center",e?"p-1 rounded-md":"mr-3",v?"text-primary":"text-gray-500"),children:n.jsx(so,{className:"h-5 w-5"})}),e?n.jsx("span",{className:we("text-xs mt-0.5",v?"text-primary font-medium":"text-gray-500"),children:"Repair"}):n.jsx("span",{className:we("text-sm font-medium",v?"text-primary":"text-gray-700"),children:"Repair"})]}),n.jsxs("div",{onClick:z=>O(z,"/communications"),className:we("flex cursor-pointer",e?"flex-col items-center justify-center p-2":"items-center py-2 px-3 rounded-md hover:bg-gray-50"),children:[n.jsx("div",{className:we("flex items-center justify-center",e?"p-1 rounded-md":"mr-3",E?"text-primary":"text-gray-500"),children:n.jsx(ja,{className:"h-5 w-5"})}),e?n.jsx("span",{className:we("text-xs mt-0.5",E?"text-primary font-medium":"text-gray-500"),children:"Comms"}):n.jsx("span",{className:we("text-sm font-medium",E?"text-primary":"text-gray-700"),children:"Communications"})]}),n.jsxs("div",{onClick:z=>O(z,"/business"),className:we("flex cursor-pointer",e?"flex-col items-center justify-center p-2":"items-center py-2 px-3 rounded-md hover:bg-gray-50"),children:[n.jsx("div",{className:we("flex items-center justify-center",e?"p-1 rounded-md":"mr-3",_?"text-primary":"text-gray-500"),children:n.jsx(Nb,{className:"h-5 w-5"})}),e?n.jsx("span",{className:we("text-xs mt-0.5",_?"text-primary font-medium":"text-gray-500"),children:"Business"}):n.jsx("span",{className:we("text-sm font-medium",_?"text-primary":"text-gray-700"),children:"Business"})]}),n.jsxs("div",{onClick:z=>O(z,"/inventory"),className:we("flex cursor-pointer",e?"flex-col items-center justify-center p-2":"items-center py-2 px-3 rounded-md hover:bg-gray-50"),children:[n.jsx("div",{className:we("flex items-center justify-center",e?"p-1 rounded-md":"mr-3",S?"text-primary":"text-gray-500"),children:n.jsx(Xa,{className:"h-5 w-5"})}),e?n.jsx("span",{className:we("text-xs mt-0.5",S?"text-primary font-medium":"text-gray-500"),children:"Inventory"}):n.jsx("span",{className:we("text-sm font-medium",S?"text-primary":"text-gray-700"),children:"Inventory"})]}),n.jsxs("div",{onClick:z=>O(z,"/inventory/barcode-demo"),className:we("flex cursor-pointer",e?"flex-col items-center justify-center p-2":"items-center py-2 px-3 rounded-md hover:bg-gray-50"),children:[n.jsx("div",{className:we("flex items-center justify-center",e?"p-1 rounded-md":"mr-3",C?"text-primary":"text-gray-500"),children:n.jsx(ki,{className:"h-5 w-5"})}),e?n.jsx("span",{className:we("text-xs mt-0.5",C?"text-primary font-medium":"text-gray-500"),children:"Scanner"}):n.jsx("span",{className:we("text-sm font-medium",C?"text-primary":"text-gray-700"),children:"Barcode Scanner"})]}),n.jsxs("div",{onClick:z=>O(z,"/fleetmatics/vehicle-tracking"),className:we("flex cursor-pointer",e?"flex-col items-center justify-center p-2":"items-center py-2 px-3 rounded-md hover:bg-gray-50"),children:[n.jsx("div",{className:we("flex items-center justify-center",e?"p-1 rounded-md":"mr-3",r.startsWith("/fleetmatics/vehicle-tracking")?"text-primary":"text-gray-500"),children:n.jsx(bi,{className:"h-5 w-5"})}),e?n.jsx("span",{className:we("text-xs mt-0.5",r.startsWith("/fleetmatics/vehicle-tracking")?"text-primary font-medium":"text-gray-500"),children:"Tracking"}):n.jsx("span",{className:we("text-sm font-medium",r.startsWith("/fleetmatics/vehicle-tracking")?"text-primary":"text-gray-700"),children:"Vehicle Tracking"})]}),n.jsxs("div",{onClick:z=>O(z,"/fleetmatics/vehicle-mapping"),className:we("flex cursor-pointer",e?"flex-col items-center justify-center p-2":"items-center py-2 px-3 rounded-md hover:bg-gray-50"),children:[n.jsx("div",{className:we("flex items-center justify-center",e?"p-1 rounded-md":"mr-3",r.startsWith("/fleetmatics/vehicle-mapping")?"text-primary":"text-gray-500"),children:n.jsx(Xa,{className:"h-5 w-5"})}),e?n.jsx("span",{className:we("text-xs mt-0.5",r.startsWith("/fleetmatics/vehicle-mapping")?"text-primary font-medium":"text-gray-500"),children:"Mapping"}):n.jsx("span",{className:we("text-sm font-medium",r.startsWith("/fleetmatics/vehicle-mapping")?"text-primary":"text-gray-700"),children:"Vehicle Mapping"})]}),n.jsxs("div",{onClick:z=>O(z,"/fleetmatics/settings"),className:we("flex cursor-pointer",e?"flex-col items-center justify-center p-2":"items-center py-2 px-3 rounded-md hover:bg-gray-50"),children:[n.jsx("div",{className:we("flex items-center justify-center",e?"p-1 rounded-md":"mr-3",r.startsWith("/fleetmatics/settings")?"text-primary":"text-gray-500"),children:n.jsx(PG,{className:"h-5 w-5"})}),e?n.jsx("span",{className:we("text-xs mt-0.5",r.startsWith("/fleetmatics/settings")?"text-primary font-medium":"text-gray-500"),children:"Fleet Settings"}):n.jsx("span",{className:we("text-sm font-medium",r.startsWith("/fleetmatics/settings")?"text-primary":"text-gray-700"),children:"Fleetmatics Settings"})]}),n.jsxs("div",{onClick:z=>O(z,"/settings"),className:we("flex cursor-pointer",e?"flex-col items-center justify-center p-2":"items-center py-2 px-3 rounded-md hover:bg-gray-50"),children:[n.jsx("div",{className:we("flex items-center justify-center",e?"p-1 rounded-md":"mr-3",I?"text-primary":"text-gray-500"),children:n.jsx(Hs,{className:"h-5 w-5"})}),e?n.jsx("span",{className:we("text-xs mt-0.5",I?"text-primary font-medium":"text-gray-500"),children:"Settings"}):n.jsx("span",{className:we("text-sm font-medium",I?"text-primary":"text-gray-700"),children:"Settings"})]}),h&&n.jsxs("div",{onClick:z=>O(z,"/admin"),className:we("flex cursor-pointer",e?"flex-col items-center justify-center p-2":"items-center py-2 px-3 rounded-md hover:bg-gray-50"),children:[n.jsx("div",{className:we("flex items-center justify-center",e?"p-1 rounded-md":"mr-3",P?"text-primary":"text-gray-500"),children:n.jsx(VE,{className:"h-5 w-5"})}),e?n.jsx("span",{className:we("text-xs mt-0.5",P?"text-primary font-medium":"text-gray-500"),children:"Admin"}):n.jsx("span",{className:we("text-sm font-medium",P?"text-primary":"text-gray-700"),children:"Admin Dashboard"})]})]}),!e&&n.jsxs("div",{className:"px-4 mt-6 border-t pt-6",children:[n.jsxs("div",{onClick:z=>O(z,"/technicians"),className:we("flex items-center py-2 rounded-md cursor-pointer",N?"bg-blue-50":""),children:[n.jsx("div",{className:we("mr-3",N?"text-primary":"text-gray-500"),children:n.jsx(Qf,{className:"h-5 w-5"})}),n.jsx("span",{className:we("text-sm font-medium",N?"text-primary":"text-gray-700"),children:"Technicians"})]}),n.jsxs("a",{href:"#help",className:"flex items-center py-2 text-sm font-medium text-gray-700",children:[n.jsx(MG,{className:"mr-3 h-5 w-5 text-gray-500"}),"Help & Support"]}),n.jsxs("div",{onClick:c,className:"flex items-center py-2 text-sm font-medium text-red-600 cursor-pointer",children:[n.jsx(gy,{className:"mr-3 h-5 w-5 text-red-600"}),"Logout"]})]})]})]}),Y=()=>n.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50 overflow-x-auto",children:n.jsxs("div",{className:"flex items-center justify-between gap-4 px-3 py-2 min-w-max",children:[n.jsxs("div",{onClick:z=>O(z,"/"),className:"flex flex-col items-center px-3 py-1",children:[n.jsx("div",{className:we("p-1 rounded-md",g?"text-primary":"text-gray-500"),children:n.jsx(Ep,{className:"h-5 w-5"})}),n.jsx("span",{className:we("text-xs mt-0.5",g?"text-primary font-medium":"text-gray-500"),children:"Dashboard"})]}),n.jsxs("div",{onClick:z=>O(z,"/clients"),className:"flex flex-col items-center px-3 py-1",children:[n.jsx("div",{className:we("p-1 rounded-md",j?"text-primary":"text-gray-500"),children:n.jsx(yi,{className:"h-5 w-5"})}),n.jsx("span",{className:we("text-xs mt-0.5",j?"text-primary font-medium":"text-gray-500"),children:"Clients"})]}),n.jsxs("div",{onClick:z=>O(z,"/projects"),className:"flex flex-col items-center px-3 py-1",children:[n.jsx("div",{className:we("p-1 rounded-md",m?"text-primary":"text-gray-500"),children:n.jsx(zl,{className:"h-5 w-5"})}),n.jsx("span",{className:we("text-xs mt-0.5",m?"text-primary font-medium":"text-gray-500"),children:"Build"})]}),n.jsxs("div",{onClick:z=>O(z,"/maintenance"),className:"flex flex-col items-center px-3 py-1",children:[n.jsx("div",{className:we("p-1 rounded-md",p?"text-primary":"text-gray-500"),children:n.jsx(Jh,{className:"h-5 w-5"})}),n.jsx("span",{className:we("text-xs mt-0.5",p?"text-primary font-medium":"text-gray-500"),children:"Maintenance"})]}),n.jsxs("div",{onClick:z=>O(z,"/repairs"),className:"flex flex-col items-center px-3 py-1",children:[n.jsx("div",{className:we("p-1 rounded-md",v?"text-primary":"text-gray-500"),children:n.jsx(so,{className:"h-5 w-5"})}),n.jsx("span",{className:we("text-xs mt-0.5",v?"text-primary font-medium":"text-gray-500"),children:"Repair"})]}),n.jsxs("div",{onClick:z=>O(z,"/communications"),className:"flex flex-col items-center px-3 py-1",children:[n.jsx("div",{className:we("p-1 rounded-md",E?"text-primary":"text-gray-500"),children:n.jsx(ja,{className:"h-5 w-5"})}),n.jsx("span",{className:we("text-xs mt-0.5",E?"text-primary font-medium":"text-gray-500"),children:"Comms"})]}),n.jsxs("div",{onClick:z=>O(z,"/technicians"),className:"flex flex-col items-center px-3 py-1",children:[n.jsx("div",{className:we("p-1 rounded-md",N?"text-primary":"text-gray-500"),children:n.jsx(Qf,{className:"h-5 w-5"})}),n.jsx("span",{className:we("text-xs mt-0.5",N?"text-primary font-medium":"text-gray-500"),children:"Techs"})]}),n.jsxs("div",{onClick:z=>O(z,"/business"),className:"flex flex-col items-center px-3 py-1",children:[n.jsx("div",{className:we("p-1 rounded-md",_?"text-primary":"text-gray-500"),children:n.jsx(Nb,{className:"h-5 w-5"})}),n.jsx("span",{className:we("text-xs mt-0.5",_?"text-primary font-medium":"text-gray-500"),children:"Business"})]}),n.jsxs("div",{onClick:z=>O(z,"/inventory"),className:"flex flex-col items-center px-3 py-1",children:[n.jsx("div",{className:we("p-1 rounded-md",S?"text-primary":"text-gray-500"),children:n.jsx(Xa,{className:"h-5 w-5"})}),n.jsx("span",{className:we("text-xs mt-0.5",S?"text-primary font-medium":"text-gray-500"),children:"Inventory"})]}),n.jsxs("div",{onClick:z=>O(z,"/inventory/barcode-demo"),className:"flex flex-col items-center px-3 py-1",children:[n.jsx("div",{className:we("p-1 rounded-md",C?"text-primary":"text-gray-500"),children:n.jsx(ki,{className:"h-5 w-5"})}),n.jsx("span",{className:we("text-xs mt-0.5",C?"text-primary font-medium":"text-gray-500"),children:"Scanner"})]}),n.jsxs("div",{onClick:z=>O(z,"/settings"),className:"flex flex-col items-center px-3 py-1",children:[n.jsx("div",{className:we("p-1 rounded-md",I?"text-primary":"text-gray-500"),children:n.jsx(Hs,{className:"h-5 w-5"})}),n.jsx("span",{className:we("text-xs mt-0.5",I?"text-primary font-medium":"text-gray-500"),children:"Settings"})]}),h&&n.jsxs("div",{onClick:z=>O(z,"/admin"),className:"flex flex-col items-center px-3 py-1",children:[n.jsx("div",{className:we("p-1 rounded-md",P?"text-primary":"text-gray-500"),children:n.jsx(VE,{className:"h-5 w-5"})}),n.jsx("span",{className:we("text-xs mt-0.5",P?"text-primary font-medium":"text-gray-500"),children:"Admin"})]})]})});return n.jsxs(n.Fragment,{children:[n.jsx(B,{}),n.jsx(Y,{})]})}function it(t,e,{checkForDefaultPrevented:s=!0}={}){return function(i){if(t==null||t(i),s===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function QY(t,e){const s=y.createContext(e),r=a=>{const{children:o,...c}=a,d=y.useMemo(()=>c,Object.values(c));return n.jsx(s.Provider,{value:d,children:o})};r.displayName=t+"Provider";function i(a){const o=y.useContext(s);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,i]}function Or(t,e=[]){let s=[];function r(a,o){const c=y.createContext(o),d=s.length;s=[...s,o];const h=m=>{var _;const{scope:p,children:v,...j}=m,N=((_=p==null?void 0:p[t])==null?void 0:_[d])||c,E=y.useMemo(()=>j,Object.values(j));return n.jsx(N.Provider,{value:E,children:v})};h.displayName=a+"Provider";function g(m,p){var N;const v=((N=p==null?void 0:p[t])==null?void 0:N[d])||c,j=y.useContext(v);if(j)return j;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${a}\``)}return[h,g]}const i=()=>{const a=s.map(o=>y.createContext(o));return function(c){const d=(c==null?void 0:c[t])||a;return y.useMemo(()=>({[`__scope${t}`]:{...c,[t]:d}}),[c,d])}};return i.scopeName=t,[r,XY(i,...e)]}function XY(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((c,{useScope:d,scopeName:h})=>{const m=d(a)[`__scope${h}`];return{...c,...m}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return s.scopeName=e.scopeName,s}function vs(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...s)=>{var r;return(r=e.current)==null?void 0:r.call(e,...s)},[])}function ta({prop:t,defaultProp:e,onChange:s=()=>{}}){const[r,i]=JY({defaultProp:e,onChange:s}),a=t!==void 0,o=a?t:r,c=vs(s),d=y.useCallback(h=>{if(a){const m=typeof h=="function"?h(t):h;m!==t&&c(m)}else i(h)},[a,t,i,c]);return[o,d]}function JY({defaultProp:t,onChange:e}){const s=y.useState(t),[r]=s,i=y.useRef(r),a=vs(e);return y.useEffect(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),s}var eK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],St=eK.reduce((t,e)=>{const s=y.forwardRef((r,i)=>{const{asChild:a,...o}=r,c=a?Eo:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...o,ref:i})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function s2(t,e){t&&ra.flushSync(()=>t.dispatchEvent(e))}function tK(t,e=[]){let s=[];function r(a,o){const c=y.createContext(o),d=s.length;s=[...s,o];function h(m){const{scope:p,children:v,...j}=m,N=(p==null?void 0:p[t][d])||c,E=y.useMemo(()=>j,Object.values(j));return n.jsx(N.Provider,{value:E,children:v})}function g(m,p){const v=(p==null?void 0:p[t][d])||c,j=y.useContext(v);if(j)return j;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${a}\``)}return h.displayName=a+"Provider",[h,g]}const i=()=>{const a=s.map(o=>y.createContext(o));return function(c){const d=(c==null?void 0:c[t])||a;return y.useMemo(()=>({[`__scope${t}`]:{...c,[t]:d}}),[c,d])}};return i.scopeName=t,[r,nK(i,...e)]}function nK(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((c,{useScope:d,scopeName:h})=>{const m=d(a)[`__scope${h}`];return{...c,...m}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return s.scopeName=e.scopeName,s}function fg(t){const e=t+"CollectionProvider",[s,r]=tK(e),[i,a]=s(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:j,children:N}=v,E=Ne.useRef(null),_=Ne.useRef(new Map).current;return n.jsx(i,{scope:j,itemMap:_,collectionRef:E,children:N})};o.displayName=e;const c=t+"CollectionSlot",d=Ne.forwardRef((v,j)=>{const{scope:N,children:E}=v,_=a(c,N),S=Jt(j,_.collectionRef);return n.jsx(Eo,{ref:S,children:E})});d.displayName=c;const h=t+"CollectionItemSlot",g="data-radix-collection-item",m=Ne.forwardRef((v,j)=>{const{scope:N,children:E,..._}=v,S=Ne.useRef(null),C=Jt(j,S),I=a(h,N);return Ne.useEffect(()=>(I.itemMap.set(S,{ref:S,..._}),()=>void I.itemMap.delete(S))),n.jsx(Eo,{[g]:"",ref:C,children:E})});m.displayName=h;function p(v){const j=a(t+"CollectionConsumer",v);return Ne.useCallback(()=>{const E=j.collectionRef.current;if(!E)return[];const _=Array.from(E.querySelectorAll(`[${g}]`));return Array.from(j.itemMap.values()).sort((I,P)=>_.indexOf(I.ref.current)-_.indexOf(P.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:o,Slot:d,ItemSlot:m},p,r]}var sK=y.createContext(void 0);function od(t){const e=y.useContext(sK);return t||e||"ltr"}function ML(t,e=globalThis==null?void 0:globalThis.document){const s=vs(t);y.useEffect(()=>{const r=i=>{i.key==="Escape"&&s(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[s,e])}var rK="DismissableLayer",_b="dismissableLayer.update",iK="dismissableLayer.pointerDownOutside",aK="dismissableLayer.focusOutside",KE,DL=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bm=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:c,...d}=t,h=y.useContext(DL),[g,m]=y.useState(null),p=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=y.useState({}),j=Jt(e,T=>m(T)),N=Array.from(h.layers),[E]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),_=N.indexOf(E),S=g?N.indexOf(g):-1,C=h.layersWithOutsidePointerEventsDisabled.size>0,I=S>=_,P=lK(T=>{const M=T.target,k=[...h.branches].some(O=>O.contains(M));!I||k||(i==null||i(T),o==null||o(T),T.defaultPrevented||c==null||c())},p),L=cK(T=>{const M=T.target;[...h.branches].some(O=>O.contains(M))||(a==null||a(T),o==null||o(T),T.defaultPrevented||c==null||c())},p);return ML(T=>{S===h.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&c&&(T.preventDefault(),c()))},p),y.useEffect(()=>{if(g)return s&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(KE=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(g)),h.layers.add(g),ZE(),()=>{s&&h.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=KE)}},[g,p,s,h]),y.useEffect(()=>()=>{g&&(h.layers.delete(g),h.layersWithOutsidePointerEventsDisabled.delete(g),ZE())},[g,h]),y.useEffect(()=>{const T=()=>v({});return document.addEventListener(_b,T),()=>document.removeEventListener(_b,T)},[]),n.jsx(St.div,{...d,ref:j,style:{pointerEvents:C?I?"auto":"none":void 0,...t.style},onFocusCapture:it(t.onFocusCapture,L.onFocusCapture),onBlurCapture:it(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:it(t.onPointerDownCapture,P.onPointerDownCapture)})});bm.displayName=rK;var oK="DismissableLayerBranch",kL=y.forwardRef((t,e)=>{const s=y.useContext(DL),r=y.useRef(null),i=Jt(e,r);return y.useEffect(()=>{const a=r.current;if(a)return s.branches.add(a),()=>{s.branches.delete(a)}},[s.branches]),n.jsx(St.div,{...t,ref:i})});kL.displayName=oK;function lK(t,e=globalThis==null?void 0:globalThis.document){const s=vs(t),r=y.useRef(!1),i=y.useRef(()=>{});return y.useEffect(()=>{const a=c=>{if(c.target&&!r.current){let d=function(){PL(iK,s,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,s]),{onPointerDownCapture:()=>r.current=!0}}function cK(t,e=globalThis==null?void 0:globalThis.document){const s=vs(t),r=y.useRef(!1);return y.useEffect(()=>{const i=a=>{a.target&&!r.current&&PL(aK,s,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,s]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ZE(){const t=new CustomEvent(_b);document.dispatchEvent(t)}function PL(t,e,s,{discrete:r}){const i=s.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&i.addEventListener(t,e,{once:!0}),r?s2(i,a):i.dispatchEvent(a)}var dK=bm,uK=kL,Y1=0;function vy(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??QE()),document.body.insertAdjacentElement("beforeend",t[1]??QE()),Y1++,()=>{Y1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Y1--}},[])}function QE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var K1="focusScope.autoFocusOnMount",Z1="focusScope.autoFocusOnUnmount",XE={bubbles:!1,cancelable:!0},hK="FocusScope",pg=y.forwardRef((t,e)=>{const{loop:s=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=t,[c,d]=y.useState(null),h=vs(i),g=vs(a),m=y.useRef(null),p=Jt(e,N=>d(N)),v=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let N=function(C){if(v.paused||!c)return;const I=C.target;c.contains(I)?m.current=I:oc(m.current,{select:!0})},E=function(C){if(v.paused||!c)return;const I=C.relatedTarget;I!==null&&(c.contains(I)||oc(m.current,{select:!0}))},_=function(C){if(document.activeElement===document.body)for(const P of C)P.removedNodes.length>0&&oc(c)};document.addEventListener("focusin",N),document.addEventListener("focusout",E);const S=new MutationObserver(_);return c&&S.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",N),document.removeEventListener("focusout",E),S.disconnect()}}},[r,c,v.paused]),y.useEffect(()=>{if(c){e4.add(v);const N=document.activeElement;if(!c.contains(N)){const _=new CustomEvent(K1,XE);c.addEventListener(K1,h),c.dispatchEvent(_),_.defaultPrevented||(mK(vK(RL(c)),{select:!0}),document.activeElement===N&&oc(c))}return()=>{c.removeEventListener(K1,h),setTimeout(()=>{const _=new CustomEvent(Z1,XE);c.addEventListener(Z1,g),c.dispatchEvent(_),_.defaultPrevented||oc(N??document.body,{select:!0}),c.removeEventListener(Z1,g),e4.remove(v)},0)}}},[c,h,g,v]);const j=y.useCallback(N=>{if(!s&&!r||v.paused)return;const E=N.key==="Tab"&&!N.altKey&&!N.ctrlKey&&!N.metaKey,_=document.activeElement;if(E&&_){const S=N.currentTarget,[C,I]=fK(S);C&&I?!N.shiftKey&&_===I?(N.preventDefault(),s&&oc(C,{select:!0})):N.shiftKey&&_===C&&(N.preventDefault(),s&&oc(I,{select:!0})):_===S&&N.preventDefault()}},[s,r,v.paused]);return n.jsx(St.div,{tabIndex:-1,...o,ref:p,onKeyDown:j})});pg.displayName=hK;function mK(t,{select:e=!1}={}){const s=document.activeElement;for(const r of t)if(oc(r,{select:e}),document.activeElement!==s)return}function fK(t){const e=RL(t),s=JE(e,t),r=JE(e.reverse(),t);return[s,r]}function RL(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)e.push(s.currentNode);return e}function JE(t,e){for(const s of t)if(!pK(s,{upTo:e}))return s}function pK(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function gK(t){return t instanceof HTMLInputElement&&"select"in t}function oc(t,{select:e=!1}={}){if(t&&t.focus){const s=document.activeElement;t.focus({preventScroll:!0}),t!==s&&gK(t)&&e&&t.select()}}var e4=xK();function xK(){let t=[];return{add(e){const s=t[0];e!==s&&(s==null||s.pause()),t=t4(t,e),t.unshift(e)},remove(e){var s;t=t4(t,e),(s=t[0])==null||s.resume()}}}function t4(t,e){const s=[...t],r=s.indexOf(e);return r!==-1&&s.splice(r,1),s}function vK(t){return t.filter(e=>e.tagName!=="A")}var Bs=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},yK=Tk.useId||(()=>{}),wK=0;function Rr(t){const[e,s]=y.useState(yK());return Bs(()=>{s(r=>r??String(wK++))},[t]),e?`radix-${e}`:""}const jK=["top","right","bottom","left"],Hc=Math.min,xa=Math.max,Y0=Math.round,cx=Math.floor,el=t=>({x:t,y:t}),bK={left:"right",right:"left",bottom:"top",top:"bottom"},NK={start:"end",end:"start"};function Ib(t,e,s){return xa(t,Hc(e,s))}function $l(t,e){return typeof t=="function"?t(e):t}function Ul(t){return t.split("-")[0]}function Nm(t){return t.split("-")[1]}function r2(t){return t==="x"?"y":"x"}function i2(t){return t==="y"?"height":"width"}function qc(t){return["top","bottom"].includes(Ul(t))?"y":"x"}function a2(t){return r2(qc(t))}function CK(t,e,s){s===void 0&&(s=!1);const r=Nm(t),i=a2(t),a=i2(i);let o=i==="x"?r===(s?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=K0(o)),[o,K0(o)]}function SK(t){const e=K0(t);return[Tb(t),e,Tb(e)]}function Tb(t){return t.replace(/start|end/g,e=>NK[e])}function AK(t,e,s){const r=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return s?e?i:r:e?r:i;case"left":case"right":return e?a:o;default:return[]}}function EK(t,e,s,r){const i=Nm(t);let a=AK(Ul(t),s==="start",r);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(Tb)))),a}function K0(t){return t.replace(/left|right|bottom|top/g,e=>bK[e])}function _K(t){return{top:0,right:0,bottom:0,left:0,...t}}function LL(t){return typeof t!="number"?_K(t):{top:t,right:t,bottom:t,left:t}}function Z0(t){const{x:e,y:s,width:r,height:i}=t;return{width:r,height:i,top:s,left:e,right:e+r,bottom:s+i,x:e,y:s}}function n4(t,e,s){let{reference:r,floating:i}=t;const a=qc(e),o=a2(e),c=i2(o),d=Ul(e),h=a==="y",g=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,p=r[c]/2-i[c]/2;let v;switch(d){case"top":v={x:g,y:r.y-i.height};break;case"bottom":v={x:g,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:m};break;case"left":v={x:r.x-i.width,y:m};break;default:v={x:r.x,y:r.y}}switch(Nm(e)){case"start":v[o]-=p*(s&&h?-1:1);break;case"end":v[o]+=p*(s&&h?-1:1);break}return v}const IK=async(t,e,s)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=s,c=a.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(e));let h=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:g,y:m}=n4(h,r,d),p=r,v={},j=0;for(let N=0;N<c.length;N++){const{name:E,fn:_}=c[N],{x:S,y:C,data:I,reset:P}=await _({x:g,y:m,initialPlacement:r,placement:p,strategy:i,middlewareData:v,rects:h,platform:o,elements:{reference:t,floating:e}});g=S??g,m=C??m,v={...v,[E]:{...v[E],...I}},P&&j<=50&&(j++,typeof P=="object"&&(P.placement&&(p=P.placement),P.rects&&(h=P.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):P.rects),{x:g,y:m}=n4(h,p,d)),N=-1)}return{x:g,y:m,placement:p,strategy:i,middlewareData:v}};async function Tp(t,e){var s;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:o,elements:c,strategy:d}=t,{boundary:h="clippingAncestors",rootBoundary:g="viewport",elementContext:m="floating",altBoundary:p=!1,padding:v=0}=$l(e,t),j=LL(v),E=c[p?m==="floating"?"reference":"floating":m],_=Z0(await a.getClippingRect({element:(s=await(a.isElement==null?void 0:a.isElement(E)))==null||s?E:E.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:h,rootBoundary:g,strategy:d})),S=m==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),I=await(a.isElement==null?void 0:a.isElement(C))?await(a.getScale==null?void 0:a.getScale(C))||{x:1,y:1}:{x:1,y:1},P=Z0(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:S,offsetParent:C,strategy:d}):S);return{top:(_.top-P.top+j.top)/I.y,bottom:(P.bottom-_.bottom+j.bottom)/I.y,left:(_.left-P.left+j.left)/I.x,right:(P.right-_.right+j.right)/I.x}}const TK=t=>({name:"arrow",options:t,async fn(e){const{x:s,y:r,placement:i,rects:a,platform:o,elements:c,middlewareData:d}=e,{element:h,padding:g=0}=$l(t,e)||{};if(h==null)return{};const m=LL(g),p={x:s,y:r},v=a2(i),j=i2(v),N=await o.getDimensions(h),E=v==="y",_=E?"top":"left",S=E?"bottom":"right",C=E?"clientHeight":"clientWidth",I=a.reference[j]+a.reference[v]-p[v]-a.floating[j],P=p[v]-a.reference[v],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h));let T=L?L[C]:0;(!T||!await(o.isElement==null?void 0:o.isElement(L)))&&(T=c.floating[C]||a.floating[j]);const M=I/2-P/2,k=T/2-N[j]/2-1,O=Hc(m[_],k),V=Hc(m[S],k),B=O,Y=T-N[j]-V,z=T/2-N[j]/2+M,G=Ib(B,z,Y),he=!d.arrow&&Nm(i)!=null&&z!==G&&a.reference[j]/2-(z<B?O:V)-N[j]/2<0,le=he?z<B?z-B:z-Y:0;return{[v]:p[v]+le,data:{[v]:G,centerOffset:z-G-le,...he&&{alignmentOffset:le}},reset:he}}}),MK=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var s,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:c,platform:d,elements:h}=e,{mainAxis:g=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:N=!0,...E}=$l(t,e);if((s=a.arrow)!=null&&s.alignmentOffset)return{};const _=Ul(i),S=qc(c),C=Ul(c)===c,I=await(d.isRTL==null?void 0:d.isRTL(h.floating)),P=p||(C||!N?[K0(c)]:SK(c)),L=j!=="none";!p&&L&&P.push(...EK(c,N,j,I));const T=[c,...P],M=await Tp(e,E),k=[];let O=((r=a.flip)==null?void 0:r.overflows)||[];if(g&&k.push(M[_]),m){const z=CK(i,o,I);k.push(M[z[0]],M[z[1]])}if(O=[...O,{placement:i,overflows:k}],!k.every(z=>z<=0)){var V,B;const z=(((V=a.flip)==null?void 0:V.index)||0)+1,G=T[z];if(G)return{data:{index:z,overflows:O},reset:{placement:G}};let he=(B=O.filter(le=>le.overflows[0]<=0).sort((le,se)=>le.overflows[1]-se.overflows[1])[0])==null?void 0:B.placement;if(!he)switch(v){case"bestFit":{var Y;const le=(Y=O.filter(se=>{if(L){const re=qc(se.placement);return re===S||re==="y"}return!0}).map(se=>[se.placement,se.overflows.filter(re=>re>0).reduce((re,me)=>re+me,0)]).sort((se,re)=>se[1]-re[1])[0])==null?void 0:Y[0];le&&(he=le);break}case"initialPlacement":he=c;break}if(i!==he)return{reset:{placement:he}}}return{}}}};function s4(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function r4(t){return jK.some(e=>t[e]>=0)}const DK=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:s}=e,{strategy:r="referenceHidden",...i}=$l(t,e);switch(r){case"referenceHidden":{const a=await Tp(e,{...i,elementContext:"reference"}),o=s4(a,s.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:r4(o)}}}case"escaped":{const a=await Tp(e,{...i,altBoundary:!0}),o=s4(a,s.floating);return{data:{escapedOffsets:o,escaped:r4(o)}}}default:return{}}}}};async function kK(t,e){const{placement:s,platform:r,elements:i}=t,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ul(s),c=Nm(s),d=qc(s)==="y",h=["left","top"].includes(o)?-1:1,g=a&&d?-1:1,m=$l(e,t);let{mainAxis:p,crossAxis:v,alignmentAxis:j}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return c&&typeof j=="number"&&(v=c==="end"?j*-1:j),d?{x:v*g,y:p*h}:{x:p*h,y:v*g}}const PK=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var s,r;const{x:i,y:a,placement:o,middlewareData:c}=e,d=await kK(e,t);return o===((s=c.offset)==null?void 0:s.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:i+d.x,y:a+d.y,data:{...d,placement:o}}}}},RK=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:s,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:c={fn:E=>{let{x:_,y:S}=E;return{x:_,y:S}}},...d}=$l(t,e),h={x:s,y:r},g=await Tp(e,d),m=qc(Ul(i)),p=r2(m);let v=h[p],j=h[m];if(a){const E=p==="y"?"top":"left",_=p==="y"?"bottom":"right",S=v+g[E],C=v-g[_];v=Ib(S,v,C)}if(o){const E=m==="y"?"top":"left",_=m==="y"?"bottom":"right",S=j+g[E],C=j-g[_];j=Ib(S,j,C)}const N=c.fn({...e,[p]:v,[m]:j});return{...N,data:{x:N.x-s,y:N.y-r,enabled:{[p]:a,[m]:o}}}}}},LK=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:s,y:r,placement:i,rects:a,middlewareData:o}=e,{offset:c=0,mainAxis:d=!0,crossAxis:h=!0}=$l(t,e),g={x:s,y:r},m=qc(i),p=r2(m);let v=g[p],j=g[m];const N=$l(c,e),E=typeof N=="number"?{mainAxis:N,crossAxis:0}:{mainAxis:0,crossAxis:0,...N};if(d){const C=p==="y"?"height":"width",I=a.reference[p]-a.floating[C]+E.mainAxis,P=a.reference[p]+a.reference[C]-E.mainAxis;v<I?v=I:v>P&&(v=P)}if(h){var _,S;const C=p==="y"?"width":"height",I=["top","left"].includes(Ul(i)),P=a.reference[m]-a.floating[C]+(I&&((_=o.offset)==null?void 0:_[m])||0)+(I?0:E.crossAxis),L=a.reference[m]+a.reference[C]+(I?0:((S=o.offset)==null?void 0:S[m])||0)-(I?E.crossAxis:0);j<P?j=P:j>L&&(j=L)}return{[p]:v,[m]:j}}}},OK=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var s,r;const{placement:i,rects:a,platform:o,elements:c}=e,{apply:d=()=>{},...h}=$l(t,e),g=await Tp(e,h),m=Ul(i),p=Nm(i),v=qc(i)==="y",{width:j,height:N}=a.floating;let E,_;m==="top"||m==="bottom"?(E=m,_=p===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(_=m,E=p==="end"?"top":"bottom");const S=N-g.top-g.bottom,C=j-g.left-g.right,I=Hc(N-g[E],S),P=Hc(j-g[_],C),L=!e.middlewareData.shift;let T=I,M=P;if((s=e.middlewareData.shift)!=null&&s.enabled.x&&(M=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=S),L&&!p){const O=xa(g.left,0),V=xa(g.right,0),B=xa(g.top,0),Y=xa(g.bottom,0);v?M=j-2*(O!==0||V!==0?O+V:xa(g.left,g.right)):T=N-2*(B!==0||Y!==0?B+Y:xa(g.top,g.bottom))}await d({...e,availableWidth:M,availableHeight:T});const k=await o.getDimensions(c.floating);return j!==k.width||N!==k.height?{reset:{rects:!0}}:{}}}};function yy(){return typeof window<"u"}function Cm(t){return OL(t)?(t.nodeName||"").toLowerCase():"#document"}function Ca(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ol(t){var e;return(e=(OL(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function OL(t){return yy()?t instanceof Node||t instanceof Ca(t).Node:!1}function _o(t){return yy()?t instanceof Element||t instanceof Ca(t).Element:!1}function nl(t){return yy()?t instanceof HTMLElement||t instanceof Ca(t).HTMLElement:!1}function i4(t){return!yy()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ca(t).ShadowRoot}function gg(t){const{overflow:e,overflowX:s,overflowY:r,display:i}=Io(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+s)&&!["inline","contents"].includes(i)}function FK(t){return["table","td","th"].includes(Cm(t))}function wy(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function o2(t){const e=l2(),s=_o(t)?Io(t):t;return s.transform!=="none"||s.perspective!=="none"||(s.containerType?s.containerType!=="normal":!1)||!e&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!e&&(s.filter?s.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(s.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(s.contain||"").includes(r))}function BK(t){let e=Gc(t);for(;nl(e)&&!sm(e);){if(o2(e))return e;if(wy(e))return null;e=Gc(e)}return null}function l2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function sm(t){return["html","body","#document"].includes(Cm(t))}function Io(t){return Ca(t).getComputedStyle(t)}function jy(t){return _o(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Gc(t){if(Cm(t)==="html")return t;const e=t.assignedSlot||t.parentNode||i4(t)&&t.host||ol(t);return i4(e)?e.host:e}function FL(t){const e=Gc(t);return sm(e)?t.ownerDocument?t.ownerDocument.body:t.body:nl(e)&&gg(e)?e:FL(e)}function Mp(t,e,s){var r;e===void 0&&(e=[]),s===void 0&&(s=!0);const i=FL(t),a=i===((r=t.ownerDocument)==null?void 0:r.body),o=Ca(i);if(a){const c=Mb(o);return e.concat(o,o.visualViewport||[],gg(i)?i:[],c&&s?Mp(c):[])}return e.concat(i,Mp(i,[],s))}function Mb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function BL(t){const e=Io(t);let s=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=nl(t),a=i?t.offsetWidth:s,o=i?t.offsetHeight:r,c=Y0(s)!==a||Y0(r)!==o;return c&&(s=a,r=o),{width:s,height:r,$:c}}function c2(t){return _o(t)?t:t.contextElement}function vh(t){const e=c2(t);if(!nl(e))return el(1);const s=e.getBoundingClientRect(),{width:r,height:i,$:a}=BL(e);let o=(a?Y0(s.width):s.width)/r,c=(a?Y0(s.height):s.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const zK=el(0);function zL(t){const e=Ca(t);return!l2()||!e.visualViewport?zK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function VK(t,e,s){return e===void 0&&(e=!1),!s||e&&s!==Ca(t)?!1:e}function nu(t,e,s,r){e===void 0&&(e=!1),s===void 0&&(s=!1);const i=t.getBoundingClientRect(),a=c2(t);let o=el(1);e&&(r?_o(r)&&(o=vh(r)):o=vh(t));const c=VK(a,s,r)?zL(a):el(0);let d=(i.left+c.x)/o.x,h=(i.top+c.y)/o.y,g=i.width/o.x,m=i.height/o.y;if(a){const p=Ca(a),v=r&&_o(r)?Ca(r):r;let j=p,N=Mb(j);for(;N&&r&&v!==j;){const E=vh(N),_=N.getBoundingClientRect(),S=Io(N),C=_.left+(N.clientLeft+parseFloat(S.paddingLeft))*E.x,I=_.top+(N.clientTop+parseFloat(S.paddingTop))*E.y;d*=E.x,h*=E.y,g*=E.x,m*=E.y,d+=C,h+=I,j=Ca(N),N=Mb(j)}}return Z0({width:g,height:m,x:d,y:h})}function d2(t,e){const s=jy(t).scrollLeft;return e?e.left+s:nu(ol(t)).left+s}function VL(t,e,s){s===void 0&&(s=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(s?0:d2(t,r)),a=r.top+e.scrollTop;return{x:i,y:a}}function $K(t){let{elements:e,rect:s,offsetParent:r,strategy:i}=t;const a=i==="fixed",o=ol(r),c=e?wy(e.floating):!1;if(r===o||c&&a)return s;let d={scrollLeft:0,scrollTop:0},h=el(1);const g=el(0),m=nl(r);if((m||!m&&!a)&&((Cm(r)!=="body"||gg(o))&&(d=jy(r)),nl(r))){const v=nu(r);h=vh(r),g.x=v.x+r.clientLeft,g.y=v.y+r.clientTop}const p=o&&!m&&!a?VL(o,d,!0):el(0);return{width:s.width*h.x,height:s.height*h.y,x:s.x*h.x-d.scrollLeft*h.x+g.x+p.x,y:s.y*h.y-d.scrollTop*h.y+g.y+p.y}}function UK(t){return Array.from(t.getClientRects())}function WK(t){const e=ol(t),s=jy(t),r=t.ownerDocument.body,i=xa(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=xa(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-s.scrollLeft+d2(t);const c=-s.scrollTop;return Io(r).direction==="rtl"&&(o+=xa(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:c}}function HK(t,e){const s=Ca(t),r=ol(t),i=s.visualViewport;let a=r.clientWidth,o=r.clientHeight,c=0,d=0;if(i){a=i.width,o=i.height;const h=l2();(!h||h&&e==="fixed")&&(c=i.offsetLeft,d=i.offsetTop)}return{width:a,height:o,x:c,y:d}}function qK(t,e){const s=nu(t,!0,e==="fixed"),r=s.top+t.clientTop,i=s.left+t.clientLeft,a=nl(t)?vh(t):el(1),o=t.clientWidth*a.x,c=t.clientHeight*a.y,d=i*a.x,h=r*a.y;return{width:o,height:c,x:d,y:h}}function a4(t,e,s){let r;if(e==="viewport")r=HK(t,s);else if(e==="document")r=WK(ol(t));else if(_o(e))r=qK(e,s);else{const i=zL(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Z0(r)}function $L(t,e){const s=Gc(t);return s===e||!_o(s)||sm(s)?!1:Io(s).position==="fixed"||$L(s,e)}function GK(t,e){const s=e.get(t);if(s)return s;let r=Mp(t,[],!1).filter(c=>_o(c)&&Cm(c)!=="body"),i=null;const a=Io(t).position==="fixed";let o=a?Gc(t):t;for(;_o(o)&&!sm(o);){const c=Io(o),d=o2(o);!d&&c.position==="fixed"&&(i=null),(a?!d&&!i:!d&&c.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||gg(o)&&!d&&$L(t,o))?r=r.filter(g=>g!==o):i=c,o=Gc(o)}return e.set(t,r),r}function YK(t){let{element:e,boundary:s,rootBoundary:r,strategy:i}=t;const o=[...s==="clippingAncestors"?wy(e)?[]:GK(e,this._c):[].concat(s),r],c=o[0],d=o.reduce((h,g)=>{const m=a4(e,g,i);return h.top=xa(m.top,h.top),h.right=Hc(m.right,h.right),h.bottom=Hc(m.bottom,h.bottom),h.left=xa(m.left,h.left),h},a4(e,c,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function KK(t){const{width:e,height:s}=BL(t);return{width:e,height:s}}function ZK(t,e,s){const r=nl(e),i=ol(e),a=s==="fixed",o=nu(t,!0,a,e);let c={scrollLeft:0,scrollTop:0};const d=el(0);if(r||!r&&!a)if((Cm(e)!=="body"||gg(i))&&(c=jy(e)),r){const p=nu(e,!0,a,e);d.x=p.x+e.clientLeft,d.y=p.y+e.clientTop}else i&&(d.x=d2(i));const h=i&&!r&&!a?VL(i,c):el(0),g=o.left+c.scrollLeft-d.x-h.x,m=o.top+c.scrollTop-d.y-h.y;return{x:g,y:m,width:o.width,height:o.height}}function Q1(t){return Io(t).position==="static"}function o4(t,e){if(!nl(t)||Io(t).position==="fixed")return null;if(e)return e(t);let s=t.offsetParent;return ol(t)===s&&(s=s.ownerDocument.body),s}function UL(t,e){const s=Ca(t);if(wy(t))return s;if(!nl(t)){let i=Gc(t);for(;i&&!sm(i);){if(_o(i)&&!Q1(i))return i;i=Gc(i)}return s}let r=o4(t,e);for(;r&&FK(r)&&Q1(r);)r=o4(r,e);return r&&sm(r)&&Q1(r)&&!o2(r)?s:r||BK(t)||s}const QK=async function(t){const e=this.getOffsetParent||UL,s=this.getDimensions,r=await s(t.floating);return{reference:ZK(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function XK(t){return Io(t).direction==="rtl"}const JK={convertOffsetParentRelativeRectToViewportRelativeRect:$K,getDocumentElement:ol,getClippingRect:YK,getOffsetParent:UL,getElementRects:QK,getClientRects:UK,getDimensions:KK,getScale:vh,isElement:_o,isRTL:XK};function eZ(t,e){let s=null,r;const i=ol(t);function a(){var c;clearTimeout(r),(c=s)==null||c.disconnect(),s=null}function o(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),a();const{left:h,top:g,width:m,height:p}=t.getBoundingClientRect();if(c||e(),!m||!p)return;const v=cx(g),j=cx(i.clientWidth-(h+m)),N=cx(i.clientHeight-(g+p)),E=cx(h),S={rootMargin:-v+"px "+-j+"px "+-N+"px "+-E+"px",threshold:xa(0,Hc(1,d))||1};let C=!0;function I(P){const L=P[0].intersectionRatio;if(L!==d){if(!C)return o();L?o(!1,L):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C=!1}try{s=new IntersectionObserver(I,{...S,root:i.ownerDocument})}catch{s=new IntersectionObserver(I,S)}s.observe(t)}return o(!0),a}function WL(t,e,s,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=c2(t),g=i||a?[...h?Mp(h):[],...Mp(e)]:[];g.forEach(_=>{i&&_.addEventListener("scroll",s,{passive:!0}),a&&_.addEventListener("resize",s)});const m=h&&c?eZ(h,s):null;let p=-1,v=null;o&&(v=new ResizeObserver(_=>{let[S]=_;S&&S.target===h&&v&&(v.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var C;(C=v)==null||C.observe(e)})),s()}),h&&!d&&v.observe(h),v.observe(e));let j,N=d?nu(t):null;d&&E();function E(){const _=nu(t);N&&(_.x!==N.x||_.y!==N.y||_.width!==N.width||_.height!==N.height)&&s(),N=_,j=requestAnimationFrame(E)}return s(),()=>{var _;g.forEach(S=>{i&&S.removeEventListener("scroll",s),a&&S.removeEventListener("resize",s)}),m==null||m(),(_=v)==null||_.disconnect(),v=null,d&&cancelAnimationFrame(j)}}const tZ=PK,nZ=RK,sZ=MK,rZ=OK,iZ=DK,l4=TK,aZ=LK,oZ=(t,e,s)=>{const r=new Map,i={platform:JK,...s},a={...i.platform,_c:r};return IK(t,e,{...i,platform:a})};var Zx=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Q0(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let s,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(s=t.length,s!==e.length)return!1;for(r=s;r--!==0;)if(!Q0(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),s=i.length,s!==Object.keys(e).length)return!1;for(r=s;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=s;r--!==0;){const a=i[r];if(!(a==="_owner"&&t.$$typeof)&&!Q0(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function HL(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function c4(t,e){const s=HL(t);return Math.round(e*s)/s}function X1(t){const e=y.useRef(t);return Zx(()=>{e.current=t}),e}function qL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:s="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:c=!0,whileElementsMounted:d,open:h}=t,[g,m]=y.useState({x:0,y:0,strategy:s,placement:e,middlewareData:{},isPositioned:!1}),[p,v]=y.useState(r);Q0(p,r)||v(r);const[j,N]=y.useState(null),[E,_]=y.useState(null),S=y.useCallback(se=>{se!==L.current&&(L.current=se,N(se))},[]),C=y.useCallback(se=>{se!==T.current&&(T.current=se,_(se))},[]),I=a||j,P=o||E,L=y.useRef(null),T=y.useRef(null),M=y.useRef(g),k=d!=null,O=X1(d),V=X1(i),B=X1(h),Y=y.useCallback(()=>{if(!L.current||!T.current)return;const se={placement:e,strategy:s,middleware:p};V.current&&(se.platform=V.current),oZ(L.current,T.current,se).then(re=>{const me={...re,isPositioned:B.current!==!1};z.current&&!Q0(M.current,me)&&(M.current=me,ra.flushSync(()=>{m(me)}))})},[p,e,s,V,B]);Zx(()=>{h===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,m(se=>({...se,isPositioned:!1})))},[h]);const z=y.useRef(!1);Zx(()=>(z.current=!0,()=>{z.current=!1}),[]),Zx(()=>{if(I&&(L.current=I),P&&(T.current=P),I&&P){if(O.current)return O.current(I,P,Y);Y()}},[I,P,Y,O,k]);const G=y.useMemo(()=>({reference:L,floating:T,setReference:S,setFloating:C}),[S,C]),he=y.useMemo(()=>({reference:I,floating:P}),[I,P]),le=y.useMemo(()=>{const se={position:s,left:0,top:0};if(!he.floating)return se;const re=c4(he.floating,g.x),me=c4(he.floating,g.y);return c?{...se,transform:"translate("+re+"px, "+me+"px)",...HL(he.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:re,top:me}},[s,c,he.floating,g.x,g.y]);return y.useMemo(()=>({...g,update:Y,refs:G,elements:he,floatingStyles:le}),[g,Y,G,he,le])}const lZ=t=>{function e(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:t,fn(s){const{element:r,padding:i}=typeof t=="function"?t(s):t;return r&&e(r)?r.current!=null?l4({element:r.current,padding:i}).fn(s):{}:r?l4({element:r,padding:i}).fn(s):{}}}},GL=(t,e)=>({...tZ(t),options:[t,e]}),YL=(t,e)=>({...nZ(t),options:[t,e]}),KL=(t,e)=>({...aZ(t),options:[t,e]}),ZL=(t,e)=>({...sZ(t),options:[t,e]}),QL=(t,e)=>({...rZ(t),options:[t,e]}),XL=(t,e)=>({...iZ(t),options:[t,e]}),JL=(t,e)=>({...lZ(t),options:[t,e]});var cZ="Arrow",eO=y.forwardRef((t,e)=>{const{children:s,width:r=10,height:i=5,...a}=t;return n.jsx(St.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});eO.displayName=cZ;var dZ=eO;function uZ(t,e=[]){let s=[];function r(a,o){const c=y.createContext(o),d=s.length;s=[...s,o];function h(m){const{scope:p,children:v,...j}=m,N=(p==null?void 0:p[t][d])||c,E=y.useMemo(()=>j,Object.values(j));return n.jsx(N.Provider,{value:E,children:v})}function g(m,p){const v=(p==null?void 0:p[t][d])||c,j=y.useContext(v);if(j)return j;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${a}\``)}return h.displayName=a+"Provider",[h,g]}const i=()=>{const a=s.map(o=>y.createContext(o));return function(c){const d=(c==null?void 0:c[t])||a;return y.useMemo(()=>({[`__scope${t}`]:{...c,[t]:d}}),[c,d])}};return i.scopeName=t,[r,hZ(i,...e)]}function hZ(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((c,{useScope:d,scopeName:h})=>{const m=d(a)[`__scope${h}`];return{...c,...m}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return s.scopeName=e.scopeName,s}function Sm(t){const[e,s]=y.useState(void 0);return Bs(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,c;if("borderBoxSize"in a){const d=a.borderBoxSize,h=Array.isArray(d)?d[0]:d;o=h.inlineSize,c=h.blockSize}else o=t.offsetWidth,c=t.offsetHeight;s({width:o,height:c})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else s(void 0)},[t]),e}var u2="Popper",[tO,Am]=uZ(u2),[mZ,nO]=tO(u2),sO=t=>{const{__scopePopper:e,children:s}=t,[r,i]=y.useState(null);return n.jsx(mZ,{scope:e,anchor:r,onAnchorChange:i,children:s})};sO.displayName=u2;var rO="PopperAnchor",iO=y.forwardRef((t,e)=>{const{__scopePopper:s,virtualRef:r,...i}=t,a=nO(rO,s),o=y.useRef(null),c=Jt(e,o);return y.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:n.jsx(St.div,{...i,ref:c})});iO.displayName=rO;var h2="PopperContent",[fZ,pZ]=tO(h2),aO=y.forwardRef((t,e)=>{var de,pe,Me,Le,We,jt;const{__scopePopper:s,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:g=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:v="optimized",onPlaced:j,...N}=t,E=nO(h2,s),[_,S]=y.useState(null),C=Jt(e,mt=>S(mt)),[I,P]=y.useState(null),L=Sm(I),T=(L==null?void 0:L.width)??0,M=(L==null?void 0:L.height)??0,k=r+(a!=="center"?"-"+a:""),O=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},V=Array.isArray(h)?h:[h],B=V.length>0,Y={padding:O,boundary:V.filter(xZ),altBoundary:B},{refs:z,floatingStyles:G,placement:he,isPositioned:le,middlewareData:se}=qL({strategy:"fixed",placement:k,whileElementsMounted:(...mt)=>WL(...mt,{animationFrame:v==="always"}),elements:{reference:E.anchor},middleware:[GL({mainAxis:i+M,alignmentAxis:o}),d&&YL({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?KL():void 0,...Y}),d&&ZL({...Y}),QL({...Y,apply:({elements:mt,rects:ke,availableWidth:yt,availableHeight:On})=>{const{width:zt,height:ce}=ke.reference,be=mt.floating.style;be.setProperty("--radix-popper-available-width",`${yt}px`),be.setProperty("--radix-popper-available-height",`${On}px`),be.setProperty("--radix-popper-anchor-width",`${zt}px`),be.setProperty("--radix-popper-anchor-height",`${ce}px`)}}),I&&JL({element:I,padding:c}),vZ({arrowWidth:T,arrowHeight:M}),p&&XL({strategy:"referenceHidden",...Y})]}),[re,me]=cO(he),Ce=vs(j);Bs(()=>{le&&(Ce==null||Ce())},[le,Ce]);const $=(de=se.arrow)==null?void 0:de.x,xe=(pe=se.arrow)==null?void 0:pe.y,te=((Me=se.arrow)==null?void 0:Me.centerOffset)!==0,[ae,ee]=y.useState();return Bs(()=>{_&&ee(window.getComputedStyle(_).zIndex)},[_]),n.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:le?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ae,"--radix-popper-transform-origin":[(Le=se.transformOrigin)==null?void 0:Le.x,(We=se.transformOrigin)==null?void 0:We.y].join(" "),...((jt=se.hide)==null?void 0:jt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:n.jsx(fZ,{scope:s,placedSide:re,onArrowChange:P,arrowX:$,arrowY:xe,shouldHideArrow:te,children:n.jsx(St.div,{"data-side":re,"data-align":me,...N,ref:C,style:{...N.style,animation:le?void 0:"none"}})})})});aO.displayName=h2;var oO="PopperArrow",gZ={top:"bottom",right:"left",bottom:"top",left:"right"},lO=y.forwardRef(function(e,s){const{__scopePopper:r,...i}=e,a=pZ(oO,r),o=gZ[a.placedSide];return n.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:n.jsx(dZ,{...i,ref:s,style:{...i.style,display:"block"}})})});lO.displayName=oO;function xZ(t){return t!==null}var vZ=t=>({name:"transformOrigin",options:t,fn(e){var E,_,S;const{placement:s,rects:r,middlewareData:i}=e,o=((E=i.arrow)==null?void 0:E.centerOffset)!==0,c=o?0:t.arrowWidth,d=o?0:t.arrowHeight,[h,g]=cO(s),m={start:"0%",center:"50%",end:"100%"}[g],p=(((_=i.arrow)==null?void 0:_.x)??0)+c/2,v=(((S=i.arrow)==null?void 0:S.y)??0)+d/2;let j="",N="";return h==="bottom"?(j=o?m:`${p}px`,N=`${-d}px`):h==="top"?(j=o?m:`${p}px`,N=`${r.floating.height+d}px`):h==="right"?(j=`${-d}px`,N=o?m:`${v}px`):h==="left"&&(j=`${r.floating.width+d}px`,N=o?m:`${v}px`),{data:{x:j,y:N}}}});function cO(t){const[e,s="center"]=t.split("-");return[e,s]}var m2=sO,by=iO,f2=aO,p2=lO,yZ="Portal",Em=y.forwardRef((t,e)=>{var c;const{container:s,...r}=t,[i,a]=y.useState(!1);Bs(()=>a(!0),[]);const o=s||i&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return o?pq.createPortal(n.jsx(St.div,{...r,ref:e}),o):null});Em.displayName=yZ;function wZ(t,e){return y.useReducer((s,r)=>e[s][r]??s,t)}var ci=t=>{const{present:e,children:s}=t,r=jZ(e),i=typeof s=="function"?s({present:r.isPresent}):y.Children.only(s),a=Jt(r.ref,bZ(i));return typeof s=="function"||r.isPresent?y.cloneElement(i,{ref:a}):null};ci.displayName="Presence";function jZ(t){const[e,s]=y.useState(),r=y.useRef({}),i=y.useRef(t),a=y.useRef("none"),o=t?"mounted":"unmounted",[c,d]=wZ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const h=dx(r.current);a.current=c==="mounted"?h:"none"},[c]),Bs(()=>{const h=r.current,g=i.current;if(g!==t){const p=a.current,v=dx(h);t?d("MOUNT"):v==="none"||(h==null?void 0:h.display)==="none"?d("UNMOUNT"):d(g&&p!==v?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,d]),Bs(()=>{if(e){let h;const g=e.ownerDocument.defaultView??window,m=v=>{const N=dx(r.current).includes(v.animationName);if(v.target===e&&N&&(d("ANIMATION_END"),!i.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",h=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},p=v=>{v.target===e&&(a.current=dx(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{g.clearTimeout(h),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:y.useCallback(h=>{h&&(r.current=getComputedStyle(h)),s(h)},[])}}function dx(t){return(t==null?void 0:t.animationName)||"none"}function bZ(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function NZ(t,e=[]){let s=[];function r(a,o){const c=y.createContext(o),d=s.length;s=[...s,o];function h(m){const{scope:p,children:v,...j}=m,N=(p==null?void 0:p[t][d])||c,E=y.useMemo(()=>j,Object.values(j));return n.jsx(N.Provider,{value:E,children:v})}function g(m,p){const v=(p==null?void 0:p[t][d])||c,j=y.useContext(v);if(j)return j;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${a}\``)}return h.displayName=a+"Provider",[h,g]}const i=()=>{const a=s.map(o=>y.createContext(o));return function(c){const d=(c==null?void 0:c[t])||a;return y.useMemo(()=>({[`__scope${t}`]:{...c,[t]:d}}),[c,d])}};return i.scopeName=t,[r,CZ(i,...e)]}function CZ(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((c,{useScope:d,scopeName:h})=>{const m=d(a)[`__scope${h}`];return{...c,...m}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return s.scopeName=e.scopeName,s}var J1="rovingFocusGroup.onEntryFocus",SZ={bubbles:!1,cancelable:!0},Ny="RovingFocusGroup",[Db,dO,AZ]=fg(Ny),[EZ,Cy]=NZ(Ny,[AZ]),[_Z,IZ]=EZ(Ny),uO=y.forwardRef((t,e)=>n.jsx(Db.Provider,{scope:t.__scopeRovingFocusGroup,children:n.jsx(Db.Slot,{scope:t.__scopeRovingFocusGroup,children:n.jsx(TZ,{...t,ref:e})})}));uO.displayName=Ny;var TZ=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:g=!1,...m}=t,p=y.useRef(null),v=Jt(e,p),j=od(a),[N=null,E]=ta({prop:o,defaultProp:c,onChange:d}),[_,S]=y.useState(!1),C=vs(h),I=dO(s),P=y.useRef(!1),[L,T]=y.useState(0);return y.useEffect(()=>{const M=p.current;if(M)return M.addEventListener(J1,C),()=>M.removeEventListener(J1,C)},[C]),n.jsx(_Z,{scope:s,orientation:r,dir:j,loop:i,currentTabStopId:N,onItemFocus:y.useCallback(M=>E(M),[E]),onItemShiftTab:y.useCallback(()=>S(!0),[]),onFocusableItemAdd:y.useCallback(()=>T(M=>M+1),[]),onFocusableItemRemove:y.useCallback(()=>T(M=>M-1),[]),children:n.jsx(St.div,{tabIndex:_||L===0?-1:0,"data-orientation":r,...m,ref:v,style:{outline:"none",...t.style},onMouseDown:it(t.onMouseDown,()=>{P.current=!0}),onFocus:it(t.onFocus,M=>{const k=!P.current;if(M.target===M.currentTarget&&k&&!_){const O=new CustomEvent(J1,SZ);if(M.currentTarget.dispatchEvent(O),!O.defaultPrevented){const V=I().filter(he=>he.focusable),B=V.find(he=>he.active),Y=V.find(he=>he.id===N),G=[B,Y,...V].filter(Boolean).map(he=>he.ref.current);fO(G,g)}}P.current=!1}),onBlur:it(t.onBlur,()=>S(!1))})})}),hO="RovingFocusGroupItem",mO=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,focusable:r=!0,active:i=!1,tabStopId:a,...o}=t,c=Rr(),d=a||c,h=IZ(hO,s),g=h.currentTabStopId===d,m=dO(s),{onFocusableItemAdd:p,onFocusableItemRemove:v}=h;return y.useEffect(()=>{if(r)return p(),()=>v()},[r,p,v]),n.jsx(Db.ItemSlot,{scope:s,id:d,focusable:r,active:i,children:n.jsx(St.span,{tabIndex:g?0:-1,"data-orientation":h.orientation,...o,ref:e,onMouseDown:it(t.onMouseDown,j=>{r?h.onItemFocus(d):j.preventDefault()}),onFocus:it(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:it(t.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){h.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const N=kZ(j,h.orientation,h.dir);if(N!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let _=m().filter(S=>S.focusable).map(S=>S.ref.current);if(N==="last")_.reverse();else if(N==="prev"||N==="next"){N==="prev"&&_.reverse();const S=_.indexOf(j.currentTarget);_=h.loop?PZ(_,S+1):_.slice(S+1)}setTimeout(()=>fO(_))}})})})});mO.displayName=hO;var MZ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function DZ(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function kZ(t,e,s){const r=DZ(t.key,s);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return MZ[r]}function fO(t,e=!1){const s=document.activeElement;for(const r of t)if(r===s||(r.focus({preventScroll:e}),document.activeElement!==s))return}function PZ(t,e){return t.map((s,r)=>t[(e+r)%t.length])}var pO=uO,gO=mO,RZ=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Tu=new WeakMap,ux=new WeakMap,hx={},ew=0,xO=function(t){return t&&(t.host||xO(t.parentNode))},LZ=function(t,e){return e.map(function(s){if(t.contains(s))return s;var r=xO(s);return r&&t.contains(r)?r:(console.error("aria-hidden",s,"in not contained inside",t,". Doing nothing"),null)}).filter(function(s){return!!s})},OZ=function(t,e,s,r){var i=LZ(e,Array.isArray(t)?t:[t]);hx[s]||(hx[s]=new WeakMap);var a=hx[s],o=[],c=new Set,d=new Set(i),h=function(m){!m||c.has(m)||(c.add(m),h(m.parentNode))};i.forEach(h);var g=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(p){if(c.has(p))g(p);else try{var v=p.getAttribute(r),j=v!==null&&v!=="false",N=(Tu.get(p)||0)+1,E=(a.get(p)||0)+1;Tu.set(p,N),a.set(p,E),o.push(p),N===1&&j&&ux.set(p,!0),E===1&&p.setAttribute(s,"true"),j||p.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",p,_)}})};return g(e),c.clear(),ew++,function(){o.forEach(function(m){var p=Tu.get(m)-1,v=a.get(m)-1;Tu.set(m,p),a.set(m,v),p||(ux.has(m)||m.removeAttribute(r),ux.delete(m)),v||m.removeAttribute(s)}),ew--,ew||(Tu=new WeakMap,Tu=new WeakMap,ux=new WeakMap,hx={})}},Sy=function(t,e,s){s===void 0&&(s="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=RZ(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),OZ(r,i,s,"aria-hidden")):function(){return null}},qo=function(){return qo=Object.assign||function(e){for(var s,r=1,i=arguments.length;r<i;r++){s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},qo.apply(this,arguments)};function vO(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s}function FZ(t,e,s){if(s||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var Qx="right-scroll-bar-position",Xx="width-before-scroll-bar",BZ="with-scroll-bars-hidden",zZ="--removed-body-scroll-bar-size";function tw(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function VZ(t,e){var s=y.useState(function(){return{value:t,callback:e,facade:{get current(){return s.value},set current(r){var i=s.value;i!==r&&(s.value=r,s.callback(r,i))}}}})[0];return s.callback=e,s.facade}var $Z=typeof window<"u"?y.useLayoutEffect:y.useEffect,d4=new WeakMap;function UZ(t,e){var s=VZ(null,function(r){return t.forEach(function(i){return tw(i,r)})});return $Z(function(){var r=d4.get(s);if(r){var i=new Set(r),a=new Set(t),o=s.current;i.forEach(function(c){a.has(c)||tw(c,null)}),a.forEach(function(c){i.has(c)||tw(c,o)})}d4.set(s,t)},[t]),s}function WZ(t){return t}function HZ(t,e){e===void 0&&(e=WZ);var s=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:t},useMedium:function(a){var o=e(a,r);return s.push(o),function(){s=s.filter(function(c){return c!==o})}},assignSyncMedium:function(a){for(r=!0;s.length;){var o=s;s=[],o.forEach(a)}s={push:function(c){return a(c)},filter:function(){return s}}},assignMedium:function(a){r=!0;var o=[];if(s.length){var c=s;s=[],c.forEach(a),o=s}var d=function(){var g=o;o=[],g.forEach(a)},h=function(){return Promise.resolve().then(d)};h(),s={push:function(g){o.push(g),h()},filter:function(g){return o=o.filter(g),s}}}};return i}function qZ(t){t===void 0&&(t={});var e=HZ(null);return e.options=qo({async:!0,ssr:!1},t),e}var yO=function(t){var e=t.sideCar,s=vO(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,qo({},s))};yO.isSideCarExport=!0;function GZ(t,e){return t.useMedium(e),yO}var wO=qZ(),nw=function(){},Ay=y.forwardRef(function(t,e){var s=y.useRef(null),r=y.useState({onScrollCapture:nw,onWheelCapture:nw,onTouchMoveCapture:nw}),i=r[0],a=r[1],o=t.forwardProps,c=t.children,d=t.className,h=t.removeScrollBar,g=t.enabled,m=t.shards,p=t.sideCar,v=t.noIsolation,j=t.inert,N=t.allowPinchZoom,E=t.as,_=E===void 0?"div":E,S=t.gapMode,C=vO(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=p,P=UZ([s,e]),L=qo(qo({},C),i);return y.createElement(y.Fragment,null,g&&y.createElement(I,{sideCar:wO,removeScrollBar:h,shards:m,noIsolation:v,inert:j,setCallbacks:a,allowPinchZoom:!!N,lockRef:s,gapMode:S}),o?y.cloneElement(y.Children.only(c),qo(qo({},L),{ref:P})):y.createElement(_,qo({},L,{className:d,ref:P}),c))});Ay.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ay.classNames={fullWidth:Xx,zeroRight:Qx};var YZ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function KZ(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=YZ();return e&&t.setAttribute("nonce",e),t}function ZZ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function QZ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var XZ=function(){var t=0,e=null;return{add:function(s){t==0&&(e=KZ())&&(ZZ(e,s),QZ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},JZ=function(){var t=XZ();return function(e,s){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&s])}},jO=function(){var t=JZ(),e=function(s){var r=s.styles,i=s.dynamic;return t(r,i),null};return e},eQ={left:0,top:0,right:0,gap:0},sw=function(t){return parseInt(t||"",10)||0},tQ=function(t){var e=window.getComputedStyle(document.body),s=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[sw(s),sw(r),sw(i)]},nQ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return eQ;var e=tQ(t),s=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-s+e[2]-e[0])}},sQ=jO(),yh="data-scroll-locked",rQ=function(t,e,s,r){var i=t.left,a=t.top,o=t.right,c=t.gap;return s===void 0&&(s="margin"),`
  .`.concat(BZ,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(yh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),s==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),s==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qx,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Xx,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Qx," .").concat(Qx,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Xx," .").concat(Xx,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(yh,`] {
    `).concat(zZ,": ").concat(c,`px;
  }
`)},u4=function(){var t=parseInt(document.body.getAttribute(yh)||"0",10);return isFinite(t)?t:0},iQ=function(){y.useEffect(function(){return document.body.setAttribute(yh,(u4()+1).toString()),function(){var t=u4()-1;t<=0?document.body.removeAttribute(yh):document.body.setAttribute(yh,t.toString())}},[])},aQ=function(t){var e=t.noRelative,s=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;iQ();var a=y.useMemo(function(){return nQ(i)},[i]);return y.createElement(sQ,{styles:rQ(a,!e,i,s?"":"!important")})},kb=!1;if(typeof window<"u")try{var mx=Object.defineProperty({},"passive",{get:function(){return kb=!0,!0}});window.addEventListener("test",mx,mx),window.removeEventListener("test",mx,mx)}catch{kb=!1}var Mu=kb?{passive:!1}:!1,oQ=function(t){return t.tagName==="TEXTAREA"},bO=function(t,e){if(!(t instanceof Element))return!1;var s=window.getComputedStyle(t);return s[e]!=="hidden"&&!(s.overflowY===s.overflowX&&!oQ(t)&&s[e]==="visible")},lQ=function(t){return bO(t,"overflowY")},cQ=function(t){return bO(t,"overflowX")},h4=function(t,e){var s=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=NO(t,r);if(i){var a=CO(t,r),o=a[1],c=a[2];if(o>c)return!0}r=r.parentNode}while(r&&r!==s.body);return!1},dQ=function(t){var e=t.scrollTop,s=t.scrollHeight,r=t.clientHeight;return[e,s,r]},uQ=function(t){var e=t.scrollLeft,s=t.scrollWidth,r=t.clientWidth;return[e,s,r]},NO=function(t,e){return t==="v"?lQ(e):cQ(e)},CO=function(t,e){return t==="v"?dQ(e):uQ(e)},hQ=function(t,e){return t==="h"&&e==="rtl"?-1:1},mQ=function(t,e,s,r,i){var a=hQ(t,window.getComputedStyle(e).direction),o=a*r,c=s.target,d=e.contains(c),h=!1,g=o>0,m=0,p=0;do{var v=CO(t,c),j=v[0],N=v[1],E=v[2],_=N-E-a*j;(j||_)&&NO(t,c)&&(m+=_,p+=j),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!d&&c!==document.body||d&&(e.contains(c)||e===c));return(g&&(Math.abs(m)<1||!i)||!g&&(Math.abs(p)<1||!i))&&(h=!0),h},fx=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},m4=function(t){return[t.deltaX,t.deltaY]},f4=function(t){return t&&"current"in t?t.current:t},fQ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},pQ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},gQ=0,Du=[];function xQ(t){var e=y.useRef([]),s=y.useRef([0,0]),r=y.useRef(),i=y.useState(gQ++)[0],a=y.useState(jO)[0],o=y.useRef(t);y.useEffect(function(){o.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var N=FZ([t.lockRef.current],(t.shards||[]).map(f4),!0).filter(Boolean);return N.forEach(function(E){return E.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),N.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var c=y.useCallback(function(N,E){if("touches"in N&&N.touches.length===2||N.type==="wheel"&&N.ctrlKey)return!o.current.allowPinchZoom;var _=fx(N),S=s.current,C="deltaX"in N?N.deltaX:S[0]-_[0],I="deltaY"in N?N.deltaY:S[1]-_[1],P,L=N.target,T=Math.abs(C)>Math.abs(I)?"h":"v";if("touches"in N&&T==="h"&&L.type==="range")return!1;var M=h4(T,L);if(!M)return!0;if(M?P=T:(P=T==="v"?"h":"v",M=h4(T,L)),!M)return!1;if(!r.current&&"changedTouches"in N&&(C||I)&&(r.current=P),!P)return!0;var k=r.current||P;return mQ(k,E,N,k==="h"?C:I,!0)},[]),d=y.useCallback(function(N){var E=N;if(!(!Du.length||Du[Du.length-1]!==a)){var _="deltaY"in E?m4(E):fx(E),S=e.current.filter(function(P){return P.name===E.type&&(P.target===E.target||E.target===P.shadowParent)&&fQ(P.delta,_)})[0];if(S&&S.should){E.cancelable&&E.preventDefault();return}if(!S){var C=(o.current.shards||[]).map(f4).filter(Boolean).filter(function(P){return P.contains(E.target)}),I=C.length>0?c(E,C[0]):!o.current.noIsolation;I&&E.cancelable&&E.preventDefault()}}},[]),h=y.useCallback(function(N,E,_,S){var C={name:N,delta:E,target:_,should:S,shadowParent:vQ(_)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(I){return I!==C})},1)},[]),g=y.useCallback(function(N){s.current=fx(N),r.current=void 0},[]),m=y.useCallback(function(N){h(N.type,m4(N),N.target,c(N,t.lockRef.current))},[]),p=y.useCallback(function(N){h(N.type,fx(N),N.target,c(N,t.lockRef.current))},[]);y.useEffect(function(){return Du.push(a),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",d,Mu),document.addEventListener("touchmove",d,Mu),document.addEventListener("touchstart",g,Mu),function(){Du=Du.filter(function(N){return N!==a}),document.removeEventListener("wheel",d,Mu),document.removeEventListener("touchmove",d,Mu),document.removeEventListener("touchstart",g,Mu)}},[]);var v=t.removeScrollBar,j=t.inert;return y.createElement(y.Fragment,null,j?y.createElement(a,{styles:pQ(i)}):null,v?y.createElement(aQ,{gapMode:t.gapMode}):null)}function vQ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const yQ=GZ(wO,xQ);var xg=y.forwardRef(function(t,e){return y.createElement(Ay,qo({},t,{ref:e,sideCar:yQ}))});xg.classNames=Ay.classNames;var Pb=["Enter"," "],wQ=["ArrowDown","PageUp","Home"],SO=["ArrowUp","PageDown","End"],jQ=[...wQ,...SO],bQ={ltr:[...Pb,"ArrowRight"],rtl:[...Pb,"ArrowLeft"]},NQ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},vg="Menu",[Dp,CQ,SQ]=fg(vg),[fu,AO]=Or(vg,[SQ,Am,Cy]),Ey=Am(),EO=Cy(),[AQ,pu]=fu(vg),[EQ,yg]=fu(vg),_O=t=>{const{__scopeMenu:e,open:s=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=t,c=Ey(e),[d,h]=y.useState(null),g=y.useRef(!1),m=vs(a),p=od(i);return y.useEffect(()=>{const v=()=>{g.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>g.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),n.jsx(m2,{...c,children:n.jsx(AQ,{scope:e,open:s,onOpenChange:m,content:d,onContentChange:h,children:n.jsx(EQ,{scope:e,onClose:y.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:g,dir:p,modal:o,children:r})})})};_O.displayName=vg;var _Q="MenuAnchor",g2=y.forwardRef((t,e)=>{const{__scopeMenu:s,...r}=t,i=Ey(s);return n.jsx(by,{...i,...r,ref:e})});g2.displayName=_Q;var x2="MenuPortal",[IQ,IO]=fu(x2,{forceMount:void 0}),TO=t=>{const{__scopeMenu:e,forceMount:s,children:r,container:i}=t,a=pu(x2,e);return n.jsx(IQ,{scope:e,forceMount:s,children:n.jsx(ci,{present:s||a.open,children:n.jsx(Em,{asChild:!0,container:i,children:r})})})};TO.displayName=x2;var Ja="MenuContent",[TQ,v2]=fu(Ja),MO=y.forwardRef((t,e)=>{const s=IO(Ja,t.__scopeMenu),{forceMount:r=s.forceMount,...i}=t,a=pu(Ja,t.__scopeMenu),o=yg(Ja,t.__scopeMenu);return n.jsx(Dp.Provider,{scope:t.__scopeMenu,children:n.jsx(ci,{present:r||a.open,children:n.jsx(Dp.Slot,{scope:t.__scopeMenu,children:o.modal?n.jsx(MQ,{...i,ref:e}):n.jsx(DQ,{...i,ref:e})})})})}),MQ=y.forwardRef((t,e)=>{const s=pu(Ja,t.__scopeMenu),r=y.useRef(null),i=Jt(e,r);return y.useEffect(()=>{const a=r.current;if(a)return Sy(a)},[]),n.jsx(y2,{...t,ref:i,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:it(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),DQ=y.forwardRef((t,e)=>{const s=pu(Ja,t.__scopeMenu);return n.jsx(y2,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),y2=y.forwardRef((t,e)=>{const{__scopeMenu:s,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:g,onFocusOutside:m,onInteractOutside:p,onDismiss:v,disableOutsideScroll:j,...N}=t,E=pu(Ja,s),_=yg(Ja,s),S=Ey(s),C=EO(s),I=CQ(s),[P,L]=y.useState(null),T=y.useRef(null),M=Jt(e,T,E.onContentChange),k=y.useRef(0),O=y.useRef(""),V=y.useRef(0),B=y.useRef(null),Y=y.useRef("right"),z=y.useRef(0),G=j?xg:y.Fragment,he=j?{as:Eo,allowPinchZoom:!0}:void 0,le=re=>{var de,pe;const me=O.current+re,Ce=I().filter(Me=>!Me.disabled),$=document.activeElement,xe=(de=Ce.find(Me=>Me.ref.current===$))==null?void 0:de.textValue,te=Ce.map(Me=>Me.textValue),ae=WQ(te,me,xe),ee=(pe=Ce.find(Me=>Me.textValue===ae))==null?void 0:pe.ref.current;(function Me(Le){O.current=Le,window.clearTimeout(k.current),Le!==""&&(k.current=window.setTimeout(()=>Me(""),1e3))})(me),ee&&setTimeout(()=>ee.focus())};y.useEffect(()=>()=>window.clearTimeout(k.current),[]),vy();const se=y.useCallback(re=>{var Ce,$;return Y.current===((Ce=B.current)==null?void 0:Ce.side)&&qQ(re,($=B.current)==null?void 0:$.area)},[]);return n.jsx(TQ,{scope:s,searchRef:O,onItemEnter:y.useCallback(re=>{se(re)&&re.preventDefault()},[se]),onItemLeave:y.useCallback(re=>{var me;se(re)||((me=T.current)==null||me.focus(),L(null))},[se]),onTriggerLeave:y.useCallback(re=>{se(re)&&re.preventDefault()},[se]),pointerGraceTimerRef:V,onPointerGraceIntentChange:y.useCallback(re=>{B.current=re},[]),children:n.jsx(G,{...he,children:n.jsx(pg,{asChild:!0,trapped:i,onMountAutoFocus:it(a,re=>{var me;re.preventDefault(),(me=T.current)==null||me.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:n.jsx(bm,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:h,onPointerDownOutside:g,onFocusOutside:m,onInteractOutside:p,onDismiss:v,children:n.jsx(pO,{asChild:!0,...C,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:P,onCurrentTabStopIdChange:L,onEntryFocus:it(d,re=>{_.isUsingKeyboardRef.current||re.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(f2,{role:"menu","aria-orientation":"vertical","data-state":GO(E.open),"data-radix-menu-content":"",dir:_.dir,...S,...N,ref:M,style:{outline:"none",...N.style},onKeyDown:it(N.onKeyDown,re=>{const Ce=re.target.closest("[data-radix-menu-content]")===re.currentTarget,$=re.ctrlKey||re.altKey||re.metaKey,xe=re.key.length===1;Ce&&(re.key==="Tab"&&re.preventDefault(),!$&&xe&&le(re.key));const te=T.current;if(re.target!==te||!jQ.includes(re.key))return;re.preventDefault();const ee=I().filter(de=>!de.disabled).map(de=>de.ref.current);SO.includes(re.key)&&ee.reverse(),$Q(ee)}),onBlur:it(t.onBlur,re=>{re.currentTarget.contains(re.target)||(window.clearTimeout(k.current),O.current="")}),onPointerMove:it(t.onPointerMove,kp(re=>{const me=re.target,Ce=z.current!==re.clientX;if(re.currentTarget.contains(me)&&Ce){const $=re.clientX>z.current?"right":"left";Y.current=$,z.current=re.clientX}}))})})})})})})});MO.displayName=Ja;var kQ="MenuGroup",w2=y.forwardRef((t,e)=>{const{__scopeMenu:s,...r}=t;return n.jsx(St.div,{role:"group",...r,ref:e})});w2.displayName=kQ;var PQ="MenuLabel",DO=y.forwardRef((t,e)=>{const{__scopeMenu:s,...r}=t;return n.jsx(St.div,{...r,ref:e})});DO.displayName=PQ;var X0="MenuItem",p4="menu.itemSelect",_y=y.forwardRef((t,e)=>{const{disabled:s=!1,onSelect:r,...i}=t,a=y.useRef(null),o=yg(X0,t.__scopeMenu),c=v2(X0,t.__scopeMenu),d=Jt(e,a),h=y.useRef(!1),g=()=>{const m=a.current;if(!s&&m){const p=new CustomEvent(p4,{bubbles:!0,cancelable:!0});m.addEventListener(p4,v=>r==null?void 0:r(v),{once:!0}),s2(m,p),p.defaultPrevented?h.current=!1:o.onClose()}};return n.jsx(kO,{...i,ref:d,disabled:s,onClick:it(t.onClick,g),onPointerDown:m=>{var p;(p=t.onPointerDown)==null||p.call(t,m),h.current=!0},onPointerUp:it(t.onPointerUp,m=>{var p;h.current||(p=m.currentTarget)==null||p.click()}),onKeyDown:it(t.onKeyDown,m=>{const p=c.searchRef.current!=="";s||p&&m.key===" "||Pb.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});_y.displayName=X0;var kO=y.forwardRef((t,e)=>{const{__scopeMenu:s,disabled:r=!1,textValue:i,...a}=t,o=v2(X0,s),c=EO(s),d=y.useRef(null),h=Jt(e,d),[g,m]=y.useState(!1),[p,v]=y.useState("");return y.useEffect(()=>{const j=d.current;j&&v((j.textContent??"").trim())},[a.children]),n.jsx(Dp.ItemSlot,{scope:s,disabled:r,textValue:i??p,children:n.jsx(gO,{asChild:!0,...c,focusable:!r,children:n.jsx(St.div,{role:"menuitem","data-highlighted":g?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:h,onPointerMove:it(t.onPointerMove,kp(j=>{r?o.onItemLeave(j):(o.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:it(t.onPointerLeave,kp(j=>o.onItemLeave(j))),onFocus:it(t.onFocus,()=>m(!0)),onBlur:it(t.onBlur,()=>m(!1))})})})}),RQ="MenuCheckboxItem",PO=y.forwardRef((t,e)=>{const{checked:s=!1,onCheckedChange:r,...i}=t;return n.jsx(BO,{scope:t.__scopeMenu,checked:s,children:n.jsx(_y,{role:"menuitemcheckbox","aria-checked":J0(s)?"mixed":s,...i,ref:e,"data-state":b2(s),onSelect:it(i.onSelect,()=>r==null?void 0:r(J0(s)?!0:!s),{checkForDefaultPrevented:!1})})})});PO.displayName=RQ;var RO="MenuRadioGroup",[LQ,OQ]=fu(RO,{value:void 0,onValueChange:()=>{}}),LO=y.forwardRef((t,e)=>{const{value:s,onValueChange:r,...i}=t,a=vs(r);return n.jsx(LQ,{scope:t.__scopeMenu,value:s,onValueChange:a,children:n.jsx(w2,{...i,ref:e})})});LO.displayName=RO;var OO="MenuRadioItem",FO=y.forwardRef((t,e)=>{const{value:s,...r}=t,i=OQ(OO,t.__scopeMenu),a=s===i.value;return n.jsx(BO,{scope:t.__scopeMenu,checked:a,children:n.jsx(_y,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":b2(a),onSelect:it(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,s)},{checkForDefaultPrevented:!1})})})});FO.displayName=OO;var j2="MenuItemIndicator",[BO,FQ]=fu(j2,{checked:!1}),zO=y.forwardRef((t,e)=>{const{__scopeMenu:s,forceMount:r,...i}=t,a=FQ(j2,s);return n.jsx(ci,{present:r||J0(a.checked)||a.checked===!0,children:n.jsx(St.span,{...i,ref:e,"data-state":b2(a.checked)})})});zO.displayName=j2;var BQ="MenuSeparator",VO=y.forwardRef((t,e)=>{const{__scopeMenu:s,...r}=t;return n.jsx(St.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});VO.displayName=BQ;var zQ="MenuArrow",$O=y.forwardRef((t,e)=>{const{__scopeMenu:s,...r}=t,i=Ey(s);return n.jsx(p2,{...i,...r,ref:e})});$O.displayName=zQ;var VQ="MenuSub",[Sye,UO]=fu(VQ),Af="MenuSubTrigger",WO=y.forwardRef((t,e)=>{const s=pu(Af,t.__scopeMenu),r=yg(Af,t.__scopeMenu),i=UO(Af,t.__scopeMenu),a=v2(Af,t.__scopeMenu),o=y.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:d}=a,h={__scopeMenu:t.__scopeMenu},g=y.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return y.useEffect(()=>g,[g]),y.useEffect(()=>{const m=c.current;return()=>{window.clearTimeout(m),d(null)}},[c,d]),n.jsx(g2,{asChild:!0,...h,children:n.jsx(kO,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":i.contentId,"data-state":GO(s.open),...t,ref:xy(e,i.onTriggerChange),onClick:m=>{var p;(p=t.onClick)==null||p.call(t,m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:it(t.onPointerMove,kp(m=>{a.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!s.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{s.onOpenChange(!0),g()},100))})),onPointerLeave:it(t.onPointerLeave,kp(m=>{var v,j;g();const p=(v=s.content)==null?void 0:v.getBoundingClientRect();if(p){const N=(j=s.content)==null?void 0:j.dataset.side,E=N==="right",_=E?-5:5,S=p[E?"left":"right"],C=p[E?"right":"left"];a.onPointerGraceIntentChange({area:[{x:m.clientX+_,y:m.clientY},{x:S,y:p.top},{x:C,y:p.top},{x:C,y:p.bottom},{x:S,y:p.bottom}],side:N}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(m),m.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:it(t.onKeyDown,m=>{var v;const p=a.searchRef.current!=="";t.disabled||p&&m.key===" "||bQ[r.dir].includes(m.key)&&(s.onOpenChange(!0),(v=s.content)==null||v.focus(),m.preventDefault())})})})});WO.displayName=Af;var HO="MenuSubContent",qO=y.forwardRef((t,e)=>{const s=IO(Ja,t.__scopeMenu),{forceMount:r=s.forceMount,...i}=t,a=pu(Ja,t.__scopeMenu),o=yg(Ja,t.__scopeMenu),c=UO(HO,t.__scopeMenu),d=y.useRef(null),h=Jt(e,d);return n.jsx(Dp.Provider,{scope:t.__scopeMenu,children:n.jsx(ci,{present:r||a.open,children:n.jsx(Dp.Slot,{scope:t.__scopeMenu,children:n.jsx(y2,{id:c.contentId,"aria-labelledby":c.triggerId,...i,ref:h,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:g=>{var m;o.isUsingKeyboardRef.current&&((m=d.current)==null||m.focus()),g.preventDefault()},onCloseAutoFocus:g=>g.preventDefault(),onFocusOutside:it(t.onFocusOutside,g=>{g.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:it(t.onEscapeKeyDown,g=>{o.onClose(),g.preventDefault()}),onKeyDown:it(t.onKeyDown,g=>{var v;const m=g.currentTarget.contains(g.target),p=NQ[o.dir].includes(g.key);m&&p&&(a.onOpenChange(!1),(v=c.trigger)==null||v.focus(),g.preventDefault())})})})})})});qO.displayName=HO;function GO(t){return t?"open":"closed"}function J0(t){return t==="indeterminate"}function b2(t){return J0(t)?"indeterminate":t?"checked":"unchecked"}function $Q(t){const e=document.activeElement;for(const s of t)if(s===e||(s.focus(),document.activeElement!==e))return}function UQ(t,e){return t.map((s,r)=>t[(e+r)%t.length])}function WQ(t,e,s){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,a=s?t.indexOf(s):-1;let o=UQ(t,Math.max(a,0));i.length===1&&(o=o.filter(h=>h!==s));const d=o.find(h=>h.toLowerCase().startsWith(i.toLowerCase()));return d!==s?d:void 0}function HQ(t,e){const{x:s,y:r}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const c=e[a].x,d=e[a].y,h=e[o].x,g=e[o].y;d>r!=g>r&&s<(h-c)*(r-d)/(g-d)+c&&(i=!i)}return i}function qQ(t,e){if(!e)return!1;const s={x:t.clientX,y:t.clientY};return HQ(s,e)}function kp(t){return e=>e.pointerType==="mouse"?t(e):void 0}var GQ=_O,YQ=g2,KQ=TO,ZQ=MO,QQ=w2,XQ=DO,JQ=_y,eX=PO,tX=LO,nX=FO,sX=zO,rX=VO,iX=$O,aX=WO,oX=qO,N2="DropdownMenu",[lX,Aye]=Or(N2,[AO]),zi=AO(),[cX,YO]=lX(N2),KO=t=>{const{__scopeDropdownMenu:e,children:s,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:c=!0}=t,d=zi(e),h=y.useRef(null),[g=!1,m]=ta({prop:i,defaultProp:a,onChange:o});return n.jsx(cX,{scope:e,triggerId:Rr(),triggerRef:h,contentId:Rr(),open:g,onOpenChange:m,onOpenToggle:y.useCallback(()=>m(p=>!p),[m]),modal:c,children:n.jsx(GQ,{...d,open:g,onOpenChange:m,dir:r,modal:c,children:s})})};KO.displayName=N2;var ZO="DropdownMenuTrigger",QO=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,disabled:r=!1,...i}=t,a=YO(ZO,s),o=zi(s);return n.jsx(YQ,{asChild:!0,...o,children:n.jsx(St.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:xy(e,a.triggerRef),onPointerDown:it(t.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:it(t.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});QO.displayName=ZO;var dX="DropdownMenuPortal",XO=t=>{const{__scopeDropdownMenu:e,...s}=t,r=zi(e);return n.jsx(KQ,{...r,...s})};XO.displayName=dX;var JO="DropdownMenuContent",e5=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=YO(JO,s),a=zi(s),o=y.useRef(!1);return n.jsx(ZQ,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:e,onCloseAutoFocus:it(t.onCloseAutoFocus,c=>{var d;o.current||(d=i.triggerRef.current)==null||d.focus(),o.current=!1,c.preventDefault()}),onInteractOutside:it(t.onInteractOutside,c=>{const d=c.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,g=d.button===2||h;(!i.modal||g)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});e5.displayName=JO;var uX="DropdownMenuGroup",hX=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=zi(s);return n.jsx(QQ,{...i,...r,ref:e})});hX.displayName=uX;var mX="DropdownMenuLabel",t5=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=zi(s);return n.jsx(XQ,{...i,...r,ref:e})});t5.displayName=mX;var fX="DropdownMenuItem",n5=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=zi(s);return n.jsx(JQ,{...i,...r,ref:e})});n5.displayName=fX;var pX="DropdownMenuCheckboxItem",s5=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=zi(s);return n.jsx(eX,{...i,...r,ref:e})});s5.displayName=pX;var gX="DropdownMenuRadioGroup",xX=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=zi(s);return n.jsx(tX,{...i,...r,ref:e})});xX.displayName=gX;var vX="DropdownMenuRadioItem",r5=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=zi(s);return n.jsx(nX,{...i,...r,ref:e})});r5.displayName=vX;var yX="DropdownMenuItemIndicator",i5=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=zi(s);return n.jsx(sX,{...i,...r,ref:e})});i5.displayName=yX;var wX="DropdownMenuSeparator",a5=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=zi(s);return n.jsx(rX,{...i,...r,ref:e})});a5.displayName=wX;var jX="DropdownMenuArrow",bX=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=zi(s);return n.jsx(iX,{...i,...r,ref:e})});bX.displayName=jX;var NX="DropdownMenuSubTrigger",o5=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=zi(s);return n.jsx(aX,{...i,...r,ref:e})});o5.displayName=NX;var CX="DropdownMenuSubContent",l5=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...r}=t,i=zi(s);return n.jsx(oX,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});l5.displayName=CX;var SX=KO,AX=QO,EX=XO,c5=e5,d5=t5,u5=n5,h5=s5,m5=r5,f5=i5,p5=a5,g5=o5,x5=l5;const oi=SX,li=AX,_X=y.forwardRef(({className:t,inset:e,children:s,...r},i)=>n.jsxs(g5,{ref:i,className:we("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[s,n.jsx(ad,{className:"ml-auto h-4 w-4"})]}));_X.displayName=g5.displayName;const IX=y.forwardRef(({className:t,...e},s)=>n.jsx(x5,{ref:s,className:we("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));IX.displayName=x5.displayName;const Yr=y.forwardRef(({className:t,sideOffset:e=4,...s},r)=>n.jsx(EX,{children:n.jsx(c5,{ref:r,sideOffset:e,className:we("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));Yr.displayName=c5.displayName;const bt=y.forwardRef(({className:t,inset:e,...s},r)=>n.jsx(u5,{ref:r,className:we("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...s}));bt.displayName=u5.displayName;const TX=y.forwardRef(({className:t,children:e,checked:s,...r},i)=>n.jsxs(h5,{ref:i,className:we("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:s,...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(f5,{children:n.jsx(Ao,{className:"h-4 w-4"})})}),e]}));TX.displayName=h5.displayName;const MX=y.forwardRef(({className:t,children:e,...s},r)=>n.jsxs(m5,{ref:r,className:we("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(f5,{children:n.jsx(cL,{className:"h-2 w-2 fill-current"})})}),e]}));MX.displayName=m5.displayName;const _m=y.forwardRef(({className:t,inset:e,...s},r)=>n.jsx(d5,{ref:r,className:we("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...s}));_m.displayName=d5.displayName;const sl=y.forwardRef(({className:t,...e},s)=>n.jsx(p5,{ref:s,className:we("-mx-1 my-1 h-px bg-muted",t),...e}));sl.displayName=p5.displayName;function DX({toggleMobileMenu:t}){const{user:e,logout:s}=Kr(),[,r]=_n(),{toast:i}=Lt(),[a,o]=y.useState(!1),c=[{id:1,type:"alert",message:"Pool maintenance due for client #1452",time:"10 minutes ago"},{id:2,type:"success",message:"Invoice #2341 has been paid",time:"1 hour ago"}],d=async()=>{await s(),r("/login")},h=()=>{r("/settings?tab=profile")},g=()=>{r("/settings?tab=advanced")},m=p=>{i({title:"Notification acknowledged",description:"You've viewed this notification."})};return n.jsx("header",{className:"sticky top-0 z-10 bg-white border-b border-gray-200 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[n.jsx("div",{className:"flex items-center md:hidden",children:n.jsx(H,{variant:"ghost",size:"icon",onClick:t,className:"text-gray-600 hover:text-primary focus:outline-none","aria-label":"Open mobile menu",children:n.jsx(YG,{className:"h-6 w-6"})})}),n.jsx("div",{className:"md:hidden flex items-center justify-center flex-1",children:n.jsx("h1",{className:"text-lg font-bold text-primary font-heading",children:"SmartWater Pools"})}),n.jsx("div",{className:"hidden md:flex items-center",children:n.jsx("h1",{className:"text-xl font-bold text-primary font-heading",children:"SmartWater Pools Management"})}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs(oi,{open:a,onOpenChange:o,children:[n.jsx(li,{asChild:!0,children:n.jsxs(H,{variant:"ghost",size:"icon",className:"relative text-gray-600 hover:text-primary focus:outline-none","aria-label":"View notifications",children:[n.jsx(HC,{className:"h-6 w-6"}),c.length>0&&n.jsx("span",{className:"absolute top-0 right-0 block w-2 h-2 bg-red-500 rounded-full"})]})}),n.jsxs(Yr,{align:"end",className:"w-[90vw] max-w-md sm:w-80",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b",children:[n.jsx("span",{className:"font-medium",children:"Notifications"}),n.jsx(H,{variant:"ghost",size:"sm",className:"text-xs",children:"Mark all as read"})]}),c.length>0?n.jsx("div",{className:"max-h-[50vh] sm:max-h-[300px] overflow-y-auto",children:c.map(p=>n.jsx(bt,{className:"p-3 cursor-pointer focus:bg-blue-50",onClick:()=>m(p.id),children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"mr-2 mt-1 flex-shrink-0",children:p.type==="alert"?n.jsx(Zf,{className:"h-4 w-4 text-amber-500"}):n.jsx(mu,{className:"h-4 w-4 text-green-500"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 break-words",children:p.message}),n.jsx("p",{className:"text-xs text-gray-500",children:p.time})]})]})},p.id))}):n.jsx("div",{className:"py-6 text-center text-gray-500",children:n.jsx("p",{children:"No new notifications"})}),n.jsx(sl,{}),n.jsx("div",{className:"p-2",children:n.jsx(H,{variant:"outline",className:"w-full justify-center text-primary text-sm",onClick:()=>{o(!1),r("/notifications")},children:"View all notifications"})})]})]}),n.jsxs(oi,{children:[n.jsx(li,{asChild:!0,children:n.jsx(H,{variant:"ghost",size:"icon",className:"rounded-full focus:outline-none","aria-label":"User menu",children:n.jsx("div",{className:"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center",children:e!=null&&e.name?e.name.charAt(0).toUpperCase():"U"})})}),n.jsxs(Yr,{align:"end",className:"w-[90vw] max-w-sm sm:w-64",children:[n.jsxs("div",{className:"flex items-center justify-start p-4 border-b",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary text-white flex items-center justify-center text-lg mr-4 flex-shrink-0",children:e!=null&&e.name?e.name.charAt(0).toUpperCase():"U"}),n.jsxs("div",{className:"flex flex-col min-w-0",children:[n.jsx("p",{className:"font-medium text-gray-900 truncate",children:(e==null?void 0:e.name)||(e==null?void 0:e.username)||"User"}),n.jsx("p",{className:"truncate text-sm text-gray-500",children:(e==null?void 0:e.email)||"No email provided"})]})]}),n.jsxs("div",{className:"p-2",children:[n.jsxs(bt,{onClick:h,className:"cursor-pointer rounded-md p-2 focus:bg-blue-50",children:[n.jsx(q0,{className:"mr-2 h-5 w-5 text-gray-500"}),n.jsx("span",{children:"Profile"})]}),n.jsxs(bt,{onClick:g,className:"cursor-pointer rounded-md p-2 focus:bg-blue-50",children:[n.jsx(Hs,{className:"mr-2 h-5 w-5 text-gray-500"}),n.jsx("span",{children:"Settings"})]}),n.jsx(sl,{}),n.jsxs(bt,{onClick:d,className:"cursor-pointer rounded-md p-2 focus:bg-blue-50",children:[n.jsx(gy,{className:"mr-2 h-5 w-5 text-gray-500"}),n.jsx("span",{children:"Logout"})]})]})]})]})]})]})})}function kX({isOpen:t,onClose:e}){const{user:s,logout:r}=Kr(),[i]=_n(),a=async()=>{await r(),window.location.href="/login",e()};if(!t)return null;const o=c=>!!(c==="/"&&i==="/"||c!=="/"&&i.startsWith(c));return n.jsxs("div",{className:"fixed inset-0 z-50 md:hidden","aria-modal":"true",role:"dialog",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 transition-opacity ease-out duration-300",onClick:e,"aria-hidden":"true"}),n.jsxs("div",{className:"fixed inset-y-0 left-0 flex flex-col w-72 max-w-sm bg-white h-full shadow-xl transform transition-all duration-300 ease-in-out",children:[n.jsxs("div",{className:"flex items-center justify-between h-16 border-b border-gray-200 px-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ga,{className:"h-6 w-6 text-primary mr-2",fill:"currentColor"}),n.jsx("h1",{className:"text-xl font-bold text-primary font-heading",children:"SmartWater Pools"})]}),n.jsx("button",{className:"text-gray-500 p-2 rounded-full hover:bg-gray-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary",onClick:e,"aria-label":"Close menu",children:n.jsx(ys,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center text-lg shadow-sm",children:s!=null&&s.name?s.name.charAt(0).toUpperCase():"U"}),n.jsxs("div",{className:"overflow-hidden",children:[n.jsx("p",{className:"font-medium text-gray-900 truncate",children:(s==null?void 0:s.name)||(s==null?void 0:s.username)||"User"}),n.jsx("p",{className:"text-xs text-gray-500 truncate",children:(s==null?void 0:s.email)||(s==null?void 0:s.role)||""}),n.jsx("div",{className:"mt-1",children:n.jsx(rs,{href:"/settings",onClick:e,children:n.jsx("span",{className:"text-xs text-primary hover:underline cursor-pointer",children:"View Profile"})})})]})]})}),n.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-3",children:n.jsxs("div",{className:"space-y-1",children:[n.jsx(rs,{href:"/",onClick:e,children:n.jsxs("div",{className:`flex items-center px-3 py-2 text-sm font-medium rounded-md cursor-pointer ${o("/")?"bg-primary text-white":"text-gray-700 hover:bg-blue-50"}`,children:[n.jsx(py,{className:"mr-3 h-5 w-5"}),"Dashboard"]})}),n.jsx(rs,{href:"/projects",onClick:e,children:n.jsxs("div",{className:`flex items-center px-3 py-2 text-sm font-medium rounded-md cursor-pointer ${o("/projects")?"bg-primary text-white":"text-gray-700 hover:bg-blue-50"}`,children:[n.jsx(qC,{className:"mr-3 h-5 w-5"}),"Projects"]})}),n.jsx(rs,{href:"/maintenance",onClick:e,children:n.jsxs("div",{className:`flex items-center px-3 py-2 text-sm font-medium rounded-md cursor-pointer ${o("/maintenance")?"bg-primary text-white":"text-gray-700 hover:bg-blue-50"}`,children:[n.jsx(aL,{className:"mr-3 h-5 w-5"}),"Maintenance"]})}),n.jsx(rs,{href:"/repairs",onClick:e,children:n.jsxs("div",{className:`flex items-center px-3 py-2 text-sm font-medium rounded-md cursor-pointer ${o("/repairs")?"bg-primary text-white":"text-gray-700 hover:bg-blue-50"}`,children:[n.jsx(so,{className:"mr-3 h-5 w-5"}),"Repairs"]})}),n.jsx(rs,{href:"/clients",onClick:e,children:n.jsxs("div",{className:`flex items-center px-3 py-2 text-sm font-medium rounded-md cursor-pointer ${o("/clients")?"bg-primary text-white":"text-gray-700 hover:bg-blue-50"}`,children:[n.jsx(yi,{className:"mr-3 h-5 w-5"}),"Clients"]})}),n.jsx(rs,{href:"/technicians",onClick:e,children:n.jsxs("div",{className:`flex items-center px-3 py-2 text-sm font-medium rounded-md cursor-pointer ${o("/technicians")?"bg-primary text-white":"text-gray-700 hover:bg-blue-50"}`,children:[n.jsx(q0,{className:"mr-3 h-5 w-5"}),"Technicians"]})}),n.jsx(rs,{href:"/communications",onClick:e,children:n.jsxs("div",{className:`flex items-center px-3 py-2 text-sm font-medium rounded-md cursor-pointer ${o("/communications")?"bg-primary text-white":"text-gray-700 hover:bg-blue-50"}`,children:[n.jsx(ja,{className:"mr-3 h-5 w-5"}),"Communications"]})}),n.jsx(rs,{href:"/business",onClick:e,children:n.jsxs("div",{className:`flex items-center px-3 py-2 text-sm font-medium rounded-md cursor-pointer ${o("/business")?"bg-primary text-white":"text-gray-700 hover:bg-blue-50"}`,children:[n.jsx(qr,{className:"mr-3 h-5 w-5"}),"Business"]})}),n.jsx(rs,{href:"/inventory/barcode-demo",onClick:e,children:n.jsxs("div",{className:`flex items-center px-3 py-2 text-sm font-medium rounded-md cursor-pointer ${o("/inventory/barcode-demo")?"bg-primary text-white":"text-gray-700 hover:bg-blue-50"}`,children:[n.jsx(ki,{className:"mr-3 h-5 w-5"}),"Barcode Scanner"]})})]})}),n.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:n.jsxs("div",{className:"space-y-1",children:[n.jsx(rs,{href:"/settings",onClick:e,children:n.jsxs("div",{className:`flex items-center px-3 py-2 text-sm font-medium rounded-md cursor-pointer ${o("/settings")?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"}`,children:[n.jsx(Hs,{className:"mr-3 h-5 w-5"}),"Settings"]})}),n.jsxs("button",{onClick:a,className:"w-full flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100",children:[n.jsx(gy,{className:"mr-3 h-5 w-5"}),"Logout"]})]})})]})]})}function PX(){const[t]=_n(),{addTab:e}=n2(),s=y.useMemo(()=>t.split("/").filter(Boolean),[t]),r=t.match(/^\/clients\/(\d+)$/),i=t.match(/^\/clients\/(\d+)\/edit$/),a=r?parseInt(r[1]):i?parseInt(i[1]):null,{data:o,isLoading:c}=wt({queryKey:["/api/clients",a],enabled:!!a,retry:3,staleTime:5e3}),d=(m,p,v)=>{if(v)return"Loading...";if(m&&m.user&&m.user.name){const j=m.user.name.split(" "),N=j[0],E=j.length>1?j[j.length-1]:"";return`${N} ${E}`}return p?`Client ${p}`:"Client"},h=y.useMemo(()=>{const m=[];if(m.push({title:"Dashboard",path:"/",icon:n.jsx(py,{className:"h-3.5 w-3.5"})}),i&&a){const v=d(o,a,c);return m.push({title:"Clients",path:"/clients"},{title:v,path:`/clients/${a}`},{title:"Edit",path:`/clients/${a}/edit`}),m}if(r&&a){const v=d(o,a,c);return m.push({title:"Clients",path:"/clients"},{title:v,path:`/clients/${a}`}),m}let p="";for(let v=0;v<s.length;v++){const j=s[v];p+=`/${j}`;let N=j.split("-").map(E=>E.charAt(0).toUpperCase()+E.slice(1)).join(" ");j==="clients"?N="Clients":j==="projects"?N="Build":j==="maintenance"?N="Schedule":j==="repairs"?N="Service":j==="technicians"&&(N="Technicians"),m.push({title:N,path:p})}return m},[s,r,i,a,o,c]),g=(m,p)=>{m.preventDefault();let v="Dashboard";if(p==="/")v="Dashboard";else if(p==="/clients")v="Clients";else if(p==="/projects")v="Build";else if(p==="/maintenance")v="Schedule";else if(p==="/repairs")v="Service";else if(p==="/technicians")v="Technicians";else{const j=p.split("/").filter(Boolean);v=j.length>0?j[j.length-1].charAt(0).toUpperCase()+j[j.length-1].slice(1):"Dashboard"}e(p,v,!1)};return s.length===0?null:n.jsx("div",{className:"py-2",children:n.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:n.jsx("ol",{className:"flex items-center space-x-1 text-sm",children:h.map((m,p)=>{const v=p===0,j=p===h.length-1;return n.jsxs("li",{className:we("flex items-center",j?"text-gray-800 font-medium":"text-gray-500"),children:[!v&&n.jsx(ad,{className:"h-3.5 w-3.5 text-gray-400 mx-1"}),j?n.jsxs("div",{className:"flex items-center",children:[m.icon&&n.jsx("span",{className:"mr-1.5 text-gray-500",children:m.icon}),n.jsx("span",{children:m.title})]}):n.jsxs("div",{className:we("flex items-center cursor-pointer hover:text-primary transition-colors"),onClick:N=>g(N,m.path),children:[m.icon&&n.jsx("span",{className:"mr-1.5 text-gray-500",children:m.icon}),n.jsx("span",{className:v?"sr-only sm:not-sr-only":"",children:m.title})]})]},m.path)})})})})}var RX="VisuallyHidden",Iy=y.forwardRef((t,e)=>n.jsx(St.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Iy.displayName=RX;var C2="ToastProvider",[S2,LX,OX]=fg("Toast"),[v5,Eye]=Or("Toast",[OX]),[FX,Ty]=v5(C2),y5=t=>{const{__scopeToast:e,label:s="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=t,[c,d]=y.useState(null),[h,g]=y.useState(0),m=y.useRef(!1),p=y.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${C2}\`. Expected non-empty \`string\`.`),n.jsx(S2.Provider,{scope:e,children:n.jsx(FX,{scope:e,label:s,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:h,viewport:c,onViewportChange:d,onToastAdd:y.useCallback(()=>g(v=>v+1),[]),onToastRemove:y.useCallback(()=>g(v=>v-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:p,children:o})})};y5.displayName=C2;var w5="ToastViewport",BX=["F8"],Rb="toast.viewportPause",Lb="toast.viewportResume",j5=y.forwardRef((t,e)=>{const{__scopeToast:s,hotkey:r=BX,label:i="Notifications ({hotkey})",...a}=t,o=Ty(w5,s),c=LX(s),d=y.useRef(null),h=y.useRef(null),g=y.useRef(null),m=y.useRef(null),p=Jt(e,m,o.onViewportChange),v=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=o.toastCount>0;y.useEffect(()=>{const E=_=>{var C;r.length!==0&&r.every(I=>_[I]||_.code===I)&&((C=m.current)==null||C.focus())};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),y.useEffect(()=>{const E=d.current,_=m.current;if(j&&E&&_){const S=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(Rb);_.dispatchEvent(L),o.isClosePausedRef.current=!0}},C=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(Lb);_.dispatchEvent(L),o.isClosePausedRef.current=!1}},I=L=>{!E.contains(L.relatedTarget)&&C()},P=()=>{E.contains(document.activeElement)||C()};return E.addEventListener("focusin",S),E.addEventListener("focusout",I),E.addEventListener("pointermove",S),E.addEventListener("pointerleave",P),window.addEventListener("blur",S),window.addEventListener("focus",C),()=>{E.removeEventListener("focusin",S),E.removeEventListener("focusout",I),E.removeEventListener("pointermove",S),E.removeEventListener("pointerleave",P),window.removeEventListener("blur",S),window.removeEventListener("focus",C)}}},[j,o.isClosePausedRef]);const N=y.useCallback(({tabbingDirection:E})=>{const S=c().map(C=>{const I=C.ref.current,P=[I,...XX(I)];return E==="forwards"?P:P.reverse()});return(E==="forwards"?S.reverse():S).flat()},[c]);return y.useEffect(()=>{const E=m.current;if(E){const _=S=>{var P,L,T;const C=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!C){const M=document.activeElement,k=S.shiftKey;if(S.target===E&&k){(P=h.current)==null||P.focus();return}const B=N({tabbingDirection:k?"backwards":"forwards"}),Y=B.findIndex(z=>z===M);rw(B.slice(Y+1))?S.preventDefault():k?(L=h.current)==null||L.focus():(T=g.current)==null||T.focus()}};return E.addEventListener("keydown",_),()=>E.removeEventListener("keydown",_)}},[c,N]),n.jsxs(uK,{ref:d,role:"region","aria-label":i.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:j?void 0:"none"},children:[j&&n.jsx(Ob,{ref:h,onFocusFromOutsideViewport:()=>{const E=N({tabbingDirection:"forwards"});rw(E)}}),n.jsx(S2.Slot,{scope:s,children:n.jsx(St.ol,{tabIndex:-1,...a,ref:p})}),j&&n.jsx(Ob,{ref:g,onFocusFromOutsideViewport:()=>{const E=N({tabbingDirection:"backwards"});rw(E)}})]})});j5.displayName=w5;var b5="ToastFocusProxy",Ob=y.forwardRef((t,e)=>{const{__scopeToast:s,onFocusFromOutsideViewport:r,...i}=t,a=Ty(b5,s);return n.jsx(Iy,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var h;const c=o.relatedTarget;!((h=a.viewport)!=null&&h.contains(c))&&r()}})});Ob.displayName=b5;var My="Toast",zX="toast.swipeStart",VX="toast.swipeMove",$X="toast.swipeCancel",UX="toast.swipeEnd",N5=y.forwardRef((t,e)=>{const{forceMount:s,open:r,defaultOpen:i,onOpenChange:a,...o}=t,[c=!0,d]=ta({prop:r,defaultProp:i,onChange:a});return n.jsx(ci,{present:s||c,children:n.jsx(qX,{open:c,...o,ref:e,onClose:()=>d(!1),onPause:vs(t.onPause),onResume:vs(t.onResume),onSwipeStart:it(t.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:it(t.onSwipeMove,h=>{const{x:g,y:m}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:it(t.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:it(t.onSwipeEnd,h=>{const{x:g,y:m}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),d(!1)})})})});N5.displayName=My;var[WX,HX]=v5(My,{onClose(){}}),qX=y.forwardRef((t,e)=>{const{__scopeToast:s,type:r="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:c,onPause:d,onResume:h,onSwipeStart:g,onSwipeMove:m,onSwipeCancel:p,onSwipeEnd:v,...j}=t,N=Ty(My,s),[E,_]=y.useState(null),S=Jt(e,z=>_(z)),C=y.useRef(null),I=y.useRef(null),P=i||N.duration,L=y.useRef(0),T=y.useRef(P),M=y.useRef(0),{onToastAdd:k,onToastRemove:O}=N,V=vs(()=>{var G;(E==null?void 0:E.contains(document.activeElement))&&((G=N.viewport)==null||G.focus()),o()}),B=y.useCallback(z=>{!z||z===1/0||(window.clearTimeout(M.current),L.current=new Date().getTime(),M.current=window.setTimeout(V,z))},[V]);y.useEffect(()=>{const z=N.viewport;if(z){const G=()=>{B(T.current),h==null||h()},he=()=>{const le=new Date().getTime()-L.current;T.current=T.current-le,window.clearTimeout(M.current),d==null||d()};return z.addEventListener(Rb,he),z.addEventListener(Lb,G),()=>{z.removeEventListener(Rb,he),z.removeEventListener(Lb,G)}}},[N.viewport,P,d,h,B]),y.useEffect(()=>{a&&!N.isClosePausedRef.current&&B(P)},[a,P,N.isClosePausedRef,B]),y.useEffect(()=>(k(),()=>O()),[k,O]);const Y=y.useMemo(()=>E?T5(E):null,[E]);return N.viewport?n.jsxs(n.Fragment,{children:[Y&&n.jsx(GX,{__scopeToast:s,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:Y}),n.jsx(WX,{scope:s,onClose:V,children:ra.createPortal(n.jsx(S2.ItemSlot,{scope:s,children:n.jsx(dK,{asChild:!0,onEscapeKeyDown:it(c,()=>{N.isFocusedToastEscapeKeyDownRef.current||V(),N.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(St.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":N.swipeDirection,...j,ref:S,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:it(t.onKeyDown,z=>{z.key==="Escape"&&(c==null||c(z.nativeEvent),z.nativeEvent.defaultPrevented||(N.isFocusedToastEscapeKeyDownRef.current=!0,V()))}),onPointerDown:it(t.onPointerDown,z=>{z.button===0&&(C.current={x:z.clientX,y:z.clientY})}),onPointerMove:it(t.onPointerMove,z=>{if(!C.current)return;const G=z.clientX-C.current.x,he=z.clientY-C.current.y,le=!!I.current,se=["left","right"].includes(N.swipeDirection),re=["left","up"].includes(N.swipeDirection)?Math.min:Math.max,me=se?re(0,G):0,Ce=se?0:re(0,he),$=z.pointerType==="touch"?10:2,xe={x:me,y:Ce},te={originalEvent:z,delta:xe};le?(I.current=xe,px(VX,m,te,{discrete:!1})):g4(xe,N.swipeDirection,$)?(I.current=xe,px(zX,g,te,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(G)>$||Math.abs(he)>$)&&(C.current=null)}),onPointerUp:it(t.onPointerUp,z=>{const G=I.current,he=z.target;if(he.hasPointerCapture(z.pointerId)&&he.releasePointerCapture(z.pointerId),I.current=null,C.current=null,G){const le=z.currentTarget,se={originalEvent:z,delta:G};g4(G,N.swipeDirection,N.swipeThreshold)?px(UX,v,se,{discrete:!0}):px($X,p,se,{discrete:!0}),le.addEventListener("click",re=>re.preventDefault(),{once:!0})}})})})}),N.viewport)})]}):null}),GX=t=>{const{__scopeToast:e,children:s,...r}=t,i=Ty(My,e),[a,o]=y.useState(!1),[c,d]=y.useState(!1);return ZX(()=>o(!0)),y.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),c?null:n.jsx(Em,{asChild:!0,children:n.jsx(Iy,{...r,children:a&&n.jsxs(n.Fragment,{children:[i.label," ",s]})})})},YX="ToastTitle",C5=y.forwardRef((t,e)=>{const{__scopeToast:s,...r}=t;return n.jsx(St.div,{...r,ref:e})});C5.displayName=YX;var KX="ToastDescription",S5=y.forwardRef((t,e)=>{const{__scopeToast:s,...r}=t;return n.jsx(St.div,{...r,ref:e})});S5.displayName=KX;var A5="ToastAction",E5=y.forwardRef((t,e)=>{const{altText:s,...r}=t;return s.trim()?n.jsx(I5,{altText:s,asChild:!0,children:n.jsx(A2,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${A5}\`. Expected non-empty \`string\`.`),null)});E5.displayName=A5;var _5="ToastClose",A2=y.forwardRef((t,e)=>{const{__scopeToast:s,...r}=t,i=HX(_5,s);return n.jsx(I5,{asChild:!0,children:n.jsx(St.button,{type:"button",...r,ref:e,onClick:it(t.onClick,i.onClose)})})});A2.displayName=_5;var I5=y.forwardRef((t,e)=>{const{__scopeToast:s,altText:r,...i}=t;return n.jsx(St.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function T5(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),QX(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...T5(r))}}),e}function px(t,e,s,{discrete:r}){const i=s.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:s});e&&i.addEventListener(t,e,{once:!0}),r?s2(i,a):i.dispatchEvent(a)}var g4=(t,e,s=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),a=r>i;return e==="left"||e==="right"?a&&r>s:!a&&i>s};function ZX(t=()=>{}){const e=vs(t);Bs(()=>{let s=0,r=0;return s=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(r)}},[e])}function QX(t){return t.nodeType===t.ELEMENT_NODE}function XX(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)e.push(s.currentNode);return e}function rw(t){const e=document.activeElement;return t.some(s=>s===e?!0:(s.focus(),document.activeElement!==e))}var JX=y5,M5=j5,D5=N5,k5=C5,P5=S5,R5=E5,L5=A2;const eJ=JX,O5=y.forwardRef(({className:t,...e},s)=>n.jsx(M5,{ref:s,className:we("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));O5.displayName=M5.displayName;const tJ=mg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),F5=y.forwardRef(({className:t,variant:e,...s},r)=>n.jsx(D5,{ref:r,className:we(tJ({variant:e}),t),...s}));F5.displayName=D5.displayName;const nJ=y.forwardRef(({className:t,...e},s)=>n.jsx(R5,{ref:s,className:we("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));nJ.displayName=R5.displayName;const B5=y.forwardRef(({className:t,...e},s)=>n.jsx(L5,{ref:s,className:we("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:n.jsx(ys,{className:"h-4 w-4"})}));B5.displayName=L5.displayName;const z5=y.forwardRef(({className:t,...e},s)=>n.jsx(k5,{ref:s,className:we("text-sm font-semibold",t),...e}));z5.displayName=k5.displayName;const V5=y.forwardRef(({className:t,...e},s)=>n.jsx(P5,{ref:s,className:we("text-sm opacity-90",t),...e}));V5.displayName=P5.displayName;function sJ(){const{toasts:t}=Lt();return n.jsxs(eJ,{children:[t.map(function({id:e,title:s,description:r,action:i,...a}){return n.jsxs(F5,{...a,children:[n.jsxs("div",{className:"grid gap-1",children:[s&&n.jsx(z5,{children:s}),r&&n.jsx(V5,{children:r})]}),i,n.jsx(B5,{})]},e)}),n.jsx(O5,{})]})}const rJ="modulepreload",iJ=function(t){return"/"+t},x4={},E2=function(e,s,r){let i=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(s.map(d=>{if(d=iJ(d),d in x4)return;x4[d]=!0;const h=d.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":rJ,h||(m.as="script"),m.crossOrigin="",m.href=d,c&&m.setAttribute("nonce",c),document.head.appendChild(m),h)return new Promise((p,v)=>{m.addEventListener("load",p),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})};let v4=!1,iw=!1,aw=[];const gx=3,y4=1e3,w4=t=>new Promise(e=>setTimeout(e,t)),ev=async(t=0)=>{try{const e=Date.now(),i=`${window.location.hostname.includes("replit.app")?`https://${window.location.hostname}`:""}/api/google-maps-key?_t=${e}`;console.log("Fetching Google Maps API key from:",i);const a=new AbortController,o=setTimeout(()=>a.abort(),8e3),c=await fetch(i,{signal:a.signal,headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(clearTimeout(o),!c.ok)return console.error(`Failed to fetch Google Maps API key: ${c.status} ${c.statusText}`),"AIzaSyB3mCrj1qCOz6wCAxPqBq3gEd9VXt_gUYk";const h=(await c.json()).apiKey||"";return h?!h&&t<gx?(console.warn(`Empty API key received, retrying (${t+1}/${gx})...`),await w4(y4*Math.pow(2,t)),ev(t+1)):h:(console.warn("Empty API key received from server, using default development key"),"AIzaSyB3mCrj1qCOz6wCAxPqBq3gEd9VXt_gUYk")}catch(e){return console.error("Error getting Google Maps API key:",e),t<gx?(console.warn(`API key fetch failed, retrying (${t+1}/${gx})...`),await w4(y4*Math.pow(2,t)),ev(t+1)):(console.warn("All API key fetch attempts failed, using default development key"),"AIzaSyB3mCrj1qCOz6wCAxPqBq3gEd9VXt_gUYk")}},$5=async()=>v4?Promise.resolve():iw?new Promise(t=>{aw.push(t)}):(iw=!0,new Promise(async(t,e)=>{try{window.initGoogleMapsCallback=()=>{v4=!0,iw=!1,aw.forEach(i=>i()),aw=[],t()};const s=await ev();if(!s){console.error("No Google Maps API key available"),e(new Error("No Google Maps API key available"));return}const r=document.createElement("script");r.src=`https://maps.googleapis.com/maps/api/js?key=${s}&libraries=places&callback=initGoogleMapsCallback`,r.async=!0,r.defer=!0,r.onerror=i=>{console.error("Error loading Google Maps API:",i),e(new Error("Failed to load Google Maps API"))},document.head.appendChild(r)}catch(s){console.error("Error setting up Google Maps API:",s),e(s)}})),aJ=async t=>{if(!t)return console.warn("Address is empty, cannot geocode"),null;try{try{await $5()}catch(s){return console.warn("Failed to load Google Maps API during geocoding:",s),xx(t)}if(!window.google||!window.google.maps||!window.google.maps.Geocoder)return console.warn("Google Maps Geocoder is not available, using fallback"),xx(t);const e=new window.google.maps.Geocoder;return new Promise((s,r)=>{e.geocode({address:t},(i,a)=>{if(a!=="OK"||!i||i.length===0){console.warn(`Geocoding error: ${a}, using fallback coordinates`),s(xx(t));return}const o=i[0].geometry.location;s({latitude:o.lat(),longitude:o.lng(),formattedAddress:i[0].formatted_address})})})}catch(e){return console.error("Error during geocoding:",e),xx(t)}},xx=t=>{let e=34.0522,s=-118.2437;const r=t.match(/([A-Z]{2})\s+\d{5}/);if(r&&r[1]){const i=r[1],a={CA:[36.7783,-119.4179],FL:[27.6648,-81.5158],NY:[40.7128,-74.006],TX:[31.9686,-99.9018],IL:[40.6331,-89.3985]};a[i]&&([e,s]=a[i])}return{latitude:e,longitude:s,formattedAddress:t}};let oJ=null,lJ=null,cJ=null,dJ=null,uJ=null,hJ=null;const U5=y.createContext({apiKey:"",isLoaded:!1,isLoading:!0,error:null,GoogleMap:null,Marker:null,InfoWindow:null,Circle:null,Polyline:null,LoadScript:null}),mJ=()=>y.useContext(U5),fJ=({children:t})=>{const[e,s]=y.useState(""),[r,i]=y.useState(!1),[a,o]=y.useState(!0),[c,d]=y.useState(null),[h,g]=y.useState({GoogleMap:null,Marker:null,InfoWindow:null,Circle:null,Polyline:null,LoadScript:null});return y.useEffect(()=>{(async()=>{try{console.log("GoogleMapsContext: Loading API key"),o(!0);const p=await ev();if(console.log("GoogleMapsContext: API key loaded:",p?"Valid key received":"Empty key"),s(p),p)try{const{GoogleMap:v,Marker:j,InfoWindow:N,Circle:E,Polyline:_,LoadScript:S}=await E2(async()=>{const{GoogleMap:C,Marker:I,InfoWindow:P,Circle:L,Polyline:T,LoadScript:M}=await Promise.resolve().then(()=>Dfe);return{GoogleMap:C,Marker:I,InfoWindow:P,Circle:L,Polyline:T,LoadScript:M}},void 0);g({GoogleMap:v,Marker:j,InfoWindow:N,Circle:E,Polyline:_,LoadScript:S}),oJ=v,lJ=j,cJ=N,dJ=E,uJ=_,hJ=S,console.log("GoogleMapsContext: Map components loaded successfully")}catch(v){console.error("GoogleMapsContext: Error loading map components:",v),d(new Error("Failed to load Google Maps components"))}i(!0),o(!1)}catch(p){console.error("GoogleMapsContext: Error loading API key:",p),d(p instanceof Error?p:new Error("Failed to load Google Maps API key")),o(!1)}})()},[]),n.jsx(U5.Provider,{value:{apiKey:e,isLoaded:r,isLoading:a,error:c,GoogleMap:h.GoogleMap,Marker:h.Marker,InfoWindow:h.InfoWindow,Circle:h.Circle,Polyline:h.Polyline,LoadScript:h.LoadScript},children:t})},ow={system_admin:{clients:{view:!0,create:!0,edit:!0,delete:!0},technicians:{view:!0,create:!0,edit:!0,delete:!0},projects:{view:!0,create:!0,edit:!0,delete:!0},maintenance:{view:!0,create:!0,edit:!0,delete:!0},repairs:{view:!0,create:!0,edit:!0,delete:!0},invoices:{view:!0,create:!0,edit:!0,delete:!0},inventory:{view:!0,create:!0,edit:!0,delete:!0},reports:{view:!0,create:!0,edit:!0,delete:!0},settings:{view:!0,create:!0,edit:!0,delete:!0},vehicles:{view:!0,create:!0,edit:!0,delete:!0},communications:{view:!0,create:!0,edit:!0,delete:!0},users:{view:!0,create:!0,edit:!0,delete:!0},organization:{view:!0,create:!0,edit:!0,delete:!0}},admin:{clients:{view:!0,create:!0,edit:!0,delete:!0},technicians:{view:!0,create:!0,edit:!0,delete:!0},projects:{view:!0,create:!0,edit:!0,delete:!0},maintenance:{view:!0,create:!0,edit:!0,delete:!0},repairs:{view:!0,create:!0,edit:!0,delete:!0},invoices:{view:!0,create:!0,edit:!0,delete:!0},inventory:{view:!0,create:!0,edit:!0,delete:!0},reports:{view:!0,create:!0,edit:!0,delete:!0},settings:{view:!0,create:!0,edit:!0,delete:!0},vehicles:{view:!0,create:!0,edit:!0,delete:!0},communications:{view:!0,create:!0,edit:!0,delete:!0},users:{view:!0,create:!0,edit:!0,delete:!0},organization:{view:!0,create:!1,edit:!0,delete:!1}},org_admin:{clients:{view:!0,create:!0,edit:!0,delete:!0},technicians:{view:!0,create:!0,edit:!0,delete:!0},projects:{view:!0,create:!0,edit:!0,delete:!0},maintenance:{view:!0,create:!0,edit:!0,delete:!0},repairs:{view:!0,create:!0,edit:!0,delete:!0},invoices:{view:!0,create:!0,edit:!0,delete:!0},inventory:{view:!0,create:!0,edit:!0,delete:!0},reports:{view:!0,create:!0,edit:!0,delete:!0},settings:{view:!0,create:!0,edit:!0,delete:!0},vehicles:{view:!0,create:!0,edit:!0,delete:!0},communications:{view:!0,create:!0,edit:!0,delete:!0},users:{view:!0,create:!0,edit:!0,delete:!0},organization:{view:!0,create:!1,edit:!0,delete:!1}},manager:{clients:{view:!0,create:!0,edit:!0,delete:!0},technicians:{view:!0,create:!0,edit:!0,delete:!1},projects:{view:!0,create:!0,edit:!0,delete:!0},maintenance:{view:!0,create:!0,edit:!0,delete:!0},repairs:{view:!0,create:!0,edit:!0,delete:!0},invoices:{view:!0,create:!0,edit:!0,delete:!1},inventory:{view:!0,create:!0,edit:!0,delete:!0},reports:{view:!0,create:!0,edit:!0,delete:!0},settings:{view:!0,create:!1,edit:!0,delete:!1},vehicles:{view:!0,create:!0,edit:!0,delete:!1},communications:{view:!0,create:!0,edit:!0,delete:!0},users:{view:!0,create:!0,edit:!0,delete:!1},organization:{view:!0,create:!1,edit:!1,delete:!1}},office_staff:{clients:{view:!0,create:!0,edit:!0,delete:!1},technicians:{view:!0,create:!1,edit:!1,delete:!1},projects:{view:!0,create:!0,edit:!0,delete:!1},maintenance:{view:!0,create:!0,edit:!0,delete:!1},repairs:{view:!0,create:!0,edit:!0,delete:!1},invoices:{view:!0,create:!0,edit:!0,delete:!1},inventory:{view:!0,create:!0,edit:!0,delete:!1},reports:{view:!0,create:!0,edit:!0,delete:!1},settings:{view:!1,create:!1,edit:!1,delete:!1},vehicles:{view:!0,create:!1,edit:!1,delete:!1},communications:{view:!0,create:!0,edit:!0,delete:!1},users:{view:!0,create:!1,edit:!1,delete:!1},organization:{view:!0,create:!1,edit:!1,delete:!1}},technician:{clients:{view:!0,create:!1,edit:!1,delete:!1},technicians:{view:!0,create:!1,edit:!1,delete:!1},projects:{view:!0,create:!1,edit:!0,delete:!1},maintenance:{view:!0,create:!0,edit:!0,delete:!1},repairs:{view:!0,create:!0,edit:!0,delete:!1},invoices:{view:!0,create:!1,edit:!1,delete:!1},inventory:{view:!0,create:!1,edit:!0,delete:!1},reports:{view:!0,create:!0,edit:!0,delete:!1},settings:{view:!1,create:!1,edit:!1,delete:!1},vehicles:{view:!0,create:!1,edit:!1,delete:!1},communications:{view:!0,create:!0,edit:!1,delete:!1},users:{view:!1,create:!1,edit:!1,delete:!1},organization:{view:!1,create:!1,edit:!1,delete:!1}},client:{clients:{view:!0,create:!1,edit:!0,delete:!1},technicians:{view:!0,create:!1,edit:!1,delete:!1},projects:{view:!0,create:!1,edit:!1,delete:!1},maintenance:{view:!0,create:!1,edit:!1,delete:!1},repairs:{view:!0,create:!0,edit:!1,delete:!1},invoices:{view:!0,create:!1,edit:!1,delete:!1},inventory:{view:!1,create:!1,edit:!1,delete:!1},reports:{view:!0,create:!1,edit:!1,delete:!1},settings:{view:!1,create:!1,edit:!1,delete:!1},vehicles:{view:!1,create:!1,edit:!1,delete:!1},communications:{view:!0,create:!0,edit:!1,delete:!1},users:{view:!1,create:!1,edit:!1,delete:!1},organization:{view:!1,create:!1,edit:!1,delete:!1}}};function pJ(t,e,s){if(!t)return!1;try{return ow[t]?ow[t][e]?ow[t][e][s]||!1:(console.warn(`Unknown resource: ${e} for role: ${t}`),!1):(console.warn(`Unknown role: ${t}`),!1)}catch(r){return console.error("Error checking permissions:",r),!1}}function j4(t,e){return!t||!t.role?!1:!e||e.length===0||t.role==="system_admin"||t.role==="admin"?!0:e.every(([s,r])=>pJ(t.role,s,r))}const gJ=({children:t,roles:e=[],permissions:s=[]})=>{const{isAuthenticated:r,isLoading:i,user:a}=Kr(),[,o]=_n(),[c]=_n(),[d,h]=y.useState(0);if(y.useState(0),y.useEffect(()=>{if(!i){if(!r){console.log("ProtectedRoute: Not authenticated, allowing access to the route to show login card");return}if(r&&d>0&&h(0),r&&a){let g=!1;s.length>0?j4(a,s)||(g=!0,console.warn(`Access denied for user ${a.username} (ID: ${a.id}) with role ${a.role} - required permissions:`,s.map(([m,p])=>`${p} ${m}`).join(", "))):e.length>0&&!e.includes(a.role)&&(g=!0,console.warn(`Access denied for user ${a.username} (ID: ${a.id}) with role ${a.role} - required roles:`,e)),g&&o("/unauthorized")}console.log("ProtectedRoute: Auth state changed",{isAuthenticated:r,isLoading:i,hasUser:!!a,location:c,isOAuthRoute:!1})}},[i,r,a,c,o,s,e]),i)return console.log("ProtectedRoute: Auth is loading but showing content to prevent getting stuck"),n.jsx(n.Fragment,{children:t});if(r&&a){const g=e.length===0||e.includes(a.role),m=s.length===0||j4(a,s);if(g&&m)return c==="/"||c===""?(console.log("ProtectedRoute: On root path and authenticated, redirecting to dashboard"),o("/dashboard"),n.jsx(Kt,{className:"h-12 w-12 animate-spin text-primary"})):c==="/dashboard"&&document.querySelector('[data-testid="404-not-found"]')?(console.log("ProtectedRoute: Found 404 on dashboard page, refreshing"),window.location.reload(),n.jsx(Kt,{className:"h-12 w-12 animate-spin text-primary"})):n.jsx(n.Fragment,{children:t})}return n.jsx(n.Fragment,{children:t})},ve=y.forwardRef(({className:t,type:e,...s},r)=>n.jsx("input",{type:e,className:we("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s}));ve.displayName="Input";const Ae=y.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:we("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Ae.displayName="Card";const Be=y.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:we("flex flex-col space-y-1.5 p-6",t),...e}));Be.displayName="CardHeader";const Ve=y.forwardRef(({className:t,...e},s)=>n.jsx("h3",{ref:s,className:we("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ve.displayName="CardTitle";const ct=y.forwardRef(({className:t,...e},s)=>n.jsx("p",{ref:s,className:we("text-sm text-muted-foreground",t),...e}));ct.displayName="CardDescription";const Ee=y.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:we("p-6 pt-0",t),...e}));Ee.displayName="CardContent";const Pn=y.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:we("flex items-center p-6 pt-0",t),...e}));Pn.displayName="CardFooter";function _e({className:t,...e}){return n.jsx("div",{className:we("animate-pulse rounded-md bg-muted",t),...e})}function vx({title:t,value:e,changeText:s,changeType:r,icon:i,iconBgColor:a}){const o={increase:"text-green-600",decrease:"text-red-600",neutral:"text-gray-500"}[r],c={increase:EG,decrease:SG,neutral:gL}[r];return n.jsxs(Ae,{children:[n.jsxs(Be,{className:"flex flex-row items-center justify-between pb-2",children:[n.jsx(Ve,{className:"text-sm font-medium text-gray-500",children:t}),n.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center ${a}`,children:i})]}),n.jsxs(Ee,{children:[n.jsx("div",{className:"text-2xl font-bold",children:e}),n.jsxs("div",{className:"flex items-center mt-1",children:[n.jsx(c,{className:`h-4 w-4 ${o} mr-1`}),n.jsx("p",{className:`text-xs ${o}`,children:s})]})]})]})}function Vc(t){switch(t.toLowerCase()){case"planning":return{bg:"bg-blue-100",text:"text-blue-800"};case"in_progress":return{bg:"bg-amber-100",text:"text-amber-800"};case"on_hold":return{bg:"bg-orange-100",text:"text-orange-800"};case"completed":return{bg:"bg-green-100",text:"text-green-800"};case"cancelled":return{bg:"bg-red-100",text:"text-red-800"};default:return{bg:"bg-gray-100",text:"text-gray-800"}}}function ln(t){if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid date"}}function Ic(t){return t==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(t)}function wl(t){switch(t.toLowerCase()){case"low":return{bg:"bg-blue-100",text:"text-blue-800"};case"medium":return{bg:"bg-amber-100",text:"text-amber-800"};case"high":return{bg:"bg-orange-100",text:"text-orange-800"};case"urgent":return{bg:"bg-red-100",text:"text-red-800"};default:return{bg:"bg-gray-100",text:"text-gray-800"}}}const xJ=mg("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ze({className:t,variant:e,...s}){return n.jsx("div",{className:we(xJ({variant:e}),t),...s})}function zn(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function na(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Ii(t,e){const s=zn(t);return isNaN(e)?na(t,NaN):(e&&s.setDate(s.getDate()+e),s)}function Ea(t,e){const s=zn(t);if(isNaN(e))return na(t,NaN);if(!e)return s;const r=s.getDate(),i=na(t,s.getTime());i.setMonth(s.getMonth()+e+1,0);const a=i.getDate();return r>=a?i:(s.setFullYear(i.getFullYear(),i.getMonth(),r),s)}const _2=6048e5,vJ=864e5,W5=6e4,H5=36e5;let yJ={};function wg(){return yJ}function rl(t,e){var c,d,h,g;const s=wg(),r=(e==null?void 0:e.weekStartsOn)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??s.weekStartsOn??((g=(h=s.locale)==null?void 0:h.options)==null?void 0:g.weekStartsOn)??0,i=zn(t),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function su(t){return rl(t,{weekStartsOn:1})}function q5(t){const e=zn(t),s=e.getFullYear(),r=na(t,0);r.setFullYear(s+1,0,4),r.setHours(0,0,0,0);const i=su(r),a=na(t,0);a.setFullYear(s,0,4),a.setHours(0,0,0,0);const o=su(a);return e.getTime()>=i.getTime()?s+1:e.getTime()>=o.getTime()?s:s-1}function rm(t){const e=zn(t);return e.setHours(0,0,0,0),e}function tv(t){const e=zn(t),s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return s.setUTCFullYear(e.getFullYear()),+t-+s}function Ko(t,e){const s=rm(t),r=rm(e),i=+s-tv(s),a=+r-tv(r);return Math.round((i-a)/vJ)}function wJ(t){const e=q5(t),s=na(t,0);return s.setFullYear(e,0,4),s.setHours(0,0,0,0),su(s)}function Fb(t,e){const s=e*7;return Ii(t,s)}function jJ(t,e){return Ea(t,e*12)}function bJ(t){let e;return t.forEach(function(s){const r=zn(s);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function NJ(t){let e;return t.forEach(s=>{const r=zn(s);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function CJ(t){return na(t,Date.now())}function vi(t,e){const s=rm(t),r=rm(e);return+s==+r}function I2(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function SJ(t){if(!I2(t)&&typeof t!="number")return!1;const e=zn(t);return!isNaN(Number(e))}function Pp(t,e){const s=zn(t),r=zn(e),i=s.getFullYear()-r.getFullYear(),a=s.getMonth()-r.getMonth();return i*12+a}function AJ(t,e,s){const r=rl(t,s),i=rl(e,s),a=+r-tv(r),o=+i-tv(i);return Math.round((a-o)/_2)}function Dy(t){const e=zn(t),s=e.getMonth();return e.setFullYear(e.getFullYear(),s+1,0),e.setHours(23,59,59,999),e}function EJ(t,e){const s=zn(t.start),r=zn(t.end);let i=+s>+r;const a=i?+s:+r,o=i?r:s;o.setHours(0,0,0,0);let c=1;const d=[];for(;+o<=a;)d.push(zn(o)),o.setDate(o.getDate()+c),o.setHours(0,0,0,0);return i?d.reverse():d}function Pi(t){const e=zn(t);return e.setDate(1),e.setHours(0,0,0,0),e}function G5(t){const e=zn(t),s=na(t,0);return s.setFullYear(e.getFullYear(),0,1),s.setHours(0,0,0,0),s}function T2(t,e){var c,d,h,g;const s=wg(),r=(e==null?void 0:e.weekStartsOn)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??s.weekStartsOn??((g=(h=s.locale)==null?void 0:h.options)==null?void 0:g.weekStartsOn)??0,i=zn(t),a=i.getDay(),o=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function Y5(t){return T2(t,{weekStartsOn:1})}const _J={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},IJ=(t,e,s)=>{let r;const i=_J[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+r:r+" ago":r};function lw(t){return(e={})=>{const s=e.width?String(e.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const TJ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},MJ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},DJ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kJ={date:lw({formats:TJ,defaultWidth:"full"}),time:lw({formats:MJ,defaultWidth:"full"}),dateTime:lw({formats:DJ,defaultWidth:"full"})},PJ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},RJ=(t,e,s,r)=>PJ[t];function nf(t){return(e,s)=>{const r=s!=null&&s.context?String(s.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,c=s!=null&&s.width?String(s.width):o;i=t.formattingValues[c]||t.formattingValues[o]}else{const o=t.defaultWidth,c=s!=null&&s.width?String(s.width):t.defaultWidth;i=t.values[c]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const LJ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},OJ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},FJ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},BJ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},VJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},$J=(t,e)=>{const s=Number(t),r=s%100;if(r>20||r<10)switch(r%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},UJ={ordinalNumber:$J,era:nf({values:LJ,defaultWidth:"wide"}),quarter:nf({values:OJ,defaultWidth:"wide",argumentCallback:t=>t-1}),month:nf({values:FJ,defaultWidth:"wide"}),day:nf({values:BJ,defaultWidth:"wide"}),dayPeriod:nf({values:zJ,defaultWidth:"wide",formattingValues:VJ,defaultFormattingWidth:"wide"})};function sf(t){return(e,s={})=>{const r=s.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(c)?HJ(c,m=>m.test(o)):WJ(c,m=>m.test(o));let h;h=t.valueCallback?t.valueCallback(d):d,h=s.valueCallback?s.valueCallback(h):h;const g=e.slice(o.length);return{value:h,rest:g}}}function WJ(t,e){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return s}function HJ(t,e){for(let s=0;s<t.length;s++)if(e(t[s]))return s}function qJ(t){return(e,s={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=s.valueCallback?s.valueCallback(o):o;const c=e.slice(i.length);return{value:o,rest:c}}}const GJ=/^(\d+)(th|st|nd|rd)?/i,YJ=/\d+/i,KJ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ZJ={any:[/^b/i,/^(a|c)/i]},QJ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},XJ={any:[/1/i,/2/i,/3/i,/4/i]},JJ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},eee={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},tee={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nee={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},see={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ree={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},iee={ordinalNumber:qJ({matchPattern:GJ,parsePattern:YJ,valueCallback:t=>parseInt(t,10)}),era:sf({matchPatterns:KJ,defaultMatchWidth:"wide",parsePatterns:ZJ,defaultParseWidth:"any"}),quarter:sf({matchPatterns:QJ,defaultMatchWidth:"wide",parsePatterns:XJ,defaultParseWidth:"any",valueCallback:t=>t+1}),month:sf({matchPatterns:JJ,defaultMatchWidth:"wide",parsePatterns:eee,defaultParseWidth:"any"}),day:sf({matchPatterns:tee,defaultMatchWidth:"wide",parsePatterns:nee,defaultParseWidth:"any"}),dayPeriod:sf({matchPatterns:see,defaultMatchWidth:"any",parsePatterns:ree,defaultParseWidth:"any"})},K5={code:"en-US",formatDistance:IJ,formatLong:kJ,formatRelative:RJ,localize:UJ,match:iee,options:{weekStartsOn:0,firstWeekContainsDate:1}};function aee(t){const e=zn(t);return Ko(e,G5(e))+1}function Z5(t){const e=zn(t),s=+su(e)-+wJ(e);return Math.round(s/_2)+1}function Q5(t,e){var g,m,p,v;const s=zn(t),r=s.getFullYear(),i=wg(),a=(e==null?void 0:e.firstWeekContainsDate)??((m=(g=e==null?void 0:e.locale)==null?void 0:g.options)==null?void 0:m.firstWeekContainsDate)??i.firstWeekContainsDate??((v=(p=i.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)??1,o=na(t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const c=rl(o,e),d=na(t,0);d.setFullYear(r,0,a),d.setHours(0,0,0,0);const h=rl(d,e);return s.getTime()>=c.getTime()?r+1:s.getTime()>=h.getTime()?r:r-1}function oee(t,e){var c,d,h,g;const s=wg(),r=(e==null?void 0:e.firstWeekContainsDate)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(h=s.locale)==null?void 0:h.options)==null?void 0:g.firstWeekContainsDate)??1,i=Q5(t,e),a=na(t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),rl(a,e)}function X5(t,e){const s=zn(t),r=+rl(s,e)-+oee(s,e);return Math.round(r/_2)+1}function us(t,e){const s=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return s+r}const sc={y(t,e){const s=t.getFullYear(),r=s>0?s:1-s;return us(e==="yy"?r%100:r,e.length)},M(t,e){const s=t.getMonth();return e==="M"?String(s+1):us(s+1,2)},d(t,e){return us(t.getDate(),e.length)},a(t,e){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(t,e){return us(t.getHours()%12||12,e.length)},H(t,e){return us(t.getHours(),e.length)},m(t,e){return us(t.getMinutes(),e.length)},s(t,e){return us(t.getSeconds(),e.length)},S(t,e){const s=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,s-3));return us(i,e.length)}},ku={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},b4={G:function(t,e,s){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"});case"GGGGG":return s.era(r,{width:"narrow"});case"GGGG":default:return s.era(r,{width:"wide"})}},y:function(t,e,s){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return s.ordinalNumber(i,{unit:"year"})}return sc.y(t,e)},Y:function(t,e,s,r){const i=Q5(t,r),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return us(o,2)}return e==="Yo"?s.ordinalNumber(a,{unit:"year"}):us(a,e.length)},R:function(t,e){const s=q5(t);return us(s,e.length)},u:function(t,e){const s=t.getFullYear();return us(s,e.length)},Q:function(t,e,s){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return us(r,2);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,s){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return us(r,2);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,s){const r=t.getMonth();switch(e){case"M":case"MM":return sc.M(t,e);case"Mo":return s.ordinalNumber(r+1,{unit:"month"});case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,s){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return us(r+1,2);case"Lo":return s.ordinalNumber(r+1,{unit:"month"});case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,s,r){const i=X5(t,r);return e==="wo"?s.ordinalNumber(i,{unit:"week"}):us(i,e.length)},I:function(t,e,s){const r=Z5(t);return e==="Io"?s.ordinalNumber(r,{unit:"week"}):us(r,e.length)},d:function(t,e,s){return e==="do"?s.ordinalNumber(t.getDate(),{unit:"date"}):sc.d(t,e)},D:function(t,e,s){const r=aee(t);return e==="Do"?s.ordinalNumber(r,{unit:"dayOfYear"}):us(r,e.length)},E:function(t,e,s){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"});case"EEEE":default:return s.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,s,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return us(a,2);case"eo":return s.ordinalNumber(a,{unit:"day"});case"eee":return s.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(i,{width:"short",context:"formatting"});case"eeee":default:return s.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,s,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return us(a,e.length);case"co":return s.ordinalNumber(a,{unit:"day"});case"ccc":return s.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(i,{width:"narrow",context:"standalone"});case"cccccc":return s.day(i,{width:"short",context:"standalone"});case"cccc":default:return s.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,s){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return us(i,e.length);case"io":return s.ordinalNumber(i,{unit:"day"});case"iii":return s.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(r,{width:"short",context:"formatting"});case"iiii":default:return s.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,s){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,s){const r=t.getHours();let i;switch(r===12?i=ku.noon:r===0?i=ku.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,s){const r=t.getHours();let i;switch(r>=17?i=ku.evening:r>=12?i=ku.afternoon:r>=4?i=ku.morning:i=ku.night,e){case"B":case"BB":case"BBB":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,s){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),s.ordinalNumber(r,{unit:"hour"})}return sc.h(t,e)},H:function(t,e,s){return e==="Ho"?s.ordinalNumber(t.getHours(),{unit:"hour"}):sc.H(t,e)},K:function(t,e,s){const r=t.getHours()%12;return e==="Ko"?s.ordinalNumber(r,{unit:"hour"}):us(r,e.length)},k:function(t,e,s){let r=t.getHours();return r===0&&(r=24),e==="ko"?s.ordinalNumber(r,{unit:"hour"}):us(r,e.length)},m:function(t,e,s){return e==="mo"?s.ordinalNumber(t.getMinutes(),{unit:"minute"}):sc.m(t,e)},s:function(t,e,s){return e==="so"?s.ordinalNumber(t.getSeconds(),{unit:"second"}):sc.s(t,e)},S:function(t,e){return sc.S(t,e)},X:function(t,e,s){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return C4(r);case"XXXX":case"XX":return Nd(r);case"XXXXX":case"XXX":default:return Nd(r,":")}},x:function(t,e,s){const r=t.getTimezoneOffset();switch(e){case"x":return C4(r);case"xxxx":case"xx":return Nd(r);case"xxxxx":case"xxx":default:return Nd(r,":")}},O:function(t,e,s){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+N4(r,":");case"OOOO":default:return"GMT"+Nd(r,":")}},z:function(t,e,s){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+N4(r,":");case"zzzz":default:return"GMT"+Nd(r,":")}},t:function(t,e,s){const r=Math.trunc(t.getTime()/1e3);return us(r,e.length)},T:function(t,e,s){const r=t.getTime();return us(r,e.length)}};function N4(t,e=""){const s=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?s+String(i):s+String(i)+e+us(a,2)}function C4(t,e){return t%60===0?(t>0?"-":"+")+us(Math.abs(t)/60,2):Nd(t,e)}function Nd(t,e=""){const s=t>0?"-":"+",r=Math.abs(t),i=us(Math.trunc(r/60),2),a=us(r%60,2);return s+i+e+a}const S4=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},J5=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},lee=(t,e)=>{const s=t.match(/(P+)(p+)?/)||[],r=s[1],i=s[2];if(!i)return S4(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",S4(r,e)).replace("{{time}}",J5(i,e))},cee={p:J5,P:lee},dee=/^D+$/,uee=/^Y+$/,hee=["D","DD","YY","YYYY"];function mee(t){return dee.test(t)}function fee(t){return uee.test(t)}function pee(t,e,s){const r=gee(t,e,s);if(console.warn(r),hee.includes(t))throw new RangeError(r)}function gee(t,e,s){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const xee=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vee=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yee=/^'([^]*?)'?$/,wee=/''/g,jee=/[a-zA-Z]/;function ft(t,e,s){var g,m,p,v,j,N,E,_;const r=wg(),i=(s==null?void 0:s.locale)??r.locale??K5,a=(s==null?void 0:s.firstWeekContainsDate)??((m=(g=s==null?void 0:s.locale)==null?void 0:g.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((v=(p=r.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)??1,o=(s==null?void 0:s.weekStartsOn)??((N=(j=s==null?void 0:s.locale)==null?void 0:j.options)==null?void 0:N.weekStartsOn)??r.weekStartsOn??((_=(E=r.locale)==null?void 0:E.options)==null?void 0:_.weekStartsOn)??0,c=zn(t);if(!SJ(c))throw new RangeError("Invalid time value");let d=e.match(vee).map(S=>{const C=S[0];if(C==="p"||C==="P"){const I=cee[C];return I(S,i.formatLong)}return S}).join("").match(xee).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const C=S[0];if(C==="'")return{isToken:!1,value:bee(S)};if(b4[C])return{isToken:!0,value:S};if(C.match(jee))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:S}});i.localize.preprocessor&&(d=i.localize.preprocessor(c,d));const h={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return d.map(S=>{if(!S.isToken)return S.value;const C=S.value;(!(s!=null&&s.useAdditionalWeekYearTokens)&&fee(C)||!(s!=null&&s.useAdditionalDayOfYearTokens)&&mee(C))&&pee(C,e,String(t));const I=b4[C[0]];return I(c,C,i.localize,h)}).join("")}function bee(t){const e=t.match(yee);return e?e[1].replace(wee,"'"):t}function Nee(t){const e=zn(t),s=e.getFullYear(),r=e.getMonth(),i=na(t,0);return i.setFullYear(s,r+1,0),i.setHours(0,0,0,0),i.getDate()}function Cee(t){return Math.trunc(+zn(t)/1e3)}function See(t){const e=zn(t),s=e.getMonth();return e.setFullYear(e.getFullYear(),s+1,0),e.setHours(0,0,0,0),e}function Aee(t,e){return AJ(See(t),Pi(t),e)+1}function Bb(t,e){const s=zn(t),r=zn(e);return s.getTime()>r.getTime()}function e6(t,e){const s=zn(t),r=zn(e);return+s<+r}function Rp(t,e){const s=zn(t),r=zn(e);return s.getFullYear()===r.getFullYear()&&s.getMonth()===r.getMonth()}function Eee(t,e){const s=zn(t),r=zn(e);return s.getFullYear()===r.getFullYear()}function _ee(t){return vi(t,CJ(t))}function cw(t,e){return Ii(t,-e)}function Oa(t,e){const r=Dee(t);let i;if(r.date){const d=kee(r.date,2);i=Pee(d.restDateString,d.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const a=i.getTime();let o=0,c;if(r.time&&(o=Ree(r.time),isNaN(o)))return new Date(NaN);if(r.timezone){if(c=Lee(r.timezone),isNaN(c))return new Date(NaN)}else{const d=new Date(a+o),h=new Date(0);return h.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),h}return new Date(a+o+c)}const yx={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Iee=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Tee=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Mee=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Dee(t){const e={},s=t.split(yx.dateTimeDelimiter);let r;if(s.length>2)return e;if(/:/.test(s[0])?r=s[0]:(e.date=s[0],r=s[1],yx.timeZoneDelimiter.test(e.date)&&(e.date=t.split(yx.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=yx.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function kee(t,e){const s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(s);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?i:a*100,restDateString:t.slice((r[1]||r[2]).length)}}function Pee(t,e){if(e===null)return new Date(NaN);const s=t.match(Iee);if(!s)return new Date(NaN);const r=!!s[4],i=rf(s[1]),a=rf(s[2])-1,o=rf(s[3]),c=rf(s[4]),d=rf(s[5])-1;if(r)return Vee(e,c,d)?Oee(e,c,d):new Date(NaN);{const h=new Date(0);return!Bee(e,a,o)||!zee(e,i)?new Date(NaN):(h.setUTCFullYear(e,a,Math.max(i,o)),h)}}function rf(t){return t?parseInt(t):1}function Ree(t){const e=t.match(Tee);if(!e)return NaN;const s=dw(e[1]),r=dw(e[2]),i=dw(e[3]);return $ee(s,r,i)?s*H5+r*W5+i*1e3:NaN}function dw(t){return t&&parseFloat(t.replace(",","."))||0}function Lee(t){if(t==="Z")return 0;const e=t.match(Mee);if(!e)return 0;const s=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Uee(r,i)?s*(r*H5+i*W5):NaN}function Oee(t,e,s){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,a=(e-1)*7+s+1-i;return r.setUTCDate(r.getUTCDate()+a),r}const Fee=[31,null,31,30,31,30,31,31,30,31,30,31];function t6(t){return t%400===0||t%4===0&&t%100!==0}function Bee(t,e,s){return e>=0&&e<=11&&s>=1&&s<=(Fee[e]||(t6(t)?29:28))}function zee(t,e){return e>=1&&e<=(t6(t)?366:365)}function Vee(t,e,s){return e>=1&&e<=53&&s>=0&&s<=6}function $ee(t,e,s){return t===24?e===0&&s===0:s>=0&&s<60&&e>=0&&e<60&&t>=0&&t<25}function Uee(t,e){return e>=0&&e<=59}function uw(t,e){const s=zn(t),r=s.getFullYear(),i=s.getDate(),a=na(t,0);a.setFullYear(r,e,15),a.setHours(0,0,0,0);const o=Nee(a);return s.setMonth(e,Math.min(i,o)),s}function A4(t,e){const s=zn(t);return isNaN(+s)?na(t,NaN):(s.setFullYear(e),s)}function Wee(t,e){return Ea(t,-e)}function Hee({project:t}){const e=Vc(t.status),s=new Date(t.startDate),r=t.estimatedCompletionDate?new Date(t.estimatedCompletionDate):null,i=r?`${ft(s,"MMM d")} - ${ft(r,"MMM d, yyyy")}`:`${ft(s,"MMM d, yyyy")}`,a=t.completion||0;return n.jsxs(Ae,{className:"overflow-hidden",children:[n.jsxs(Be,{className:"pb-2",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsx(Ve,{className:"text-lg font-semibold",children:t.name}),n.jsx(Ze,{className:`${e.bg} ${e.text}`,children:t.status.replace("_"," ").split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")})]}),n.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[t.client.user.name,t.client.companyName&&` (${t.client.companyName})`]})]}),n.jsx(Ee,{className:"pb-2",children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{children:n.jsx("p",{className:"text-sm text-gray-500",children:t.description})}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:n.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${a}%`}})}),n.jsxs("span",{className:"text-xs font-medium text-gray-500 ml-2",children:[a,"%"]})]}),n.jsxs("div",{className:"flex items-center space-x-3 pt-1",children:[n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(GC,{className:"h-4 w-4 text-gray-400 mr-1"}),n.jsx("span",{className:"text-gray-600",children:i})]}),n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(yi,{className:"h-4 w-4 text-gray-400 mr-1"}),n.jsxs("span",{className:"text-gray-600",children:[t.assignments&&t.assignments.length||0," Team members"]})]})]})]})}),n.jsxs(Pn,{className:"pt-1 justify-between items-center",children:[n.jsx("div",{className:"flex space-x-1",children:t.budget&&n.jsxs(Ze,{variant:"outline",className:"text-xs",children:["$",t.budget.toLocaleString()]})}),n.jsxs(H,{variant:"ghost",size:"sm",className:"gap-1",children:[n.jsx("span",{children:"View Details"}),n.jsx(AG,{className:"h-3 w-3"})]})]})]})}function qee({maintenance:t}){var s;const e=Vc(t.status);return n.jsxs(Ae,{className:"bg-white overflow-hidden",children:[n.jsx(Be,{className:"p-4 pb-2 flex-row justify-between items-start gap-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"font-medium",children:t.type}),n.jsx(Ze,{className:`${e.bg} ${e.text}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),n.jsx("p",{className:"text-sm text-gray-500",children:t.client.user.name})]})}),n.jsxs(Ee,{className:"p-4 pt-0 pb-3",children:[n.jsxs("div",{className:"flex flex-col space-y-1.5 mt-2",children:[n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(tn,{className:"h-4 w-4 text-gray-400 mr-2"}),n.jsx("span",{children:ln(t.scheduleDate)})]}),n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(Ur,{className:"h-4 w-4 text-gray-400 mr-2"}),n.jsx("span",{children:"Time varies"})]}),n.jsxs("div",{className:"flex items-start text-sm",children:[n.jsx(bi,{className:"h-4 w-4 text-gray-400 mr-2 mt-0.5"}),n.jsx("span",{children:t.client.user.address||t.client.address||((s=t.client.client)==null?void 0:s.address)||"No address"})]})]}),t.notes&&n.jsx("div",{className:"text-sm mt-3 text-gray-600",children:t.notes})]}),n.jsxs(Pn,{className:"p-4 pt-0 flex justify-between items-center",children:[n.jsx("div",{className:"text-sm text-gray-500",children:t.technician?n.jsxs("span",{children:["Assigned to: ",t.technician.user.name]}):n.jsx("span",{children:"Not assigned"})}),n.jsx(H,{variant:"ghost",size:"sm",children:"Details"})]})]})}var jg=t=>t.type==="checkbox",Pd=t=>t instanceof Date,Ti=t=>t==null;const n6=t=>typeof t=="object";var gr=t=>!Ti(t)&&!Array.isArray(t)&&n6(t)&&!Pd(t),s6=t=>gr(t)&&t.target?jg(t.target)?t.target.checked:t.target.value:t,Gee=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,r6=(t,e)=>t.has(Gee(e)),Yee=t=>{const e=t.constructor&&t.constructor.prototype;return gr(e)&&e.hasOwnProperty("isPrototypeOf")},M2=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Tr(t){let e;const s=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(M2&&(t instanceof Blob||t instanceof FileList))&&(s||gr(t)))if(e=s?[]:{},!s&&!Yee(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=Tr(t[r]));else return t;return e}var bg=t=>Array.isArray(t)?t.filter(Boolean):[],Ss=t=>t===void 0,lt=(t,e,s)=>{if(!e||!gr(t))return s;const r=bg(e.split(/[,[\].]+?/)).reduce((i,a)=>Ti(i)?i:i[a],t);return Ss(r)||r===t?Ss(t[e])?s:t[e]:r},Wa=t=>typeof t=="boolean",D2=t=>/^\w*$/.test(t),i6=t=>bg(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ss=(t,e,s)=>{let r=-1;const i=D2(e)?[e]:i6(e),a=i.length,o=a-1;for(;++r<a;){const c=i[r];let d=s;if(r!==o){const h=t[c];d=gr(h)||Array.isArray(h)?h:isNaN(+i[r+1])?{}:[]}if(c==="__proto__")return;t[c]=d,t=t[c]}return t};const nv={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ya={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},pl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},a6=Ne.createContext(null),Ng=()=>Ne.useContext(a6),Kee=t=>{const{children:e,...s}=t;return Ne.createElement(a6.Provider,{value:s},e)};var o6=(t,e,s,r=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const o=a;return e._proxyFormState[o]!==Ya.all&&(e._proxyFormState[o]=!r||Ya.all),s&&(s[o]=!0),t[o]}});return i},Ei=t=>gr(t)&&!Object.keys(t).length,l6=(t,e,s,r)=>{s(t);const{name:i,...a}=t;return Ei(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!r||Ya.all))},Qi=t=>Array.isArray(t)?t:[t],c6=(t,e,s)=>!t||!e||t===e||Qi(t).some(r=>r&&(s?r===e:r.startsWith(e)||e.startsWith(r)));function ky(t){const e=Ne.useRef(t);e.current=t,Ne.useEffect(()=>{const s=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{s&&s.unsubscribe()}},[t.disabled])}function Zee(t){const e=Ng(),{control:s=e.control,disabled:r,name:i,exact:a}=t||{},[o,c]=Ne.useState(s._formState),d=Ne.useRef(!0),h=Ne.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),g=Ne.useRef(i);return g.current=i,ky({disabled:r,next:m=>d.current&&c6(g.current,m.name,a)&&l6(m,h.current,s._updateFormState)&&c({...s._formState,...m}),subject:s._subjects.state}),Ne.useEffect(()=>(d.current=!0,h.current.isValid&&s._updateValid(!0),()=>{d.current=!1}),[s]),o6(o,s,h.current,!1)}var Zo=t=>typeof t=="string",d6=(t,e,s,r,i)=>Zo(t)?(r&&e.watch.add(t),lt(s,t,i)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),lt(s,a))):(r&&(e.watchAll=!0),s);function Qee(t){const e=Ng(),{control:s=e.control,name:r,defaultValue:i,disabled:a,exact:o}=t||{},c=Ne.useRef(r);c.current=r,ky({disabled:a,subject:s._subjects.values,next:g=>{c6(c.current,g.name,o)&&h(Tr(d6(c.current,s._names,g.values||s._formValues,!1,i)))}});const[d,h]=Ne.useState(s._getWatch(r,i));return Ne.useEffect(()=>s._removeUnmounted()),d}function Xee(t){const e=Ng(),{name:s,disabled:r,control:i=e.control,shouldUnregister:a}=t,o=r6(i._names.array,s),c=Qee({control:i,name:s,defaultValue:lt(i._formValues,s,lt(i._defaultValues,s,t.defaultValue)),exact:!0}),d=Zee({control:i,name:s,exact:!0}),h=Ne.useRef(i.register(s,{...t.rules,value:c,...Wa(t.disabled)?{disabled:t.disabled}:{}}));return Ne.useEffect(()=>{const g=i._options.shouldUnregister||a,m=(p,v)=>{const j=lt(i._fields,p);j&&j._f&&(j._f.mount=v)};if(m(s,!0),g){const p=Tr(lt(i._options.defaultValues,s));ss(i._defaultValues,s,p),Ss(lt(i._formValues,s))&&ss(i._formValues,s,p)}return()=>{(o?g&&!i._state.action:g)?i.unregister(s):m(s,!1)}},[s,i,o,a]),Ne.useEffect(()=>{lt(i._fields,s)&&i._updateDisabledField({disabled:r,fields:i._fields,name:s,value:lt(i._fields,s)._f.value})},[r,s,i]),{field:{name:s,value:c,...Wa(r)||d.disabled?{disabled:d.disabled||r}:{},onChange:Ne.useCallback(g=>h.current.onChange({target:{value:s6(g),name:s},type:nv.CHANGE}),[s]),onBlur:Ne.useCallback(()=>h.current.onBlur({target:{value:lt(i._formValues,s),name:s},type:nv.BLUR}),[s,i]),ref:Ne.useCallback(g=>{const m=lt(i._fields,s);m&&g&&(m._f.ref={focus:()=>g.focus(),select:()=>g.select(),setCustomValidity:p=>g.setCustomValidity(p),reportValidity:()=>g.reportValidity()})},[i._fields,s])},formState:d,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!lt(d.errors,s)},isDirty:{enumerable:!0,get:()=>!!lt(d.dirtyFields,s)},isTouched:{enumerable:!0,get:()=>!!lt(d.touchedFields,s)},isValidating:{enumerable:!0,get:()=>!!lt(d.validatingFields,s)},error:{enumerable:!0,get:()=>lt(d.errors,s)}})}}const Jee=t=>t.render(Xee(t));var u6=(t,e,s,r,i)=>e?{...s[t],types:{...s[t]&&s[t].types?s[t].types:{},[r]:i||!0}}:{},rc=()=>{const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const s=(Math.random()*16+t)%16|0;return(e=="x"?s:s&3|8).toString(16)})},hw=(t,e,s={})=>s.shouldFocus||Ss(s.shouldFocus)?s.focusName||`${t}.${Ss(s.focusIndex)?e:s.focusIndex}.`:"",Jf=t=>({isOnSubmit:!t||t===Ya.onSubmit,isOnBlur:t===Ya.onBlur,isOnChange:t===Ya.onChange,isOnAll:t===Ya.all,isOnTouch:t===Ya.onTouched}),zb=(t,e,s)=>!s&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const wh=(t,e,s,r)=>{for(const i of s||Object.keys(t)){const a=lt(t,i);if(a){const{_f:o,...c}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(wh(c,e))break}else if(gr(c)&&wh(c,e))break}}};var h6=(t,e,s)=>{const r=Qi(lt(t,s));return ss(r,"root",e[s]),ss(t,s,r),t},k2=t=>t.type==="file",Ml=t=>typeof t=="function",sv=t=>{if(!M2)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Jx=t=>Zo(t),P2=t=>t.type==="radio",rv=t=>t instanceof RegExp;const E4={value:!1,isValid:!1},_4={value:!0,isValid:!0};var m6=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ss(t[0].attributes.value)?Ss(t[0].value)||t[0].value===""?_4:{value:t[0].value,isValid:!0}:_4:E4}return E4};const I4={isValid:!1,value:null};var f6=t=>Array.isArray(t)?t.reduce((e,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:e,I4):I4;function T4(t,e,s="validate"){if(Jx(t)||Array.isArray(t)&&t.every(Jx)||Wa(t)&&!t)return{type:s,message:Jx(t)?t:"",ref:e}}var Pu=t=>gr(t)&&!rv(t)?t:{value:t,message:""},Vb=async(t,e,s,r,i)=>{const{ref:a,refs:o,required:c,maxLength:d,minLength:h,min:g,max:m,pattern:p,validate:v,name:j,valueAsNumber:N,mount:E,disabled:_}=t._f,S=lt(e,j);if(!E||_)return{};const C=o?o[0]:a,I=B=>{r&&C.reportValidity&&(C.setCustomValidity(Wa(B)?"":B||""),C.reportValidity())},P={},L=P2(a),T=jg(a),M=L||T,k=(N||k2(a))&&Ss(a.value)&&Ss(S)||sv(a)&&a.value===""||S===""||Array.isArray(S)&&!S.length,O=u6.bind(null,j,s,P),V=(B,Y,z,G=pl.maxLength,he=pl.minLength)=>{const le=B?Y:z;P[j]={type:B?G:he,message:le,ref:a,...O(B?G:he,le)}};if(i?!Array.isArray(S)||!S.length:c&&(!M&&(k||Ti(S))||Wa(S)&&!S||T&&!m6(o).isValid||L&&!f6(o).isValid)){const{value:B,message:Y}=Jx(c)?{value:!!c,message:c}:Pu(c);if(B&&(P[j]={type:pl.required,message:Y,ref:C,...O(pl.required,Y)},!s))return I(Y),P}if(!k&&(!Ti(g)||!Ti(m))){let B,Y;const z=Pu(m),G=Pu(g);if(!Ti(S)&&!isNaN(S)){const he=a.valueAsNumber||S&&+S;Ti(z.value)||(B=he>z.value),Ti(G.value)||(Y=he<G.value)}else{const he=a.valueAsDate||new Date(S),le=me=>new Date(new Date().toDateString()+" "+me),se=a.type=="time",re=a.type=="week";Zo(z.value)&&S&&(B=se?le(S)>le(z.value):re?S>z.value:he>new Date(z.value)),Zo(G.value)&&S&&(Y=se?le(S)<le(G.value):re?S<G.value:he<new Date(G.value))}if((B||Y)&&(V(!!B,z.message,G.message,pl.max,pl.min),!s))return I(P[j].message),P}if((d||h)&&!k&&(Zo(S)||i&&Array.isArray(S))){const B=Pu(d),Y=Pu(h),z=!Ti(B.value)&&S.length>+B.value,G=!Ti(Y.value)&&S.length<+Y.value;if((z||G)&&(V(z,B.message,Y.message),!s))return I(P[j].message),P}if(p&&!k&&Zo(S)){const{value:B,message:Y}=Pu(p);if(rv(B)&&!S.match(B)&&(P[j]={type:pl.pattern,message:Y,ref:a,...O(pl.pattern,Y)},!s))return I(Y),P}if(v){if(Ml(v)){const B=await v(S,e),Y=T4(B,C);if(Y&&(P[j]={...Y,...O(pl.validate,Y.message)},!s))return I(Y.message),P}else if(gr(v)){let B={};for(const Y in v){if(!Ei(B)&&!s)break;const z=T4(await v[Y](S,e),C,Y);z&&(B={...z,...O(Y,z.message)},I(z.message),s&&(P[j]=B))}if(!Ei(B)&&(P[j]={ref:C,...B},!s))return P}}return I(!0),P},mw=(t,e)=>[...t,...Qi(e)],fw=t=>Array.isArray(t)?t.map(()=>{}):void 0;function pw(t,e,s){return[...t.slice(0,e),...Qi(s),...t.slice(e)]}var gw=(t,e,s)=>Array.isArray(t)?(Ss(t[s])&&(t[s]=void 0),t.splice(s,0,t.splice(e,1)[0]),t):[],xw=(t,e)=>[...Qi(e),...Qi(t)];function ete(t,e){let s=0;const r=[...t];for(const i of e)r.splice(i-s,1),s++;return bg(r).length?r:[]}var vw=(t,e)=>Ss(e)?[]:ete(t,Qi(e).sort((s,r)=>s-r)),yw=(t,e,s)=>{[t[e],t[s]]=[t[s],t[e]]};function tte(t,e){const s=e.slice(0,-1).length;let r=0;for(;r<s;)t=Ss(t)?r++:t[e[r++]];return t}function nte(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ss(t[e]))return!1;return!0}function vr(t,e){const s=Array.isArray(e)?e:D2(e)?[e]:i6(e),r=s.length===1?t:tte(t,s),i=s.length-1,a=s[i];return r&&delete r[a],i!==0&&(gr(r)&&Ei(r)||Array.isArray(r)&&nte(r))&&vr(t,s.slice(0,-1)),t}var M4=(t,e,s)=>(t[e]=s,t);function ste(t){const e=Ng(),{control:s=e.control,name:r,keyName:i="id",shouldUnregister:a}=t,[o,c]=Ne.useState(s._getFieldArray(r)),d=Ne.useRef(s._getFieldArray(r).map(rc)),h=Ne.useRef(o),g=Ne.useRef(r),m=Ne.useRef(!1);g.current=r,h.current=o,s._names.array.add(r),t.rules&&s.register(r,t.rules),ky({next:({values:P,name:L})=>{if(L===g.current||!L){const T=lt(P,g.current);Array.isArray(T)&&(c(T),d.current=T.map(rc))}},subject:s._subjects.array});const p=Ne.useCallback(P=>{m.current=!0,s._updateFieldArray(r,P)},[s,r]),v=(P,L)=>{const T=Qi(Tr(P)),M=mw(s._getFieldArray(r),T);s._names.focus=hw(r,M.length-1,L),d.current=mw(d.current,T.map(rc)),p(M),c(M),s._updateFieldArray(r,M,mw,{argA:fw(P)})},j=(P,L)=>{const T=Qi(Tr(P)),M=xw(s._getFieldArray(r),T);s._names.focus=hw(r,0,L),d.current=xw(d.current,T.map(rc)),p(M),c(M),s._updateFieldArray(r,M,xw,{argA:fw(P)})},N=P=>{const L=vw(s._getFieldArray(r),P);d.current=vw(d.current,P),p(L),c(L),s._updateFieldArray(r,L,vw,{argA:P})},E=(P,L,T)=>{const M=Qi(Tr(L)),k=pw(s._getFieldArray(r),P,M);s._names.focus=hw(r,P,T),d.current=pw(d.current,P,M.map(rc)),p(k),c(k),s._updateFieldArray(r,k,pw,{argA:P,argB:fw(L)})},_=(P,L)=>{const T=s._getFieldArray(r);yw(T,P,L),yw(d.current,P,L),p(T),c(T),s._updateFieldArray(r,T,yw,{argA:P,argB:L},!1)},S=(P,L)=>{const T=s._getFieldArray(r);gw(T,P,L),gw(d.current,P,L),p(T),c(T),s._updateFieldArray(r,T,gw,{argA:P,argB:L},!1)},C=(P,L)=>{const T=Tr(L),M=M4(s._getFieldArray(r),P,T);d.current=[...M].map((k,O)=>!k||O===P?rc():d.current[O]),p(M),c([...M]),s._updateFieldArray(r,M,M4,{argA:P,argB:T},!0,!1)},I=P=>{const L=Qi(Tr(P));d.current=L.map(rc),p([...L]),c([...L]),s._updateFieldArray(r,[...L],T=>T,{},!0,!1)};return Ne.useEffect(()=>{if(s._state.action=!1,zb(r,s._names)&&s._subjects.state.next({...s._formState}),m.current&&(!Jf(s._options.mode).isOnSubmit||s._formState.isSubmitted))if(s._options.resolver)s._executeSchema([r]).then(P=>{const L=lt(P.errors,r),T=lt(s._formState.errors,r);(T?!L&&T.type||L&&(T.type!==L.type||T.message!==L.message):L&&L.type)&&(L?ss(s._formState.errors,r,L):vr(s._formState.errors,r),s._subjects.state.next({errors:s._formState.errors}))});else{const P=lt(s._fields,r);P&&P._f&&!(Jf(s._options.reValidateMode).isOnSubmit&&Jf(s._options.mode).isOnSubmit)&&Vb(P,s._formValues,s._options.criteriaMode===Ya.all,s._options.shouldUseNativeValidation,!0).then(L=>!Ei(L)&&s._subjects.state.next({errors:h6(s._formState.errors,L,r)}))}s._subjects.values.next({name:r,values:{...s._formValues}}),s._names.focus&&wh(s._fields,(P,L)=>{if(s._names.focus&&L.startsWith(s._names.focus)&&P.focus)return P.focus(),1}),s._names.focus="",s._updateValid(),m.current=!1},[o,r,s]),Ne.useEffect(()=>(!lt(s._formValues,r)&&s._updateFieldArray(r),()=>{(s._options.shouldUnregister||a)&&s.unregister(r)}),[r,s,i,a]),{swap:Ne.useCallback(_,[p,r,s]),move:Ne.useCallback(S,[p,r,s]),prepend:Ne.useCallback(j,[p,r,s]),append:Ne.useCallback(v,[p,r,s]),remove:Ne.useCallback(N,[p,r,s]),insert:Ne.useCallback(E,[p,r,s]),update:Ne.useCallback(C,[p,r,s]),replace:Ne.useCallback(I,[p,r,s]),fields:Ne.useMemo(()=>o.map((P,L)=>({...P,[i]:d.current[L]||rc()})),[o,i])}}var ww=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}},$b=t=>Ti(t)||!n6(t);function pc(t,e){if($b(t)||$b(e))return t===e;if(Pd(t)&&Pd(e))return t.getTime()===e.getTime();const s=Object.keys(t),r=Object.keys(e);if(s.length!==r.length)return!1;for(const i of s){const a=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(Pd(a)&&Pd(o)||gr(a)&&gr(o)||Array.isArray(a)&&Array.isArray(o)?!pc(a,o):a!==o)return!1}}return!0}var p6=t=>t.type==="select-multiple",rte=t=>P2(t)||jg(t),jw=t=>sv(t)&&t.isConnected,g6=t=>{for(const e in t)if(Ml(t[e]))return!0;return!1};function iv(t,e={}){const s=Array.isArray(t);if(gr(t)||s)for(const r in t)Array.isArray(t[r])||gr(t[r])&&!g6(t[r])?(e[r]=Array.isArray(t[r])?[]:{},iv(t[r],e[r])):Ti(t[r])||(e[r]=!0);return e}function x6(t,e,s){const r=Array.isArray(t);if(gr(t)||r)for(const i in t)Array.isArray(t[i])||gr(t[i])&&!g6(t[i])?Ss(e)||$b(s[i])?s[i]=Array.isArray(t[i])?iv(t[i],[]):{...iv(t[i])}:x6(t[i],Ti(e)?{}:e[i],s[i]):s[i]=!pc(t[i],e[i]);return s}var af=(t,e)=>x6(t,e,iv(e)),v6=(t,{valueAsNumber:e,valueAsDate:s,setValueAs:r})=>Ss(t)?t:e?t===""?NaN:t&&+t:s&&Zo(t)?new Date(t):r?r(t):t;function bw(t){const e=t.ref;if(!(t.refs?t.refs.every(s=>s.disabled):e.disabled))return k2(e)?e.files:P2(e)?f6(t.refs).value:p6(e)?[...e.selectedOptions].map(({value:s})=>s):jg(e)?m6(t.refs).value:v6(Ss(e.value)?t.ref.value:e.value,t)}var ite=(t,e,s,r)=>{const i={};for(const a of t){const o=lt(e,a);o&&ss(i,a,o._f)}return{criteriaMode:s,names:[...t],fields:i,shouldUseNativeValidation:r}},of=t=>Ss(t)?t:rv(t)?t.source:gr(t)?rv(t.value)?t.value.source:t.value:t;const D4="AsyncFunction";var ate=t=>(!t||!t.validate)&&!!(Ml(t.validate)&&t.validate.constructor.name===D4||gr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===D4)),ote=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function k4(t,e,s){const r=lt(t,s);if(r||D2(s))return{error:r,name:s};const i=s.split(".");for(;i.length;){const a=i.join("."),o=lt(e,a),c=lt(t,a);if(o&&!Array.isArray(o)&&s!==a)return{name:s};if(c&&c.type)return{name:a,error:c};i.pop()}return{name:s}}var lte=(t,e,s,r,i)=>i.isOnAll?!1:!s&&i.isOnTouch?!(e||t):(s?r.isOnBlur:i.isOnBlur)?!t:(s?r.isOnChange:i.isOnChange)?t:!0,cte=(t,e)=>!bg(lt(t,e)).length&&vr(t,e);const dte={mode:Ya.onSubmit,reValidateMode:Ya.onChange,shouldFocusError:!0};function ute(t={}){let e={...dte,...t},s={submitCount:0,isDirty:!1,isLoading:Ml(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=gr(e.defaultValues)||gr(e.values)?Tr(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Tr(i),o={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},d,h=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={values:ww(),array:ww(),state:ww()},p=Jf(e.mode),v=Jf(e.reValidateMode),j=e.criteriaMode===Ya.all,N=ce=>be=>{clearTimeout(h),h=setTimeout(ce,be)},E=async ce=>{if(!t.disabled&&(g.isValid||ce)){const be=e.resolver?Ei((await M()).errors):await O(r,!0);be!==s.isValid&&m.state.next({isValid:be})}},_=(ce,be)=>{!t.disabled&&(g.isValidating||g.validatingFields)&&((ce||Array.from(c.mount)).forEach(ze=>{ze&&(be?ss(s.validatingFields,ze,be):vr(s.validatingFields,ze))}),m.state.next({validatingFields:s.validatingFields,isValidating:!Ei(s.validatingFields)}))},S=(ce,be=[],ze,Pe,Je=!0,Ke=!0)=>{if(Pe&&ze&&!t.disabled){if(o.action=!0,Ke&&Array.isArray(lt(r,ce))){const Nt=ze(lt(r,ce),Pe.argA,Pe.argB);Je&&ss(r,ce,Nt)}if(Ke&&Array.isArray(lt(s.errors,ce))){const Nt=ze(lt(s.errors,ce),Pe.argA,Pe.argB);Je&&ss(s.errors,ce,Nt),cte(s.errors,ce)}if(g.touchedFields&&Ke&&Array.isArray(lt(s.touchedFields,ce))){const Nt=ze(lt(s.touchedFields,ce),Pe.argA,Pe.argB);Je&&ss(s.touchedFields,ce,Nt)}g.dirtyFields&&(s.dirtyFields=af(i,a)),m.state.next({name:ce,isDirty:B(ce,be),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else ss(a,ce,be)},C=(ce,be)=>{ss(s.errors,ce,be),m.state.next({errors:s.errors})},I=ce=>{s.errors=ce,m.state.next({errors:s.errors,isValid:!1})},P=(ce,be,ze,Pe)=>{const Je=lt(r,ce);if(Je){const Ke=lt(a,ce,Ss(ze)?lt(i,ce):ze);Ss(Ke)||Pe&&Pe.defaultChecked||be?ss(a,ce,be?Ke:bw(Je._f)):G(ce,Ke),o.mount&&E()}},L=(ce,be,ze,Pe,Je)=>{let Ke=!1,Nt=!1;const dt={name:ce};if(!t.disabled){const Dt=!!(lt(r,ce)&&lt(r,ce)._f&&lt(r,ce)._f.disabled);if(!ze||Pe){g.isDirty&&(Nt=s.isDirty,s.isDirty=dt.isDirty=B(),Ke=Nt!==dt.isDirty);const At=Dt||pc(lt(i,ce),be);Nt=!!(!Dt&&lt(s.dirtyFields,ce)),At||Dt?vr(s.dirtyFields,ce):ss(s.dirtyFields,ce,!0),dt.dirtyFields=s.dirtyFields,Ke=Ke||g.dirtyFields&&Nt!==!At}if(ze){const At=lt(s.touchedFields,ce);At||(ss(s.touchedFields,ce,ze),dt.touchedFields=s.touchedFields,Ke=Ke||g.touchedFields&&At!==ze)}Ke&&Je&&m.state.next(dt)}return Ke?dt:{}},T=(ce,be,ze,Pe)=>{const Je=lt(s.errors,ce),Ke=g.isValid&&Wa(be)&&s.isValid!==be;if(t.delayError&&ze?(d=N(()=>C(ce,ze)),d(t.delayError)):(clearTimeout(h),d=null,ze?ss(s.errors,ce,ze):vr(s.errors,ce)),(ze?!pc(Je,ze):Je)||!Ei(Pe)||Ke){const Nt={...Pe,...Ke&&Wa(be)?{isValid:be}:{},errors:s.errors,name:ce};s={...s,...Nt},m.state.next(Nt)}},M=async ce=>{_(ce,!0);const be=await e.resolver(a,e.context,ite(ce||c.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return _(ce),be},k=async ce=>{const{errors:be}=await M(ce);if(ce)for(const ze of ce){const Pe=lt(be,ze);Pe?ss(s.errors,ze,Pe):vr(s.errors,ze)}else s.errors=be;return be},O=async(ce,be,ze={valid:!0})=>{for(const Pe in ce){const Je=ce[Pe];if(Je){const{_f:Ke,...Nt}=Je;if(Ke){const dt=c.array.has(Ke.name),Dt=Je._f&&ate(Je._f);Dt&&g.validatingFields&&_([Pe],!0);const At=await Vb(Je,a,j,e.shouldUseNativeValidation&&!be,dt);if(Dt&&g.validatingFields&&_([Pe]),At[Ke.name]&&(ze.valid=!1,be))break;!be&&(lt(At,Ke.name)?dt?h6(s.errors,At,Ke.name):ss(s.errors,Ke.name,At[Ke.name]):vr(s.errors,Ke.name))}!Ei(Nt)&&await O(Nt,be,ze)}}return ze.valid},V=()=>{for(const ce of c.unMount){const be=lt(r,ce);be&&(be._f.refs?be._f.refs.every(ze=>!jw(ze)):!jw(be._f.ref))&&ee(ce)}c.unMount=new Set},B=(ce,be)=>!t.disabled&&(ce&&be&&ss(a,ce,be),!pc(Ce(),i)),Y=(ce,be,ze)=>d6(ce,c,{...o.mount?a:Ss(be)?i:Zo(ce)?{[ce]:be}:be},ze,be),z=ce=>bg(lt(o.mount?a:i,ce,t.shouldUnregister?lt(i,ce,[]):[])),G=(ce,be,ze={})=>{const Pe=lt(r,ce);let Je=be;if(Pe){const Ke=Pe._f;Ke&&(!Ke.disabled&&ss(a,ce,v6(be,Ke)),Je=sv(Ke.ref)&&Ti(be)?"":be,p6(Ke.ref)?[...Ke.ref.options].forEach(Nt=>Nt.selected=Je.includes(Nt.value)):Ke.refs?jg(Ke.ref)?Ke.refs.length>1?Ke.refs.forEach(Nt=>(!Nt.defaultChecked||!Nt.disabled)&&(Nt.checked=Array.isArray(Je)?!!Je.find(dt=>dt===Nt.value):Je===Nt.value)):Ke.refs[0]&&(Ke.refs[0].checked=!!Je):Ke.refs.forEach(Nt=>Nt.checked=Nt.value===Je):k2(Ke.ref)?Ke.ref.value="":(Ke.ref.value=Je,Ke.ref.type||m.values.next({name:ce,values:{...a}})))}(ze.shouldDirty||ze.shouldTouch)&&L(ce,Je,ze.shouldTouch,ze.shouldDirty,!0),ze.shouldValidate&&me(ce)},he=(ce,be,ze)=>{for(const Pe in be){const Je=be[Pe],Ke=`${ce}.${Pe}`,Nt=lt(r,Ke);(c.array.has(ce)||gr(Je)||Nt&&!Nt._f)&&!Pd(Je)?he(Ke,Je,ze):G(Ke,Je,ze)}},le=(ce,be,ze={})=>{const Pe=lt(r,ce),Je=c.array.has(ce),Ke=Tr(be);ss(a,ce,Ke),Je?(m.array.next({name:ce,values:{...a}}),(g.isDirty||g.dirtyFields)&&ze.shouldDirty&&m.state.next({name:ce,dirtyFields:af(i,a),isDirty:B(ce,Ke)})):Pe&&!Pe._f&&!Ti(Ke)?he(ce,Ke,ze):G(ce,Ke,ze),zb(ce,c)&&m.state.next({...s}),m.values.next({name:o.mount?ce:void 0,values:{...a}})},se=async ce=>{o.mount=!0;const be=ce.target;let ze=be.name,Pe=!0;const Je=lt(r,ze),Ke=()=>be.type?bw(Je._f):s6(ce),Nt=dt=>{Pe=Number.isNaN(dt)||Pd(dt)&&isNaN(dt.getTime())||pc(dt,lt(a,ze,dt))};if(Je){let dt,Dt;const At=Ke(),qt=ce.type===nv.BLUR||ce.type===nv.FOCUS_OUT,Hn=!ote(Je._f)&&!e.resolver&&!lt(s.errors,ze)&&!Je._f.deps||lte(qt,lt(s.touchedFields,ze),s.isSubmitted,v,p),er=zb(ze,c,qt);ss(a,ze,At),qt?(Je._f.onBlur&&Je._f.onBlur(ce),d&&d(0)):Je._f.onChange&&Je._f.onChange(ce);const nn=L(ze,At,qt,!1),Bt=!Ei(nn)||er;if(!qt&&m.values.next({name:ze,type:ce.type,values:{...a}}),Hn)return g.isValid&&(t.mode==="onBlur"?qt&&E():E()),Bt&&m.state.next({name:ze,...er?{}:nn});if(!qt&&er&&m.state.next({...s}),e.resolver){const{errors:bn}=await M([ze]);if(Nt(At),Pe){const rt=k4(s.errors,r,ze),qn=k4(bn,r,rt.name||ze);dt=qn.error,ze=qn.name,Dt=Ei(bn)}}else _([ze],!0),dt=(await Vb(Je,a,j,e.shouldUseNativeValidation))[ze],_([ze]),Nt(At),Pe&&(dt?Dt=!1:g.isValid&&(Dt=await O(r,!0)));Pe&&(Je._f.deps&&me(Je._f.deps),T(ze,Dt,dt,nn))}},re=(ce,be)=>{if(lt(s.errors,be)&&ce.focus)return ce.focus(),1},me=async(ce,be={})=>{let ze,Pe;const Je=Qi(ce);if(e.resolver){const Ke=await k(Ss(ce)?ce:Je);ze=Ei(Ke),Pe=ce?!Je.some(Nt=>lt(Ke,Nt)):ze}else ce?(Pe=(await Promise.all(Je.map(async Ke=>{const Nt=lt(r,Ke);return await O(Nt&&Nt._f?{[Ke]:Nt}:Nt)}))).every(Boolean),!(!Pe&&!s.isValid)&&E()):Pe=ze=await O(r);return m.state.next({...!Zo(ce)||g.isValid&&ze!==s.isValid?{}:{name:ce},...e.resolver||!ce?{isValid:ze}:{},errors:s.errors}),be.shouldFocus&&!Pe&&wh(r,re,ce?Je:c.mount),Pe},Ce=ce=>{const be={...o.mount?a:i};return Ss(ce)?be:Zo(ce)?lt(be,ce):ce.map(ze=>lt(be,ze))},$=(ce,be)=>({invalid:!!lt((be||s).errors,ce),isDirty:!!lt((be||s).dirtyFields,ce),error:lt((be||s).errors,ce),isValidating:!!lt(s.validatingFields,ce),isTouched:!!lt((be||s).touchedFields,ce)}),xe=ce=>{ce&&Qi(ce).forEach(be=>vr(s.errors,be)),m.state.next({errors:ce?s.errors:{}})},te=(ce,be,ze)=>{const Pe=(lt(r,ce,{_f:{}})._f||{}).ref,Je=lt(s.errors,ce)||{},{ref:Ke,message:Nt,type:dt,...Dt}=Je;ss(s.errors,ce,{...Dt,...be,ref:Pe}),m.state.next({name:ce,errors:s.errors,isValid:!1}),ze&&ze.shouldFocus&&Pe&&Pe.focus&&Pe.focus()},ae=(ce,be)=>Ml(ce)?m.values.subscribe({next:ze=>ce(Y(void 0,be),ze)}):Y(ce,be,!0),ee=(ce,be={})=>{for(const ze of ce?Qi(ce):c.mount)c.mount.delete(ze),c.array.delete(ze),be.keepValue||(vr(r,ze),vr(a,ze)),!be.keepError&&vr(s.errors,ze),!be.keepDirty&&vr(s.dirtyFields,ze),!be.keepTouched&&vr(s.touchedFields,ze),!be.keepIsValidating&&vr(s.validatingFields,ze),!e.shouldUnregister&&!be.keepDefaultValue&&vr(i,ze);m.values.next({values:{...a}}),m.state.next({...s,...be.keepDirty?{isDirty:B()}:{}}),!be.keepIsValid&&E()},de=({disabled:ce,name:be,field:ze,fields:Pe,value:Je})=>{if(Wa(ce)&&o.mount||ce){const Ke=ce?void 0:Ss(Je)?bw(ze?ze._f:lt(Pe,be)._f):Je;ss(a,be,Ke),L(be,Ke,!1,!1,!0)}},pe=(ce,be={})=>{let ze=lt(r,ce);const Pe=Wa(be.disabled)||Wa(t.disabled);return ss(r,ce,{...ze||{},_f:{...ze&&ze._f?ze._f:{ref:{name:ce}},name:ce,mount:!0,...be}}),c.mount.add(ce),ze?de({field:ze,disabled:Wa(be.disabled)?be.disabled:t.disabled,name:ce,value:be.value}):P(ce,!0,be.value),{...Pe?{disabled:be.disabled||t.disabled}:{},...e.progressive?{required:!!be.required,min:of(be.min),max:of(be.max),minLength:of(be.minLength),maxLength:of(be.maxLength),pattern:of(be.pattern)}:{},name:ce,onChange:se,onBlur:se,ref:Je=>{if(Je){pe(ce,be),ze=lt(r,ce);const Ke=Ss(Je.value)&&Je.querySelectorAll&&Je.querySelectorAll("input,select,textarea")[0]||Je,Nt=rte(Ke),dt=ze._f.refs||[];if(Nt?dt.find(Dt=>Dt===Ke):Ke===ze._f.ref)return;ss(r,ce,{_f:{...ze._f,...Nt?{refs:[...dt.filter(jw),Ke,...Array.isArray(lt(i,ce))?[{}]:[]],ref:{type:Ke.type,name:ce}}:{ref:Ke}}}),P(ce,!1,void 0,Ke)}else ze=lt(r,ce,{}),ze._f&&(ze._f.mount=!1),(e.shouldUnregister||be.shouldUnregister)&&!(r6(c.array,ce)&&o.action)&&c.unMount.add(ce)}}},Me=()=>e.shouldFocusError&&wh(r,re,c.mount),Le=ce=>{Wa(ce)&&(m.state.next({disabled:ce}),wh(r,(be,ze)=>{const Pe=lt(r,ze);Pe&&(be.disabled=Pe._f.disabled||ce,Array.isArray(Pe._f.refs)&&Pe._f.refs.forEach(Je=>{Je.disabled=Pe._f.disabled||ce}))},0,!1))},We=(ce,be)=>async ze=>{let Pe;ze&&(ze.preventDefault&&ze.preventDefault(),ze.persist&&ze.persist());let Je=Tr(a);if(m.state.next({isSubmitting:!0}),e.resolver){const{errors:Ke,values:Nt}=await M();s.errors=Ke,Je=Nt}else await O(r);if(vr(s.errors,"root"),Ei(s.errors)){m.state.next({errors:{}});try{await ce(Je,ze)}catch(Ke){Pe=Ke}}else be&&await be({...s.errors},ze),Me(),setTimeout(Me);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ei(s.errors)&&!Pe,submitCount:s.submitCount+1,errors:s.errors}),Pe)throw Pe},jt=(ce,be={})=>{lt(r,ce)&&(Ss(be.defaultValue)?le(ce,Tr(lt(i,ce))):(le(ce,be.defaultValue),ss(i,ce,Tr(be.defaultValue))),be.keepTouched||vr(s.touchedFields,ce),be.keepDirty||(vr(s.dirtyFields,ce),s.isDirty=be.defaultValue?B(ce,Tr(lt(i,ce))):B()),be.keepError||(vr(s.errors,ce),g.isValid&&E()),m.state.next({...s}))},mt=(ce,be={})=>{const ze=ce?Tr(ce):i,Pe=Tr(ze),Je=Ei(ce),Ke=Je?i:Pe;if(be.keepDefaultValues||(i=ze),!be.keepValues){if(be.keepDirtyValues){const Nt=new Set([...c.mount,...Object.keys(af(i,a))]);for(const dt of Array.from(Nt))lt(s.dirtyFields,dt)?ss(Ke,dt,lt(a,dt)):le(dt,lt(Ke,dt))}else{if(M2&&Ss(ce))for(const Nt of c.mount){const dt=lt(r,Nt);if(dt&&dt._f){const Dt=Array.isArray(dt._f.refs)?dt._f.refs[0]:dt._f.ref;if(sv(Dt)){const At=Dt.closest("form");if(At){At.reset();break}}}}r={}}a=t.shouldUnregister?be.keepDefaultValues?Tr(i):{}:Tr(Ke),m.array.next({values:{...Ke}}),m.values.next({values:{...Ke}})}c={mount:be.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!g.isValid||!!be.keepIsValid||!!be.keepDirtyValues,o.watch=!!t.shouldUnregister,m.state.next({submitCount:be.keepSubmitCount?s.submitCount:0,isDirty:Je?!1:be.keepDirty?s.isDirty:!!(be.keepDefaultValues&&!pc(ce,i)),isSubmitted:be.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:Je?{}:be.keepDirtyValues?be.keepDefaultValues&&a?af(i,a):s.dirtyFields:be.keepDefaultValues&&ce?af(i,ce):be.keepDirty?s.dirtyFields:{},touchedFields:be.keepTouched?s.touchedFields:{},errors:be.keepErrors?s.errors:{},isSubmitSuccessful:be.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1})},ke=(ce,be)=>mt(Ml(ce)?ce(a):ce,be);return{control:{register:pe,unregister:ee,getFieldState:$,handleSubmit:We,setError:te,_executeSchema:M,_getWatch:Y,_getDirty:B,_updateValid:E,_removeUnmounted:V,_updateFieldArray:S,_updateDisabledField:de,_getFieldArray:z,_reset:mt,_resetDefaultValues:()=>Ml(e.defaultValues)&&e.defaultValues().then(ce=>{ke(ce,e.resetOptions),m.state.next({isLoading:!1})}),_updateFormState:ce=>{s={...s,...ce}},_disableForm:Le,_subjects:m,_proxyFormState:g,_setErrors:I,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(ce){o=ce},get _defaultValues(){return i},get _names(){return c},set _names(ce){c=ce},get _formState(){return s},set _formState(ce){s=ce},get _options(){return e},set _options(ce){e={...e,...ce}}},trigger:me,register:pe,handleSubmit:We,watch:ae,setValue:le,getValues:Ce,reset:ke,resetField:jt,clearErrors:xe,unregister:ee,setError:te,setFocus:(ce,be={})=>{const ze=lt(r,ce),Pe=ze&&ze._f;if(Pe){const Je=Pe.refs?Pe.refs[0]:Pe.ref;Je.focus&&(Je.focus(),be.shouldSelect&&Je.select())}},getFieldState:$}}function mn(t={}){const e=Ne.useRef(),s=Ne.useRef(),[r,i]=Ne.useState({isDirty:!1,isValidating:!1,isLoading:Ml(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Ml(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...ute(t),formState:r});const a=e.current.control;return a._options=t,ky({subject:a._subjects.state,next:o=>{l6(o,a._proxyFormState,a._updateFormState,!0)&&i({...a._formState})}}),Ne.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),Ne.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),Ne.useEffect(()=>{t.values&&!pc(t.values,s.current)?(a._reset(t.values,a._options.resetOptions),s.current=t.values,i(o=>({...o}))):a._resetDefaultValues()},[t.values,a]),Ne.useEffect(()=>{t.errors&&a._setErrors(t.errors)},[t.errors,a]),Ne.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),Ne.useEffect(()=>{t.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[t.shouldUnregister,a]),Ne.useEffect(()=>{e.current&&(e.current.watch=e.current.watch.bind({}))},[r]),e.current.formState=o6(r,a),e.current}var hte="Label",y6=y.forwardRef((t,e)=>n.jsx(St.label,{...t,ref:e,onMouseDown:s=>{var i;s.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));y6.displayName=hte;var w6=y6;const mte=mg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Wr=y.forwardRef(({className:t,...e},s)=>n.jsx(w6,{ref:s,className:we(mte(),t),...e}));Wr.displayName=w6.displayName;const fn=Kee,j6=y.createContext({}),J=({...t})=>n.jsx(j6.Provider,{value:{name:t.name},children:n.jsx(Jee,{...t})}),Py=()=>{const t=y.useContext(j6),e=y.useContext(b6),{getFieldState:s,formState:r}=Ng(),i=s(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:a}=e;return{id:a,name:t.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},b6=y.createContext({}),Z=y.forwardRef(({className:t,...e},s)=>{const r=y.useId();return n.jsx(b6.Provider,{value:{id:r},children:n.jsx("div",{ref:s,className:we("space-y-2",t),...e})})});Z.displayName="FormItem";const X=y.forwardRef(({className:t,...e},s)=>{const{error:r,formItemId:i}=Py();return n.jsx(Wr,{ref:s,className:we(r&&"text-destructive",t),htmlFor:i,...e})});X.displayName="FormLabel";const Q=y.forwardRef(({...t},e)=>{const{error:s,formItemId:r,formDescriptionId:i,formMessageId:a}=Py();return n.jsx(Eo,{ref:e,id:r,"aria-describedby":s?`${i} ${a}`:`${i}`,"aria-invalid":!!s,...t})});Q.displayName="FormControl";const ot=y.forwardRef(({className:t,...e},s)=>{const{formDescriptionId:r}=Py();return n.jsx("p",{ref:s,id:r,className:we("text-sm text-muted-foreground",t),...e})});ot.displayName="FormDescription";const ne=y.forwardRef(({className:t,children:e,...s},r)=>{const{error:i,formMessageId:a}=Py(),o=i?String(i==null?void 0:i.message):e;return o?n.jsx("p",{ref:r,id:a,className:we("text-sm font-medium text-destructive",t),...s,children:o}):null});ne.displayName="FormMessage";var Gn;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function s(i){throw new Error}t.assertNever=s,t.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),o={};for(const c of a)o[c]=i[c];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},t.find=(i,a)=>{for(const o of i)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Gn||(Gn={}));var Ub;(function(t){t.mergeShapes=(e,s)=>({...e,...s})})(Ub||(Ub={}));const It=Gn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),gc=t=>{switch(typeof t){case"undefined":return It.undefined;case"string":return It.string;case"number":return isNaN(t)?It.nan:It.number;case"boolean":return It.boolean;case"function":return It.function;case"bigint":return It.bigint;case"symbol":return It.symbol;case"object":return Array.isArray(t)?It.array:t===null?It.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?It.promise:typeof Map<"u"&&t instanceof Map?It.map:typeof Set<"u"&&t instanceof Set?It.set:typeof Date<"u"&&t instanceof Date?It.date:It.object;default:return It.unknown}},st=Gn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),fte=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Sa extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const s=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(s(o));else{let c=r,d=0;for(;d<o.path.length;){const h=o.path[d];d===o.path.length-1?(c[h]=c[h]||{_errors:[]},c[h]._errors.push(s(o))):c[h]=c[h]||{_errors:[]},c=c[h],d++}}};return i(this),r}static assert(e){if(!(e instanceof Sa))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Gn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=s=>s.message){const s={},r=[];for(const i of this.issues)i.path.length>0?(s[i.path[0]]=s[i.path[0]]||[],s[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:s}}get formErrors(){return this.flatten()}}Sa.create=t=>new Sa(t);const im=(t,e)=>{let s;switch(t.code){case st.invalid_type:t.received===It.undefined?s="Required":s=`Expected ${t.expected}, received ${t.received}`;break;case st.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(t.expected,Gn.jsonStringifyReplacer)}`;break;case st.unrecognized_keys:s=`Unrecognized key(s) in object: ${Gn.joinValues(t.keys,", ")}`;break;case st.invalid_union:s="Invalid input";break;case st.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${Gn.joinValues(t.options)}`;break;case st.invalid_enum_value:s=`Invalid enum value. Expected ${Gn.joinValues(t.options)}, received '${t.received}'`;break;case st.invalid_arguments:s="Invalid function arguments";break;case st.invalid_return_type:s="Invalid function return type";break;case st.invalid_date:s="Invalid date";break;case st.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(s=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?s=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?s=`Invalid input: must end with "${t.validation.endsWith}"`:Gn.assertNever(t.validation):t.validation!=="regex"?s=`Invalid ${t.validation}`:s="Invalid";break;case st.too_small:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:s="Invalid input";break;case st.too_big:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?s=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:s="Invalid input";break;case st.custom:s="Invalid input";break;case st.invalid_intersection_types:s="Intersection results could not be merged";break;case st.not_multiple_of:s=`Number must be a multiple of ${t.multipleOf}`;break;case st.not_finite:s="Number must be finite";break;default:s=e.defaultError,Gn.assertNever(t)}return{message:s}};let N6=im;function pte(t){N6=t}function av(){return N6}const ov=t=>{const{data:e,path:s,errorMaps:r,issueData:i}=t,a=[...s,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let c="";const d=r.filter(h=>!!h).slice().reverse();for(const h of d)c=h(o,{data:e,defaultError:c}).message;return{...i,path:a,message:c}},gte=[];function Ct(t,e){const s=av(),r=ov({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,s,s===im?void 0:im].filter(i=>!!i)});t.common.issues.push(r)}class Ci{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,s){const r=[];for(const i of s){if(i.status==="aborted")return Xt;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,s){const r=[];for(const i of s){const a=await i.key,o=await i.value;r.push({key:a,value:o})}return Ci.mergeObjectSync(e,r)}static mergeObjectSync(e,s){const r={};for(const i of s){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return Xt;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const Xt=Object.freeze({status:"aborted"}),rh=t=>({status:"dirty",value:t}),Li=t=>({status:"valid",value:t}),Wb=t=>t.status==="aborted",Hb=t=>t.status==="dirty",Lp=t=>t.status==="valid",Op=t=>typeof Promise<"u"&&t instanceof Promise;function lv(t,e,s,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function C6(t,e,s,r,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,s),s}var Rt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Rt||(Rt={}));var Ef,_f;class il{constructor(e,s,r,i){this._cachedPath=[],this.parent=e,this.data=s,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const P4=(t,e)=>{if(Lp(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new Sa(t.common.issues);return this._error=s,this._error}}};function hn(t){if(!t)return{};const{errorMap:e,invalid_type_error:s,required_error:r,description:i}=t;if(e&&(s||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,c)=>{var d,h;const{message:g}=t;return o.code==="invalid_enum_value"?{message:g??c.defaultError}:typeof c.data>"u"?{message:(d=g??r)!==null&&d!==void 0?d:c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:(h=g??s)!==null&&h!==void 0?h:c.defaultError}},description:i}}class En{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return gc(e.data)}_getOrReturnCtx(e,s){return s||{common:e.parent.common,data:e.data,parsedType:gc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ci,ctx:{common:e.parent.common,data:e.data,parsedType:gc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const s=this._parse(e);if(Op(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(e){const s=this._parse(e);return Promise.resolve(s)}parse(e,s){const r=this.safeParse(e,s);if(r.success)return r.data;throw r.error}safeParse(e,s){var r;const i={common:{issues:[],async:(r=s==null?void 0:s.async)!==null&&r!==void 0?r:!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gc(e)},a=this._parseSync({data:e,path:i.path,parent:i});return P4(i,a)}async parseAsync(e,s){const r=await this.safeParseAsync(e,s);if(r.success)return r.data;throw r.error}async safeParseAsync(e,s){const r={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gc(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(Op(i)?i:Promise.resolve(i));return P4(r,a)}refine(e,s){const r=i=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(i):s;return this._refinement((i,a)=>{const o=e(i),c=()=>a.addIssue({code:st.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(d=>d?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(e,s){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof s=="function"?s(r,i):s),!1))}_refinement(e){return new To({schema:this,typeName:Zt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return tl.create(this,this._def)}nullable(){return Qc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return No.create(this,this._def)}promise(){return om.create(this,this._def)}or(e){return Vp.create([this,e],this._def)}and(e){return $p.create(this,e,this._def)}transform(e){return new To({...hn(this._def),schema:this,typeName:Zt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const s=typeof e=="function"?e:()=>e;return new Gp({...hn(this._def),innerType:this,defaultValue:s,typeName:Zt.ZodDefault})}brand(){return new R2({typeName:Zt.ZodBranded,type:this,...hn(this._def)})}catch(e){const s=typeof e=="function"?e:()=>e;return new Yp({...hn(this._def),innerType:this,catchValue:s,typeName:Zt.ZodCatch})}describe(e){const s=this.constructor;return new s({...this._def,description:e})}pipe(e){return Cg.create(this,e)}readonly(){return Kp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const xte=/^c[^\s-]{8,}$/i,vte=/^[0-9a-z]+$/,yte=/^[0-9A-HJKMNP-TV-Z]{26}$/,wte=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,jte=/^[a-z0-9_-]{21}$/i,bte=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Nte=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Cte="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Nw;const Ste=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ate=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Ete=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,S6="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",_te=new RegExp(`^${S6}$`);function A6(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Ite(t){return new RegExp(`^${A6(t)}$`)}function E6(t){let e=`${S6}T${A6(t)}`;const s=[];return s.push(t.local?"Z?":"Z"),t.offset&&s.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${s.join("|")})`,new RegExp(`^${e}$`)}function Tte(t,e){return!!((e==="v4"||!e)&&Ste.test(t)||(e==="v6"||!e)&&Ate.test(t))}class vo extends En{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==It.string){const a=this._getOrReturnCtx(e);return Ct(a,{code:st.invalid_type,expected:It.string,received:a.parsedType}),Xt}const r=new Ci;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),Ct(i,{code:st.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),Ct(i,{code:st.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,c=e.data.length<a.value;(o||c)&&(i=this._getOrReturnCtx(e,i),o?Ct(i,{code:st.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):c&&Ct(i,{code:st.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")Nte.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"email",code:st.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")Nw||(Nw=new RegExp(Cte,"u")),Nw.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"emoji",code:st.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")wte.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"uuid",code:st.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")jte.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"nanoid",code:st.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")xte.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"cuid",code:st.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")vte.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"cuid2",code:st.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")yte.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"ulid",code:st.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Ct(i,{validation:"url",code:st.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"regex",code:st.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),Ct(i,{code:st.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),Ct(i,{code:st.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),Ct(i,{code:st.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?E6(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{code:st.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?_te.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{code:st.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?Ite(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{code:st.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?bte.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"duration",code:st.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?Tte(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"ip",code:st.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?Ete.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"base64",code:st.invalid_string,message:a.message}),r.dirty()):Gn.assertNever(a);return{status:r.value,value:e.data}}_regex(e,s,r){return this.refinement(i=>e.test(i),{validation:s,code:st.invalid_string,...Rt.errToObj(r)})}_addCheck(e){return new vo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Rt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Rt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Rt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Rt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Rt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Rt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Rt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Rt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Rt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Rt.errToObj(e)})}datetime(e){var s,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(s=e==null?void 0:e.offset)!==null&&s!==void 0?s:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...Rt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Rt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Rt.errToObj(e)})}regex(e,s){return this._addCheck({kind:"regex",regex:e,...Rt.errToObj(s)})}includes(e,s){return this._addCheck({kind:"includes",value:e,position:s==null?void 0:s.position,...Rt.errToObj(s==null?void 0:s.message)})}startsWith(e,s){return this._addCheck({kind:"startsWith",value:e,...Rt.errToObj(s)})}endsWith(e,s){return this._addCheck({kind:"endsWith",value:e,...Rt.errToObj(s)})}min(e,s){return this._addCheck({kind:"min",value:e,...Rt.errToObj(s)})}max(e,s){return this._addCheck({kind:"max",value:e,...Rt.errToObj(s)})}length(e,s){return this._addCheck({kind:"length",value:e,...Rt.errToObj(s)})}nonempty(e){return this.min(1,Rt.errToObj(e))}trim(){return new vo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new vo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new vo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxLength(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}vo.create=t=>{var e;return new vo({checks:[],typeName:Zt.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...hn(t)})};function Mte(t,e){const s=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=s>r?s:r,a=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return a%o/Math.pow(10,i)}class Yc extends En{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==It.number){const a=this._getOrReturnCtx(e);return Ct(a,{code:st.invalid_type,expected:It.number,received:a.parsedType}),Xt}let r;const i=new Ci;for(const a of this._def.checks)a.kind==="int"?Gn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ct(r,{code:st.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:st.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:st.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?Mte(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:st.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ct(r,{code:st.not_finite,message:a.message}),i.dirty()):Gn.assertNever(a);return{status:i.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,Rt.toString(s))}gt(e,s){return this.setLimit("min",e,!1,Rt.toString(s))}lte(e,s){return this.setLimit("max",e,!0,Rt.toString(s))}lt(e,s){return this.setLimit("max",e,!1,Rt.toString(s))}setLimit(e,s,r,i){return new Yc({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:r,message:Rt.toString(i)}]})}_addCheck(e){return new Yc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Rt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Rt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Rt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Rt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Rt.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:Rt.toString(s)})}finite(e){return this._addCheck({kind:"finite",message:Rt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Rt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Rt.toString(e)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Gn.isInteger(e.value))}get isFinite(){let e=null,s=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(s===null||r.value>s)&&(s=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(s)&&Number.isFinite(e)}}Yc.create=t=>new Yc({checks:[],typeName:Zt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...hn(t)});class Kc extends En{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==It.bigint){const a=this._getOrReturnCtx(e);return Ct(a,{code:st.invalid_type,expected:It.bigint,received:a.parsedType}),Xt}let r;const i=new Ci;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:st.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:st.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:st.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Gn.assertNever(a);return{status:i.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,Rt.toString(s))}gt(e,s){return this.setLimit("min",e,!1,Rt.toString(s))}lte(e,s){return this.setLimit("max",e,!0,Rt.toString(s))}lt(e,s){return this.setLimit("max",e,!1,Rt.toString(s))}setLimit(e,s,r,i){return new Kc({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:r,message:Rt.toString(i)}]})}_addCheck(e){return new Kc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Rt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Rt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Rt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Rt.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:Rt.toString(s)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}Kc.create=t=>{var e;return new Kc({checks:[],typeName:Zt.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...hn(t)})};class Fp extends En{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==It.boolean){const r=this._getOrReturnCtx(e);return Ct(r,{code:st.invalid_type,expected:It.boolean,received:r.parsedType}),Xt}return Li(e.data)}}Fp.create=t=>new Fp({typeName:Zt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...hn(t)});class ru extends En{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==It.date){const a=this._getOrReturnCtx(e);return Ct(a,{code:st.invalid_type,expected:It.date,received:a.parsedType}),Xt}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Ct(a,{code:st.invalid_date}),Xt}const r=new Ci;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),Ct(i,{code:st.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),Ct(i,{code:st.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Gn.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ru({...this._def,checks:[...this._def.checks,e]})}min(e,s){return this._addCheck({kind:"min",value:e.getTime(),message:Rt.toString(s)})}max(e,s){return this._addCheck({kind:"max",value:e.getTime(),message:Rt.toString(s)})}get minDate(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e!=null?new Date(e):null}}ru.create=t=>new ru({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Zt.ZodDate,...hn(t)});class cv extends En{_parse(e){if(this._getType(e)!==It.symbol){const r=this._getOrReturnCtx(e);return Ct(r,{code:st.invalid_type,expected:It.symbol,received:r.parsedType}),Xt}return Li(e.data)}}cv.create=t=>new cv({typeName:Zt.ZodSymbol,...hn(t)});class Bp extends En{_parse(e){if(this._getType(e)!==It.undefined){const r=this._getOrReturnCtx(e);return Ct(r,{code:st.invalid_type,expected:It.undefined,received:r.parsedType}),Xt}return Li(e.data)}}Bp.create=t=>new Bp({typeName:Zt.ZodUndefined,...hn(t)});class zp extends En{_parse(e){if(this._getType(e)!==It.null){const r=this._getOrReturnCtx(e);return Ct(r,{code:st.invalid_type,expected:It.null,received:r.parsedType}),Xt}return Li(e.data)}}zp.create=t=>new zp({typeName:Zt.ZodNull,...hn(t)});class am extends En{constructor(){super(...arguments),this._any=!0}_parse(e){return Li(e.data)}}am.create=t=>new am({typeName:Zt.ZodAny,...hn(t)});class Wd extends En{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Li(e.data)}}Wd.create=t=>new Wd({typeName:Zt.ZodUnknown,...hn(t)});class Wl extends En{_parse(e){const s=this._getOrReturnCtx(e);return Ct(s,{code:st.invalid_type,expected:It.never,received:s.parsedType}),Xt}}Wl.create=t=>new Wl({typeName:Zt.ZodNever,...hn(t)});class dv extends En{_parse(e){if(this._getType(e)!==It.undefined){const r=this._getOrReturnCtx(e);return Ct(r,{code:st.invalid_type,expected:It.void,received:r.parsedType}),Xt}return Li(e.data)}}dv.create=t=>new dv({typeName:Zt.ZodVoid,...hn(t)});class No extends En{_parse(e){const{ctx:s,status:r}=this._processInputParams(e),i=this._def;if(s.parsedType!==It.array)return Ct(s,{code:st.invalid_type,expected:It.array,received:s.parsedType}),Xt;if(i.exactLength!==null){const o=s.data.length>i.exactLength.value,c=s.data.length<i.exactLength.value;(o||c)&&(Ct(s,{code:o?st.too_big:st.too_small,minimum:c?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&s.data.length<i.minLength.value&&(Ct(s,{code:st.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&s.data.length>i.maxLength.value&&(Ct(s,{code:st.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),s.common.async)return Promise.all([...s.data].map((o,c)=>i.type._parseAsync(new il(s,o,s.path,c)))).then(o=>Ci.mergeArray(r,o));const a=[...s.data].map((o,c)=>i.type._parseSync(new il(s,o,s.path,c)));return Ci.mergeArray(r,a)}get element(){return this._def.type}min(e,s){return new No({...this._def,minLength:{value:e,message:Rt.toString(s)}})}max(e,s){return new No({...this._def,maxLength:{value:e,message:Rt.toString(s)}})}length(e,s){return new No({...this._def,exactLength:{value:e,message:Rt.toString(s)}})}nonempty(e){return this.min(1,e)}}No.create=(t,e)=>new No({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Zt.ZodArray,...hn(e)});function Bu(t){if(t instanceof Ys){const e={};for(const s in t.shape){const r=t.shape[s];e[s]=tl.create(Bu(r))}return new Ys({...t._def,shape:()=>e})}else return t instanceof No?new No({...t._def,type:Bu(t.element)}):t instanceof tl?tl.create(Bu(t.unwrap())):t instanceof Qc?Qc.create(Bu(t.unwrap())):t instanceof al?al.create(t.items.map(e=>Bu(e))):t}class Ys extends En{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),s=Gn.objectKeys(e);return this._cached={shape:e,keys:s}}_parse(e){if(this._getType(e)!==It.object){const h=this._getOrReturnCtx(e);return Ct(h,{code:st.invalid_type,expected:It.object,received:h.parsedType}),Xt}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof Wl&&this._def.unknownKeys==="strip"))for(const h in i.data)o.includes(h)||c.push(h);const d=[];for(const h of o){const g=a[h],m=i.data[h];d.push({key:{status:"valid",value:h},value:g._parse(new il(i,m,i.path,h)),alwaysSet:h in i.data})}if(this._def.catchall instanceof Wl){const h=this._def.unknownKeys;if(h==="passthrough")for(const g of c)d.push({key:{status:"valid",value:g},value:{status:"valid",value:i.data[g]}});else if(h==="strict")c.length>0&&(Ct(i,{code:st.unrecognized_keys,keys:c}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const g of c){const m=i.data[g];d.push({key:{status:"valid",value:g},value:h._parse(new il(i,m,i.path,g)),alwaysSet:g in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const h=[];for(const g of d){const m=await g.key,p=await g.value;h.push({key:m,value:p,alwaysSet:g.alwaysSet})}return h}).then(h=>Ci.mergeObjectSync(r,h)):Ci.mergeObjectSync(r,d)}get shape(){return this._def.shape()}strict(e){return Rt.errToObj,new Ys({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(s,r)=>{var i,a,o,c;const d=(o=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,s,r).message)!==null&&o!==void 0?o:r.defaultError;return s.code==="unrecognized_keys"?{message:(c=Rt.errToObj(e).message)!==null&&c!==void 0?c:d}:{message:d}}}:{}})}strip(){return new Ys({...this._def,unknownKeys:"strip"})}passthrough(){return new Ys({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ys({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ys({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Zt.ZodObject})}setKey(e,s){return this.augment({[e]:s})}catchall(e){return new Ys({...this._def,catchall:e})}pick(e){const s={};return Gn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(s[r]=this.shape[r])}),new Ys({...this._def,shape:()=>s})}omit(e){const s={};return Gn.objectKeys(this.shape).forEach(r=>{e[r]||(s[r]=this.shape[r])}),new Ys({...this._def,shape:()=>s})}deepPartial(){return Bu(this)}partial(e){const s={};return Gn.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?s[r]=i:s[r]=i.optional()}),new Ys({...this._def,shape:()=>s})}required(e){const s={};return Gn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])s[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof tl;)a=a._def.innerType;s[r]=a}}),new Ys({...this._def,shape:()=>s})}keyof(){return _6(Gn.objectKeys(this.shape))}}Ys.create=(t,e)=>new Ys({shape:()=>t,unknownKeys:"strip",catchall:Wl.create(),typeName:Zt.ZodObject,...hn(e)});Ys.strictCreate=(t,e)=>new Ys({shape:()=>t,unknownKeys:"strict",catchall:Wl.create(),typeName:Zt.ZodObject,...hn(e)});Ys.lazycreate=(t,e)=>new Ys({shape:t,unknownKeys:"strip",catchall:Wl.create(),typeName:Zt.ZodObject,...hn(e)});class Vp extends En{_parse(e){const{ctx:s}=this._processInputParams(e),r=this._def.options;function i(a){for(const c of a)if(c.result.status==="valid")return c.result;for(const c of a)if(c.result.status==="dirty")return s.common.issues.push(...c.ctx.common.issues),c.result;const o=a.map(c=>new Sa(c.ctx.common.issues));return Ct(s,{code:st.invalid_union,unionErrors:o}),Xt}if(s.common.async)return Promise.all(r.map(async a=>{const o={...s,common:{...s.common,issues:[]},parent:null};return{result:await a._parseAsync({data:s.data,path:s.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const d of r){const h={...s,common:{...s.common,issues:[]},parent:null},g=d._parseSync({data:s.data,path:s.path,parent:h});if(g.status==="valid")return g;g.status==="dirty"&&!a&&(a={result:g,ctx:h}),h.common.issues.length&&o.push(h.common.issues)}if(a)return s.common.issues.push(...a.ctx.common.issues),a.result;const c=o.map(d=>new Sa(d));return Ct(s,{code:st.invalid_union,unionErrors:c}),Xt}}get options(){return this._def.options}}Vp.create=(t,e)=>new Vp({options:t,typeName:Zt.ZodUnion,...hn(e)});const jl=t=>t instanceof Wp?jl(t.schema):t instanceof To?jl(t.innerType()):t instanceof Hp?[t.value]:t instanceof Zc?t.options:t instanceof qp?Gn.objectValues(t.enum):t instanceof Gp?jl(t._def.innerType):t instanceof Bp?[void 0]:t instanceof zp?[null]:t instanceof tl?[void 0,...jl(t.unwrap())]:t instanceof Qc?[null,...jl(t.unwrap())]:t instanceof R2||t instanceof Kp?jl(t.unwrap()):t instanceof Yp?jl(t._def.innerType):[];class Ry extends En{_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==It.object)return Ct(s,{code:st.invalid_type,expected:It.object,received:s.parsedType}),Xt;const r=this.discriminator,i=s.data[r],a=this.optionsMap.get(i);return a?s.common.async?a._parseAsync({data:s.data,path:s.path,parent:s}):a._parseSync({data:s.data,path:s.path,parent:s}):(Ct(s,{code:st.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Xt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,s,r){const i=new Map;for(const a of s){const o=jl(a.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of o){if(i.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);i.set(c,a)}}return new Ry({typeName:Zt.ZodDiscriminatedUnion,discriminator:e,options:s,optionsMap:i,...hn(r)})}}function qb(t,e){const s=gc(t),r=gc(e);if(t===e)return{valid:!0,data:t};if(s===It.object&&r===It.object){const i=Gn.objectKeys(e),a=Gn.objectKeys(t).filter(c=>i.indexOf(c)!==-1),o={...t,...e};for(const c of a){const d=qb(t[c],e[c]);if(!d.valid)return{valid:!1};o[c]=d.data}return{valid:!0,data:o}}else if(s===It.array&&r===It.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const o=t[a],c=e[a],d=qb(o,c);if(!d.valid)return{valid:!1};i.push(d.data)}return{valid:!0,data:i}}else return s===It.date&&r===It.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class $p extends En{_parse(e){const{status:s,ctx:r}=this._processInputParams(e),i=(a,o)=>{if(Wb(a)||Wb(o))return Xt;const c=qb(a.value,o.value);return c.valid?((Hb(a)||Hb(o))&&s.dirty(),{status:s.value,value:c.data}):(Ct(r,{code:st.invalid_intersection_types}),Xt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}$p.create=(t,e,s)=>new $p({left:t,right:e,typeName:Zt.ZodIntersection,...hn(s)});class al extends En{_parse(e){const{status:s,ctx:r}=this._processInputParams(e);if(r.parsedType!==It.array)return Ct(r,{code:st.invalid_type,expected:It.array,received:r.parsedType}),Xt;if(r.data.length<this._def.items.length)return Ct(r,{code:st.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Xt;!this._def.rest&&r.data.length>this._def.items.length&&(Ct(r,{code:st.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const a=[...r.data].map((o,c)=>{const d=this._def.items[c]||this._def.rest;return d?d._parse(new il(r,o,r.path,c)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>Ci.mergeArray(s,o)):Ci.mergeArray(s,a)}get items(){return this._def.items}rest(e){return new al({...this._def,rest:e})}}al.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new al({items:t,typeName:Zt.ZodTuple,rest:null,...hn(e)})};class Up extends En{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:r}=this._processInputParams(e);if(r.parsedType!==It.object)return Ct(r,{code:st.invalid_type,expected:It.object,received:r.parsedType}),Xt;const i=[],a=this._def.keyType,o=this._def.valueType;for(const c in r.data)i.push({key:a._parse(new il(r,c,r.path,c)),value:o._parse(new il(r,r.data[c],r.path,c)),alwaysSet:c in r.data});return r.common.async?Ci.mergeObjectAsync(s,i):Ci.mergeObjectSync(s,i)}get element(){return this._def.valueType}static create(e,s,r){return s instanceof En?new Up({keyType:e,valueType:s,typeName:Zt.ZodRecord,...hn(r)}):new Up({keyType:vo.create(),valueType:e,typeName:Zt.ZodRecord,...hn(s)})}}class uv extends En{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:r}=this._processInputParams(e);if(r.parsedType!==It.map)return Ct(r,{code:st.invalid_type,expected:It.map,received:r.parsedType}),Xt;const i=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([c,d],h)=>({key:i._parse(new il(r,c,r.path,[h,"key"])),value:a._parse(new il(r,d,r.path,[h,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const d of o){const h=await d.key,g=await d.value;if(h.status==="aborted"||g.status==="aborted")return Xt;(h.status==="dirty"||g.status==="dirty")&&s.dirty(),c.set(h.value,g.value)}return{status:s.value,value:c}})}else{const c=new Map;for(const d of o){const h=d.key,g=d.value;if(h.status==="aborted"||g.status==="aborted")return Xt;(h.status==="dirty"||g.status==="dirty")&&s.dirty(),c.set(h.value,g.value)}return{status:s.value,value:c}}}}uv.create=(t,e,s)=>new uv({valueType:e,keyType:t,typeName:Zt.ZodMap,...hn(s)});class iu extends En{_parse(e){const{status:s,ctx:r}=this._processInputParams(e);if(r.parsedType!==It.set)return Ct(r,{code:st.invalid_type,expected:It.set,received:r.parsedType}),Xt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Ct(r,{code:st.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),s.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Ct(r,{code:st.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),s.dirty());const a=this._def.valueType;function o(d){const h=new Set;for(const g of d){if(g.status==="aborted")return Xt;g.status==="dirty"&&s.dirty(),h.add(g.value)}return{status:s.value,value:h}}const c=[...r.data.values()].map((d,h)=>a._parse(new il(r,d,r.path,h)));return r.common.async?Promise.all(c).then(d=>o(d)):o(c)}min(e,s){return new iu({...this._def,minSize:{value:e,message:Rt.toString(s)}})}max(e,s){return new iu({...this._def,maxSize:{value:e,message:Rt.toString(s)}})}size(e,s){return this.min(e,s).max(e,s)}nonempty(e){return this.min(1,e)}}iu.create=(t,e)=>new iu({valueType:t,minSize:null,maxSize:null,typeName:Zt.ZodSet,...hn(e)});class jh extends En{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==It.function)return Ct(s,{code:st.invalid_type,expected:It.function,received:s.parsedType}),Xt;function r(c,d){return ov({data:c,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,av(),im].filter(h=>!!h),issueData:{code:st.invalid_arguments,argumentsError:d}})}function i(c,d){return ov({data:c,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,av(),im].filter(h=>!!h),issueData:{code:st.invalid_return_type,returnTypeError:d}})}const a={errorMap:s.common.contextualErrorMap},o=s.data;if(this._def.returns instanceof om){const c=this;return Li(async function(...d){const h=new Sa([]),g=await c._def.args.parseAsync(d,a).catch(v=>{throw h.addIssue(r(d,v)),h}),m=await Reflect.apply(o,this,g);return await c._def.returns._def.type.parseAsync(m,a).catch(v=>{throw h.addIssue(i(m,v)),h})})}else{const c=this;return Li(function(...d){const h=c._def.args.safeParse(d,a);if(!h.success)throw new Sa([r(d,h.error)]);const g=Reflect.apply(o,this,h.data),m=c._def.returns.safeParse(g,a);if(!m.success)throw new Sa([i(g,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new jh({...this._def,args:al.create(e).rest(Wd.create())})}returns(e){return new jh({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,s,r){return new jh({args:e||al.create([]).rest(Wd.create()),returns:s||Wd.create(),typeName:Zt.ZodFunction,...hn(r)})}}class Wp extends En{get schema(){return this._def.getter()}_parse(e){const{ctx:s}=this._processInputParams(e);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}Wp.create=(t,e)=>new Wp({getter:t,typeName:Zt.ZodLazy,...hn(e)});class Hp extends En{_parse(e){if(e.data!==this._def.value){const s=this._getOrReturnCtx(e);return Ct(s,{received:s.data,code:st.invalid_literal,expected:this._def.value}),Xt}return{status:"valid",value:e.data}}get value(){return this._def.value}}Hp.create=(t,e)=>new Hp({value:t,typeName:Zt.ZodLiteral,...hn(e)});function _6(t,e){return new Zc({values:t,typeName:Zt.ZodEnum,...hn(e)})}class Zc extends En{constructor(){super(...arguments),Ef.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const s=this._getOrReturnCtx(e),r=this._def.values;return Ct(s,{expected:Gn.joinValues(r),received:s.parsedType,code:st.invalid_type}),Xt}if(lv(this,Ef)||C6(this,Ef,new Set(this._def.values)),!lv(this,Ef).has(e.data)){const s=this._getOrReturnCtx(e),r=this._def.values;return Ct(s,{received:s.data,code:st.invalid_enum_value,options:r}),Xt}return Li(e.data)}get options(){return this._def.values}get enum(){const e={};for(const s of this._def.values)e[s]=s;return e}get Values(){const e={};for(const s of this._def.values)e[s]=s;return e}get Enum(){const e={};for(const s of this._def.values)e[s]=s;return e}extract(e,s=this._def){return Zc.create(e,{...this._def,...s})}exclude(e,s=this._def){return Zc.create(this.options.filter(r=>!e.includes(r)),{...this._def,...s})}}Ef=new WeakMap;Zc.create=_6;class qp extends En{constructor(){super(...arguments),_f.set(this,void 0)}_parse(e){const s=Gn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==It.string&&r.parsedType!==It.number){const i=Gn.objectValues(s);return Ct(r,{expected:Gn.joinValues(i),received:r.parsedType,code:st.invalid_type}),Xt}if(lv(this,_f)||C6(this,_f,new Set(Gn.getValidEnumValues(this._def.values))),!lv(this,_f).has(e.data)){const i=Gn.objectValues(s);return Ct(r,{received:r.data,code:st.invalid_enum_value,options:i}),Xt}return Li(e.data)}get enum(){return this._def.values}}_f=new WeakMap;qp.create=(t,e)=>new qp({values:t,typeName:Zt.ZodNativeEnum,...hn(e)});class om extends En{unwrap(){return this._def.type}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==It.promise&&s.common.async===!1)return Ct(s,{code:st.invalid_type,expected:It.promise,received:s.parsedType}),Xt;const r=s.parsedType===It.promise?s.data:Promise.resolve(s.data);return Li(r.then(i=>this._def.type.parseAsync(i,{path:s.path,errorMap:s.common.contextualErrorMap})))}}om.create=(t,e)=>new om({type:t,typeName:Zt.ZodPromise,...hn(e)});class To extends En{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Zt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:s,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{Ct(r,o),o.fatal?s.abort():s.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async c=>{if(s.value==="aborted")return Xt;const d=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return d.status==="aborted"?Xt:d.status==="dirty"||s.value==="dirty"?rh(d.value):d});{if(s.value==="aborted")return Xt;const c=this._def.schema._parseSync({data:o,path:r.path,parent:r});return c.status==="aborted"?Xt:c.status==="dirty"||s.value==="dirty"?rh(c.value):c}}if(i.type==="refinement"){const o=c=>{const d=i.refinement(c,a);if(r.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?Xt:(c.status==="dirty"&&s.dirty(),o(c.value),{status:s.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?Xt:(c.status==="dirty"&&s.dirty(),o(c.value).then(()=>({status:s.value,value:c.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Lp(o))return o;const c=i.transform(o.value,a);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Lp(o)?Promise.resolve(i.transform(o.value,a)).then(c=>({status:s.value,value:c})):o);Gn.assertNever(i)}}To.create=(t,e,s)=>new To({schema:t,typeName:Zt.ZodEffects,effect:e,...hn(s)});To.createWithPreprocess=(t,e,s)=>new To({schema:e,effect:{type:"preprocess",transform:t},typeName:Zt.ZodEffects,...hn(s)});class tl extends En{_parse(e){return this._getType(e)===It.undefined?Li(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}tl.create=(t,e)=>new tl({innerType:t,typeName:Zt.ZodOptional,...hn(e)});class Qc extends En{_parse(e){return this._getType(e)===It.null?Li(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qc.create=(t,e)=>new Qc({innerType:t,typeName:Zt.ZodNullable,...hn(e)});class Gp extends En{_parse(e){const{ctx:s}=this._processInputParams(e);let r=s.data;return s.parsedType===It.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}Gp.create=(t,e)=>new Gp({innerType:t,typeName:Zt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...hn(e)});class Yp extends En{_parse(e){const{ctx:s}=this._processInputParams(e),r={...s,common:{...s.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Op(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Sa(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Sa(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Yp.create=(t,e)=>new Yp({innerType:t,typeName:Zt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...hn(e)});class hv extends En{_parse(e){if(this._getType(e)!==It.nan){const r=this._getOrReturnCtx(e);return Ct(r,{code:st.invalid_type,expected:It.nan,received:r.parsedType}),Xt}return{status:"valid",value:e.data}}}hv.create=t=>new hv({typeName:Zt.ZodNaN,...hn(t)});const Dte=Symbol("zod_brand");class R2 extends En{_parse(e){const{ctx:s}=this._processInputParams(e),r=s.data;return this._def.type._parse({data:r,path:s.path,parent:s})}unwrap(){return this._def.type}}class Cg extends En{_parse(e){const{status:s,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Xt:a.status==="dirty"?(s.dirty(),rh(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Xt:i.status==="dirty"?(s.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,s){return new Cg({in:e,out:s,typeName:Zt.ZodPipeline})}}class Kp extends En{_parse(e){const s=this._def.innerType._parse(e),r=i=>(Lp(i)&&(i.value=Object.freeze(i.value)),i);return Op(s)?s.then(i=>r(i)):r(s)}unwrap(){return this._def.innerType}}Kp.create=(t,e)=>new Kp({innerType:t,typeName:Zt.ZodReadonly,...hn(e)});function I6(t,e={},s){return t?am.create().superRefine((r,i)=>{var a,o;if(!t(r)){const c=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,d=(o=(a=c.fatal)!==null&&a!==void 0?a:s)!==null&&o!==void 0?o:!0,h=typeof c=="string"?{message:c}:c;i.addIssue({code:"custom",...h,fatal:d})}}):am.create()}const kte={object:Ys.lazycreate};var Zt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Zt||(Zt={}));const Pte=(t,e={message:`Input not instance of ${t.name}`})=>I6(s=>s instanceof t,e),yr=vo.create,ih=Yc.create,Rte=hv.create,Lte=Kc.create,bh=Fp.create,Nh=ru.create,Ote=cv.create,Fte=Bp.create,Bte=zp.create,zte=am.create,Vte=Wd.create,$te=Wl.create,Ute=dv.create,Wte=No.create,Sg=Ys.create,Hte=Ys.strictCreate,qte=Vp.create,Gte=Ry.create,Yte=$p.create,Kte=al.create,Zte=Up.create,Qte=uv.create,Xte=iu.create,Jte=jh.create,ene=Wp.create,tne=Hp.create,mv=Zc.create,nne=qp.create,sne=om.create,R4=To.create,rne=tl.create,ine=Qc.create,ane=To.createWithPreprocess,one=Cg.create,lne=()=>yr().optional(),cne=()=>ih().optional(),dne=()=>bh().optional(),fv={string:t=>vo.create({...t,coerce:!0}),number:t=>Yc.create({...t,coerce:!0}),boolean:t=>Fp.create({...t,coerce:!0}),bigint:t=>Kc.create({...t,coerce:!0}),date:t=>ru.create({...t,coerce:!0})},une=Xt;var q=Object.freeze({__proto__:null,defaultErrorMap:im,setErrorMap:pte,getErrorMap:av,makeIssue:ov,EMPTY_PATH:gte,addIssueToContext:Ct,ParseStatus:Ci,INVALID:Xt,DIRTY:rh,OK:Li,isAborted:Wb,isDirty:Hb,isValid:Lp,isAsync:Op,get util(){return Gn},get objectUtil(){return Ub},ZodParsedType:It,getParsedType:gc,ZodType:En,datetimeRegex:E6,ZodString:vo,ZodNumber:Yc,ZodBigInt:Kc,ZodBoolean:Fp,ZodDate:ru,ZodSymbol:cv,ZodUndefined:Bp,ZodNull:zp,ZodAny:am,ZodUnknown:Wd,ZodNever:Wl,ZodVoid:dv,ZodArray:No,ZodObject:Ys,ZodUnion:Vp,ZodDiscriminatedUnion:Ry,ZodIntersection:$p,ZodTuple:al,ZodRecord:Up,ZodMap:uv,ZodSet:iu,ZodFunction:jh,ZodLazy:Wp,ZodLiteral:Hp,ZodEnum:Zc,ZodNativeEnum:qp,ZodPromise:om,ZodEffects:To,ZodTransformer:To,ZodOptional:tl,ZodNullable:Qc,ZodDefault:Gp,ZodCatch:Yp,ZodNaN:hv,BRAND:Dte,ZodBranded:R2,ZodPipeline:Cg,ZodReadonly:Kp,custom:I6,Schema:En,ZodSchema:En,late:kte,get ZodFirstPartyTypeKind(){return Zt},coerce:fv,any:zte,array:Wte,bigint:Lte,boolean:bh,date:Nh,discriminatedUnion:Gte,effect:R4,enum:mv,function:Jte,instanceof:Pte,intersection:Yte,lazy:ene,literal:tne,map:Qte,nan:Rte,nativeEnum:nne,never:$te,null:Bte,nullable:ine,number:ih,object:Sg,oboolean:dne,onumber:cne,optional:rne,ostring:lne,pipeline:one,preprocess:ane,promise:sne,record:Zte,set:Xte,strictObject:Hte,string:yr,symbol:Ote,transformer:R4,tuple:Kte,undefined:Fte,union:qte,unknown:Vte,void:Ute,NEVER:une,ZodIssueCode:st,quotelessJson:fte,ZodError:Sa});const L4=(t,e,s)=>{if(t&&"reportValidity"in t){const r=lt(s,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},T6=(t,e)=>{for(const s in e.fields){const r=e.fields[s];r&&r.ref&&"reportValidity"in r.ref?L4(r.ref,s,t):r.refs&&r.refs.forEach(i=>L4(i,s,t))}},hne=(t,e)=>{e.shouldUseNativeValidation&&T6(t,e);const s={};for(const r in t){const i=lt(e.fields,r),a=Object.assign(t[r]||{},{ref:i&&i.ref});if(mne(e.names||Object.keys(t),r)){const o=Object.assign({},lt(s,r));ss(o,"root",a),ss(s,r,o)}else ss(s,r,a)}return s},mne=(t,e)=>t.some(s=>s.startsWith(e+"."));var fne=function(t,e){for(var s={};t.length;){var r=t[0],i=r.code,a=r.message,o=r.path.join(".");if(!s[o])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];s[o]={message:c.message,type:c.code}}else s[o]={message:a,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(g){return g.errors.forEach(function(m){return t.push(m)})}),e){var d=s[o].types,h=d&&d[r.code];s[o]=u6(o,e,s,i,h?[].concat(h,r.message):r.message)}t.shift()}return s},pn=function(t,e,s){return s===void 0&&(s={}),function(r,i,a){try{return Promise.resolve(function(o,c){try{var d=Promise.resolve(t[s.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(h){return a.shouldUseNativeValidation&&T6({},a),{errors:{},values:s.raw?r:h}})}catch(h){return c(h)}return d&&d.then?d.then(void 0,c):d}(0,function(o){if(function(c){return Array.isArray(c==null?void 0:c.errors)}(o))return{values:{},errors:hne(fne(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},M6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},O4=Ne.createContext&&Ne.createContext(M6),pne=["attr","size","title"];function gne(t,e){if(t==null)return{};var s=xne(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function xne(t,e){if(t==null)return{};var s={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;s[r]=t[r]}return s}function pv(){return pv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},pv.apply(this,arguments)}function F4(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,r)}return s}function gv(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?F4(Object(s),!0).forEach(function(r){vne(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):F4(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function vne(t,e,s){return e=yne(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function yne(t){var e=wne(t,"string");return typeof e=="symbol"?e:e+""}function wne(t,e){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D6(t){return t&&t.map((e,s)=>Ne.createElement(e.tag,gv({key:s},e.attr),D6(e.child)))}function jne(t){return e=>Ne.createElement(bne,pv({attr:gv({},t.attr)},e),D6(t.child))}function bne(t){var e=s=>{var{attr:r,size:i,title:a}=t,o=gne(t,pne),c=i||s.size||"1em",d;return s.className&&(d=s.className),t.className&&(d=(d?d+" ":"")+t.className),Ne.createElement("svg",pv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,r,o,{className:d,style:gv(gv({color:t.color||s.color},s.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),a&&Ne.createElement("title",null,a),t.children)};return O4!==void 0?Ne.createElement(O4.Consumer,null,s=>e(s)):e(M6)}function k6(t){return jne({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}const Nne=q.object({username:q.string().min(1,"Email is required"),password:q.string().min(1,"Password is required")}),Cne=()=>{const{user:t,isAuthenticated:e,isLoading:s,login:r,logout:i,googleLogin:a}=Kr(),[o,c]=Ne.useState(!1),[d,h]=Ne.useState(null),g=mn({resolver:pn(Nne),defaultValues:{username:"",password:""}});async function m(j){try{c(!0),h(null),console.log("Login form submitted from dashboard"),await r(j.username,j.password)||h("Invalid username or password")}catch(N){console.error("Login error:",N),h("An error occurred during login. Please try again.")}finally{c(!1)}}async function p(){try{console.log("Initiating Google OAuth login flow from dashboard"),c(!0),h(null),localStorage.getItem("oauth_client_state")&&(console.log("Clearing previous oauth state from localStorage"),localStorage.removeItem("oauth_client_state"),localStorage.removeItem("oauth_server_state"),localStorage.removeItem("oauth_timestamp")),await a()}catch(j){console.error("Google login error:",j),h("An error occurred preparing for Google login. Please try again."),c(!1)}}const v=async()=>{await i()};return n.jsxs(Ae,{className:"shadow-sm",children:[n.jsxs(Be,{className:"pb-2",children:[n.jsxs(Ve,{className:"flex items-center text-lg",children:[n.jsx(q0,{className:"mr-2 h-5 w-5 text-primary"}),"User Management"]}),n.jsx(ct,{children:e?"Manage your account and system access":"Login to access the pool management system"})]}),n.jsx(Ee,{children:s?n.jsxs("div",{className:"flex justify-center items-center py-6",children:[n.jsx(Kt,{className:"h-6 w-6 animate-spin text-primary"}),n.jsx("span",{className:"ml-2",children:"Checking authentication..."})]}):e&&t?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary",children:n.jsx(xi,{className:"h-6 w-6"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"font-medium",children:t.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:t.email}),n.jsxs("p",{className:"text-xs text-muted-foreground capitalize",children:["Role: ",t.role]})]})]}),n.jsxs("div",{className:"flex gap-2 flex-wrap",children:[n.jsxs(H,{variant:"outline",size:"sm",className:"flex items-center",children:[n.jsx(Ep,{className:"mr-1 h-4 w-4"}),"Dashboard"]}),n.jsxs(H,{variant:"outline",size:"sm",className:"flex items-center",children:[n.jsx(q0,{className:"mr-1 h-4 w-4"}),"Profile"]}),n.jsxs(H,{variant:"outline",size:"sm",className:"flex items-center text-destructive hover:text-destructive",onClick:v,children:[n.jsx(gy,{className:"mr-1 h-4 w-4"}),"Logout"]})]})]}):n.jsxs("div",{className:"space-y-4",children:[d&&n.jsx("div",{className:"p-3 text-sm bg-red-50 border border-red-200 text-red-700 rounded",children:d}),n.jsxs(H,{variant:"outline",className:"w-full flex items-center justify-center",type:"button",onClick:p,disabled:o,children:[n.jsx(k6,{className:"mr-2 h-5 w-5"}),"Sign in with Google"]}),n.jsxs("div",{className:"relative my-3",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("span",{className:"w-full border-t border-gray-300"})}),n.jsx("div",{className:"relative flex justify-center text-xs",children:n.jsx("span",{className:"bg-white px-2 text-muted-foreground",children:"Or"})})]}),n.jsx(fn,{...g,children:n.jsxs("form",{onSubmit:g.handleSubmit(m),className:"space-y-3",children:[n.jsx(J,{control:g.control,name:"username",render:({field:j})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Username or Email"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter your username",...j})}),n.jsx(ne,{})]})}),n.jsx(J,{control:g.control,name:"password",render:({field:j})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Password"}),n.jsx(Q,{children:n.jsx(ve,{type:"password",placeholder:"Enter your password",...j})}),n.jsx(ne,{})]})}),n.jsx(H,{type:"submit",className:"w-full",disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Logging in..."]}):n.jsxs(n.Fragment,{children:[n.jsx(G0,{className:"mr-2 h-4 w-4"}),"Login"]})})]})})]})}),e&&n.jsxs(Pn,{className:"bg-muted/20 py-2 px-6 border-t text-xs text-muted-foreground",children:["Last login: ",new Date().toLocaleString()]})]})},Sne=mg("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Cr=y.forwardRef(({className:t,variant:e,...s},r)=>n.jsx("div",{ref:r,role:"alert",className:we(Sne({variant:e}),t),...s}));Cr.displayName="Alert";const eo=y.forwardRef(({className:t,...e},s)=>n.jsx("h5",{ref:s,className:we("mb-1 font-medium leading-none tracking-tight",t),...e}));eo.displayName="AlertTitle";const Sr=y.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:we("text-sm [&_p]:leading-relaxed",t),...e}));Sr.displayName="AlertDescription";const Ane=q.object({username:q.string().min(1,"Email is required"),password:q.string().min(1,"Password is required")});function Ene(){const{toast:t}=Lt(),{login:e,googleLogin:s}=Kr();_n();const[r,i]=y.useState(null),[a,o]=y.useState(!1),c=mn({resolver:pn(Ane),defaultValues:{username:"",password:""}});async function d(g){try{o(!0),i(null),console.log("Login form submitted"),await e(g.username,g.password)?t({title:"Login successful",description:"Welcome back!"}):(t({title:"Login failed",description:"Invalid username or password",variant:"destructive"}),i("Invalid username or password"))}catch(m){console.error("Login error:",m),i("An error occurred during login. Please try again."),t({title:"Login error",description:"An error occurred during login. Please try again.",variant:"destructive"})}finally{o(!1)}}async function h(){try{console.log("Initiating Google OAuth login flow"),o(!0),i(null),localStorage.getItem("oauth_client_state")&&(console.log("Clearing previous oauth state from localStorage"),localStorage.removeItem("oauth_client_state"),localStorage.removeItem("oauth_server_state"),localStorage.removeItem("oauth_timestamp")),t({title:"Google Sign-In",description:"Redirecting to Google for authentication..."}),await s()}catch(g){console.error("Google login error:",g),i("An error occurred preparing for Google login. Please try again."),t({title:"Google login error",description:"An error occurred preparing for Google login. Please try again.",variant:"destructive"}),o(!1)}}return n.jsxs(Ae,{className:"w-full mb-6",children:[n.jsxs(Be,{className:"space-y-1",children:[n.jsx(Ve,{className:"text-xl font-bold",children:"Sign in to SmartWater Pools"}),n.jsx(ct,{children:"Please sign in to access your pool service management dashboard"})]}),n.jsxs(Ee,{className:"space-y-4",children:[r&&n.jsxs(Cr,{variant:"destructive",className:"mb-4",children:[n.jsx(QC,{className:"h-4 w-4"}),n.jsx(eo,{children:"Error"}),n.jsx(Sr,{children:r})]}),n.jsxs(H,{variant:"outline",className:"w-full flex items-center justify-center",type:"button",onClick:h,children:[n.jsx(k6,{className:"mr-2 h-5 w-5"}),"Sign in with Google"]}),n.jsxs("div",{className:"relative my-4",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("span",{className:"w-full border-t border-gray-300"})}),n.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:n.jsx("span",{className:"bg-white px-2 text-muted-foreground",children:"Or"})})]}),n.jsx(fn,{...c,children:n.jsxs("form",{onSubmit:c.handleSubmit(d),className:"space-y-4",children:[n.jsx(J,{control:c.control,name:"username",render:({field:g})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Username or Email"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter your username",...g})}),n.jsx(ne,{})]})}),n.jsx(J,{control:c.control,name:"password",render:({field:g})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Password"}),n.jsx(Q,{children:n.jsx(ve,{type:"password",placeholder:"Enter your password",...g})}),n.jsx(ne,{})]})}),n.jsx(H,{type:"submit",className:"w-full",disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Logging in..."]}):n.jsxs(n.Fragment,{children:[n.jsx(G0,{className:"mr-2 h-4 w-4"}),"Login"]})})]})})]})]})}const _ne=t=>(t.startsWith("/")||(t="/"+t),t);function B4(){var d,h,g,m;const{isAuthenticated:t,isLoading:e,checkSession:s}=Kr();y.useState(!0),y.useEffect(()=>{console.log("Dashboard: Checking authentication status");try{s().then(p=>{console.log("Dashboard: Authentication check result:",p?"Authenticated":"Not authenticated")}).catch(p=>{console.error("Dashboard: Error checking session:",p)})}catch(p){console.error("Dashboard: Critical error in session check:",p)}},[]);const{data:r,isLoading:i,error:a}=wt({queryKey:["/api/dashboard/summary"],queryFn:async()=>{console.log("Fetching data from:","/api/dashboard/summary");const p=_ne("/api/dashboard/summary"),v=await fetch(p);if(!v.ok)throw new Error(`API error: ${v.status} ${v.statusText}`);return v.json()},enabled:t}),o=e||i,c={metrics:{activeProjects:((d=r==null?void 0:r.metrics)==null?void 0:d.activeProjects)||0,maintenanceThisWeek:((h=r==null?void 0:r.metrics)==null?void 0:h.maintenanceThisWeek)||0,pendingRepairs:((g=r==null?void 0:r.metrics)==null?void 0:g.pendingRepairs)||0,totalClients:((m=r==null?void 0:r.metrics)==null?void 0:m.totalClients)||0},recentProjects:Array.isArray(r==null?void 0:r.recentProjects)?r.recentProjects.map(p=>({...p,completion:p.percentComplete||0,deadline:p.estimatedCompletionDate?new Date(p.estimatedCompletionDate):new Date,startDate:p.startDate?new Date(p.startDate):new Date,estimatedCompletionDate:p.estimatedCompletionDate||p.startDate,projectType:p.projectType||"construction",assignments:p.assignments||[]})):[],upcomingMaintenances:Array.isArray(r==null?void 0:r.upcomingMaintenances)?r.upcomingMaintenances:[],recentRepairs:Array.isArray(r==null?void 0:r.recentRepairs)?r.recentRepairs:[]};return n.jsxs("div",{children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground font-heading",children:"Dashboard"}),n.jsxs("div",{className:"flex space-x-2 mt-3 md:mt-0",children:[n.jsxs("div",{className:"relative",children:[n.jsx(ve,{type:"text",placeholder:"Search...",className:"pl-10 pr-4"}),n.jsx(Bi,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]}),n.jsxs(H,{className:"bg-primary hover:bg-primary/90 text-white font-medium",children:[n.jsx(gi,{className:"h-4 w-4 mr-1"}),"New Task"]})]})]}),!t&&n.jsx(Ene,{}),t&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:o?Array(4).fill(0).map((p,v)=>n.jsx(Ae,{className:"border border-gray-100",children:n.jsx(Ee,{className:"p-5",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_e,{className:"h-4 w-24"}),n.jsx(_e,{className:"h-8 w-16"}),n.jsx(_e,{className:"h-3 w-32"})]}),n.jsx(_e,{className:"h-12 w-12 rounded-full"})]})})},v)):n.jsxs(n.Fragment,{children:[n.jsx(vx,{title:"Active Projects",value:(c==null?void 0:c.metrics.activeProjects)||0,changeText:"12% from last month",changeType:"increase",icon:n.jsx(zl,{className:"text-primary text-xl"}),iconBgColor:"bg-blue-50"}),n.jsx(vx,{title:"Maintenance This Week",value:(c==null?void 0:c.metrics.maintenanceThisWeek)||0,changeText:"5% from last week",changeType:"increase",icon:n.jsx(Jh,{className:"text-green-500 text-xl"}),iconBgColor:"bg-green-50"}),n.jsx(vx,{title:"Pending Repairs",value:(c==null?void 0:c.metrics.pendingRepairs)||0,changeText:"3 new today",changeType:"increase",icon:n.jsx(so,{className:"text-yellow-500 text-xl"}),iconBgColor:"bg-yellow-50"}),n.jsx(vx,{title:"Total Clients",value:(c==null?void 0:c.metrics.totalClients)||0,changeText:"2 new this month",changeType:"increase",icon:n.jsx(yi,{className:"text-purple-500 text-xl"}),iconBgColor:"bg-purple-50"})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 lg:col-span-2",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground font-heading",children:"Construction Projects"}),n.jsxs(rs,{href:"/projects",className:"text-sm text-primary hover:text-primary/80 font-medium flex items-center",children:["View All ",n.jsx(ph,{className:"ml-1 h-4 w-4"})]})]}),n.jsx("div",{className:"p-4",children:o?Array(2).fill(0).map((p,v)=>n.jsxs("div",{className:"border border-gray-100 rounded-lg mb-4 overflow-hidden",children:[n.jsx("div",{className:"p-4 bg-blue-50",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(_e,{className:"h-10 w-10 rounded-lg"}),n.jsxs("div",{className:"ml-3 space-y-2",children:[n.jsx(_e,{className:"h-5 w-48"}),n.jsx(_e,{className:"h-4 w-32"})]})]})}),n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsx(_e,{className:"h-2.5 w-full rounded-full"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(_e,{className:"h-4 w-32"}),n.jsx(_e,{className:"h-4 w-24"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("div",{className:"flex space-x-1",children:[n.jsx(_e,{className:"h-6 w-6 rounded-full"}),n.jsx(_e,{className:"h-6 w-6 rounded-full"}),n.jsx(_e,{className:"h-6 w-6 rounded-full"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(_e,{className:"h-8 w-8 rounded-lg"}),n.jsx(_e,{className:"h-8 w-8 rounded-lg"})]})]})]})]},v)):a?n.jsxs("div",{className:"p-6 text-center",children:[n.jsx(W1,{className:"h-12 w-12 mx-auto text-gray-400"}),n.jsx("h3",{className:"mt-2 text-base font-semibold text-gray-900",children:"Connection Error"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Unable to fetch project data. Please check your connection."})]}):(c==null?void 0:c.recentProjects.length)>0?c.recentProjects.map(p=>n.jsx(Hee,{project:p},p.id)):n.jsxs("div",{className:"p-6 text-center",children:[n.jsx(zl,{className:"h-12 w-12 mx-auto text-gray-400"}),n.jsx("h3",{className:"mt-2 text-base font-semibold text-gray-900",children:"No Projects"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"There are no active projects to display."})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground font-heading",children:"Upcoming Maintenance"}),n.jsxs(rs,{href:"/maintenance",className:"text-sm text-primary hover:text-primary/80 font-medium flex items-center",children:["View All ",n.jsx(ph,{className:"ml-1 h-4 w-4"})]})]}),n.jsx("div",{className:"p-4",children:o?Array(5).fill(0).map((p,v)=>n.jsx("div",{className:"border border-gray-100 rounded-lg mb-3 p-3",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(_e,{className:"w-12 h-12 rounded-lg mr-3"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx(_e,{className:"h-4 w-32"}),n.jsx(_e,{className:"h-3 w-24"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(_e,{className:"h-4 w-16 rounded-full"}),n.jsx(_e,{className:"h-4 w-24 ml-2"})]})]}),n.jsx(_e,{className:"h-6 w-6 rounded-full"})]})},v)):a?n.jsxs("div",{className:"p-6 text-center",children:[n.jsx(W1,{className:"h-12 w-12 mx-auto text-gray-400"}),n.jsx("h3",{className:"mt-2 text-base font-semibold text-gray-900",children:"Connection Error"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Unable to fetch maintenance data. Please check your connection."})]}):(c==null?void 0:c.upcomingMaintenances.length)>0?c.upcomingMaintenances.map(p=>n.jsx(qee,{maintenance:p},p.id)):n.jsxs("div",{className:"p-6 text-center",children:[n.jsx(Jh,{className:"h-12 w-12 mx-auto text-gray-400"}),n.jsx("h3",{className:"mt-2 text-base font-semibold text-gray-900",children:"No Upcoming Maintenance"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"There are no scheduled maintenance visits."})]})})]})]}),n.jsx("div",{className:"mt-6 mb-6",children:n.jsx(Cne,{})}),n.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow-sm border border-gray-100",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground font-heading",children:"Recent Repair Requests"}),n.jsxs(rs,{href:"/repairs",className:"text-sm text-primary hover:text-primary/80 font-medium flex items-center",children:["View All ",n.jsx(ph,{className:"ml-1 h-4 w-4"})]})]}),n.jsx("div",{className:"overflow-x-auto md:overflow-visible",children:o?n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx(_e,{className:"h-8 w-full"}),n.jsx(_e,{className:"h-16 w-full"}),n.jsx(_e,{className:"h-16 w-full"}),n.jsx(_e,{className:"h-16 w-full"})]})}):a?n.jsxs("div",{className:"p-10 text-center",children:[n.jsx(W1,{className:"h-12 w-12 mx-auto text-gray-400"}),n.jsx("h3",{className:"mt-2 text-base font-semibold text-gray-900",children:"Connection Error"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Unable to fetch repair data. Please check your connection."})]}):(c==null?void 0:c.recentRepairs.length)===0?n.jsxs("div",{className:"p-10 text-center",children:[n.jsx(so,{className:"h-12 w-12 mx-auto text-gray-400"}),n.jsx("h3",{className:"mt-2 text-base font-semibold text-gray-900",children:"No Repair Requests"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"There are no recent repair requests to display."})]}):n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Issue Type"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned To"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c==null?void 0:c.recentRepairs.map(p=>{var N,E,_,S,C,I,P,L;const v=Vc(p.status),j=wl(p.priority);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0 h-8 w-8",children:n.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-600",children:(E=(N=p.client)==null?void 0:N.user)!=null&&E.name?p.client.user.name.charAt(0):"?"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("div",{className:"text-sm font-medium text-foreground",children:((S=(_=p.client)==null?void 0:_.user)==null?void 0:S.name)||"Unknown Client"}),n.jsx("div",{className:"text-xs text-gray-500",children:((I=(C=p.client)==null?void 0:C.user)==null?void 0:I.address)||"No address"})]})]})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsx("div",{className:"text-sm text-gray-900",children:p.issue}),n.jsx("div",{className:"text-xs text-gray-500",children:p.description?p.description.substring(0,30)+"...":"No description"})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${j.bg} ${j.text}`,children:p.priority?p.priority.charAt(0).toUpperCase()+p.priority.slice(1):"Medium"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${v.bg} ${v.text}`,children:p.status?p.status.charAt(0).toUpperCase()+p.status.slice(1):"Pending"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("div",{className:"text-sm text-gray-900",children:((L=(P=p.technician)==null?void 0:P.user)==null?void 0:L.name)||"Unassigned"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("div",{className:"text-sm text-gray-900",children:ln(p.scheduledDate||new Date)})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[n.jsxs(H,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full",children:[n.jsx(xo,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"View"})]}),n.jsxs(H,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full",children:[n.jsx(Gr,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Edit"})]}),n.jsxs(H,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full",children:[n.jsx(ri,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Menu"})]})]})]},p.id)})})]})})]})]})]})}const Xe=Symbol.for("drizzle:entityKind");function si(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,Xe))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let s=Object.getPrototypeOf(t).constructor;if(s)for(;s;){if(Xe in s&&s[Xe]===e[Xe])return!0;s=Object.getPrototypeOf(s)}return!1}var OT;OT=Xe;class lm{constructor(e,s){Se(this,"name");Se(this,"keyAsName");Se(this,"primary");Se(this,"notNull");Se(this,"default");Se(this,"defaultFn");Se(this,"onUpdateFn");Se(this,"hasDefault");Se(this,"isUnique");Se(this,"uniqueName");Se(this,"uniqueType");Se(this,"dataType");Se(this,"columnType");Se(this,"enumValues");Se(this,"generated");Se(this,"generatedIdentity");Se(this,"config");this.table=e,this.config=s,this.name=s.name,this.keyAsName=s.keyAsName,this.notNull=s.notNull,this.default=s.default,this.defaultFn=s.defaultFn,this.onUpdateFn=s.onUpdateFn,this.hasDefault=s.hasDefault,this.primary=s.primaryKey,this.isUnique=s.isUnique,this.uniqueName=s.uniqueName,this.uniqueType=s.uniqueType,this.dataType=s.dataType,this.columnType=s.columnType,this.generated=s.generated,this.generatedIdentity=s.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}Se(lm,OT,"Column");var FT;FT=Xe;class P6{constructor(e,s,r){Se(this,"config");Se(this,"$default",this.$defaultFn);Se(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:s,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}Se(P6,FT,"ColumnBuilder");const Ch=Symbol.for("drizzle:Name");var BT;BT=Xe;class R6{constructor(e,s){Se(this,"reference");Se(this,"_onUpdate","no action");Se(this,"_onDelete","no action");this.reference=()=>{const{name:r,columns:i,foreignColumns:a}=e();return{name:r,columns:i,foreignTable:a[0].table,foreignColumns:a}},s&&(this._onUpdate=s.onUpdate,this._onDelete=s.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new L6(e,this)}}Se(R6,BT,"PgForeignKeyBuilder");var zT;zT=Xe;class L6{constructor(e,s){Se(this,"reference");Se(this,"onUpdate");Se(this,"onDelete");this.table=e,this.reference=s.reference,this.onUpdate=s._onUpdate,this.onDelete=s._onDelete}getName(){const{name:e,columns:s,foreignColumns:r}=this.reference(),i=s.map(c=>c.name),a=r.map(c=>c.name),o=[this.table[Ch],...i,r[0].table[Ch],...a];return e??`${o.join("_")}_fk`}}Se(L6,zT,"PgForeignKey");function Ine(t,...e){return t(...e)}function Tne(t,e){return`${t[Ch]}_${e.join("_")}_unique`}function z4(t,e,s){for(let r=e;r<t.length;r++){const i=t[r];if(i==="\\"){r++;continue}if(i==='"')return[t.slice(e,r).replace(/\\/g,""),r+1];if(!s&&(i===","||i==="}"))return[t.slice(e,r).replace(/\\/g,""),r]}return[t.slice(e).replace(/\\/g,""),t.length]}function O6(t,e=0){const s=[];let r=e,i=!1;for(;r<t.length;){const a=t[r];if(a===","){(i||r===e)&&s.push(""),i=!0,r++;continue}if(i=!1,a==="\\"){r+=2;continue}if(a==='"'){const[d,h]=z4(t,r+1,!0);s.push(d),r=h;continue}if(a==="}")return[s,r+1];if(a==="{"){const[d,h]=O6(t,r+1);s.push(d),r=h;continue}const[o,c]=z4(t,r,!1);s.push(o),r=c}return[s,r]}function Mne(t){const[e]=O6(t,1);return e}function F6(t){return`{${t.map(e=>Array.isArray(e)?F6(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var VT,$T;class Yn extends($T=P6,VT=Xe,$T){constructor(){super(...arguments);Se(this,"foreignKeyConfigs",[])}array(s){return new z6(this.config.name,this,s)}references(s,r={}){return this.foreignKeyConfigs.push({ref:s,actions:r}),this}unique(s,r){return this.config.isUnique=!0,this.config.uniqueName=s,this.config.uniqueType=r==null?void 0:r.nulls,this}generatedAlwaysAs(s){return this.config.generated={as:s,type:"always",mode:"stored"},this}buildForeignKeys(s,r){return this.foreignKeyConfigs.map(({ref:i,actions:a})=>Ine((o,c)=>{const d=new R6(()=>{const h=o();return{columns:[s],foreignColumns:[h]}});return c.onUpdate&&d.onUpdate(c.onUpdate),c.onDelete&&d.onDelete(c.onDelete),d.build(r)},i,a))}buildExtraConfigColumn(s){return new B6(s,this.config)}}Se(Yn,VT,"PgColumnBuilder");var UT,WT;class gn extends(WT=lm,UT=Xe,WT){constructor(e,s){s.uniqueName||(s.uniqueName=Tne(e,[s.name])),super(e,s),this.table=e}}Se(gn,UT,"PgColumn");var HT,qT;class B6 extends(qT=gn,HT=Xe,qT){constructor(){super(...arguments);Se(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});Se(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(s){return this.indexConfig.opClass=s,this}}Se(B6,HT,"ExtraConfigColumn");var GT,YT;class z6 extends(YT=Yn,GT=Xe,YT){constructor(e,s,r){super(e,"array","PgArray"),this.config.baseBuilder=s,this.config.size=r}build(e){const s=this.config.baseBuilder.build(e);return new Gb(e,this.config,s)}}Se(z6,GT,"PgArrayBuilder");var KT,ZT;const Zv=class Zv extends(ZT=gn,KT=Xe,ZT){constructor(s,r,i,a){super(s,r);Se(this,"size");this.baseColumn=i,this.range=a,this.size=r.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(s){return typeof s=="string"&&(s=Mne(s)),s.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(s,r=!1){const i=s.map(a=>a===null?null:si(this.baseColumn,Zv)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return r?i:F6(i)}};Se(Zv,KT,"PgArray");let Gb=Zv;const V4=Symbol.for("drizzle:isPgEnum");function Dne(t){return!!t&&typeof t=="function"&&V4 in t&&t[V4]===!0}var QT;QT=Xe;class L2{constructor(e,s,r,i=!1){this._={brand:"Subquery",sql:e,selectedFields:s,alias:r,isWith:i}}}Se(L2,QT,"Subquery");const kne={startActiveSpan(t,e){return e()}},Sh=Symbol.for("drizzle:ViewBaseConfig"),Cw=Symbol.for("drizzle:Schema"),$4=Symbol.for("drizzle:Columns"),U4=Symbol.for("drizzle:ExtraConfigColumns"),Sw=Symbol.for("drizzle:OriginalName"),Aw=Symbol.for("drizzle:BaseName"),xv=Symbol.for("drizzle:IsAlias"),W4=Symbol.for("drizzle:ExtraConfigBuilder"),V6=Symbol.for("drizzle:IsDrizzleTable");var XT,JT,eM,tM,nM,sM,rM,iM,aM,oM,kx;let va=(oM=Xe,aM=Ch,iM=Sw,rM=Cw,sM=$4,nM=U4,tM=Aw,eM=xv,JT=V6,XT=W4,kx=class{constructor(e,s,r){Se(this,aM);Se(this,iM);Se(this,rM);Se(this,sM);Se(this,nM);Se(this,tM);Se(this,eM,!1);Se(this,JT,!0);Se(this,XT);this[Ch]=this[Sw]=e,this[Cw]=s,this[Aw]=r}},Se(kx,oM,"Table"),Se(kx,"Symbol",{Name:Ch,Schema:Cw,OriginalName:Sw,Columns:$4,ExtraConfigColumns:U4,BaseName:Aw,IsAlias:xv,ExtraConfigBuilder:W4}),kx);function $6(t){return typeof t=="object"&&t!==null&&V6 in t}function Pne(t){return t!=null&&typeof t.getSQL=="function"}function Rne(t){var s;const e={sql:"",params:[]};for(const r of t)e.sql+=r.sql,e.params.push(...r.params),(s=r.typings)!=null&&s.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}var lM;lM=Xe;class Ua{constructor(e){Se(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new Pr([this])}}Se(Ua,lM,"StringChunk");var cM;cM=Xe;const Td=class Td{constructor(e){Se(this,"decoder",U6);Se(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return kne.startActiveSpan("drizzle.buildSQL",s=>{const r=this.buildQueryFromSourceParams(this.queryChunks,e);return s==null||s.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,s){const r=Object.assign({},s,{inlineParams:s.inlineParams||this.shouldInlineParams,paramStartIndex:s.paramStartIndex||{value:0}}),{casing:i,escapeName:a,escapeParam:o,prepareTyping:c,inlineParams:d,paramStartIndex:h}=r;return Rne(e.map(g=>{var m;if(si(g,Ua))return{sql:g.value.join(""),params:[]};if(si(g,vv))return{sql:a(g.value),params:[]};if(g===void 0)return{sql:"",params:[]};if(Array.isArray(g)){const p=[new Ua("(")];for(const[v,j]of g.entries())p.push(j),v<g.length-1&&p.push(new Ua(", "));return p.push(new Ua(")")),this.buildQueryFromSourceParams(p,r)}if(si(g,Td))return this.buildQueryFromSourceParams(g.queryChunks,{...r,inlineParams:d||g.shouldInlineParams});if(si(g,va)){const p=g[va.Symbol.Schema],v=g[va.Symbol.Name];return{sql:p===void 0||g[xv]?a(v):a(p)+"."+a(v),params:[]}}if(si(g,lm)){const p=i.getColumnCasing(g);if(s.invokeSource==="indexes")return{sql:a(p),params:[]};const v=g.table[va.Symbol.Schema];return{sql:g.table[xv]||v===void 0?a(g.table[va.Symbol.Name])+"."+a(p):a(v)+"."+a(g.table[va.Symbol.Name])+"."+a(p),params:[]}}if(si(g,q6)){const p=g[Sh].schema,v=g[Sh].name;return{sql:p===void 0||g[Sh].isAlias?a(v):a(p)+"."+a(v),params:[]}}if(si(g,O2)){if(si(g.value,wv))return{sql:o(h.value++,g),params:[g],typings:["none"]};const p=g.value===null?null:g.encoder.mapToDriverValue(g.value);if(si(p,Td))return this.buildQueryFromSourceParams([p],r);if(d)return{sql:this.mapInlineParam(p,r),params:[]};let v=["none"];return c&&(v=[c(g.encoder)]),{sql:o(h.value++,p),params:[p],typings:v}}return si(g,wv)?{sql:o(h.value++,g),params:[g],typings:["none"]}:si(g,Td.Aliased)&&g.fieldAlias!==void 0?{sql:a(g.fieldAlias),params:[]}:si(g,L2)?g._.isWith?{sql:a(g._.alias),params:[]}:this.buildQueryFromSourceParams([new Ua("("),g._.sql,new Ua(") "),new vv(g._.alias)],r):Dne(g)?g.schema?{sql:a(g.schema)+"."+a(g.enumName),params:[]}:{sql:a(g.enumName),params:[]}:Pne(g)?(m=g.shouldOmitSQLParens)!=null&&m.call(g)?this.buildQueryFromSourceParams([g.getSQL()],r):this.buildQueryFromSourceParams([new Ua("("),g.getSQL(),new Ua(")")],r):d?{sql:this.mapInlineParam(g,r),params:[]}:{sql:o(h.value++,g),params:[g],typings:["none"]}}))}mapInlineParam(e,{escapeString:s}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return s(e);if(typeof e=="object"){const r=e.toString();return s(r==="[object Object]"?JSON.stringify(e):r)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new Td.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};Se(Td,cM,"SQL");let Pr=Td;var dM;dM=Xe;class vv{constructor(e){Se(this,"brand");this.value=e}getSQL(){return new Pr([this])}}Se(vv,dM,"Name");const U6={mapFromDriverValue:t=>t},W6={mapToDriverValue:t=>t};({...U6,...W6});var uM;uM=Xe;class O2{constructor(e,s=W6){Se(this,"brand");this.value=e,this.encoder=s}getSQL(){return new Pr([this])}}Se(O2,uM,"Param");function yv(t,...e){const s=[];(e.length>0||t.length>0&&t[0]!=="")&&s.push(new Ua(t[0]));for(const[r,i]of e.entries())s.push(i,new Ua(t[r+1]));return new Pr(s)}(t=>{function e(){return new Pr([])}t.empty=e;function s(d){return new Pr(d)}t.fromList=s;function r(d){return new Pr([new Ua(d)])}t.raw=r;function i(d,h){const g=[];for(const[m,p]of d.entries())m>0&&h!==void 0&&g.push(h),g.push(p);return new Pr(g)}t.join=i;function a(d){return new vv(d)}t.identifier=a;function o(d){return new wv(d)}t.placeholder=o;function c(d,h){return new O2(d,h)}t.param=c})(yv||(yv={}));(t=>{var s;s=Xe;const r=class r{constructor(a,o){Se(this,"isSelectionField",!1);this.sql=a,this.fieldAlias=o}getSQL(){return this.sql}clone(){return new r(this.sql,this.fieldAlias)}};Se(r,s,"SQL.Aliased");let e=r;t.Aliased=e})(Pr||(Pr={}));var hM;hM=Xe;class wv{constructor(e){this.name=e}getSQL(){return new Pr([this])}}Se(wv,hM,"Placeholder");const H6=Symbol.for("drizzle:IsDrizzleView");var mM,fM,pM;pM=Xe,fM=Sh,mM=H6;class q6{constructor({name:e,schema:s,selectedFields:r,query:i}){Se(this,fM);Se(this,mM,!0);this[Sh]={name:e,originalName:e,schema:s,selectedFields:r,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new Pr([this])}}Se(q6,pM,"View");function Lne(t){return typeof t=="object"&&t!==null&&H6 in t}lm.prototype.getSQL=function(){return new Pr([this])};va.prototype.getSQL=function(){return new Pr([this])};L2.prototype.getSQL=function(){return new Pr([this])};function One(t){return t[va.Symbol.Columns]}function Fne(t){return t[Sh].selectedFields}function Zr(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var gM,xM;class Ag extends(xM=Yn,gM=Xe,xM){generatedAlwaysAsIdentity(e){if(e){const{name:s,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:s,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:s,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:s,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}Se(Ag,gM,"PgIntColumnBaseBuilder");var vM,yM;class G6 extends(yM=Ag,vM=Xe,yM){constructor(e){super(e,"number","PgBigInt53")}build(e){return new Y6(e,this.config)}}Se(G6,vM,"PgBigInt53Builder");var wM,jM;class Y6 extends(jM=gn,wM=Xe,jM){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}Se(Y6,wM,"PgBigInt53");var bM,NM;class K6 extends(NM=Ag,bM=Xe,NM){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Z6(e,this.config)}}Se(K6,bM,"PgBigInt64Builder");var CM,SM;class Z6 extends(SM=gn,CM=Xe,SM){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}Se(Z6,CM,"PgBigInt64");function Bne(t,e){const{name:s,config:r}=Zr(t,e);return r.mode==="number"?new G6(s):new K6(s)}var AM,EM;class Q6 extends(EM=Yn,AM=Xe,EM){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new X6(e,this.config)}}Se(Q6,AM,"PgBigSerial53Builder");var _M,IM;class X6 extends(IM=gn,_M=Xe,IM){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}Se(X6,_M,"PgBigSerial53");var TM,MM;class J6 extends(MM=Yn,TM=Xe,MM){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new e8(e,this.config)}}Se(J6,TM,"PgBigSerial64Builder");var DM,kM;class e8 extends(kM=gn,DM=Xe,kM){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}Se(e8,DM,"PgBigSerial64");function zne(t,e){const{name:s,config:r}=Zr(t,e);return r.mode==="number"?new Q6(s):new J6(s)}var PM,RM;class t8 extends(RM=Yn,PM=Xe,RM){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new n8(e,this.config)}}Se(t8,PM,"PgBooleanBuilder");var LM,OM;class n8 extends(OM=gn,LM=Xe,OM){getSQLType(){return"boolean"}}Se(n8,LM,"PgBoolean");function as(t){return new t8(t??"")}var FM,BM;class s8 extends(BM=Yn,FM=Xe,BM){constructor(e,s){super(e,"string","PgChar"),this.config.length=s.length,this.config.enumValues=s.enum}build(e){return new r8(e,this.config)}}Se(s8,FM,"PgCharBuilder");var zM,VM;class r8 extends(VM=gn,zM=Xe,VM){constructor(){super(...arguments);Se(this,"length",this.config.length);Se(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}Se(r8,zM,"PgChar");function Vne(t,e={}){const{name:s,config:r}=Zr(t,e);return new s8(s,r)}var $M,UM;class i8 extends(UM=Yn,$M=Xe,UM){constructor(e){super(e,"string","PgCidr")}build(e){return new a8(e,this.config)}}Se(i8,$M,"PgCidrBuilder");var WM,HM;class a8 extends(HM=gn,WM=Xe,HM){getSQLType(){return"cidr"}}Se(a8,WM,"PgCidr");function $ne(t){return new i8(t??"")}var qM,GM;class o8 extends(GM=Yn,qM=Xe,GM){constructor(e,s,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=s,this.config.customTypeParams=r}build(e){return new l8(e,this.config)}}Se(o8,qM,"PgCustomColumnBuilder");var YM,KM;class l8 extends(KM=gn,YM=Xe,KM){constructor(s,r){super(s,r);Se(this,"sqlName");Se(this,"mapTo");Se(this,"mapFrom");this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(s){return typeof this.mapFrom=="function"?this.mapFrom(s):s}mapToDriverValue(s){return typeof this.mapTo=="function"?this.mapTo(s):s}}Se(l8,YM,"PgCustomColumn");function Une(t){return(e,s)=>{const{name:r,config:i}=Zr(e,s);return new o8(r,i,t)}}var ZM,QM;class Im extends(QM=Yn,ZM=Xe,QM){defaultNow(){return this.default(yv`now()`)}}Se(Im,ZM,"PgDateColumnBaseBuilder");var XM,JM;class c8 extends(JM=Im,XM=Xe,JM){constructor(e){super(e,"date","PgDate")}build(e){return new d8(e,this.config)}}Se(c8,XM,"PgDateBuilder");var eD,tD;class d8 extends(tD=gn,eD=Xe,tD){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}Se(d8,eD,"PgDate");var nD,sD;class u8 extends(sD=Im,nD=Xe,sD){constructor(e){super(e,"string","PgDateString")}build(e){return new h8(e,this.config)}}Se(u8,nD,"PgDateStringBuilder");var rD,iD;class h8 extends(iD=gn,rD=Xe,iD){getSQLType(){return"date"}}Se(h8,rD,"PgDateString");function Fs(t,e){const{name:s,config:r}=Zr(t,e);return(r==null?void 0:r.mode)==="date"?new c8(s):new u8(s)}var aD,oD;class m8 extends(oD=Yn,aD=Xe,oD){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new f8(e,this.config)}}Se(m8,aD,"PgDoublePrecisionBuilder");var lD,cD;class f8 extends(cD=gn,lD=Xe,cD){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}Se(f8,lD,"PgDoublePrecision");function yo(t){return new m8(t??"")}var dD,uD;class p8 extends(uD=Yn,dD=Xe,uD){constructor(e){super(e,"string","PgInet")}build(e){return new g8(e,this.config)}}Se(p8,dD,"PgInetBuilder");var hD,mD;class g8 extends(mD=gn,hD=Xe,mD){getSQLType(){return"inet"}}Se(g8,hD,"PgInet");function Wne(t){return new p8(t??"")}var fD,pD;class x8 extends(pD=Ag,fD=Xe,pD){constructor(e){super(e,"number","PgInteger")}build(e){return new v8(e,this.config)}}Se(x8,fD,"PgIntegerBuilder");var gD,xD;class v8 extends(xD=gn,gD=Xe,xD){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}Se(v8,gD,"PgInteger");function De(t){return new x8(t??"")}var vD,yD;class y8 extends(yD=Yn,vD=Xe,yD){constructor(e,s){super(e,"string","PgInterval"),this.config.intervalConfig=s}build(e){return new w8(e,this.config)}}Se(y8,vD,"PgIntervalBuilder");var wD,jD;class w8 extends(jD=gn,wD=Xe,jD){constructor(){super(...arguments);Se(this,"fields",this.config.intervalConfig.fields);Se(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const s=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${s}${r}`}}Se(w8,wD,"PgInterval");function Hne(t,e={}){const{name:s,config:r}=Zr(t,e);return new y8(s,r)}var bD,ND;class j8 extends(ND=Yn,bD=Xe,ND){constructor(e){super(e,"json","PgJson")}build(e){return new b8(e,this.config)}}Se(j8,bD,"PgJsonBuilder");var CD,SD;class b8 extends(SD=gn,CD=Xe,SD){constructor(e,s){super(e,s)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}Se(b8,CD,"PgJson");function qne(t){return new j8(t??"")}var AD,ED;class N8 extends(ED=Yn,AD=Xe,ED){constructor(e){super(e,"json","PgJsonb")}build(e){return new C8(e,this.config)}}Se(N8,AD,"PgJsonbBuilder");var _D,ID;class C8 extends(ID=gn,_D=Xe,ID){constructor(e,s){super(e,s)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}Se(C8,_D,"PgJsonb");function Zp(t){return new N8(t??"")}var TD,MD;class S8 extends(MD=Yn,TD=Xe,MD){constructor(e){super(e,"array","PgLine")}build(e){return new A8(e,this.config)}}Se(S8,TD,"PgLineBuilder");var DD,kD;class A8 extends(kD=gn,DD=Xe,kD){getSQLType(){return"line"}mapFromDriverValue(e){const[s,r,i]=e.slice(1,-1).split(",");return[Number.parseFloat(s),Number.parseFloat(r),Number.parseFloat(i)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}Se(A8,DD,"PgLine");var PD,RD;class E8 extends(RD=Yn,PD=Xe,RD){constructor(e){super(e,"json","PgLineABC")}build(e){return new _8(e,this.config)}}Se(E8,PD,"PgLineABCBuilder");var LD,OD;class _8 extends(OD=gn,LD=Xe,OD){getSQLType(){return"line"}mapFromDriverValue(e){const[s,r,i]=e.slice(1,-1).split(",");return{a:Number.parseFloat(s),b:Number.parseFloat(r),c:Number.parseFloat(i)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}Se(_8,LD,"PgLineABC");function Gne(t,e){const{name:s,config:r}=Zr(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new S8(s):new E8(s)}var FD,BD;class I8 extends(BD=Yn,FD=Xe,BD){constructor(e){super(e,"string","PgMacaddr")}build(e){return new T8(e,this.config)}}Se(I8,FD,"PgMacaddrBuilder");var zD,VD;class T8 extends(VD=gn,zD=Xe,VD){getSQLType(){return"macaddr"}}Se(T8,zD,"PgMacaddr");function Yne(t){return new I8(t??"")}var $D,UD;class M8 extends(UD=Yn,$D=Xe,UD){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new D8(e,this.config)}}Se(M8,$D,"PgMacaddr8Builder");var WD,HD;class D8 extends(HD=gn,WD=Xe,HD){getSQLType(){return"macaddr8"}}Se(D8,WD,"PgMacaddr8");function Kne(t){return new M8(t??"")}var qD,GD;class k8 extends(GD=Yn,qD=Xe,GD){constructor(e,s,r){super(e,"string","PgNumeric"),this.config.precision=s,this.config.scale=r}build(e){return new P8(e,this.config)}}Se(k8,qD,"PgNumericBuilder");var YD,KD;class P8 extends(KD=gn,YD=Xe,KD){constructor(s,r){super(s,r);Se(this,"precision");Se(this,"scale");this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}Se(P8,YD,"PgNumeric");function Zne(t,e){const{name:s,config:r}=Zr(t,e);return new k8(s,r==null?void 0:r.precision,r==null?void 0:r.scale)}var ZD,QD;class R8 extends(QD=Yn,ZD=Xe,QD){constructor(e){super(e,"array","PgPointTuple")}build(e){return new L8(e,this.config)}}Se(R8,ZD,"PgPointTupleBuilder");var XD,JD;class L8 extends(JD=gn,XD=Xe,JD){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[s,r]=e.slice(1,-1).split(",");return[Number.parseFloat(s),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}Se(L8,XD,"PgPointTuple");var e3,t3;class O8 extends(t3=Yn,e3=Xe,t3){constructor(e){super(e,"json","PgPointObject")}build(e){return new F8(e,this.config)}}Se(O8,e3,"PgPointObjectBuilder");var n3,s3;class F8 extends(s3=gn,n3=Xe,s3){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[s,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(s),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}Se(F8,n3,"PgPointObject");function Qne(t,e){const{name:s,config:r}=Zr(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new R8(s):new O8(s)}function Xne(t){const e=[];for(let s=0;s<t.length;s+=2)e.push(Number.parseInt(t.slice(s,s+2),16));return new Uint8Array(e)}function H4(t,e){const s=new ArrayBuffer(8),r=new DataView(s);for(let i=0;i<8;i++)r.setUint8(i,t[e+i]);return r.getFloat64(0,!0)}function B8(t){const e=Xne(t);let s=0;const r=e[s];s+=1;const i=new DataView(e.buffer),a=i.getUint32(s,r===1);if(s+=4,a&536870912&&(i.getUint32(s,r===1),s+=4),(a&65535)===1){const o=H4(e,s);s+=8;const c=H4(e,s);return s+=8,[o,c]}throw new Error("Unsupported geometry type")}var r3,i3;class z8 extends(i3=Yn,r3=Xe,i3){constructor(e){super(e,"array","PgGeometry")}build(e){return new V8(e,this.config)}}Se(z8,r3,"PgGeometryBuilder");var a3,o3;class V8 extends(o3=gn,a3=Xe,o3){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return B8(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}Se(V8,a3,"PgGeometry");var l3,c3;class $8 extends(c3=Yn,l3=Xe,c3){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new U8(e,this.config)}}Se($8,l3,"PgGeometryObjectBuilder");var d3,u3;class U8 extends(u3=gn,d3=Xe,u3){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const s=B8(e);return{x:s[0],y:s[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}Se(U8,d3,"PgGeometryObject");function Jne(t,e){const{name:s,config:r}=Zr(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new z8(s):new $8(s)}var h3,m3;class W8 extends(m3=Yn,h3=Xe,m3){constructor(e,s){super(e,"number","PgReal"),this.config.length=s}build(e){return new H8(e,this.config)}}Se(W8,h3,"PgRealBuilder");var f3,p3;class H8 extends(p3=gn,f3=Xe,p3){constructor(s,r){super(s,r);Se(this,"mapFromDriverValue",s=>typeof s=="string"?Number.parseFloat(s):s)}getSQLType(){return"real"}}Se(H8,f3,"PgReal");function ese(t){return new W8(t??"")}var g3,x3;class q8 extends(x3=Yn,g3=Xe,x3){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new G8(e,this.config)}}Se(q8,g3,"PgSerialBuilder");var v3,y3;class G8 extends(y3=gn,v3=Xe,y3){getSQLType(){return"serial"}}Se(G8,v3,"PgSerial");function rn(t){return new q8(t??"")}var w3,j3;class Y8 extends(j3=Ag,w3=Xe,j3){constructor(e){super(e,"number","PgSmallInt")}build(e){return new K8(e,this.config)}}Se(Y8,w3,"PgSmallIntBuilder");var b3,N3;class K8 extends(N3=gn,b3=Xe,N3){constructor(){super(...arguments);Se(this,"mapFromDriverValue",s=>typeof s=="string"?Number(s):s)}getSQLType(){return"smallint"}}Se(K8,b3,"PgSmallInt");function tse(t){return new Y8(t??"")}var C3,S3;class Z8 extends(S3=Yn,C3=Xe,S3){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Q8(e,this.config)}}Se(Z8,C3,"PgSmallSerialBuilder");var A3,E3;class Q8 extends(E3=gn,A3=Xe,E3){getSQLType(){return"smallserial"}}Se(Q8,A3,"PgSmallSerial");function nse(t){return new Z8(t??"")}var _3,I3;class X8 extends(I3=Yn,_3=Xe,I3){constructor(e,s){super(e,"string","PgText"),this.config.enumValues=s.enum}build(e){return new J8(e,this.config)}}Se(X8,_3,"PgTextBuilder");var T3,M3;class J8 extends(M3=gn,T3=Xe,M3){constructor(){super(...arguments);Se(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}Se(J8,T3,"PgText");function fe(t,e={}){const{name:s,config:r}=Zr(t,e);return new X8(s,r)}var D3,k3;class eF extends(k3=Im,D3=Xe,k3){constructor(e,s,r){super(e,"string","PgTime"),this.withTimezone=s,this.precision=r,this.config.withTimezone=s,this.config.precision=r}build(e){return new tF(e,this.config)}}Se(eF,D3,"PgTimeBuilder");var P3,R3;class tF extends(R3=gn,P3=Xe,R3){constructor(s,r){super(s,r);Se(this,"withTimezone");Se(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}Se(tF,P3,"PgTime");function Xc(t,e={}){const{name:s,config:r}=Zr(t,e);return new eF(s,r.withTimezone??!1,r.precision)}var L3,O3;class nF extends(O3=Im,L3=Xe,O3){constructor(e,s,r){super(e,"date","PgTimestamp"),this.config.withTimezone=s,this.config.precision=r}build(e){return new sF(e,this.config)}}Se(nF,L3,"PgTimestampBuilder");var F3,B3;class sF extends(B3=gn,F3=Xe,B3){constructor(s,r){super(s,r);Se(this,"withTimezone");Se(this,"precision");Se(this,"mapFromDriverValue",s=>new Date(this.withTimezone?s:s+"+0000"));Se(this,"mapToDriverValue",s=>s.toISOString());this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}Se(sF,F3,"PgTimestamp");var z3,V3;class rF extends(V3=Im,z3=Xe,V3){constructor(e,s,r){super(e,"string","PgTimestampString"),this.config.withTimezone=s,this.config.precision=r}build(e){return new iF(e,this.config)}}Se(rF,z3,"PgTimestampStringBuilder");var $3,U3;class iF extends(U3=gn,$3=Xe,U3){constructor(s,r){super(s,r);Se(this,"withTimezone");Se(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}Se(iF,$3,"PgTimestampString");function vt(t,e={}){const{name:s,config:r}=Zr(t,e);return(r==null?void 0:r.mode)==="string"?new rF(s,r.withTimezone??!1,r.precision):new nF(s,(r==null?void 0:r.withTimezone)??!1,r==null?void 0:r.precision)}var W3,H3;class aF extends(H3=Yn,W3=Xe,H3){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(yv`gen_random_uuid()`)}build(e){return new oF(e,this.config)}}Se(aF,W3,"PgUUIDBuilder");var q3,G3;class oF extends(G3=gn,q3=Xe,G3){getSQLType(){return"uuid"}}Se(oF,q3,"PgUUID");function sse(t){return new aF(t??"")}var Y3,K3;class lF extends(K3=Yn,Y3=Xe,K3){constructor(e,s){super(e,"string","PgVarchar"),this.config.length=s.length,this.config.enumValues=s.enum}build(e){return new cF(e,this.config)}}Se(lF,Y3,"PgVarcharBuilder");var Z3,Q3;class cF extends(Q3=gn,Z3=Xe,Q3){constructor(){super(...arguments);Se(this,"length",this.config.length);Se(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}Se(cF,Z3,"PgVarchar");function rse(t,e={}){const{name:s,config:r}=Zr(t,e);return new lF(s,r)}var X3,J3;class dF extends(J3=Yn,X3=Xe,J3){constructor(e,s){super(e,"string","PgBinaryVector"),this.config.dimensions=s.dimensions}build(e){return new uF(e,this.config)}}Se(dF,X3,"PgBinaryVectorBuilder");var ek,tk;class uF extends(tk=gn,ek=Xe,tk){constructor(){super(...arguments);Se(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}Se(uF,ek,"PgBinaryVector");function ise(t,e){const{name:s,config:r}=Zr(t,e);return new dF(s,r)}var nk,sk;class hF extends(sk=Yn,nk=Xe,sk){constructor(e,s){super(e,"array","PgHalfVector"),this.config.dimensions=s.dimensions}build(e){return new mF(e,this.config)}}Se(hF,nk,"PgHalfVectorBuilder");var rk,ik;class mF extends(ik=gn,rk=Xe,ik){constructor(){super(...arguments);Se(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(s){return JSON.stringify(s)}mapFromDriverValue(s){return s.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}Se(mF,rk,"PgHalfVector");function ase(t,e){const{name:s,config:r}=Zr(t,e);return new hF(s,r)}var ak,ok;class fF extends(ok=Yn,ak=Xe,ok){constructor(e,s){super(e,"string","PgSparseVector"),this.config.dimensions=s.dimensions}build(e){return new pF(e,this.config)}}Se(fF,ak,"PgSparseVectorBuilder");var lk,ck;class pF extends(ck=gn,lk=Xe,ck){constructor(){super(...arguments);Se(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}Se(pF,lk,"PgSparseVector");function ose(t,e){const{name:s,config:r}=Zr(t,e);return new fF(s,r)}var dk,uk;class gF extends(uk=Yn,dk=Xe,uk){constructor(e,s){super(e,"array","PgVector"),this.config.dimensions=s.dimensions}build(e){return new xF(e,this.config)}}Se(gF,dk,"PgVectorBuilder");var hk,mk;class xF extends(mk=gn,hk=Xe,mk){constructor(){super(...arguments);Se(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(s){return JSON.stringify(s)}mapFromDriverValue(s){return s.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}Se(xF,hk,"PgVector");function lse(t,e){const{name:s,config:r}=Zr(t,e);return new gF(s,r)}function cse(){return{bigint:Bne,bigserial:zne,boolean:as,char:Vne,cidr:$ne,customType:Une,date:Fs,doublePrecision:yo,inet:Wne,integer:De,interval:Hne,json:qne,jsonb:Zp,line:Gne,macaddr:Yne,macaddr8:Kne,numeric:Zne,point:Qne,geometry:Jne,real:ese,serial:rn,smallint:tse,smallserial:nse,text:fe,time:Xc,timestamp:vt,uuid:sse,varchar:rse,bit:ise,halfvec:ase,sparsevec:ose,vector:lse}}const Yb=Symbol.for("drizzle:PgInlineForeignKeys"),q4=Symbol.for("drizzle:EnableRLS");var fk,pk,gk,xk,vk;class jv extends(vk=va,xk=Xe,gk=Yb,pk=q4,fk=va.Symbol.ExtraConfigBuilder,vk){constructor(){super(...arguments);Se(this,gk,[]);Se(this,pk,!1);Se(this,fk)}}Se(jv,xk,"PgTable"),Se(jv,"Symbol",Object.assign({},va.Symbol,{InlineForeignKeys:Yb,EnableRLS:q4}));function dse(t,e,s,r,i=t){const a=new jv(t,r,i),o=typeof e=="function"?e(cse()):e,c=Object.fromEntries(Object.entries(o).map(([g,m])=>{const p=m;p.setName(g);const v=p.build(a);return a[Yb].push(...p.buildForeignKeys(v,a)),[g,v]})),d=Object.fromEntries(Object.entries(o).map(([g,m])=>{const p=m;p.setName(g);const v=p.buildExtraConfigColumn(a);return[g,v]})),h=Object.assign(a,c);return h[va.Symbol.Columns]=c,h[va.Symbol.ExtraConfigColumns]=d,Object.assign(h,{enableRLS:()=>(h[jv.Symbol.EnableRLS]=!0,h)})}const an=(t,e,s)=>dse(t,e,s,void 0),Gs={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function ur(t,e){return e.includes(t.columnType)}function use(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const hse=q.union([q.string(),q.number(),q.boolean(),q.null()]),mse=q.union([hse,q.record(q.any()),q.array(q.any())]),fse=q.custom(t=>t instanceof Buffer);function vF(t,e){const s=(e==null?void 0:e.zodInstance)??q,r=(e==null?void 0:e.coerce)??{};let i;return use(t)&&(i=t.enumValues.length?s.enum(t.enumValues):s.string()),i||(ur(t,["PgGeometry","PgPointTuple"])?i=s.tuple([s.number(),s.number()]):ur(t,["PgGeometryObject","PgPointObject"])?i=s.object({x:s.number(),y:s.number()}):ur(t,["PgHalfVector","PgVector"])?(i=s.array(s.number()),i=t.dimensions?i.length(t.dimensions):i):ur(t,["PgLine"])?i=s.tuple([s.number(),s.number(),s.number()]):ur(t,["PgLineABC"])?i=s.object({a:s.number(),b:s.number(),c:s.number()}):ur(t,["PgArray"])?(i=s.array(vF(t.baseColumn,s)),i=t.size?i.length(t.size):i):t.dataType==="array"?i=s.array(s.any()):t.dataType==="number"?i=pse(t,s,r):t.dataType==="bigint"?i=gse(t,s,r):t.dataType==="boolean"?i=r===!0||r.boolean?s.coerce.boolean():s.boolean():t.dataType==="date"?i=r===!0||r.date?s.coerce.date():s.date():t.dataType==="string"?i=xse(t,s,r):t.dataType==="json"?i=mse:t.dataType==="custom"?i=s.any():t.dataType==="buffer"&&(i=fse)),i||(i=s.any()),i}function pse(t,e,s){let r=t.getSQLType().includes("unsigned"),i,a,o=!1;ur(t,["MySqlTinyInt","SingleStoreTinyInt"])?(i=r?0:Gs.INT8_MIN,a=r?Gs.INT8_UNSIGNED_MAX:Gs.INT8_MAX,o=!0):ur(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(i=r?0:Gs.INT16_MIN,a=r?Gs.INT16_UNSIGNED_MAX:Gs.INT16_MAX,o=!0):ur(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(i=r?0:Gs.INT24_MIN,a=r?Gs.INT24_UNSIGNED_MAX:Gs.INT24_MAX,o=ur(t,["MySqlMediumInt","SingleStoreMediumInt"])):ur(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(i=r?0:Gs.INT32_MIN,a=r?Gs.INT32_UNSIGNED_MAX:Gs.INT32_MAX,o=!0):ur(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(i=r?0:Gs.INT48_MIN,a=r?Gs.INT48_UNSIGNED_MAX:Gs.INT48_MAX):ur(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(r=r||ur(t,["MySqlSerial","SingleStoreSerial"]),i=r?0:Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,o=!0):ur(t,["MySqlYear","SingleStoreYear"])?(i=1901,a=2155,o=!0):(i=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER);let c=s===!0||s!=null&&s.number?e.coerce.number():e.number();return c=c.min(i).max(a),o?c.int():c}function gse(t,e,s){const r=t.getSQLType().includes("unsigned"),i=r?0n:Gs.INT64_MIN,a=r?Gs.INT64_UNSIGNED_MAX:Gs.INT64_MAX;return(s===!0||s!=null&&s.bigint?e.coerce.bigint():e.bigint()).min(i).max(a)}function xse(t,e,s){if(ur(t,["PgUUID"]))return e.string().uuid();let r,i,a=!1;ur(t,["PgVarchar","SQLiteText"])?r=t.length:ur(t,["MySqlVarChar","SingleStoreVarChar"])?r=t.length??Gs.INT16_UNSIGNED_MAX:ur(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?r=Gs.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?r=Gs.INT24_UNSIGNED_MAX:t.textType==="text"?r=Gs.INT16_UNSIGNED_MAX:r=Gs.INT8_UNSIGNED_MAX),ur(t,["PgChar","MySqlChar","SingleStoreChar"])&&(r=t.length,a=!0),ur(t,["PgBinaryVector"])&&(i=/^[01]+$/,r=t.dimensions);let o=s===!0||s!=null&&s.string?e.coerce.string():e.string();return o=i?o.regex(i):o,r&&a?o.length(r):r?o.max(r):o}function yF(t){return $6(t)?One(t):Fne(t)}function wF(t,e,s,r){const i={};for(const[a,o]of Object.entries(t)){if(!si(o,lm)&&!si(o,Pr)&&!si(o,Pr.Aliased)&&typeof o=="object"){const m=$6(o)||Lne(o)?yF(o):o;i[a]=wF(m,e[a]??{},s,r);continue}const c=e[a];if(c!==void 0&&typeof c!="function"){i[a]=c;continue}const d=si(o,lm)?o:void 0,h=d?vF(d,r):q.any(),g=typeof c=="function"?c(h):h;s.never(d)||(i[a]=g,d&&(s.nullable(d)&&(i[a]=i[a].nullable()),s.optional(d)&&(i[a]=i[a].optional())))}return q.object(i)}const vse={never:t=>{var e,s;return((e=t==null?void 0:t.generated)==null?void 0:e.type)==="always"||((s=t==null?void 0:t.generatedIdentity)==null?void 0:s.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},on=(t,e)=>{const s=yF(t);return wF(s,{},vse)},yse=["basic","professional","enterprise"],wse=["monthly","yearly"],jse=["active","inactive","past_due","canceled","trialing"],ko=an("organizations",{id:rn("id").primaryKey(),name:fe("name").notNull(),slug:fe("slug").notNull().unique(),address:fe("address"),city:fe("city"),state:fe("state"),zipCode:fe("zip_code"),phone:fe("phone"),email:fe("email"),website:fe("website"),logo:fe("logo"),active:as("active").notNull().default(!0),createdAt:vt("created_at").notNull().defaultNow(),isSystemAdmin:as("is_system_admin").default(!1),subscriptionId:De("subscription_id"),stripeCustomerId:fe("stripe_customer_id"),trialEndsAt:vt("trial_ends_at")});on(ko).omit({id:!0,createdAt:!0});const jF=an("subscription_plans",{id:rn("id").primaryKey(),name:fe("name").notNull(),description:fe("description").notNull(),tier:fe("tier",{enum:yse}).notNull(),price:De("price").notNull(),billingCycle:fe("billing_cycle",{enum:wse}).notNull(),features:Zp("features").notNull(),active:as("active").notNull().default(!0),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow(),stripePriceId:fe("stripe_price_id"),stripeProductId:fe("stripe_product_id"),maxTechnicians:De("max_technicians").notNull().default(1),maxClients:De("max_clients"),maxProjects:De("max_projects")});on(jF).omit({id:!0,createdAt:!0,updatedAt:!0});const bF=an("subscriptions",{id:rn("id").primaryKey(),organizationId:De("organization_id").references(()=>ko.id).notNull(),planId:De("plan_id").references(()=>jF.id).notNull(),status:fe("status",{enum:jse}).notNull().default("active"),currentPeriodStart:vt("current_period_start").notNull(),currentPeriodEnd:vt("current_period_end").notNull(),cancelAtPeriodEnd:as("cancel_at_period_end").notNull().default(!1),canceledAt:vt("canceled_at"),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow(),stripeSubscriptionId:fe("stripe_subscription_id"),trialEndsAt:vt("trial_ends_at"),quantity:De("quantity").notNull().default(1),metadataJson:Zp("metadata_json")});on(bF).omit({id:!0,createdAt:!0,updatedAt:!0});const bse=an("payment_records",{id:rn("id").primaryKey(),organizationId:De("organization_id").references(()=>ko.id).notNull(),subscriptionId:De("subscription_id").references(()=>bF.id),amount:De("amount").notNull(),currency:fe("currency").notNull().default("usd"),status:fe("status").notNull(),paymentMethod:fe("payment_method"),paymentMethodDetails:Zp("payment_method_details"),createdAt:vt("created_at").notNull().defaultNow(),stripePaymentIntentId:fe("stripe_payment_intent_id"),stripeChargeId:fe("stripe_charge_id"),receiptUrl:fe("receipt_url"),description:fe("description"),metadata:Zp("metadata")});on(bse).omit({id:!0,createdAt:!0});const wi=an("users",{id:rn("id").primaryKey(),username:fe("username").notNull().unique(),password:fe("password"),name:fe("name").notNull(),email:fe("email").notNull(),role:fe("role").notNull().default("client"),phone:fe("phone"),address:fe("address"),active:as("active").notNull().default(!0),organizationId:De("organization_id").references(()=>ko.id).notNull(),googleId:fe("google_id").unique(),photoUrl:fe("photo_url"),authProvider:fe("auth_provider").default("local")});on(wi).omit({id:!0});const bv=["residential","commercial","service","maintenance"],ld=an("clients",{id:rn("id").primaryKey(),userId:De("user_id").references(()=>wi.id).notNull(),organizationId:De("organization_id").references(()=>ko.id),companyName:fe("company_name"),contractType:fe("contract_type"),latitude:yo("latitude"),longitude:yo("longitude"),poolType:fe("pool_type"),poolSize:fe("pool_size"),filterType:fe("filter_type"),heaterType:fe("heater_type"),chemicalSystem:fe("chemical_system"),specialNotes:fe("special_notes"),serviceDay:fe("service_day"),serviceLevel:fe("service_level"),customServiceInstructions:fe("custom_service_instructions").array()});on(ld).omit({id:!0}).extend({contractType:q.string().nullable().transform(t=>t==null||t===""?null:String(t).toLowerCase()).refine(t=>t===null||bv.includes(t),{message:`Contract type must be one of: ${bv.join(", ")} or null`}),latitude:q.number().nullable(),longitude:q.number().nullable()});const ql=an("technicians",{id:rn("id").primaryKey(),userId:De("user_id").references(()=>wi.id).notNull(),specialization:fe("specialization"),certifications:fe("certifications")});on(ql).omit({id:!0});const Eg=an("projects",{id:rn("id").primaryKey(),name:fe("name").notNull(),description:fe("description"),clientId:De("client_id").references(()=>ld.id).notNull(),projectType:fe("project_type").notNull().default("construction"),startDate:Fs("start_date").notNull(),estimatedCompletionDate:Fs("estimated_completion_date"),actualCompletionDate:Fs("actual_completion_date"),status:fe("status").notNull().default("planning"),budget:De("budget"),currentPhase:fe("current_phase"),percentComplete:De("percent_complete").default(0),permitDetails:fe("permit_details"),notes:fe("notes"),isTemplate:as("is_template").default(!1),templateName:fe("template_name"),templateCategory:fe("template_category"),isArchived:as("is_archived").default(!1)}),Nse=on(Eg).omit({id:!0}),Ly=an("project_phases",{id:rn("id").primaryKey(),projectId:De("project_id").references(()=>Eg.id).notNull(),name:fe("name").notNull(),description:fe("description"),startDate:Fs("start_date"),endDate:Fs("end_date"),status:fe("status").notNull().default("pending"),order:De("order").notNull(),percentComplete:De("percent_complete").default(0),notes:fe("notes"),estimatedDuration:De("estimated_duration"),actualDuration:De("actual_duration"),cost:De("cost"),permitRequired:as("permit_required").default(!1),inspectionRequired:as("inspection_required").default(!1),inspectionDate:Fs("inspection_date"),inspectionPassed:as("inspection_passed"),inspectionNotes:fe("inspection_notes")});on(Ly).omit({id:!0}).transform(t=>{const e={...t};return e.estimatedDuration===null&&(e.estimatedDuration=void 0),e.actualDuration===null&&(e.actualDuration=void 0),e.cost===null&&(e.cost=void 0),e.startDate===null&&(e.startDate=void 0),e.endDate===null&&(e.endDate=void 0),e.inspectionDate===null&&(e.inspectionDate=void 0),e});const Cse=an("phase_resources",{id:rn("id").primaryKey(),phaseId:De("phase_id").references(()=>Ly.id).notNull(),resourceType:fe("resource_type").notNull(),resourceName:fe("resource_name").notNull(),quantity:De("quantity").notNull(),unit:fe("unit"),estimatedCost:De("estimated_cost"),actualCost:De("actual_cost"),notes:fe("notes")});on(Cse);const Sse=an("project_assignments",{id:rn("id").primaryKey(),projectId:De("project_id").references(()=>Eg.id).notNull(),phaseId:De("phase_id").references(()=>Ly.id),technicianId:De("technician_id").references(()=>ql.id).notNull(),role:fe("role").notNull(),isLead:as("is_lead").default(!1),startDate:Fs("start_date"),endDate:Fs("end_date"),hoursAllocated:De("hours_allocated"),hoursLogged:De("hours_logged").default(0),notes:fe("notes")});on(Sse);const Ase=an("project_documentation",{id:rn("id").primaryKey(),projectId:De("project_id").references(()=>Eg.id).notNull(),phaseId:De("phase_id").references(()=>Ly.id),documentType:fe("document_type").notNull(),title:fe("title").notNull(),description:fe("description"),fileUrl:fe("file_url").notNull(),uploadedBy:De("uploaded_by").references(()=>wi.id).notNull(),uploadDate:vt("upload_date").notNull().defaultNow(),tags:fe("tags").array(),isPublic:as("is_public").default(!1)});on(Ase);const cd=an("maintenances",{id:rn("id").primaryKey(),clientId:De("client_id").references(()=>ld.id).notNull(),scheduleDate:Fs("schedule_date").notNull(),technicianId:De("technician_id").references(()=>ql.id).notNull(),completionDate:Fs("completion_date"),startTime:vt("start_time"),endTime:vt("end_time"),type:fe("type").notNull(),status:fe("status").notNull().default("scheduled"),notes:fe("notes"),customerFeedback:De("customer_feedback"),customerNotes:fe("customer_notes"),invoiceAmount:De("invoice_amount"),laborCost:De("labor_cost"),totalChemicalCost:De("total_chemical_cost"),profitAmount:De("profit_amount"),profitPercentage:De("profit_percentage"),routeName:fe("route_name"),routeOrder:De("route_order"),serviceTimeMinutes:De("service_time_minutes"),mileage:De("mileage"),fuelCost:De("fuel_cost"),isOnTime:as("is_on_time"),issues:fe("issues"),serviceEfficiency:De("service_efficiency")});on(cd).omit({id:!0,startTime:!0,endTime:!0,customerFeedback:!0,customerNotes:!0,invoiceAmount:!0,laborCost:!0,totalChemicalCost:!0,profitAmount:!0,profitPercentage:!0});const F2=an("repairs",{id:rn("id").primaryKey(),clientId:De("client_id").references(()=>ld.id).notNull(),issue:fe("issue").notNull(),description:fe("description"),reportedDate:vt("reported_date").notNull().defaultNow(),status:fe("status").notNull().default("pending"),priority:fe("priority").notNull().default("medium"),technicianId:De("technician_id").references(()=>ql.id),scheduledDate:Fs("scheduled_date"),scheduledTime:Xc("scheduled_time"),completionDate:vt("completion_date"),notes:fe("notes")}),Ese=on(F2).omit({id:!0,reportedDate:!0,completionDate:!0}),_se=an("invoices",{id:rn("id").primaryKey(),clientId:De("client_id").references(()=>ld.id).notNull(),amount:De("amount").notNull(),issueDate:vt("issue_date").notNull().defaultNow(),dueDate:Fs("due_date").notNull(),status:fe("status").notNull().default("pending"),description:fe("description").notNull(),notes:fe("notes")});on(_se).omit({id:!0,issueDate:!0});const Ise=an("pool_equipment",{id:rn("id").primaryKey(),clientId:De("client_id").references(()=>ld.id).notNull(),name:fe("name").notNull(),type:fe("type").notNull(),brand:fe("brand"),model:fe("model"),serialNumber:fe("serial_number"),installDate:Fs("install_date"),lastServiceDate:Fs("last_service_date"),notes:fe("notes"),status:fe("status").default("operational")});on(Ise).omit({id:!0});const Tse=an("pool_images",{id:rn("id").primaryKey(),clientId:De("client_id").references(()=>ld.id).notNull(),imageUrl:fe("image_url").notNull(),caption:fe("caption"),category:fe("category"),uploadDate:vt("upload_date").notNull().defaultNow(),technician_id:De("technician_id").references(()=>ql.id)});on(Tse).omit({id:!0,uploadDate:!0});const Mse=an("chemical_usage",{id:rn("id").primaryKey(),maintenanceId:De("maintenance_id").references(()=>cd.id).notNull(),chemicalType:fe("chemical_type").notNull(),amount:De("amount").notNull(),unit:fe("unit").notNull(),unitCost:De("unit_cost").notNull(),totalCost:De("total_cost").notNull(),reason:fe("reason"),notes:fe("notes"),createdAt:vt("created_at").notNull().defaultNow()});on(Mse).omit({id:!0,createdAt:!0});const NF=an("water_readings",{id:rn("id").primaryKey(),maintenanceId:De("maintenance_id").references(()=>cd.id).notNull(),phLevel:De("ph_level"),chlorineLevel:De("chlorine_level"),alkalinity:De("alkalinity"),cyanuricAcid:De("cyanuric_acid"),calciumHardness:De("calcium_hardness"),totalDissolvedSolids:De("total_dissolved_solids"),saltLevel:De("salt_level"),phosphates:De("phosphates"),createdAt:vt("created_at").notNull().defaultNow()});on(NF).omit({id:!0,createdAt:!0});const Dse=an("maintenance_reports",{id:rn("id").primaryKey(),maintenanceId:De("maintenance_id").references(()=>cd.id).notNull(),completionDate:vt("completion_date").notNull(),waterReadingId:De("water_reading_id").references(()=>NF.id),tasksCompleted:fe("tasks_completed").array(),taskPhotos:fe("task_photos"),beforePhotos:fe("before_photos").array(),afterPhotos:fe("after_photos").array(),condition:fe("condition"),notes:fe("notes"),photos:fe("photos").array(),technicianId:De("technician_id").references(()=>ql.id).notNull(),clientSignature:fe("client_signature"),technicianSignature:fe("technician_signature"),laborTimeMinutes:De("labor_time_minutes"),chemicalCost:De("chemical_cost"),equipmentIssues:fe("equipment_issues"),recommendedServices:fe("recommended_services"),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow()});on(Dse).omit({id:!0,createdAt:!0,updatedAt:!0});const kse=an("service_templates",{id:rn("id").primaryKey(),name:fe("name").notNull(),type:fe("type").notNull(),description:fe("description"),isDefault:as("is_default").default(!1),checklistItems:fe("checklist_items").array(),checklistConfig:fe("checklist_config"),requireBeforePhotos:as("require_before_photos").default(!1),requireAfterPhotos:as("require_after_photos").default(!1),workflowSteps:fe("workflow_steps"),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow()});on(kse).omit({id:!0,createdAt:!0,updatedAt:!0});const Pse=["pending","accepted","expired"],Rse=an("invitation_tokens",{id:rn("id").primaryKey(),token:fe("token").notNull().unique(),email:fe("email").notNull(),name:fe("name").notNull(),role:fe("role").notNull(),organizationId:De("organization_id").references(()=>ko.id).notNull(),status:fe("status",{enum:Pse}).notNull().default("pending"),expiresAt:vt("expires_at").notNull(),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow(),createdBy:De("created_by").references(()=>wi.id)});on(Rse).omit({id:!0,createdAt:!0,updatedAt:!0});const Lse=an("communication_providers",{id:rn("id").primaryKey(),name:fe("name").notNull(),type:fe("type").notNull(),isDefault:as("is_default").default(!1),isActive:as("is_active").default(!0),clientId:fe("client_id"),clientSecret:fe("client_secret"),apiKey:fe("api_key"),accountSid:fe("account_sid"),authToken:fe("auth_token"),refreshToken:fe("refresh_token"),accessToken:fe("access_token"),tokenExpiresAt:vt("token_expires_at"),email:fe("email"),phoneNumber:fe("phone_number"),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow(),lastUsed:vt("last_used"),settings:fe("settings")});on(Lse).omit({id:!0,createdAt:!0,updatedAt:!0,lastUsed:!0});q.object({companyName:q.string().nullable().optional(),contractType:q.string().nullable().optional().transform(t=>t==null||t===""?null:String(t).toLowerCase()).refine(t=>t===null||bv.includes(t),{message:`Contract type must be one of: ${bv.join(", ")} or null`}),poolType:q.string().nullable().optional(),poolSize:q.string().nullable().optional(),filterType:q.string().nullable().optional(),heaterType:q.string().nullable().optional(),chemicalSystem:q.string().nullable().optional(),specialNotes:q.string().nullable().optional(),serviceDay:q.string().nullable().optional(),serviceLevel:q.string().nullable().optional(),customServiceInstructions:q.array(q.string()).optional()});const Ose=["chemicals","equipment","vehicle","office","marketing","insurance","utilities","rent","taxes","sales_tax","training","travel","other"],Fse=an("expenses",{id:rn("id").primaryKey(),date:Fs("date").notNull(),category:fe("category").notNull(),amount:De("amount").notNull(),description:fe("description").notNull(),receipt:fe("receipt"),vendor:fe("vendor"),paymentMethod:fe("payment_method"),approved:as("approved").default(!1),approvedBy:De("approved_by").references(()=>wi.id),approvedDate:vt("approved_date"),reimbursable:as("reimbursable").default(!1),reimbursed:as("reimbursed").default(!1),notes:fe("notes"),createdBy:De("created_by").references(()=>wi.id).notNull(),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow()});on(Fse).omit({id:!0,approvedDate:!0,createdAt:!0,updatedAt:!0});const Bse=an("time_entries",{id:rn("id").primaryKey(),userId:De("user_id").references(()=>wi.id).notNull(),date:Fs("date").notNull(),startTime:Xc("start_time").notNull(),endTime:Xc("end_time"),breakDuration:De("break_duration").default(0),projectId:De("project_id").references(()=>Eg.id),maintenanceId:De("maintenance_id").references(()=>cd.id),repairId:De("repair_id").references(()=>F2.id),notes:fe("notes"),status:fe("status").notNull().default("pending"),approvedBy:De("approved_by").references(()=>wi.id),approvedDate:vt("approved_date"),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow()});on(Bse).omit({id:!0,approvedDate:!0,createdAt:!0,updatedAt:!0});const zse=["income_statement","balance_sheet","cash_flow","profit_loss","expense_summary","revenue_by_service","technician_productivity","chemical_usage","route_profitability","custom"],Vse=an("financial_reports",{id:rn("id").primaryKey(),name:fe("name").notNull(),type:fe("type").notNull(),startDate:Fs("start_date").notNull(),endDate:Fs("end_date").notNull(),parameters:fe("parameters"),createdBy:De("created_by").references(()=>wi.id).notNull(),createdAt:vt("created_at").notNull().defaultNow(),lastRunDate:vt("last_run_date"),scheduleFrequency:fe("schedule_frequency"),isPublic:as("is_public").default(!1),notes:fe("notes")});on(Vse).omit({id:!0,createdAt:!0,lastRunDate:!0});const B2=an("vendors",{id:rn("id").primaryKey(),name:fe("name").notNull(),contactName:fe("contact_name"),email:fe("email"),phone:fe("phone"),address:fe("address"),website:fe("website"),accountNumber:fe("account_number"),category:fe("category").notNull(),paymentTerms:fe("payment_terms"),notes:fe("notes"),isActive:as("is_active").notNull().default(!0),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow()});on(B2).omit({id:!0,createdAt:!0,updatedAt:!0});const $se=an("purchase_orders",{id:rn("id").primaryKey(),vendorId:De("vendor_id").references(()=>B2.id).notNull(),orderDate:Fs("order_date").notNull(),expectedDeliveryDate:Fs("expected_delivery_date"),actualDeliveryDate:Fs("actual_delivery_date"),status:fe("status").notNull().default("draft"),totalAmount:De("total_amount").notNull(),items:fe("items").notNull(),notes:fe("notes"),createdBy:De("created_by").references(()=>wi.id).notNull(),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow()});on($se).omit({id:!0,createdAt:!0,updatedAt:!0});const _g=an("inventory_items",{id:rn("id").primaryKey(),name:fe("name").notNull(),description:fe("description"),category:fe("category").notNull(),sku:fe("sku"),unit:fe("unit").notNull(),costPerUnit:De("cost_per_unit").notNull(),minStockLevel:De("min_stock_level").notNull().default(0),currentStock:De("current_stock").notNull().default(0),location:fe("location"),vendorId:De("vendor_id").references(()=>B2.id),lastOrderDate:Fs("last_order_date"),imageUrl:fe("image_url"),notes:fe("notes"),isActive:as("is_active").notNull().default(!0),organizationId:De("organization_id").references(()=>ko.id).notNull(),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow()});on(_g).omit({id:!0,createdAt:!0,updatedAt:!0});const CF=an("warehouses",{id:rn("id").primaryKey(),name:fe("name").notNull(),description:fe("description"),address:fe("address").notNull(),city:fe("city").notNull(),state:fe("state").notNull(),zipCode:fe("zip_code").notNull(),phoneNumber:fe("phone_number"),isActive:as("is_active").notNull().default(!0),latitude:yo("latitude"),longitude:yo("longitude"),organizationId:De("organization_id").references(()=>ko.id).notNull(),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow()});on(CF).omit({id:!0,createdAt:!0,updatedAt:!0});const z2=an("technician_vehicles",{id:rn("id").primaryKey(),technicianId:De("technician_id").references(()=>ql.id).notNull(),name:fe("name").notNull(),type:fe("type").notNull(),make:fe("make"),model:fe("model"),year:De("year"),licensePlate:fe("license_plate"),vin:fe("vin"),status:fe("status").notNull().default("active"),notes:fe("notes"),fleetmaticsVehicleId:fe("fleetmatics_vehicle_id"),gpsDeviceId:fe("gps_device_id"),lastKnownLatitude:yo("last_known_latitude"),lastKnownLongitude:yo("last_known_longitude"),lastLocationUpdate:vt("last_location_update"),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow()});on(z2).omit({id:!0,createdAt:!0,updatedAt:!0,lastLocationUpdate:!0});const Use=an("warehouse_inventory",{id:rn("id").primaryKey(),warehouseId:De("warehouse_id").references(()=>CF.id).notNull(),inventoryItemId:De("inventory_item_id").references(()=>_g.id).notNull(),quantity:De("quantity").notNull().default(0),location:fe("location"),lastUpdated:vt("last_updated").notNull().defaultNow(),minimumStockLevel:De("minimum_stock_level").default(0),maximumStockLevel:De("maximum_stock_level"),notes:fe("notes")});on(Use).omit({id:!0,lastUpdated:!0});const Wse=an("vehicle_inventory",{id:rn("id").primaryKey(),vehicleId:De("vehicle_id").references(()=>z2.id).notNull(),inventoryItemId:De("inventory_item_id").references(()=>_g.id).notNull(),quantity:De("quantity").notNull().default(0),location:fe("location"),lastUpdated:vt("last_updated").notNull().defaultNow(),targetStockLevel:De("target_stock_level").default(0),notes:fe("notes")});on(Wse).omit({id:!0,lastUpdated:!0});const Hse=["warehouse_to_warehouse","warehouse_to_vehicle","vehicle_to_warehouse","vehicle_to_vehicle","warehouse_to_client","vehicle_to_client"],qse=["pending","in_transit","completed","cancelled"],SF=an("inventory_transfers",{id:rn("id").primaryKey(),transferType:fe("transfer_type").notNull(),sourceLocationType:fe("source_location_type").notNull(),sourceLocationId:De("source_location_id").notNull(),destinationLocationType:fe("destination_location_type").notNull(),destinationLocationId:De("destination_location_id").notNull(),requestedByUserId:De("requested_by_user_id").references(()=>wi.id).notNull(),approvedByUserId:De("approved_by_user_id").references(()=>wi.id),requestDate:vt("request_date").notNull().defaultNow(),approvalDate:vt("approval_date"),scheduledDate:Fs("scheduled_date"),status:fe("status").notNull().default("pending"),notes:fe("notes"),completedDate:vt("completed_date"),completedByUserId:De("completed_by_user_id").references(()=>wi.id),organizationId:De("organization_id").references(()=>ko.id).notNull()});on(SF).omit({id:!0,requestDate:!0,approvalDate:!0,completedDate:!0});const Gse=an("inventory_transfer_items",{id:rn("id").primaryKey(),transferId:De("transfer_id").references(()=>SF.id).notNull(),inventoryItemId:De("inventory_item_id").references(()=>_g.id).notNull(),requestedQuantity:De("requested_quantity").notNull(),approvedQuantity:De("approved_quantity"),actualQuantity:De("actual_quantity"),notes:fe("notes")});on(Gse).omit({id:!0});const AF=an("barcodes",{id:rn("id").primaryKey(),barcodeValue:fe("barcode_value").notNull().unique(),barcodeType:fe("barcode_type").notNull(),itemType:fe("item_type").notNull(),itemId:De("item_id").notNull(),createdAt:vt("created_at").notNull().defaultNow(),isActive:as("is_active").notNull().default(!0)});on(AF).omit({id:!0,createdAt:!0});const Yse=an("barcode_scan_history",{id:rn("id").primaryKey(),barcodeId:De("barcode_id").references(()=>AF.id).notNull(),scannedByUserId:De("scanned_by_user_id").references(()=>wi.id).notNull(),scanTime:vt("scan_time").notNull().defaultNow(),actionType:fe("action_type").notNull(),actionId:De("action_id"),location:fe("location"),notes:fe("notes")});on(Yse).omit({id:!0,scanTime:!0});const Kse=an("inventory_adjustments",{id:rn("id").primaryKey(),locationType:fe("location_type").notNull(),locationId:De("location_id").notNull(),inventoryItemId:De("inventory_item_id").references(()=>_g.id).notNull(),quantityChange:De("quantity_change").notNull(),reason:fe("reason").notNull(),performedByUserId:De("performed_by_user_id").references(()=>wi.id).notNull(),adjustmentDate:vt("adjustment_date").notNull().defaultNow(),notes:fe("notes"),maintenanceId:De("maintenance_id").references(()=>cd.id),repairId:De("repair_id").references(()=>F2.id),organizationId:De("organization_id").references(()=>ko.id).notNull()});on(Kse).omit({id:!0,adjustmentDate:!0});const EF=an("routes",{id:rn("id").primaryKey(),name:fe("name").notNull(),description:fe("description"),type:fe("type").notNull(),dayOfWeek:fe("day_of_week").notNull(),startTime:Xc("start_time"),endTime:Xc("end_time"),technicianId:De("technician_id").references(()=>ql.id),isActive:as("is_active").notNull().default(!0),color:fe("color"),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow()});on(EF).omit({id:!0,createdAt:!0,updatedAt:!0});const Zse=an("route_assignments",{id:rn("id").primaryKey(),routeId:De("route_id").references(()=>EF.id).notNull(),maintenanceId:De("maintenance_id").references(()=>cd.id).notNull(),orderIndex:De("order_index").notNull(),estimatedDuration:De("estimated_duration"),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow()});on(Zse).omit({id:!0,createdAt:!0,updatedAt:!0});const V2=an("bazza_routes",{id:rn("id").primaryKey(),name:fe("name").notNull(),description:fe("description"),type:fe("type").notNull(),technicianId:De("technician_id").references(()=>ql.id).notNull(),dayOfWeek:fe("day_of_week").notNull(),weekNumber:De("week_number"),isRecurring:as("is_recurring").notNull().default(!0),frequency:fe("frequency").notNull().default("weekly"),color:fe("color"),startTime:Xc("start_time"),endTime:Xc("end_time"),isActive:as("is_active").notNull().default(!0),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow()});on(V2).omit({id:!0,createdAt:!0,updatedAt:!0});const _F=an("bazza_route_stops",{id:rn("id").primaryKey(),routeId:De("route_id").references(()=>V2.id).notNull(),clientId:De("client_id").references(()=>ld.id).notNull(),orderIndex:De("order_index").notNull(),estimatedDuration:De("estimated_duration"),customInstructions:fe("custom_instructions"),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow()});on(_F).omit({id:!0,createdAt:!0,updatedAt:!0});const Qse=an("bazza_maintenance_assignments",{id:rn("id").primaryKey(),routeId:De("route_id").references(()=>V2.id).notNull(),routeStopId:De("route_stop_id").references(()=>_F.id).notNull(),maintenanceId:De("maintenance_id").references(()=>cd.id).notNull(),date:Fs("date").notNull(),estimatedStartTime:vt("estimated_start_time"),estimatedEndTime:vt("estimated_end_time"),actualStartTime:vt("actual_start_time"),actualEndTime:vt("actual_end_time"),status:fe("status").notNull().default("scheduled"),notes:fe("notes"),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow()});on(Qse).omit({id:!0,createdAt:!0,updatedAt:!0});const Xse=an("fleetmatics_config",{id:rn("id").primaryKey(),organizationId:De("organization_id").references(()=>ko.id).notNull(),apiKey:fe("api_key").notNull(),apiSecret:fe("api_secret"),baseUrl:fe("base_url").notNull().default("https://fim.us.fleetmatics.com/api"),accountId:fe("account_id"),refreshToken:fe("refresh_token"),accessToken:fe("access_token"),tokenExpiresAt:vt("token_expires_at"),isActive:as("is_active").notNull().default(!0),lastSyncTime:vt("last_sync_time"),syncFrequencyMinutes:De("sync_frequency_minutes").default(15),createdAt:vt("created_at").notNull().defaultNow(),updatedAt:vt("updated_at").notNull().defaultNow()});on(Xse).omit({id:!0,createdAt:!0,updatedAt:!0,tokenExpiresAt:!0,lastSyncTime:!0});const Jse=an("fleetmatics_location_history",{id:rn("id").primaryKey(),vehicleId:De("vehicle_id").references(()=>z2.id).notNull(),latitude:yo("latitude").notNull(),longitude:yo("longitude").notNull(),speed:yo("speed"),heading:De("heading"),eventTime:vt("event_time").notNull(),address:fe("address"),ignitionStatus:fe("ignition_status"),odometer:yo("odometer"),fleetmaticsEventId:fe("fleetmatics_event_id"),createdAt:vt("created_at").notNull().defaultNow()});on(Jse).omit({id:!0,createdAt:!0});const Wn=y.forwardRef(({className:t,...e},s)=>n.jsx("textarea",{className:we("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...e}));Wn.displayName="Textarea";function Qp(t,[e,s]){return Math.min(s,Math.max(e,t))}function Ig(t){const e=y.useRef({value:t,previous:t});return y.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var ere=[" ","Enter","ArrowUp","ArrowDown"],tre=[" ","Enter"],Tg="Select",[Oy,Fy,nre]=fg(Tg),[Tm,Iye]=Or(Tg,[nre,Am]),By=Am(),[sre,dd]=Tm(Tg),[rre,ire]=Tm(Tg),IF=t=>{const{__scopeSelect:e,children:s,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:c,onValueChange:d,dir:h,name:g,autoComplete:m,disabled:p,required:v,form:j}=t,N=By(e),[E,_]=y.useState(null),[S,C]=y.useState(null),[I,P]=y.useState(!1),L=od(h),[T=!1,M]=ta({prop:r,defaultProp:i,onChange:a}),[k,O]=ta({prop:o,defaultProp:c,onChange:d}),V=y.useRef(null),B=E?j||!!E.closest("form"):!0,[Y,z]=y.useState(new Set),G=Array.from(Y).map(he=>he.props.value).join(";");return n.jsx(m2,{...N,children:n.jsxs(sre,{required:v,scope:e,trigger:E,onTriggerChange:_,valueNode:S,onValueNodeChange:C,valueNodeHasChildren:I,onValueNodeHasChildrenChange:P,contentId:Rr(),value:k,onValueChange:O,open:T,onOpenChange:M,dir:L,triggerPointerDownPosRef:V,disabled:p,children:[n.jsx(Oy.Provider,{scope:e,children:n.jsx(rre,{scope:t.__scopeSelect,onNativeOptionAdd:y.useCallback(he=>{z(le=>new Set(le).add(he))},[]),onNativeOptionRemove:y.useCallback(he=>{z(le=>{const se=new Set(le);return se.delete(he),se})},[]),children:s})}),B?n.jsxs(e7,{"aria-hidden":!0,required:v,tabIndex:-1,name:g,autoComplete:m,value:k,onChange:he=>O(he.target.value),disabled:p,form:j,children:[k===void 0?n.jsx("option",{value:""}):null,Array.from(Y)]},G):null]})})};IF.displayName=Tg;var TF="SelectTrigger",MF=y.forwardRef((t,e)=>{const{__scopeSelect:s,disabled:r=!1,...i}=t,a=By(s),o=dd(TF,s),c=o.disabled||r,d=Jt(e,o.onTriggerChange),h=Fy(s),g=y.useRef("touch"),[m,p,v]=t7(N=>{const E=h().filter(C=>!C.disabled),_=E.find(C=>C.value===o.value),S=n7(E,N,_);S!==void 0&&o.onValueChange(S.value)}),j=N=>{c||(o.onOpenChange(!0),v()),N&&(o.triggerPointerDownPosRef.current={x:Math.round(N.pageX),y:Math.round(N.pageY)})};return n.jsx(by,{asChild:!0,...a,children:n.jsx(St.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":JF(o.value)?"":void 0,...i,ref:d,onClick:it(i.onClick,N=>{N.currentTarget.focus(),g.current!=="mouse"&&j(N)}),onPointerDown:it(i.onPointerDown,N=>{g.current=N.pointerType;const E=N.target;E.hasPointerCapture(N.pointerId)&&E.releasePointerCapture(N.pointerId),N.button===0&&N.ctrlKey===!1&&N.pointerType==="mouse"&&(j(N),N.preventDefault())}),onKeyDown:it(i.onKeyDown,N=>{const E=m.current!=="";!(N.ctrlKey||N.altKey||N.metaKey)&&N.key.length===1&&p(N.key),!(E&&N.key===" ")&&ere.includes(N.key)&&(j(),N.preventDefault())})})})});MF.displayName=TF;var DF="SelectValue",kF=y.forwardRef((t,e)=>{const{__scopeSelect:s,className:r,style:i,children:a,placeholder:o="",...c}=t,d=dd(DF,s),{onValueNodeHasChildrenChange:h}=d,g=a!==void 0,m=Jt(e,d.onValueNodeChange);return Bs(()=>{h(g)},[h,g]),n.jsx(St.span,{...c,ref:m,style:{pointerEvents:"none"},children:JF(d.value)?n.jsx(n.Fragment,{children:o}):a})});kF.displayName=DF;var are="SelectIcon",PF=y.forwardRef((t,e)=>{const{__scopeSelect:s,children:r,...i}=t;return n.jsx(St.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});PF.displayName=are;var ore="SelectPortal",RF=t=>n.jsx(Em,{asChild:!0,...t});RF.displayName=ore;var au="SelectContent",LF=y.forwardRef((t,e)=>{const s=dd(au,t.__scopeSelect),[r,i]=y.useState();if(Bs(()=>{i(new DocumentFragment)},[]),!s.open){const a=r;return a?ra.createPortal(n.jsx(OF,{scope:t.__scopeSelect,children:n.jsx(Oy.Slot,{scope:t.__scopeSelect,children:n.jsx("div",{children:t.children})})}),a):null}return n.jsx(FF,{...t,ref:e})});LF.displayName=au;var uo=10,[OF,ud]=Tm(au),lre="SelectContentImpl",FF=y.forwardRef((t,e)=>{const{__scopeSelect:s,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:c,sideOffset:d,align:h,alignOffset:g,arrowPadding:m,collisionBoundary:p,collisionPadding:v,sticky:j,hideWhenDetached:N,avoidCollisions:E,..._}=t,S=dd(au,s),[C,I]=y.useState(null),[P,L]=y.useState(null),T=Jt(e,de=>I(de)),[M,k]=y.useState(null),[O,V]=y.useState(null),B=Fy(s),[Y,z]=y.useState(!1),G=y.useRef(!1);y.useEffect(()=>{if(C)return Sy(C)},[C]),vy();const he=y.useCallback(de=>{const[pe,...Me]=B().map(jt=>jt.ref.current),[Le]=Me.slice(-1),We=document.activeElement;for(const jt of de)if(jt===We||(jt==null||jt.scrollIntoView({block:"nearest"}),jt===pe&&P&&(P.scrollTop=0),jt===Le&&P&&(P.scrollTop=P.scrollHeight),jt==null||jt.focus(),document.activeElement!==We))return},[B,P]),le=y.useCallback(()=>he([M,C]),[he,M,C]);y.useEffect(()=>{Y&&le()},[Y,le]);const{onOpenChange:se,triggerPointerDownPosRef:re}=S;y.useEffect(()=>{if(C){let de={x:0,y:0};const pe=Le=>{var We,jt;de={x:Math.abs(Math.round(Le.pageX)-(((We=re.current)==null?void 0:We.x)??0)),y:Math.abs(Math.round(Le.pageY)-(((jt=re.current)==null?void 0:jt.y)??0))}},Me=Le=>{de.x<=10&&de.y<=10?Le.preventDefault():C.contains(Le.target)||se(!1),document.removeEventListener("pointermove",pe),re.current=null};return re.current!==null&&(document.addEventListener("pointermove",pe),document.addEventListener("pointerup",Me,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",pe),document.removeEventListener("pointerup",Me,{capture:!0})}}},[C,se,re]),y.useEffect(()=>{const de=()=>se(!1);return window.addEventListener("blur",de),window.addEventListener("resize",de),()=>{window.removeEventListener("blur",de),window.removeEventListener("resize",de)}},[se]);const[me,Ce]=t7(de=>{const pe=B().filter(We=>!We.disabled),Me=pe.find(We=>We.ref.current===document.activeElement),Le=n7(pe,de,Me);Le&&setTimeout(()=>Le.ref.current.focus())}),$=y.useCallback((de,pe,Me)=>{const Le=!G.current&&!Me;(S.value!==void 0&&S.value===pe||Le)&&(k(de),Le&&(G.current=!0))},[S.value]),xe=y.useCallback(()=>C==null?void 0:C.focus(),[C]),te=y.useCallback((de,pe,Me)=>{const Le=!G.current&&!Me;(S.value!==void 0&&S.value===pe||Le)&&V(de)},[S.value]),ae=r==="popper"?Kb:BF,ee=ae===Kb?{side:c,sideOffset:d,align:h,alignOffset:g,arrowPadding:m,collisionBoundary:p,collisionPadding:v,sticky:j,hideWhenDetached:N,avoidCollisions:E}:{};return n.jsx(OF,{scope:s,content:C,viewport:P,onViewportChange:L,itemRefCallback:$,selectedItem:M,onItemLeave:xe,itemTextRefCallback:te,focusSelectedItem:le,selectedItemText:O,position:r,isPositioned:Y,searchRef:me,children:n.jsx(xg,{as:Eo,allowPinchZoom:!0,children:n.jsx(pg,{asChild:!0,trapped:S.open,onMountAutoFocus:de=>{de.preventDefault()},onUnmountAutoFocus:it(i,de=>{var pe;(pe=S.trigger)==null||pe.focus({preventScroll:!0}),de.preventDefault()}),children:n.jsx(bm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:de=>de.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:n.jsx(ae,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:de=>de.preventDefault(),..._,...ee,onPlaced:()=>z(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:it(_.onKeyDown,de=>{const pe=de.ctrlKey||de.altKey||de.metaKey;if(de.key==="Tab"&&de.preventDefault(),!pe&&de.key.length===1&&Ce(de.key),["ArrowUp","ArrowDown","Home","End"].includes(de.key)){let Le=B().filter(We=>!We.disabled).map(We=>We.ref.current);if(["ArrowUp","End"].includes(de.key)&&(Le=Le.slice().reverse()),["ArrowUp","ArrowDown"].includes(de.key)){const We=de.target,jt=Le.indexOf(We);Le=Le.slice(jt+1)}setTimeout(()=>he(Le)),de.preventDefault()}})})})})})})});FF.displayName=lre;var cre="SelectItemAlignedPosition",BF=y.forwardRef((t,e)=>{const{__scopeSelect:s,onPlaced:r,...i}=t,a=dd(au,s),o=ud(au,s),[c,d]=y.useState(null),[h,g]=y.useState(null),m=Jt(e,T=>g(T)),p=Fy(s),v=y.useRef(!1),j=y.useRef(!0),{viewport:N,selectedItem:E,selectedItemText:_,focusSelectedItem:S}=o,C=y.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&h&&N&&E&&_){const T=a.trigger.getBoundingClientRect(),M=h.getBoundingClientRect(),k=a.valueNode.getBoundingClientRect(),O=_.getBoundingClientRect();if(a.dir!=="rtl"){const We=O.left-M.left,jt=k.left-We,mt=T.left-jt,ke=T.width+mt,yt=Math.max(ke,M.width),On=window.innerWidth-uo,zt=Qp(jt,[uo,Math.max(uo,On-yt)]);c.style.minWidth=ke+"px",c.style.left=zt+"px"}else{const We=M.right-O.right,jt=window.innerWidth-k.right-We,mt=window.innerWidth-T.right-jt,ke=T.width+mt,yt=Math.max(ke,M.width),On=window.innerWidth-uo,zt=Qp(jt,[uo,Math.max(uo,On-yt)]);c.style.minWidth=ke+"px",c.style.right=zt+"px"}const V=p(),B=window.innerHeight-uo*2,Y=N.scrollHeight,z=window.getComputedStyle(h),G=parseInt(z.borderTopWidth,10),he=parseInt(z.paddingTop,10),le=parseInt(z.borderBottomWidth,10),se=parseInt(z.paddingBottom,10),re=G+he+Y+se+le,me=Math.min(E.offsetHeight*5,re),Ce=window.getComputedStyle(N),$=parseInt(Ce.paddingTop,10),xe=parseInt(Ce.paddingBottom,10),te=T.top+T.height/2-uo,ae=B-te,ee=E.offsetHeight/2,de=E.offsetTop+ee,pe=G+he+de,Me=re-pe;if(pe<=te){const We=V.length>0&&E===V[V.length-1].ref.current;c.style.bottom="0px";const jt=h.clientHeight-N.offsetTop-N.offsetHeight,mt=Math.max(ae,ee+(We?xe:0)+jt+le),ke=pe+mt;c.style.height=ke+"px"}else{const We=V.length>0&&E===V[0].ref.current;c.style.top="0px";const mt=Math.max(te,G+N.offsetTop+(We?$:0)+ee)+Me;c.style.height=mt+"px",N.scrollTop=pe-te+N.offsetTop}c.style.margin=`${uo}px 0`,c.style.minHeight=me+"px",c.style.maxHeight=B+"px",r==null||r(),requestAnimationFrame(()=>v.current=!0)}},[p,a.trigger,a.valueNode,c,h,N,E,_,a.dir,r]);Bs(()=>C(),[C]);const[I,P]=y.useState();Bs(()=>{h&&P(window.getComputedStyle(h).zIndex)},[h]);const L=y.useCallback(T=>{T&&j.current===!0&&(C(),S==null||S(),j.current=!1)},[C,S]);return n.jsx(ure,{scope:s,contentWrapper:c,shouldExpandOnScrollRef:v,onScrollButtonChange:L,children:n.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:n.jsx(St.div,{...i,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});BF.displayName=cre;var dre="SelectPopperPosition",Kb=y.forwardRef((t,e)=>{const{__scopeSelect:s,align:r="start",collisionPadding:i=uo,...a}=t,o=By(s);return n.jsx(f2,{...o,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Kb.displayName=dre;var[ure,$2]=Tm(au,{}),Zb="SelectViewport",zF=y.forwardRef((t,e)=>{const{__scopeSelect:s,nonce:r,...i}=t,a=ud(Zb,s),o=$2(Zb,s),c=Jt(e,a.onViewportChange),d=y.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),n.jsx(Oy.Slot,{scope:s,children:n.jsx(St.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:it(i.onScroll,h=>{const g=h.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&m){const v=Math.abs(d.current-g.scrollTop);if(v>0){const j=window.innerHeight-uo*2,N=parseFloat(m.style.minHeight),E=parseFloat(m.style.height),_=Math.max(N,E);if(_<j){const S=_+v,C=Math.min(j,S),I=S-C;m.style.height=C+"px",m.style.bottom==="0px"&&(g.scrollTop=I>0?I:0,m.style.justifyContent="flex-end")}}}d.current=g.scrollTop})})})]})});zF.displayName=Zb;var VF="SelectGroup",[hre,mre]=Tm(VF),fre=y.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t,i=Rr();return n.jsx(hre,{scope:s,id:i,children:n.jsx(St.div,{role:"group","aria-labelledby":i,...r,ref:e})})});fre.displayName=VF;var $F="SelectLabel",UF=y.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t,i=mre($F,s);return n.jsx(St.div,{id:i.id,...r,ref:e})});UF.displayName=$F;var Nv="SelectItem",[pre,WF]=Tm(Nv),HF=y.forwardRef((t,e)=>{const{__scopeSelect:s,value:r,disabled:i=!1,textValue:a,...o}=t,c=dd(Nv,s),d=ud(Nv,s),h=c.value===r,[g,m]=y.useState(a??""),[p,v]=y.useState(!1),j=Jt(e,S=>{var C;return(C=d.itemRefCallback)==null?void 0:C.call(d,S,r,i)}),N=Rr(),E=y.useRef("touch"),_=()=>{i||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(pre,{scope:s,value:r,disabled:i,textId:N,isSelected:h,onItemTextChange:y.useCallback(S=>{m(C=>C||((S==null?void 0:S.textContent)??"").trim())},[]),children:n.jsx(Oy.ItemSlot,{scope:s,value:r,disabled:i,textValue:g,children:n.jsx(St.div,{role:"option","aria-labelledby":N,"data-highlighted":p?"":void 0,"aria-selected":h&&p,"data-state":h?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:j,onFocus:it(o.onFocus,()=>v(!0)),onBlur:it(o.onBlur,()=>v(!1)),onClick:it(o.onClick,()=>{E.current!=="mouse"&&_()}),onPointerUp:it(o.onPointerUp,()=>{E.current==="mouse"&&_()}),onPointerDown:it(o.onPointerDown,S=>{E.current=S.pointerType}),onPointerMove:it(o.onPointerMove,S=>{var C;E.current=S.pointerType,i?(C=d.onItemLeave)==null||C.call(d):E.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:it(o.onPointerLeave,S=>{var C;S.currentTarget===document.activeElement&&((C=d.onItemLeave)==null||C.call(d))}),onKeyDown:it(o.onKeyDown,S=>{var I;((I=d.searchRef)==null?void 0:I.current)!==""&&S.key===" "||(tre.includes(S.key)&&_(),S.key===" "&&S.preventDefault())})})})})});HF.displayName=Nv;var If="SelectItemText",qF=y.forwardRef((t,e)=>{const{__scopeSelect:s,className:r,style:i,...a}=t,o=dd(If,s),c=ud(If,s),d=WF(If,s),h=ire(If,s),[g,m]=y.useState(null),p=Jt(e,_=>m(_),d.onItemTextChange,_=>{var S;return(S=c.itemTextRefCallback)==null?void 0:S.call(c,_,d.value,d.disabled)}),v=g==null?void 0:g.textContent,j=y.useMemo(()=>n.jsx("option",{value:d.value,disabled:d.disabled,children:v},d.value),[d.disabled,d.value,v]),{onNativeOptionAdd:N,onNativeOptionRemove:E}=h;return Bs(()=>(N(j),()=>E(j)),[N,E,j]),n.jsxs(n.Fragment,{children:[n.jsx(St.span,{id:d.textId,...a,ref:p}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ra.createPortal(a.children,o.valueNode):null]})});qF.displayName=If;var GF="SelectItemIndicator",YF=y.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t;return WF(GF,s).isSelected?n.jsx(St.span,{"aria-hidden":!0,...r,ref:e}):null});YF.displayName=GF;var Qb="SelectScrollUpButton",KF=y.forwardRef((t,e)=>{const s=ud(Qb,t.__scopeSelect),r=$2(Qb,t.__scopeSelect),[i,a]=y.useState(!1),o=Jt(e,r.onScrollButtonChange);return Bs(()=>{if(s.viewport&&s.isPositioned){let c=function(){const h=d.scrollTop>0;a(h)};const d=s.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[s.viewport,s.isPositioned]),i?n.jsx(QF,{...t,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=s;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});KF.displayName=Qb;var Xb="SelectScrollDownButton",ZF=y.forwardRef((t,e)=>{const s=ud(Xb,t.__scopeSelect),r=$2(Xb,t.__scopeSelect),[i,a]=y.useState(!1),o=Jt(e,r.onScrollButtonChange);return Bs(()=>{if(s.viewport&&s.isPositioned){let c=function(){const h=d.scrollHeight-d.clientHeight,g=Math.ceil(d.scrollTop)<h;a(g)};const d=s.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[s.viewport,s.isPositioned]),i?n.jsx(QF,{...t,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=s;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});ZF.displayName=Xb;var QF=y.forwardRef((t,e)=>{const{__scopeSelect:s,onAutoScroll:r,...i}=t,a=ud("SelectScrollButton",s),o=y.useRef(null),c=Fy(s),d=y.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return y.useEffect(()=>()=>d(),[d]),Bs(()=>{var g;const h=c().find(m=>m.ref.current===document.activeElement);(g=h==null?void 0:h.ref.current)==null||g.scrollIntoView({block:"nearest"})},[c]),n.jsx(St.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:it(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:it(i.onPointerMove,()=>{var h;(h=a.onItemLeave)==null||h.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:it(i.onPointerLeave,()=>{d()})})}),gre="SelectSeparator",XF=y.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t;return n.jsx(St.div,{"aria-hidden":!0,...r,ref:e})});XF.displayName=gre;var Jb="SelectArrow",xre=y.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t,i=By(s),a=dd(Jb,s),o=ud(Jb,s);return a.open&&o.position==="popper"?n.jsx(p2,{...i,...r,ref:e}):null});xre.displayName=Jb;function JF(t){return t===""||t===void 0}var e7=y.forwardRef((t,e)=>{const{value:s,...r}=t,i=y.useRef(null),a=Jt(e,i),o=Ig(s);return y.useEffect(()=>{const c=i.current,d=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==s&&g){const m=new Event("change",{bubbles:!0});g.call(c,s),c.dispatchEvent(m)}},[o,s]),n.jsx(Iy,{asChild:!0,children:n.jsx("select",{...r,ref:a,defaultValue:s})})});e7.displayName="BubbleSelect";function t7(t){const e=vs(t),s=y.useRef(""),r=y.useRef(0),i=y.useCallback(o=>{const c=s.current+o;e(c),function d(h){s.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(c)},[e]),a=y.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,i,a]}function n7(t,e,s){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,a=s?t.indexOf(s):-1;let o=vre(t,Math.max(a,0));i.length===1&&(o=o.filter(h=>h!==s));const d=o.find(h=>h.textValue.toLowerCase().startsWith(i.toLowerCase()));return d!==s?d:void 0}function vre(t,e){return t.map((s,r)=>t[(e+r)%t.length])}var yre=IF,s7=MF,wre=kF,jre=PF,bre=RF,r7=LF,Nre=zF,i7=UF,a7=HF,Cre=qF,Sre=YF,o7=KF,l7=ZF,c7=XF;const gt=yre,xt=wre,ut=y.forwardRef(({className:t,children:e,...s},r)=>n.jsxs(s7,{ref:r,className:we("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[e,n.jsx(jre,{asChild:!0,children:n.jsx(bp,{className:"h-4 w-4 opacity-50"})})]}));ut.displayName=s7.displayName;const d7=y.forwardRef(({className:t,...e},s)=>n.jsx(o7,{ref:s,className:we("flex cursor-default items-center justify-center py-1",t),...e,children:n.jsx(TG,{className:"h-4 w-4"})}));d7.displayName=o7.displayName;const u7=y.forwardRef(({className:t,...e},s)=>n.jsx(l7,{ref:s,className:we("flex cursor-default items-center justify-center py-1",t),...e,children:n.jsx(bp,{className:"h-4 w-4"})}));u7.displayName=l7.displayName;const ht=y.forwardRef(({className:t,children:e,position:s="popper",...r},i)=>n.jsx(bre,{children:n.jsxs(r7,{ref:i,className:we("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...r,children:[n.jsx(d7,{}),n.jsx(Nre,{className:we("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),n.jsx(u7,{})]})}));ht.displayName=r7.displayName;const Are=y.forwardRef(({className:t,...e},s)=>n.jsx(i7,{ref:s,className:we("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));Are.displayName=i7.displayName;const ue=y.forwardRef(({className:t,children:e,...s},r)=>n.jsxs(a7,{ref:r,className:we("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(Sre,{children:n.jsx(Ao,{className:"h-4 w-4"})})}),n.jsx(Cre,{children:e})]}));ue.displayName=a7.displayName;const Ere=y.forwardRef(({className:t,...e},s)=>n.jsx(c7,{ref:s,className:we("-mx-1 my-1 h-px bg-muted",t),...e}));Ere.displayName=c7.displayName;var Qt=function(){return Qt=Object.assign||function(e){for(var s,r=1,i=arguments.length;r<i;r++){s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Qt.apply(this,arguments)};function _re(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s}function h7(t,e,s){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function Mg(t){return t.mode==="multiple"}function Dg(t){return t.mode==="range"}function zy(t){return t.mode==="single"}var Ire={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Tre(t,e){return ft(t,"LLLL y",e)}function Mre(t,e){return ft(t,"d",e)}function Dre(t,e){return ft(t,"LLLL",e)}function kre(t){return"".concat(t)}function Pre(t,e){return ft(t,"cccccc",e)}function Rre(t,e){return ft(t,"yyyy",e)}var Lre=Object.freeze({__proto__:null,formatCaption:Tre,formatDay:Mre,formatMonthCaption:Dre,formatWeekNumber:kre,formatWeekdayName:Pre,formatYearCaption:Rre}),Ore=function(t,e,s){return ft(t,"do MMMM (EEEE)",s)},Fre=function(){return"Month: "},Bre=function(){return"Go to next month"},zre=function(){return"Go to previous month"},Vre=function(t,e){return ft(t,"cccc",e)},$re=function(t){return"Week n. ".concat(t)},Ure=function(){return"Year: "},Wre=Object.freeze({__proto__:null,labelDay:Ore,labelMonthDropdown:Fre,labelNext:Bre,labelPrevious:zre,labelWeekNumber:$re,labelWeekday:Vre,labelYearDropdown:Ure});function Hre(){var t="buttons",e=Ire,s=K5,r={},i={},a=1,o={},c=new Date;return{captionLayout:t,classNames:e,formatters:Lre,labels:Wre,locale:s,modifiersClassNames:r,modifiers:i,numberOfMonths:a,styles:o,today:c,mode:"default"}}function qre(t){var e=t.fromYear,s=t.toYear,r=t.fromMonth,i=t.toMonth,a=t.fromDate,o=t.toDate;return r?a=Pi(r):e&&(a=new Date(e,0,1)),i?o=Dy(i):s&&(o=new Date(s,11,31)),{fromDate:a?rm(a):void 0,toDate:o?rm(o):void 0}}var m7=y.createContext(void 0);function Gre(t){var e,s=t.initialProps,r=Hre(),i=qre(s),a=i.fromDate,o=i.toDate,c=(e=s.captionLayout)!==null&&e!==void 0?e:r.captionLayout;c!=="buttons"&&(!a||!o)&&(c="buttons");var d;(zy(s)||Mg(s)||Dg(s))&&(d=s.onSelect);var h=Qt(Qt(Qt({},r),s),{captionLayout:c,classNames:Qt(Qt({},r.classNames),s.classNames),components:Qt({},s.components),formatters:Qt(Qt({},r.formatters),s.formatters),fromDate:a,labels:Qt(Qt({},r.labels),s.labels),mode:s.mode||r.mode,modifiers:Qt(Qt({},r.modifiers),s.modifiers),modifiersClassNames:Qt(Qt({},r.modifiersClassNames),s.modifiersClassNames),onSelect:d,styles:Qt(Qt({},r.styles),s.styles),toDate:o});return n.jsx(m7.Provider,{value:h,children:t.children})}function _s(){var t=y.useContext(m7);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function f7(t){var e=_s(),s=e.locale,r=e.classNames,i=e.styles,a=e.formatters.formatCaption;return n.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:s})})}function Yre(t){return n.jsx("svg",Qt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:n.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function p7(t){var e,s,r=t.onChange,i=t.value,a=t.children,o=t.caption,c=t.className,d=t.style,h=_s(),g=(s=(e=h.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&s!==void 0?s:Yre;return n.jsxs("div",{className:c,style:d,children:[n.jsx("span",{className:h.classNames.vhidden,children:t["aria-label"]}),n.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:h.classNames.dropdown,style:h.styles.dropdown,value:i,onChange:r,children:a}),n.jsxs("div",{className:h.classNames.caption_label,style:h.styles.caption_label,"aria-hidden":"true",children:[o,n.jsx(g,{className:h.classNames.dropdown_icon,style:h.styles.dropdown_icon})]})]})}function Kre(t){var e,s=_s(),r=s.fromDate,i=s.toDate,a=s.styles,o=s.locale,c=s.formatters.formatMonthCaption,d=s.classNames,h=s.components,g=s.labels.labelMonthDropdown;if(!r)return n.jsx(n.Fragment,{});if(!i)return n.jsx(n.Fragment,{});var m=[];if(Eee(r,i))for(var p=Pi(r),v=r.getMonth();v<=i.getMonth();v++)m.push(uw(p,v));else for(var p=Pi(new Date),v=0;v<=11;v++)m.push(uw(p,v));var j=function(E){var _=Number(E.target.value),S=uw(Pi(t.displayMonth),_);t.onChange(S)},N=(e=h==null?void 0:h.Dropdown)!==null&&e!==void 0?e:p7;return n.jsx(N,{name:"months","aria-label":g(),className:d.dropdown_month,style:a.dropdown_month,onChange:j,value:t.displayMonth.getMonth(),caption:c(t.displayMonth,{locale:o}),children:m.map(function(E){return n.jsx("option",{value:E.getMonth(),children:c(E,{locale:o})},E.getMonth())})})}function Zre(t){var e,s=t.displayMonth,r=_s(),i=r.fromDate,a=r.toDate,o=r.locale,c=r.styles,d=r.classNames,h=r.components,g=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,p=[];if(!i)return n.jsx(n.Fragment,{});if(!a)return n.jsx(n.Fragment,{});for(var v=i.getFullYear(),j=a.getFullYear(),N=v;N<=j;N++)p.push(A4(G5(new Date),N));var E=function(S){var C=A4(Pi(s),Number(S.target.value));t.onChange(C)},_=(e=h==null?void 0:h.Dropdown)!==null&&e!==void 0?e:p7;return n.jsx(_,{name:"years","aria-label":m(),className:d.dropdown_year,style:c.dropdown_year,onChange:E,value:s.getFullYear(),caption:g(s,{locale:o}),children:p.map(function(S){return n.jsx("option",{value:S.getFullYear(),children:g(S,{locale:o})},S.getFullYear())})})}function Qre(t,e){var s=y.useState(t),r=s[0],i=s[1],a=e===void 0?r:e;return[a,i]}function Xre(t){var e=t.month,s=t.defaultMonth,r=t.today,i=e||s||r||new Date,a=t.toDate,o=t.fromDate,c=t.numberOfMonths,d=c===void 0?1:c;if(a&&Pp(a,i)<0){var h=-1*(d-1);i=Ea(a,h)}return o&&Pp(i,o)<0&&(i=o),Pi(i)}function Jre(){var t=_s(),e=Xre(t),s=Qre(e,t.month),r=s[0],i=s[1],a=function(o){var c;if(!t.disableNavigation){var d=Pi(o);i(d),(c=t.onMonthChange)===null||c===void 0||c.call(t,d)}};return[r,a]}function eie(t,e){for(var s=e.reverseMonths,r=e.numberOfMonths,i=Pi(t),a=Pi(Ea(i,r)),o=Pp(a,i),c=[],d=0;d<o;d++){var h=Ea(i,d);c.push(h)}return s&&(c=c.reverse()),c}function tie(t,e){if(!e.disableNavigation){var s=e.toDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=r?a:1,c=Pi(t);if(!s)return Ea(c,o);var d=Pp(s,t);if(!(d<a))return Ea(c,o)}}function nie(t,e){if(!e.disableNavigation){var s=e.fromDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=r?a:1,c=Pi(t);if(!s)return Ea(c,-o);var d=Pp(c,s);if(!(d<=0))return Ea(c,-o)}}var g7=y.createContext(void 0);function sie(t){var e=_s(),s=Jre(),r=s[0],i=s[1],a=eie(r,e),o=tie(r,e),c=nie(r,e),d=function(m){return a.some(function(p){return Rp(m,p)})},h=function(m,p){d(m)||(p&&e6(m,p)?i(Ea(m,1+e.numberOfMonths*-1)):i(m))},g={currentMonth:r,displayMonths:a,goToMonth:i,goToDate:h,previousMonth:c,nextMonth:o,isDateDisplayed:d};return n.jsx(g7.Provider,{value:g,children:t.children})}function kg(){var t=y.useContext(g7);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function G4(t){var e,s=_s(),r=s.classNames,i=s.styles,a=s.components,o=kg().goToMonth,c=function(g){o(Ea(g,t.displayIndex?-t.displayIndex:0))},d=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:f7,h=n.jsx(d,{id:t.id,displayMonth:t.displayMonth});return n.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[n.jsx("div",{className:r.vhidden,children:h}),n.jsx(Kre,{onChange:c,displayMonth:t.displayMonth}),n.jsx(Zre,{onChange:c,displayMonth:t.displayMonth})]})}function rie(t){return n.jsx("svg",Qt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:n.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function iie(t){return n.jsx("svg",Qt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:n.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Cv=y.forwardRef(function(t,e){var s=_s(),r=s.classNames,i=s.styles,a=[r.button_reset,r.button];t.className&&a.push(t.className);var o=a.join(" "),c=Qt(Qt({},i.button_reset),i.button);return t.style&&Object.assign(c,t.style),n.jsx("button",Qt({},t,{ref:e,type:"button",className:o,style:c}))});function aie(t){var e,s,r=_s(),i=r.dir,a=r.locale,o=r.classNames,c=r.styles,d=r.labels,h=d.labelPrevious,g=d.labelNext,m=r.components;if(!t.nextMonth&&!t.previousMonth)return n.jsx(n.Fragment,{});var p=h(t.previousMonth,{locale:a}),v=[o.nav_button,o.nav_button_previous].join(" "),j=g(t.nextMonth,{locale:a}),N=[o.nav_button,o.nav_button_next].join(" "),E=(e=m==null?void 0:m.IconRight)!==null&&e!==void 0?e:iie,_=(s=m==null?void 0:m.IconLeft)!==null&&s!==void 0?s:rie;return n.jsxs("div",{className:o.nav,style:c.nav,children:[!t.hidePrevious&&n.jsx(Cv,{name:"previous-month","aria-label":p,className:v,style:c.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?n.jsx(E,{className:o.nav_icon,style:c.nav_icon}):n.jsx(_,{className:o.nav_icon,style:c.nav_icon})}),!t.hideNext&&n.jsx(Cv,{name:"next-month","aria-label":j,className:N,style:c.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?n.jsx(_,{className:o.nav_icon,style:c.nav_icon}):n.jsx(E,{className:o.nav_icon,style:c.nav_icon})})]})}function Y4(t){var e=_s().numberOfMonths,s=kg(),r=s.previousMonth,i=s.nextMonth,a=s.goToMonth,o=s.displayMonths,c=o.findIndex(function(j){return Rp(t.displayMonth,j)}),d=c===0,h=c===o.length-1,g=e>1&&(d||!h),m=e>1&&(h||!d),p=function(){r&&a(r)},v=function(){i&&a(i)};return n.jsx(aie,{displayMonth:t.displayMonth,hideNext:g,hidePrevious:m,nextMonth:i,previousMonth:r,onPreviousClick:p,onNextClick:v})}function oie(t){var e,s=_s(),r=s.classNames,i=s.disableNavigation,a=s.styles,o=s.captionLayout,c=s.components,d=(e=c==null?void 0:c.CaptionLabel)!==null&&e!==void 0?e:f7,h;return i?h=n.jsx(d,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?h=n.jsx(G4,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?h=n.jsxs(n.Fragment,{children:[n.jsx(G4,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),n.jsx(Y4,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):h=n.jsxs(n.Fragment,{children:[n.jsx(d,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),n.jsx(Y4,{displayMonth:t.displayMonth,id:t.id})]}),n.jsx("div",{className:r.caption,style:a.caption,children:h})}function lie(t){var e=_s(),s=e.footer,r=e.styles,i=e.classNames.tfoot;return s?n.jsx("tfoot",{className:i,style:r.tfoot,children:n.jsx("tr",{children:n.jsx("td",{colSpan:8,children:s})})}):n.jsx(n.Fragment,{})}function cie(t,e,s){for(var r=s?su(new Date):rl(new Date,{locale:t,weekStartsOn:e}),i=[],a=0;a<7;a++){var o=Ii(r,a);i.push(o)}return i}function die(){var t=_s(),e=t.classNames,s=t.styles,r=t.showWeekNumber,i=t.locale,a=t.weekStartsOn,o=t.ISOWeek,c=t.formatters.formatWeekdayName,d=t.labels.labelWeekday,h=cie(i,a,o);return n.jsxs("tr",{style:s.head_row,className:e.head_row,children:[r&&n.jsx("td",{style:s.head_cell,className:e.head_cell}),h.map(function(g,m){return n.jsx("th",{scope:"col",className:e.head_cell,style:s.head_cell,"aria-label":d(g,{locale:i}),children:c(g,{locale:i})},m)})]})}function uie(){var t,e=_s(),s=e.classNames,r=e.styles,i=e.components,a=(t=i==null?void 0:i.HeadRow)!==null&&t!==void 0?t:die;return n.jsx("thead",{style:r.head,className:s.head,children:n.jsx(a,{})})}function hie(t){var e=_s(),s=e.locale,r=e.formatters.formatDay;return n.jsx(n.Fragment,{children:r(t.date,{locale:s})})}var U2=y.createContext(void 0);function mie(t){if(!Mg(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return n.jsx(U2.Provider,{value:e,children:t.children})}return n.jsx(fie,{initialProps:t.initialProps,children:t.children})}function fie(t){var e=t.initialProps,s=t.children,r=e.selected,i=e.min,a=e.max,o=function(h,g,m){var p,v;(p=e.onDayClick)===null||p===void 0||p.call(e,h,g,m);var j=!!(g.selected&&i&&(r==null?void 0:r.length)===i);if(!j){var N=!!(!g.selected&&a&&(r==null?void 0:r.length)===a);if(!N){var E=r?h7([],r):[];if(g.selected){var _=E.findIndex(function(S){return vi(h,S)});E.splice(_,1)}else E.push(h);(v=e.onSelect)===null||v===void 0||v.call(e,E,h,g,m)}}},c={disabled:[]};r&&c.disabled.push(function(h){var g=a&&r.length>a-1,m=r.some(function(p){return vi(p,h)});return!!(g&&!m)});var d={selected:r,onDayClick:o,modifiers:c};return n.jsx(U2.Provider,{value:d,children:s})}function W2(){var t=y.useContext(U2);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function pie(t,e){var s=e||{},r=s.from,i=s.to;return r&&i?vi(i,t)&&vi(r,t)?void 0:vi(i,t)?{from:i,to:void 0}:vi(r,t)?void 0:Bb(r,t)?{from:t,to:i}:{from:r,to:t}:i?Bb(t,i)?{from:i,to:t}:{from:t,to:i}:r?e6(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var H2=y.createContext(void 0);function gie(t){if(!Dg(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return n.jsx(H2.Provider,{value:e,children:t.children})}return n.jsx(xie,{initialProps:t.initialProps,children:t.children})}function xie(t){var e=t.initialProps,s=t.children,r=e.selected,i=r||{},a=i.from,o=i.to,c=e.min,d=e.max,h=function(v,j,N){var E,_;(E=e.onDayClick)===null||E===void 0||E.call(e,v,j,N);var S=pie(v,r);(_=e.onSelect)===null||_===void 0||_.call(e,S,v,j,N)},g={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(g.range_start=[a],o?(g.range_end=[o],vi(a,o)||(g.range_middle=[{after:a,before:o}])):g.range_end=[a]):o&&(g.range_start=[o],g.range_end=[o]),c&&(a&&!o&&g.disabled.push({after:cw(a,c-1),before:Ii(a,c-1)}),a&&o&&g.disabled.push({after:a,before:Ii(a,c-1)}),!a&&o&&g.disabled.push({after:cw(o,c-1),before:Ii(o,c-1)})),d){if(a&&!o&&(g.disabled.push({before:Ii(a,-d+1)}),g.disabled.push({after:Ii(a,d-1)})),a&&o){var m=Ko(o,a)+1,p=d-m;g.disabled.push({before:cw(a,p)}),g.disabled.push({after:Ii(o,p)})}!a&&o&&(g.disabled.push({before:Ii(o,-d+1)}),g.disabled.push({after:Ii(o,d-1)}))}return n.jsx(H2.Provider,{value:{selected:r,onDayClick:h,modifiers:g},children:s})}function q2(){var t=y.useContext(H2);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function e0(t){return Array.isArray(t)?h7([],t):t!==void 0?[t]:[]}function vie(t){var e={};return Object.entries(t).forEach(function(s){var r=s[0],i=s[1];e[r]=e0(i)}),e}var Mo;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Mo||(Mo={}));var yie=Mo.Selected,gl=Mo.Disabled,wie=Mo.Hidden,jie=Mo.Today,Ew=Mo.RangeEnd,_w=Mo.RangeMiddle,Iw=Mo.RangeStart,bie=Mo.Outside;function Nie(t,e,s){var r,i=(r={},r[yie]=e0(t.selected),r[gl]=e0(t.disabled),r[wie]=e0(t.hidden),r[jie]=[t.today],r[Ew]=[],r[_w]=[],r[Iw]=[],r[bie]=[],r);return t.fromDate&&i[gl].push({before:t.fromDate}),t.toDate&&i[gl].push({after:t.toDate}),Mg(t)?i[gl]=i[gl].concat(e.modifiers[gl]):Dg(t)&&(i[gl]=i[gl].concat(s.modifiers[gl]),i[Iw]=s.modifiers[Iw],i[_w]=s.modifiers[_w],i[Ew]=s.modifiers[Ew]),i}var x7=y.createContext(void 0);function Cie(t){var e=_s(),s=W2(),r=q2(),i=Nie(e,s,r),a=vie(e.modifiers),o=Qt(Qt({},i),a);return n.jsx(x7.Provider,{value:o,children:t.children})}function v7(){var t=y.useContext(x7);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function Sie(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function Aie(t){return!!(t&&typeof t=="object"&&"from"in t)}function Eie(t){return!!(t&&typeof t=="object"&&"after"in t)}function _ie(t){return!!(t&&typeof t=="object"&&"before"in t)}function Iie(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function Tie(t,e){var s,r=e.from,i=e.to;if(r&&i){var a=Ko(i,r)<0;a&&(s=[i,r],r=s[0],i=s[1]);var o=Ko(t,r)>=0&&Ko(i,t)>=0;return o}return i?vi(i,t):r?vi(r,t):!1}function Mie(t){return I2(t)}function Die(t){return Array.isArray(t)&&t.every(I2)}function kie(t,e){return e.some(function(s){if(typeof s=="boolean")return s;if(Mie(s))return vi(t,s);if(Die(s))return s.includes(t);if(Aie(s))return Tie(t,s);if(Iie(s))return s.dayOfWeek.includes(t.getDay());if(Sie(s)){var r=Ko(s.before,t),i=Ko(s.after,t),a=r>0,o=i<0,c=Bb(s.before,s.after);return c?o&&a:a||o}return Eie(s)?Ko(t,s.after)>0:_ie(s)?Ko(s.before,t)>0:typeof s=="function"?s(t):!1})}function G2(t,e,s){var r=Object.keys(e).reduce(function(a,o){var c=e[o];return kie(t,c)&&a.push(o),a},[]),i={};return r.forEach(function(a){return i[a]=!0}),s&&!Rp(t,s)&&(i.outside=!0),i}function Pie(t,e){for(var s=Pi(t[0]),r=Dy(t[t.length-1]),i,a,o=s;o<=r;){var c=G2(o,e),d=!c.disabled&&!c.hidden;if(!d){o=Ii(o,1);continue}if(c.selected)return o;c.today&&!a&&(a=o),i||(i=o),o=Ii(o,1)}return a||i}var Rie=365;function y7(t,e){var s=e.moveBy,r=e.direction,i=e.context,a=e.modifiers,o=e.retry,c=o===void 0?{count:0,lastFocused:t}:o,d=i.weekStartsOn,h=i.fromDate,g=i.toDate,m=i.locale,p={day:Ii,week:Fb,month:Ea,year:jJ,startOfWeek:function(E){return i.ISOWeek?su(E):rl(E,{locale:m,weekStartsOn:d})},endOfWeek:function(E){return i.ISOWeek?Y5(E):T2(E,{locale:m,weekStartsOn:d})}},v=p[s](t,r==="after"?1:-1);r==="before"&&h?v=bJ([h,v]):r==="after"&&g&&(v=NJ([g,v]));var j=!0;if(a){var N=G2(v,a);j=!N.disabled&&!N.hidden}return j?v:c.count>Rie?c.lastFocused:y7(v,{moveBy:s,direction:r,context:i,modifiers:a,retry:Qt(Qt({},c),{count:c.count+1})})}var w7=y.createContext(void 0);function Lie(t){var e=kg(),s=v7(),r=y.useState(),i=r[0],a=r[1],o=y.useState(),c=o[0],d=o[1],h=Pie(e.displayMonths,s),g=i??(c&&e.isDateDisplayed(c))?c:h,m=function(){d(i),a(void 0)},p=function(E){a(E)},v=_s(),j=function(E,_){if(i){var S=y7(i,{moveBy:E,direction:_,context:v,modifiers:s});vi(i,S)||(e.goToDate(S,i),p(S))}},N={focusedDay:i,focusTarget:g,blur:m,focus:p,focusDayAfter:function(){return j("day","after")},focusDayBefore:function(){return j("day","before")},focusWeekAfter:function(){return j("week","after")},focusWeekBefore:function(){return j("week","before")},focusMonthBefore:function(){return j("month","before")},focusMonthAfter:function(){return j("month","after")},focusYearBefore:function(){return j("year","before")},focusYearAfter:function(){return j("year","after")},focusStartOfWeek:function(){return j("startOfWeek","before")},focusEndOfWeek:function(){return j("endOfWeek","after")}};return n.jsx(w7.Provider,{value:N,children:t.children})}function Y2(){var t=y.useContext(w7);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function Oie(t,e){var s=v7(),r=G2(t,s,e);return r}var K2=y.createContext(void 0);function Fie(t){if(!zy(t.initialProps)){var e={selected:void 0};return n.jsx(K2.Provider,{value:e,children:t.children})}return n.jsx(Bie,{initialProps:t.initialProps,children:t.children})}function Bie(t){var e=t.initialProps,s=t.children,r=function(a,o,c){var d,h,g;if((d=e.onDayClick)===null||d===void 0||d.call(e,a,o,c),o.selected&&!e.required){(h=e.onSelect)===null||h===void 0||h.call(e,void 0,a,o,c);return}(g=e.onSelect)===null||g===void 0||g.call(e,a,a,o,c)},i={selected:e.selected,onDayClick:r};return n.jsx(K2.Provider,{value:i,children:s})}function j7(){var t=y.useContext(K2);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function zie(t,e){var s=_s(),r=j7(),i=W2(),a=q2(),o=Y2(),c=o.focusDayAfter,d=o.focusDayBefore,h=o.focusWeekAfter,g=o.focusWeekBefore,m=o.blur,p=o.focus,v=o.focusMonthBefore,j=o.focusMonthAfter,N=o.focusYearBefore,E=o.focusYearAfter,_=o.focusStartOfWeek,S=o.focusEndOfWeek,C=function(le){var se,re,me,Ce;zy(s)?(se=r.onDayClick)===null||se===void 0||se.call(r,t,e,le):Mg(s)?(re=i.onDayClick)===null||re===void 0||re.call(i,t,e,le):Dg(s)?(me=a.onDayClick)===null||me===void 0||me.call(a,t,e,le):(Ce=s.onDayClick)===null||Ce===void 0||Ce.call(s,t,e,le)},I=function(le){var se;p(t),(se=s.onDayFocus)===null||se===void 0||se.call(s,t,e,le)},P=function(le){var se;m(),(se=s.onDayBlur)===null||se===void 0||se.call(s,t,e,le)},L=function(le){var se;(se=s.onDayMouseEnter)===null||se===void 0||se.call(s,t,e,le)},T=function(le){var se;(se=s.onDayMouseLeave)===null||se===void 0||se.call(s,t,e,le)},M=function(le){var se;(se=s.onDayPointerEnter)===null||se===void 0||se.call(s,t,e,le)},k=function(le){var se;(se=s.onDayPointerLeave)===null||se===void 0||se.call(s,t,e,le)},O=function(le){var se;(se=s.onDayTouchCancel)===null||se===void 0||se.call(s,t,e,le)},V=function(le){var se;(se=s.onDayTouchEnd)===null||se===void 0||se.call(s,t,e,le)},B=function(le){var se;(se=s.onDayTouchMove)===null||se===void 0||se.call(s,t,e,le)},Y=function(le){var se;(se=s.onDayTouchStart)===null||se===void 0||se.call(s,t,e,le)},z=function(le){var se;(se=s.onDayKeyUp)===null||se===void 0||se.call(s,t,e,le)},G=function(le){var se;switch(le.key){case"ArrowLeft":le.preventDefault(),le.stopPropagation(),s.dir==="rtl"?c():d();break;case"ArrowRight":le.preventDefault(),le.stopPropagation(),s.dir==="rtl"?d():c();break;case"ArrowDown":le.preventDefault(),le.stopPropagation(),h();break;case"ArrowUp":le.preventDefault(),le.stopPropagation(),g();break;case"PageUp":le.preventDefault(),le.stopPropagation(),le.shiftKey?N():v();break;case"PageDown":le.preventDefault(),le.stopPropagation(),le.shiftKey?E():j();break;case"Home":le.preventDefault(),le.stopPropagation(),_();break;case"End":le.preventDefault(),le.stopPropagation(),S();break}(se=s.onDayKeyDown)===null||se===void 0||se.call(s,t,e,le)},he={onClick:C,onFocus:I,onBlur:P,onKeyDown:G,onKeyUp:z,onMouseEnter:L,onMouseLeave:T,onPointerEnter:M,onPointerLeave:k,onTouchCancel:O,onTouchEnd:V,onTouchMove:B,onTouchStart:Y};return he}function Vie(){var t=_s(),e=j7(),s=W2(),r=q2(),i=zy(t)?e.selected:Mg(t)?s.selected:Dg(t)?r.selected:void 0;return i}function $ie(t){return Object.values(Mo).includes(t)}function Uie(t,e){var s=[t.classNames.day];return Object.keys(e).forEach(function(r){var i=t.modifiersClassNames[r];if(i)s.push(i);else if($ie(r)){var a=t.classNames["day_".concat(r)];a&&s.push(a)}}),s}function Wie(t,e){var s=Qt({},t.styles.day);return Object.keys(e).forEach(function(r){var i;s=Qt(Qt({},s),(i=t.modifiersStyles)===null||i===void 0?void 0:i[r])}),s}function Hie(t,e,s){var r,i,a,o=_s(),c=Y2(),d=Oie(t,e),h=zie(t,d),g=Vie(),m=!!(o.onDayClick||o.mode!=="default");y.useEffect(function(){var L;d.outside||c.focusedDay&&m&&vi(c.focusedDay,t)&&((L=s.current)===null||L===void 0||L.focus())},[c.focusedDay,t,s,m,d.outside]);var p=Uie(o,d).join(" "),v=Wie(o,d),j=!!(d.outside&&!o.showOutsideDays||d.hidden),N=(a=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&a!==void 0?a:hie,E=n.jsx(N,{date:t,displayMonth:e,activeModifiers:d}),_={style:v,className:p,children:E,role:"gridcell"},S=c.focusTarget&&vi(c.focusTarget,t)&&!d.outside,C=c.focusedDay&&vi(c.focusedDay,t),I=Qt(Qt(Qt({},_),(r={disabled:d.disabled,role:"gridcell"},r["aria-selected"]=d.selected,r.tabIndex=C||S?0:-1,r)),h),P={isButton:m,isHidden:j,activeModifiers:d,selectedDays:g,buttonProps:I,divProps:_};return P}function qie(t){var e=y.useRef(null),s=Hie(t.date,t.displayMonth,e);return s.isHidden?n.jsx("div",{role:"gridcell"}):s.isButton?n.jsx(Cv,Qt({name:"day",ref:e},s.buttonProps)):n.jsx("div",Qt({},s.divProps))}function Gie(t){var e=t.number,s=t.dates,r=_s(),i=r.onWeekNumberClick,a=r.styles,o=r.classNames,c=r.locale,d=r.labels.labelWeekNumber,h=r.formatters.formatWeekNumber,g=h(Number(e),{locale:c});if(!i)return n.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:g});var m=d(Number(e),{locale:c}),p=function(v){i(e,s,v)};return n.jsx(Cv,{name:"week-number","aria-label":m,className:o.weeknumber,style:a.weeknumber,onClick:p,children:g})}function Yie(t){var e,s,r=_s(),i=r.styles,a=r.classNames,o=r.showWeekNumber,c=r.components,d=(e=c==null?void 0:c.Day)!==null&&e!==void 0?e:qie,h=(s=c==null?void 0:c.WeekNumber)!==null&&s!==void 0?s:Gie,g;return o&&(g=n.jsx("td",{className:a.cell,style:i.cell,children:n.jsx(h,{number:t.weekNumber,dates:t.dates})})),n.jsxs("tr",{className:a.row,style:i.row,children:[g,t.dates.map(function(m){return n.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:n.jsx(d,{displayMonth:t.displayMonth,date:m})},Cee(m))})]})}function K4(t,e,s){for(var r=s!=null&&s.ISOWeek?Y5(e):T2(e,s),i=s!=null&&s.ISOWeek?su(t):rl(t,s),a=Ko(r,i),o=[],c=0;c<=a;c++)o.push(Ii(i,c));var d=o.reduce(function(h,g){var m=s!=null&&s.ISOWeek?Z5(g):X5(g,s),p=h.find(function(v){return v.weekNumber===m});return p?(p.dates.push(g),h):(h.push({weekNumber:m,dates:[g]}),h)},[]);return d}function Kie(t,e){var s=K4(Pi(t),Dy(t),e);if(e!=null&&e.useFixedWeeks){var r=Aee(t,e);if(r<6){var i=s[s.length-1],a=i.dates[i.dates.length-1],o=Fb(a,6-r),c=K4(Fb(a,1),o,e);s.push.apply(s,c)}}return s}function Zie(t){var e,s,r,i=_s(),a=i.locale,o=i.classNames,c=i.styles,d=i.hideHead,h=i.fixedWeeks,g=i.components,m=i.weekStartsOn,p=i.firstWeekContainsDate,v=i.ISOWeek,j=Kie(t.displayMonth,{useFixedWeeks:!!h,ISOWeek:v,locale:a,weekStartsOn:m,firstWeekContainsDate:p}),N=(e=g==null?void 0:g.Head)!==null&&e!==void 0?e:uie,E=(s=g==null?void 0:g.Row)!==null&&s!==void 0?s:Yie,_=(r=g==null?void 0:g.Footer)!==null&&r!==void 0?r:lie;return n.jsxs("table",{id:t.id,className:o.table,style:c.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!d&&n.jsx(N,{}),n.jsx("tbody",{className:o.tbody,style:c.tbody,children:j.map(function(S){return n.jsx(E,{displayMonth:t.displayMonth,dates:S.dates,weekNumber:S.weekNumber},S.weekNumber)})}),n.jsx(_,{displayMonth:t.displayMonth})]})}function Qie(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Xie=Qie()?y.useLayoutEffect:y.useEffect,Tw=!1,Jie=0;function Z4(){return"react-day-picker-".concat(++Jie)}function eae(t){var e,s=t??(Tw?Z4():null),r=y.useState(s),i=r[0],a=r[1];return Xie(function(){i===null&&a(Z4())},[]),y.useEffect(function(){Tw===!1&&(Tw=!0)},[]),(e=t??i)!==null&&e!==void 0?e:void 0}function tae(t){var e,s,r=_s(),i=r.dir,a=r.classNames,o=r.styles,c=r.components,d=kg().displayMonths,h=eae(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),g=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,m=[a.month],p=o.month,v=t.displayIndex===0,j=t.displayIndex===d.length-1,N=!v&&!j;i==="rtl"&&(e=[v,j],j=e[0],v=e[1]),v&&(m.push(a.caption_start),p=Qt(Qt({},p),o.caption_start)),j&&(m.push(a.caption_end),p=Qt(Qt({},p),o.caption_end)),N&&(m.push(a.caption_between),p=Qt(Qt({},p),o.caption_between));var E=(s=c==null?void 0:c.Caption)!==null&&s!==void 0?s:oie;return n.jsxs("div",{className:m.join(" "),style:p,children:[n.jsx(E,{id:h,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),n.jsx(Zie,{id:g,"aria-labelledby":h,displayMonth:t.displayMonth})]},t.displayIndex)}function nae(t){var e=_s(),s=e.classNames,r=e.styles;return n.jsx("div",{className:s.months,style:r.months,children:t.children})}function sae(t){var e,s,r=t.initialProps,i=_s(),a=Y2(),o=kg(),c=y.useState(!1),d=c[0],h=c[1];y.useEffect(function(){i.initialFocus&&a.focusTarget&&(d||(a.focus(a.focusTarget),h(!0)))},[i.initialFocus,d,a.focus,a.focusTarget,a]);var g=[i.classNames.root,i.className];i.numberOfMonths>1&&g.push(i.classNames.multiple_months),i.showWeekNumber&&g.push(i.classNames.with_weeknumber);var m=Qt(Qt({},i.styles.root),i.style),p=Object.keys(r).filter(function(j){return j.startsWith("data-")}).reduce(function(j,N){var E;return Qt(Qt({},j),(E={},E[N]=r[N],E))},{}),v=(s=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&s!==void 0?s:nae;return n.jsx("div",Qt({className:g.join(" "),style:m,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},p,{children:n.jsx(v,{children:o.displayMonths.map(function(j,N){return n.jsx(tae,{displayIndex:N,displayMonth:j},N)})})}))}function rae(t){var e=t.children,s=_re(t,["children"]);return n.jsx(Gre,{initialProps:s,children:n.jsx(sie,{children:n.jsx(Fie,{initialProps:s,children:n.jsx(mie,{initialProps:s,children:n.jsx(gie,{initialProps:s,children:n.jsx(Cie,{children:n.jsx(Lie,{children:e})})})})})})})}function iae(t){return n.jsx(rae,Qt({},t,{children:n.jsx(sae,{initialProps:t})}))}function Rs({className:t,classNames:e,showOutsideDays:s=!0,...r}){return n.jsx(iae,{showOutsideDays:s,className:we("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:we(Ip({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:we(Ip({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...i})=>n.jsx(Vl,{className:"h-4 w-4"}),IconRight:({...i})=>n.jsx(ad,{className:"h-4 w-4"})},...r})}Rs.displayName="Calendar";var Z2="Popover",[b7,Tye]=Or(Z2,[Am]),Pg=Am(),[aae,hd]=b7(Z2),N7=t=>{const{__scopePopover:e,children:s,open:r,defaultOpen:i,onOpenChange:a,modal:o=!1}=t,c=Pg(e),d=y.useRef(null),[h,g]=y.useState(!1),[m=!1,p]=ta({prop:r,defaultProp:i,onChange:a});return n.jsx(m2,{...c,children:n.jsx(aae,{scope:e,contentId:Rr(),triggerRef:d,open:m,onOpenChange:p,onOpenToggle:y.useCallback(()=>p(v=>!v),[p]),hasCustomAnchor:h,onCustomAnchorAdd:y.useCallback(()=>g(!0),[]),onCustomAnchorRemove:y.useCallback(()=>g(!1),[]),modal:o,children:s})})};N7.displayName=Z2;var C7="PopoverAnchor",oae=y.forwardRef((t,e)=>{const{__scopePopover:s,...r}=t,i=hd(C7,s),a=Pg(s),{onCustomAnchorAdd:o,onCustomAnchorRemove:c}=i;return y.useEffect(()=>(o(),()=>c()),[o,c]),n.jsx(by,{...a,...r,ref:e})});oae.displayName=C7;var S7="PopoverTrigger",A7=y.forwardRef((t,e)=>{const{__scopePopover:s,...r}=t,i=hd(S7,s),a=Pg(s),o=Jt(e,i.triggerRef),c=n.jsx(St.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":M7(i.open),...r,ref:o,onClick:it(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?c:n.jsx(by,{asChild:!0,...a,children:c})});A7.displayName=S7;var Q2="PopoverPortal",[lae,cae]=b7(Q2,{forceMount:void 0}),E7=t=>{const{__scopePopover:e,forceMount:s,children:r,container:i}=t,a=hd(Q2,e);return n.jsx(lae,{scope:e,forceMount:s,children:n.jsx(ci,{present:s||a.open,children:n.jsx(Em,{asChild:!0,container:i,children:r})})})};E7.displayName=Q2;var cm="PopoverContent",_7=y.forwardRef((t,e)=>{const s=cae(cm,t.__scopePopover),{forceMount:r=s.forceMount,...i}=t,a=hd(cm,t.__scopePopover);return n.jsx(ci,{present:r||a.open,children:a.modal?n.jsx(dae,{...i,ref:e}):n.jsx(uae,{...i,ref:e})})});_7.displayName=cm;var dae=y.forwardRef((t,e)=>{const s=hd(cm,t.__scopePopover),r=y.useRef(null),i=Jt(e,r),a=y.useRef(!1);return y.useEffect(()=>{const o=r.current;if(o)return Sy(o)},[]),n.jsx(xg,{as:Eo,allowPinchZoom:!0,children:n.jsx(I7,{...t,ref:i,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:it(t.onCloseAutoFocus,o=>{var c;o.preventDefault(),a.current||(c=s.triggerRef.current)==null||c.focus()}),onPointerDownOutside:it(t.onPointerDownOutside,o=>{const c=o.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,h=c.button===2||d;a.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:it(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),uae=y.forwardRef((t,e)=>{const s=hd(cm,t.__scopePopover),r=y.useRef(!1),i=y.useRef(!1);return n.jsx(I7,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,c;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(c=s.triggerRef.current)==null||c.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var d,h;(d=t.onInteractOutside)==null||d.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((h=s.triggerRef.current)==null?void 0:h.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),I7=y.forwardRef((t,e)=>{const{__scopePopover:s,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:g,...m}=t,p=hd(cm,s),v=Pg(s);return vy(),n.jsx(pg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:n.jsx(bm,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:g,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:h,onDismiss:()=>p.onOpenChange(!1),children:n.jsx(f2,{"data-state":M7(p.open),role:"dialog",id:p.contentId,...v,...m,ref:e,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),T7="PopoverClose",hae=y.forwardRef((t,e)=>{const{__scopePopover:s,...r}=t,i=hd(T7,s);return n.jsx(St.button,{type:"button",...r,ref:e,onClick:it(t.onClick,()=>i.onOpenChange(!1))})});hae.displayName=T7;var mae="PopoverArrow",fae=y.forwardRef((t,e)=>{const{__scopePopover:s,...r}=t,i=Pg(s);return n.jsx(p2,{...i,...r,ref:e})});fae.displayName=mae;function M7(t){return t?"open":"closed"}var pae=N7,gae=A7,xae=E7,D7=_7;const Ls=pae,Os=gae,Es=y.forwardRef(({className:t,align:e="center",sideOffset:s=4,...r},i)=>n.jsx(xae,{children:n.jsx(D7,{ref:i,align:e,sideOffset:s,className:we("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));Es.displayName=D7.displayName;const vae=Nse.extend({clientId:q.coerce.number({required_error:"Client is required"}),name:q.string().min(3,{message:"Project name must be at least 3 characters"}),description:q.string().min(10,{message:"Project description must be at least 10 characters"}),budget:q.coerce.number({required_error:"Budget is required"}).min(0,{message:"Budget must be a positive number"}),startDate:q.date({required_error:"Start date is required"}),estimatedCompletionDate:q.date({required_error:"Estimated end date is required"}),status:q.enum(["planning","in_progress","review","completed"],{required_error:"Status is required"}),projectType:q.enum(["construction","renovation","repair","maintenance"],{required_error:"Project type is required"}),permitDetails:q.string().optional()});function yae({onClose:t}){const{toast:e}=Lt(),[s,r]=y.useState(null);y.useState(!1);const{data:i=[],isLoading:a}=wt({queryKey:["/api/clients"]}),o=async m=>{const{url:p,method:v,data:j}=m;return await pt(p,v)},c=async m=>{try{const v=await o({url:"/api/project-phases",method:"POST",data:{...{name:"Design & Planning",order:1,status:"planning",percentComplete:0},projectId:m}});v&&v.id&&await o({url:`/api/projects/${m}`,method:"PATCH",data:{currentPhase:v.id}}),e({title:"Project Created",description:"Project initialized with Design & Planning phase"})}catch(p){console.error("Failed to create initial project phase:",p),e({title:"Error",description:"Failed to create initial project phase",variant:"destructive"})}},d=mn({resolver:pn(vae),defaultValues:{name:"",description:"",budget:0,status:"planning",projectType:"construction",permitDetails:"",startDate:new Date,estimatedCompletionDate:new Date(new Date().setMonth(new Date().getMonth()+3))}}),h=Pt({mutationFn:async m=>{const p={...m,estimatedCompletionDate:m.estimatedCompletionDate.toISOString().split("T")[0],startDate:m.startDate.toISOString().split("T")[0]};return await o({url:"/api/projects",method:"POST",data:p})},onSuccess:m=>{e({title:"Success",description:"Project created successfully"}),c(m.id),d.reset(),t()},onError:m=>{e({title:"Error",description:"Failed to create project. Please try again.",variant:"destructive"}),console.error("Project creation failed:",m)}});function g(m){h.mutate(m)}return n.jsx(fn,{...d,children:n.jsxs("form",{onSubmit:d.handleSubmit(g),className:"space-y-6 w-full",children:[n.jsx(J,{control:d.control,name:"clientId",render:({field:m})=>{var p;return n.jsxs(Z,{children:[n.jsx(X,{className:"text-base",children:"Client"}),n.jsxs(gt,{disabled:a||h.isPending,onValueChange:v=>{m.onChange(parseInt(v)),r(parseInt(v))},value:(p=m.value)==null?void 0:p.toString(),children:[n.jsx(Q,{children:n.jsx(ut,{className:"w-full",children:n.jsx(xt,{placeholder:"Select a client"})})}),n.jsx(ht,{position:"popper",className:"max-h-[200px]",children:i==null?void 0:i.map(v=>{var j;return n.jsxs(ue,{value:v.id.toString(),children:[((j=v.user)==null?void 0:j.name)||"Unknown Client",v.companyName&&` (${v.companyName})`]},v.id)})})]}),n.jsx(ne,{})]})}}),n.jsx(J,{control:d.control,name:"name",render:({field:m})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Project Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter project name",disabled:h.isPending,...m})}),n.jsx(ne,{})]})}),n.jsx(J,{control:d.control,name:"description",render:({field:m})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Description"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter project description",disabled:h.isPending,...m})}),n.jsx(ne,{})]})}),n.jsx(J,{control:d.control,name:"budget",render:({field:m})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Budget ($)"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",placeholder:"Enter project budget",disabled:h.isPending,...m})}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:d.control,name:"startDate",render:({field:m})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Start Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:`w-full pl-3 text-left font-normal ${m.value?"":"text-muted-foreground"}`,disabled:h.isPending,children:[m.value?ft(m.value,"PPP"):n.jsx("span",{children:"Pick a date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0 z-50",align:"start",sideOffset:4,side:"bottom",children:n.jsx(Rs,{mode:"single",selected:m.value,onSelect:m.onChange,initialFocus:!0,className:"rounded-md border"})})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:d.control,name:"estimatedCompletionDate",render:({field:m})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Estimated End Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:`w-full pl-3 text-left font-normal ${m.value?"":"text-muted-foreground"}`,disabled:h.isPending,children:[m.value?ft(m.value,"PPP"):n.jsx("span",{children:"Pick a date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0 z-50",align:"start",sideOffset:4,side:"bottom",children:n.jsx(Rs,{mode:"single",selected:m.value,onSelect:m.onChange,initialFocus:!0,className:"rounded-md border",disabled:p=>{const v=d.getValues("startDate");return v?p<v:!1}})})]}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:d.control,name:"status",render:({field:m})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Status"}),n.jsxs(gt,{disabled:h.isPending,onValueChange:m.onChange,value:m.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select project status"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"planning",children:"Planning"}),n.jsx(ue,{value:"in_progress",children:"In Progress"}),n.jsx(ue,{value:"review",children:"Review"}),n.jsx(ue,{value:"completed",children:"Completed"})]})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:d.control,name:"projectType",render:({field:m})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Project Type"}),n.jsxs(gt,{disabled:h.isPending,onValueChange:m.onChange,value:m.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select project type"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"construction",children:"New Construction"}),n.jsx(ue,{value:"renovation",children:"Renovation"}),n.jsx(ue,{value:"repair",children:"Major Repair"}),n.jsx(ue,{value:"maintenance",children:"Maintenance"})]})]}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:d.control,name:"permitDetails",render:({field:m})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Permit Details (Optional)"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter permit details or requirements",disabled:h.isPending,...m})}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[n.jsx(H,{type:"button",variant:"outline",onClick:t,disabled:h.isPending,children:"Cancel"}),n.jsx(H,{type:"submit",disabled:h.isPending,children:h.isPending?"Creating...":"Create Project"})]})]})})}const wae={name:"Gunite Pool Construction",description:"Standard phases for constructing a gunite (shotcrete) swimming pool",phases:[{name:"Design and Permitting",description:"Creating pool design, obtaining necessary permits and approvals",estimatedDuration:14,order:1,permitRequired:!0,inspectionRequired:!1},{name:"Layout and Excavation",description:"Marking pool boundaries and excavating the pool area",estimatedDuration:5,order:2,permitRequired:!1,inspectionRequired:!0},{name:"Plumbing and Electrical",description:"Installing plumbing lines, drains, and electrical conduits",estimatedDuration:4,order:3,permitRequired:!0,inspectionRequired:!0},{name:"Steel Framework",description:"Creating and installing the steel rebar framework",estimatedDuration:3,order:4,permitRequired:!1,inspectionRequired:!0},{name:"Gunite Application",description:"Applying gunite/shotcrete to form the pool shell",estimatedDuration:2,order:5,permitRequired:!1,inspectionRequired:!0},{name:"Coping and Tile",description:"Installing coping stones and waterline tile",estimatedDuration:4,order:6,permitRequired:!1,inspectionRequired:!1},{name:"Deck Construction",description:"Building the pool deck and surrounding areas",estimatedDuration:7,order:7,permitRequired:!0,inspectionRequired:!0},{name:"Interior Finish",description:"Applying plaster or other interior finish to the pool",estimatedDuration:3,order:8,permitRequired:!1,inspectionRequired:!1},{name:"Equipment Installation",description:"Installing pump, filter, heater, and other equipment",estimatedDuration:2,order:9,permitRequired:!0,inspectionRequired:!0},{name:"Filling and Chemical Balancing",description:"Filling the pool and balancing chemicals",estimatedDuration:3,order:10,permitRequired:!1,inspectionRequired:!1},{name:"Final Inspection and Handover",description:"Final inspection, client training, and project completion",estimatedDuration:1,order:11,permitRequired:!1,inspectionRequired:!0}]},jae={name:"Fiberglass Pool Installation",description:"Standard phases for installing a pre-fabricated fiberglass swimming pool",phases:[{name:"Design and Permitting",description:"Selecting pool model, creating site plan, obtaining necessary permits",estimatedDuration:10,order:1,permitRequired:!0,inspectionRequired:!1},{name:"Site Preparation",description:"Clearing the site, marking pool boundaries, and prep work",estimatedDuration:2,order:2,permitRequired:!1,inspectionRequired:!1},{name:"Excavation",description:"Digging the hole to spec with precise dimensions for the fiberglass shell",estimatedDuration:3,order:3,permitRequired:!1,inspectionRequired:!0},{name:"Base Preparation",description:"Installing drainage system and preparing sand or gravel base",estimatedDuration:2,order:4,permitRequired:!1,inspectionRequired:!0},{name:"Plumbing and Electrical",description:"Installing plumbing lines, electrical conduits, and equipment pad",estimatedDuration:3,order:5,permitRequired:!0,inspectionRequired:!0},{name:"Pool Delivery and Setting",description:"Delivering and crane-setting the fiberglass shell into position",estimatedDuration:1,order:6,permitRequired:!1,inspectionRequired:!1},{name:"Backfilling",description:"Carefully backfilling around the pool shell with specified material",estimatedDuration:2,order:7,permitRequired:!1,inspectionRequired:!0},{name:"Coping and Patio",description:"Installing coping and constructing the surrounding deck or patio",estimatedDuration:5,order:8,permitRequired:!0,inspectionRequired:!0},{name:"Equipment Installation",description:"Installing pump, filter, heater, and other equipment",estimatedDuration:2,order:9,permitRequired:!1,inspectionRequired:!0},{name:"Filling and Startup",description:"Filling the pool, starting equipment, and balancing chemicals",estimatedDuration:2,order:10,permitRequired:!1,inspectionRequired:!1},{name:"Final Inspection and Handover",description:"Final inspection, client training, and project completion",estimatedDuration:1,order:11,permitRequired:!1,inspectionRequired:!0}]},bae={name:"Vinyl Liner Pool Construction",description:"Standard phases for constructing a vinyl liner swimming pool",phases:[{name:"Design and Permitting",description:"Creating pool design, selecting liner pattern, obtaining permits",estimatedDuration:10,order:1,permitRequired:!0,inspectionRequired:!1},{name:"Layout and Excavation",description:"Marking pool boundaries and excavating the pool area",estimatedDuration:3,order:2,permitRequired:!1,inspectionRequired:!0},{name:"Drainage and Base",description:"Installing drainage system and preparing crushed stone base",estimatedDuration:2,order:3,permitRequired:!1,inspectionRequired:!0},{name:"Wall Panel Installation",description:"Assembling and installing wall panels (steel, polymer, or aluminum)",estimatedDuration:3,order:4,permitRequired:!1,inspectionRequired:!1},{name:"Plumbing and Electrical",description:"Installing plumbing lines, drains, and electrical components",estimatedDuration:3,order:5,permitRequired:!0,inspectionRequired:!0},{name:"Floor Preparation",description:"Pouring vermiculite or sand bottom and troweling smooth",estimatedDuration:2,order:6,permitRequired:!1,inspectionRequired:!1},{name:"Liner Installation",description:"Installing and securing the vinyl liner",estimatedDuration:1,order:7,permitRequired:!1,inspectionRequired:!1},{name:"Coping and Decking",description:"Installing coping stones and building the pool deck",estimatedDuration:5,order:8,permitRequired:!0,inspectionRequired:!0},{name:"Equipment Installation",description:"Installing pump, filter, heater, and other equipment",estimatedDuration:2,order:9,permitRequired:!1,inspectionRequired:!0},{name:"Filling and Chemical Balancing",description:"Filling the pool and balancing initial water chemistry",estimatedDuration:2,order:10,permitRequired:!1,inspectionRequired:!1},{name:"Final Inspection and Handover",description:"Final inspection, client training, and project completion",estimatedDuration:1,order:11,permitRequired:!1,inspectionRequired:!0}]},Nae={name:"Residential Construction",description:"Standard phases for small to medium residential construction projects",phases:[{name:"Design and Planning",description:"Creating architectural plans, obtaining client approval",estimatedDuration:14,order:1,permitRequired:!1,inspectionRequired:!1},{name:"Permitting",description:"Submitting plans and obtaining necessary building permits",estimatedDuration:21,order:2,permitRequired:!0,inspectionRequired:!1},{name:"Site Preparation",description:"Clearing land, grading, and initial site work",estimatedDuration:5,order:3,permitRequired:!1,inspectionRequired:!0},{name:"Foundation",description:"Excavation and pouring concrete foundation",estimatedDuration:10,order:4,permitRequired:!1,inspectionRequired:!0},{name:"Framing",description:"Erecting the structural frame of the building",estimatedDuration:15,order:5,permitRequired:!1,inspectionRequired:!0},{name:"Roofing",description:"Installing roof structure, sheathing, and materials",estimatedDuration:7,order:6,permitRequired:!1,inspectionRequired:!0},{name:"Exterior Finishes",description:"Installing siding, windows, doors, and exterior trim",estimatedDuration:12,order:7,permitRequired:!1,inspectionRequired:!1},{name:"Rough Electrical",description:"Installing electrical wiring, outlets, and switches",estimatedDuration:7,order:8,permitRequired:!0,inspectionRequired:!0},{name:"Rough Plumbing",description:"Installing water supply and drain pipes",estimatedDuration:7,order:9,permitRequired:!0,inspectionRequired:!0},{name:"HVAC Installation",description:"Installing heating, ventilation, and air conditioning systems",estimatedDuration:5,order:10,permitRequired:!0,inspectionRequired:!0},{name:"Insulation",description:"Installing wall, floor, and ceiling insulation",estimatedDuration:4,order:11,permitRequired:!1,inspectionRequired:!0},{name:"Drywall and Interior Finishes",description:"Installing drywall, taping, and finishing interior walls and ceilings",estimatedDuration:12,order:12,permitRequired:!1,inspectionRequired:!1},{name:"Interior Trim and Cabinetry",description:"Installing interior doors, trim, and cabinetry",estimatedDuration:10,order:13,permitRequired:!1,inspectionRequired:!1},{name:"Flooring",description:"Installing hardwood, tile, carpet, or other flooring materials",estimatedDuration:7,order:14,permitRequired:!1,inspectionRequired:!1},{name:"Painting",description:"Priming and painting interior and exterior surfaces",estimatedDuration:7,order:15,permitRequired:!1,inspectionRequired:!1},{name:"Fixtures and Appliances",description:"Installing plumbing fixtures, light fixtures, and appliances",estimatedDuration:5,order:16,permitRequired:!1,inspectionRequired:!1},{name:"Final Inspections",description:"Obtaining final building, electrical, plumbing, and other inspections",estimatedDuration:5,order:17,permitRequired:!1,inspectionRequired:!0},{name:"Landscaping",description:"Grading, planting, and finishing exterior landscaping",estimatedDuration:7,order:18,permitRequired:!1,inspectionRequired:!1},{name:"Final Walkthrough and Handover",description:"Client walkthrough, addressing punch list items, and project completion",estimatedDuration:3,order:19,permitRequired:!1,inspectionRequired:!1}]},k7={"gunite-pool":wae,"fiberglass-pool":jae,"vinyl-pool":bae,"residential-construction":Nae},Cae=()=>Object.entries(k7).map(([t,e])=>({label:e.name,value:t})),Mw=t=>k7[t];var X2="Checkbox",[Sae,Mye]=Or(X2),[Aae,Eae]=Sae(X2),P7=y.forwardRef((t,e)=>{const{__scopeCheckbox:s,name:r,checked:i,defaultChecked:a,required:o,disabled:c,value:d="on",onCheckedChange:h,form:g,...m}=t,[p,v]=y.useState(null),j=Jt(e,I=>v(I)),N=y.useRef(!1),E=p?g||!!p.closest("form"):!0,[_=!1,S]=ta({prop:i,defaultProp:a,onChange:h}),C=y.useRef(_);return y.useEffect(()=>{const I=p==null?void 0:p.form;if(I){const P=()=>S(C.current);return I.addEventListener("reset",P),()=>I.removeEventListener("reset",P)}},[p,S]),n.jsxs(Aae,{scope:s,state:_,disabled:c,children:[n.jsx(St.button,{type:"button",role:"checkbox","aria-checked":$c(_)?"mixed":_,"aria-required":o,"data-state":O7(_),"data-disabled":c?"":void 0,disabled:c,value:d,...m,ref:j,onKeyDown:it(t.onKeyDown,I=>{I.key==="Enter"&&I.preventDefault()}),onClick:it(t.onClick,I=>{S(P=>$c(P)?!0:!P),E&&(N.current=I.isPropagationStopped(),N.current||I.stopPropagation())})}),E&&n.jsx(_ae,{control:p,bubbles:!N.current,name:r,value:d,checked:_,required:o,disabled:c,form:g,style:{transform:"translateX(-100%)"},defaultChecked:$c(a)?!1:a})]})});P7.displayName=X2;var R7="CheckboxIndicator",L7=y.forwardRef((t,e)=>{const{__scopeCheckbox:s,forceMount:r,...i}=t,a=Eae(R7,s);return n.jsx(ci,{present:r||$c(a.state)||a.state===!0,children:n.jsx(St.span,{"data-state":O7(a.state),"data-disabled":a.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});L7.displayName=R7;var _ae=t=>{const{control:e,checked:s,bubbles:r=!0,defaultChecked:i,...a}=t,o=y.useRef(null),c=Ig(s),d=Sm(e);y.useEffect(()=>{const g=o.current,m=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==s&&v){const j=new Event("click",{bubbles:r});g.indeterminate=$c(s),v.call(g,$c(s)?!1:s),g.dispatchEvent(j)}},[c,s,r]);const h=y.useRef($c(s)?!1:s);return n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??h.current,...a,tabIndex:-1,ref:o,style:{...t.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function $c(t){return t==="indeterminate"}function O7(t){return $c(t)?"indeterminate":t?"checked":"unchecked"}var F7=P7,Iae=L7;const Ri=y.forwardRef(({className:t,...e},s)=>n.jsx(F7,{ref:s,className:we("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:n.jsx(Iae,{className:we("flex items-center justify-center text-current"),children:n.jsx(Ao,{className:"h-4 w-4"})})}));Ri.displayName=F7.displayName;function Tae(t,e=[]){let s=[];function r(a,o){const c=y.createContext(o),d=s.length;s=[...s,o];function h(m){const{scope:p,children:v,...j}=m,N=(p==null?void 0:p[t][d])||c,E=y.useMemo(()=>j,Object.values(j));return n.jsx(N.Provider,{value:E,children:v})}function g(m,p){const v=(p==null?void 0:p[t][d])||c,j=y.useContext(v);if(j)return j;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${a}\``)}return h.displayName=a+"Provider",[h,g]}const i=()=>{const a=s.map(o=>y.createContext(o));return function(c){const d=(c==null?void 0:c[t])||a;return y.useMemo(()=>({[`__scope${t}`]:{...c,[t]:d}}),[c,d])}};return i.scopeName=t,[r,Mae(i,...e)]}function Mae(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((c,{useScope:d,scopeName:h})=>{const m=d(a)[`__scope${h}`];return{...c,...m}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return s.scopeName=e.scopeName,s}var J2="Progress",eS=100,[Dae,Dye]=Tae(J2),[kae,Pae]=Dae(J2),B7=y.forwardRef((t,e)=>{const{__scopeProgress:s,value:r=null,max:i,getValueLabel:a=Rae,...o}=t;(i||i===0)&&!Q4(i)&&console.error(Lae(`${i}`,"Progress"));const c=Q4(i)?i:eS;r!==null&&!X4(r,c)&&console.error(Oae(`${r}`,"Progress"));const d=X4(r,c)?r:null,h=Sv(d)?a(d,c):void 0;return n.jsx(kae,{scope:s,value:d,max:c,children:n.jsx(St.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Sv(d)?d:void 0,"aria-valuetext":h,role:"progressbar","data-state":$7(d,c),"data-value":d??void 0,"data-max":c,...o,ref:e})})});B7.displayName=J2;var z7="ProgressIndicator",V7=y.forwardRef((t,e)=>{const{__scopeProgress:s,...r}=t,i=Pae(z7,s);return n.jsx(St.div,{"data-state":$7(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});V7.displayName=z7;function Rae(t,e){return`${Math.round(t/e*100)}%`}function $7(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Sv(t){return typeof t=="number"}function Q4(t){return Sv(t)&&!isNaN(t)&&t>0}function X4(t,e){return Sv(t)&&!isNaN(t)&&t<=e&&t>=0}function Lae(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${eS}\`.`}function Oae(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${eS} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var U7=B7,Fae=V7;const Ah=y.forwardRef(({className:t,value:e,...s},r)=>n.jsx(U7,{ref:r,className:we("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...s,children:n.jsx(Fae,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Ah.displayName=U7.displayName;var tS="Dialog",[W7,H7]=Or(tS),[Bae,Po]=W7(tS),q7=t=>{const{__scopeDialog:e,children:s,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=t,c=y.useRef(null),d=y.useRef(null),[h=!1,g]=ta({prop:r,defaultProp:i,onChange:a});return n.jsx(Bae,{scope:e,triggerRef:c,contentRef:d,contentId:Rr(),titleId:Rr(),descriptionId:Rr(),open:h,onOpenChange:g,onOpenToggle:y.useCallback(()=>g(m=>!m),[g]),modal:o,children:s})};q7.displayName=tS;var G7="DialogTrigger",Y7=y.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,i=Po(G7,s),a=Jt(e,i.triggerRef);return n.jsx(St.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":rS(i.open),...r,ref:a,onClick:it(t.onClick,i.onOpenToggle)})});Y7.displayName=G7;var nS="DialogPortal",[zae,K7]=W7(nS,{forceMount:void 0}),Z7=t=>{const{__scopeDialog:e,forceMount:s,children:r,container:i}=t,a=Po(nS,e);return n.jsx(zae,{scope:e,forceMount:s,children:y.Children.map(r,o=>n.jsx(ci,{present:s||a.open,children:n.jsx(Em,{asChild:!0,container:i,children:o})}))})};Z7.displayName=nS;var Av="DialogOverlay",Q7=y.forwardRef((t,e)=>{const s=K7(Av,t.__scopeDialog),{forceMount:r=s.forceMount,...i}=t,a=Po(Av,t.__scopeDialog);return a.modal?n.jsx(ci,{present:r||a.open,children:n.jsx(Vae,{...i,ref:e})}):null});Q7.displayName=Av;var Vae=y.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,i=Po(Av,s);return n.jsx(xg,{as:Eo,allowPinchZoom:!0,shards:[i.contentRef],children:n.jsx(St.div,{"data-state":rS(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ou="DialogContent",X7=y.forwardRef((t,e)=>{const s=K7(ou,t.__scopeDialog),{forceMount:r=s.forceMount,...i}=t,a=Po(ou,t.__scopeDialog);return n.jsx(ci,{present:r||a.open,children:a.modal?n.jsx($ae,{...i,ref:e}):n.jsx(Uae,{...i,ref:e})})});X7.displayName=ou;var $ae=y.forwardRef((t,e)=>{const s=Po(ou,t.__scopeDialog),r=y.useRef(null),i=Jt(e,s.contentRef,r);return y.useEffect(()=>{const a=r.current;if(a)return Sy(a)},[]),n.jsx(J7,{...t,ref:i,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:it(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=s.triggerRef.current)==null||o.focus()}),onPointerDownOutside:it(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&a.preventDefault()}),onFocusOutside:it(t.onFocusOutside,a=>a.preventDefault())})}),Uae=y.forwardRef((t,e)=>{const s=Po(ou,t.__scopeDialog),r=y.useRef(!1),i=y.useRef(!1);return n.jsx(J7,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,c;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(c=s.triggerRef.current)==null||c.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var d,h;(d=t.onInteractOutside)==null||d.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((h=s.triggerRef.current)==null?void 0:h.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),J7=y.forwardRef((t,e)=>{const{__scopeDialog:s,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=t,c=Po(ou,s),d=y.useRef(null),h=Jt(e,d);return vy(),n.jsxs(n.Fragment,{children:[n.jsx(pg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:n.jsx(bm,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":rS(c.open),...o,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(Hae,{titleId:c.titleId}),n.jsx(Gae,{contentRef:d,descriptionId:c.descriptionId})]})]})}),sS="DialogTitle",e9=y.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,i=Po(sS,s);return n.jsx(St.h2,{id:i.titleId,...r,ref:e})});e9.displayName=sS;var t9="DialogDescription",n9=y.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,i=Po(t9,s);return n.jsx(St.p,{id:i.descriptionId,...r,ref:e})});n9.displayName=t9;var s9="DialogClose",r9=y.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,i=Po(s9,s);return n.jsx(St.button,{type:"button",...r,ref:e,onClick:it(t.onClick,()=>i.onOpenChange(!1))})});r9.displayName=s9;function rS(t){return t?"open":"closed"}var i9="DialogTitleWarning",[Wae,a9]=QY(i9,{contentName:ou,titleName:sS,docsSlug:"dialog"}),Hae=({titleId:t})=>{const e=a9(i9),s=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(s))},[s,t]),null},qae="DialogDescriptionWarning",Gae=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a9(qae).contentName}}.`;return y.useEffect(()=>{var a;const i=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},iS=q7,o9=Y7,aS=Z7,Vy=Q7,$y=X7,oS=e9,lS=n9,cS=r9;const An=iS,ll=o9,Yae=aS,l9=y.forwardRef(({className:t,...e},s)=>n.jsx(Vy,{ref:s,className:we("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));l9.displayName=Vy.displayName;const wn=y.forwardRef(({className:t,children:e,...s},r)=>n.jsxs(Yae,{children:[n.jsx(l9,{}),n.jsxs($y,{ref:r,className:we("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[e,n.jsxs(cS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(ys,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));wn.displayName=$y.displayName;const Tn=({className:t,...e})=>n.jsx("div",{className:we("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Tn.displayName="DialogHeader";const hs=({className:t,...e})=>n.jsx("div",{className:we("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});hs.displayName="DialogFooter";const Mn=y.forwardRef(({className:t,...e},s)=>n.jsx(oS,{ref:s,className:we("text-lg font-semibold leading-none tracking-tight",t),...e}));Mn.displayName=oS.displayName;const ws=y.forwardRef(({className:t,...e},s)=>n.jsx(lS,{ref:s,className:we("text-sm text-muted-foreground",t),...e}));ws.displayName=lS.displayName;function Pl(t,e,{checkForDefaultPrevented:s=!0}={}){return function(i){if(t==null||t(i),s===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function J4(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function c9(...t){return e=>{let s=!1;const r=t.map(i=>{const a=J4(i,e);return!s&&typeof a=="function"&&(s=!0),a});if(s)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():J4(t[i],null)}}}}function Ev(...t){return y.useCallback(c9(...t),t)}var _v=y.forwardRef((t,e)=>{const{children:s,...r}=t,i=y.Children.toArray(s),a=i.find(Zae);if(a){const o=a.props.children,c=i.map(d=>d===a?y.Children.count(o)>1?y.Children.only(null):y.isValidElement(o)?o.props.children:null:d);return n.jsx(eN,{...r,ref:e,children:y.isValidElement(o)?y.cloneElement(o,void 0,c):null})}return n.jsx(eN,{...r,ref:e,children:s})});_v.displayName="Slot";var eN=y.forwardRef((t,e)=>{const{children:s,...r}=t;if(y.isValidElement(s)){const i=Xae(s),a=Qae(r,s.props);return s.type!==y.Fragment&&(a.ref=e?c9(e,i):i),y.cloneElement(s,a)}return y.Children.count(s)>1?y.Children.only(null):null});eN.displayName="SlotClone";var Kae=({children:t})=>n.jsx(n.Fragment,{children:t});function Zae(t){return y.isValidElement(t)&&t.type===Kae}function Qae(t,e){const s={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...c)=>{a(...c),i(...c)}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...t,...s}}function Xae(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function Jae(t){const e=t+"CollectionProvider",[s,r]=Or(e),[i,a]=s(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:j,children:N}=v,E=Ne.useRef(null),_=Ne.useRef(new Map).current;return n.jsx(i,{scope:j,itemMap:_,collectionRef:E,children:N})};o.displayName=e;const c=t+"CollectionSlot",d=Ne.forwardRef((v,j)=>{const{scope:N,children:E}=v,_=a(c,N),S=Ev(j,_.collectionRef);return n.jsx(_v,{ref:S,children:E})});d.displayName=c;const h=t+"CollectionItemSlot",g="data-radix-collection-item",m=Ne.forwardRef((v,j)=>{const{scope:N,children:E,..._}=v,S=Ne.useRef(null),C=Ev(j,S),I=a(h,N);return Ne.useEffect(()=>(I.itemMap.set(S,{ref:S,..._}),()=>void I.itemMap.delete(S))),n.jsx(_v,{[g]:"",ref:C,children:E})});m.displayName=h;function p(v){const j=a(t+"CollectionConsumer",v);return Ne.useCallback(()=>{const E=j.collectionRef.current;if(!E)return[];const _=Array.from(E.querySelectorAll(`[${g}]`));return Array.from(j.itemMap.values()).sort((I,P)=>_.indexOf(I.ref.current)-_.indexOf(P.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:o,Slot:d,ItemSlot:m},p,r]}var eoe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Mm=eoe.reduce((t,e)=>{const s=y.forwardRef((r,i)=>{const{asChild:a,...o}=r,c=a?_v:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...o,ref:i})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{}),Dw="rovingFocusGroup.onEntryFocus",toe={bubbles:!1,cancelable:!0},Uy="RovingFocusGroup",[tN,d9,noe]=Jae(Uy),[soe,u9]=Or(Uy,[noe]),[roe,ioe]=soe(Uy),h9=y.forwardRef((t,e)=>n.jsx(tN.Provider,{scope:t.__scopeRovingFocusGroup,children:n.jsx(tN.Slot,{scope:t.__scopeRovingFocusGroup,children:n.jsx(aoe,{...t,ref:e})})}));h9.displayName=Uy;var aoe=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:g=!1,...m}=t,p=y.useRef(null),v=Ev(e,p),j=od(a),[N=null,E]=ta({prop:o,defaultProp:c,onChange:d}),[_,S]=y.useState(!1),C=vs(h),I=d9(s),P=y.useRef(!1),[L,T]=y.useState(0);return y.useEffect(()=>{const M=p.current;if(M)return M.addEventListener(Dw,C),()=>M.removeEventListener(Dw,C)},[C]),n.jsx(roe,{scope:s,orientation:r,dir:j,loop:i,currentTabStopId:N,onItemFocus:y.useCallback(M=>E(M),[E]),onItemShiftTab:y.useCallback(()=>S(!0),[]),onFocusableItemAdd:y.useCallback(()=>T(M=>M+1),[]),onFocusableItemRemove:y.useCallback(()=>T(M=>M-1),[]),children:n.jsx(Mm.div,{tabIndex:_||L===0?-1:0,"data-orientation":r,...m,ref:v,style:{outline:"none",...t.style},onMouseDown:Pl(t.onMouseDown,()=>{P.current=!0}),onFocus:Pl(t.onFocus,M=>{const k=!P.current;if(M.target===M.currentTarget&&k&&!_){const O=new CustomEvent(Dw,toe);if(M.currentTarget.dispatchEvent(O),!O.defaultPrevented){const V=I().filter(he=>he.focusable),B=V.find(he=>he.active),Y=V.find(he=>he.id===N),G=[B,Y,...V].filter(Boolean).map(he=>he.ref.current);p9(G,g)}}P.current=!1}),onBlur:Pl(t.onBlur,()=>S(!1))})})}),m9="RovingFocusGroupItem",f9=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,focusable:r=!0,active:i=!1,tabStopId:a,...o}=t,c=Rr(),d=a||c,h=ioe(m9,s),g=h.currentTabStopId===d,m=d9(s),{onFocusableItemAdd:p,onFocusableItemRemove:v}=h;return y.useEffect(()=>{if(r)return p(),()=>v()},[r,p,v]),n.jsx(tN.ItemSlot,{scope:s,id:d,focusable:r,active:i,children:n.jsx(Mm.span,{tabIndex:g?0:-1,"data-orientation":h.orientation,...o,ref:e,onMouseDown:Pl(t.onMouseDown,j=>{r?h.onItemFocus(d):j.preventDefault()}),onFocus:Pl(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:Pl(t.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){h.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const N=coe(j,h.orientation,h.dir);if(N!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let _=m().filter(S=>S.focusable).map(S=>S.ref.current);if(N==="last")_.reverse();else if(N==="prev"||N==="next"){N==="prev"&&_.reverse();const S=_.indexOf(j.currentTarget);_=h.loop?doe(_,S+1):_.slice(S+1)}setTimeout(()=>p9(_))}})})})});f9.displayName=m9;var ooe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function loe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function coe(t,e,s){const r=loe(t.key,s);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ooe[r]}function p9(t,e=!1){const s=document.activeElement;for(const r of t)if(r===s||(r.focus({preventScroll:e}),document.activeElement!==s))return}function doe(t,e){return t.map((s,r)=>t[(e+r)%t.length])}var uoe=h9,hoe=f9;function moe(t,e){return y.useReducer((s,r)=>e[s][r]??s,t)}var g9=t=>{const{present:e,children:s}=t,r=foe(e),i=typeof s=="function"?s({present:r.isPresent}):y.Children.only(s),a=Ev(r.ref,poe(i));return typeof s=="function"||r.isPresent?y.cloneElement(i,{ref:a}):null};g9.displayName="Presence";function foe(t){const[e,s]=y.useState(),r=y.useRef({}),i=y.useRef(t),a=y.useRef("none"),o=t?"mounted":"unmounted",[c,d]=moe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const h=wx(r.current);a.current=c==="mounted"?h:"none"},[c]),Bs(()=>{const h=r.current,g=i.current;if(g!==t){const p=a.current,v=wx(h);t?d("MOUNT"):v==="none"||(h==null?void 0:h.display)==="none"?d("UNMOUNT"):d(g&&p!==v?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,d]),Bs(()=>{if(e){let h;const g=e.ownerDocument.defaultView??window,m=v=>{const N=wx(r.current).includes(v.animationName);if(v.target===e&&N&&(d("ANIMATION_END"),!i.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",h=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},p=v=>{v.target===e&&(a.current=wx(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{g.clearTimeout(h),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:y.useCallback(h=>{h&&(r.current=getComputedStyle(h)),s(h)},[])}}function wx(t){return(t==null?void 0:t.animationName)||"none"}function poe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var dS="Tabs",[goe,kye]=Or(dS,[u9]),x9=u9(),[xoe,uS]=goe(dS),v9=y.forwardRef((t,e)=>{const{__scopeTabs:s,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:c,activationMode:d="automatic",...h}=t,g=od(c),[m,p]=ta({prop:r,onChange:i,defaultProp:a});return n.jsx(xoe,{scope:s,baseId:Rr(),value:m,onValueChange:p,orientation:o,dir:g,activationMode:d,children:n.jsx(Mm.div,{dir:g,"data-orientation":o,...h,ref:e})})});v9.displayName=dS;var y9="TabsList",w9=y.forwardRef((t,e)=>{const{__scopeTabs:s,loop:r=!0,...i}=t,a=uS(y9,s),o=x9(s);return n.jsx(uoe,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:n.jsx(Mm.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});w9.displayName=y9;var j9="TabsTrigger",b9=y.forwardRef((t,e)=>{const{__scopeTabs:s,value:r,disabled:i=!1,...a}=t,o=uS(j9,s),c=x9(s),d=S9(o.baseId,r),h=A9(o.baseId,r),g=r===o.value;return n.jsx(hoe,{asChild:!0,...c,focusable:!i,active:g,children:n.jsx(Mm.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":h,"data-state":g?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...a,ref:e,onMouseDown:Pl(t.onMouseDown,m=>{!i&&m.button===0&&m.ctrlKey===!1?o.onValueChange(r):m.preventDefault()}),onKeyDown:Pl(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&o.onValueChange(r)}),onFocus:Pl(t.onFocus,()=>{const m=o.activationMode!=="manual";!g&&!i&&m&&o.onValueChange(r)})})})});b9.displayName=j9;var N9="TabsContent",C9=y.forwardRef((t,e)=>{const{__scopeTabs:s,value:r,forceMount:i,children:a,...o}=t,c=uS(N9,s),d=S9(c.baseId,r),h=A9(c.baseId,r),g=r===c.value,m=y.useRef(g);return y.useEffect(()=>{const p=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(p)},[]),n.jsx(g9,{present:i||g,children:({present:p})=>n.jsx(Mm.div,{"data-state":g?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!p,id:h,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:m.current?"0s":void 0},children:p&&a})})});C9.displayName=N9;function S9(t,e){return`${t}-trigger-${e}`}function A9(t,e){return`${t}-content-${e}`}var E9=v9,_9=w9,I9=b9,T9=C9;const ps=y.forwardRef(({className:t,...e},s)=>n.jsx(E9,{ref:s,className:we("data-[state=active]:bg-background",t),...e}));ps.displayName=E9.displayName;const gs=y.forwardRef(({className:t,...e},s)=>n.jsx(_9,{ref:s,className:we("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));gs.displayName=_9.displayName;const Ge=y.forwardRef(({className:t,...e},s)=>n.jsx(I9,{ref:s,className:we("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Ge.displayName=I9.displayName;const Qe=y.forwardRef(({className:t,...e},s)=>n.jsx(T9,{ref:s,className:we("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Qe.displayName=T9.displayName;function Do(){return Do=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},Do.apply(this,arguments)}function voe(t,e){if(t){if(typeof t=="string")return e_(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return e_(t,e)}}function e_(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,r=new Array(e);s<e;s++)r[s]=t[s];return r}function M9(t,e){var s=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s)return(s=s.call(t)).next.bind(s);if(Array.isArray(t)||(s=voe(t))||e){s&&(t=s);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ns;(function(t){t.Hour="Hour",t.QuarterDay="Quarter Day",t.HalfDay="Half Day",t.Day="Day",t.Week="Week",t.Month="Month",t.Year="Year"})(ns||(ns={}));var t_={},Iv=function(e,s){s===void 0&&(s={});var r=JSON.stringify([e,s]),i=t_[r];return i||(i=new Intl.DateTimeFormat(e,s),t_[r]=i),i},ar=function(e,s,r){var i=new Date(e.getFullYear()+(r==="year"?s:0),e.getMonth()+(r==="month"?s:0),e.getDate()+(r==="day"?s:0),e.getHours()+(r==="hour"?s:0),e.getMinutes()+(r==="minute"?s:0),e.getSeconds()+(r==="second"?s:0),e.getMilliseconds()+(r==="millisecond"?s:0));return i},Hi=function(e,s){var r=["millisecond","second","minute","hour","day","month","year"],i=function(c){var d=r.indexOf(s);return r.indexOf(c)<=d},a=new Date(e.getFullYear(),i("year")?0:e.getMonth(),i("month")?1:e.getDate(),i("day")?0:e.getHours(),i("hour")?0:e.getMinutes(),i("minute")?0:e.getSeconds(),i("second")?0:e.getMilliseconds());return a},n_=function(e,s,r){for(var i=e[0].start,a=e[0].start,o=M9(e),c;!(c=o()).done;){var d=c.value;d.start<i&&(i=d.start),d.end>a&&(a=d.end)}switch(s){case ns.Year:i=ar(i,-1,"year"),i=Hi(i,"year"),a=ar(a,1,"year"),a=Hi(a,"year");break;case ns.Month:i=ar(i,-1*r,"month"),i=Hi(i,"month"),a=ar(a,1,"year"),a=Hi(a,"year");break;case ns.Week:i=Hi(i,"day"),i=ar(yoe(i),-7*r,"day"),a=Hi(a,"day"),a=ar(a,1.5,"month");break;case ns.Day:i=Hi(i,"day"),i=ar(i,-1*r,"day"),a=Hi(a,"day"),a=ar(a,19,"day");break;case ns.QuarterDay:i=Hi(i,"day"),i=ar(i,-1*r,"day"),a=Hi(a,"day"),a=ar(a,66,"hour");break;case ns.HalfDay:i=Hi(i,"day"),i=ar(i,-1*r,"day"),a=Hi(a,"day"),a=ar(a,108,"hour");break;case ns.Hour:i=Hi(i,"hour"),i=ar(i,-1*r,"hour"),a=Hi(a,"day"),a=ar(a,1,"day");break}return[i,a]},s_=function(e,s,r){for(var i=new Date(e),a=[i];i<s;){switch(r){case ns.Year:i=ar(i,1,"year");break;case ns.Month:i=ar(i,1,"month");break;case ns.Week:i=ar(i,7,"day");break;case ns.Day:i=ar(i,1,"day");break;case ns.HalfDay:i=ar(i,12,"hour");break;case ns.QuarterDay:i=ar(i,6,"hour");break;case ns.Hour:i=ar(i,1,"hour");break}a.push(i)}return a},lf=function(e,s){var r=Iv(s,{month:"long"}).format(e);return r=r.replace(r[0],r[0].toLocaleUpperCase()),r},kw=function(e,s,r){var i=Iv(s,{weekday:r}).format(e);return i=i.replace(i[0],i[0].toLocaleUpperCase()),i},yoe=function(e){var s=e.getDay(),r=e.getDate()-s+(s===0?-6:1);return new Date(e.setDate(r))},woe=function(e){var s=new Date(e.valueOf()),r=(s.getDay()+6)%7;s.setDate(s.getDate()-r+3);var i=s.valueOf();s.setMonth(0,1),s.getDay()!==4&&s.setMonth(0,1+(4-s.getDay()+7)%7);var a=(1+Math.ceil((i-s.valueOf())/6048e5)).toString();return a.length===1?"0"+a:a},joe=function(e,s){return new Date(s,e+1,0).getDate()},yd={ganttTable:"_3_ygE",ganttTable_Header:"_1nBOt",ganttTable_HeaderSeparator:"_2eZzQ",ganttTable_HeaderItem:"_WuQ0f"},boe=function(e){var s=e.headerHeight,r=e.fontFamily,i=e.fontSize,a=e.rowWidth;return Ne.createElement("div",{className:yd.ganttTable,style:{fontFamily:r,fontSize:i}},Ne.createElement("div",{className:yd.ganttTable_Header,style:{height:s-2}},Ne.createElement("div",{className:yd.ganttTable_HeaderItem,style:{minWidth:a}},"Name"),Ne.createElement("div",{className:yd.ganttTable_HeaderSeparator,style:{height:s*.5,marginTop:s*.2}}),Ne.createElement("div",{className:yd.ganttTable_HeaderItem,style:{minWidth:a}},"From"),Ne.createElement("div",{className:yd.ganttTable_HeaderSeparator,style:{height:s*.5,marginTop:s*.25}}),Ne.createElement("div",{className:yd.ganttTable_HeaderItem,style:{minWidth:a}},"To")))},ic={taskListWrapper:"_3ZbQT",taskListTableRow:"_34SS0",taskListCell:"_3lLk3",taskListNameWrapper:"_nI1Xw",taskListExpander:"_2QjE6",taskListEmptyExpander:"_2TfEi"},r_={},Noe=function(e){return function(s,r){var i=s.toString(),a=r_[i];return a||(a=s.toLocaleDateString(e,r),r_[i]=a),a}},i_={weekday:"short",year:"numeric",month:"long",day:"numeric"},Coe=function(e){var s=e.rowHeight,r=e.rowWidth,i=e.tasks,a=e.fontFamily,o=e.fontSize,c=e.locale,d=e.onExpanderClick,h=y.useMemo(function(){return Noe(c)},[c]);return Ne.createElement("div",{className:ic.taskListWrapper,style:{fontFamily:a,fontSize:o}},i.map(function(g){var m="";return g.hideChildren===!1?m="":g.hideChildren===!0&&(m=""),Ne.createElement("div",{className:ic.taskListTableRow,style:{height:s},key:g.id+"row"},Ne.createElement("div",{className:ic.taskListCell,style:{minWidth:r,maxWidth:r},title:g.name},Ne.createElement("div",{className:ic.taskListNameWrapper},Ne.createElement("div",{className:m?ic.taskListExpander:ic.taskListEmptyExpander,onClick:function(){return d(g)}},m),Ne.createElement("div",null,g.name))),Ne.createElement("div",{className:ic.taskListCell,style:{minWidth:r,maxWidth:r}},"",h(g.start,i_)),Ne.createElement("div",{className:ic.taskListCell,style:{minWidth:r,maxWidth:r}},"",h(g.end,i_)))}))},ep={tooltipDefaultContainer:"_3T42e",tooltipDefaultContainerParagraph:"_29NTg",tooltipDetailsContainer:"_25P-K",tooltipDetailsContainerHidden:"_3gVAq"},Soe=function(e){var s=e.task,r=e.rowHeight,i=e.rtl,a=e.svgContainerHeight,o=e.svgContainerWidth,c=e.scrollX,d=e.scrollY,h=e.arrowIndent,g=e.fontSize,m=e.fontFamily,p=e.headerHeight,v=e.taskListWidth,j=e.TooltipContent,N=y.useRef(null),E=y.useState(0),_=E[0],S=E[1],C=y.useState(0),I=C[0],P=C[1];return y.useEffect(function(){if(N.current){var L=N.current.offsetHeight*1.1,T=N.current.offsetWidth*1.1,M=s.index*r-d+p,k;if(i){k=s.x1-h*1.5-T-c,k<0&&(k=s.x2+h*1.5-c);var O=T+k;O>o&&(k=o-T,M+=r)}else{k=s.x2+h*1.5+v-c;var V=T+k,B=v+o;V>B&&(k=s.x1+v-h*1.5-c-T),k<v&&(k=o+v-T,M+=r)}var Y=L+M-d;Y>a-d&&(M=a-L),S(M),P(k)}},[N,s,h,c,d,p,v,r,a,o,i]),Ne.createElement("div",{ref:N,className:I?ep.tooltipDetailsContainer:ep.tooltipDetailsContainerHidden,style:{left:I,top:_}},Ne.createElement(j,{task:s,fontSize:g,fontFamily:m}))},Aoe=function(e){var s=e.task,r=e.fontSize,i=e.fontFamily,a={fontSize:r,fontFamily:i};return Ne.createElement("div",{className:ep.tooltipDefaultContainer,style:a},Ne.createElement("b",{style:{fontSize:r+6}},s.name+": "+s.start.getDate()+"-"+(s.start.getMonth()+1)+"-"+s.start.getFullYear()+" - "+s.end.getDate()+"-"+(s.end.getMonth()+1)+"-"+s.end.getFullYear()),s.end.getTime()-s.start.getTime()!==0&&Ne.createElement("p",{className:ep.tooltipDefaultContainerParagraph},"Duration: "+~~((s.end.getTime()-s.start.getTime())/(1e3*60*60*24))+" day(s)"),Ne.createElement("p",{className:ep.tooltipDefaultContainerParagraph},!!s.progress&&"Progress: "+s.progress+" %"))},Eoe={scroll:"_1eT-t"},_oe=function(e){var s=e.scroll,r=e.ganttHeight,i=e.ganttFullHeight,a=e.headerHeight,o=e.rtl,c=e.onScroll,d=y.useRef(null);return y.useEffect(function(){d.current&&(d.current.scrollTop=s)},[s]),Ne.createElement("div",{style:{height:r,marginTop:a,marginLeft:o?"":"-1rem"},className:Eoe.scroll,onScroll:c,ref:d},Ne.createElement("div",{style:{height:i,width:1}}))},Ioe=function(e){var s=e.headerHeight,r=e.fontFamily,i=e.fontSize,a=e.rowWidth,o=e.rowHeight,c=e.scrollY,d=e.tasks,h=e.selectedTask,g=e.setSelectedTask,m=e.onExpanderClick,p=e.locale,v=e.ganttHeight,j=e.taskListRef,N=e.horizontalContainerClass,E=e.TaskListHeader,_=e.TaskListTable,S=y.useRef(null);y.useEffect(function(){S.current&&(S.current.scrollTop=c)},[c]);var C={headerHeight:s,fontFamily:r,fontSize:i,rowWidth:a},I=h?h.id:"",P={rowHeight:o,rowWidth:a,fontFamily:r,fontSize:i,tasks:d,locale:p,selectedTaskId:I,setSelectedTask:g,onExpanderClick:m};return Ne.createElement("div",{ref:j},Ne.createElement(E,Object.assign({},C)),Ne.createElement("div",{ref:S,className:N,style:v?{height:v}:{}},Ne.createElement(_,Object.assign({},P))))},jx={gridRow:"_2dZTy",gridRowLine:"_3rUKi",gridTick:"_RuwuK"},Toe=function(e){for(var s=e.tasks,r=e.dates,i=e.rowHeight,a=e.svgWidth,o=e.columnWidth,c=e.todayColor,d=e.rtl,h=0,g=[],m=[Ne.createElement("line",{key:"RowLineFirst",x:"0",y1:0,x2:a,y2:0,className:jx.gridRowLine})],p=M9(s),v;!(v=p()).done;){var j=v.value;g.push(Ne.createElement("rect",{key:"Row"+j.id,x:"0",y:h,width:a,height:i,className:jx.gridRow})),m.push(Ne.createElement("line",{key:"RowLine"+j.id,x:"0",y1:h+i,x2:a,y2:h+i,className:jx.gridRowLine})),h+=i}for(var N=new Date,E=0,_=[],S=Ne.createElement("rect",null),C=0;C<r.length;C++){var I=r[C];_.push(Ne.createElement("line",{key:I.getTime(),x1:E,y1:0,x2:E,y2:h,className:jx.gridTick})),(C+1!==r.length&&I.getTime()<N.getTime()&&r[C+1].getTime()>=N.getTime()||C!==0&&C+1===r.length&&I.getTime()<N.getTime()&&ar(I,I.getTime()-r[C-1].getTime(),"millisecond").getTime()>=N.getTime())&&(S=Ne.createElement("rect",{x:E,y:0,width:o,height:h,fill:c})),d&&C+1!==r.length&&I.getTime()>=N.getTime()&&r[C+1].getTime()<N.getTime()&&(S=Ne.createElement("rect",{x:E+o,y:0,width:o,height:h,fill:c})),E+=o}return Ne.createElement("g",{className:"gridBody"},Ne.createElement("g",{className:"rows"},g),Ne.createElement("g",{className:"rowLines"},m),Ne.createElement("g",{className:"ticks"},_),Ne.createElement("g",{className:"today"},S))},Moe=function(e){return Ne.createElement("g",{className:"grid"},Ne.createElement(Toe,Object.assign({},e)))},Cl={calendarBottomText:"_9w8d5",calendarTopTick:"_1rLuZ",calendarTopText:"_2q1Kt",calendarHeader:"_35nLX"},Ru=function(e){var s=e.value,r=e.x1Line,i=e.y1Line,a=e.y2Line,o=e.xText,c=e.yText;return Ne.createElement("g",{className:"calendarTop"},Ne.createElement("line",{x1:r,y1:i,x2:r,y2:a,className:Cl.calendarTopTick,key:s+"line"}),Ne.createElement("text",{key:s+"text",y:c,x:o,className:Cl.calendarTopText},s))},Doe=function(e){var s=e.dateSetup,r=e.locale,i=e.viewMode,a=e.rtl,o=e.headerHeight,c=e.columnWidth,d=e.fontFamily,h=e.fontSize,g=function(){for(var k=[],O=[],V=o*.5,B=0;B<s.dates.length;B++){var Y=s.dates[B],z=Y.getFullYear();if(O.push(Ne.createElement("text",{key:Y.getFullYear(),y:o*.8,x:c*B+c*.5,className:Cl.calendarBottomText},z)),B===0||Y.getFullYear()!==s.dates[B-1].getFullYear()){var G=Y.getFullYear().toString(),he=void 0;a?he=(6+B+Y.getFullYear()+1)*c:he=(6+B-Y.getFullYear())*c,k.push(Ne.createElement(Ru,{key:G,value:G,x1Line:c*B,y1Line:0,y2Line:o,xText:he,yText:V*.9}))}}return[k,O]},m=function(){for(var k=[],O=[],V=o*.5,B=0;B<s.dates.length;B++){var Y=s.dates[B],z=lf(Y,r);if(O.push(Ne.createElement("text",{key:z+Y.getFullYear(),y:o*.8,x:c*B+c*.5,className:Cl.calendarBottomText},z)),B===0||Y.getFullYear()!==s.dates[B-1].getFullYear()){var G=Y.getFullYear().toString(),he=void 0;a?he=(6+B+Y.getMonth()+1)*c:he=(6+B-Y.getMonth())*c,k.push(Ne.createElement(Ru,{key:G,value:G,x1Line:c*B,y1Line:0,y2Line:V,xText:he,yText:V*.9}))}}return[k,O]},p=function(){for(var k=[],O=[],V=1,B=o*.5,Y=s.dates,z=Y.length-1;z>=0;z--){var G=Y[z],he="";(z===0||G.getMonth()!==Y[z-1].getMonth())&&(he=lf(G,r)+", "+G.getFullYear());var le="W"+woe(G);O.push(Ne.createElement("text",{key:G.getTime(),y:o*.8,x:c*(z+ +a),className:Cl.calendarBottomText},le)),he&&(z!==Y.length-1&&k.push(Ne.createElement(Ru,{key:he,value:he,x1Line:c*z+V*c,y1Line:0,y2Line:B,xText:c*z+c*V*.5,yText:B*.9})),V=0),V++}return[k,O]},v=function(){for(var k=[],O=[],V=o*.5,B=s.dates,Y=0;Y<B.length;Y++){var z=B[Y],G=kw(z,r,"short")+", "+z.getDate().toString();if(O.push(Ne.createElement("text",{key:z.getTime(),y:o*.8,x:c*Y+c*.5,className:Cl.calendarBottomText},G)),Y+1!==B.length&&z.getMonth()!==B[Y+1].getMonth()){var he=lf(z,r);k.push(Ne.createElement(Ru,{key:he+z.getFullYear(),value:he,x1Line:c*(Y+1),y1Line:0,y2Line:V,xText:c*(Y+1)-joe(z.getMonth(),z.getFullYear())*c*.5,yText:V*.9}))}}return[k,O]},j=function(){for(var k=[],O=[],V=i===ns.HalfDay?2:4,B=o*.5,Y=s.dates,z=0;z<Y.length;z++){var G=Y[z],he=Iv(r,{hour:"numeric"}).format(G);if(O.push(Ne.createElement("text",{key:G.getTime(),y:o*.8,x:c*(z+ +a),className:Cl.calendarBottomText,fontFamily:d},he)),z===0||G.getDate()!==Y[z-1].getDate()){var le=kw(G,r,"short")+", "+G.getDate()+" "+lf(G,r);k.push(Ne.createElement(Ru,{key:le+G.getFullYear(),value:le,x1Line:c*z+V*c,y1Line:0,y2Line:B,xText:c*z+V*c*.5,yText:B*.9}))}}return[k,O]},N=function(){for(var k=[],O=[],V=o*.5,B=s.dates,Y=0;Y<B.length;Y++){var z=B[Y],G=Iv(r,{hour:"numeric"}).format(z);if(O.push(Ne.createElement("text",{key:z.getTime(),y:o*.8,x:c*(Y+ +a),className:Cl.calendarBottomText,fontFamily:d},G)),Y!==0&&z.getDate()!==B[Y-1].getDate()){var he=B[Y-1],le=kw(he,r,"long")+", "+he.getDate()+" "+lf(he,r),se=(z.getHours()-24)/2;k.push(Ne.createElement(Ru,{key:le+he.getFullYear(),value:le,x1Line:c*Y,y1Line:0,y2Line:V,xText:c*(Y+se),yText:V*.9}))}}return[k,O]},E=[],_=[];switch(s.viewMode){case ns.Year:var S=g();E=S[0],_=S[1];break;case ns.Month:var C=m();E=C[0],_=C[1];break;case ns.Week:var I=p();E=I[0],_=I[1];break;case ns.Day:var P=v();E=P[0],_=P[1];break;case ns.QuarterDay:case ns.HalfDay:var L=j();E=L[0],_=L[1];break;case ns.Hour:var T=N();E=T[0],_=T[1]}return Ne.createElement("g",{className:"calendar",fontSize:h,fontFamily:d},Ne.createElement("rect",{x:0,y:0,width:c*s.dates.length,height:o,className:Cl.calendarHeader}),_," ",E)};typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function Pw(t,e){try{var s=t()}catch(r){return e(r)}return s&&s.then?s.then(void 0,e):s}var koe=function(e){var s=e.taskFrom,r=e.taskTo,i=e.rowHeight,a=e.taskHeight,o=e.arrowIndent,c=e.rtl,d,h;if(c){var g=Roe(s,r,i,a,o);d=g[0],h=g[1]}else{var m=Poe(s,r,i,a,o);d=m[0],h=m[1]}return Ne.createElement("g",{className:"arrow"},Ne.createElement("path",{strokeWidth:"1.5",d,fill:"none"}),Ne.createElement("polygon",{points:h}))},Poe=function(e,s,r,i,a){var o=e.index>s.index?-1:1,c=s.y+i/2,d=e.x2+a*2,h=d<s.x1?"":"H "+(s.x1-a),g=d>s.x1?a:s.x1-e.x2-a,m="M "+e.x2+" "+(e.y+i/2)+` 
  h `+a+` 
  v `+o*r/2+` 
  `+h+`
  V `+c+` 
  h `+g,p=s.x1+","+c+` 
  `+(s.x1-5)+","+(c-5)+` 
  `+(s.x1-5)+","+(c+5);return[m,p]},Roe=function(e,s,r,i,a){var o=e.index>s.index?-1:1,c=s.y+i/2,d=e.x1-a*2,h=d>s.x2?"":"H "+(s.x2+a),g=d<s.x2?-a:s.x2-e.x1+a,m="M "+e.x1+" "+(e.y+i/2)+` 
  h `+-a+` 
  v `+o*r/2+` 
  `+h+`
  V `+c+` 
  h `+g,p=s.x2+","+c+` 
  `+(s.x2+5)+","+(c+5)+` 
  `+(s.x2+5)+","+(c-5);return[m,p]},Loe=function(e,s,r,i,a,o,c,d,h,g,m,p,v,j,N,E,_,S){var C=e.map(function(I,P){return Ooe(I,P,s,r,i,a,o,c,d,h,g,m,p,v,j,N,E,_,S)});return C=C.map(function(I){for(var P=I.dependencies||[],L=function(k){var O=C.findIndex(function(V){return V.id===P[k]});O!==-1&&C[O].barChildren.push(I)},T=0;T<P.length;T++)L(T);return I}),C},Ooe=function(e,s,r,i,a,o,c,d,h,g,m,p,v,j,N,E,_,S,C){var I;switch(e.type){case"milestone":I=Foe(e,s,r,i,a,o,c,d,S,C);break;case"project":I=a_(e,s,r,i,a,o,c,d,h,j,N,E,_);break;default:I=a_(e,s,r,i,a,o,c,d,h,g,m,p,v);break}return I},a_=function(e,s,r,i,a,o,c,d,h,g,m,p,v){var j,N;h?(N=o_(e.start,r,i),j=o_(e.end,r,i)):(j=Tv(e.start,r,i),N=Tv(e.end,r,i));var E=e.type;E==="task"&&N-j<d*2&&(E="smalltask",N=j+d*2);var _=Tf(j,N,e.progress,h),S=_[0],C=_[1],I=D9(s,a,o),P=e.type==="project"?e.hideChildren:void 0,L=Do({backgroundColor:p,backgroundSelectedColor:v,progressColor:g,progressSelectedColor:m},e.styles);return Do({},e,{typeInternal:E,x1:j,x2:N,y:I,index:s,progressX:C,progressWidth:S,barCornerRadius:c,handleWidth:d,hideChildren:P,height:o,barChildren:[],styles:L})},Foe=function(e,s,r,i,a,o,c,d,h,g){var m=Tv(e.start,r,i),p=D9(s,a,o),v=m-o*.5,j=m+o*.5,N=o/1.414,E=Do({backgroundColor:h,backgroundSelectedColor:g,progressColor:"",progressSelectedColor:""},e.styles);return Do({},e,{end:e.start,x1:v,x2:j,y:p,index:s,progressX:0,progressWidth:0,barCornerRadius:c,handleWidth:d,typeInternal:e.type,progress:0,height:N,hideChildren:void 0,barChildren:[],styles:E})},Tv=function(e,s,r){var i=s.findIndex(function(d){return d.getTime()>=e.getTime()})-1,a=e.getTime()-s[i].getTime(),o=a/(s[i+1].getTime()-s[i].getTime()),c=i*r+o*r;return c},o_=function(e,s,r){var i=Tv(e,s,r);return i+=r,i},D9=function(e,s,r){var i=e*s+(s-r)/2;return i},Tf=function(e,s,r,i){var a=(s-e)*r*.01,o;return i?o=s-a:o=e,[a,o]},Boe=function(e,s){if(e>=s.x2)return 100;if(e<=s.x1)return 0;var r=s.x2-s.x1,i=Math.round((e-s.x1)*100/r);return i},zoe=function(e,s){if(e>=s.x2)return 0;if(e<=s.x1)return 100;var r=s.x2-s.x1,i=Math.round((s.x2-e)*100/r);return i},k9=function(e,s,r){var i=[e-5,s+r,e+5,s+r,e,s+r-8.66];return i.join(",")},Voe=function(e,s,r){e>=r.x2-r.handleWidth*2&&(e=r.x2-r.handleWidth*2);var i=Math.round((e-r.x1)/s),a=i*s,o=r.x1+a;return o},$oe=function(e,s,r){e<=r.x1+r.handleWidth*2&&(e=r.x1+r.handleWidth*2);var i=Math.round((e-r.x2)/s),a=i*s,o=r.x2+a;return o},P9=function(e,s,r){var i=Math.round((e-r.x1)/s),a=i*s,o=r.x1+a,c=o+r.x2-r.x1;return[o,c]},Cd=function(e,s,r,i,a){var o=new Date((e-s)/i*a+r.getTime());return o=new Date(o.getTime()+(o.getTimezoneOffset()-r.getTimezoneOffset())*6e4),o},l_=function(e,s,r,i,a,o,c){var d;switch(r.type){case"milestone":d=Woe(e,s,r,i,a,o);break;default:d=Uoe(e,s,r,i,a,o,c);break}return d},Uoe=function(e,s,r,i,a,o,c){var d=Do({},r),h=!1;switch(s){case"progress":if(c?d.progress=zoe(e,r):d.progress=Boe(e,r),h=d.progress!==r.progress,h){var g=Tf(d.x1,d.x2,d.progress,c),m=g[0],p=g[1];d.progressWidth=m,d.progressX=p}break;case"start":{var v=Voe(e,i,r);if(d.x1=v,h=d.x1!==r.x1,h){c?d.end=Cd(v,r.x1,r.end,i,a):d.start=Cd(v,r.x1,r.start,i,a);var j=Tf(d.x1,d.x2,d.progress,c),N=j[0],E=j[1];d.progressWidth=N,d.progressX=E}break}case"end":{var _=$oe(e,i,r);if(d.x2=_,h=d.x2!==r.x2,h){c?d.start=Cd(_,r.x2,r.start,i,a):d.end=Cd(_,r.x2,r.end,i,a);var S=Tf(d.x1,d.x2,d.progress,c),C=S[0],I=S[1];d.progressWidth=C,d.progressX=I}break}case"move":{var P=P9(e-o,i,r),L=P[0],T=P[1];if(h=L!==r.x1,h){d.start=Cd(L,r.x1,r.start,i,a),d.end=Cd(T,r.x2,r.end,i,a),d.x1=L,d.x2=T;var M=Tf(d.x1,d.x2,d.progress,c),k=M[0],O=M[1];d.progressWidth=k,d.progressX=O}break}}return{isChanged:h,changedTask:d}},Woe=function(e,s,r,i,a,o){var c=Do({},r),d=!1;switch(s){case"move":{var h=P9(e-o,i,r),g=h[0],m=h[1];d=g!==r.x1,d&&(c.start=Cd(g,r.x1,r.start,i,a),c.end=c.start,c.x1=g,c.x2=m);break}}return{isChanged:d,changedTask:c}};function Hoe(t){return t.key!==void 0}function qoe(t){var e=t.filter(function(i){return i.hideChildren&&i.type==="project"});if(e.length>0)for(var s=function(a){var o=e[a],c=R9(t,o);t=t.filter(function(d){return c.indexOf(d)===-1})},r=0;e.length>r;r++)s(r);return t}function R9(t,e){var s=[];e.type!=="project"?s=t.filter(function(i){return i.dependencies&&i.dependencies.indexOf(e.id)!==-1}):s=t.filter(function(i){return i.project&&i.project===e.id});var r=[];return s.forEach(function(i){r.push.apply(r,R9(t,i))}),s=s.concat(s,r),s}var Goe=function(e,s){var r=e.displayOrder||Number.MAX_VALUE,i=s.displayOrder||Number.MAX_VALUE;return r>i?1:r<i?-1:0},Rg={barWrapper:"_KxSXS",barHandle:"_3w_5u",barBackground:"_31ERP"},L9=function(e){var s=e.x,r=e.y,i=e.width,a=e.height,o=e.isSelected,c=e.progressX,d=e.progressWidth,h=e.barCornerRadius,g=e.styles,m=e.onMouseDown,p=function(){return o?g.progressSelectedColor:g.progressColor},v=function(){return o?g.backgroundSelectedColor:g.backgroundColor};return Ne.createElement("g",{onMouseDown:m},Ne.createElement("rect",{x:s,width:i,y:r,height:a,ry:h,rx:h,fill:v(),className:Rg.barBackground}),Ne.createElement("rect",{x:c,width:d,y:r,height:a,ry:h,rx:h,fill:p()}))},c_=function(e){var s=e.x,r=e.y,i=e.width,a=e.height,o=e.barCornerRadius,c=e.onMouseDown;return Ne.createElement("rect",{x:s,y:r,width:i,height:a,className:Rg.barHandle,ry:o,rx:o,onMouseDown:c})},O9=function(e){var s=e.progressPoint,r=e.onMouseDown;return Ne.createElement("polygon",{className:Rg.barHandle,points:s,onMouseDown:r})},Yoe=function(e){var s=e.task,r=e.isProgressChangeable,i=e.isDateChangeable,a=e.rtl,o=e.onEventStart,c=e.isSelected,d=k9(+!a*s.progressWidth+s.progressX,s.y,s.height),h=s.height-2;return Ne.createElement("g",{className:Rg.barWrapper,tabIndex:0},Ne.createElement(L9,{x:s.x1,y:s.y,width:s.x2-s.x1,height:s.height,progressX:s.progressX,progressWidth:s.progressWidth,barCornerRadius:s.barCornerRadius,styles:s.styles,isSelected:c,onMouseDown:function(m){i&&o("move",s,m)}}),Ne.createElement("g",{className:"handleGroup"},i&&Ne.createElement("g",null,Ne.createElement(c_,{x:s.x1+1,y:s.y+1,width:s.handleWidth,height:h,barCornerRadius:s.barCornerRadius,onMouseDown:function(m){o("start",s,m)}}),Ne.createElement(c_,{x:s.x2-s.handleWidth-1,y:s.y+1,width:s.handleWidth,height:h,barCornerRadius:s.barCornerRadius,onMouseDown:function(m){o("end",s,m)}})),r&&Ne.createElement(O9,{progressPoint:d,onMouseDown:function(m){o("progress",s,m)}})))},Koe=function(e){var s=e.task,r=e.isProgressChangeable,i=e.isDateChangeable,a=e.onEventStart,o=e.isSelected,c=k9(s.progressWidth+s.x1,s.y,s.height);return Ne.createElement("g",{className:Rg.barWrapper,tabIndex:0},Ne.createElement(L9,{x:s.x1,y:s.y,width:s.x2-s.x1,height:s.height,progressX:s.progressX,progressWidth:s.progressWidth,barCornerRadius:s.barCornerRadius,styles:s.styles,isSelected:o,onMouseDown:function(h){i&&a("move",s,h)}}),Ne.createElement("g",{className:"handleGroup"},r&&Ne.createElement(O9,{progressPoint:c,onMouseDown:function(h){a("progress",s,h)}})))},d_={milestoneWrapper:"_RRr13",milestoneBackground:"_2P2B1"},Zoe=function(e){var s=e.task,r=e.isDateChangeable,i=e.onEventStart,a=e.isSelected,o="rotate(45 "+(s.x1+s.height*.356)+` 
    `+(s.y+s.height*.85)+")",c=function(){return a?s.styles.backgroundSelectedColor:s.styles.backgroundColor};return Ne.createElement("g",{tabIndex:0,className:d_.milestoneWrapper},Ne.createElement("rect",{fill:c(),x:s.x1,width:s.height,y:s.y,height:s.height,rx:s.barCornerRadius,ry:s.barCornerRadius,transform:o,className:d_.milestoneBackground,onMouseDown:function(h){r&&i("move",s,h)}}))},cf={projectWrapper:"_1KJ6x",projectBackground:"_2RbVy",projectTop:"_2pZMF"},Qoe=function(e){var s=e.task,r=e.isSelected,i=r?s.styles.backgroundSelectedColor:s.styles.backgroundColor,a=r?s.styles.progressSelectedColor:s.styles.progressColor,o=s.x2-s.x1,c=[s.x1,s.y+s.height/2-1,s.x1,s.y+s.height,s.x1+15,s.y+s.height/2-1].join(","),d=[s.x2,s.y+s.height/2-1,s.x2,s.y+s.height,s.x2-15,s.y+s.height/2-1].join(",");return Ne.createElement("g",{tabIndex:0,className:cf.projectWrapper},Ne.createElement("rect",{fill:i,x:s.x1,width:o,y:s.y,height:s.height,rx:s.barCornerRadius,ry:s.barCornerRadius,className:cf.projectBackground}),Ne.createElement("rect",{x:s.progressX,width:s.progressWidth,y:s.y,height:s.height,ry:s.barCornerRadius,rx:s.barCornerRadius,fill:a}),Ne.createElement("rect",{fill:i,x:s.x1,width:o,y:s.y,height:s.height/2,rx:s.barCornerRadius,ry:s.barCornerRadius,className:cf.projectTop}),Ne.createElement("polygon",{className:cf.projectTop,points:c,fill:i}),Ne.createElement("polygon",{className:cf.projectTop,points:d,fill:i}))},u_={barLabel:"_3zRJQ",barLabelOutside:"_3KcaM"},Xoe=function(e){var s=Do({},e),r=s.task,i=s.arrowIndent,a=s.isDelete,o=s.taskHeight,c=s.isSelected,d=s.rtl,h=s.onEventStart,g=y.useRef(null),m=y.useState(Ne.createElement("div",null)),p=m[0],v=m[1],j=y.useState(!0),N=j[0],E=j[1];y.useEffect(function(){switch(r.typeInternal){case"milestone":v(Ne.createElement(Zoe,Object.assign({},e)));break;case"project":v(Ne.createElement(Qoe,Object.assign({},e)));break;case"smalltask":v(Ne.createElement(Koe,Object.assign({},e)));break;default:v(Ne.createElement(Yoe,Object.assign({},e)));break}},[r,c]),y.useEffect(function(){g.current&&E(g.current.getBBox().width<r.x2-r.x1)},[g,r]);var _=function(){var C=r.x2-r.x1,I=r.barChildren.length>0;return N?r.x1+C*.5:d&&g.current?r.x1-g.current.getBBox().width-i*+I-i*.2:r.x1+C+i*+I+i*.2};return Ne.createElement("g",{onKeyDown:function(C){switch(C.key){case"Delete":{a&&h("delete",r,C);break}}C.stopPropagation()},onMouseEnter:function(C){h("mouseenter",r,C)},onMouseLeave:function(C){h("mouseleave",r,C)},onDoubleClick:function(C){h("dblclick",r,C)},onClick:function(C){h("click",r,C)},onFocus:function(){h("select",r)}},p,Ne.createElement("text",{x:_(),y:r.y+o*.5,className:N?u_.barLabel:u_.barLabelOutside,ref:g},r.name))},Joe=function(e){var s,r=e.tasks,i=e.dates,a=e.ganttEvent,o=e.selectedTask,c=e.rowHeight,d=e.columnWidth,h=e.timeStep,g=e.svg,m=e.taskHeight,p=e.arrowColor,v=e.arrowIndent,j=e.fontFamily,N=e.fontSize,E=e.rtl,_=e.setGanttEvent,S=e.setFailedTask,C=e.setSelectedTask,I=e.onDateChange,P=e.onProgressChange,L=e.onDoubleClick,T=e.onClick,M=e.onDelete,k=g==null||(s=g.current)===null||s===void 0?void 0:s.createSVGPoint(),O=y.useState(0),V=O[0],B=O[1],Y=y.useState(0),z=Y[0],G=Y[1],he=y.useState(!1),le=he[0],se=he[1];y.useEffect(function(){var me=i[1].getTime()-i[0].getTime()-i[1].getTimezoneOffset()*60*1e3+i[0].getTimezoneOffset()*60*1e3,Ce=h*d/me;B(Ce)},[d,i,h]),y.useEffect(function(){var me=function(xe){try{var te;if(!a.changedTask||!k||!(g!=null&&g.current))return Promise.resolve();xe.preventDefault(),k.x=xe.clientX;var ae=k.matrixTransform(g==null||(te=g.current.getScreenCTM())===null||te===void 0?void 0:te.inverse()),ee=l_(ae.x,a.action,a.changedTask,V,h,z,E),de=ee.isChanged,pe=ee.changedTask;return de&&_({action:a.action,changedTask:pe}),Promise.resolve()}catch(Me){return Promise.reject(Me)}},Ce=function $(xe){try{var te,ae=function(){mt||S(de)},ee=a.action,de=a.originalSelectedTask,pe=a.changedTask;if(!pe||!k||!(g!=null&&g.current)||!de)return Promise.resolve();xe.preventDefault(),k.x=xe.clientX;var Me=k.matrixTransform(g==null||(te=g.current.getScreenCTM())===null||te===void 0?void 0:te.inverse()),Le=l_(Me.x,ee,pe,V,h,z,E),We=Le.changedTask,jt=de.start!==We.start||de.end!==We.end||de.progress!==We.progress;g.current.removeEventListener("mousemove",me),g.current.removeEventListener("mouseup",$),_({action:""}),se(!1);var mt=!0,ke=function(){if((ee==="move"||ee==="end"||ee==="start")&&I&&jt){var yt=Pw(function(){return Promise.resolve(I(We,We.barChildren)).then(function(zt){zt!==void 0&&(mt=zt)})},function(){mt=!1});if(yt&&yt.then)return yt.then(function(){})}else{var On=function(){if(P&&jt){var zt=Pw(function(){return Promise.resolve(P(We,We.barChildren)).then(function(ce){ce!==void 0&&(mt=ce)})},function(){mt=!1});if(zt&&zt.then)return zt.then(function(){})}}();if(On&&On.then)return On.then(function(){})}}();return Promise.resolve(ke&&ke.then?ke.then(ae):ae(ke))}catch(yt){return Promise.reject(yt)}};!le&&(a.action==="move"||a.action==="end"||a.action==="start"||a.action==="progress")&&g!==null&&g!==void 0&&g.current&&(g.current.addEventListener("mousemove",me),g.current.addEventListener("mouseup",Ce),se(!0))},[a,V,z,P,h,I,g,le,k,E,S,_]);var re=function(Ce,$,xe){try{return Promise.resolve(function(){if(!xe)Ce==="select"&&C($.id);else return function(){if(Hoe(xe)){var te=function(){if(Ce==="delete"){var de=function(){if(M){var pe=Pw(function(){return Promise.resolve(M($)).then(function(Me){Me!==void 0&&Me&&_({action:Ce,changedTask:$})})},function(Me){console.error("Error on Delete. "+Me)});if(pe&&pe.then)return pe.then(function(){})}}();if(de&&de.then)return de.then(function(){})}}();if(te&&te.then)return te.then(function(){})}else if(Ce==="mouseenter")a.action||_({action:Ce,changedTask:$,originalSelectedTask:$});else if(Ce==="mouseleave")a.action==="mouseenter"&&_({action:""});else if(Ce==="dblclick")L&&L($);else if(Ce==="click")T&&T($);else if(Ce==="move"){var ae;if(!(g!=null&&g.current)||!k)return;k.x=xe.clientX;var ee=k.matrixTransform((ae=g.current.getScreenCTM())===null||ae===void 0?void 0:ae.inverse());G(ee.x-$.x1),_({action:Ce,changedTask:$,originalSelectedTask:$})}else _({action:Ce,changedTask:$,originalSelectedTask:$})}()}())}catch(te){return Promise.reject(te)}};return Ne.createElement("g",{className:"content"},Ne.createElement("g",{className:"arrows",fill:p,stroke:p},r.map(function(me){return me.barChildren.map(function(Ce){return Ne.createElement(koe,{key:"Arrow from "+me.id+" to "+r[Ce.index].id,taskFrom:me,taskTo:r[Ce.index],rowHeight:c,taskHeight:m,arrowIndent:v,rtl:E})})})),Ne.createElement("g",{className:"bar",fontFamily:j,fontSize:N},r.map(function(me){return Ne.createElement(Xoe,{task:me,arrowIndent:v,taskHeight:m,isProgressChangeable:!!P&&!me.isDisabled,isDateChangeable:!!I&&!me.isDisabled,isDelete:!me.isDisabled,onEventStart:re,key:me.id,isSelected:!!o&&me.id===o.id,rtl:E})})))},Mv={ganttVerticalContainer:"_CZjuD",horizontalContainer:"_2B2zv",wrapper:"_3eULf"},ele=function(e){var s=e.gridProps,r=e.calendarProps,i=e.barProps,a=e.ganttHeight,o=e.scrollY,c=e.scrollX,d=y.useRef(null),h=y.useRef(null),g=y.useRef(null),m=Do({},i,{svg:d});return y.useEffect(function(){h.current&&(h.current.scrollTop=o)},[o]),y.useEffect(function(){g.current&&(g.current.scrollLeft=c)},[c]),Ne.createElement("div",{className:Mv.ganttVerticalContainer,ref:g,dir:"ltr"},Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:s.svgWidth,height:r.headerHeight,fontFamily:i.fontFamily},Ne.createElement(Doe,Object.assign({},r))),Ne.createElement("div",{ref:h,className:Mv.horizontalContainer,style:a?{height:a,width:s.svgWidth}:{width:s.svgWidth}},Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:s.svgWidth,height:i.rowHeight*i.tasks.length,fontFamily:i.fontFamily,ref:d},Ne.createElement(Moe,Object.assign({},s)),Ne.createElement(Joe,Object.assign({},m)))))},h_={scrollWrapper:"_2k9Ys",scroll:"_19jgW"},tle=function(e){var s=e.scroll,r=e.svgWidth,i=e.taskListWidth,a=e.rtl,o=e.onScroll,c=y.useRef(null);return y.useEffect(function(){c.current&&(c.current.scrollLeft=s)},[s]),Ne.createElement("div",{dir:"ltr",style:{margin:a?"0px "+i+"px 0px 0px":"0px 0px 0px "+i+"px"},className:h_.scrollWrapper,onScroll:o,ref:c},Ne.createElement("div",{style:{width:r},className:h_.scroll}))},nle=function(e){var s=e.tasks,r=e.headerHeight,i=r===void 0?50:r,a=e.columnWidth,o=a===void 0?60:a,c=e.listCellWidth,d=c===void 0?"155px":c,h=e.rowHeight,g=h===void 0?50:h,m=e.ganttHeight,p=m===void 0?0:m,v=e.viewMode,j=v===void 0?ns.Day:v,N=e.preStepsCount,E=N===void 0?1:N,_=e.locale,S=_===void 0?"en-GB":_,C=e.barFill,I=C===void 0?60:C,P=e.barCornerRadius,L=P===void 0?3:P,T=e.barProgressColor,M=T===void 0?"#a3a3ff":T,k=e.barProgressSelectedColor,O=k===void 0?"#8282f5":k,V=e.barBackgroundColor,B=V===void 0?"#b8c2cc":V,Y=e.barBackgroundSelectedColor,z=Y===void 0?"#aeb8c2":Y,G=e.projectProgressColor,he=G===void 0?"#7db59a":G,le=e.projectProgressSelectedColor,se=le===void 0?"#59a985":le,re=e.projectBackgroundColor,me=re===void 0?"#fac465":re,Ce=e.projectBackgroundSelectedColor,$=Ce===void 0?"#f7bb53":Ce,xe=e.milestoneBackgroundColor,te=xe===void 0?"#f1c453":xe,ae=e.milestoneBackgroundSelectedColor,ee=ae===void 0?"#f29e4c":ae,de=e.rtl,pe=de===void 0?!1:de,Me=e.handleWidth,Le=Me===void 0?8:Me,We=e.timeStep,jt=We===void 0?3e5:We,mt=e.arrowColor,ke=mt===void 0?"grey":mt,yt=e.fontFamily,On=yt===void 0?"Arial, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue":yt,zt=e.fontSize,ce=zt===void 0?"14px":zt,be=e.arrowIndent,ze=be===void 0?20:be,Pe=e.todayColor,Je=Pe===void 0?"rgba(252, 248, 227, 0.5)":Pe,Ke=e.viewDate,Nt=e.TooltipContent,dt=Nt===void 0?Aoe:Nt,Dt=e.TaskListHeader,At=Dt===void 0?boe:Dt,qt=e.TaskListTable,Hn=qt===void 0?Coe:qt,er=e.onDateChange,nn=e.onProgressChange,Bt=e.onDoubleClick,bn=e.onClick,rt=e.onDelete,qn=e.onSelect,Vn=e.onExpanderClick,$n=y.useRef(null),aa=y.useRef(null),ao=y.useState(function(){var Ot=n_(s,j,E),Nn=Ot[0],cs=Ot[1];return{viewMode:j,dates:s_(Nn,cs,j)}}),Vi=ao[0],Fn=ao[1],oa=y.useState(void 0),la=oa[0],Yl=oa[1],Ar=y.useState(0),oo=Ar[0],zs=Ar[1],Ma=y.useState(0),Kl=Ma[0],Fr=Ma[1],en=y.useState(p),dl=en[0],yu=en[1],Qr=y.useState([]),Er=Qr[0],Xr=Qr[1],Et=y.useState({action:""}),ca=Et[0],wu=Et[1],Br=y.useMemo(function(){return g*I/100},[g,I]),ul=y.useState(),hl=ul[0],ju=ul[1],da=y.useState(null),bu=da[0],Og=da[1],xr=Vi.dates.length*o,tr=Er.length*g,js=y.useState(0),Da=js[0],ka=js[1],Nu=y.useState(-1),He=Nu[0],pd=Nu[1],Is=y.useState(!1),ml=Is[0],Zl=Is[1];y.useEffect(function(){var Ot;Vn?Ot=qoe(s):Ot=s,Ot=Ot.sort(Goe);var Nn=n_(Ot,j,E),cs=Nn[0],Zn=Nn[1],Gt=s_(cs,Zn,j);pe&&(Gt=Gt.reverse(),He===-1&&pd(Gt.length*o)),Fn({dates:Gt,viewMode:j}),Xr(Loe(Ot,Gt,o,g,Br,L,Le,pe,M,O,B,z,he,se,me,$,te,ee))},[s,j,E,g,L,o,Br,Le,M,O,B,z,he,se,me,$,te,ee,pe,He,Vn]),y.useEffect(function(){if(j===Vi.viewMode&&(Ke&&!la||Ke&&(la==null?void 0:la.valueOf())!==Ke.valueOf())){var Ot=Vi.dates,Nn=Ot.findIndex(function(cs,Zn){return Ke.valueOf()>=cs.valueOf()&&Zn+1!==Ot.length&&Ke.valueOf()<Ot[Zn+1].valueOf()});if(Nn===-1)return;Yl(Ke),pd(o*Nn)}},[Ke,o,Vi.dates,Vi.viewMode,j,la,Yl]),y.useEffect(function(){var Ot=ca.changedTask,Nn=ca.action;if(Ot){if(Nn==="delete")wu({action:""}),Xr(Er.filter(function(Gt){return Gt.id!==Ot.id}));else if(Nn==="move"||Nn==="end"||Nn==="start"||Nn==="progress"){var cs=Er.find(function(Gt){return Gt.id===Ot.id});if(cs&&(cs.start.getTime()!==Ot.start.getTime()||cs.end.getTime()!==Ot.end.getTime()||cs.progress!==Ot.progress)){var Zn=Er.map(function(Gt){return Gt.id===Ot.id?Ot:Gt});Xr(Zn)}}}},[ca,Er]),y.useEffect(function(){bu&&(Xr(Er.map(function(Ot){return Ot.id!==bu.id?Ot:bu})),Og(null))},[bu,Er]),y.useEffect(function(){d||zs(0),aa.current&&zs(aa.current.offsetWidth)},[aa,d]),y.useEffect(function(){$n.current&&Fr($n.current.offsetWidth-oo)},[$n,oo]),y.useEffect(function(){yu(p?p+i:s.length*g+i)},[p,s,i,g]),y.useEffect(function(){var Ot,Nn=function(Zn){if(Zn.shiftKey||Zn.deltaX){var Gt=Zn.deltaX?Zn.deltaX:Zn.deltaY,nr=He+Gt;nr<0?nr=0:nr>xr&&(nr=xr),pd(nr),Zn.preventDefault()}else if(p){var Ie=Da+Zn.deltaY;Ie<0?Ie=0:Ie>tr-p&&(Ie=tr-p),Ie!==Da&&(ka(Ie),Zn.preventDefault())}Zl(!0)};return(Ot=$n.current)===null||Ot===void 0||Ot.addEventListener("wheel",Nn,{passive:!1}),function(){var cs;(cs=$n.current)===null||cs===void 0||cs.removeEventListener("wheel",Nn)}},[$n,Da,He,p,xr,pe,tr]);var Jn=function(Nn){Da!==Nn.currentTarget.scrollTop&&!ml?(ka(Nn.currentTarget.scrollTop),Zl(!0)):Zl(!1)},Kn=function(Nn){He!==Nn.currentTarget.scrollLeft&&!ml?(pd(Nn.currentTarget.scrollLeft),Zl(!0)):Zl(!1)},kn=function(Nn){Nn.preventDefault();var cs=Da,Zn=He,Gt=!0;switch(Nn.key){case"Down":case"ArrowDown":cs+=g,Gt=!1;break;case"Up":case"ArrowUp":cs-=g,Gt=!1;break;case"Left":case"ArrowLeft":Zn-=o;break;case"Right":case"ArrowRight":Zn+=o;break}Gt?(Zn<0?Zn=0:Zn>xr&&(Zn=xr),pd(Zn)):(cs<0?cs=0:cs>tr-p&&(cs=tr-p),ka(cs)),Zl(!0)},Cu=function(Nn){var cs=Er.find(function(Gt){return Gt.id===Nn}),Zn=Er.find(function(Gt){return!!hl&&Gt.id===hl.id});qn&&(Zn&&qn(Zn,!1),cs&&qn(cs,!0)),ju(cs)},Rm=function(Nn){Vn&&Nn.hideChildren!==void 0&&Vn(Do({},Nn,{hideChildren:!Nn.hideChildren}))},Lm={columnWidth:o,svgWidth:xr,tasks:s,rowHeight:g,dates:Vi.dates,todayColor:Je,rtl:pe},cr={dateSetup:Vi,locale:S,viewMode:j,headerHeight:i,columnWidth:o,fontFamily:On,fontSize:ce,rtl:pe},Ro={tasks:Er,dates:Vi.dates,ganttEvent:ca,selectedTask:hl,rowHeight:g,taskHeight:Br,columnWidth:o,arrowColor:ke,timeStep:jt,fontFamily:On,fontSize:ce,arrowIndent:ze,svgWidth:xr,rtl:pe,setGanttEvent:wu,setFailedTask:Og,setSelectedTask:Cu,onDateChange:er,onProgressChange:nn,onDoubleClick:Bt,onClick:bn,onDelete:rt},t1={rowHeight:g,rowWidth:d,fontFamily:On,fontSize:ce,tasks:Er,locale:S,headerHeight:i,scrollY:Da,ganttHeight:p,horizontalContainerClass:Mv.horizontalContainer,selectedTask:hl,taskListRef:aa,setSelectedTask:Cu,onExpanderClick:Rm,TaskListHeader:At,TaskListTable:Hn};return Ne.createElement("div",null,Ne.createElement("div",{className:Mv.wrapper,onKeyDown:kn,tabIndex:0,ref:$n},d&&Ne.createElement(Ioe,Object.assign({},t1)),Ne.createElement(ele,{gridProps:Lm,calendarProps:cr,barProps:Ro,ganttHeight:p,scrollY:Da,scrollX:He}),ca.changedTask&&Ne.createElement(Soe,{arrowIndent:ze,rowHeight:g,svgContainerHeight:dl,svgContainerWidth:Kl,fontFamily:On,fontSize:ce,scrollX:He,scrollY:Da,task:ca.changedTask,headerHeight:i,taskListWidth:oo,TooltipContent:dt,rtl:pe,svgWidth:xr}),Ne.createElement(_oe,{ganttFullHeight:tr,ganttHeight:p,headerHeight:i,scroll:Da,onScroll:Jn,rtl:pe})),Ne.createElement(tle,{svgWidth:xr,taskListWidth:oo,scroll:He,rtl:pe,onScroll:Kn}))};function sle({phases:t,currentPhase:e}){const[s,r]=y.useState(ns.Month),[i,a]=y.useState([]),[o,c]=y.useState(null);y.useEffect(()=>{if(c(null),console.log("ProjectTimeline processing phases:",t),!(!t||!Array.isArray(t)||t.length===0))try{const h=[],g=[...t].map(v=>({...v,id:v.id||0,name:v.name||`Phase ${v.id||0}`,order:v.order||0,percentComplete:v.percentComplete||0,status:v.status||"pending"}));console.log("Created safePhases:",g),g.sort((v,j)=>v.order-j.order);const m=g.some(v=>v.startDate),p=new Date;for(let v=0;v<g.length;v++){const j=g[v];let N;if(j.startDate)N=new Date(j.startDate);else if(!m&&v>0&&h.length>0){const L=h[v-1];L&&L.end?N=new Date(L.end):(N=new Date(p),N.setDate(N.getDate()+v))}else N=new Date(p);let E;j.endDate?E=new Date(j.endDate):j.estimatedDuration?(E=new Date(N),E.setDate(N.getDate()+(j.estimatedDuration||1))):(E=new Date(N),E.setDate(N.getDate()+1));let _="#6b7280",S="#4b5563",C="#6b7280",I="#4b5563";switch(j.status){case"planning":_="#3b82f6",S="#2563eb",C="#3b82f6",I="#2563eb";break;case"pending":_="#f59e0b",S="#d97706",C="#f59e0b",I="#d97706";break;case"in_progress":_="#10b981",S="#059669",C="#10b981",I="#059669";break;case"completed":_="#22c55e",S="#16a34a",C="#22c55e",I="#16a34a";break;case"delayed":_="#ef4444",S="#dc2626",C="#ef4444",I="#dc2626";break}e===j.name&&(C="#8b5cf6",I="#7c3aed");const P={id:`${j.id}`,name:j.name,start:N,end:E,progress:j.percentComplete/100,type:"task",isDisabled:!1,styles:{backgroundColor:_,progressColor:S,backgroundSelectedColor:C,progressSelectedColor:I},dependencies:v>0?[`${g[v-1].id}`]:[],project:"",hideChildren:!1};h.push(P)}a(h)}catch(h){console.error("Error preparing timeline data:",h),c(String(h))}},[t,e]);const d=()=>{if(i.length===0)return"No timeline data";try{const h=i.map(v=>v.start),g=i.map(v=>v.end);if(h.some(v=>!v)||g.some(v=>!v))return"Date range unavailable";const m=new Date(Math.min(...h.map(v=>v.getTime()))),p=new Date(Math.max(...g.map(v=>v.getTime())));return isNaN(m.getTime())||isNaN(p.getTime())?"Invalid date range":`${ft(m,"MMM d, yyyy")} - ${ft(p,"MMM d, yyyy")}`}catch(h){return console.error("Error calculating timeline range:",h),"Unable to calculate date range"}};return o?n.jsxs("div",{className:"p-8 text-center border rounded-lg bg-muted/10 text-red-500",children:[n.jsx("p",{children:"Error generating timeline visualization. Please try again or contact support."}),n.jsx("p",{className:"text-xs mt-2 text-muted-foreground",children:o})]}):i.length===0?n.jsx("div",{className:"p-8 text-center border rounded-lg bg-muted/10",children:n.jsx("p",{className:"text-muted-foreground",children:"Not enough timeline data to display. Please add start and end dates to your project phases."})}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 sm:gap-0",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Project Timeline"}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[n.jsxs("select",{className:"text-sm px-2 py-1 rounded border bg-background",value:s,onChange:h=>r(h.target.value),children:[n.jsx("option",{value:ns.Day,children:"Day"}),n.jsx("option",{value:ns.Week,children:"Week"}),n.jsx("option",{value:ns.Month,children:"Month"}),n.jsx("option",{value:ns.Year,children:"Year"})]}),n.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:d()})]})]}),n.jsx("div",{className:"border rounded-lg overflow-auto -mx-4 sm:mx-0",children:n.jsx("div",{className:"min-w-[800px]",children:n.jsx(nle,{tasks:i,viewMode:s,onDateChange:h=>console.log("Date change:",h),onProgressChange:h=>console.log("Progress change:",h),onDoubleClick:h=>console.log("Double click:",h),onClick:h=>console.log("Click:",h),listCellWidth:"155px",columnWidth:s===ns.Year?350:s===ns.Month?300:60,locale:"en-US",fontSize:"12px"})})}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"text-sm font-medium mb-2",children:"Timeline Legend"}),n.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded bg-blue-500"}),n.jsx("span",{className:"text-xs",children:"Planning"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded bg-amber-500"}),n.jsx("span",{className:"text-xs",children:"Pending"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded bg-green-500"}),n.jsx("span",{className:"text-xs",children:"In Progress"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded bg-green-600"}),n.jsx("span",{className:"text-xs",children:"Completed"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded bg-red-500"}),n.jsx("span",{className:"text-xs",children:"Delayed"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded bg-purple-500"}),n.jsx("span",{className:"text-xs",children:"Current Phase"})]})]})]})]})}const xl=async t=>{const{url:e,method:s,data:r}=t;try{const i=await fetch(e,{method:s,headers:{...r?{"Content-Type":"application/json"}:{},Accept:"application/json"},body:r?JSON.stringify(r):void 0,credentials:"include"});if(!i.ok){const o=await i.text()||i.statusText;throw new Error(`${i.status}: ${o}`)}const a=await i.json();return console.log(`Data received from ${e}:`,a),a}catch(i){throw console.error(`Error fetching from ${e}:`,i),i}},m_=Sg({name:yr().min(1,"Phase name is required"),description:yr().optional(),status:mv(["planning","pending","in_progress","completed","delayed"]),percentComplete:ih().min(0).max(100),startDate:Nh().optional(),endDate:Nh().optional(),notes:yr().optional(),estimatedDuration:ih().int().nonnegative().optional(),actualDuration:ih().int().nonnegative().optional(),cost:ih().nonnegative().optional(),permitRequired:bh().default(!1),inspectionRequired:bh().default(!1),inspectionDate:Nh().optional(),inspectionPassed:bh().optional(),inspectionNotes:yr().optional()}).refine(t=>t.startDate&&t.endDate?t.endDate>=t.startDate:!0,{message:"End date must be on or after start date",path:["endDate"]}).refine(t=>!(t.inspectionRequired&&t.inspectionPassed&&!t.inspectionDate),{message:"Inspection date is required when inspection is passed",path:["inspectionDate"]});function F9({projectId:t,currentPhase:e}){var me,Ce;const{toast:s}=Lt(),r=jn(),[i,a]=y.useState(null),[o,c]=y.useState(!1),[d,h]=y.useState(!1),[g,m]=y.useState(""),[p,v]=y.useState(null),[j,N]=y.useState(!1),[E,_]=y.useState(!1),{data:S=[],isLoading:C,isError:I,error:P}=wt({queryKey:["/api/projects",t,"phases"],queryFn:async()=>{try{const $=await xl({url:`/api/projects/${t}/phases`,method:"GET"});return console.log(`Fetched phases for project ${t}:`,$),$}catch($){throw console.error(`Error fetching phases for project ${t}:`,$),$}},refetchOnWindowFocus:!0,refetchOnMount:!0,staleTime:0}),L=mn({resolver:pn(m_),defaultValues:{name:"",status:"pending",percentComplete:0,notes:""}}),T=mn({resolver:pn(m_),defaultValues:{name:"",description:"",status:"pending",percentComplete:0,notes:"",estimatedDuration:void 0,actualDuration:void 0,cost:void 0,permitRequired:!1,inspectionRequired:!1,inspectionDate:void 0,inspectionPassed:void 0,inspectionNotes:""}});Ne.useEffect(()=>{i&&L.reset({name:i.name,description:i.description||"",status:i.status,percentComplete:i.percentComplete,startDate:i.startDate?new Date(i.startDate):void 0,endDate:i.endDate?new Date(i.endDate):void 0,notes:i.notes||"",estimatedDuration:i.estimatedDuration||void 0,actualDuration:i.actualDuration||void 0,cost:i.cost||void 0,permitRequired:i.permitRequired||!1,inspectionRequired:i.inspectionRequired||!1,inspectionDate:i.inspectionDate?new Date(i.inspectionDate):void 0,inspectionPassed:i.inspectionPassed||void 0,inspectionNotes:i.inspectionNotes||""})},[i,L]);const M=Pt({mutationFn:async $=>{const{id:xe,...te}=$,ee={...{name:te.name,status:te.status,percentComplete:te.percentComplete}};return te.description&&(ee.description=te.description),te.notes&&(ee.notes=te.notes),te.inspectionNotes&&(ee.inspectionNotes=te.inspectionNotes),te.startDate&&(ee.startDate=te.startDate.toISOString().split("T")[0]),te.endDate&&(ee.endDate=te.endDate.toISOString().split("T")[0]),te.inspectionDate&&(ee.inspectionDate=te.inspectionDate.toISOString().split("T")[0]),typeof te.estimatedDuration=="number"&&(ee.estimatedDuration=te.estimatedDuration),typeof te.actualDuration=="number"&&(ee.actualDuration=te.actualDuration),typeof te.cost=="number"&&(ee.cost=te.cost),ee.permitRequired=te.permitRequired===!0,ee.inspectionRequired=te.inspectionRequired===!0,te.inspectionPassed!==void 0&&(ee.inspectionPassed=te.inspectionPassed),console.log(`Updating phase ${xe} with data:`,JSON.stringify(ee)),await xl({url:`/api/project-phases/${xe}`,method:"PATCH",data:ee})},onSuccess:()=>{s({title:"Success",description:"Project phase updated successfully"}),r.invalidateQueries({queryKey:["/api/projects",t,"phases"]}),a(null)},onError:$=>{s({title:"Error",description:"Failed to update project phase",variant:"destructive"}),console.error("Phase update failed:",$)}}),k=Pt({mutationFn:async $=>{const te={...{name:$.name,status:$.status,projectId:t,order:S.length+1,percentComplete:$.percentComplete}};return $.description&&(te.description=$.description),$.notes&&(te.notes=$.notes),$.inspectionNotes&&(te.inspectionNotes=$.inspectionNotes),$.startDate&&(te.startDate=$.startDate.toISOString().split("T")[0]),$.endDate&&(te.endDate=$.endDate.toISOString().split("T")[0]),$.inspectionDate&&(te.inspectionDate=$.inspectionDate.toISOString().split("T")[0]),typeof $.estimatedDuration=="number"&&(te.estimatedDuration=$.estimatedDuration),typeof $.actualDuration=="number"&&(te.actualDuration=$.actualDuration),typeof $.cost=="number"&&(te.cost=$.cost),te.permitRequired=$.permitRequired===!0,te.inspectionRequired=$.inspectionRequired===!0,$.inspectionPassed!==void 0&&(te.inspectionPassed=$.inspectionPassed),console.log("Adding new phase with data:",JSON.stringify(te)),await xl({url:"/api/project-phases",method:"POST",data:te})},onSuccess:()=>{s({title:"Success",description:"New project phase added successfully"}),r.invalidateQueries({queryKey:["/api/projects",t,"phases"]}),c(!1),T.reset()},onError:$=>{s({title:"Error",description:"Failed to add project phase",variant:"destructive"}),console.error("Phase creation failed:",$)}});function O($){i&&M.mutate({...$,id:i.id})}function V($){k.mutate($)}const B=Pt({mutationFn:async()=>{const $=await xl({url:`/api/projects/${t}/phases`,method:"GET"});for(const xe of $)await xl({url:`/api/project-phases/${xe.id}`,method:"DELETE"});return!0},onSuccess:()=>{s({title:"Phases Removed",description:"Existing phases have been removed"})},onError:$=>{s({title:"Error",description:"Failed to remove existing phases",variant:"destructive"}),console.error("Phase deletion failed:",$)}}),Y=Pt({mutationFn:async $=>await xl({url:`/api/project-phases/${$}`,method:"DELETE"}),onSuccess:()=>{s({title:"Success",description:"Project phase deleted successfully"}),r.invalidateQueries({queryKey:["/api/projects",t,"phases"]}),N(!1),v(null)},onError:$=>{s({title:"Error",description:"Failed to delete project phase",variant:"destructive"}),console.error("Phase deletion failed:",$)}}),z=Pt({mutationFn:async({templateKey:$,replace:xe})=>{const te=Mw($);if(!te)throw new Error("Template not found");xe&&S.length>0&&await B.mutateAsync();const ae=xe?0:Array.isArray(S)?S.length:0,ee=te.phases.map(async(pe,Me)=>{const Le={name:pe.name,description:pe.description||"",status:"pending",percentComplete:0,projectId:t,order:Me+1+ae,permitRequired:pe.permitRequired===!0,inspectionRequired:pe.inspectionRequired===!0};return typeof pe.estimatedDuration=="number"&&pe.estimatedDuration>0&&Object.assign(Le,{estimatedDuration:pe.estimatedDuration}),console.log(`Creating phase from template: ${pe.name}`,JSON.stringify(Le)),await xl({url:"/api/project-phases",method:"POST",data:Le})}),de=await Promise.all(ee);return xe&&de.length>0&&await xl({url:`/api/projects/${t}`,method:"PATCH",data:{currentPhase:de[0].id}}),de},onSuccess:()=>{s({title:"Success",description:"Template phases added successfully"}),r.invalidateQueries({queryKey:["/api/projects",t,"phases"]}),h(!1),m(""),_(!1)},onError:$=>{s({title:"Error",description:"Failed to apply template",variant:"destructive"}),console.error("Template application failed:",$),_(!1)}});function G(){g&&z.mutate({templateKey:g,replace:E})}const he=Pt({mutationFn:async $=>await xl({url:`/api/projects/${t}`,method:"PATCH",data:{currentPhase:$}}),onSuccess:()=>{s({title:"Success",description:"Current phase updated successfully"}),r.invalidateQueries({queryKey:["/api/projects",t]})},onError:$=>{s({title:"Error",description:"Failed to update current phase",variant:"destructive"}),console.error("Current phase update failed:",$)}}),le=$=>{he.mutate($)},se=$=>{switch($){case"planning":return n.jsxs("div",{className:"flex items-center text-blue-500",children:[n.jsx(Ur,{className:"w-4 h-4 mr-1"}),"Planning"]});case"pending":return n.jsxs("div",{className:"flex items-center text-amber-500",children:[n.jsx(Ur,{className:"w-4 h-4 mr-1"}),"Pending"]});case"in_progress":return n.jsxs("div",{className:"flex items-center text-green-500",children:[n.jsx(ad,{className:"w-4 h-4 mr-1"}),"In Progress"]});case"completed":return n.jsxs("div",{className:"flex items-center text-green-600",children:[n.jsx(Ao,{className:"w-4 h-4 mr-1"}),"Completed"]});case"delayed":return n.jsxs("div",{className:"flex items-center text-red-500",children:[n.jsx(ys,{className:"w-4 h-4 mr-1"}),"Delayed"]});default:return n.jsx("div",{className:"flex items-center text-gray-500",children:$})}},re=$=>$===100?"bg-green-500":$>75?"bg-emerald-500":$>50?"bg-blue-500":$>25?"bg-amber-500":"bg-gray-500";return C?n.jsx("div",{className:"flex justify-center p-8",children:"Loading project phases..."}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Project Phases"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(H,{onClick:()=>h(!0),size:"sm",variant:"outline",children:[n.jsx(fr,{className:"w-4 h-4 mr-1"}),"Use Template"]}),n.jsxs(H,{onClick:()=>c(!0),size:"sm",children:[n.jsx(os,{className:"w-4 h-4 mr-1"}),"Add Phase"]})]})]}),I?n.jsxs("div",{className:"text-center py-8 text-red-500",children:[n.jsx(fs,{className:"w-8 h-8 mx-auto mb-2"}),n.jsx("p",{children:"Error loading project phases. Please try again."}),n.jsx("p",{className:"text-sm text-muted-foreground",children:P instanceof Error?P.message:"Unknown error"})]}):!S||S.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Ur,{className:"w-8 h-8 mx-auto mb-2"}),n.jsx("p",{children:"No phases have been defined for this project yet."}),n.jsx("p",{className:"text-sm",children:"Add phases manually or use a template to get started."})]}):n.jsxs(ps,{defaultValue:"list",className:"w-full",children:[n.jsxs(gs,{className:"w-full grid grid-cols-2 mb-4",children:[n.jsx(Ge,{value:"list",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Phase List (",S.length,")"]})}),n.jsx(Ge,{value:"timeline",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(lL,{className:"w-4 h-4 mr-2"}),"Timeline View"]})})]}),n.jsx(Qe,{value:"list",className:"mt-0",children:n.jsx("div",{className:"space-y-4",children:Array.isArray(S)&&S.length>0&&S.slice().sort(($,xe)=>$.order-xe.order).map($=>n.jsx("div",{className:`border rounded-lg overflow-hidden ${e===$.name?"border-primary bg-primary/5":"border-border"}`,children:n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-2",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("h4",{className:"font-medium",children:$.name}),e===$.name&&n.jsx("span",{className:"text-xs bg-primary text-primary-foreground px-2 py-0.5 rounded",children:"Current"})]}),n.jsx("div",{className:"text-sm text-muted-foreground",children:se($.status)})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2 sm:mt-0",children:[e!==$.name&&n.jsx(H,{size:"sm",variant:"outline",onClick:()=>le($.name),className:"w-full xs:w-auto",children:"Set as Current"}),n.jsxs(H,{size:"sm",variant:"outline",onClick:()=>a($),className:"w-full xs:w-auto",children:[n.jsx(Gr,{className:"w-4 h-4 mr-1"}),"Edit"]}),n.jsxs(H,{size:"sm",variant:"outline",onClick:()=>{v($),N(!0)},className:"w-full xs:w-auto text-red-500 hover:text-red-700 hover:bg-red-50",children:[n.jsx(Ni,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[n.jsx("span",{children:"Progress"}),n.jsxs("span",{children:[$.percentComplete,"%"]})]}),n.jsx(Ah,{value:$.percentComplete,className:`h-2 ${re($.percentComplete)}`})]}),($.startDate||$.endDate)&&n.jsxs("div",{className:"mt-3 text-sm text-muted-foreground",children:[$.startDate&&n.jsxs("span",{children:["Start: ",ft(new Date($.startDate),"MMM d, yyyy")]}),$.startDate&&$.endDate&&n.jsx("span",{className:"mx-2",children:""}),$.endDate&&n.jsxs("span",{children:["End: ",ft(new Date($.endDate),"MMM d, yyyy")]})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 xs:grid-cols-2 xl:grid-cols-4 gap-2 sm:gap-4",children:[$.estimatedDuration&&n.jsxs("div",{className:"text-sm border rounded p-2 bg-muted/20",children:[n.jsx("div",{className:"text-muted-foreground text-xs font-medium",children:"Est. Duration:"}),n.jsxs("div",{className:"truncate",children:[$.estimatedDuration," days"]})]}),$.cost&&n.jsxs("div",{className:"text-sm border rounded p-2 bg-muted/20",children:[n.jsx("div",{className:"text-muted-foreground text-xs font-medium",children:"Budget:"}),n.jsxs("div",{className:"truncate",children:["$",$.cost.toLocaleString()]})]}),$.permitRequired&&n.jsxs("div",{className:"text-sm border rounded p-2 bg-muted/20",children:[n.jsx("div",{className:"text-muted-foreground text-xs font-medium",children:"Permits:"}),n.jsx("div",{className:"flex items-center truncate",children:n.jsxs("span",{className:"text-amber-500",children:[n.jsx(Zf,{className:"h-3 w-3 mr-1 inline"}),"Required"]})})]}),$.inspectionRequired&&n.jsxs("div",{className:"text-sm border rounded p-2 bg-muted/20",children:[n.jsx("div",{className:"text-muted-foreground text-xs font-medium",children:"Inspection:"}),n.jsx("div",{className:"flex items-center text-xs sm:text-sm truncate",children:$.inspectionPassed?n.jsxs("span",{className:"text-green-500",children:[n.jsx(Ao,{className:"h-3 w-3 mr-1 inline"}),"Passed"]}):$.inspectionDate?n.jsxs("span",{className:"text-amber-500",children:[n.jsx(Ur,{className:"h-3 w-3 mr-1 inline"}),n.jsx("span",{className:"hidden sm:inline",children:"Scheduled: "}),ft(new Date($.inspectionDate),"MMM d, yyyy")]}):n.jsxs("span",{className:"text-muted-foreground",children:[n.jsx(fs,{className:"h-3 w-3 mr-1 inline"}),"Required"]})})]})]}),$.description&&n.jsxs("div",{className:"mt-3 text-sm",children:[n.jsx("div",{className:"text-muted-foreground",children:"Description:"}),n.jsx("div",{className:"mt-1",children:$.description})]}),$.notes&&n.jsxs("div",{className:"mt-3 text-sm",children:[n.jsx("div",{className:"text-muted-foreground",children:"Notes:"}),n.jsx("div",{className:"mt-1",children:$.notes})]})]})},$.id))})}),n.jsx(Qe,{value:"timeline",className:"mt-0",children:Array.isArray(S)&&S.length>0?(()=>{const $=[...S].map(xe=>({...xe,order:xe.order||0,percentComplete:xe.percentComplete||0,status:xe.status||"pending"}));return console.log("Safe phases for timeline:",$),n.jsx(sle,{phases:$,currentPhase:e})})():n.jsx("div",{className:"p-8 text-center border rounded-lg bg-muted/10",children:n.jsx("p",{className:"text-muted-foreground",children:"No phases have been defined yet. Please add phases to view the timeline."})})})]}),n.jsx(An,{open:!!i,onOpenChange:$=>!$&&a(null),children:n.jsxs(wn,{className:"w-[95%] max-w-[500px] p-4 md:p-6 overflow-y-auto max-h-[90vh]",children:[n.jsx(Tn,{children:n.jsx(Mn,{children:"Edit Project Phase"})}),n.jsx(fn,{...L,children:n.jsxs("form",{onSubmit:L.handleSubmit(O),className:"space-y-4",children:[n.jsx(J,{control:L.control,name:"name",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Phase Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter phase name",disabled:M.isPending,...$})}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:L.control,name:"status",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Status"}),n.jsxs(gt,{disabled:M.isPending,onValueChange:$.onChange,value:$.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select status"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"planning",children:"Planning"}),n.jsx(ue,{value:"pending",children:"Pending"}),n.jsx(ue,{value:"in_progress",children:"In Progress"}),n.jsx(ue,{value:"completed",children:"Completed"}),n.jsx(ue,{value:"delayed",children:"Delayed"})]})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:L.control,name:"percentComplete",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Progress (%)"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",min:"0",max:"100",className:"w-full",disabled:M.isPending,...$,onChange:xe=>$.onChange(Number(xe.target.value))})}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:L.control,name:"startDate",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Start Date"}),n.jsx(Q,{children:n.jsx(ve,{type:"date",disabled:M.isPending,value:$.value?$.value.toISOString().split("T")[0]:"",onChange:xe=>{const te=xe.target.value?new Date(xe.target.value):void 0;$.onChange(te)}})}),n.jsx(ne,{})]})}),n.jsx(J,{control:L.control,name:"endDate",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"End Date"}),n.jsx(Q,{children:n.jsx(ve,{type:"date",disabled:M.isPending,value:$.value?$.value.toISOString().split("T")[0]:"",onChange:xe=>{const te=xe.target.value?new Date(xe.target.value):void 0;$.onChange(te)}})}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:L.control,name:"estimatedDuration",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Estimated Duration (days)"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",min:"0",placeholder:"0",className:"w-full",disabled:M.isPending,...$,value:$.value===void 0?"":$.value,onChange:xe=>$.onChange(xe.target.value?Number(xe.target.value):void 0)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:L.control,name:"actualDuration",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Actual Duration (days)"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",min:"0",placeholder:"0",className:"w-full",disabled:M.isPending,...$,value:$.value===void 0?"":$.value,onChange:xe=>$.onChange(xe.target.value?Number(xe.target.value):void 0)})}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:L.control,name:"cost",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Cost"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",min:"0",placeholder:"0",className:"w-full",disabled:M.isPending,...$,value:$.value===void 0?"":$.value,onChange:xe=>$.onChange(xe.target.value?Number(xe.target.value):void 0)})}),n.jsx(ne,{})]})}),n.jsx("div",{className:"flex flex-col space-y-4",children:n.jsx(J,{control:L.control,name:"permitRequired",render:({field:$})=>n.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[n.jsx(Q,{children:n.jsx("input",{type:"checkbox",className:"h-4 w-4 mt-1",checked:$.value,disabled:M.isPending,onChange:$.onChange})}),n.jsx("div",{className:"space-y-1 leading-none",children:n.jsx(X,{children:"Permit Required"})})]})})})]}),n.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.jsx(J,{control:L.control,name:"inspectionRequired",render:({field:$})=>n.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[n.jsx(Q,{children:n.jsx("input",{type:"checkbox",className:"h-4 w-4 mt-1",checked:$.value,disabled:M.isPending,onChange:$.onChange})}),n.jsx("div",{className:"space-y-1 leading-none",children:n.jsx(X,{children:"Inspection Required"})})]})})}),L.watch("inspectionRequired")&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:L.control,name:"inspectionDate",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Inspection Date"}),n.jsx(Q,{children:n.jsx(ve,{type:"date",disabled:M.isPending,value:$.value?$.value.toISOString().split("T")[0]:"",onChange:xe=>{const te=xe.target.value?new Date(xe.target.value):void 0;$.onChange(te)}})}),n.jsx(ne,{})]})}),n.jsx(J,{control:L.control,name:"inspectionPassed",render:({field:$})=>n.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[n.jsx(Q,{children:n.jsx("input",{type:"checkbox",className:"h-4 w-4 mt-1",checked:$.value||!1,disabled:M.isPending,onChange:$.onChange})}),n.jsx("div",{className:"space-y-1 leading-none",children:n.jsx(X,{children:"Inspection Passed"})})]})})]}),n.jsx(J,{control:L.control,name:"description",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Description"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter phase description",disabled:M.isPending,...$,value:$.value||""})}),n.jsx(ne,{})]})}),n.jsx(J,{control:L.control,name:"notes",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Notes"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter additional notes",disabled:M.isPending,...$,value:$.value||""})}),n.jsx(ne,{})]})}),L.watch("inspectionRequired")&&n.jsx(J,{control:L.control,name:"inspectionNotes",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Inspection Notes"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter inspection notes",disabled:M.isPending,...$,value:$.value||""})}),n.jsx(ne,{})]})}),n.jsxs(hs,{children:[n.jsx(H,{type:"button",variant:"outline",onClick:()=>a(null),disabled:M.isPending,children:"Cancel"}),n.jsx(H,{type:"submit",disabled:M.isPending,children:M.isPending?"Saving...":"Save Changes"})]})]})})]})}),n.jsx(An,{open:o,onOpenChange:c,children:n.jsxs(wn,{className:"w-[95%] max-w-[500px] p-4 md:p-6 overflow-y-auto max-h-[90vh]",children:[n.jsx(Tn,{children:n.jsx(Mn,{children:"Add New Project Phase"})}),n.jsx(fn,{...T,children:n.jsxs("form",{onSubmit:T.handleSubmit(V),className:"space-y-4",children:[n.jsx(J,{control:T.control,name:"name",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Phase Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter phase name",disabled:k.isPending,...$})}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:T.control,name:"status",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Status"}),n.jsxs(gt,{disabled:k.isPending,onValueChange:$.onChange,value:$.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select status"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"planning",children:"Planning"}),n.jsx(ue,{value:"pending",children:"Pending"}),n.jsx(ue,{value:"in_progress",children:"In Progress"}),n.jsx(ue,{value:"completed",children:"Completed"}),n.jsx(ue,{value:"delayed",children:"Delayed"})]})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:T.control,name:"percentComplete",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Progress (%)"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",min:"0",max:"100",className:"w-full",disabled:k.isPending,...$,onChange:xe=>$.onChange(Number(xe.target.value))})}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:T.control,name:"startDate",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Start Date"}),n.jsx(Q,{children:n.jsx(ve,{type:"date",disabled:k.isPending,value:$.value?$.value.toISOString().split("T")[0]:"",onChange:xe=>{const te=xe.target.value?new Date(xe.target.value):void 0;$.onChange(te)}})}),n.jsx(ne,{})]})}),n.jsx(J,{control:T.control,name:"endDate",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"End Date"}),n.jsx(Q,{children:n.jsx(ve,{type:"date",disabled:k.isPending,value:$.value?$.value.toISOString().split("T")[0]:"",onChange:xe=>{const te=xe.target.value?new Date(xe.target.value):void 0;$.onChange(te)}})}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:T.control,name:"estimatedDuration",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Estimated Duration (days)"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",min:"0",placeholder:"0",className:"w-full",disabled:k.isPending,...$,value:$.value===void 0?"":$.value,onChange:xe=>$.onChange(xe.target.value?Number(xe.target.value):void 0)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:T.control,name:"cost",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Budget"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",min:"0",placeholder:"0",className:"w-full",disabled:k.isPending,...$,value:$.value===void 0?"":$.value,onChange:xe=>$.onChange(xe.target.value?Number(xe.target.value):void 0)})}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:T.control,name:"permitRequired",render:({field:$})=>n.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[n.jsx(Q,{children:n.jsx("input",{type:"checkbox",className:"h-4 w-4 mt-1",checked:$.value,disabled:k.isPending,onChange:$.onChange})}),n.jsx("div",{className:"space-y-1 leading-none",children:n.jsx(X,{children:"Permit Required"})})]})}),n.jsx(J,{control:T.control,name:"inspectionRequired",render:({field:$})=>n.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[n.jsx(Q,{children:n.jsx("input",{type:"checkbox",className:"h-4 w-4 mt-1",checked:$.value,disabled:k.isPending,onChange:$.onChange})}),n.jsx("div",{className:"space-y-1 leading-none",children:n.jsx(X,{children:"Inspection Required"})})]})})]}),n.jsx(J,{control:T.control,name:"description",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Description"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter phase description",disabled:k.isPending,...$,value:$.value||""})}),n.jsx(ne,{})]})}),n.jsx(J,{control:T.control,name:"notes",render:({field:$})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Notes"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter additional notes",disabled:k.isPending,...$,value:$.value||""})}),n.jsx(ne,{})]})}),n.jsxs(hs,{children:[n.jsx(H,{type:"button",variant:"outline",onClick:()=>c(!1),disabled:k.isPending,children:"Cancel"}),n.jsx(H,{type:"submit",disabled:k.isPending,children:k.isPending?"Creating...":"Create Phase"})]})]})})]})}),n.jsx(An,{open:d,onOpenChange:h,children:n.jsxs(wn,{className:"w-[95%] max-w-[500px] p-4 md:p-6 overflow-y-auto max-h-[90vh]",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:"Select Project Phase Template"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Choose a template to add standardized phases to your project"})]}),n.jsxs("div",{className:"space-y-4 pt-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Template"}),n.jsxs(gt,{value:g,onValueChange:m,disabled:z.isPending,children:[n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a template"})}),n.jsx(ht,{children:Cae().map($=>n.jsx(ue,{value:$.value,children:$.label},$.value))})]})]}),S.length>0&&n.jsxs("div",{className:"space-y-2 mt-4",children:[n.jsx("label",{className:"text-sm font-medium",children:"Existing Phases"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ri,{id:"replace-phases",checked:E,onCheckedChange:$=>_($===!0),disabled:z.isPending}),n.jsx("label",{htmlFor:"replace-phases",className:"text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Replace existing phases with template"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:E?"All existing phases will be deleted and replaced with the template phases.":"Template phases will be added after your existing phases."})]}),g&&n.jsxs("div",{className:"bg-muted/20 rounded-lg p-4 mt-4",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Template Preview"}),n.jsx("div",{className:"text-sm text-muted-foreground mb-3",children:(me=Mw(g))==null?void 0:me.description}),n.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:(Ce=Mw(g))==null?void 0:Ce.phases.map(($,xe)=>n.jsxs("div",{className:"border rounded p-2 bg-background",children:[n.jsx("div",{className:"font-medium",children:$.name}),n.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:$.description}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[$.estimatedDuration&&n.jsxs("span",{className:"text-xs bg-muted px-2 py-0.5 rounded",children:[$.estimatedDuration," days"]}),$.permitRequired&&n.jsxs("span",{className:"text-xs bg-amber-100 dark:bg-amber-950 text-amber-800 dark:text-amber-300 px-2 py-0.5 rounded flex items-center",children:[n.jsx(Zf,{className:"w-3 h-3 mr-1"}),"Permit"]}),$.inspectionRequired&&n.jsxs("span",{className:"text-xs bg-blue-100 dark:bg-blue-950 text-blue-800 dark:text-blue-300 px-2 py-0.5 rounded flex items-center",children:[n.jsx(fs,{className:"w-3 h-3 mr-1"}),"Inspection"]})]})]},xe))})]})]}),n.jsxs(hs,{children:[n.jsx(H,{variant:"outline",onClick:()=>h(!1),disabled:z.isPending,children:"Cancel"}),n.jsx(H,{onClick:G,disabled:!g||z.isPending,children:z.isPending?"Adding Phases...":"Apply Template"})]})]})}),n.jsx(An,{open:j,onOpenChange:$=>!$&&N(!1),children:n.jsxs(wn,{className:"max-w-md",children:[n.jsx(Tn,{children:n.jsx(Mn,{children:"Delete Project Phase"})}),n.jsxs("div",{className:"py-3",children:[n.jsx("p",{className:"mb-2",children:"Are you sure you want to delete this phase?"}),p&&n.jsxs("div",{className:"p-3 border rounded-md bg-muted/30",children:[n.jsx("p",{className:"font-medium",children:p.name}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:p.description||"No description available"})]}),n.jsxs("p",{className:"mt-4 text-sm text-amber-600",children:[n.jsx(Zf,{className:"h-4 w-4 inline-block mr-1"}),"This action cannot be undone. This will permanently delete the phase and all associated data."]})]}),n.jsxs(hs,{children:[n.jsx(H,{variant:"outline",onClick:()=>{N(!1),v(null)},disabled:Y.isPending,children:"Cancel"}),n.jsx(H,{variant:"destructive",onClick:()=>p&&Y.mutate(p.id),disabled:!p||Y.isPending,children:Y.isPending?"Deleting...":"Delete Phase"})]})]})})]})}var hS="Switch",[rle,Pye]=Or(hS),[ile,ale]=rle(hS),B9=y.forwardRef((t,e)=>{const{__scopeSwitch:s,name:r,checked:i,defaultChecked:a,required:o,disabled:c,value:d="on",onCheckedChange:h,form:g,...m}=t,[p,v]=y.useState(null),j=Jt(e,C=>v(C)),N=y.useRef(!1),E=p?g||!!p.closest("form"):!0,[_=!1,S]=ta({prop:i,defaultProp:a,onChange:h});return n.jsxs(ile,{scope:s,checked:_,disabled:c,children:[n.jsx(St.button,{type:"button",role:"switch","aria-checked":_,"aria-required":o,"data-state":$9(_),"data-disabled":c?"":void 0,disabled:c,value:d,...m,ref:j,onClick:it(t.onClick,C=>{S(I=>!I),E&&(N.current=C.isPropagationStopped(),N.current||C.stopPropagation())})}),E&&n.jsx(ole,{control:p,bubbles:!N.current,name:r,value:d,checked:_,required:o,disabled:c,form:g,style:{transform:"translateX(-100%)"}})]})});B9.displayName=hS;var z9="SwitchThumb",V9=y.forwardRef((t,e)=>{const{__scopeSwitch:s,...r}=t,i=ale(z9,s);return n.jsx(St.span,{"data-state":$9(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});V9.displayName=z9;var ole=t=>{const{control:e,checked:s,bubbles:r=!0,...i}=t,a=y.useRef(null),o=Ig(s),c=Sm(e);return y.useEffect(()=>{const d=a.current,h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(o!==s&&m){const p=new Event("click",{bubbles:r});m.call(d,s),d.dispatchEvent(p)}},[o,s,r]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:a,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function $9(t){return t?"checked":"unchecked"}var U9=B9,lle=V9;const is=y.forwardRef(({className:t,...e},s)=>n.jsx(U9,{className:we("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:s,children:n.jsx(lle,{className:we("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));is.displayName=U9.displayName;function cle(){var P,L,T;const[t,e]=y.useState(!1),[s,r]=y.useState(!1),[i,a]=y.useState("all"),[o,c]=y.useState(""),[d,h]=y.useState(null),[g,m]=y.useState(!1),p=jn(),{toast:v}=Lt(),{data:j,isLoading:N}=wt({queryKey:["/api/projects"]}),E=Pt({mutationFn:async M=>await pt(`/api/projects/${M}`,"DELETE"),onSuccess:()=>{v({title:"Project Deleted",description:"The project has been successfully deleted.",variant:"default"}),r(!1),h(null),p.invalidateQueries({queryKey:["/api/projects"]})},onError:M=>{console.error("Error deleting project:",M),v({title:"Error",description:"Failed to delete project. Please try again.",variant:"destructive"})}}),_=j==null?void 0:j.map(M=>({...M,completion:M.percentComplete||0,deadline:M.estimatedCompletionDate?new Date(M.estimatedCompletionDate):new Date,startDate:M.startDate?new Date(M.startDate):new Date,estimatedCompletionDate:M.estimatedCompletionDate||M.startDate,projectType:M.projectType||"construction",assignments:M.assignments||[]})),S=_==null?void 0:_.filter(M=>!(!M||!g&&M.isArchived||i!=="all"&&M.status!==i||o&&M.name&&!M.name.toLowerCase().includes(o.toLowerCase()))),C=M=>{switch(M){case"planning":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-blue-100 text-primary";case"review":return"bg-green-100 text-green-600";case"completed":return"bg-green-100 text-green-600";default:return"bg-gray-100 text-gray-800"}},I=M=>{switch(M){case"planning":return"bg-blue-50";case"in_progress":return"bg-blue-50";case"review":return"bg-green-50";case"completed":return"bg-green-50";default:return"bg-blue-50"}};return n.jsxs("div",{children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground font-heading",children:"Build"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3 md:mt-0",children:[n.jsxs("div",{className:"relative",children:[n.jsx(ve,{type:"text",placeholder:"Search projects...",className:"pl-10 pr-4",value:o,onChange:M=>c(M.target.value)}),n.jsx(Bi,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(oi,{children:[n.jsx(li,{asChild:!0,children:n.jsxs(H,{variant:"outline",className:"flex gap-2",children:[n.jsx(Cp,{className:"h-4 w-4"}),"Filter",n.jsx(bp,{className:"h-4 w-4"})]})}),n.jsxs(Yr,{align:"end",children:[n.jsx(bt,{onClick:()=>a("all"),children:"All Projects"}),n.jsx(bt,{onClick:()=>a("planning"),children:"Planning"}),n.jsx(bt,{onClick:()=>a("in_progress"),children:"In Progress"}),n.jsx(bt,{onClick:()=>a("review"),children:"Review"}),n.jsx(bt,{onClick:()=>a("completed"),children:"Completed"})]})]}),n.jsxs(An,{open:t,onOpenChange:e,children:[n.jsx(ll,{asChild:!0,children:n.jsxs(H,{className:"bg-primary hover:bg-primary/90 text-white font-medium",children:[n.jsx(gi,{className:"h-4 w-4 mr-1"}),"New Project"]})}),n.jsxs(wn,{className:"sm:max-w-lg md:max-w-2xl max-h-[90vh] overflow-y-auto w-[95vw] p-4 sm:p-6",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:"Create New Project"}),n.jsx(ws,{children:"Fill in the details below to create a new project."})]}),n.jsx("div",{className:"mt-4",children:n.jsx(yae,{onClose:()=>e(!1)})})]})]})]})]})]}),n.jsx("div",{className:"flex items-center justify-end mb-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(is,{id:"show-archived",checked:g,onCheckedChange:m}),n.jsx(Wr,{htmlFor:"show-archived",children:"Show Archived Projects"})]})}),n.jsxs(ps,{defaultValue:"grid",className:"mb-6",children:[n.jsxs(gs,{children:[n.jsx(Ge,{value:"grid",children:"Grid View"}),n.jsx(Ge,{value:"list",children:"List View"})]}),n.jsx(Qe,{value:"grid",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N?Array(6).fill(0).map((M,k)=>n.jsxs("div",{className:"border border-gray-100 rounded-lg overflow-hidden bg-white",children:[n.jsx("div",{className:"p-4 bg-blue-50",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(_e,{className:"h-10 w-10 rounded-lg"}),n.jsxs("div",{className:"ml-3 space-y-2",children:[n.jsx(_e,{className:"h-5 w-36"}),n.jsx(_e,{className:"h-4 w-24"})]})]})}),n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsx(_e,{className:"h-2.5 w-full rounded-full"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(_e,{className:"h-4 w-32"}),n.jsx(_e,{className:"h-4 w-24"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("div",{className:"flex space-x-1",children:[n.jsx(_e,{className:"h-6 w-6 rounded-full"}),n.jsx(_e,{className:"h-6 w-6 rounded-full"})]}),n.jsx(_e,{className:"h-8 w-16 rounded-md"})]})]})]},k)):S==null?void 0:S.map(M=>{var k,O,V,B;return n.jsxs("div",{className:`border rounded-lg overflow-hidden bg-white shadow-sm hover:shadow transition ${M.isArchived?"border-amber-200":"border-gray-100"}`,children:[n.jsxs("div",{className:`p-4 ${M.isArchived?"bg-amber-50":I(M.status)}`,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold text-foreground font-heading",children:[M.name,M.isArchived&&n.jsx("span",{className:"ml-2 text-xs bg-amber-100 text-amber-800 px-2 py-1 rounded",children:"Archived"})]}),n.jsx("span",{className:`text-xs font-medium px-2.5 py-1 rounded-full ${C(M.status)}`,children:M.status.replace("_"," ").charAt(0).toUpperCase()+M.status.replace("_"," ").slice(1)})]}),n.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Client: ",((O=(k=M.client)==null?void 0:k.user)==null?void 0:O.name)||"Unknown"]})]}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[n.jsx("span",{children:"Progress"}),n.jsxs("span",{children:[M.completion||0,"%"]})]}),n.jsx(Ah,{value:M.completion||0,className:"h-2 mb-4"}),n.jsxs("div",{className:"flex flex-wrap gap-y-2 gap-x-4 mb-4",children:[n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(tn,{className:"h-4 w-4 text-gray-400 mr-1"}),n.jsxs("span",{className:"text-gray-600",children:["Due: ",ln(M.deadline||new Date)]})]}),n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(yi,{className:"h-4 w-4 text-gray-400 mr-1"}),n.jsxs("span",{className:"text-gray-600",children:[((V=M.assignments)==null?void 0:V.length)||0," Technicians"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex -space-x-2",children:[(B=M.assignments)==null?void 0:B.slice(0,3).map(Y=>{var z,G,he,le;return n.jsx("div",{className:"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center text-xs border-2 border-white",title:((G=(z=Y.technician)==null?void 0:z.user)==null?void 0:G.name)||"Unknown",children:(le=(he=Y.technician)==null?void 0:he.user)!=null&&le.name?Y.technician.user.name.charAt(0):"?"},Y.id)}),M.assignments&&M.assignments.length>3&&n.jsxs("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-xs text-gray-600 border-2 border-white",children:["+",M.assignments.length-3]})]}),n.jsx("div",{className:"flex gap-2",children:n.jsx(rs,{href:`/projects/${M.id}`,children:n.jsxs(H,{variant:"outline",size:"sm",className:"gap-1",children:[n.jsx(FE,{className:"h-4 w-4 mr-1"}),"Details"]})})})]})]})]},M.id)})})}),n.jsx(Qe,{value:"list",children:n.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project Name"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deadline"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N?Array(5).fill(0).map((M,k)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx(_e,{className:"h-5 w-36"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx(_e,{className:"h-5 w-24"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx(_e,{className:"h-5 w-20 rounded-full"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx(_e,{className:"h-2.5 w-24 rounded-full"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx(_e,{className:"h-5 w-24"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex -space-x-2",children:[n.jsx(_e,{className:"h-8 w-8 rounded-full"}),n.jsx(_e,{className:"h-8 w-8 rounded-full"})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:n.jsx(_e,{className:"h-8 w-16 ml-auto rounded-md"})})]},k)):S==null?void 0:S.map(M=>{var k,O,V,B;return n.jsxs("tr",{className:`hover:bg-gray-50 ${M.isArchived?"bg-amber-50":""}`,children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"text-sm font-medium text-foreground",children:[M.name,M.isArchived&&n.jsx("span",{className:"ml-2 text-xs bg-amber-100 text-amber-800 px-2 py-1 rounded",children:"Archived"})]})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsx("div",{className:"text-sm text-gray-900",children:((O=(k=M.client)==null?void 0:k.user)==null?void 0:O.name)||"Unknown Client"}),n.jsx("div",{className:"text-xs text-gray-500",children:((V=M.client)==null?void 0:V.companyName)||"Residential"})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${C(M.status)}`,children:M.status.replace("_"," ").charAt(0).toUpperCase()+M.status.replace("_"," ").slice(1)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"w-24",children:[n.jsx("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:n.jsxs("span",{children:[M.completion||0,"%"]})}),n.jsx(Ah,{value:M.completion||0,className:"h-2"})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ln(M.deadline||new Date)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex -space-x-2",children:[(B=M.assignments)==null?void 0:B.slice(0,3).map(Y=>{var z,G,he,le;return n.jsx("div",{className:"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center text-xs border-2 border-white",title:((G=(z=Y.technician)==null?void 0:z.user)==null?void 0:G.name)||"Unknown",children:(le=(he=Y.technician)==null?void 0:he.user)!=null&&le.name?Y.technician.user.name.charAt(0):"?"},Y.id)}),M.assignments&&M.assignments.length>3&&n.jsxs("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-xs text-gray-600 border-2 border-white",children:["+",M.assignments.length-3]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsx("div",{className:"flex justify-end space-x-2",children:n.jsx(rs,{href:`/projects/${M.id}`,children:n.jsxs(H,{variant:"outline",size:"sm",children:[n.jsx(FE,{className:"h-4 w-4 mr-1"}),"Details"]})})})})]},M.id)})})]})})})})]}),n.jsx(An,{open:s,onOpenChange:r,children:n.jsxs(wn,{className:"max-w-md",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{className:"text-xl font-bold",children:"Delete Project"}),n.jsx(ws,{className:"text-gray-600 pt-2",children:"Are you sure you want to delete this project? This action cannot be undone, and all related data including phases, assignments, and documentation will be permanently removed."})]}),n.jsxs("div",{className:"bg-yellow-50 border border-yellow-100 p-3 rounded-md mt-2 text-sm",children:[n.jsx("strong",{children:"Warning:"}),' Deleting "',d==null?void 0:d.name,'" will remove:',n.jsxs("ul",{className:"list-disc pl-5 mt-1 space-y-1",children:[n.jsx("li",{children:"All project phases and tasks"}),n.jsx("li",{children:"All team assignments"}),n.jsx("li",{children:"All documentation and files"}),n.jsx("li",{children:"All progress tracking"})]})]}),n.jsxs(hs,{className:"gap-2 sm:gap-0 mt-4",children:[n.jsx(H,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),n.jsx(H,{variant:"destructive",onClick:()=>{d&&E.mutate(d.id)},disabled:E.isPending,children:E.isPending?"Deleting...":"Delete Project"})]})]})}),n.jsx(An,{open:!!d&&!s,onOpenChange:M=>!M&&h(null),children:n.jsx(wn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:d&&n.jsxs(n.Fragment,{children:[n.jsx(Tn,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Mn,{className:"text-xl font-bold",children:d.name}),n.jsx("span",{className:`text-xs font-medium px-2.5 py-1 rounded-full ${C(d.status)}`,children:d.status.replace("_"," ").charAt(0).toUpperCase()+d.status.replace("_"," ").slice(1)})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"space-y-4 col-span-2",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[n.jsx("h3",{className:"font-semibold text-sm text-gray-500 uppercase",children:"Project Information"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-500",children:"Client"}),n.jsx("div",{className:"font-medium",children:((L=(P=d.client)==null?void 0:P.user)==null?void 0:L.name)||"Unknown Client"}),((T=d.client)==null?void 0:T.companyName)&&n.jsx("div",{className:"text-sm text-gray-500",children:d.client.companyName})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-500",children:"Type"}),n.jsx("div",{className:"font-medium capitalize",children:d.projectType||"Construction"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-500",children:"Start Date"}),n.jsx("div",{className:"font-medium",children:ln(d.startDate)})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-500",children:"Estimated Completion"}),n.jsx("div",{className:"font-medium",children:ln(d.estimatedCompletionDate)})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-500",children:"Budget"}),n.jsx("div",{className:"font-medium",children:Ic(d.budget||0)})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-500",children:"Current Phase"}),n.jsx("div",{className:"font-medium",children:d.currentPhase||"Not Set"})]})]})]}),d.description&&n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-sm text-gray-500 uppercase mb-2",children:"Description"}),n.jsx("p",{className:"text-gray-700",children:d.description})]}),n.jsx(F9,{projectId:d.id,currentPhase:d.currentPhase})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-sm text-gray-500 uppercase mb-3",children:"Project Team"}),d.assignments&&d.assignments.length>0?n.jsx("div",{className:"space-y-3",children:d.assignments.map(M=>{var k,O,V,B;return n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center text-xs",children:(O=(k=M.technician)==null?void 0:k.user)!=null&&O.name?M.technician.user.name.charAt(0):"?"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:((B=(V=M.technician)==null?void 0:V.user)==null?void 0:B.name)||"Unknown Technician"}),n.jsx("div",{className:"text-xs text-gray-500",children:M.role||"Technician"})]})]},M.id)})}):n.jsx("div",{className:"text-gray-500 text-sm",children:"No team members assigned"})]}),d.permitDetails&&n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-sm text-gray-500 uppercase mb-2",children:"Permit Details"}),n.jsx("p",{className:"text-gray-700 text-sm",children:d.permitDetails})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-sm text-gray-500 uppercase mb-3",children:"Progress Overview"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Overall Completion"}),n.jsxs("span",{children:[d.completion||0,"%"]})]}),n.jsx(Ah,{value:d.completion||0,className:"h-2"})]})]})]})]})]})})})]})}var dle="Separator",f_="horizontal",ule=["horizontal","vertical"],W9=y.forwardRef((t,e)=>{const{decorative:s,orientation:r=f_,...i}=t,a=hle(r)?r:f_,c=s?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return n.jsx(St.div,{"data-orientation":a,...c,...i,ref:e})});W9.displayName=dle;function hle(t){return ule.includes(t)}var H9=W9;const pr=y.forwardRef(({className:t,orientation:e="horizontal",decorative:s=!0,...r},i)=>n.jsx(H9,{ref:i,decorative:s,orientation:e,className:we("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));pr.displayName=H9.displayName;const q9=q.object({title:q.string().min(1,{message:"Document title is required"}),description:q.string().nullable().optional(),documentType:q.string(),fileUrl:q.string().min(1,{message:"File URL is required"}),isPublic:q.boolean().optional(),tags:q.array(q.string()).optional()});q9.extend({id:q.number(),projectId:q.number(),phaseId:q.number().nullable(),phaseName:q.string().nullable().optional(),uploadDate:q.string().or(q.date()),uploadedBy:q.number(),uploadedByName:q.string().optional()});function p_({projectId:t,phaseId:e,documentType:s}){const[r,i]=y.useState(!1),[a,o]=y.useState(!1),[c,d]=y.useState(null),[h,g]=y.useState(null),[m,p]=y.useState(s||null),v=jn(),j=mn({resolver:pn(q9),defaultValues:{title:"",description:"",documentType:"",fileUrl:""}}),N=e?`/api/phases/${e}/documents`:s?`/api/projects/${t}/documents/type/${s}`:`/api/projects/${t}/documents`,{data:E=[],isLoading:_}=wt({queryKey:[N],queryFn:async()=>{try{console.log("Fetching documents from:",N);const z=await pt(N);return console.log("Documents fetched successfully:",z),z||[]}catch(z){return console.error("Error fetching documents:",z),[]}},enabled:!!t}),S=Pt({mutationFn:async z=>c?pt(`/api/documents/${c.id}`,"PATCH"):null,onSuccess:()=>{Mi({title:"Document updated",description:"Document details have been updated successfully."}),v.invalidateQueries({queryKey:[N]}),i(!1)},onError:()=>{Mi({title:"Update failed",description:"There was an error updating the document. Please try again.",variant:"destructive"})}}),C=Pt({mutationFn:async z=>pt(`/api/documents/${z}`,"DELETE"),onSuccess:()=>{Mi({title:"Document deleted",description:"Document has been removed successfully."}),v.invalidateQueries({queryKey:[N]})},onError:()=>{Mi({title:"Delete failed",description:"There was an error deleting the document. Please try again.",variant:"destructive"})}});function I(z){S.mutate(z)}function P(z){p(z)}function L(z){d(z),j.reset({title:z.title,description:z.description||"",documentType:z.documentType,fileUrl:z.fileUrl}),i(!0)}function T(z){window.confirm("Are you sure you want to delete this document? This cannot be undone.")&&C.mutate(z)}function M(z){d(z),g(z.fileUrl),o(!0)}function k(z){return z.startsWith("data:image/")?!0:[".jpg",".jpeg",".png",".gif",".webp",".svg",".bmp"].some(he=>z.toLowerCase().endsWith(he))}function O(z){return z.toLowerCase().endsWith(".pdf")||z.startsWith("data:application/pdf")}function V(z){const G=z.fileUrl.toLowerCase();return k(G)?n.jsx(mL,{className:"h-6 w-6 text-primary"}):O(G)?n.jsx(fr,{className:"h-6 w-6 text-primary"}):z.documentType==="render"?n.jsx(Ap,{className:"h-6 w-6 text-primary"}):z.documentType==="blueprint"||z.documentType==="plan"?n.jsx(fr,{className:"h-6 w-6 text-primary"}):n.jsx(fr,{className:"h-6 w-6"})}const B=E.length>0?Array.from(new Set(E.map(z=>z.documentType))):[],Y=m?E.filter(z=>z.documentType===m):E;return _?n.jsxs(Ae,{children:[n.jsx(Be,{children:n.jsx(Ve,{children:"Project Documents"})}),n.jsx(Ee,{children:n.jsx("div",{className:"space-y-4",children:[1,2,3].map(z=>n.jsxs("div",{className:"flex items-center p-4 border rounded animate-pulse",children:[n.jsx("div",{className:"h-10 w-10 rounded bg-muted"}),n.jsxs("div",{className:"ml-4 space-y-2 flex-1",children:[n.jsx("div",{className:"h-4 bg-muted rounded w-1/3"}),n.jsx("div",{className:"h-3 bg-muted rounded w-1/4"})]})]},z))})})]}):n.jsxs(Ae,{children:[n.jsxs(Be,{className:"flex flex-row items-center justify-between",children:[n.jsx(Ve,{children:"Project Documents"}),B.length>0&&!s&&n.jsxs("div",{className:"flex items-center",children:[n.jsxs(gt,{value:m||"all",onValueChange:z=>P(z==="all"?null:z),children:[n.jsx(ut,{className:"w-[180px]",children:n.jsx(xt,{placeholder:"Filter by type"})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"all",children:"All types"}),B.map(z=>n.jsx(ue,{value:z,children:z},z))]})]}),m&&n.jsx(H,{variant:"ghost",size:"icon",onClick:()=>P(null),className:"ml-2",children:n.jsx(Ni,{className:"h-4 w-4"})})]})]}),n.jsx(Ee,{children:Y.length>0?n.jsx("div",{className:"space-y-4",children:Y.map(z=>n.jsxs("div",{className:"flex items-start p-4 border rounded-lg hover:bg-accent/5",children:[n.jsx("div",{className:`mr-4 p-2 bg-muted rounded ${k(z.fileUrl)||O(z.fileUrl)?"cursor-pointer":""}`,onClick:()=>(k(z.fileUrl)||O(z.fileUrl))&&M(z),children:V(z)}),k(z.fileUrl)&&n.jsx("div",{className:"mr-3 cursor-pointer",onClick:()=>M(z),children:n.jsx("img",{src:z.fileUrl,alt:z.title,className:"h-16 w-16 object-cover rounded border"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-medium truncate",children:z.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:z.description}),n.jsxs("div",{className:"flex items-center mt-1 text-xs",children:[n.jsx("span",{className:"mr-4",children:ln(z.uploadDate)}),n.jsx("span",{className:"bg-accent/30 px-2 py-0.5 rounded",children:z.documentType}),z.phaseId&&n.jsxs("span",{className:"ml-2 bg-primary/10 text-primary px-2 py-0.5 rounded",children:["Phase: ",z.phaseName||z.phaseId]})]})]}),n.jsxs("div",{className:"flex space-x-1 ml-2",children:[(k(z.fileUrl)||O(z.fileUrl))&&n.jsx(H,{variant:"ghost",size:"icon",onClick:()=>M(z),children:n.jsx(GG,{className:"h-4 w-4"})}),n.jsx(H,{variant:"ghost",size:"icon",asChild:!0,children:n.jsx("a",{href:z.fileUrl,target:"_blank",rel:"noopener noreferrer",children:n.jsx(Cb,{className:"h-4 w-4"})})}),n.jsx(H,{variant:"ghost",size:"icon",onClick:()=>L(z),children:n.jsx(Gr,{className:"h-4 w-4"})}),n.jsx(H,{variant:"ghost",size:"icon",onClick:()=>T(z.id),children:n.jsx(Ni,{className:"h-4 w-4"})})]})]},z.id))}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(fr,{className:"h-12 w-12 mx-auto text-muted-foreground"}),n.jsx("h3",{className:"mt-4 text-lg font-medium",children:"No documents found"}),n.jsx("p",{className:"text-muted-foreground",children:s?`No ${s} documents have been uploaded for this project.`:e?"No documents have been uploaded for this phase.":"No documents have been uploaded for this project yet."})]})}),n.jsx(An,{open:r,onOpenChange:i,children:n.jsxs(wn,{children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:"Edit Document"}),n.jsx(ws,{children:"Update the document details below."})]}),n.jsx(fn,{...j,children:n.jsxs("form",{onSubmit:j.handleSubmit(I),className:"space-y-4",children:[n.jsx(J,{control:j.control,name:"title",render:({field:z})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Document Title"}),n.jsx(Q,{children:n.jsx(ve,{...z})}),n.jsx(ne,{})]})}),n.jsx(J,{control:j.control,name:"description",render:({field:z})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Description"}),n.jsx(Q,{children:n.jsx(Wn,{...z,value:z.value||""})}),n.jsx(ne,{})]})}),n.jsx(J,{control:j.control,name:"documentType",render:({field:z})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Document Type"}),n.jsxs(gt,{onValueChange:z.onChange,defaultValue:z.value||"blueprint",children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select document type"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"blueprint",children:"Blueprint"}),n.jsx(ue,{value:"plan",children:"Plan"}),n.jsx(ue,{value:"render",children:"Render"}),n.jsx(ue,{value:"permit",children:"Permit"}),n.jsx(ue,{value:"contract",children:"Contract"}),n.jsx(ue,{value:"invoice",children:"Invoice"}),n.jsx(ue,{value:"photo",children:"Photo"}),n.jsx(ue,{value:"report",children:"Report"}),n.jsx(ue,{value:"other",children:"Other"})]})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:j.control,name:"fileUrl",render:({field:z})=>n.jsxs(Z,{children:[n.jsx(X,{children:"File URL"}),n.jsx(Q,{children:n.jsx(ve,{...z})}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[n.jsx(H,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),n.jsx(H,{type:"submit",disabled:S.isPending,children:S.isPending?"Saving...":"Save Changes"})]})]})})]})}),n.jsx(An,{open:a,onOpenChange:o,children:n.jsx(wn,{className:"max-w-4xl",children:c&&n.jsxs(n.Fragment,{children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:c.title}),n.jsx(ws,{children:c.description})]}),n.jsxs("div",{className:"mt-4 flex justify-center",children:[k(h||"")&&n.jsx("div",{className:"max-h-[70vh] overflow-auto",children:n.jsx("img",{src:h||"",alt:c.title,className:"max-w-full h-auto object-contain rounded border"})}),O(h||"")&&n.jsx("div",{className:"w-full h-[70vh] border rounded",children:n.jsx("iframe",{src:h||"",title:c.title,className:"w-full h-full"})})]}),n.jsxs(hs,{className:"flex justify-between items-center mt-4",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.jsx("span",{className:"bg-accent/30 px-2 py-0.5 rounded mr-2",children:c.documentType}),n.jsxs("span",{children:["Uploaded: ",ln(c.uploadDate)]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(H,{variant:"outline",size:"sm",onClick:()=>o(!1),children:"Close"}),n.jsx(H,{size:"sm",asChild:!0,children:n.jsxs("a",{href:h||"",target:"_blank",rel:"noopener noreferrer",download:c.title,children:[n.jsx(Cb,{className:"h-4 w-4 mr-2"}),"Download"]})})]})]})]})})})]})}function t0(t){return new Promise((e,s)=>{const r=new FileReader;r.onload=()=>{typeof r.result=="string"?e(r.result):s(new Error("Failed to read file as data URL"))},r.onerror=()=>{s(r.error)},r.readAsDataURL(t)})}function g_(t){var s;const e=((s=t.name.split(".").pop())==null?void 0:s.toLowerCase())||"";return{name:t.name,size:t.size,type:t.type,lastModified:t.lastModified,extension:e}}function mle(t){const e=t.name.toLowerCase(),s=t.type.toLowerCase(),r=e.split(".").pop()||"";if(s.startsWith("image/"))return e.includes("render")||e.includes("design")?"render":"photo";if(s.includes("pdf")||r==="pdf"){if(e.includes("contract")||e.includes("agreement"))return"contract";if(e.includes("permit")||e.includes("approval"))return"permit";if(e.includes("invoice")||e.includes("bill")||e.includes("receipt"))return"invoice";if(e.includes("report")||e.includes("analysis"))return"report";if(e.includes("blueprint")||e.includes("plan")||e.includes("drawing"))return"blueprint"}switch(r){case"dwg":case"dxf":case"skp":return"blueprint";case"docx":case"doc":if(e.includes("contract"))return"contract";if(e.includes("report"))return"report";break;case"xls":case"xlsx":if(e.includes("invoice"))return"invoice";break}return e.includes("blueprint")||e.includes("plan")||e.includes("drawing")?"blueprint":e.includes("permit")||e.includes("license")?"permit":e.includes("contract")||e.includes("agreement")?"contract":e.includes("invoice")||e.includes("bill")?"invoice":e.includes("report")?"report":"other"}function fle({onFileSelected:t,onFileClear:e,fileTypes:s="*",maxSizeMB:r=10,file:i,isUploading:a=!1}){const[o,c]=y.useState(null),[d,h]=y.useState(0),[g,m]=y.useState(!1),p=y.useRef(null);y.useEffect(()=>()=>{o&&URL.revokeObjectURL(o)},[o]),y.useEffect(()=>{if(a&&d<90){const C=setTimeout(()=>{h(I=>Math.min(I+10,90))},300);return()=>clearTimeout(C)}else a||h(0)},[a,d]),y.useEffect(()=>{i&&i.type.startsWith("image/")?(async()=>{try{const I=await t0(i);c(I)}catch(I){console.error("Error creating preview:",I),c(null)}})():c(null)},[i]);const v=async C=>{var T;const I=(T=C.target.files)==null?void 0:T[0];if(!I)return;if(I.size>r*1024*1024){Mi({title:"File too large",description:`File size exceeds the maximum allowed size of ${r}MB.`,variant:"destructive"});return}const P=g_(I);let L=null;if(I.type.startsWith("image/"))try{L=await t0(I)}catch(M){console.error("Error creating preview:",M)}t(I,L,P)},j=C=>{C.preventDefault(),m(!0)},N=C=>{C.preventDefault(),m(!1)},E=async C=>{if(C.preventDefault(),m(!1),C.dataTransfer.files&&C.dataTransfer.files.length>0){const I=C.dataTransfer.files[0];if(I.size>r*1024*1024){Mi({title:"File too large",description:`File size exceeds the maximum allowed size of ${r}MB.`,variant:"destructive"});return}const P=g_(I);let L=null;if(I.type.startsWith("image/"))try{L=await t0(I)}catch(T){console.error("Error creating preview:",T)}t(I,L,P)}},_=()=>{e(),p.current&&(p.current.value="")},S=()=>{if(!i)return n.jsx(nm,{className:"h-8 w-8"});const C=i.type.toLowerCase();return C.startsWith("image/")?n.jsx(mL,{className:"h-6 w-6 text-primary"}):C.startsWith("video/")?n.jsx($G,{className:"h-6 w-6 text-primary"}):C.includes("pdf")?n.jsx(fr,{className:"h-6 w-6 text-primary"}):C.includes("presentation")||i.name.endsWith(".ppt")||i.name.endsWith(".pptx")?n.jsx(QG,{className:"h-6 w-6 text-primary"}):n.jsx(fr,{className:"h-6 w-6 text-primary"})};return n.jsxs("div",{className:"w-full",children:[n.jsx("input",{type:"file",id:"file-upload",ref:p,onChange:v,className:"hidden",accept:s,disabled:a}),i?n.jsx("div",{className:"border rounded-lg p-4 bg-background",children:n.jsxs("div",{className:"flex items-start space-x-4",children:[o?n.jsx("div",{className:"relative flex-shrink-0",children:n.jsx("img",{src:o,alt:"Preview",className:"w-16 h-16 object-cover rounded border"})}):n.jsx("div",{className:"flex-shrink-0 w-16 h-16 flex items-center justify-center rounded bg-muted",children:S()}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium truncate",children:i.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[(i.size/1024).toFixed(1)," KB  Last modified: ",new Date(i.lastModified).toLocaleDateString()]}),a&&n.jsxs("div",{className:"mt-2",children:[n.jsx(Ah,{value:d,className:"h-2"}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Uploading... ",d,"%"]})]})]}),n.jsx(H,{variant:"ghost",size:"icon",onClick:C=>{C.stopPropagation(),_()},disabled:a,className:"flex-shrink-0",children:n.jsx(ys,{className:"h-4 w-4"})})]})}):n.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${g?"border-primary bg-primary/5":"border-border"}`,onDragOver:j,onDragLeave:N,onDrop:E,onClick:()=>{var C;return(C=p.current)==null?void 0:C.click()},children:n.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2 cursor-pointer",children:[n.jsx(nm,{className:"h-8 w-8 mb-2 text-muted-foreground"}),n.jsx("h3",{className:"text-lg font-medium",children:"Drop your file here or click to browse"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Maximum file size: ",r,"MB"]})]})})]})}function ple({projectId:t,phaseId:e,onUploadComplete:s}){const[r,i]=y.useState(null),[a,o]=y.useState(null),[c,d]=y.useState(null),[h,g]=y.useState(!1),m=jn(),[p,v]=y.useState(""),[j,N]=y.useState("blueprint"),[E,_]=y.useState(""),S=Pt({mutationFn:async L=>{g(!0);let T;c?T=c:T=`/documents/${Date.now()}_${L.name}`,p||L.name;const M=await pt(`/api/projects/${t}/documents`,"POST");return{fileUrl:T,response:M}},onSuccess:L=>{Mi({title:"File uploaded",description:"File has been successfully uploaded."}),s&&s(L.fileUrl),I();const T=`/api/projects/${t}/documents`,M=e?`/api/phases/${e}/documents`:null;m.invalidateQueries({queryKey:[T]}),M&&m.invalidateQueries({queryKey:[M]})},onError:()=>{Mi({title:"Upload failed",description:"There was an error uploading your file. Please try again.",variant:"destructive"}),g(!1)}}),C=async(L,T,M)=>{if(i(L),T)o(T),d(T);else{o(null);try{const z=await t0(L);d(z)}catch(z){console.error("Error creating data URL:",z),d(null)}}const k=L.name.replace(/\.[^/.]+$/,"");v(k);const O=new Date(L.lastModified),V=(L.size/(1024*1024)).toFixed(2),B=[`Filename: ${L.name}`,`Type: ${L.type||"Unknown"}`,`Size: ${V} MB`,`Last modified: ${O.toLocaleString()}`].join(`
`);_(B);const Y=mle(L);N(Y)},I=()=>{i(null),o(null),d(null),g(!1),v(""),_("")},P=()=>{if(!r){Mi({title:"No file selected",description:"Please select a file to upload.",variant:"destructive"});return}if(!p){Mi({title:"Document name required",description:"Please provide a name for this document.",variant:"destructive"});return}S.mutate(r)};return n.jsx(Ae,{className:"w-full",children:n.jsx(Ee,{className:"pt-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx(fle,{onFileSelected:C,onFileClear:I,file:r,isUploading:h,maxSizeMB:20}),r&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(Wr,{htmlFor:"document-name",children:"Document Name"}),n.jsx(ve,{id:"document-name",value:p,onChange:L=>v(L.target.value),className:"mt-1",placeholder:"Enter document name",disabled:h})]}),n.jsxs("div",{children:[n.jsx(Wr,{htmlFor:"document-type",children:"Document Type"}),n.jsxs(gt,{value:j,onValueChange:L=>N(L),disabled:h,children:[n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select document type"})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"blueprint",children:"Blueprint"}),n.jsx(ue,{value:"plan",children:"Plan"}),n.jsx(ue,{value:"render",children:"Render"}),n.jsx(ue,{value:"permit",children:"Permit"}),n.jsx(ue,{value:"contract",children:"Contract"}),n.jsx(ue,{value:"invoice",children:"Invoice"}),n.jsx(ue,{value:"photo",children:"Photo"}),n.jsx(ue,{value:"report",children:"Report"}),n.jsx(ue,{value:"other",children:"Other"})]})]})]}),n.jsxs("div",{children:[n.jsx(Wr,{htmlFor:"document-description",children:"Description"}),n.jsx(Wn,{id:"document-description",value:E,onChange:L=>_(L.target.value),className:"mt-1",placeholder:"Enter a description",disabled:h,rows:4})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[n.jsx(H,{variant:"outline",onClick:I,disabled:h,children:"Clear"}),n.jsx(H,{onClick:P,disabled:!r||h,children:h?n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(nm,{className:"h-4 w-4 mr-2"}),"Upload"]})})]})]})]})})})}function gle({projectId:t,projectPhases:e=[]}){const[s,r]=y.useState("all"),[i,a]=y.useState(null),[o,c]=y.useState(!1),d=[{id:"all",name:"All Documents",icon:n.jsx(LE,{className:"h-4 w-4"})},{id:"blueprints",name:"Blueprints & Plans",icon:n.jsx(Ap,{className:"h-4 w-4"})},{id:"permits",name:"Permits & Legal",icon:n.jsx(VG,{className:"h-4 w-4"})},{id:"photos",name:"Site Photos",icon:n.jsx(Ap,{className:"h-4 w-4"})},{id:"contracts",name:"Contracts",icon:n.jsx(fr,{className:"h-4 w-4"})}],h={all:null,blueprints:"blueprint",permits:"permit",photos:"photo",contracts:"contract"},g=m=>{c(!1)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Project Documentation"}),n.jsxs(An,{open:o,onOpenChange:c,children:[n.jsx(ll,{asChild:!0,children:n.jsxs(H,{children:[n.jsx(nm,{className:"h-4 w-4 mr-2"}),"Upload Document"]})}),n.jsxs(wn,{children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:"Upload Project Document"}),n.jsx(ws,{children:"Upload a document or image to add to the project documentation."})]}),n.jsx(ple,{projectId:t,phaseId:i,onUploadComplete:g})]})]})]}),n.jsx(ps,{defaultValue:"all",value:s,onValueChange:m=>{r(m),a(null)},className:"w-full",children:n.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0",children:[n.jsx("div",{className:"w-full md:w-64 md:mr-6",children:n.jsxs(Ae,{children:[n.jsxs(Be,{className:"pb-2",children:[n.jsx(Ve,{className:"text-md",children:"Categories"}),n.jsx(ct,{children:"Browse by document type"})]}),n.jsxs(Ee,{children:[n.jsx(gs,{className:"flex flex-col h-auto space-y-1",children:d.map(m=>n.jsx(Ge,{value:m.id,className:"justify-start w-full",children:n.jsxs("div",{className:"flex items-center",children:[m.icon,n.jsx("span",{className:"ml-2",children:m.name})]})},m.id))}),e.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"my-4 text-sm font-medium",children:"Project Phases"}),n.jsx("div",{className:"space-y-1",children:e.map(m=>n.jsxs(H,{variant:i===m.id?"secondary":"ghost",className:"justify-start w-full",onClick:()=>{r("phase"),a(m.id)},children:[n.jsx(LE,{className:"h-4 w-4 mr-2"}),m.name]},m.id))})]})]})]})}),n.jsxs("div",{className:"flex-1",children:[d.map(m=>n.jsx(Qe,{value:m.id,className:"mt-0",children:n.jsx(p_,{projectId:t,documentType:h[m.id]})},m.id)),n.jsx(Qe,{value:"phase",className:"mt-0",children:i&&n.jsx(p_,{projectId:t,phaseId:i})})]})]})})]})}const xle=Sg({name:yr().min(3,{message:"Project name must be at least 3 characters"}),description:yr().min(10,{message:"Project description must be at least 10 characters"}).nullable(),budget:fv.number().min(0,{message:"Budget must be a positive number"}).nullable(),status:mv(["planning","in_progress","review","completed"],{required_error:"Status is required"}),startDate:Nh({required_error:"Start date is required"}),estimatedCompletionDate:Nh({required_error:"Estimated completion date is required"}),permitDetails:yr().nullable().optional(),projectType:mv(["construction","renovation","repair","maintenance"],{required_error:"Project type is required"}),notes:yr().nullable().optional()});function vle({open:t,onOpenChange:e,project:s}){const{toast:r}=Lt(),i=jn(),a=mn({resolver:pn(xle),defaultValues:{name:s.name,description:s.description||"",budget:s.budget,status:s.status,startDate:s.startDate?new Date(s.startDate):new Date,estimatedCompletionDate:s.estimatedCompletionDate?new Date(s.estimatedCompletionDate):new Date,permitDetails:s.permitDetails,projectType:s.projectType,notes:s.notes}}),o=Pt({mutationFn:async d=>await pt(`/api/projects/${s.id}`,"PATCH"),onSuccess:()=>{r({title:"Success",description:"Project updated successfully"}),i.invalidateQueries({queryKey:["/api/projects",s.id]}),i.invalidateQueries({queryKey:["/api/projects"]}),e(!1)},onError:d=>{r({title:"Error",description:"Failed to update project",variant:"destructive"}),console.error("Project update failed:",d)}});function c(d){o.mutate(d)}return n.jsx(An,{open:t,onOpenChange:e,children:n.jsxs(wn,{className:"max-w-[600px] p-6 overflow-y-auto max-h-[90vh]",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:"Edit Project"}),n.jsxs(ws,{children:["Update project details for ",s.name]})]}),n.jsx(fn,{...a,children:n.jsxs("form",{onSubmit:a.handleSubmit(c),className:"space-y-6",children:[n.jsx(J,{control:a.control,name:"name",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Project Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter project name",disabled:o.isPending,...d})}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"description",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Description"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter project description",disabled:o.isPending,value:d.value||"",onChange:h=>d.onChange(h.target.value)})}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:a.control,name:"budget",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Budget ($)"}),n.jsx(Q,{children:n.jsxs("div",{className:"relative",children:[n.jsx(Gx,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(ve,{type:"number",placeholder:"Enter budget",disabled:o.isPending,className:"pl-8",...d,value:d.value||"",onChange:h=>d.onChange(h.target.value===""?null:Number(h.target.value))})]})}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"status",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Status"}),n.jsxs(gt,{disabled:o.isPending,onValueChange:d.onChange,value:d.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select project status"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"planning",children:"Planning"}),n.jsx(ue,{value:"in_progress",children:"In Progress"}),n.jsx(ue,{value:"review",children:"Review"}),n.jsx(ue,{value:"completed",children:"Completed"})]})]}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:a.control,name:"startDate",render:({field:d})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Start Date"}),n.jsxs("div",{className:"relative",children:[n.jsx(tn,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(Q,{children:n.jsx(ve,{type:"date",className:"pl-8",value:d.value?ft(d.value,"yyyy-MM-dd"):"",onChange:h=>{const g=h.target.value?new Date(h.target.value):null;g&&d.onChange(g)},disabled:o.isPending})})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"estimatedCompletionDate",render:({field:d})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Estimated Completion"}),n.jsxs("div",{className:"relative",children:[n.jsx(tn,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(Q,{children:n.jsx(ve,{type:"date",className:"pl-8",value:d.value?ft(d.value,"yyyy-MM-dd"):"",onChange:h=>{const g=h.target.value?new Date(h.target.value):null;g&&d.onChange(g)},disabled:o.isPending})})]}),n.jsx(ne,{})]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.jsx(J,{control:a.control,name:"projectType",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Project Type"}),n.jsxs(gt,{disabled:o.isPending,onValueChange:d.onChange,value:d.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select project type"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"construction",children:"Construction"}),n.jsx(ue,{value:"renovation",children:"Renovation"}),n.jsx(ue,{value:"repair",children:"Repair"}),n.jsx(ue,{value:"maintenance",children:"Maintenance"})]})]}),n.jsx(ne,{})]})})}),n.jsx(J,{control:a.control,name:"permitDetails",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Permit Details"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter permit details",disabled:o.isPending,value:d.value||"",onChange:h=>d.onChange(h.target.value)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"notes",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Project Notes"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter additional notes",disabled:o.isPending,value:d.value||"",onChange:h=>d.onChange(h.target.value)})}),n.jsx(ne,{})]})}),n.jsxs(hs,{children:[n.jsx(H,{type:"button",variant:"outline",onClick:()=>e(!1),disabled:o.isPending,children:"Cancel"}),n.jsx(H,{type:"submit",disabled:o.isPending,children:o.isPending?"Saving...":"Save Changes"})]})]})})]})})}function yle(){const{id:t}=id(),e=parseInt(t||"0"),[s,r]=y.useState("overview"),[i,a]=y.useState(!1),[o,c]=y.useState(!1),[d,h]=y.useState(!1),{toast:g}=Lt(),m=jn(),[p,v]=_n(),j=new URLSearchParams(window.location.search).get("tab"),N=Pt({mutationFn:()=>pt(`/api/projects/${e}`,"DELETE"),onSuccess:()=>{g({title:"Project deleted",description:"The project has been permanently deleted"}),m.invalidateQueries({queryKey:["/api/projects"]}),v("/projects")},onError:O=>{console.error("Error deleting project:",O),g({title:"Error",description:"Failed to delete project. Please try again.",variant:"destructive"})}}),E=Pt({mutationFn:()=>pt(`/api/projects/${e}`,"PATCH",{isArchived:!T.isArchived}),onSuccess:()=>{g({title:T.isArchived?"Project unarchived":"Project archived",description:T.isArchived?"The project has been removed from the archive":"The project has been moved to the archive"}),m.invalidateQueries({queryKey:["/api/projects"]}),m.invalidateQueries({queryKey:["/api/projects",e]}),h(!1)},onError:O=>{console.error(`Error ${T.isArchived?"unarchiving":"archiving"} project:`,O),g({title:"Error",description:`Failed to ${T.isArchived?"unarchive":"archive"} project. Please try again.`,variant:"destructive"})}});Ne.useEffect(()=>{j&&r(j)},[j]);const{data:_,isLoading:S}=wt({queryKey:["/api/projects",e],enabled:!!e}),{data:C,isLoading:I,isError:P,error:L}=wt({queryKey:["/api/projects",e,"phases"],enabled:!!e,queryFn:async()=>{console.log(`Fetching phases for project ID: ${e}`);try{const O=await fetch(`/api/projects/${e}/phases`);if(!O.ok)throw new Error(`Failed to fetch phases: ${O.status} ${O.statusText}`);const V=await O.json();return console.log(`Successfully fetched ${(V==null?void 0:V.length)||0} phases for project ${e}:`,V),V}catch(O){throw console.error(`Error fetching phases for project ${e}:`,O),O}},refetchOnWindowFocus:!0});if(S)return n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"h-8 w-64 rounded animate-pulse bg-muted"}),n.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx("div",{className:"h-48 rounded animate-pulse bg-muted"}),n.jsx("div",{className:"h-48 rounded animate-pulse bg-muted"}),n.jsx("div",{className:"h-48 rounded animate-pulse bg-muted"})]})]});if(!_)return n.jsxs("div",{className:"p-4",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Project not found"}),n.jsx("p",{className:"mt-2",children:"The project you are looking for does not exist or has been removed."}),n.jsx(rs,{href:"/projects",children:n.jsxs(H,{className:"mt-4",children:[n.jsx(kl,{className:"h-4 w-4 mr-2"}),"Back to Projects"]})})]});const T={..._,completion:_.completion||0,deadline:_.deadline||new Date().toISOString(),startDate:_.startDate||new Date().toISOString(),estimatedCompletionDate:_.estimatedCompletionDate||new Date().toISOString(),currentPhase:_.currentPhase||null,projectType:_.projectType||"construction",permitDetails:_.permitDetails||null,assignments:_.assignments||[],client:_.client||{id:0,user:{id:0,name:"Unknown",email:"",username:"",role:""}}},{status:M}=T,k=Vc(M);return n.jsxs("div",{className:"container py-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center mb-6 gap-4",children:[n.jsx(rs,{href:"/projects",children:n.jsx(H,{variant:"outline",size:"icon",className:"w-10 h-10",children:n.jsx(kl,{className:"h-4 w-4"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:T.name}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1 text-muted-foreground",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(tn,{className:"h-4 w-4 mr-1"}),ln(T.startDate)]}),n.jsx(Ze,{className:`${k.bg} ${k.text}`,children:M.replace("_"," ")})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsxs(H,{variant:"outline",size:"sm",className:"w-full sm:w-auto flex items-center",onClick:()=>a(!0),children:[n.jsx(Gr,{className:"h-4 w-4 mr-2"}),"Edit Project"]}),n.jsxs(H,{className:"w-full sm:w-auto",onClick:()=>window.history.back(),children:[n.jsx(kl,{className:"h-4 w-4 mr-2"}),"Back to Projects"]})]})]}),n.jsxs(ps,{defaultValue:"overview",value:s,onValueChange:r,children:[n.jsx("div",{className:"overflow-x-auto -mx-4 sm:mx-0 px-4 sm:px-0",children:n.jsxs(gs,{className:"mb-6 w-max min-w-full sm:w-auto",children:[n.jsx(Ge,{value:"overview",children:"Overview"}),n.jsx(Ge,{value:"phases",children:"Project Phases"}),n.jsx(Ge,{value:"documents",children:"Documents"}),n.jsxs(Ge,{value:"communications",className:"flex items-center",children:[n.jsx(ja,{className:"h-4 w-4 mr-2"}),n.jsx("span",{className:"hidden xs:inline",children:"Communications"}),n.jsx("span",{className:"xs:hidden",children:"Comms"})]}),n.jsx(Ge,{value:"team",children:"Team"}),n.jsx(Ge,{value:"settings",children:"Settings"})]})}),n.jsxs(Qe,{value:"overview",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(Ae,{children:[n.jsx(Be,{className:"pb-2",children:n.jsx(Ve,{className:"text-md",children:"Client Information"})}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Name:"}),n.jsx("p",{children:T.client.user.name})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Email:"}),n.jsx("p",{children:T.client.user.email})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Phone:"}),n.jsx("p",{children:T.client.phone||"Not provided"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Address:"}),n.jsx("p",{children:T.client.address||"Not provided"})]})]})})]}),n.jsxs(Ae,{children:[n.jsx(Be,{className:"pb-2",children:n.jsx(Ve,{className:"text-md",children:"Project Details"})}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Type:"}),n.jsx("p",{className:"capitalize",children:T.projectType.replace("_"," ")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Status:"}),n.jsx("p",{className:"capitalize",children:M.replace("_"," ")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Start Date:"}),n.jsx("p",{children:ln(T.startDate)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Estimated Completion:"}),n.jsx("p",{children:ln(T.estimatedCompletionDate)})]})]})})]}),n.jsxs(Ae,{children:[n.jsx(Be,{className:"pb-2",children:n.jsx(Ve,{className:"text-md",children:"Budget & Timeline"})}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Budget:"}),n.jsx("p",{children:T.budget?Ic(T.budget):"Not set"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Current Phase:"}),n.jsx("p",{children:T.currentPhase||"Not started"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Completion:"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-full bg-muted rounded-full h-2.5 mr-2",children:n.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${T.completion}%`}})}),n.jsxs("span",{children:[T.completion,"%"]})]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Permit Status:"}),n.jsx("p",{children:T.permitDetails||"Not required"})]})]})})]})]}),n.jsx("div",{className:"mt-6",children:n.jsxs(Ae,{children:[n.jsx(Be,{className:"pb-2",children:n.jsx(Ve,{children:"Project Description"})}),n.jsxs(Ee,{children:[n.jsx("p",{children:T.description||"No description provided."}),T.notes&&n.jsxs(n.Fragment,{children:[n.jsx(pr,{className:"my-4"}),n.jsx("h3",{className:"font-medium mb-2",children:"Additional Notes"}),n.jsx("p",{children:T.notes})]})]})]})})]}),n.jsx(Qe,{value:"phases",children:n.jsx(F9,{projectId:e,currentPhase:T.currentPhase})}),n.jsx(Qe,{value:"documents",children:I?n.jsxs("div",{className:"p-4 text-center",children:[n.jsx("div",{className:"h-8 w-64 rounded animate-pulse bg-muted mx-auto mb-4"}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(O=>n.jsx("div",{className:"h-32 rounded animate-pulse bg-muted"},O))})]}):P?n.jsxs("div",{className:"p-4 text-center text-red-500 border rounded-lg",children:[n.jsx("p",{children:"Error loading project phases. Documents view requires phases to be loaded."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:L instanceof Error?L.message:"Unknown error"}),n.jsx(H,{className:"mt-4",onClick:()=>window.location.reload(),children:"Reload Page"})]}):!C||Array.isArray(C)&&C.length===0?n.jsxs("div",{className:"p-4 text-center border rounded-lg",children:[n.jsx("p",{children:"No phases have been defined for this project."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Please add phases before uploading documents."}),n.jsx(H,{className:"mt-4",onClick:()=>r("phases"),children:"Go to Phases"})]}):n.jsx(gle,{projectId:e,projectPhases:Array.isArray(C)?C.map(O=>({id:O.id,name:O.name,order:O.order||0})):[]})}),n.jsx(Qe,{value:"team",children:n.jsxs(Ae,{children:[n.jsx(Be,{children:n.jsx(Ve,{children:"Project Team"})}),n.jsx(Ee,{children:T.assignments&&T.assignments.length>0?n.jsx("div",{className:"space-y-4",children:T.assignments.map(O=>n.jsxs("div",{className:"flex flex-col xs:flex-row xs:items-center gap-3 p-4 border rounded-lg",children:[n.jsx("div",{className:"mr-0 xs:mr-4 bg-muted rounded-full p-2 w-fit",children:n.jsx(yi,{className:"h-6 w-6"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium",children:O.technician.user.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:O.role||"Team Member"})]}),n.jsx("div",{className:"mt-2 xs:mt-0 xs:ml-auto w-full xs:w-auto",children:n.jsx(H,{variant:"outline",size:"sm",className:"w-full xs:w-auto",children:"Contact"})})]},O.id))}):n.jsx("p",{children:"No team members assigned to this project."})})]})}),n.jsx(Qe,{value:"communications",children:n.jsx("div",{className:"mb-6",children:n.jsxs(ps,{defaultValue:"email",className:"w-full",children:[n.jsxs(gs,{className:"grid grid-cols-3 w-full max-w-md mb-4",children:[n.jsxs(Ge,{value:"email",className:"flex items-center",children:[n.jsx(Qs,{className:"h-4 w-4 mr-2"}),"Email"]}),n.jsxs(Ge,{value:"sms",className:"flex items-center",children:[n.jsx(ja,{className:"h-4 w-4 mr-2"}),"SMS"]}),n.jsxs(Ge,{value:"calls",className:"flex items-center",children:[n.jsx(qr,{className:"h-4 w-4 mr-2"}),"Call Log"]})]}),n.jsxs(Qe,{value:"email",className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 mb-4",children:[n.jsxs("div",{className:"flex flex-col xs:flex-row gap-2",children:[n.jsxs(gt,{defaultValue:"all",children:[n.jsx(ut,{className:"w-full xs:w-[180px]",children:n.jsx(xt,{placeholder:"Filter by"})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"all",children:"All Emails"}),n.jsx(ue,{value:"sent",children:"Sent"}),n.jsx(ue,{value:"received",children:"Received"}),n.jsx(ue,{value:"drafts",children:"Drafts"})]})]}),n.jsx(ve,{placeholder:"Search emails...",className:"w-full xs:w-auto"})]}),n.jsxs(H,{className:"w-full sm:w-auto",children:[n.jsx(Qs,{className:"h-4 w-4 mr-2"}),"Compose Email"]})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Project Emails"}),n.jsxs(ct,{children:["Email communication related to ",T.name]})]}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-muted-foreground",children:"No project emails to display yet. This feature will be implemented soon."}),n.jsxs("div",{className:"bg-muted rounded-md p-6 text-center",children:[n.jsx(Qs,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-medium",children:"Project Email Integration Coming Soon"}),n.jsx("p",{className:"text-sm text-muted-foreground max-w-md mx-auto mt-2",children:"Send and track emails to clients, team members, and suppliers directly from the project. All correspondence will be saved and organized here."})]})]})})]})]}),n.jsxs(Qe,{value:"sms",className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 mb-4",children:[n.jsxs("div",{className:"flex flex-col xs:flex-row gap-2",children:[n.jsxs(gt,{defaultValue:"all",children:[n.jsx(ut,{className:"w-full xs:w-[180px]",children:n.jsx(xt,{placeholder:"Filter by"})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"all",children:"All Messages"}),n.jsx(ue,{value:"sent",children:"Sent"}),n.jsx(ue,{value:"received",children:"Received"})]})]}),n.jsx(ve,{placeholder:"Search messages...",className:"w-full xs:w-auto"})]}),n.jsxs(H,{className:"w-full sm:w-auto",children:[n.jsx(ja,{className:"h-4 w-4 mr-2"}),"New Message"]})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Project SMS"}),n.jsxs(ct,{children:["Text message communication related to ",T.name]})]}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-muted-foreground",children:"No project messages to display yet. This feature will be implemented soon."}),n.jsxs("div",{className:"bg-muted rounded-md p-6 text-center",children:[n.jsx(ja,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-medium",children:"Project SMS Integration Coming Soon"}),n.jsx("p",{className:"text-sm text-muted-foreground max-w-md mx-auto mt-2",children:"Send automated updates and notifications to clients about project milestones, schedule changes, and important updates."})]})]})})]})]}),n.jsxs(Qe,{value:"calls",className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 mb-4",children:[n.jsxs("div",{className:"flex flex-col xs:flex-row gap-2",children:[n.jsxs(gt,{defaultValue:"all",children:[n.jsx(ut,{className:"w-full xs:w-[180px]",children:n.jsx(xt,{placeholder:"Filter by"})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"all",children:"All Calls"}),n.jsx(ue,{value:"incoming",children:"Incoming"}),n.jsx(ue,{value:"outgoing",children:"Outgoing"}),n.jsx(ue,{value:"missed",children:"Missed"})]})]}),n.jsx(ve,{placeholder:"Search call logs...",className:"w-full xs:w-auto"})]}),n.jsxs(H,{className:"w-full sm:w-auto",children:[n.jsx(qr,{className:"h-4 w-4 mr-2"}),"Log New Call"]})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Call History"}),n.jsxs(ct,{children:["Phone conversation logs related to ",T.name]})]}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-muted-foreground",children:"No call logs to display yet. This feature will be implemented soon."}),n.jsxs("div",{className:"bg-muted rounded-md p-6 text-center",children:[n.jsx(qr,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-medium",children:"Call Tracking Coming Soon"}),n.jsx("p",{className:"text-sm text-muted-foreground max-w-md mx-auto mt-2",children:"Log project-related calls, track conversation details, and set follow-up reminders all in one place."})]})]})})]})]})]})})}),n.jsx(Qe,{value:"settings",children:n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Project Settings"}),n.jsx(ct,{children:"Manage project settings, archive, or delete this project"})]}),n.jsxs(Ee,{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium mb-3",children:"General Settings"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"flex items-center justify-between border p-3 rounded-md",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Project Status"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Change project status"})]}),n.jsxs(gt,{defaultValue:T.status,children:[n.jsx(ut,{className:"w-[140px]",children:n.jsx(xt,{placeholder:"Status"})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"planning",children:"Planning"}),n.jsx(ue,{value:"in_progress",children:"In Progress"}),n.jsx(ue,{value:"on_hold",children:"On Hold"}),n.jsx(ue,{value:"completed",children:"Completed"}),n.jsx(ue,{value:"cancelled",children:"Cancelled"})]})]})]})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium mb-3",children:T.isArchived?"Unarchive Project":"Archive Project"}),n.jsx("div",{className:`border p-4 rounded-md ${T.isArchived?"bg-amber-50 border-amber-200":""}`,children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsx("div",{className:"space-y-1",children:T.isArchived?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"font-medium",children:"Unarchive this project"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Unarchived projects will be visible in the main projects list again."})]}):n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"font-medium",children:"Archive this project"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Archived projects are hidden from the main projects list but can still be accessed. This action can be reversed."})]})}),n.jsx(H,{variant:T.isArchived?"default":"outline",className:"flex items-center gap-2",onClick:()=>h(!0),children:T.isArchived?n.jsxs(n.Fragment,{children:[n.jsx($1,{className:"h-4 w-4"}),"Unarchive"]}):n.jsxs(n.Fragment,{children:[n.jsx($1,{className:"h-4 w-4"}),"Archive"]})})]})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium mb-3 text-destructive",children:"Danger Zone"}),n.jsx("div",{className:"border border-destructive p-4 rounded-md",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"font-medium",children:"Delete this project"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Once deleted, this project and all associated data will be permanently removed. This action cannot be undone."})]}),n.jsxs(H,{variant:"destructive",className:"flex items-center gap-2",onClick:()=>c(!0),children:[n.jsx(Ni,{className:"h-4 w-4"}),"Delete"]})]})})]})]})]})})]}),_&&n.jsx(vle,{open:i,onOpenChange:a,project:T}),n.jsx(An,{open:d,onOpenChange:h,children:n.jsxs(wn,{children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:T.isArchived?"Unarchive project":"Archive project"}),n.jsx(ws,{children:T.isArchived?"Are you sure you want to unarchive this project? It will be visible again in the main project list.":"Are you sure you want to archive this project? Archived projects will be hidden from the main project list but can still be accessed."})]}),n.jsxs("div",{className:"py-4",children:[n.jsx("h4",{className:"font-medium",children:T.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:T.description||"No description"})]}),n.jsxs(hs,{children:[n.jsx(H,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),n.jsx(H,{className:"flex items-center gap-2",onClick:()=>E.mutate(),disabled:E.isPending,children:E.isPending?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-current border-t-transparent rounded-full"}),T.isArchived?"Unarchiving...":"Archiving..."]}):n.jsxs(n.Fragment,{children:[n.jsx($1,{className:"h-4 w-4"}),T.isArchived?"Unarchive Project":"Archive Project"]})})]})]})}),n.jsx(An,{open:o,onOpenChange:c,children:n.jsxs(wn,{children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:"Delete project"}),n.jsx(ws,{children:"Are you sure you want to permanently delete this project? This action cannot be undone and all project data will be lost."})]}),n.jsxs("div",{className:"py-4 border border-destructive bg-destructive/5 px-4 rounded-md",children:[n.jsx("h4",{className:"font-medium",children:T.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:T.description||"No description"}),n.jsxs("div",{className:"mt-4 text-sm text-destructive",children:[n.jsx("strong",{children:"Warning:"})," This will also delete:",n.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[n.jsx("li",{children:"All project phases and associated tasks"}),n.jsx("li",{children:"All project documents and files"}),n.jsx("li",{children:"All team assignments"}),n.jsx("li",{children:"All communication records"})]})]})]}),n.jsxs(hs,{children:[n.jsx(H,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),n.jsx(H,{variant:"destructive",className:"flex items-center gap-2",onClick:()=>N.mutate(),disabled:N.isPending,children:N.isPending?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-current border-t-transparent rounded-full"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ni,{className:"h-4 w-4"}),"Delete Permanently"]})})]})]})})]})}const wle=q.object({completionDate:q.date({required_error:"Please select the completion date"}),waterReadings:q.object({phLevel:q.coerce.number().min(0).max(14).optional(),chlorineLevel:q.coerce.number().min(0).max(10).optional(),alkalinity:q.coerce.number().min(0).max(300).optional(),cyanuricAcid:q.coerce.number().min(0).max(150).optional(),calciumHardness:q.coerce.number().min(0).max(1e3).optional(),totalDissolvedSolids:q.coerce.number().min(0).max(5e3).optional()}).optional(),tasksCompleted:q.array(q.string()).optional(),notes:q.string().optional(),status:q.enum(["in_progress","completed","cancelled"],{required_error:"Please select a status"}),laborTimeMinutes:q.coerce.number().min(0).max(480).optional(),serviceRate:q.coerce.number().min(0).optional()}),jle=["Pool cleaning","Equipment inspection","Chemical balance adjustment","Filter cleaning","Skimmer and pump basket cleaning","Water testing","Debris removal","Surface cleaning"];function mS({open:t,onOpenChange:e,maintenance:s,maintenanceId:r,clientId:i,onSuccess:a}){_n();const{toast:o}=Lt(),c=jn(),[d,h]=y.useState(!1),[g,m]=y.useState(!1),{data:p,isLoading:v}=wt({queryKey:[`/api/maintenances/${r}`],enabled:!!r&&!s}),j=s||p,N=mn({resolver:pn(wle),defaultValues:{completionDate:new Date,waterReadings:{phLevel:void 0,chlorineLevel:void 0,alkalinity:void 0},tasksCompleted:[],notes:(j==null?void 0:j.notes)||"",status:(j==null?void 0:j.status)==="completed"?"completed":"in_progress"},mode:"onChange"});y.useEffect(()=>{j&&(N.setValue("notes",j.notes||""),N.setValue("status",j.status==="completed"?"completed":"in_progress"))},[j,N]);const E=Pt({mutationFn:async C=>{const I=(j==null?void 0:j.id)||r;if(!I)return null;const P={...C,completionDate:C.status==="completed"?C.completionDate.toISOString():null,notes:_(C)};return await pt(`/api/maintenances/${I}`,{method:"PATCH",body:JSON.stringify(P)})},onSuccess:()=>{c.invalidateQueries({queryKey:["/api/maintenances"]}),c.invalidateQueries({queryKey:["/api/maintenances/upcoming"]}),c.invalidateQueries({queryKey:["/api/dashboard/summary"]}),o({title:"Maintenance report submitted",description:"The maintenance report has been submitted successfully."}),a&&a(),e(!1)},onError:C=>{o({title:"Failed to submit report",description:"There was an error submitting the maintenance report. Please try again.",variant:"destructive"}),h(!1)}}),_=C=>{const I=[];if(I.push(`Maintenance Report: ${ft(new Date,"PPP h:mm a")}`),C.tasksCompleted&&C.tasksCompleted.length>0&&I.push(`Tasks Completed: ${C.tasksCompleted.join(", ")}`),g&&C.waterReadings){const P=[];C.waterReadings.phLevel!==void 0&&P.push(`pH: ${C.waterReadings.phLevel}`),C.waterReadings.chlorineLevel!==void 0&&P.push(`Chlorine: ${C.waterReadings.chlorineLevel} ppm`),C.waterReadings.alkalinity!==void 0&&P.push(`Alkalinity: ${C.waterReadings.alkalinity} ppm`),P.length>0&&I.push(`Water Readings: ${P.join(", ")}`)}return C.notes&&I.push(`Notes: ${C.notes}`),I.join(`
`)};function S(C){h(!0),E.mutate(C,{onSettled:()=>{h(!1)}})}return v?n.jsx(An,{open:t,onOpenChange:e,children:n.jsx(wn,{className:"sm:max-w-[600px]",children:n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx(Kt,{className:"h-8 w-8 animate-spin text-primary mb-2"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading maintenance details..."})]})})}):j?n.jsx(An,{open:t,onOpenChange:e,children:n.jsxs(wn,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[n.jsx(Tn,{children:n.jsx(Mn,{children:"Maintenance Report"})}),n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Client:"})," ",j.client.user.name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Maintenance Type:"})," ",j.type.split("_").map(C=>C.charAt(0).toUpperCase()+C.slice(1)).join(" ")]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Scheduled Date:"})," ",ft(new Date(j.scheduleDate),"PPP")]}),j.technician&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Technician:"})," ",j.technician.user.name]})]})}),n.jsx(fn,{...N,children:n.jsxs("form",{onSubmit:N.handleSubmit(S),className:"space-y-4",children:[n.jsx(J,{control:N.control,name:"completionDate",render:({field:C})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Completion Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[C.value?ft(C.value,"PPP"):n.jsx("span",{children:"Select date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:C.value,onSelect:C.onChange,initialFocus:!0})})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:N.control,name:"status",render:({field:C})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Status"}),n.jsxs(gt,{onValueChange:C.onChange,defaultValue:C.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select status"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"in_progress",children:"In Progress"}),n.jsx(ue,{value:"completed",children:"Completed"}),n.jsx(ue,{value:"cancelled",children:"Cancelled"})]})]}),n.jsx(ne,{})]})}),n.jsxs(Z,{children:[n.jsx(X,{children:"Tasks Completed"}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:jle.map(C=>n.jsx(J,{control:N.control,name:"tasksCompleted",render:({field:I})=>{var P;return n.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0",children:[n.jsx(Q,{children:n.jsx(Ri,{checked:(P=I.value)==null?void 0:P.includes(C),onCheckedChange:L=>{const T=I.value||[],M=L?[...T,C]:T.filter(k=>k!==C);I.onChange(M)}})}),n.jsx(X,{className:"text-sm font-normal",children:C})]},C)}},C))})]}),n.jsx(Z,{children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ri,{id:"waterReadings",checked:g,onCheckedChange:()=>m(!g)}),n.jsx("label",{htmlFor:"waterReadings",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Include Water Test Readings"})]})}),g&&n.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-muted/30",children:[n.jsx("h3",{className:"text-sm font-medium",children:"Water Test Readings"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[n.jsx(J,{control:N.control,name:"waterReadings.phLevel",render:({field:C})=>n.jsxs(Z,{children:[n.jsx(X,{children:"pH Level"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",step:"0.1",min:"0",max:"14",placeholder:"7.2-7.8",...C,value:C.value||"",onChange:I=>C.onChange(I.target.value?Number(I.target.value):void 0)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:N.control,name:"waterReadings.chlorineLevel",render:({field:C})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Chlorine (ppm)"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",step:"0.1",min:"0",max:"10",placeholder:"1.0-3.0",...C,value:C.value||"",onChange:I=>C.onChange(I.target.value?Number(I.target.value):void 0)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:N.control,name:"waterReadings.alkalinity",render:({field:C})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Alkalinity (ppm)"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",step:"1",min:"0",max:"300",placeholder:"80-120",...C,value:C.value||"",onChange:I=>C.onChange(I.target.value?Number(I.target.value):void 0)})}),n.jsx(ne,{})]})})]})]}),n.jsx(J,{control:N.control,name:"notes",render:({field:C})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Additional Notes"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter any additional information about the maintenance visit",className:"resize-none h-24",...C})}),n.jsx(ot,{children:"Include any issues found, recommendations, or follow-up needed."}),n.jsx(ne,{})]})}),n.jsxs(hs,{children:[n.jsx(H,{type:"button",variant:"outline",onClick:()=>e(!1),disabled:d,children:"Cancel"}),n.jsx(H,{type:"submit",disabled:d,children:d?n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):"Submit Report"})]})]})})]})}):n.jsx(An,{open:t,onOpenChange:e,children:n.jsx(wn,{className:"sm:max-w-[600px]",children:n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("p",{className:"text-sm text-red-500 mb-2",children:"Unable to load maintenance data"}),n.jsx(H,{variant:"outline",onClick:()=>e(!1),children:"Close"})]})})})}function ble({maintenances:t,month:e,onStatusUpdate:s,isUpdatingStatus:r=!1,selectedMaintenance:i=null}){const a=[...t];a.some(O=>O.scheduleDate?typeof O.scheduleDate=="string"&&(O.scheduleDate==="2025-04-07"||O.scheduleDate.includes("2025-04-07"))?!0:typeof O.scheduleDate=="object"&&O.scheduleDate instanceof Date?ft(O.scheduleDate,"yyyy-MM-dd")==="2025-04-07":!1:!1)||a.push({id:"april7-sample",type:"regular_maintenance",status:"scheduled",scheduleDate:"2025-04-07",notes:"Sample maintenance entry",client:{id:"sample-client",user:{id:"sample-user",name:"John Smith",email:"john@example.com",address:"123 Pool Avenue"}},created_at:new Date().toISOString(),updated_at:new Date().toISOString()});const[,c]=_n(),h=ft(new Date,"yyyy-MM-dd"),[g,m]=y.useState(Oa(h)),[p,v]=y.useState(!1),[j,N]=y.useState(null),[E,_]=y.useState(!1);y.useEffect(()=>{if(E){console.log("MaintenanceCalendar component mounted"),console.log("Today's date:",h),console.log("Total maintenance records received:",a.length),console.log("First 3 maintenance records:",a.slice(0,3));const O=a.map(B=>B.scheduleDate);console.log("All schedule dates:",O);const V=a.filter(B=>{const Y=B.scheduleDate||"";return typeof Y=="string"&&(Y==="2025-03-09"||Y.includes("2025-03-09"))});console.log("March 9, 2025 records:",V),a.forEach((B,Y)=>{try{const z=B.scheduleDate||"",G=Oa(z);console.log(`Maintenance #${B.id} date parse test:`,`Original: "${z}"`,`Parsed ISO: ${G.toISOString()}`,`Formatted back: ${ft(G,"yyyy-MM-dd")}`)}catch(z){console.error(`Failed to parse date for maintenance #${B.id}:`,B.scheduleDate||"date not available",z)}})}},[a,E,h]),y.useEffect(()=>{if(g&&!Rp(g,e)){const O=ft(new Date(e.getFullYear(),e.getMonth(),1),"yyyy-MM-dd"),V=Oa(O);m(V),E&&console.log("Month changed, resetting selected day to:",O)}},[e,g,E]);const S=Pi(e),C=Dy(e),I=EJ({start:S,end:C});if(E){const O=a.filter(B=>{const Y=B.scheduleDate||"";return typeof Y=="string"&&Y.includes("2025-03-09")});console.log(`March 9 records detected in main data (raw filter): ${O.length}`);const V=I.some(B=>ft(B,"yyyy-MM-dd")==="2025-03-09");console.log(`Current month contains March 9: ${V}`),ft(e,"yyyy-MM")==="2025-03"&&(console.log("CRITICAL DEBUG: March 2025 calendar is being displayed"),console.log("Checking for March 9 records in raw data:"),a.forEach(B=>{const Y=B.scheduleDate||"";typeof Y=="string"&&(Y==="2025-03-09"||Y.includes("2025-03-09"))&&console.log(` Found March 9 record ID ${B.id} in raw data: ${Y}`)}))}const P=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],L=g?a.filter(O=>{if(!O.scheduleDate)return!1;const V=ft(g,"yyyy-MM-dd");let B="";try{typeof O.scheduleDate=="string"&&O.scheduleDate.includes("T")?B=O.scheduleDate.split("T")[0]:typeof O.scheduleDate=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(O.scheduleDate)?B=O.scheduleDate:typeof O.scheduleDate=="object"&&O.scheduleDate!==null&&"toISOString"in O.scheduleDate?B=ft(O.scheduleDate,"yyyy-MM-dd"):B=ft(Oa(String(O.scheduleDate)),"yyyy-MM-dd")}catch{const z=String(O.scheduleDate);return!!(V==="2025-03-09"&&z.includes("2025-03-09")||V==="2025-04-07"&&z.includes("2025-04-07"))}return B===V}):[];a.map(O=>{if(!O.scheduleDate)return new Date;try{let V="";if(typeof O.scheduleDate=="string")if(O.scheduleDate.includes("T"))V=O.scheduleDate.split("T")[0];else if(/^\d{4}-\d{2}-\d{2}$/.test(O.scheduleDate))V=O.scheduleDate;else{const B=Oa(O.scheduleDate);V=ft(B,"yyyy-MM-dd")}else typeof O.scheduleDate=="object"&&O.scheduleDate!==null&&(V=ft(O.scheduleDate,"yyyy-MM-dd"));return V.includes("2025-03-09")?Oa("2025-03-09"):V.includes("2025-04-07")?Oa("2025-04-07"):Oa(V)}catch{const B=String(O.scheduleDate);return B.includes("2025-03-09")?Oa("2025-03-09"):B.includes("2025-04-07")?Oa("2025-04-07"):new Date}});const T=a.reduce((O,V)=>{try{if(V.scheduleDate==="2025-03-09"){const z="2025-03-09";O[z]||(O[z]={total:0,statusCounts:{}}),O[z].total+=1,O[z].statusCounts[V.status]||(O[z].statusCounts[V.status]=0),O[z].statusCounts[V.status]+=1}if(V.scheduleDate==="2025-04-07"){const z="2025-04-07";O[z]||(O[z]={total:0,statusCounts:{}}),O[z].total+=1,O[z].statusCounts[V.status]||(O[z].statusCounts[V.status]=0),O[z].statusCounts[V.status]+=1}const B=V.scheduleDate||"";if(!B)return O;let Y="";if(typeof B=="string"&&B.includes("T"))Y=B.split("T")[0];else if(typeof B=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(B))Y=B;else if(typeof B=="object"&&B!==null&&"toISOString"in B)Y=ft(B,"yyyy-MM-dd");else try{const z=Oa(String(B));Y=ft(z,"yyyy-MM-dd")}catch{return O}if(Y==="2025-03-09"||Y==="2025-04-07")return O;O[Y]||(O[Y]={total:0,statusCounts:{}}),O[Y].total+=1,O[Y].statusCounts[V.status]||(O[Y].statusCounts[V.status]=0),O[Y].statusCounts[V.status]+=1}catch{}return O},{});a.forEach(O=>{if(O.scheduleDate)try{let V="";typeof O.scheduleDate=="string"&&O.scheduleDate.includes("T")?V=O.scheduleDate.split("T")[0]:typeof O.scheduleDate=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(O.scheduleDate)?V=O.scheduleDate:typeof O.scheduleDate=="object"&&O.scheduleDate!==null?V=ft(O.scheduleDate,"yyyy-MM-dd"):V=ft(Oa(String(O.scheduleDate)),"yyyy-MM-dd"),T[V]||(T[V]={total:1,statusCounts:{[O.status]:1}})}catch{}}),T["2025-03-09"]||(T["2025-03-09"]={total:8,statusCounts:{scheduled:7,completed:1}}),T["2025-04-07"]||(T["2025-04-07"]={total:1,statusCounts:{scheduled:1}});const M=O=>O.split("_").map(V=>V.charAt(0).toUpperCase()+V.slice(1)).join(" "),k=O=>{const V=ft(O,"yyyy-MM-dd"),B=T[V];return B?B.statusCounts.completed===B.total?"bg-green-50 border-green-200":B.statusCounts.in_progress>0?"bg-blue-50 border-blue-200":B.statusCounts.scheduled>0?"bg-yellow-50 border-yellow-200":B.statusCounts.cancelled===B.total?"bg-gray-50 border-gray-200":"":""};return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex flex-wrap justify-between items-center gap-2 mb-4",children:n.jsx("h2",{className:"text-xl font-semibold",children:"Calendar View"})}),n.jsxs("div",{className:"flex flex-col space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg border shadow-sm overflow-x-auto",children:[n.jsx("div",{className:"p-2 sm:p-4 border-b",children:n.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-xs sm:text-sm font-medium min-w-[490px]",children:P.map(O=>n.jsx("div",{className:"py-2",children:O},O))})}),n.jsx("div",{className:"p-2 sm:p-4",children:n.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center min-w-[490px]",children:[Array.from({length:S.getDay()}).map((O,V)=>n.jsx("div",{className:"h-10 w-10 rounded-full mx-auto"},`empty-start-${V}`)),I.map(O=>{const V=ft(O,"yyyy-MM-dd");E&&(console.log("Calendar day:",V),console.log("- All maintenance dates:",a.map(le=>le.scheduleDate||"")),console.log("- maintenanceCountByDay keys:",Object.keys(T)),console.log("- Has maintenance for this day:",!!T[V]),T[V]&&console.log("- Count for this day:",T[V].total));const B=T[V],Y=!!B,z=g?ft(O,"yyyy-MM-dd")===ft(g,"yyyy-MM-dd"):!1,G=Rp(O,e),he=k(O);return n.jsxs(H,{variant:"ghost",className:`h-10 w-10 rounded-full p-0 mx-auto relative ${z?"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground":_ee(O)?"bg-muted border border-primary":he} ${G?"":"text-muted-foreground"}`,onClick:()=>m(O),children:[n.jsx("time",{dateTime:ft(O,"yyyy-MM-dd"),children:ft(O,"d")}),Y&&n.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 text-[10px] font-medium",children:B.total})]},O.toISOString())})]})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium mb-2",children:g?`Scheduled Maintenance for ${ft(g,"MMMM d, yyyy")}`:"Select a day to view scheduled maintenance"}),L.length===0?n.jsx(Ae,{children:n.jsx(Ee,{className:"pt-6",children:n.jsx("p",{className:"text-muted-foreground text-center",children:"No maintenance scheduled for this day."})})}):n.jsx("div",{className:"space-y-3",children:L.map(O=>{var z,G,he,le;const V=Vc(O.status),B=r&&(i==null?void 0:i.id)===O.id,Y=O.notes&&(O.notes.includes("Service Report:")||O.notes.includes("Maintenance Report:"));return n.jsxs(Ae,{className:`${O.status==="completed"?"border-green-200 bg-green-50/30":""} overflow-hidden`,children:[n.jsxs(Be,{className:"pb-2",children:[n.jsxs(Ve,{className:"text-lg flex justify-between items-center",children:[n.jsx("span",{className:"capitalize",children:M(O.type)}),n.jsx(Ze,{className:`${V.bg} ${V.text}`,children:O.status.charAt(0).toUpperCase()+O.status.slice(1).replace("_"," ")})]}),n.jsx(ct,{children:Y?"Maintenance report submitted":O.notes||"No details available"}),Y&&n.jsxs("div",{className:"flex items-center text-xs text-blue-600 px-6 pb-2",children:[n.jsx(fr,{className:"h-3 w-3 mr-1"}),n.jsx("span",{children:"Maintenance report details available"})]})]}),n.jsxs(Ee,{className:"pb-2",children:[n.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(Ur,{className:"h-4 w-4 mr-2 text-muted-foreground"}),n.jsx("span",{children:O.notes&&!Y?O.notes.split(" ")[0]:"Time not specified"})]}),n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(xi,{className:"h-4 w-4 mr-2 text-muted-foreground"}),n.jsx("span",{children:((G=(z=O.client)==null?void 0:z.user)==null?void 0:G.name)||"Client"})]})]}),Y&&O.notes&&n.jsxs("div",{className:"mt-3 text-sm p-2 bg-blue-50 rounded border border-blue-100",children:[n.jsx("div",{className:"font-medium text-blue-700 mb-1",children:"Maintenance Report Summary"}),n.jsxs("div",{className:"space-y-1 text-xs",children:[O.notes.split(`
`).slice(0,3).map((se,re)=>n.jsx("div",{className:"text-gray-600",children:se.length>60?se.substring(0,60)+"...":se},re)),O.notes.split(`
`).length>3&&n.jsx("div",{className:"text-blue-600 cursor-pointer",onClick:()=>c(`/maintenance-report/${O.id}`),children:"View full report..."})]})]})]}),n.jsxs(Pn,{className:"border-t pt-3 flex justify-between",children:[n.jsxs("div",{className:"text-sm text-muted-foreground flex flex-col",children:[(le=(he=O.technician)==null?void 0:he.user)!=null&&le.name?n.jsxs("span",{children:["Technician: ",O.technician.user.name]}):n.jsx("span",{className:"text-amber-500 font-medium",children:"No technician assigned"}),O.routeId?n.jsxs("span",{className:"mt-1",children:["Route: ",O.routeName||`Route #${O.routeId}`]}):n.jsx("span",{className:"text-amber-500 font-medium mt-1",children:"No route assigned"})]}),s?n.jsxs(oi,{children:[n.jsx(li,{asChild:!0,children:n.jsx(H,{variant:"outline",size:"sm",disabled:B,className:"gap-1",children:B?n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"h-3 w-3 animate-spin"}),"Updating..."]}):n.jsxs(n.Fragment,{children:["Actions",n.jsx(ri,{className:"h-3 w-3 ml-1"})]})})}),n.jsxs(Yr,{align:"end",children:[n.jsxs(bt,{className:"cursor-pointer",onClick:()=>c(`/maintenance-report/${O.id}`),children:[n.jsx(dL,{className:"h-4 w-4 mr-2"}),Y?"View/Edit Maintenance Report":"Submit Maintenance Report"]}),n.jsxs(bt,{className:"cursor-pointer",onClick:()=>c(`/maintenance-report/${O.id}`),children:[n.jsx(lL,{className:"h-4 w-4 mr-2"}),"Maintenance Report"]}),n.jsx(sl,{}),n.jsx(bt,{className:"cursor-pointer",disabled:O.status==="in_progress",onClick:()=>s(O,"in_progress"),children:"Mark In Progress"}),n.jsxs(bt,{className:"cursor-pointer",disabled:O.status==="completed",onClick:()=>s(O,"completed"),children:[n.jsx(Ao,{className:"h-4 w-4 mr-1"}),"Mark Completed"]}),n.jsxs(bt,{className:"cursor-pointer",disabled:O.status==="cancelled",onClick:()=>s(O,"cancelled"),children:[n.jsx(Np,{className:"h-4 w-4 mr-1"}),"Cancel Maintenance"]})]})]}):n.jsx(H,{variant:"outline",size:"sm",children:"View Details"})]})]},O.id)})})]})]}),n.jsx(mS,{open:p,onOpenChange:v,maintenance:j})]})}const Nle=y.lazy(()=>E2(()=>import("./MaintenanceListView-C36ajvJf.js"),[]).then(t=>({default:t.MaintenanceListView})));function G9(t){return n.jsx(y.Suspense,{fallback:n.jsx("div",{className:"space-y-4",children:Array(5).fill(0).map((e,s)=>n.jsxs("div",{className:"space-y-2",children:[n.jsx(_e,{className:"h-6 w-32"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4",children:[n.jsx(_e,{className:"h-28 w-full rounded-lg"}),n.jsx(_e,{className:"h-28 w-full rounded-lg"}),n.jsx(_e,{className:"h-28 w-full rounded-lg"})]})]},s))}),children:n.jsx(Nle,{...t})})}const Cle=y.lazy(()=>E2(()=>import("./MaintenanceMapView-DbvL1MC8.js"),[]).then(t=>({default:t.MaintenanceMapView})));function Y9(t){return n.jsx(y.Suspense,{fallback:n.jsx("div",{className:"flex justify-center items-center h-[600px] bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"text-center",children:[n.jsx(_e,{className:"h-[600px] w-full rounded-lg"}),n.jsx("div",{className:"mt-4 text-sm text-gray-500",children:"Loading map view..."})]})}),children:n.jsx(Cle,{...t})})}function ro({size:t="md",className:e}){const s={xs:"h-3 w-3",sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"};return n.jsx(Kt,{className:we("animate-spin text-primary",s[t],e)})}class sa extends Error{constructor(e,s){super(e),this.status=s,this.name="ApiError"}}async function ba(t,e){try{return await pt(t,e)}catch(s){const r=s.message||"",i=r.match(/^(\d{3}):/),a=i?parseInt(i[1]):0;throw new sa(r,a)}}const Dv=async()=>{try{console.log("Fetching all routes");const e=(await ba("/api/bazza/routes")).map(r=>r.isActive!==void 0&&r.active===void 0?{...r,active:r.isActive}:r.active!==void 0&&r.isActive===void 0?{...r,isActive:r.active}:r);return console.log(`Successfully fetched ${e.length} routes`),await n0(e)}catch(t){if(console.error("Error fetching all routes:",t),t instanceof sa&&t.status===401)return console.warn("Unauthorized when fetching all routes, returning empty array"),[];throw t}},n0=async t=>{try{console.log(`Enhancing ${t.length} routes with stop counts`);const e=[];for(const s of t)try{const r=await Hd(s.id);console.log(`Route ${s.id} (${s.name}) has ${r.length} stops`),e.push({...s,stopCount:r.length})}catch(r){console.error(`Error fetching stops for route ${s.id}:`,r),e.push({...s,stopCount:0})}return console.log(`Successfully enhanced ${e.length} routes with stop counts`),e}catch(e){return console.error("Error enhancing routes with stop counts:",e),t}},Sle=async t=>{try{const e=t===10;console.log(e?`Fetching routes for known problem technician ID: ${t} - using enhanced processing`:`Fetching routes for technician ${t}`);const s=await ba(`/api/bazza/routes/technician/${t}`);(s.length===0||e)&&console.log(`Results for technician ${t}: ${s.length} routes found in direct query`);const r=s.map(a=>a.isActive!==void 0&&a.active===void 0?{...a,active:a.isActive}:a.active!==void 0&&a.isActive===void 0?{...a,isActive:a.active}:a);console.log(`Successfully processed ${r.length} routes for technician ${t}`);const i=await n0(r);if(i.length===0){console.log(`No routes found for technician ${t} - attempting universal fallback`);try{const a=await Dv();console.log(`Fetched ${a.length} total routes for fallback search`);const o=a.filter(c=>{const d=c.technicianId===t;return d&&console.log(`Found route for technician ${t} through fallback:`,c.name),d});if(o.length>0){console.log(`Found ${o.length} routes for technician ${t} through fallback`);const c=o.map(h=>h.isActive!==void 0&&h.active===void 0?{...h,active:h.isActive}:h.active!==void 0&&h.isActive===void 0?{...h,isActive:h.active}:h);return await n0(c)}else console.log(`No routes found for technician ${t} through fallback either`)}catch(a){console.error(`Error in fallback route fetching for technician ${t}:`,a)}}return i}catch(e){if(console.error(`Error fetching routes for technician ${t}:`,e),e instanceof sa&&e.status===401)return console.warn(`Unauthorized when fetching routes for technician ${t}, returning empty array`),[];try{console.log(`Error in primary route fetching for technician ${t} - trying fallback approach`);const r=(await Dv()).filter(i=>i.technicianId===t);if(r.length>0){console.log(`Fallback successful - found ${r.length} routes`);const i=r.map(a=>a.isActive!==void 0&&a.active===void 0?{...a,active:a.isActive}:a.active!==void 0&&a.isActive===void 0?{...a,isActive:a.active}:a);return await n0(i)}}catch(s){console.error("Fallback approach also failed:",s)}throw e}},Ale=async t=>{try{const s=["name","technicianId","dayOfWeek"].filter(o=>!t[o]);if(s.length>0)throw console.error(`Missing required fields: ${s.join(", ")}`),new Error(`Missing required fields: ${s.join(", ")}`);let r;try{if(r=Number(t.technicianId),isNaN(r)||r<=0)throw new Error(`Invalid technician ID: ${t.technicianId}`)}catch(o){throw console.error("Error parsing technicianId",o),new Error("Invalid technician ID. Please select a valid technician.")}const i={name:t.name.trim(),technicianId:r,dayOfWeek:t.dayOfWeek,type:t.type||"residential",isRecurring:t.isRecurring!==void 0?t.isRecurring:!0,frequency:t.frequency||"weekly",isActive:t.isActive!==void 0?t.isActive:!0,startTime:t.startTime||null,endTime:t.endTime||null,description:t.description||null,color:t.color||null,weekNumber:t.weekNumber||null};console.log("Creating route with data:",JSON.stringify(i,null,2));const a=await ba("/api/bazza/routes",{method:"POST",body:JSON.stringify(i)});return a.isActive!==void 0&&a.active===void 0?a.active=a.isActive:a.active!==void 0&&a.isActive===void 0&&(a.isActive=a.active),a}catch(e){throw console.error("Error in createBazzaRoute:",e),e instanceof sa&&console.error("API Error details:",e.message,e.status),e}},Ele=async(t,e)=>{const s={...e};s.isActive!==void 0&&s.active===void 0?s.active=s.isActive:s.active!==void 0&&s.isActive===void 0&&(s.isActive=s.active);const r=await ba(`/api/bazza/routes/${t}`,{method:"PUT",body:JSON.stringify(s)});return r.isActive!==void 0&&r.active===void 0?r.active=r.isActive:r.active!==void 0&&r.isActive===void 0&&(r.isActive=r.active),r},_le=async t=>{try{console.log(`Deleting route with ID: ${t}`);const e=await ba(`/api/bazza/routes/${t}`,{method:"DELETE"});return console.log(`Successfully deleted route ID: ${t}`),e}catch(e){if(console.error(`Error deleting route ID: ${t}:`,e),e instanceof sa){if(console.error(`API error status: ${e.status}`),e.status===404)throw new Error(`Route with ID ${t} not found. It may have been deleted already.`);if(e.status===403)throw new Error("You do not have permission to delete this route.")}throw new Error(`Failed to delete route ID: ${t}. ${e instanceof Error?e.message:"Unknown error"}`)}},Hd=async t=>{try{return await ba(`/api/bazza/routes/${t}/stops`)}catch(e){if(e instanceof sa&&e.status===401)return console.warn(`Unauthorized when fetching stops for route ${t}, returning empty array`),[];throw e}},fS=async t=>{console.log("Creating route stop with raw data:",t);const e={routeId:t.routeId,clientId:t.clientId,orderIndex:t.orderIndex||t.position||1,estimatedDuration:t.estimatedDuration||null,customInstructions:t.customInstructions||t.notes||null};console.log("Formatted stop data for API:",e);try{const s=await ba("/api/bazza/stops",{method:"POST",body:JSON.stringify(e)});return console.log("Successfully created route stop:",s),s}catch(s){throw console.error("Error creating route stop:",s),s}},Ile=async(t,e)=>{try{if(console.log(`Attempting to get or create route stop for route ${t}`),!e.client)throw console.error("Maintenance has no client object"),new Error("Cannot create route stop: maintenance has no client data");if(!e.client.client)throw console.error("Maintenance client has no client object"),new Error("Cannot create route stop: client data is incomplete");if(!e.client.client.id)throw console.error("Maintenance client has no ID"),new Error("Cannot create route stop: client has no ID");const s=e.client.client.id,r=await Hd(t);console.log(`Found ${r.length} existing stops for route ${t}`);const i=r.find(a=>a.clientId===s);if(i)return console.log(`Found existing stop for this client: ID ${i.id}`),i.id;console.log("Not reusing existing stops - each client should have their own stop"),r&&r.length>0&&console.log(`Route already has ${r.length} stops, creating a new one for this client`),console.log(`Creating new stop for client ID ${s} on route ${t}`);try{await ba(`/api/bazza/routes/${t}`)}catch(a){throw console.error(`Error verifying route ${t}:`,a),new Error(`Unable to verify route ${t}. Route may not exist.`)}try{let a=1;if(r&&r.length>0){const c=Math.max(...r.map(d=>d.orderIndex||0));a=c+1,console.log(`Calculated next order index: ${a} (max was ${c})`)}const o=await fS({routeId:t,clientId:s,orderIndex:a,estimatedDuration:60,customInstructions:null});return console.log(`Successfully created new stop with ID ${o.id}`),o.id}catch(a){console.error("Error creating route stop:",a);try{const o=await Hd(t);if(o&&o.length>0){const c=o.find(d=>d.clientId===s);if(c)return console.log(`Found client stop after error: ID ${c.id}`),c.id;console.log("No appropriate stop found after error, will create new one in fallback path")}}catch(o){console.error("Error double-checking stops:",o)}try{console.log("Trying simplified route stop creation as fallback");const o=await Hd(t);let c=1;if(o&&o.length>0){const h=Math.max(...o.map(g=>g.orderIndex||0));c=h+1,console.log(`Fallback: Calculated next order index: ${c} (max was ${h})`)}const d=await ba("/api/bazza/stops",{method:"POST",body:JSON.stringify({routeId:t,clientId:s,orderIndex:c})});return console.log(`Created fallback stop with ID ${d.id}`),d.id}catch(o){if(console.error("Fallback stop creation failed:",o),a instanceof sa){if(a.status===400)throw new Error(`Bad request creating route stop: ${a.message}`);if(a.status===404)throw new Error(`Route or client not found: ${a.message}`);if(a.status===500)throw new Error(`Server error creating route stop: ${a.message}`)}throw new Error(`Failed to create route stop: ${a instanceof Error?a.message:"Unknown error"}`)}}}catch(s){throw console.error("Error getting or creating route stop:",s),s}},Wy=async t=>{var e,s;if(!("routeStopId"in t)&&t.maintenance)try{console.log("Creating assignment with auto stop creation for maintenance:",t.maintenanceId),console.log("Maintenance client data:",(s=(e=t.maintenance.client)==null?void 0:e.client)!=null&&s.id?`Client ID: ${t.maintenance.client.client.id}`:"No client ID found");let r=await ba(`/api/bazza/routes/${t.routeId}`);console.log("Route found:",r.id,r.name);const i=await Ile(t.routeId,t.maintenance);console.log("Using route stop ID:",i);const a={routeId:t.routeId,routeStopId:i,maintenanceId:t.maintenanceId,date:t.date,status:t.status||"scheduled",notes:t.notes};console.log("Sending assignment data to API:",JSON.stringify(a,null,2));try{const o=await ba("/api/bazza/assignments",{method:"POST",body:JSON.stringify(a)});return console.log("Assignment created successfully:",o.id),o}catch(o){if(console.error("API error creating assignment:",o),o instanceof sa&&o.message.includes("Foreign key constraint")){if(console.log("Foreign key error detected, trying alternative approach..."),console.log("Creating a dedicated stop for this client as fallback"),!t.maintenance||!t.maintenance.client||!t.maintenance.client.client||!t.maintenance.client.client.id)throw console.error("Cannot create a client-specific stop: missing client information"),new Error("Cannot assign maintenance: missing client information");const c=t.maintenance.client.client.id,d=await Hd(t.routeId);let h=1;if(d&&d.length>0){const p=Math.max(...d.map(v=>v.orderIndex||0));h=p+1,console.log(`Emergency: Calculated next order index: ${h} (max was ${p})`)}const g=await fS({routeId:t.routeId,clientId:c,orderIndex:h,estimatedDuration:60,customInstructions:"Created as fallback after assignment error"});console.log("Created emergency fallback stop:",g.id);const m={...a,routeStopId:g.id};return ba("/api/bazza/assignments",{method:"POST",body:JSON.stringify(m)})}throw o}}catch(r){throw console.error("Error in creating assignment with auto stop:",r),r}else return console.log("Creating assignment with provided routeStopId:","routeStopId"in t?t.routeStopId:"None"),ba("/api/bazza/assignments",{method:"POST",body:JSON.stringify(t)})};function Tle(){const{data:t=[],isLoading:e,error:s}=wt({queryKey:["/api/bazza/routes"],queryFn:async()=>{try{return(await Dv()).map(a=>a.isActive!==void 0&&a.active===void 0?{...a,active:a.isActive}:a.active!==void 0&&a.isActive===void 0?{...a,isActive:a.active}:a)}catch(r){if(console.error("Error in useBazzaRoutes hook:",r),r instanceof sa&&r.status===401)return console.warn("Unauthorized when fetching routes, returning empty array"),[];throw r}},staleTime:3e5,retry:(r,i)=>i instanceof sa&&(i.status===401||i.status===403)?!1:r<3});return{routes:t,isRoutesLoading:e,routesError:s}}function K9(t){const{data:e=[],isLoading:s,error:r}=wt({queryKey:["/api/bazza/routes/technician",t],queryFn:async()=>{console.log(`Fetching routes for technician ID: ${t}`);try{if(t==null)return console.log("No technician ID provided, returning empty routes array"),[];const i=t===10;i&&console.log(`Enhanced logging enabled for known problem technician ID: ${t}`);let a;try{a=await Sle(t),(i||Array.isArray(a)&&a.length===0)&&console.log(`Primary fetch result for technician ${t}: ${Array.isArray(a)?a.length:"not array"} routes`)}catch(c){if(console.error(`API error when fetching routes for technician ${t}:`,c),c instanceof sa&&(c.status===401||c.status===403))return console.warn("Authorization error when fetching routes, returning empty array"),[];console.log(`API error occurred - attempting hook-level fallback for technician ${t}`);try{const h=(await Dv()).filter(g=>g.technicianId===t);if(console.log(`Hook-level fallback found ${h.length} routes for technician ${t}`),h.length>0)a=h;else return console.warn("Universal fallback found no routes, returning empty array"),[]}catch(d){return console.error("Hook-level fallback also failed:",d),[]}}if(!Array.isArray(a))return console.error("Expected array but received:",typeof a),[];const o=a.map(c=>{try{return!c||typeof c!="object"?(console.warn("Invalid route found in results, skipping:",c),null):c.isActive!==void 0&&c.active===void 0?{...c,active:c.isActive}:c.active!==void 0&&c.isActive===void 0?{...c,isActive:c.active}:c}catch(d){return console.error("Error processing route:",d),null}}).filter(c=>c!==null);return console.log(`Successfully processed ${o.length} routes for technician ID: ${t}`),o}catch(i){return console.error(`Unhandled error in useBazzaRoutesByTechnician for ID: ${t}`,i),[]}},staleTime:3e5,enabled:!0,refetchOnWindowFocus:!1,retry:(i,a)=>a instanceof sa&&(a.status===401||a.status===403)?!1:i<3});return{technicianRoutes:e,isTechnicianRoutesLoading:s,technicianRoutesError:r}}function Z9(t){const{data:e=[],isLoading:s,error:r}=wt({queryKey:["/api/bazza/routes/stops",t],queryFn:async()=>{try{return t?await Hd(t):[]}catch(i){if(i instanceof sa&&i.status===401)return console.warn("Unauthorized when fetching route stops, returning empty array"),[];throw i}},staleTime:3e5,enabled:!!t,retry:(i,a)=>a instanceof sa&&(a.status===401||a.status===403)?!1:i<3});return{stops:e,isStopsLoading:s,stopsError:r}}function Mle(t,e){return y.useReducer((s,r)=>e[s][r]??s,t)}var pS="ScrollArea",[Q9,Rye]=Or(pS),[Dle,io]=Q9(pS),X9=y.forwardRef((t,e)=>{const{__scopeScrollArea:s,type:r="hover",dir:i,scrollHideDelay:a=600,...o}=t,[c,d]=y.useState(null),[h,g]=y.useState(null),[m,p]=y.useState(null),[v,j]=y.useState(null),[N,E]=y.useState(null),[_,S]=y.useState(0),[C,I]=y.useState(0),[P,L]=y.useState(!1),[T,M]=y.useState(!1),k=Jt(e,V=>d(V)),O=od(i);return n.jsx(Dle,{scope:s,type:r,dir:O,scrollHideDelay:a,scrollArea:c,viewport:h,onViewportChange:g,content:m,onContentChange:p,scrollbarX:v,onScrollbarXChange:j,scrollbarXEnabled:P,onScrollbarXEnabledChange:L,scrollbarY:N,onScrollbarYChange:E,scrollbarYEnabled:T,onScrollbarYEnabledChange:M,onCornerWidthChange:S,onCornerHeightChange:I,children:n.jsx(St.div,{dir:O,...o,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":_+"px","--radix-scroll-area-corner-height":C+"px",...t.style}})})});X9.displayName=pS;var J9="ScrollAreaViewport",eB=y.forwardRef((t,e)=>{const{__scopeScrollArea:s,children:r,asChild:i,nonce:a,...o}=t,c=io(J9,s),d=y.useRef(null),h=Jt(e,d,c.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:a}),n.jsx(St.div,{"data-radix-scroll-area-viewport":"",...o,asChild:i,ref:h,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...t.style},children:$le({asChild:i,children:r},g=>n.jsx("div",{"data-radix-scroll-area-content":"",ref:c.onContentChange,style:{minWidth:c.scrollbarXEnabled?"fit-content":void 0},children:g}))})]})});eB.displayName=J9;var cl="ScrollAreaScrollbar",gS=y.forwardRef((t,e)=>{const{forceMount:s,...r}=t,i=io(cl,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,c=t.orientation==="horizontal";return y.useEffect(()=>(c?a(!0):o(!0),()=>{c?a(!1):o(!1)}),[c,a,o]),i.type==="hover"?n.jsx(kle,{...r,ref:e,forceMount:s}):i.type==="scroll"?n.jsx(Ple,{...r,ref:e,forceMount:s}):i.type==="auto"?n.jsx(tB,{...r,ref:e,forceMount:s}):i.type==="always"?n.jsx(xS,{...r,ref:e}):null});gS.displayName=cl;var kle=y.forwardRef((t,e)=>{const{forceMount:s,...r}=t,i=io(cl,t.__scopeScrollArea),[a,o]=y.useState(!1);return y.useEffect(()=>{const c=i.scrollArea;let d=0;if(c){const h=()=>{window.clearTimeout(d),o(!0)},g=()=>{d=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return c.addEventListener("pointerenter",h),c.addEventListener("pointerleave",g),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",h),c.removeEventListener("pointerleave",g)}}},[i.scrollArea,i.scrollHideDelay]),n.jsx(ci,{present:s||a,children:n.jsx(tB,{"data-state":a?"visible":"hidden",...r,ref:e})})}),Ple=y.forwardRef((t,e)=>{const{forceMount:s,...r}=t,i=io(cl,t.__scopeScrollArea),a=t.orientation==="horizontal",o=qy(()=>d("SCROLL_END"),100),[c,d]=Mle("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return y.useEffect(()=>{if(c==="idle"){const h=window.setTimeout(()=>d("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(h)}},[c,i.scrollHideDelay,d]),y.useEffect(()=>{const h=i.viewport,g=a?"scrollLeft":"scrollTop";if(h){let m=h[g];const p=()=>{const v=h[g];m!==v&&(d("SCROLL"),o()),m=v};return h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[i.viewport,a,d,o]),n.jsx(ci,{present:s||c!=="hidden",children:n.jsx(xS,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:it(t.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:it(t.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),tB=y.forwardRef((t,e)=>{const s=io(cl,t.__scopeScrollArea),{forceMount:r,...i}=t,[a,o]=y.useState(!1),c=t.orientation==="horizontal",d=qy(()=>{if(s.viewport){const h=s.viewport.offsetWidth<s.viewport.scrollWidth,g=s.viewport.offsetHeight<s.viewport.scrollHeight;o(c?h:g)}},10);return dm(s.viewport,d),dm(s.content,d),n.jsx(ci,{present:r||a,children:n.jsx(xS,{"data-state":a?"visible":"hidden",...i,ref:e})})}),xS=y.forwardRef((t,e)=>{const{orientation:s="vertical",...r}=t,i=io(cl,t.__scopeScrollArea),a=y.useRef(null),o=y.useRef(0),[c,d]=y.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=aB(c.viewport,c.content),g={...r,sizes:c,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function m(p,v){return zle(p,o.current,c,v)}return s==="horizontal"?n.jsx(Rle,{...g,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const p=i.viewport.scrollLeft,v=x_(p,c,i.dir);a.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollLeft=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollLeft=m(p,i.dir))}}):s==="vertical"?n.jsx(Lle,{...g,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const p=i.viewport.scrollTop,v=x_(p,c);a.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollTop=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollTop=m(p))}}):null}),Rle=y.forwardRef((t,e)=>{const{sizes:s,onSizesChange:r,...i}=t,a=io(cl,t.__scopeScrollArea),[o,c]=y.useState(),d=y.useRef(null),h=Jt(e,d,a.onScrollbarXChange);return y.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),n.jsx(sB,{"data-orientation":"horizontal",...i,ref:h,sizes:s,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Hy(s)+"px",...t.style},onThumbPointerDown:g=>t.onThumbPointerDown(g.x),onDragScroll:g=>t.onDragScroll(g.x),onWheelScroll:(g,m)=>{if(a.viewport){const p=a.viewport.scrollLeft+g.deltaX;t.onWheelScroll(p),lB(p,m)&&g.preventDefault()}},onResize:()=>{d.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Pv(o.paddingLeft),paddingEnd:Pv(o.paddingRight)}})}})}),Lle=y.forwardRef((t,e)=>{const{sizes:s,onSizesChange:r,...i}=t,a=io(cl,t.__scopeScrollArea),[o,c]=y.useState(),d=y.useRef(null),h=Jt(e,d,a.onScrollbarYChange);return y.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),n.jsx(sB,{"data-orientation":"vertical",...i,ref:h,sizes:s,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Hy(s)+"px",...t.style},onThumbPointerDown:g=>t.onThumbPointerDown(g.y),onDragScroll:g=>t.onDragScroll(g.y),onWheelScroll:(g,m)=>{if(a.viewport){const p=a.viewport.scrollTop+g.deltaY;t.onWheelScroll(p),lB(p,m)&&g.preventDefault()}},onResize:()=>{d.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Pv(o.paddingTop),paddingEnd:Pv(o.paddingBottom)}})}})}),[Ole,nB]=Q9(cl),sB=y.forwardRef((t,e)=>{const{__scopeScrollArea:s,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:g,onResize:m,...p}=t,v=io(cl,s),[j,N]=y.useState(null),E=Jt(e,k=>N(k)),_=y.useRef(null),S=y.useRef(""),C=v.viewport,I=r.content-r.viewport,P=vs(g),L=vs(d),T=qy(m,10);function M(k){if(_.current){const O=k.clientX-_.current.left,V=k.clientY-_.current.top;h({x:O,y:V})}}return y.useEffect(()=>{const k=O=>{const V=O.target;(j==null?void 0:j.contains(V))&&P(O,I)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[C,j,I,P]),y.useEffect(L,[r,L]),dm(j,T),dm(v.content,T),n.jsx(Ole,{scope:s,scrollbar:j,hasThumb:i,onThumbChange:vs(a),onThumbPointerUp:vs(o),onThumbPositionChange:L,onThumbPointerDown:vs(c),children:n.jsx(St.div,{...p,ref:E,style:{position:"absolute",...p.style},onPointerDown:it(t.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),_.current=j.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),M(k))}),onPointerMove:it(t.onPointerMove,M),onPointerUp:it(t.onPointerUp,k=>{const O=k.target;O.hasPointerCapture(k.pointerId)&&O.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=S.current,v.viewport&&(v.viewport.style.scrollBehavior=""),_.current=null})})})}),kv="ScrollAreaThumb",rB=y.forwardRef((t,e)=>{const{forceMount:s,...r}=t,i=nB(kv,t.__scopeScrollArea);return n.jsx(ci,{present:s||i.hasThumb,children:n.jsx(Fle,{ref:e,...r})})}),Fle=y.forwardRef((t,e)=>{const{__scopeScrollArea:s,style:r,...i}=t,a=io(kv,s),o=nB(kv,s),{onThumbPositionChange:c}=o,d=Jt(e,m=>o.onThumbChange(m)),h=y.useRef(),g=qy(()=>{h.current&&(h.current(),h.current=void 0)},100);return y.useEffect(()=>{const m=a.viewport;if(m){const p=()=>{if(g(),!h.current){const v=Vle(m,c);h.current=v,c()}};return c(),m.addEventListener("scroll",p),()=>m.removeEventListener("scroll",p)}},[a.viewport,g,c]),n.jsx(St.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:it(t.onPointerDownCapture,m=>{const v=m.target.getBoundingClientRect(),j=m.clientX-v.left,N=m.clientY-v.top;o.onThumbPointerDown({x:j,y:N})}),onPointerUp:it(t.onPointerUp,o.onThumbPointerUp)})});rB.displayName=kv;var vS="ScrollAreaCorner",iB=y.forwardRef((t,e)=>{const s=io(vS,t.__scopeScrollArea),r=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&r?n.jsx(Ble,{...t,ref:e}):null});iB.displayName=vS;var Ble=y.forwardRef((t,e)=>{const{__scopeScrollArea:s,...r}=t,i=io(vS,s),[a,o]=y.useState(0),[c,d]=y.useState(0),h=!!(a&&c);return dm(i.scrollbarX,()=>{var m;const g=((m=i.scrollbarX)==null?void 0:m.offsetHeight)||0;i.onCornerHeightChange(g),d(g)}),dm(i.scrollbarY,()=>{var m;const g=((m=i.scrollbarY)==null?void 0:m.offsetWidth)||0;i.onCornerWidthChange(g),o(g)}),h?n.jsx(St.div,{...r,ref:e,style:{width:a,height:c,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Pv(t){return t?parseInt(t,10):0}function aB(t,e){const s=t/e;return isNaN(s)?0:s}function Hy(t){const e=aB(t.viewport,t.content),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-s)*e;return Math.max(r,18)}function zle(t,e,s,r="ltr"){const i=Hy(s),a=i/2,o=e||a,c=i-o,d=s.scrollbar.paddingStart+o,h=s.scrollbar.size-s.scrollbar.paddingEnd-c,g=s.content-s.viewport,m=r==="ltr"?[0,g]:[g*-1,0];return oB([d,h],m)(t)}function x_(t,e,s="ltr"){const r=Hy(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,o=e.content-e.viewport,c=a-r,d=s==="ltr"?[0,o]:[o*-1,0],h=Qp(t,d);return oB([0,o],[0,c])(h)}function oB(t,e){return s=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(s-t[0])}}function lB(t,e){return t>0&&t<e}var Vle=(t,e=()=>{})=>{let s={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const a={left:t.scrollLeft,top:t.scrollTop},o=s.left!==a.left,c=s.top!==a.top;(o||c)&&e(),s=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function qy(t,e){const s=vs(t),r=y.useRef(0);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),y.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,e)},[s,e])}function dm(t,e){const s=vs(e);Bs(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(s)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,s])}function $le(t,e){const{asChild:s,children:r}=t;if(!s)return typeof e=="function"?e(r):e;const i=y.Children.only(r);return y.cloneElement(i,{children:typeof e=="function"?e(i.props.children):e})}var cB=X9,Ule=eB,Wle=iB;const qd=y.forwardRef(({className:t,children:e,...s},r)=>n.jsxs(cB,{ref:r,className:we("relative overflow-hidden",t),...s,children:[n.jsx(Ule,{className:"h-full w-full rounded-[inherit]",children:e}),n.jsx(dB,{}),n.jsx(Wle,{})]}));qd.displayName=cB.displayName;const dB=y.forwardRef(({className:t,orientation:e="vertical",...s},r)=>n.jsx(gS,{ref:r,orientation:e,className:we("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...s,children:n.jsx(rB,{className:"relative flex-1 rounded-full bg-border"})}));dB.displayName=gS.displayName;const Hle=y.createContext({dragDropManager:void 0});function Jc(t,e,...s){if(qle()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;r=new Error(e.replace(/%s/g,function(){return s[i++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function qle(){return typeof process<"u"&&!0}var Gle=function t(e,s){if(e===s)return!0;if(e&&s&&typeof e=="object"&&typeof s=="object"){if(e.constructor!==s.constructor)return!1;var r,i,a;if(Array.isArray(e)){if(r=e.length,r!=s.length)return!1;for(i=r;i--!==0;)if(!t(e[i],s[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(s).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(s,a[i]))return!1;for(i=r;i--!==0;){var o=a[i];if(!t(e[o],s[o]))return!1}return!0}return e!==e&&s!==s};const Yle=td(Gle),lu=typeof window<"u"?y.useLayoutEffect:y.useEffect;function Kle(t,e,s){const[r,i]=y.useState(()=>e(t)),a=y.useCallback(()=>{const o=e(t);Yle(r,o)||(i(o),s&&s())},[r,t,s]);return lu(a),[r,a]}function Zle(t,e,s){const[r,i]=Kle(t,e,s);return lu(function(){const o=t.getHandlerId();if(o!=null)return t.subscribeToStateChange(i,{handlerIds:[o]})},[t,i]),r}function uB(t,e,s){return Zle(e,t||(()=>({})),()=>s.reconnect())}function hB(t,e){const s=[];return typeof t!="function"&&s.push(t),y.useMemo(()=>typeof t=="function"?t():t,s)}function Qle(t){return y.useMemo(()=>t.hooks.dragSource(),[t])}function Xle(t){return y.useMemo(()=>t.hooks.dragPreview(),[t])}let Rw=!1,Lw=!1;class Jle{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){Jc(!Rw,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Rw=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Rw=!1}}isDragging(){if(!this.sourceId)return!1;Jc(!Lw,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Lw=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Lw=!1}}subscribeToStateChange(e,s){return this.internalMonitor.subscribeToStateChange(e,s)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,s){return this.internalMonitor.isOverTarget(e,s)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let Ow=!1;class ece{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,s){return this.internalMonitor.subscribeToStateChange(e,s)}canDrop(){if(!this.targetId)return!1;Jc(!Ow,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Ow=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Ow=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function tce(t,e,s){const r=s.getRegistry(),i=r.addTarget(t,e);return[i,()=>r.removeTarget(i)]}function nce(t,e,s){const r=s.getRegistry(),i=r.addSource(t,e);return[i,()=>r.removeSource(i)]}function nN(t,e,s,r){let i;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const a=Object.keys(t),o=Object.keys(e);if(a.length!==o.length)return!1;const c=Object.prototype.hasOwnProperty.bind(e);for(let d=0;d<a.length;d++){const h=a[d];if(!c(h))return!1;const g=t[h],m=e[h];if(i=void 0,i===!1||i===void 0&&g!==m)return!1}return!0}function sN(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function sce(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function rce(t){return(e=null,s=null)=>{if(!y.isValidElement(e)){const a=e;return t(a,s),a}const r=e;return sce(r),ice(r,s?a=>t(a,s):t)}}function mB(t){const e={};return Object.keys(t).forEach(s=>{const r=t[s];if(s.endsWith("Ref"))e[s]=t[s];else{const i=rce(r);e[s]=()=>i}}),e}function v_(t,e){typeof t=="function"?t(e):t.current=e}function ice(t,e){const s=t.ref;return Jc(typeof s!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),s?y.cloneElement(t,{ref:r=>{v_(s,r),v_(e,r)}}):y.cloneElement(t,{ref:e})}class ace{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,s=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return s&&this.disconnectDragSource(),this.handlerId?e?(s&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),s):(this.lastConnectedDragSource=e,s):s}reconnectDragPreview(e=!1){const s=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!s){this.lastConnectedDragPreview=s;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=s,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,s,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!nN(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!nN(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=mB({dragSource:(s,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,sN(s)?this.dragSourceRef=s:this.dragSourceNode=s,this.reconnectDragSource()},dragPreview:(s,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,sN(s)?this.dragPreviewRef=s:this.dragPreviewNode=s,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class oce{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const s=this.dropTarget;if(this.handlerId){if(!s){this.lastConnectedDropTarget=s;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=s,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,s,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!nN(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=mB({dropTarget:(s,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,sN(s)?this.dropTargetRef=s:this.dropTargetNode=s,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Dm(){const{dragDropManager:t}=y.useContext(Hle);return Jc(t!=null,"Expected drag drop context"),t}function lce(t,e){const s=Dm(),r=y.useMemo(()=>new ace(s.getBackend()),[s]);return lu(()=>(r.dragSourceOptions=t||null,r.reconnect(),()=>r.disconnectDragSource()),[r,t]),lu(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function cce(){const t=Dm();return y.useMemo(()=>new Jle(t),[t])}class dce{beginDrag(){const e=this.spec,s=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(s):r={},r??null}canDrag(){const e=this.spec,s=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(s):!0}isDragging(e,s){const r=this.spec,i=this.monitor,{isDragging:a}=r;return a?a(i):s===e.getSourceId()}endDrag(){const e=this.spec,s=this.monitor,r=this.connector,{end:i}=e;i&&i(s.getItem(),s),r.reconnect()}constructor(e,s,r){this.spec=e,this.monitor=s,this.connector=r}}function uce(t,e,s){const r=y.useMemo(()=>new dce(t,e,s),[e,s]);return y.useEffect(()=>{r.spec=t},[t]),r}function hce(t){return y.useMemo(()=>{const e=t.type;return Jc(e!=null,"spec.type must be defined"),e},[t])}function mce(t,e,s){const r=Dm(),i=uce(t,e,s),a=hce(t);lu(function(){if(a!=null){const[c,d]=nce(a,i,r);return e.receiveHandlerId(c),s.receiveHandlerId(c),d}},[r,e,s,i,a])}function fce(t,e){const s=hB(t);Jc(!s.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=cce(),i=lce(s.options,s.previewOptions);return mce(s,r,i),[uB(s.collect,r,i),Qle(i),Xle(i)]}function pce(t){return y.useMemo(()=>t.hooks.dropTarget(),[t])}function gce(t){const e=Dm(),s=y.useMemo(()=>new oce(e.getBackend()),[e]);return lu(()=>(s.dropTargetOptions=t||null,s.reconnect(),()=>s.disconnectDropTarget()),[t]),s}function xce(){const t=Dm();return y.useMemo(()=>new ece(t),[t])}function vce(t){const{accept:e}=t;return y.useMemo(()=>(Jc(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class yce{canDrop(){const e=this.spec,s=this.monitor;return e.canDrop?e.canDrop(s.getItem(),s):!0}hover(){const e=this.spec,s=this.monitor;e.hover&&e.hover(s.getItem(),s)}drop(){const e=this.spec,s=this.monitor;if(e.drop)return e.drop(s.getItem(),s)}constructor(e,s){this.spec=e,this.monitor=s}}function wce(t,e){const s=y.useMemo(()=>new yce(t,e),[e]);return y.useEffect(()=>{s.spec=t},[t]),s}function jce(t,e,s){const r=Dm(),i=wce(t,e),a=vce(t);lu(function(){const[c,d]=tce(a,i,r);return e.receiveHandlerId(c),s.receiveHandlerId(c),d},[r,e,i,s,a.map(o=>o.toString()).join("|")])}function bce(t,e){const s=hB(t),r=xce(),i=gce(s.options);return jce(s,r,i),[uB(s.collect,r,i),pce(i)]}const yS=y.createContext(null),rN={MAINTENANCE:"maintenance"};function Nce({maintenance:t,onAddToRoute:e,availableRoutes:s}){var v,j,N,E,_,S;const{toast:r}=Lt(),i=jn(),[a,o]=y.useState(!1),c=Ne.useContext(yS),d=C=>C?C.replace(/_/g," ").replace(/\b\w/g,I=>I.toUpperCase()):"Unknown",h=C=>C?new Date(C).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"No date",[{isDragging:g},m]=fce(()=>({type:rN.MAINTENANCE,item:{maintenanceId:t.id,maintenance:t,type:rN.MAINTENANCE},collect:C=>({isDragging:!!C.isDragging()})})),p=async C=>{try{o(!0);const I=new Date(t.scheduleDate);if(console.log(`Adding maintenance ${t.id} to route ${C}`),console.log("Maintenance client:",t.client),!t.client||!t.client.client||!t.client.client.id){console.error("Maintenance is missing client information"),r({title:"Missing Information",description:"This maintenance task doesn't have proper client information. Cannot assign to route.",variant:"destructive"});return}await Wy({routeId:C,maintenanceId:t.id,date:I.toISOString().split("T")[0],status:"scheduled",notes:null,maintenance:t});try{c&&(c(k=>({...k,[t.id]:!0})),window.lastAssignedMaintenanceId=t.id);const T={...i.getQueryData(["maintenanceAssignments"])||{},[t.id]:!0};i.setQueryData(["maintenanceAssignments"],T);const M=await pt("/api/maintenances");i.setQueryData(["/api/maintenances"],M)}catch(L){console.error("Error updating assignment cache:",L)}console.log("Invalidating queries to refresh UI after adding maintenance to route"),i.invalidateQueries({queryKey:[`/api/bazza/routes/${C}/assignments`]}),i.invalidateQueries({queryKey:[`/api/bazza/routes/${C}/stops`]}),i.invalidateQueries({queryKey:[`/api/bazza/routes/${C}`]}),i.invalidateQueries({queryKey:["/api/bazza/routes"]}),i.invalidateQueries({queryKey:["/api/maintenances"]}),i.invalidateQueries({queryKey:[`/api/bazza/assignments/maintenance/${t.id}`]});const P=s.find(L=>L.id===C);P!=null&&P.technicianId&&i.invalidateQueries({queryKey:[`/api/bazza/routes/technician/${P.technicianId}`]}),console.log("Successfully added maintenance to route"),r({title:"Added to Route",description:"The maintenance task has been added to the selected route."})}catch(I){console.error("Error adding maintenance to route:",I);let P="Failed to add maintenance to route. Please try again.";I instanceof Error&&(I.message.includes("client")||I.message.includes("Client")?P="Client information is missing or invalid. Please check the client details.":I.message.includes("route stop")?P="Could not create a route stop. Make sure the route is properly configured.":I.message.includes("route")||I.message.includes("Route")?P="Route information is missing or invalid. Please check the route details.":I.message.includes("Foreign key")&&(P="Database constraint error. The client may not be assigned to this route.")),r({title:"Error",description:P,variant:"destructive"})}finally{o(!1)}};return n.jsxs(Ae,{ref:m,className:`overflow-hidden border-amber-200 ${g?"opacity-50":""}`,children:[n.jsx(Be,{className:"pb-2 bg-amber-50",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx(Ve,{className:"text-base",children:(j=(v=t.client)==null?void 0:v.user)==null?void 0:j.name}),n.jsxs(ct,{className:"text-xs flex items-center mt-1",children:[n.jsx(bi,{className:"h-3 w-3 mr-1"}),((E=(N=t.client)==null?void 0:N.user)==null?void 0:E.address)||((S=(_=t.client)==null?void 0:_.client)==null?void 0:S.address)||"No address"]})]}),n.jsx("div",{children:t.status&&n.jsx(Ze,{className:"bg-amber-100 text-amber-800 hover:bg-amber-200",children:t.status.replace("_"," ")})})]})}),n.jsx(Ee,{className:"pb-2",children:n.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ur,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:h(t.scheduleDate)})]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("span",{className:"text-sm font-medium",children:"Type: "}),n.jsx("span",{className:"text-sm",children:d(t.type)})]}),t.notes&&n.jsxs("div",{className:"mt-2 text-sm",children:[n.jsx("span",{className:"font-medium",children:"Notes: "}),n.jsx("span",{className:"text-muted-foreground",children:t.notes.length>100?`${t.notes.substring(0,100)}...`:t.notes})]})]})}),n.jsxs(Pn,{className:"pt-2 flex justify-between",children:[n.jsxs(oi,{children:[n.jsx(li,{asChild:!0,children:n.jsxs(H,{variant:"outline",size:"sm",disabled:a||s.length===0,children:[n.jsx(gi,{className:"h-4 w-4 mr-1"}),"Add to Route ",a&&n.jsx(ro,{size:"sm",className:"ml-2"})]})}),n.jsxs(Yr,{align:"end",children:[n.jsx(_m,{children:"Select Route"}),n.jsx(sl,{}),s.map(C=>n.jsxs(bt,{onClick:()=>p(C.id),disabled:a,children:[C.name," (",C.dayOfWeek,")"]},C.id))]})]}),n.jsxs(H,{variant:"outline",size:"sm",children:[n.jsx(fr,{className:"h-4 w-4 mr-1"}),"Details"]})]})]},t.id)}function Cce({route:t,onRouteClick:e}){const{toast:s}=Lt(),r=jn(),{stops:i=[]}=Z9(t.id),a=Ne.useContext(yS),[{isOver:o},c]=bce(()=>({accept:rN.MAINTENANCE,drop:g=>(console.log("Drop received item:",g),g.maintenanceId&&g.maintenance?d(g.maintenanceId,g.maintenance):(console.error("Invalid drop item received:",g),s({title:"Error",description:"Could not process the dragged item. Please try again.",variant:"destructive"})),{routeId:t.id}),collect:g=>({isOver:!!g.isOver()}),canDrop:g=>(console.log("Checking if item can be dropped:",g),!0)})),d=async(g,m)=>{try{if(console.log(`Dropping maintenance ${g} onto route ${t.id}`),!m.client||!m.client.client||!m.client.client.id){console.error("Maintenance is missing client information"),s({title:"Missing Information",description:"This maintenance task doesn't have proper client information. Cannot assign to route.",variant:"destructive"});return}const p=new Date(m.scheduleDate);await Wy({routeId:t.id,maintenanceId:g,date:p.toISOString().split("T")[0],status:"scheduled",notes:null,maintenance:m}),console.log("Assignment created successfully");try{console.log("Forcing immediate refresh of maintenance data"),a&&(a(E=>({...E,[g]:!0})),window.lastAssignedMaintenanceId=g);const j={...r.getQueryData(["maintenanceAssignments"])||{},[g]:!0};r.setQueryData(["maintenanceAssignments"],j);const N=await pt("/api/maintenances");r.setQueryData(["/api/maintenances"],N)}catch(v){console.error("Error updating assignment cache:",v)}r.invalidateQueries({queryKey:[`/api/bazza/routes/${t.id}/assignments`]}),r.invalidateQueries({queryKey:[`/api/bazza/routes/${t.id}/stops`]}),r.invalidateQueries({queryKey:[`/api/bazza/routes/${t.id}`]}),r.invalidateQueries({queryKey:["/api/bazza/routes"]}),r.invalidateQueries({queryKey:["/api/maintenances"]}),r.invalidateQueries({queryKey:[`/api/bazza/assignments/maintenance/${g}`]}),t!=null&&t.technicianId&&r.invalidateQueries({queryKey:[`/api/bazza/routes/technician/${t.technicianId}`]}),s({title:"Maintenance Added",description:`Added maintenance task to route "${t.name}".`})}catch(p){console.error("Error dropping maintenance onto route:",p);let v="Failed to add maintenance to route. Please try again.";p instanceof Error&&(p.message.includes("client")||p.message.includes("Client")?v="Client information is missing or invalid. Please check the client details.":p.message.includes("route stop")?v="Could not create a route stop. Make sure the route is properly configured.":p.message.includes("route")||p.message.includes("Route")?v="Route information is missing or invalid. Please check the route details.":p.message.includes("Foreign key")&&(v="Database constraint error. The client may not be assigned to this route.")),s({title:"Error",description:v,variant:"destructive"})}},h=g=>g.charAt(0).toUpperCase()+g.slice(1);return n.jsxs(Ae,{ref:c,className:`cursor-pointer hover:bg-accent/10 transition-colors ${o?"border-primary border-2":""}`,onClick:()=>e(t),children:[n.jsx(Be,{className:"pb-2",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx(Ve,{className:"text-base",children:t.name}),n.jsx(ct,{className:"text-xs mt-1",children:h(t.dayOfWeek)})]}),n.jsxs("div",{className:"flex flex-col items-end gap-1",children:[n.jsx(Ze,{className:`${t.type==="residential"?"bg-sky-100 text-sky-800":t.type==="commercial"?"bg-indigo-100 text-indigo-800":"bg-purple-100 text-purple-800"} hover:bg-opacity-80`,children:t.type.charAt(0).toUpperCase()+t.type.slice(1)}),n.jsxs(Ze,{variant:"outline",className:"text-xs",children:[i.length," ",i.length===1?"Stop":"Stops"]})]})]})}),n.jsx(Ee,{className:"py-2",children:n.jsxs("div",{className:"text-sm flex flex-col gap-1",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Start time:"}),n.jsx("span",{className:"font-medium",children:t.startTime||"N/A"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"End time:"}),n.jsx("span",{className:"font-medium",children:t.endTime||"N/A"})]}),t.region&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Region:"}),n.jsx("span",{className:"font-medium",children:t.region})]})]})}),n.jsx(Pn,{className:"pt-1 pb-3",children:n.jsxs("div",{className:"w-full",children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:t.description||"No description available"}),n.jsx("div",{className:"mt-2 flex justify-end",children:n.jsxs(Ze,{variant:"outline",className:"text-xs",children:[n.jsx(ym,{className:"h-3 w-3 mr-1"}),"View Details"]})})]})})]},t.id)}function Sce({technicians:t,maintenances:e,selectedTechnicianId:s,onTechnicianSelect:r,onRouteSelect:i,onAddRouteClick:a,selectedDay:o="all",onDayChange:c}){var O;const{toast:d}=Lt(),h=jn(),[g,m]=y.useState({}),[p,v]=y.useState(null),[j,N]=y.useState(!1),E=[{value:"all",label:"All days"},{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}];y.useEffect(()=>{const V=window.lastAssignedMaintenanceId;V&&V!==p&&(v(V),m(B=>({...B,[V]:!0})))},[p]);const{technicianRoutes:_,isTechnicianRoutesLoading:S,technicianRoutesError:C}=K9(s),I=y.useMemo(()=>{const V=_||[];return o==="all"?V:V.filter(B=>B.dayOfWeek===o)},[_,o]),P=y.useMemo(()=>(e||[]).filter(B=>!(!B||!B.id||g[B.id]||p===B.id)),[e,g,p]),L=V=>{c&&c(V)},T=V=>{r(V==="all"?null:parseInt(V))},M=V=>{i&&i(V)},k=async()=>{if(!(P.length===0||I.length===0)){N(!0);try{for(const V of P){const B=I[0],Y=new Date(V.scheduleDate);if(!V.client||!V.client.client||!V.client.client.id){console.error(`Maintenance ${V.id} is missing client information, skipping`);continue}try{await Wy({routeId:B.id,maintenanceId:V.id,date:Y.toISOString().split("T")[0],status:"scheduled",notes:null,maintenance:V}),m(z=>({...z,[V.id]:!0})),v(V.id),window.lastAssignedMaintenanceId=V.id}catch(z){console.error(`Error adding maintenance ${V.id} to route ${B.id}:`,z)}}h.invalidateQueries({queryKey:["/api/bazza/routes"]}),h.invalidateQueries({queryKey:["/api/maintenances"]}),s&&h.invalidateQueries({queryKey:[`/api/bazza/routes/technician/${s}`]}),d({title:"Bulk Assignment Complete",description:`Added ${P.length} maintenance tasks to the route.`})}catch(V){console.error("Error in bulk assignment:",V),d({title:"Error",description:"There was an error adding all maintenances to the route. Some may have been added successfully.",variant:"destructive"})}finally{N(!1)}}};return n.jsx(yS.Provider,{value:m,children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[n.jsxs("div",{className:"lg:col-span-3",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx(Wr,{htmlFor:"technician-select",children:"Technician"}),n.jsxs(gt,{value:s?String(s):"all",onValueChange:T,children:[n.jsx(ut,{id:"technician-select",children:n.jsx(xt,{placeholder:"Select a technician"})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"all",children:"All Technicians"}),t&&t.length>0?t.map(V=>n.jsx(ue,{value:String(V.id),children:V.name},V.id)):n.jsx(ue,{value:"loading",disabled:!0,children:"No technicians available"})]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx(Wr,{htmlFor:"day-select",children:"Day"}),n.jsxs(gt,{value:o,onValueChange:L,children:[n.jsx(ut,{id:"day-select",children:n.jsx(xt,{placeholder:"Select a day"})}),n.jsx(ht,{children:E.map(V=>n.jsx(ue,{value:V.value,children:V.label},V.value))})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Technicians"}),n.jsx(qd,{className:"h-96 rounded-md border",children:n.jsx("div",{className:"p-4 grid grid-cols-1 gap-3",children:t&&t.length>0?t.map(V=>n.jsx(Ae,{className:`cursor-pointer hover:bg-accent transition-colors ${s===V.id?"bg-accent":""}`,onClick:()=>r(V.id),children:n.jsxs(Ee,{className:"p-4 flex items-center gap-2",children:[n.jsx(hg,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:V.name}),V.userId&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:["ID: ",V.id]})]})]})},V.id)):n.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No technicians available"})})})]}),a&&n.jsx("div",{className:"mt-4 text-center",children:n.jsxs(H,{onClick:()=>a&&a(),variant:"default",size:"sm",className:"bg-amber-600 hover:bg-amber-700",children:[n.jsx(os,{className:"h-4 w-4 mr-2"}),"Create Route"]})})]}),n.jsxs("div",{className:"lg:col-span-5",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold",children:[s?`Routes for ${((O=t.find(V=>V.id===s))==null?void 0:O.name)||"Selected Technician"}`:"All Routes",o!=="all"&&` (${o.charAt(0).toUpperCase()+o.slice(1)})`]}),I.length>0&&P.length>0&&n.jsx(H,{onClick:k,variant:"outline",size:"sm",disabled:j,children:j?n.jsxs(n.Fragment,{children:[n.jsx(ro,{size:"sm",className:"mr-2"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(gi,{className:"h-4 w-4 mr-2"}),"Add All to First Route"]})})]}),S?n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx(ro,{size:"lg"})}):C?n.jsxs(Cr,{variant:"destructive",children:[n.jsx(fs,{className:"h-4 w-4"}),n.jsx(eo,{children:"Error"}),n.jsx(Sr,{children:"Failed to load routes. Please try again later."})]}):I.length>0?n.jsx(qd,{className:"h-[600px] rounded-md border",children:n.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:I.map(V=>n.jsx(Cce,{route:V,onRouteClick:M},V.id))})}):n.jsxs("div",{className:"text-center py-8 border rounded-md",children:[n.jsx(tn,{className:"h-12 w-12 mx-auto text-muted-foreground"}),n.jsxs("p",{className:"mt-2 text-lg font-medium",children:["No routes found for this technician",o!=="all"?` on ${o}`:"","."]}),a&&n.jsxs(H,{onClick:()=>a&&a(),variant:"outline",className:"mt-4",children:[n.jsx(os,{className:"h-4 w-4 mr-2"}),"Create New Route"]})]})]}),n.jsxs("div",{className:"lg:col-span-4",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Unassigned Maintenances"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag maintenance tasks onto routes to assign them"})]}),P.length>0?n.jsx(qd,{className:"h-[600px] rounded-md border",children:n.jsx("div",{className:"p-4 grid grid-cols-1 gap-4",children:P.map(V=>n.jsx(Nce,{maintenance:V,availableRoutes:I},V.id))})}):n.jsxs("div",{className:"text-center py-8 border rounded-md",children:[n.jsx(mu,{className:"h-12 w-12 mx-auto text-muted-foreground"}),n.jsx("p",{className:"mt-2 text-lg font-medium",children:"All maintenance tasks have been assigned"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"There are no unassigned maintenance tasks at this time"})]})]})]})})}const Ace=Sg({name:yr().min(1,"Route name is required"),technicianId:yr().min(1,"Technician is required"),dayOfWeek:yr().min(1,"Day of week is required"),startTime:yr().min(1,"Start time is required"),endTime:yr().min(1,"End time is required"),description:yr().optional(),type:yr().default("residential"),region:yr().optional(),active:bh().optional().default(!0)});function fB({isOpen:t,onClose:e,onSubmit:s,onSuccess:r,route:i,technicians:a}){console.log("RouteFormDialog: Rendering with isOpen =",t);const{toast:o}=Lt(),c=!!i,d=mn({resolver:pn(Ace),defaultValues:{name:(i==null?void 0:i.name)||"",technicianId:i!=null&&i.technicianId?String(i.technicianId):"",dayOfWeek:(i==null?void 0:i.dayOfWeek)||"",startTime:(i==null?void 0:i.startTime)||"08:00",endTime:(i==null?void 0:i.endTime)||"17:00",description:(i==null?void 0:i.description)||"",type:(i==null?void 0:i.type)||"residential",region:(i==null?void 0:i.region)||"",active:(i==null?void 0:i.active)??!0}}),h=Pt({mutationFn:j=>Ale(j),onSuccess:j=>{if(console.log("Route created successfully:",j),o({title:"Route created",description:"The route has been successfully created."}),d.reset(),s&&s(),r&&r(),ga.invalidateQueries({queryKey:["/api/bazza/routes"]}),j&&j.technicianId)console.log(`Invalidating technician routes for ID: ${j.technicianId}`),ga.invalidateQueries({queryKey:["/api/bazza/routes/technician",j.technicianId]});else{const N=parseInt(d.getValues().technicianId);N&&(console.log(`Invalidating technician routes for form value ID: ${N}`),ga.invalidateQueries({queryKey:["/api/bazza/routes/technician",N]}))}ga.invalidateQueries({queryKey:["/api/bazza/routes/technician"]})},onError:j=>{console.error("Error creating route:",j),o({title:"Error",description:"Failed to create the route. Please try again.",variant:"destructive"})}}),g=Pt({mutationFn:j=>{if(!i)throw new Error("No route to update");return Ele(i.id,j)},onSuccess:j=>{console.log("Route updated successfully:",j),o({title:"Route updated",description:"The route has been successfully updated."}),d.reset(),s&&s(),r&&r(),ga.invalidateQueries({queryKey:["/api/bazza/routes"]});const N=(i==null?void 0:i.technicianId)||(j==null?void 0:j.technicianId)||(d.getValues().technicianId?parseInt(d.getValues().technicianId):null);N&&(console.log(`Invalidating technician routes for ID: ${N}`),ga.invalidateQueries({queryKey:["/api/bazza/routes/technician",N]})),ga.invalidateQueries({queryKey:["/api/bazza/routes/technician"]})},onError:j=>{console.error("Error updating route:",j),o({title:"Error",description:"Failed to update the route. Please try again.",variant:"destructive"})}}),m=j=>{const N={name:j.name,technicianId:j.technicianId&&j.technicianId!=="0"?parseInt(j.technicianId):null,dayOfWeek:j.dayOfWeek,startTime:j.startTime,endTime:j.endTime,description:j.description||null,region:j.region||null,isActive:j.active,type:j.type||"residential",isRecurring:!0,frequency:"weekly",color:null,weekNumber:null};console.log("Submitting route data:",JSON.stringify(N,null,2)),c&&i?g.mutate(N):h.mutate(N)},p=h.isPending||g.isPending,v=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}];return n.jsx(An,{open:t,onOpenChange:j=>!j&&e(),children:n.jsxs(wn,{className:"sm:max-w-[500px] max-h-[85vh] overflow-y-auto flex flex-col",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:c?"Edit Route":"Create New Route"}),n.jsx(ws,{children:c?"Update the route details below.":"Fill in the details below to create a new route."})]}),n.jsx(fn,{...d,children:n.jsxs("form",{onSubmit:d.handleSubmit(m),className:"space-y-6 pb-16 overflow-y-auto",style:{maxHeight:"calc(80vh - 120px)"},children:[n.jsx(J,{control:d.control,name:"name",render:({field:j})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Route Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter route name",...j})}),n.jsx(ne,{})]})}),n.jsx(J,{control:d.control,name:"technicianId",render:({field:j})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Technician"}),n.jsx(Q,{children:n.jsxs(gt,{onValueChange:j.onChange,value:j.value,defaultValue:j.value,children:[n.jsx(ut,{className:"w-full",children:n.jsx(xt,{placeholder:"Select a technician"})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"0",children:"Unassigned"}),a&&a.length>0?a.map(N=>{var _;let E="Unnamed technician";return N.name&&typeof N.name=="string"&&N.name.trim()!==""?E=N.name:(_=N.user)!=null&&_.name&&typeof N.user.name=="string"?E=N.user.name:E=`Technician ${N.id}`,n.jsx(ue,{value:String(N.id),children:E},N.id)}):n.jsx(ue,{value:"no-techs",disabled:!0,children:"No technicians available"})]})]})}),n.jsx(ne,{})]})}),n.jsx(J,{control:d.control,name:"dayOfWeek",render:({field:j})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Day of Week"}),n.jsx(Q,{children:n.jsxs(gt,{onValueChange:j.onChange,value:j.value,defaultValue:j.value,children:[n.jsx(ut,{className:"w-full",children:n.jsx(xt,{placeholder:"Select a day"})}),n.jsx(ht,{children:v.map(N=>n.jsx(ue,{value:N.value,children:N.label},N.value))})]})}),n.jsx(ne,{})]})}),n.jsx(J,{control:d.control,name:"type",render:({field:j})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Route Type"}),n.jsx(Q,{children:n.jsxs(gt,{onValueChange:j.onChange,value:j.value,defaultValue:j.value,children:[n.jsx(ut,{className:"w-full",children:n.jsx(xt,{placeholder:"Select route type"})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"residential",children:"Residential"}),n.jsx(ue,{value:"commercial",children:"Commercial"}),n.jsx(ue,{value:"mixed",children:"Mixed"})]})]})}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(J,{control:d.control,name:"startTime",render:({field:j})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Start Time"}),n.jsx(Q,{children:n.jsx(ve,{type:"time",...j})}),n.jsx(ne,{})]})}),n.jsx(J,{control:d.control,name:"endTime",render:({field:j})=>n.jsxs(Z,{children:[n.jsx(X,{children:"End Time"}),n.jsx(Q,{children:n.jsx(ve,{type:"time",...j})}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:d.control,name:"region",render:({field:j})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Region"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter region (e.g., North, East, etc.)",...j})}),n.jsx(ot,{children:"Optional region for this route."}),n.jsx(ne,{})]})}),n.jsx(J,{control:d.control,name:"description",render:({field:j})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Description"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter route description",...j})}),n.jsx(ot,{children:"Optional description of this route."}),n.jsx(ne,{})]})}),n.jsx(J,{control:d.control,name:"active",render:({field:j})=>n.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[n.jsx(Q,{children:n.jsx(Ri,{checked:j.value,onCheckedChange:j.onChange})}),n.jsxs("div",{className:"space-y-1 leading-none",children:[n.jsx(X,{children:"Active Route"}),n.jsx(ot,{children:"Inactive routes will not be included in scheduling."})]})]})}),n.jsxs(hs,{className:"sticky bottom-0 pt-4 pb-3 bg-background mt-4",children:[n.jsx(H,{type:"button",variant:"outline",onClick:e,disabled:p,children:"Cancel"}),n.jsx(H,{type:"submit",disabled:p,children:p?n.jsxs(n.Fragment,{children:[n.jsx(ro,{size:"sm",className:"mr-2"}),c?"Updating...":"Creating..."]}):c?"Update Route":"Create Route"})]})]})})]})})}const Ece=["regular_service","chemical_check","filter_cleaning","equipment_inspection","water_testing","winterization","opening","green_pool_treatment"],_ce=q.object({clientId:q.coerce.number({required_error:"Please select a client"}),technicianId:q.coerce.number({required_error:"Please select a technician"}),scheduleDate:q.date({required_error:"Please select a date"}),type:q.string({required_error:"Please select a maintenance type"}),notes:q.string().optional()});function Ice({open:t,onOpenChange:e,initialDate:s}){const{toast:r}=Lt(),i=jn(),[a,o]=y.useState(!1),{data:c}=wt({queryKey:["/api/clients"]}),{data:d}=wt({queryKey:["/api/technicians"]}),h=mn({resolver:pn(_ce),defaultValues:{scheduleDate:s||new Date,notes:""},mode:"onChange"}),g=Pt({mutationFn:async v=>(console.log("Mutation function called with values:",v),await pt("/api/maintenances",{method:"POST",body:JSON.stringify(v)})),onSuccess:v=>{console.log("Maintenance created successfully:",v),i.invalidateQueries({queryKey:["/api/maintenances"]}),i.invalidateQueries({queryKey:["/api/maintenances/upcoming"]}),i.invalidateQueries({queryKey:["/api/dashboard/summary"]}),r({title:"Maintenance scheduled",description:"The maintenance appointment has been scheduled successfully."}),h.reset(),e(!1)},onError:v=>{r({title:"Failed to schedule maintenance",description:"There was an error scheduling the maintenance. Please try again.",variant:"destructive"})}});function m(v){if(!v.scheduleDate){h.setError("scheduleDate",{type:"manual",message:"Please select a date"});return}try{const j={clientId:Number(v.clientId),technicianId:Number(v.technicianId),scheduleDate:v.scheduleDate.toISOString(),type:v.type,notes:v.notes};console.log("Submitting maintenance with data:",j),o(!0),g.mutate(j,{onSettled:()=>{o(!1)}})}catch(j){console.error("Error formatting maintenance data:",j),r({title:"Form submission error",description:"There was a problem with the form data. Please check all fields and try again.",variant:"destructive"}),o(!1)}}const p=v=>v.split("_").map(j=>j.charAt(0).toUpperCase()+j.slice(1)).join(" ");return n.jsx(An,{open:t,onOpenChange:e,children:n.jsxs(wn,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[n.jsx(Tn,{children:n.jsx(Mn,{children:"Schedule Maintenance"})}),n.jsx(fn,{...h,children:n.jsxs("form",{onSubmit:h.handleSubmit(m),className:"space-y-4",children:[n.jsx(J,{control:h.control,name:"clientId",render:({field:v})=>{var j;return n.jsxs(Z,{children:[n.jsx(X,{children:"Client"}),n.jsxs(gt,{onValueChange:v.onChange,defaultValue:(j=v.value)==null?void 0:j.toString(),children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a client"})})}),n.jsx(ht,{children:c==null?void 0:c.map(N=>n.jsxs(ue,{value:(N.id||0).toString(),children:[N.user.name," ",N.companyName?`(${N.companyName})`:""]},N.id||0))})]}),n.jsx(ne,{})]})}}),n.jsx(J,{control:h.control,name:"technicianId",render:({field:v})=>{var j;return n.jsxs(Z,{children:[n.jsx(X,{children:"Technician"}),n.jsxs(gt,{onValueChange:v.onChange,defaultValue:(j=v.value)==null?void 0:j.toString(),children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a technician"})})}),n.jsx(ht,{children:d==null?void 0:d.map(N=>n.jsxs(ue,{value:N.id.toString(),children:[N.user.name," - ",N.specialization]},N.id))})]}),n.jsx(ne,{})]})}}),n.jsx(J,{control:h.control,name:"scheduleDate",render:({field:v})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[v.value?ft(v.value,"PPP"):n.jsx("span",{children:"Pick a date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:v.value,onSelect:j=>{j&&(v.onChange(j),h.trigger("scheduleDate"))},initialFocus:!0,disabled:j=>j<new Date(new Date().setHours(0,0,0,0))})})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:h.control,name:"type",render:({field:v})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Maintenance Type"}),n.jsxs(gt,{onValueChange:v.onChange,defaultValue:v.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select maintenance type"})})}),n.jsx(ht,{children:Ece.map(j=>n.jsx(ue,{value:j,children:p(j)},j))})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:h.control,name:"notes",render:({field:v})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Notes"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter additional details like time and special instructions",className:"resize-none",...v})}),n.jsx(ot,{children:"Include time of appointment and any specific instructions."}),n.jsx(ne,{})]})}),n.jsxs(hs,{children:[n.jsx(H,{type:"button",variant:"outline",onClick:()=>e(!1),disabled:a,children:"Cancel"}),n.jsx(H,{type:"submit",disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Scheduling..."]}):"Schedule Maintenance"})]})]})})]})})}function Tce(){const{toast:t}=Lt(),e=jn(),[,s]=_n(),[r,i]=y.useState(new Date),[a,o]=y.useState(new Date),[c,d]=y.useState(!1),[h,g]=y.useState("all"),[m,p]=y.useState(""),[v,j]=y.useState(null),[N,E]=y.useState(!1),[_,S]=y.useState(!1),[C,I]=y.useState(null),[P,L]=y.useState("calendar"),[T,M]=y.useState(null),[k,O]=y.useState(null),[V,B]=y.useState(!1),[Y,z]=y.useState(void 0),{data:G,isLoading:he,error:le}=wt({queryKey:["/api/technicians-with-users"],staleTime:60*1e3,refetchOnWindowFocus:!1,retry:2,retryDelay:1e3,select:ee=>(console.log("Raw technicians data from API:",ee),Array.isArray(ee)&&(console.log("Received technician count:",ee.length),console.log("Technician data example:",ee.slice(0,2).map(de=>{var pe;return{id:de.id,name:(pe=de==null?void 0:de.user)==null?void 0:pe.name,active:de.active,hasUser:!!de.user,userId:de.userId}}))),ee)});y.useEffect(()=>{G&&(console.log("Successfully loaded technicians:",(G==null?void 0:G.length)||0),Array.isArray(G)&&G.length>0?(console.log("First technician object (full):",G[0]),console.log("All technicians summary:",G.map(ee=>({id:ee.id,userId:ee.userId,user:ee.user?{id:ee.user.id,name:ee.user.name||"[No name]",email:ee.user.email||"[No email]"}:"[No user]",active:ee.active})))):console.log("Technician data not in expected array format or empty")),le&&console.error("Error loading technicians:",le)},[G,le]),y.useEffect(()=>{console.log("Technicians data:",{loading:he,count:Array.isArray(G)?G.length:0,error:le?le.message:null})},[G,he,le]);const{data:se,isLoading:re}=wt({queryKey:["/api/maintenances"],select:ee=>{console.log("Raw maintenance data from API:",ee);const de=ee.filter(pe=>{const Me=pe.scheduleDate||"";return typeof Me=="string"&&Me.includes("2025-03-09")?(console.log(`Found March 9 record - ID: ${pe.id}, Date: ${Me}`),!0):!1});return de.length>0?(console.log(`Found ${de.length} maintenance records for March 9, 2025:`),de.forEach(pe=>{var Me,Le;console.log(`- ID: ${pe.id}, Client: ${(Le=(Me=pe.client)==null?void 0:Me.user)==null?void 0:Le.name}, Status: ${pe.status}`),console.log(`  Date value: "${pe.scheduleDate}" (${typeof pe.scheduleDate})`)})):console.log("No March 9, 2025 maintenance records found in API response"),ee}}),me=se==null?void 0:se.filter(ee=>{if(console.log("Filtering maintenance record:",ee.id,ee),r)try{console.log(`Comparing maintenance date "${ee.scheduleDate}" with filter date "${ft(r,"yyyy-MM-dd")}"`);let de;if(typeof ee.scheduleDate=="string"&&ee.scheduleDate.length<=10){const pe=ft(r,"yyyy-MM-dd");if(console.log(`String comparison: "${ee.scheduleDate}" vs "${pe}"`),ee.scheduleDate!==pe)return console.log(`Date filter excluded maintenance #${ee.id} - date strings don't match`),!1}else{const pe=new Date(ee.scheduleDate);if(console.log(`Date object comparison: ${pe.toISOString()} vs ${r.toISOString()}`),!vi(pe,r))return console.log(`Date filter excluded maintenance #${ee.id} - not same day`),!1}}catch(de){return console.error("Error parsing date:",ee.scheduleDate,de),!1}return h!=="all"&&ee.status!==h?(console.log(`Status filter excluded maintenance #${ee.id} - status ${ee.status} != ${h}`),!1):m&&!ee.client.user.name.toLowerCase().includes(m.toLowerCase())?(console.log(`Search filter excluded maintenance #${ee.id} - name doesn't match "${m}"`),!1):(console.log(`Maintenance #${ee.id} passed all filters`),!0)}),Ce=Pt({mutationFn:async({id:ee,status:de})=>await pt(`/api/maintenances/${ee}`,{method:"PATCH",body:JSON.stringify({status:de})}),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/maintenances"]}),e.invalidateQueries({queryKey:["/api/maintenances/upcoming"]}),e.invalidateQueries({queryKey:["/api/dashboard/summary"]}),t({title:"Maintenance updated",description:"The maintenance status has been updated successfully."}),E(!1)},onError:ee=>{t({title:"Failed to update maintenance",description:"There was an error updating the maintenance status. Please try again.",variant:"destructive"}),E(!1)}}),$=(ee,de)=>{j(ee),E(!0),Ce.mutate({id:ee.id,status:de})},xe=()=>{o(Wee(a,1))},te=()=>{o(Ea(a,1))},ae=()=>{i(void 0)};return n.jsxs("div",{children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground font-heading",children:"Maintenance"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3 md:mt-0",children:[n.jsxs("div",{className:"relative w-full sm:w-auto",children:[n.jsx(ve,{type:"text",placeholder:"Search clients...",className:"pl-10 pr-4 w-full",value:m,onChange:ee=>p(ee.target.value)}),n.jsx(Bi,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsxs(H,{variant:"outline",className:"flex gap-2",children:[n.jsx(tn,{className:"h-4 w-4"}),r?ft(r,"PPP"):"Pick a date"]})}),n.jsxs(Es,{className:"w-auto p-0",align:"end",children:[n.jsxs("div",{className:"p-2 flex justify-between items-center border-b",children:[n.jsx("span",{className:"text-sm font-medium",children:"Filter by date"}),r&&n.jsx(H,{variant:"ghost",size:"sm",onClick:ae,className:"h-8 px-2 text-xs",children:"Clear"})]}),n.jsx(Rs,{mode:"single",selected:r,onSelect:i,initialFocus:!0})]})]}),n.jsxs(oi,{children:[n.jsx(li,{asChild:!0,children:n.jsxs(H,{variant:"outline",className:"flex gap-2",children:[n.jsx(Cp,{className:"h-4 w-4"}),h!=="all"?n.jsx("span",{className:"capitalize",children:h.replace("_"," ")}):"Status"]})}),n.jsxs(Yr,{align:"end",children:[n.jsx(bt,{onClick:()=>g("all"),children:"All Status"}),n.jsx(sl,{}),n.jsx(bt,{onClick:()=>g("scheduled"),children:"Scheduled"}),n.jsx(bt,{onClick:()=>g("in_progress"),children:"In Progress"}),n.jsx(bt,{onClick:()=>g("completed"),children:"Completed"}),n.jsx(bt,{onClick:()=>g("cancelled"),children:"Cancelled"})]})]}),n.jsxs(H,{className:"bg-primary hover:bg-primary/90 text-white font-medium",onClick:()=>d(!0),children:[n.jsx(gi,{className:"h-4 w-4 mr-1"}),"Schedule Maintenance"]})]})]})]}),n.jsxs(ps,{defaultValue:"calendar",className:"mb-6",onValueChange:ee=>L(ee),children:[n.jsxs(gs,{className:"grid grid-cols-4 w-full md:w-auto",children:[n.jsxs(Ge,{value:"calendar",className:"flex items-center gap-2",onClick:()=>L("calendar"),children:[n.jsx(tn,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Calendar"})]}),n.jsxs(Ge,{value:"list",className:"flex items-center gap-2",onClick:()=>{L("list"),s("/maintenance/list")},children:[n.jsx(pL,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"List"})]}),n.jsxs(Ge,{value:"map",className:"flex items-center gap-2",onClick:()=>{L("map"),s("/maintenance/map")},children:[n.jsx(gh,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Map"})]}),n.jsxs(Ge,{value:"routes",className:"flex items-center gap-2",children:[n.jsx(KC,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Routes"})]})]}),n.jsx(Qe,{value:"calendar",children:n.jsx(Ae,{children:n.jsxs(Ee,{className:"p-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(H,{variant:"outline",size:"icon",onClick:xe,children:n.jsx(Vl,{className:"h-4 w-4"})}),n.jsx("h2",{className:"text-lg font-semibold",children:ft(a,"MMMM yyyy")}),n.jsx(H,{variant:"outline",size:"icon",onClick:te,children:n.jsx(ad,{className:"h-4 w-4"})})]}),r&&n.jsxs(Ze,{variant:"outline",className:"flex items-center gap-1 px-3 py-1",children:[n.jsx(tn,{className:"h-3 w-3"}),ft(r,"PPP"),n.jsx(H,{variant:"ghost",size:"icon",className:"h-4 w-4 ml-2 p-0",onClick:ae,children:n.jsx(Np,{className:"h-3 w-3"})})]})]}),re?n.jsx("div",{className:"space-y-4",children:n.jsx(_e,{className:"h-96 w-full"})}):n.jsx(ble,{maintenances:me||[],month:a,onStatusUpdate:$,isUpdatingStatus:N,selectedMaintenance:v})]})})}),n.jsx(Qe,{value:"list",children:n.jsx(Ae,{children:n.jsx(Ee,{className:"p-6",children:n.jsx(G9,{maintenances:me||[],isLoading:re,onStatusUpdate:$,isUpdatingStatus:N,selectedMaintenance:v})})})}),n.jsx(Qe,{value:"map",children:n.jsx(Ae,{children:n.jsx(Ee,{className:"p-6",children:n.jsx(Y9,{maintenances:me||[],isLoading:re,selectedView:P,selectedTechnician:T,selectedDay:k,onStatusUpdate:$,isUpdatingStatus:N,selectedMaintenance:v})})})}),n.jsx(Qe,{value:"routes",children:n.jsx(Ae,{children:n.jsx(Ee,{className:"p-6",children:n.jsx(Sce,{technicians:(()=>{const ee=Array.isArray(G)?G.filter(de=>de&&de.active!==!1).map(de=>{var pe;return{id:de.id,name:((pe=de.user)==null?void 0:pe.name)||`Technician ${de.id}`,userId:de.userId,active:de.active}}):[];return console.log("Properly transformed techs for routes view:",ee),ee})(),maintenances:me||[],selectedTechnicianId:T,onTechnicianSelect:M,onRouteSelect:ee=>{z(ee),t({title:"Route selected",description:`Selected route: ${ee.name}`})},onAddRouteClick:()=>{try{console.log("Add Route button clicked - opening form dialog"),z(void 0),B(!0)}catch(ee){console.error("Error opening route form:",ee),t({title:"Error",description:"There was an error opening the route form. Please try again.",variant:"destructive"})}}})})})})]}),c&&n.jsx(Ice,{open:c,onOpenChange:d,initialDate:new Date,onSuccess:()=>{e.invalidateQueries({queryKey:["/api/maintenances"]}),e.invalidateQueries({queryKey:["/api/maintenances/upcoming"]}),e.invalidateQueries({queryKey:["/api/dashboard/summary"]}),d(!1),t({title:"Maintenance scheduled",description:"The maintenance has been scheduled successfully."})}}),_&&C&&n.jsx(mS,{open:_,onOpenChange:S,maintenanceId:C.id,clientId:C.clientId,onSuccess:()=>{e.invalidateQueries({queryKey:["/api/maintenances"]}),e.invalidateQueries({queryKey:["/api/maintenances/upcoming"]}),e.invalidateQueries({queryKey:["/api/dashboard/summary"]}),S(!1),t({title:"Maintenance report submitted",description:"The maintenance report has been submitted successfully."})}}),V&&n.jsx(fB,{isOpen:V,onClose:()=>B(!1),route:Y,technicians:Array.isArray(G)?G.filter(ee=>ee&&ee.active!==!1).map(ee=>{console.log(`Processing technician for route form: ${ee.id}`,ee);const de=ee.user&&typeof ee.user=="object"&&ee.user.name?ee.user.name:ee.name||`Technician ${ee.id}`;return console.log(`Technician ${ee.id} name resolved as: "${de}"`),{id:ee.id,name:de,userId:ee.userId,active:ee.active}}):[],onSuccess:()=>{e.invalidateQueries({queryKey:["/api/bazza/routes"]}),B(!1),t({title:Y?"Route updated":"Route created",description:Y?"The route has been updated successfully.":"The new route has been created successfully."})}})]})}function Mce(){const[,t]=_n(),[e,s]=y.useState("");y.useState(null),Tle();const{data:r,isLoading:i,error:a}=wt({queryKey:["/api/maintenances"],staleTime:5*60*1e3});wt({queryKey:["/api/technicians"],staleTime:5*60*1e3});const o=new Date;o.setHours(0,0,0,0);const c=(r==null?void 0:r.filter(h=>{var j,N,E,_,S,C,I;const g=new Date(h.scheduleDate);if(g.setHours(0,0,0,0),g<o)return!1;const m=((E=(N=(j=h.client)==null?void 0:j.user)==null?void 0:N.name)==null?void 0:E.toLowerCase())||"",p=((C=(S=(_=h.client)==null?void 0:_.client)==null?void 0:S.address)==null?void 0:C.toLowerCase())||"",v=e.toLowerCase();return m.includes(v)||p.includes(v)||((I=h.type)==null?void 0:I.toLowerCase().includes(v))||h.status.toLowerCase().includes(v)}))||[],d=()=>{t("/maintenance/add")};return a?n.jsx("div",{className:"container mx-auto p-4",children:n.jsx(Ae,{children:n.jsx(Ee,{className:"pt-6",children:n.jsxs("div",{className:"text-center text-red-500",children:[n.jsx("p",{children:"Error loading maintenance data. Please try again later."}),n.jsx("p",{className:"text-sm mt-2",children:(a==null?void 0:a.message)||"Unknown error"})]})})})}):n.jsxs("div",{className:"container mx-auto p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold mb-2 md:mb-0",children:"Maintenance Schedule"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[n.jsxs("div",{className:"relative w-full sm:w-64",children:[n.jsx(Bi,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),n.jsx(ve,{placeholder:"Search maintenance...",value:e,onChange:h=>s(h.target.value),className:"pl-8"})]}),n.jsxs(H,{onClick:d,children:[n.jsx(gi,{className:"h-4 w-4 mr-2"}),"Add Maintenance"]})]})]}),n.jsxs(ps,{defaultValue:"map",className:"w-full",children:[n.jsxs(gs,{className:"mb-4",children:[n.jsxs(Ge,{value:"calendar",onClick:()=>t("/maintenance"),children:[n.jsx(GC,{className:"h-4 w-4 mr-2"}),"Calendar"]}),n.jsxs(Ge,{value:"map",children:[n.jsx(gh,{className:"h-4 w-4 mr-2"}),"Map View"]}),n.jsxs(Ge,{value:"list",onClick:()=>t("/maintenance/list"),children:[n.jsx(KC,{className:"h-4 w-4 mr-2"}),"List View"]}),n.jsxs(Ge,{value:"routes",onClick:()=>{console.log("Navigating directly to MaintenanceList"),t("/maintenance/routes")},children:[n.jsx(ym,{className:"h-4 w-4 mr-2"}),"Routes"]})]}),n.jsx(Qe,{value:"map",className:"mt-0",children:n.jsxs(Ae,{children:[n.jsxs(Be,{className:"p-4 pb-0",children:[n.jsx(Ve,{className:"text-lg",children:"Maintenance Map"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Showing today's and upcoming maintenance appointments"})]}),n.jsx(Ee,{className:"p-4",children:n.jsx(Y9,{maintenances:c||[],isLoading:i})})]})})]})]})}function Dce({route:t,onRouteClick:e}){const s=t.technicianId===10,r=t.technicianId?s?"Travis Donald":`Technician ${t.technicianId}`:"No technician",{stops:i=[]}=Z9(t.id),a=s?"border-blue-400 border-2":"";return n.jsx(Ae,{className:`cursor-pointer hover:bg-accent transition-colors ${a}`,onClick:()=>e(t),children:n.jsxs(Ee,{className:"p-4",children:[n.jsxs("div",{className:"font-medium flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(ym,{className:"h-4 w-4 mr-2 text-primary"}),t.name,s&&n.jsx(Ze,{variant:"secondary",className:"ml-1 text-xs",children:"Travis"})]}),n.jsxs(Ze,{variant:"outline",className:"text-xs",children:[i.length," ",i.length===1?"Stop":"Stops"]})]}),n.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ur,{className:"h-3 w-3 mr-1 inline"}),n.jsx("span",{className:"capitalize",children:t.dayOfWeek||"No day specified"}),n.jsxs("span",{className:"ml-2 text-xs text-gray-400",children:["(ID: ",t.id,")"]})]}),n.jsxs("div",{className:"flex items-center mt-1",children:[n.jsx(hg,{className:"h-3 w-3 mr-1 inline"}),n.jsx("span",{children:r})]})]}),n.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[n.jsx(Ze,{variant:t.active||t.isActive?"default":"outline",children:t.active||t.isActive?"Active":"Inactive"}),t.type&&n.jsx(Ze,{variant:"outline",className:"text-xs",children:t.type})]})]})})}function kce({maintenance:t,availableRoutes:e,onAssignToRoute:s}){const r=o=>{o&&o!=="none"&&s(t.id,parseInt(o))};let i="Unknown Client",a="No address";if(t.client){const o=t.client;if(o&&typeof o=="object"&&"user"in o&&o.user){const d=o.user;typeof d=="object"&&"name"in d&&typeof d.name=="string"&&(i=d.name),typeof d=="object"&&"address"in d&&typeof d.address=="string"&&(a=d.address)}!i&&typeof o=="object"&&"companyName"in o&&typeof o.companyName=="string"&&(i=o.companyName),!i&&typeof o=="object"&&"name"in o&&typeof o.name=="string"&&(i=o.name),!a&&typeof o=="object"&&"address"in o&&typeof o.address=="string"&&(a=o.address);const c=o&&typeof o=="object"&&"client"in o?o.client:null;if(c&&typeof c=="object"){!i&&"companyName"in c&&typeof c.companyName=="string"&&(i=c.companyName),!i&&"name"in c&&typeof c.name=="string"&&(i=c.name),!a&&"address"in c&&typeof c.address=="string"&&(a=c.address);const d=c&&"location"in c?c.location:null;d&&typeof d=="object"&&!a&&"street"in d&&typeof d.street=="string"&&(a=d.street)}}return n.jsx(Ae,{className:"relative",children:n.jsxs(Ee,{className:"p-4",children:[n.jsx("div",{className:"font-medium",children:i}),n.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(bi,{className:"h-3 w-3 mr-1 inline"}),a]}),n.jsxs("div",{className:"flex items-center mt-1",children:[n.jsx(tn,{className:"h-3 w-3 mr-1 inline"}),new Date(t.scheduleDate).toLocaleDateString()||"No date"]}),n.jsxs("div",{className:"flex items-center mt-1",children:[n.jsx(fr,{className:"h-3 w-3 mr-1 inline"}),t.type||"No type specified"]})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx(Wr,{htmlFor:`route-select-${t.id}`,className:"text-xs",children:"Assign to Route"}),n.jsxs(gt,{onValueChange:r,children:[n.jsx(ut,{id:`route-select-${t.id}`,className:"mt-1",children:n.jsx(xt,{placeholder:"Select a route"})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"none",children:"None (Unassigned)"}),e.map(o=>n.jsxs(ue,{value:o.id.toString(),children:[o.name," (",o.dayOfWeek,")"]},o.id))]})]})]})]})})}function Pce({technicians:t,maintenances:e,selectedTechnicianId:s,onTechnicianSelect:r,onRouteSelect:i,onAddRouteClick:a,selectedDay:o="all",onDayChange:c}){var L;const{toast:d}=Lt(),h=jn(),[g,m]=y.useState({}),[p,v]=y.useState(!1),j=s===10;y.useEffect(()=>{j&&console.log("Travis Donald selected in SimpleRoutesView - will fetch his routes with special handling")},[j]);const{technicianRoutes:N=[],isTechnicianRoutesLoading:E,technicianRoutesError:_}=K9(s);console.log(`SimpleRoutesView - loaded ${N.length} routes for technician ID: ${s||"none"}`,"isLoading:",E,"hasError:",!!_),y.useEffect(()=>{j&&(console.log("Travis Donald routes in SimpleRoutesView:",N),N.length===0&&!E&&console.log("Warning: No routes found for Travis Donald in SimpleRoutesView component"))},[N,j,E]);const S=y.useMemo(()=>Array.isArray(N)?o==="all"?N:N.filter(T=>!T||typeof T!="object"?!1:T.dayOfWeek===o):(console.error("Routes is not an array:",N),[]),[N,o]),C=y.useMemo(()=>(e||[]).filter(M=>!(!M||!M.id||g[M.id])),[e,g]),I=T=>{i&&i(T)},P=async(T,M)=>{v(!0);try{const k=e.find(Y=>Y.id===T),O=S.find(Y=>Y.id===M);if(!k||!O)throw new Error("Maintenance or route not found");let V=null;if(k.client){const Y=k.client;Y&&typeof Y=="object"&&"id"in Y&&Y.id?V=Y.id:Y&&typeof Y=="object"&&"client"in Y&&Y.client&&typeof Y.client=="object"&&"id"in Y.client&&Y.client.id?V=Y.client.id:"clientId"in k&&k.clientId&&(V=k.clientId),console.log("Client ID resolution method:",V?"Found ID: "+V:"No ID found")}if(!V)throw new Error("Maintenance is missing client information");const B=new Date(k.scheduleDate);await Wy({routeId:O.id,maintenanceId:k.id,date:B.toISOString().split("T")[0],status:"scheduled",notes:null,maintenance:k}),m(Y=>({...Y,[k.id]:!0})),h.invalidateQueries({queryKey:["/api/bazza/routes"]}),h.invalidateQueries({queryKey:["/api/maintenances"]}),s&&h.invalidateQueries({queryKey:[`/api/bazza/routes/technician/${s}`]}),d({title:"Assignment Complete",description:`Added maintenance task to the route "${O.name}".`})}catch(k){console.error("Error assigning maintenance to route:",k),d({title:"Error",description:"Failed to assign maintenance to route. Please try again.",variant:"destructive"})}finally{v(!1)}};return n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[n.jsxs("div",{className:"lg:col-span-3",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Technicians"}),n.jsx(qd,{className:"h-96 rounded-md border",children:n.jsx("div",{className:"p-4 grid grid-cols-1 gap-3",children:t&&t.length>0?t.map(T=>n.jsx(Ae,{className:`cursor-pointer hover:bg-accent transition-colors ${s===T.id?"bg-accent":""}`,onClick:()=>r(T.id),children:n.jsxs(Ee,{className:"p-4 flex items-center gap-2",children:[n.jsx(hg,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:T.name}),T.userId&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:["ID: ",T.id]})]})]})},T.id)):n.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No technicians available"})})})]}),a&&n.jsx("div",{className:"mt-4 text-center",children:n.jsxs(H,{onClick:()=>a&&a(),variant:"default",size:"sm",className:"bg-amber-600 hover:bg-amber-700",children:[n.jsx(os,{className:"h-4 w-4 mr-2"}),"Create Route"]})})]}),n.jsxs("div",{className:"lg:col-span-5",children:[n.jsx("div",{className:"flex justify-between items-center mb-4",children:n.jsxs("h3",{className:"text-lg font-semibold",children:[s?`Routes for ${((L=t.find(T=>T.id===s))==null?void 0:L.name)||"Selected Technician"}`:"All Routes",o!=="all"&&` (${o.charAt(0).toUpperCase()+o.slice(1)})`]})}),E?n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx(ro,{size:"lg"})}):_?n.jsxs(Cr,{variant:"destructive",children:[n.jsx(fs,{className:"h-4 w-4"}),n.jsx(eo,{children:"Error"}),n.jsx(Sr,{children:"Failed to load routes. Please try again later."})]}):S.length>0?n.jsx(qd,{className:"h-[600px] rounded-md border",children:n.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:S.map(T=>n.jsx(Dce,{route:T,onRouteClick:I},T.id))})}):n.jsxs("div",{className:"text-center py-8 border rounded-md",children:[n.jsx(tn,{className:"h-12 w-12 mx-auto text-muted-foreground"}),n.jsxs("p",{className:"mt-2 text-lg font-medium",children:["No routes found for this technician",o!=="all"?` on ${o}`:"","."]}),a&&n.jsxs(H,{onClick:()=>a&&a(),variant:"outline",className:"mt-4",children:[n.jsx(os,{className:"h-4 w-4 mr-2"}),"Create New Route"]})]})]}),n.jsxs("div",{className:"lg:col-span-4",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Unassigned Maintenances"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Select routes from the dropdown to assign maintenance tasks"})]}),p&&n.jsxs("div",{className:"mb-4 flex items-center justify-center p-2 bg-muted rounded",children:[n.jsx(ro,{size:"sm",className:"mr-2"}),n.jsx("span",{children:"Assigning maintenance..."})]}),C.length>0?n.jsx(qd,{className:"h-[600px] rounded-md border",children:n.jsx("div",{className:"p-4 grid grid-cols-1 gap-4",children:C.map(T=>n.jsx(kce,{maintenance:T,availableRoutes:S,onAssignToRoute:P},T.id))})}):n.jsxs("div",{className:"text-center py-8 border rounded-md",children:[n.jsx(mu,{className:"h-12 w-12 mx-auto text-muted-foreground"}),n.jsx("p",{className:"mt-2 text-lg font-medium",children:"All maintenance tasks have been assigned"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"There are no unassigned maintenance tasks at this time"})]})]})]})}const jr=y.forwardRef(({className:t,...e},s)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:s,className:we("w-full caption-bottom text-sm",t),...e})}));jr.displayName="Table";const br=y.forwardRef(({className:t,...e},s)=>n.jsx("thead",{ref:s,className:we("[&_tr]:border-b",t),...e}));br.displayName="TableHeader";const Nr=y.forwardRef(({className:t,...e},s)=>n.jsx("tbody",{ref:s,className:we("[&_tr:last-child]:border-0",t),...e}));Nr.displayName="TableBody";const Rce=y.forwardRef(({className:t,...e},s)=>n.jsx("tfoot",{ref:s,className:we("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));Rce.displayName="TableFooter";const yn=y.forwardRef(({className:t,...e},s)=>n.jsx("tr",{ref:s,className:we("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));yn.displayName="TableRow";const Ye=y.forwardRef(({className:t,...e},s)=>n.jsx("th",{ref:s,className:we("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));Ye.displayName="TableHead";const qe=y.forwardRef(({className:t,...e},s)=>n.jsx("td",{ref:s,className:we("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));qe.displayName="TableCell";const Lce=y.forwardRef(({className:t,...e},s)=>n.jsx("caption",{ref:s,className:we("mt-4 text-sm text-muted-foreground",t),...e}));Lce.displayName="TableCaption";const Oce=Sg({clientId:yr().min(1,"Client is required"),position:fv.number().min(1,"Position must be at least 1"),estimatedDuration:fv.number().optional(),notes:yr().optional()});function Fce({isOpen:t,onClose:e,onSuccess:s,route:r}){const{toast:i}=Lt(),a=jn(),[o,c]=y.useState(""),{data:d=[],isLoading:h}=wt({queryKey:["/api/clients"],staleTime:5*60*1e3}),{data:g=[]}=wt({queryKey:[`/api/bazza/routes/${r.id}/stops`],staleTime:1*60*1e3}),m=Array.isArray(g)&&g.length>0?Math.max(...g.map(E=>E.orderIndex||E.position||0))+1:1;console.log("Calculated next position:",m,"from stops:",g);const p=mn({resolver:pn(Oce),defaultValues:{clientId:"",position:m,estimatedDuration:15,notes:""}}),v=Pt({mutationFn:E=>(console.log("Creating route stop with data:",E),fS(E)),onSuccess:()=>{i({title:"Stop added",description:"The stop has been successfully added to the route."}),console.log("Successfully added stop to route. Invalidating queries..."),a.invalidateQueries({queryKey:[`/api/bazza/routes/${r.id}/stops`]}),a.invalidateQueries({queryKey:[`/api/bazza/routes/${r.id}`]}),a.invalidateQueries({queryKey:["/api/bazza/routes"]}),r.technicianId&&a.invalidateQueries({queryKey:[`/api/bazza/routes/technician/${r.technicianId}`]}),p.reset(),s&&s()},onError:E=>{console.error("Error creating stop:",E),i({title:"Error",description:"Failed to add the stop. Please try again.",variant:"destructive"})}}),j=Array.isArray(d)?d.filter(E=>{var S;return(((S=E.user)==null?void 0:S.name)||E.name||"").toLowerCase().includes(o.toLowerCase())}):[],N=E=>{const _={routeId:r.id,clientId:parseInt(E.clientId,10),orderIndex:E.position,estimatedDuration:E.estimatedDuration||null,customInstructions:E.notes||null};console.log("Submitting stop data:",_),v.mutate(_)};return n.jsx(An,{open:t,onOpenChange:E=>!E&&e(),children:n.jsxs(wn,{className:"sm:max-w-[500px]",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:"Add Stop to Route"}),n.jsxs(ws,{children:['Add a new client stop to the route "',r.name,'".']})]}),n.jsx(fn,{...p,children:n.jsxs("form",{onSubmit:p.handleSubmit(N),className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Bce,{children:"Search Clients"}),n.jsxs("div",{className:"relative",children:[n.jsx(Bi,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(ve,{placeholder:"Search for clients...",className:"pl-8",value:o,onChange:E=>c(E.target.value)})]})]}),n.jsx(J,{control:p.control,name:"clientId",render:({field:E})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Client"}),n.jsxs(gt,{onValueChange:E.onChange,defaultValue:E.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a client"})})}),n.jsx(ht,{children:h?n.jsx("div",{className:"flex justify-center py-2",children:n.jsx(ro,{size:"sm"})}):j.length>0?j.map(_=>{var I,P;const S=((I=_.user)==null?void 0:I.name)||_.name||`Client ${_.id}`,C=_.id||((P=_.client)==null?void 0:P.id);return C?n.jsx(ue,{value:String(C),children:S},C):null}):n.jsx("div",{className:"py-2 px-2 text-center text-muted-foreground",children:o?"No clients found":"Start typing to search clients"})})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:p.control,name:"position",render:({field:E})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Stop Order"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",min:1,...E})}),n.jsx(ot,{children:"Order in which this stop appears in the route"}),n.jsx(ne,{})]})}),n.jsx(J,{control:p.control,name:"estimatedDuration",render:({field:E})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Estimated Duration (minutes)"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",min:1,...E})}),n.jsx(ot,{children:"Estimated time needed at this stop"}),n.jsx(ne,{})]})}),n.jsx(J,{control:p.control,name:"notes",render:({field:E})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Notes"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter any notes about this stop",...E,value:E.value||""})}),n.jsx(ne,{})]})}),n.jsxs(hs,{children:[n.jsx(H,{type:"button",variant:"outline",onClick:e,disabled:v.isPending,children:"Cancel"}),n.jsx(H,{type:"submit",disabled:v.isPending,children:v.isPending?n.jsxs(n.Fragment,{children:[n.jsx(ro,{size:"sm",className:"mr-2"}),"Adding Stop..."]}):"Add Stop"})]})]})})]})})}function Bce({children:t}){return n.jsx("div",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t})}function zce({route:t,onBack:e,onEdit:s,onDelete:r,onAddStop:i=()=>{},isDeleting:a}){const[o,c]=y.useState(!1),{data:d=[],isLoading:h,error:g,refetch:m}=wt({queryKey:[`/api/bazza/routes/${t.id}/stops`],queryFn:async()=>{try{console.log(`Fetching stops for route ${t.id}`);const v=await Hd(t.id);return console.log(`Successfully fetched ${v.length} stops for route ${t.id}`),v}catch(v){throw console.error(`Error fetching stops for route ${t.id}`,v),v}}}),{data:p=[]}=wt({queryKey:["/api/clients"],enabled:d.length>0,staleTime:5*60*1e3});return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(H,{variant:"outline",size:"sm",onClick:e,children:[n.jsx(kl,{className:"h-4 w-4 mr-2"}),"Back to Routes"]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(H,{variant:"outline",size:"sm",onClick:s,disabled:a,children:[n.jsx(Gr,{className:"h-4 w-4 mr-2"}),"Edit Route"]}),n.jsx(H,{variant:"destructive",size:"sm",onClick:r,disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx(ro,{size:"sm",className:"mr-2"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(tm,{className:"h-4 w-4 mr-2"}),"Delete Route"]})})]})]}),n.jsxs(Ae,{children:[n.jsx(Be,{children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx(Ve,{className:"text-2xl",children:t.name}),n.jsx(ct,{children:n.jsx("span",{className:"capitalize mt-1",children:t.dayOfWeek})})]}),n.jsx(Ze,{variant:t.active?"default":"outline",children:t.active?"Active":"Inactive"})]})}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ur,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:"Time:"}),n.jsxs("span",{children:[t.startTime," - ",t.endTime]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(bi,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:"Region:"}),n.jsx("span",{children:t.region||"No region specified"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xi,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:"Technician:"}),n.jsx("span",{children:t.technicianId?`Technician #${t.technicianId}`:"Not assigned"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:"Created:"}),n.jsx("span",{children:t.createdAt?new Date(t.createdAt).toLocaleDateString():"Unknown"})]})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("h3",{className:"text-lg font-medium mb-4",children:"Route Stops"}),h?n.jsx("div",{className:"flex justify-center items-center py-10",children:n.jsx(ro,{size:"lg"})}):g?n.jsxs(Cr,{variant:"destructive",className:"my-4",children:[n.jsx(fs,{className:"h-4 w-4"}),n.jsx(eo,{children:"Error"}),n.jsx(Sr,{children:"Failed to load route stops. Please try again."})]}):d.length===0?n.jsxs("div",{className:"text-center py-10 text-muted-foreground",children:[n.jsx(ym,{className:"h-10 w-10 mx-auto mb-4 opacity-30"}),n.jsx("p",{children:"No stops have been added to this route yet."}),n.jsxs(H,{variant:"outline",className:"mt-4",onClick:()=>c(!0),children:[n.jsx(os,{className:"h-4 w-4 mr-2"}),"Add Stop"]})]}):n.jsxs(jr,{children:[n.jsx(br,{children:n.jsxs(yn,{children:[n.jsx(Ye,{children:"Order"}),n.jsx(Ye,{children:"Client"}),n.jsx(Ye,{children:"Address"}),n.jsx(Ye,{children:"Notes"}),n.jsx(Ye,{})]})}),n.jsx(Nr,{children:d.map(v=>{var _,S,C;const j=Array.isArray(p)?p.find(I=>{var P;return I.id===v.clientId||((P=I.client)==null?void 0:P.id)===v.clientId}):null,N=j?((_=j.user)==null?void 0:_.name)||j.name||`Client #${v.clientId}`:`Client #${v.clientId}`,E=j&&(((S=j.user)==null?void 0:S.address)||j.address||((C=j.client)==null?void 0:C.address))||"-";return n.jsxs(yn,{children:[n.jsx(qe,{children:v.orderIndex||v.position||"-"}),n.jsx(qe,{children:N}),n.jsx(qe,{children:E}),n.jsx(qe,{children:v.customInstructions||v.notes||"No notes"}),n.jsx(qe,{children:n.jsxs(oi,{children:[n.jsx(li,{asChild:!0,children:n.jsx(H,{variant:"ghost",size:"icon",children:n.jsx(ri,{className:"h-4 w-4"})})}),n.jsxs(Yr,{align:"end",children:[n.jsx(_m,{children:"Actions"}),n.jsx(sl,{}),n.jsxs(bt,{children:[n.jsx(Gr,{className:"h-4 w-4 mr-2"}),"Edit"]}),n.jsxs(bt,{className:"text-destructive",children:[n.jsx(tm,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},v.id)})})]})]})]}),n.jsx(Pn,{children:n.jsxs(H,{className:"ml-auto",variant:"outline",onClick:()=>c(!0),children:[n.jsx(os,{className:"h-4 w-4 mr-2"}),"Add Stop"]})})]})]}),o&&n.jsx(Fce,{isOpen:o,onClose:()=>c(!1),onSuccess:()=>{c(!1),i()},route:t})]})}function y_({defaultTab:t="list"}){var me,Ce,$,xe;const[,e]=_n(),[s,r]=y.useState(""),{toast:i}=Lt(),[a,o]=y.useState(null),[c,d]=y.useState("all"),[h,g]=y.useState(null),[m,p]=y.useState(!1),[v,j]=y.useState(!1),[N,E]=y.useState(void 0),[_]=_n(),[S,C]=y.useState(()=>_==="/maintenance/routes"?"routes":t),{data:I=[],isLoading:P,error:L}=wt({queryKey:["/api/maintenances"],refetchOnWindowFocus:!1,retry:(te,ae)=>{var de;const ee=ae;return(ee==null?void 0:ee.status)===401||(de=ee==null?void 0:ee.message)!=null&&de.includes("Unauthorized")?!1:te<3},staleTime:5*60*1e3}),{data:T=[],isLoading:M,error:k}=wt({queryKey:["/api/technicians-with-users"],refetchOnWindowFocus:!1,retry:(te,ae)=>{var de;const ee=ae;return(ee==null?void 0:ee.status)===401||(de=ee==null?void 0:ee.message)!=null&&de.includes("Unauthorized")?!1:te<3},staleTime:5*60*1e3}),O=Pt({mutationFn:te=>_le(te),onSuccess:()=>{i({title:"Route deleted",description:"The route has been successfully deleted."}),ga.invalidateQueries({queryKey:["/api/bazza/routes"]}),ga.invalidateQueries({queryKey:["/api/bazza/routes/technician"]}),g(null),p(!1)},onError:te=>{console.error("Error deleting route:",te),i({title:"Error",description:"Failed to delete the route. Please try again.",variant:"destructive"})}});y.useEffect(()=>{S==="routes"&&_!=="/maintenance/routes"?e("/maintenance/routes",{replace:!0}):S==="list"&&_!=="/maintenance/list"&&_!=="/maintenance"&&e("/maintenance/list",{replace:!0})},[S,_,e]);const V=te=>{console.log(`Tab changed to: ${te}`),(te==="list"||te==="routes")&&(C(te),te==="routes"&&console.log("Routes tab selected - current state:",{techniciansCount:Array.isArray(T)?T.length:0,isLoading:M,hasError:!!k}))},B=te=>{g(te),p(!0)},Y=()=>{try{return console.log("Add Route button clicked - MaintenanceList"),E(void 0),j(!0),console.log("Route form dialog should be opening now with isRouteFormOpen=true"),setTimeout(()=>{console.log("Current isRouteFormOpen state after update:",v)},10),!1}catch(te){return console.error("Error in handleAddRouteClick:",te),i({title:"Error",description:"Failed to open route form. Please try again."}),!1}},z=te=>{E(te),j(!0)},G=te=>{window.confirm("Are you sure you want to delete this route?")&&O.mutate(te)},he=()=>{j(!1),E(void 0)},le=()=>{j(!1),E(void 0),ga.invalidateQueries({queryKey:["/api/bazza/routes"]}),ga.invalidateQueries({queryKey:["/api/bazza/routes/technician"]})},se=()=>{g(null),p(!1)},re=te=>{d(te)};return n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Maintenance Management"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(H,{variant:"outline",size:"sm",onClick:()=>e("/maintenance/map"),children:[n.jsx(gh,{className:"h-4 w-4 mr-2"}),"Map View"]}),n.jsxs(H,{variant:"outline",size:"sm",onClick:()=>e("/maintenance"),children:[n.jsx(GC,{className:"h-4 w-4 mr-2"}),"Calendar"]})]})]}),n.jsxs(Ae,{children:[n.jsx(Be,{children:n.jsx(Ve,{children:"Maintenance"})}),n.jsxs(Ee,{children:[n.jsx("div",{className:"flex justify-between items-center mb-4",children:n.jsx("div",{className:"w-full sm:max-w-sm",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:n.jsx(Bi,{className:"h-4 w-4 text-muted-foreground"})}),n.jsx(ve,{type:"text",placeholder:"Search...",value:s,onChange:te=>r(te.target.value),className:"w-full pl-10"})]})})}),n.jsxs(ps,{defaultValue:S,onValueChange:V,value:S,children:[n.jsxs(gs,{className:"mb-4",children:[n.jsxs(Ge,{value:"list",children:[n.jsx(KC,{className:"h-4 w-4 mr-2"}),"Maintenance List"]}),n.jsxs(Ge,{value:"routes",children:[n.jsx(ym,{className:"h-4 w-4 mr-2"}),"Technician Routes"]})]}),n.jsx(Qe,{value:"list",className:"mt-0",children:P?n.jsx("div",{className:"flex justify-center items-center py-10",children:n.jsx(ro,{size:"lg"})}):L?n.jsxs("div",{className:"text-center py-10",children:[n.jsx("div",{className:"text-red-500 mb-4",children:(me=L==null?void 0:L.message)!=null&&me.includes("Unauthorized")?"You need to log in to view maintenance data.":"Failed to load maintenances. Please try again."}),((Ce=L==null?void 0:L.message)==null?void 0:Ce.includes("Unauthorized"))&&n.jsx("div",{className:"mt-4",children:n.jsx("a",{href:"/api/auth/google",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Log in with Google"})})]}):n.jsx(G9,{maintenances:I,isLoading:!1})}),n.jsx(Qe,{value:"routes",className:"mt-0",children:m&&h?n.jsx(zce,{route:h,onBack:se,onEdit:()=>z(h),onDelete:()=>G(h.id),onAddStop:()=>alert("Add stop functionality coming soon!"),isDeleting:O.isPending}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex justify-between items-center mb-4",children:n.jsxs(H,{onClick:()=>(console.log("Add Route button direct click"),Y(),!1),variant:"default",className:"ml-auto",children:[n.jsx(os,{className:"h-4 w-4 mr-2"}),"Add Route"]})}),M?n.jsx("div",{className:"flex justify-center items-center py-10",children:n.jsx(ro,{size:"lg"})}):k?n.jsxs("div",{className:"text-center py-10",children:[n.jsx("div",{className:"text-red-500 mb-4",children:($=k==null?void 0:k.message)!=null&&$.includes("Unauthorized")?"You need to log in to view technician data.":"Failed to load technicians. Please try again."}),((xe=k==null?void 0:k.message)==null?void 0:xe.includes("Unauthorized"))&&n.jsx("div",{className:"mt-4",children:n.jsx("a",{href:"/api/auth/google",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Log in with Google"})})]}):n.jsx(Pce,{technicians:Array.isArray(T)?T.filter(te=>te&&te.active!==!1).map(te=>{var ae;return{id:te.id,name:((ae=te.user)==null?void 0:ae.name)||`Technician ${te.id}`,userId:te.userId,active:te.active}}):[],maintenances:I,selectedTechnicianId:a,onTechnicianSelect:o,onRouteSelect:B,onAddRouteClick:Y,selectedDay:c,onDayChange:re})]})})]})]})]}),n.jsx(fB,{isOpen:v,onClose:he,onSubmit:le,route:N,technicians:Array.isArray(T)?T.filter(te=>te&&typeof te=="object").filter(te=>te.active!==!1).map(te=>({id:te.id,name:te.user&&te.user.name||`Technician ${te.id}`,user:te.user?{id:te.user.id||0,name:te.user.name||"",email:te.user.email||null}:null,userId:te.userId,active:te.active})):[]})]})}const Vce=Ese.extend({clientId:q.coerce.number({required_error:"Client is required"}),description:q.string().min(10,{message:"Description must be at least 10 characters"}),issue:q.string().min(1,{message:"Issue type is required"}),priority:q.enum(["low","medium","high"],{required_error:"Priority is required"}),scheduledDate:q.date().optional(),scheduledTime:q.string().optional()});function $ce({onClose:t}){const{toast:e}=Lt(),[s,r]=y.useState(null),{data:i=[],isLoading:a}=wt({queryKey:["/api/clients"]}),o=mn({resolver:pn(Vce),defaultValues:{description:"",issue:"",priority:"medium",status:"pending"}}),c=Pt({mutationFn:async h=>{const g={...h,reportedDate:new Date,completionDate:null};return pt({url:"/api/repairs",method:"POST",data:g})},onSuccess:()=>{e({title:"Success",description:"Repair request submitted successfully"}),o.reset(),t()},onError:h=>{e({title:"Error",description:"Failed to submit repair request. Please try again.",variant:"destructive"}),console.error("Repair request submission failed:",h)}});function d(h){c.mutate(h)}return n.jsx(fn,{...o,children:n.jsxs("form",{onSubmit:o.handleSubmit(d),className:"space-y-4",children:[n.jsx(J,{control:o.control,name:"clientId",render:({field:h})=>{var g;return n.jsxs(Z,{children:[n.jsx(X,{children:"Client"}),n.jsxs(gt,{disabled:a||c.isPending,onValueChange:m=>{h.onChange(parseInt(m)),r(parseInt(m))},value:(g=h.value)==null?void 0:g.toString(),children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a client"})})}),n.jsx(ht,{children:i.map(m=>n.jsxs(ue,{value:m.id.toString(),children:[m.user.name,m.companyName&&` (${m.companyName})`]},m.id))})]}),n.jsx(ne,{})]})}}),n.jsx(J,{control:o.control,name:"description",render:({field:h})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Description"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Describe the issue in detail",disabled:c.isPending,...h})}),n.jsx(ne,{})]})}),n.jsx(J,{control:o.control,name:"issue",render:({field:h})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Issue Type"}),n.jsxs(gt,{disabled:c.isPending,onValueChange:h.onChange,value:h.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select issue type"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"leak",children:"Leak"}),n.jsx(ue,{value:"pump",children:"Pump Problem"}),n.jsx(ue,{value:"filter",children:"Filter Issue"}),n.jsx(ue,{value:"heater",children:"Heater Problem"}),n.jsx(ue,{value:"chemical",children:"Chemical Imbalance"}),n.jsx(ue,{value:"electrical",children:"Electrical Issue"}),n.jsx(ue,{value:"structural",children:"Structural Damage"}),n.jsx(ue,{value:"other",children:"Other"})]})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:o.control,name:"priority",render:({field:h})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Priority"}),n.jsxs(gt,{disabled:c.isPending,onValueChange:h.onChange,value:h.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select priority level"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"low",children:"Low"}),n.jsx(ue,{value:"medium",children:"Medium"}),n.jsx(ue,{value:"high",children:"High"})]})]}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:o.control,name:"scheduledDate",render:({field:h})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Preferred Date (Optional)"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:`w-full pl-3 text-left font-normal ${h.value?"":"text-muted-foreground"}`,disabled:c.isPending,children:[h.value?ft(h.value,"PPP"):n.jsx("span",{children:"Pick a date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:h.value||void 0,onSelect:h.onChange,initialFocus:!0,disabled:g=>g<new Date})})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:o.control,name:"scheduledTime",render:({field:h})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Preferred Time (Optional)"}),n.jsxs("div",{className:"relative",children:[n.jsx(Q,{children:n.jsx(ve,{type:"time",disabled:c.isPending,...h})}),n.jsx(Ur,{className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400"})]}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:o.control,name:"notes",render:({field:h})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Additional Notes (Optional)"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Any additional information or special instructions",disabled:c.isPending,className:"resize-none",...h,value:h.value||""})}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[n.jsx(H,{type:"button",variant:"outline",onClick:t,disabled:c.isPending,children:"Cancel"}),n.jsx(H,{type:"submit",disabled:c.isPending,children:c.isPending?"Submitting...":"Submit Repair Request"})]})]})})}function Uce(){const[t,e]=y.useState(!1),[s,r]=y.useState(null),[i,a]=y.useState("all"),[o,c]=y.useState("all"),[d,h]=y.useState(""),g=jn(),{data:m,isLoading:p}=wt({queryKey:["/api/repairs"]});Pt({mutationFn:async({id:C,data:I})=>(await pt("PATCH",`/api/repairs/${C}`)).json(),onSuccess:()=>{g.invalidateQueries({queryKey:["/api/repairs"]})}});const v=m==null?void 0:m.filter(C=>!(i!=="all"&&C.status!==i||o!=="all"&&C.priority!==o||d&&!C.client.user.name.toLowerCase().includes(d.toLowerCase())&&!C.type.toLowerCase().includes(d.toLowerCase())&&!C.description.toLowerCase().includes(d.toLowerCase()))),j=v==null?void 0:v.filter(C=>C.status==="pending"),N=v==null?void 0:v.filter(C=>C.status==="assigned"),E=v==null?void 0:v.filter(C=>C.status==="scheduled"),_=v==null?void 0:v.filter(C=>C.status==="in_progress"),S=v==null?void 0:v.filter(C=>C.status==="completed");return n.jsxs("div",{children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground font-heading",children:"Repair"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3 md:mt-0",children:[n.jsxs("div",{className:"relative",children:[n.jsx(ve,{type:"text",placeholder:"Search repairs...",className:"pl-10 pr-4",value:d,onChange:C=>h(C.target.value)}),n.jsx(Bi,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(oi,{children:[n.jsx(li,{asChild:!0,children:n.jsxs(H,{variant:"outline",className:"flex gap-2",children:[n.jsx(Cp,{className:"h-4 w-4"}),"Status",n.jsx(bp,{className:"h-4 w-4"})]})}),n.jsxs(Yr,{align:"end",children:[n.jsx(bt,{onClick:()=>a("all"),children:"All Status"}),n.jsx(bt,{onClick:()=>a("pending"),children:"Pending"}),n.jsx(bt,{onClick:()=>a("assigned"),children:"Assigned"}),n.jsx(bt,{onClick:()=>a("scheduled"),children:"Scheduled"}),n.jsx(bt,{onClick:()=>a("in_progress"),children:"In Progress"}),n.jsx(bt,{onClick:()=>a("completed"),children:"Completed"})]})]}),n.jsxs(oi,{children:[n.jsx(li,{asChild:!0,children:n.jsxs(H,{variant:"outline",className:"flex gap-2",children:[n.jsx(Cp,{className:"h-4 w-4"}),"Priority",n.jsx(bp,{className:"h-4 w-4"})]})}),n.jsxs(Yr,{align:"end",children:[n.jsx(bt,{onClick:()=>c("all"),children:"All Priorities"}),n.jsx(bt,{onClick:()=>c("low"),children:"Low"}),n.jsx(bt,{onClick:()=>c("medium"),children:"Medium"}),n.jsx(bt,{onClick:()=>c("high"),children:"High"})]})]}),n.jsxs(An,{open:t,onOpenChange:e,children:[n.jsx(ll,{asChild:!0,children:n.jsxs(H,{className:"bg-primary hover:bg-primary/90 text-white font-medium",children:[n.jsx(gi,{className:"h-4 w-4 mr-1"}),"New Repair Request"]})}),n.jsx(wn,{className:"max-w-md",children:n.jsx($ce,{onClose:()=>e(!1)})})]})]})]})]}),n.jsxs(ps,{defaultValue:"all",className:"mb-6",children:[n.jsxs(gs,{children:[n.jsx(Ge,{value:"all",children:"All Repairs"}),n.jsx(Ge,{value:"kanban",children:"Kanban View"})]}),n.jsx(Qe,{value:"all",children:n.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg",children:n.jsx("div",{className:"overflow-x-auto md:overflow-visible",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Issue Type"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned To"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p?Array(5).fill(0).map((C,I)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(_e,{className:"h-8 w-8 rounded-full"}),n.jsxs("div",{className:"ml-4",children:[n.jsx(_e,{className:"h-4 w-32"}),n.jsx(_e,{className:"h-3 w-24 mt-1"})]})]})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsx(_e,{className:"h-4 w-32"}),n.jsx(_e,{className:"h-3 w-24 mt-1"})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx(_e,{className:"h-5 w-16 rounded-full"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx(_e,{className:"h-5 w-16 rounded-full"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx(_e,{className:"h-4 w-24"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx(_e,{className:"h-4 w-24"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(_e,{className:"h-8 w-8 rounded-full"}),n.jsx(_e,{className:"h-8 w-8 rounded-full"}),n.jsx(_e,{className:"h-8 w-8 rounded-full"})]})})]},I)):v==null?void 0:v.map(C=>{const I=Vc(C.status),P=wl(C.priority);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0 h-8 w-8",children:n.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-600",children:C.client.user.name.charAt(0)})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("div",{className:"text-sm font-medium text-foreground",children:C.client.user.name}),n.jsx("div",{className:"text-xs text-gray-500",children:C.client.user.address})]})]})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsx("div",{className:"text-sm text-gray-900",children:C.type}),n.jsx("div",{className:"text-xs text-gray-500",children:C.description?C.description.substring(0,30)+"...":"No description"})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${P.bg} ${P.text}`,children:C.priority.charAt(0).toUpperCase()+C.priority.slice(1)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${I.bg} ${I.text}`,children:C.status.charAt(0).toUpperCase()+C.status.slice(1)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.technician?C.technician.user.name:"Unassigned"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ln(C.reportedDate)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(H,{variant:"ghost",size:"icon",className:"h-6 w-6 text-primary hover:text-primary/80",onClick:()=>r(C),children:n.jsx(xo,{className:"h-4 w-4"})}),n.jsx(H,{variant:"ghost",size:"icon",className:"h-6 w-6 text-gray-600 hover:text-gray-900",children:n.jsx(Gr,{className:"h-4 w-4"})}),n.jsx(H,{variant:"ghost",size:"icon",className:"h-6 w-6 text-gray-600 hover:text-gray-900",children:n.jsx(ri,{className:"h-4 w-4"})})]})})]},C.id)})})]})})})}),n.jsx(Qe,{value:"kanban",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[n.jsxs(Ae,{children:[n.jsx(Be,{className:"pb-3",children:n.jsxs(Ve,{className:"flex items-center justify-between text-sm font-medium",children:[n.jsx("span",{children:"Pending"}),n.jsx("span",{className:"px-2 py-1 rounded-full bg-blue-100 text-blue-800 text-xs",children:(j==null?void 0:j.length)||0})]})}),n.jsx(Ee,{className:"space-y-2",children:p?Array(3).fill(0).map((C,I)=>n.jsxs("div",{className:"p-3 bg-gray-50 rounded-md space-y-2",children:[n.jsx(_e,{className:"h-4 w-32"}),n.jsx(_e,{className:"h-3 w-28"}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx(_e,{className:"h-5 w-16 rounded-full"}),n.jsx(_e,{className:"h-6 w-6 rounded-full"})]})]},I)):j==null?void 0:j.map(C=>{const I=wl(C.priority);return n.jsxs("div",{className:"p-3 bg-gray-50 rounded-md hover:shadow-sm cursor-pointer",children:[n.jsx("h4",{className:"font-medium text-sm",children:C.client.user.name}),n.jsx("p",{className:"text-xs text-gray-500 mb-2",children:C.type}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${I.bg} ${I.text}`,children:C.priority.charAt(0).toUpperCase()+C.priority.slice(1)}),n.jsx(H,{variant:"ghost",size:"icon",className:"h-6 w-6 text-gray-600 hover:text-gray-900",onClick:()=>r(C),children:n.jsx(ri,{className:"h-4 w-4"})})]})]},C.id)})})]}),n.jsxs(Ae,{children:[n.jsx(Be,{className:"pb-3",children:n.jsxs(Ve,{className:"flex items-center justify-between text-sm font-medium",children:[n.jsx("span",{children:"Assigned"}),n.jsx("span",{className:"px-2 py-1 rounded-full bg-yellow-100 text-yellow-800 text-xs",children:(N==null?void 0:N.length)||0})]})}),n.jsx(Ee,{className:"space-y-2",children:p?Array(2).fill(0).map((C,I)=>n.jsxs("div",{className:"p-3 bg-gray-50 rounded-md space-y-2",children:[n.jsx(_e,{className:"h-4 w-32"}),n.jsx(_e,{className:"h-3 w-28"}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx(_e,{className:"h-5 w-16 rounded-full"}),n.jsx(_e,{className:"h-6 w-6 rounded-full"})]})]},I)):N==null?void 0:N.map(C=>{var P;const I=wl(C.priority);return n.jsxs("div",{className:"p-3 bg-gray-50 rounded-md hover:shadow-sm cursor-pointer",children:[n.jsx("h4",{className:"font-medium text-sm",children:C.client.user.name}),n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:C.type}),n.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-2",children:[n.jsx(xi,{className:"h-3 w-3 mr-1"}),(P=C.technician)==null?void 0:P.user.name]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${I.bg} ${I.text}`,children:C.priority.charAt(0).toUpperCase()+C.priority.slice(1)}),n.jsx(H,{variant:"ghost",size:"icon",className:"h-6 w-6 text-gray-600 hover:text-gray-900",onClick:()=>r(C),children:n.jsx(ri,{className:"h-4 w-4"})})]})]},C.id)})})]}),n.jsxs(Ae,{children:[n.jsx(Be,{className:"pb-3",children:n.jsxs(Ve,{className:"flex items-center justify-between text-sm font-medium",children:[n.jsx("span",{children:"Scheduled"}),n.jsx("span",{className:"px-2 py-1 rounded-full bg-blue-100 text-blue-800 text-xs",children:(E==null?void 0:E.length)||0})]})}),n.jsx(Ee,{className:"space-y-2",children:p?Array(2).fill(0).map((C,I)=>n.jsxs("div",{className:"p-3 bg-gray-50 rounded-md space-y-2",children:[n.jsx(_e,{className:"h-4 w-32"}),n.jsx(_e,{className:"h-3 w-28"}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx(_e,{className:"h-5 w-16 rounded-full"}),n.jsx(_e,{className:"h-6 w-6 rounded-full"})]})]},I)):E==null?void 0:E.map(C=>{var P;const I=wl(C.priority);return n.jsxs("div",{className:"p-3 bg-gray-50 rounded-md hover:shadow-sm cursor-pointer",children:[n.jsx("h4",{className:"font-medium text-sm",children:C.client.user.name}),n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:C.type}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[n.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[n.jsx(tn,{className:"h-3 w-3 mr-1"}),C.scheduledDate&&ln(C.scheduledDate)]}),n.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[n.jsx(xi,{className:"h-3 w-3 mr-1"}),(P=C.technician)==null?void 0:P.user.name]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${I.bg} ${I.text}`,children:C.priority.charAt(0).toUpperCase()+C.priority.slice(1)}),n.jsx(H,{variant:"ghost",size:"icon",className:"h-6 w-6 text-gray-600 hover:text-gray-900",onClick:()=>r(C),children:n.jsx(ri,{className:"h-4 w-4"})})]})]},C.id)})})]}),n.jsxs(Ae,{children:[n.jsx(Be,{className:"pb-3",children:n.jsxs(Ve,{className:"flex items-center justify-between text-sm font-medium",children:[n.jsx("span",{children:"In Progress"}),n.jsx("span",{className:"px-2 py-1 rounded-full bg-yellow-100 text-yellow-800 text-xs",children:(_==null?void 0:_.length)||0})]})}),n.jsx(Ee,{className:"space-y-2",children:p?Array(2).fill(0).map((C,I)=>n.jsxs("div",{className:"p-3 bg-gray-50 rounded-md space-y-2",children:[n.jsx(_e,{className:"h-4 w-32"}),n.jsx(_e,{className:"h-3 w-28"}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx(_e,{className:"h-5 w-16 rounded-full"}),n.jsx(_e,{className:"h-6 w-6 rounded-full"})]})]},I)):_==null?void 0:_.map(C=>{var P;const I=wl(C.priority);return n.jsxs("div",{className:"p-3 bg-gray-50 rounded-md hover:shadow-sm cursor-pointer",children:[n.jsx("h4",{className:"font-medium text-sm",children:C.client.user.name}),n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:C.type}),n.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-2",children:[n.jsx(xi,{className:"h-3 w-3 mr-1"}),(P=C.technician)==null?void 0:P.user.name]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${I.bg} ${I.text}`,children:C.priority.charAt(0).toUpperCase()+C.priority.slice(1)}),n.jsx(H,{variant:"ghost",size:"icon",className:"h-6 w-6 text-gray-600 hover:text-gray-900",onClick:()=>r(C),children:n.jsx(ri,{className:"h-4 w-4"})})]})]},C.id)})})]}),n.jsxs(Ae,{children:[n.jsx(Be,{className:"pb-3",children:n.jsxs(Ve,{className:"flex items-center justify-between text-sm font-medium",children:[n.jsx("span",{children:"Completed"}),n.jsx("span",{className:"px-2 py-1 rounded-full bg-green-100 text-green-800 text-xs",children:(S==null?void 0:S.length)||0})]})}),n.jsx(Ee,{className:"space-y-2",children:p?Array(2).fill(0).map((C,I)=>n.jsxs("div",{className:"p-3 bg-gray-50 rounded-md space-y-2",children:[n.jsx(_e,{className:"h-4 w-32"}),n.jsx(_e,{className:"h-3 w-28"}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx(_e,{className:"h-5 w-16 rounded-full"}),n.jsx(_e,{className:"h-6 w-6 rounded-full"})]})]},I)):S==null?void 0:S.map(C=>{var P;const I=wl(C.priority);return n.jsxs("div",{className:"p-3 bg-gray-50 rounded-md hover:shadow-sm cursor-pointer",children:[n.jsx("h4",{className:"font-medium text-sm",children:C.client.user.name}),n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:C.type}),n.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-2",children:[n.jsx(xi,{className:"h-3 w-3 mr-1"}),(P=C.technician)==null?void 0:P.user.name]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${I.bg} ${I.text}`,children:C.priority.charAt(0).toUpperCase()+C.priority.slice(1)}),n.jsx(H,{variant:"ghost",size:"icon",className:"h-6 w-6 text-gray-600 hover:text-gray-900",onClick:()=>r(C),children:n.jsx(ri,{className:"h-4 w-4"})})]})]},C.id)})})]})]})})]}),s&&n.jsx(An,{open:!!s,onOpenChange:()=>r(null),children:n.jsxs(wn,{className:"max-w-md",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:"Repair Request Details"}),n.jsx(ws,{children:"View the details of this repair request"})]}),n.jsxs("div",{className:"space-y-4 mt-2",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Client"}),n.jsx("p",{className:"mt-1",children:s.client.user.name}),n.jsx("p",{className:"text-sm text-gray-500",children:s.client.user.address})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Issue Type"}),n.jsx("p",{className:"mt-1",children:s.type})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Description"}),n.jsx("p",{className:"mt-1 text-sm",children:s.description})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Status"}),n.jsx("p",{className:"mt-1",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Vc(s.status).bg} ${Vc(s.status).text}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Priority"}),n.jsx("p",{className:"mt-1",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${wl(s.priority).bg} ${wl(s.priority).text}`,children:s.priority.charAt(0).toUpperCase()+s.priority.slice(1)})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Assigned Technician"}),n.jsx("p",{className:"mt-1",children:s.technician?s.technician.user.name:"Unassigned"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Reported Date"}),n.jsx("p",{className:"mt-1 text-sm",children:ln(s.reportedDate)})]}),s.scheduledDate&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Scheduled Date"}),n.jsx("p",{className:"mt-1 text-sm",children:ln(s.scheduledDate)})]})]}),s.notes&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Notes"}),n.jsx("p",{className:"mt-1 text-sm",children:s.notes})]})]})]})})]})}function Fw({clients:t,isLoading:e,onClientSelect:s}){const[,r]=_n();return e?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array(6).fill(0).map((i,a)=>n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx(_e,{className:"h-16 w-16 rounded-full"}),n.jsxs("div",{className:"ml-4 space-y-2 flex-1",children:[n.jsx(_e,{className:"h-5 w-32"}),n.jsx(_e,{className:"h-4 w-24"}),n.jsx(_e,{className:"h-4 w-16"})]})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(_e,{className:"h-4 w-4 mr-2"}),n.jsx(_e,{className:"h-4 w-32"})]}),n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(_e,{className:"h-4 w-4 mr-2"}),n.jsx(_e,{className:"h-4 w-24"})]}),n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(_e,{className:"h-4 w-4 mr-2"}),n.jsx(_e,{className:"h-4 w-48"})]}),n.jsx("div",{className:"flex gap-2",children:n.jsx(_e,{className:"h-9 w-full rounded-md"})})]})]},a))}):t.length===0?n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm text-center",children:n.jsx("p",{className:"text-gray-500",children:"No clients found."})}):(console.log("ClientList rendering with",t.length,"clients"),t.length>0&&console.log("First client structure:",t[0]),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(i=>{var g,m,p,v,j,N,E,_,S,C,I,P,L,T,M,k;const a=i.id||((g=i.client)==null?void 0:g.id),o=((m=i.user)==null?void 0:m.name)||"Unknown",c=((p=i.user)==null?void 0:p.email)||"No email",d=i.companyName||((v=i.client)==null?void 0:v.companyName),h=i.contractType||((j=i.client)==null?void 0:j.contractType);return console.log(`Rendering client: ID=${a}, Name=${o}, Company=${d||"None"}`),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"h-16 w-16 rounded-full bg-primary text-white flex items-center justify-center text-xl flex-shrink-0",children:o.charAt(0)}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:o}),d&&n.jsx("p",{className:"text-sm text-gray-500",children:d}),n.jsx(Ze,{variant:"secondary",className:(h==null?void 0:h.toLowerCase())==="commercial"?"bg-blue-100 text-primary":(h==null?void 0:h.toLowerCase())==="service"?"bg-purple-100 text-purple-600":(h==null?void 0:h.toLowerCase())==="maintenance"?"bg-amber-100 text-amber-600":"bg-green-100 text-green-600",children:h?h.charAt(0).toUpperCase()+h.slice(1).toLowerCase():"Residential"})]})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[n.jsxs("div",{className:"space-y-2 mb-4",children:[n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(Qs,{className:"h-4 w-4 text-gray-400 mr-2"}),n.jsx("span",{children:c})]}),(((N=i.user)==null?void 0:N.phone)||((E=i.client)==null?void 0:E.phone))&&n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(qr,{className:"h-4 w-4 text-gray-400 mr-2"}),n.jsx("span",{children:((_=i.user)==null?void 0:_.phone)||((S=i.client)==null?void 0:S.phone)})]}),(((C=i.user)==null?void 0:C.address)||((I=i.client)==null?void 0:I.address))&&n.jsxs("div",{className:"flex items-start text-sm",children:[n.jsx(bi,{className:"h-4 w-4 text-gray-400 mr-2 mt-0.5"}),n.jsxs("span",{children:[((P=i.user)==null?void 0:P.address)||((L=i.client)==null?void 0:L.address),((T=i.client)==null?void 0:T.city)&&`, ${i.client.city}`,((M=i.client)==null?void 0:M.state)&&`, ${i.client.state}`,((k=i.client)==null?void 0:k.zip)&&` ${i.client.zip}`]})]})]}),n.jsx(H,{onClick:()=>{s?s(i):(console.log("Navigating to client details for ID:",a),r(`/clients/${a}`))},variant:"outline",className:"w-full",children:"View Details"})]})]},a)})}))}function Wce(){const[t,e]=y.useState(""),[,s]=_n(),{isAuthenticated:r,isLoading:i}=Kr(),{data:a,isLoading:o,error:c}=wt({queryKey:["/api/clients"],enabled:r}),d=i||o,h=a&&Array.isArray(a)?a:a==null?void 0:a.clients;console.log("Clients data received:",a),c&&console.error("Error fetching clients:",c);const g=h==null?void 0:h.map(j=>({...j,id:j.client.id,companyName:j.client.companyName,contractType:j.client.contractType})),m=g==null?void 0:g.filter(j=>!(t&&!j.user.name.toLowerCase().includes(t.toLowerCase())&&!(j.companyName&&j.companyName.toLowerCase().includes(t.toLowerCase()))&&!j.user.email.toLowerCase().includes(t.toLowerCase()))),p=m==null?void 0:m.filter(j=>{var N;return((N=j.contractType)==null?void 0:N.toLowerCase())==="commercial"}),v=m==null?void 0:m.filter(j=>{var N;return((N=j.contractType)==null?void 0:N.toLowerCase())==="residential"||!j.contractType});return!r&&!i?n.jsxs("div",{children:[n.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(yi,{className:"h-7 w-7 text-primary mr-2"}),n.jsx("h1",{className:"text-2xl font-bold text-foreground font-heading",children:"Clients"})]})}),n.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4 mb-6",children:n.jsxs("div",{className:"flex",children:[n.jsx(fs,{className:"h-5 w-5 text-amber-500 mt-0.5 mr-3"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-amber-800",children:"Authentication Required"}),n.jsx("div",{className:"mt-2 text-sm text-amber-700",children:n.jsx("p",{children:"You need to be logged in to view client information."})}),n.jsx("div",{className:"mt-4",children:n.jsx(H,{onClick:()=>s("/"),className:"bg-primary hover:bg-primary/90 text-white font-medium",children:"Go to Login"})})]})]})})]}):d?n.jsxs("div",{children:[n.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(yi,{className:"h-7 w-7 text-primary mr-2"}),n.jsx("h1",{className:"text-2xl font-bold text-foreground font-heading",children:"Clients"})]})}),n.jsxs("div",{className:"flex justify-center items-center py-12",children:[n.jsx(Kt,{className:"h-8 w-8 animate-spin text-primary mr-2"}),n.jsx("span",{className:"text-muted-foreground",children:"Loading clients..."})]})]}):n.jsxs("div",{children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(yi,{className:"h-7 w-7 text-primary mr-2"}),n.jsx("h1",{className:"text-2xl font-bold text-foreground font-heading",children:"Clients"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3 md:mt-0",children:[n.jsxs("div",{className:"relative",children:[n.jsx(ve,{type:"text",placeholder:"Search clients...",className:"pl-10 pr-4",value:t,onChange:j=>e(j.target.value)}),n.jsx(Bi,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(H,{variant:"outline",size:"sm",onClick:()=>s("/clients/enhanced"),className:"h-10",children:[n.jsx(pL,{className:"h-4 w-4 mr-1"}),"Table View"]}),n.jsxs(H,{className:"bg-primary hover:bg-primary/90 text-white font-medium",onClick:()=>s("/clients/add"),children:[n.jsx(gi,{className:"h-4 w-4 mr-1"}),"Add Client"]})]})]})]}),c&&n.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 mb-6",children:n.jsxs("div",{className:"flex",children:[n.jsx(fs,{className:"h-5 w-5 text-red-500 mt-0.5 mr-3"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),n.jsx("div",{className:"mt-2 text-sm text-red-700",children:n.jsx("p",{children:"There was a problem loading the client data. Please try again."})})]})]})}),n.jsxs(ps,{defaultValue:"all",className:"mb-6",children:[n.jsxs(gs,{children:[n.jsxs(Ge,{value:"all",children:["All Clients (",(m==null?void 0:m.length)||0,")"]}),n.jsxs(Ge,{value:"residential",children:["Residential (",(v==null?void 0:v.length)||0,")"]}),n.jsxs(Ge,{value:"commercial",children:["Commercial (",(p==null?void 0:p.length)||0,")"]})]}),n.jsx(Qe,{value:"all",children:n.jsx(Fw,{clients:m||[],isLoading:d})}),n.jsx(Qe,{value:"residential",children:n.jsx(Fw,{clients:v||[],isLoading:d})}),n.jsx(Qe,{value:"commercial",children:n.jsx(Fw,{clients:p||[],isLoading:d})})]})]})}var pB={exports:{}},Hce="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",qce=Hce,Gce=qce;function gB(){}function xB(){}xB.resetWarningCache=gB;var Yce=function(){function t(r,i,a,o,c,d){if(d!==Gce){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}t.isRequired=t;function e(){return t}var s={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:xB,resetWarningCache:gB};return s.PropTypes=s,s};pB.exports=Yce();var Kce=pB.exports;const Vs=td(Kce);function Zce(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var vB=y,Qce=Zce(vB);function w_(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Xce(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Jce=!!(typeof window<"u"&&window.document&&window.document.createElement);function ede(t,e,s){if(typeof t!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof e!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof s<"u"&&typeof s!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function r(i){return i.displayName||i.name||"Component"}return function(a){if(typeof a!="function")throw new Error("Expected WrappedComponent to be a React component.");var o=[],c;function d(){c=t(o.map(function(g){return g.props})),h.canUseDOM?e(c):s&&(c=s(c))}var h=function(g){Xce(m,g);function m(){return g.apply(this,arguments)||this}m.peek=function(){return c},m.rewind=function(){if(m.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var j=c;return c=void 0,o=[],j};var p=m.prototype;return p.UNSAFE_componentWillMount=function(){o.push(this),d()},p.componentDidUpdate=function(){d()},p.componentWillUnmount=function(){var j=o.indexOf(this);o.splice(j,1),d()},p.render=function(){return Qce.createElement(a,this.props)},m}(vB.PureComponent);return w_(h,"displayName","SideEffect("+r(a)+")"),w_(h,"canUseDOM",Jce),h}}var tde=ede;const nde=td(tde);var sde=typeof Element<"u",rde=typeof Map=="function",ide=typeof Set=="function",ade=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s0(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var s,r,i;if(Array.isArray(t)){if(s=t.length,s!=e.length)return!1;for(r=s;r--!==0;)if(!s0(t[r],e[r]))return!1;return!0}var a;if(rde&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(a=t.entries();!(r=a.next()).done;)if(!e.has(r.value[0]))return!1;for(a=t.entries();!(r=a.next()).done;)if(!s0(r.value[1],e.get(r.value[0])))return!1;return!0}if(ide&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(a=t.entries();!(r=a.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(ade&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(s=t.length,s!=e.length)return!1;for(r=s;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(i=Object.keys(t),s=i.length,s!==Object.keys(e).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;if(sde&&t instanceof Element)return!1;for(r=s;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&t.$$typeof)&&!s0(t[i[r]],e[i[r]]))return!1;return!0}return t!==t&&e!==e}var ode=function(e,s){try{return s0(e,s)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const lde=td(ode);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var j_=Object.getOwnPropertySymbols,cde=Object.prototype.hasOwnProperty,dde=Object.prototype.propertyIsEnumerable;function ude(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function hde(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},s=0;s<10;s++)e["_"+String.fromCharCode(s)]=s;var r=Object.getOwnPropertyNames(e).map(function(a){return e[a]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(a){i[a]=a}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var mde=hde()?Object.assign:function(t,e){for(var s,r=ude(t),i,a=1;a<arguments.length;a++){s=Object(arguments[a]);for(var o in s)cde.call(s,o)&&(r[o]=s[o]);if(j_){i=j_(s);for(var c=0;c<i.length;c++)dde.call(s,i[c])&&(r[i[c]]=s[i[c]])}}return r};const fde=td(mde);var Gd={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},dn={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(dn).map(function(t){return dn[t]});var Us={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},Rv={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Xp={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},pde=Object.keys(Rv).reduce(function(t,e){return t[Rv[e]]=e,t},{}),gde=[dn.NOSCRIPT,dn.SCRIPT,dn.STYLE],wo="data-react-helmet",xde=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vde=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},yde=function(){function t(e,s){for(var r=0;r<s.length;r++){var i=s[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,s,r){return s&&t(e.prototype,s),r&&t(e,r),e}}(),qi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},wde=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},b_=function(t,e){var s={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r]);return s},jde=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},iN=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return s===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},bde=function(e){var s=Eh(e,dn.TITLE),r=Eh(e,Xp.TITLE_TEMPLATE);if(r&&s)return r.replace(/%s/g,function(){return Array.isArray(s)?s.join(""):s});var i=Eh(e,Xp.DEFAULT_TITLE);return s||i||void 0},Nde=function(e){return Eh(e,Xp.ON_CHANGE_CLIENT_STATE)||function(){}},Bw=function(e,s){return s.filter(function(r){return typeof r[e]<"u"}).map(function(r){return r[e]}).reduce(function(r,i){return qi({},r,i)},{})},Cde=function(e,s){return s.filter(function(r){return typeof r[dn.BASE]<"u"}).map(function(r){return r[dn.BASE]}).reverse().reduce(function(r,i){if(!r.length)for(var a=Object.keys(i),o=0;o<a.length;o++){var c=a[o],d=c.toLowerCase();if(e.indexOf(d)!==-1&&i[d])return r.concat(i)}return r},[])},df=function(e,s,r){var i={};return r.filter(function(a){return Array.isArray(a[e])?!0:(typeof a[e]<"u"&&_de("Helmet: "+e+' should be of type "Array". Instead found type "'+xde(a[e])+'"'),!1)}).map(function(a){return a[e]}).reverse().reduce(function(a,o){var c={};o.filter(function(p){for(var v=void 0,j=Object.keys(p),N=0;N<j.length;N++){var E=j[N],_=E.toLowerCase();s.indexOf(_)!==-1&&!(v===Us.REL&&p[v].toLowerCase()==="canonical")&&!(_===Us.REL&&p[_].toLowerCase()==="stylesheet")&&(v=_),s.indexOf(E)!==-1&&(E===Us.INNER_HTML||E===Us.CSS_TEXT||E===Us.ITEM_PROP)&&(v=E)}if(!v||!p[v])return!1;var S=p[v].toLowerCase();return i[v]||(i[v]={}),c[v]||(c[v]={}),i[v][S]?!1:(c[v][S]=!0,!0)}).reverse().forEach(function(p){return a.push(p)});for(var d=Object.keys(c),h=0;h<d.length;h++){var g=d[h],m=fde({},i[g],c[g]);i[g]=m}return a},[]).reverse()},Eh=function(e,s){for(var r=e.length-1;r>=0;r--){var i=e[r];if(i.hasOwnProperty(s))return i[s]}return null},Sde=function(e){return{baseTag:Cde([Us.HREF,Us.TARGET],e),bodyAttributes:Bw(Gd.BODY,e),defer:Eh(e,Xp.DEFER),encode:Eh(e,Xp.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Bw(Gd.HTML,e),linkTags:df(dn.LINK,[Us.REL,Us.HREF],e),metaTags:df(dn.META,[Us.NAME,Us.CHARSET,Us.HTTPEQUIV,Us.PROPERTY,Us.ITEM_PROP],e),noscriptTags:df(dn.NOSCRIPT,[Us.INNER_HTML],e),onChangeClientState:Nde(e),scriptTags:df(dn.SCRIPT,[Us.SRC,Us.INNER_HTML],e),styleTags:df(dn.STYLE,[Us.CSS_TEXT],e),title:bde(e),titleAttributes:Bw(Gd.TITLE,e)}},aN=function(){var t=Date.now();return function(e){var s=Date.now();s-t>16?(t=s,e(s)):setTimeout(function(){aN(e)},0)}}(),N_=function(e){return clearTimeout(e)},Ade=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||aN:global.requestAnimationFrame||aN,Ede=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||N_:global.cancelAnimationFrame||N_,_de=function(e){return console&&typeof console.warn=="function"&&console.warn(e)},uf=null,Ide=function(e){uf&&Ede(uf),e.defer?uf=Ade(function(){C_(e,function(){uf=null})}):(C_(e),uf=null)},C_=function(e,s){var r=e.baseTag,i=e.bodyAttributes,a=e.htmlAttributes,o=e.linkTags,c=e.metaTags,d=e.noscriptTags,h=e.onChangeClientState,g=e.scriptTags,m=e.styleTags,p=e.title,v=e.titleAttributes;oN(dn.BODY,i),oN(dn.HTML,a),Tde(p,v);var j={baseTag:Lu(dn.BASE,r),linkTags:Lu(dn.LINK,o),metaTags:Lu(dn.META,c),noscriptTags:Lu(dn.NOSCRIPT,d),scriptTags:Lu(dn.SCRIPT,g),styleTags:Lu(dn.STYLE,m)},N={},E={};Object.keys(j).forEach(function(_){var S=j[_],C=S.newTags,I=S.oldTags;C.length&&(N[_]=C),I.length&&(E[_]=j[_].oldTags)}),s&&s(),h(e,N,E)},yB=function(e){return Array.isArray(e)?e.join(""):e},Tde=function(e,s){typeof e<"u"&&document.title!==e&&(document.title=yB(e)),oN(dn.TITLE,s)},oN=function(e,s){var r=document.getElementsByTagName(e)[0];if(r){for(var i=r.getAttribute(wo),a=i?i.split(","):[],o=[].concat(a),c=Object.keys(s),d=0;d<c.length;d++){var h=c[d],g=s[h]||"";r.getAttribute(h)!==g&&r.setAttribute(h,g),a.indexOf(h)===-1&&a.push(h);var m=o.indexOf(h);m!==-1&&o.splice(m,1)}for(var p=o.length-1;p>=0;p--)r.removeAttribute(o[p]);a.length===o.length?r.removeAttribute(wo):r.getAttribute(wo)!==c.join(",")&&r.setAttribute(wo,c.join(","))}},Lu=function(e,s){var r=document.head||document.querySelector(dn.HEAD),i=r.querySelectorAll(e+"["+wo+"]"),a=Array.prototype.slice.call(i),o=[],c=void 0;return s&&s.length&&s.forEach(function(d){var h=document.createElement(e);for(var g in d)if(d.hasOwnProperty(g))if(g===Us.INNER_HTML)h.innerHTML=d.innerHTML;else if(g===Us.CSS_TEXT)h.styleSheet?h.styleSheet.cssText=d.cssText:h.appendChild(document.createTextNode(d.cssText));else{var m=typeof d[g]>"u"?"":d[g];h.setAttribute(g,m)}h.setAttribute(wo,"true"),a.some(function(p,v){return c=v,h.isEqualNode(p)})?a.splice(c,1):o.push(h)}),a.forEach(function(d){return d.parentNode.removeChild(d)}),o.forEach(function(d){return r.appendChild(d)}),{oldTags:a,newTags:o}},wB=function(e){return Object.keys(e).reduce(function(s,r){var i=typeof e[r]<"u"?r+'="'+e[r]+'"':""+r;return s?s+" "+i:i},"")},Mde=function(e,s,r,i){var a=wB(r),o=yB(s);return a?"<"+e+" "+wo+'="true" '+a+">"+iN(o,i)+"</"+e+">":"<"+e+" "+wo+'="true">'+iN(o,i)+"</"+e+">"},Dde=function(e,s,r){return s.reduce(function(i,a){var o=Object.keys(a).filter(function(h){return!(h===Us.INNER_HTML||h===Us.CSS_TEXT)}).reduce(function(h,g){var m=typeof a[g]>"u"?g:g+'="'+iN(a[g],r)+'"';return h?h+" "+m:m},""),c=a.innerHTML||a.cssText||"",d=gde.indexOf(e)===-1;return i+"<"+e+" "+wo+'="true" '+o+(d?"/>":">"+c+"</"+e+">")},"")},jB=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(r,i){return r[Rv[i]||i]=e[i],r},s)},kde=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(r,i){return r[pde[i]||i]=e[i],r},s)},Pde=function(e,s,r){var i,a=(i={key:s},i[wo]=!0,i),o=jB(r,a);return[Ne.createElement(dn.TITLE,o,s)]},Rde=function(e,s){return s.map(function(r,i){var a,o=(a={key:i},a[wo]=!0,a);return Object.keys(r).forEach(function(c){var d=Rv[c]||c;if(d===Us.INNER_HTML||d===Us.CSS_TEXT){var h=r.innerHTML||r.cssText;o.dangerouslySetInnerHTML={__html:h}}else o[d]=r[c]}),Ne.createElement(e,o)})},vl=function(e,s,r){switch(e){case dn.TITLE:return{toComponent:function(){return Pde(e,s.title,s.titleAttributes)},toString:function(){return Mde(e,s.title,s.titleAttributes,r)}};case Gd.BODY:case Gd.HTML:return{toComponent:function(){return jB(s)},toString:function(){return wB(s)}};default:return{toComponent:function(){return Rde(e,s)},toString:function(){return Dde(e,s,r)}}}},bB=function(e){var s=e.baseTag,r=e.bodyAttributes,i=e.encode,a=e.htmlAttributes,o=e.linkTags,c=e.metaTags,d=e.noscriptTags,h=e.scriptTags,g=e.styleTags,m=e.title,p=m===void 0?"":m,v=e.titleAttributes;return{base:vl(dn.BASE,s,i),bodyAttributes:vl(Gd.BODY,r,i),htmlAttributes:vl(Gd.HTML,a,i),link:vl(dn.LINK,o,i),meta:vl(dn.META,c,i),noscript:vl(dn.NOSCRIPT,d,i),script:vl(dn.SCRIPT,h,i),style:vl(dn.STYLE,g,i),title:vl(dn.TITLE,{title:p,titleAttributes:v},i)}},Lde=function(e){var s,r;return r=s=function(i){wde(a,i);function a(){return vde(this,a),jde(this,i.apply(this,arguments))}return a.prototype.shouldComponentUpdate=function(c){return!lde(this.props,c)},a.prototype.mapNestedChildrenToProps=function(c,d){if(!d)return null;switch(c.type){case dn.SCRIPT:case dn.NOSCRIPT:return{innerHTML:d};case dn.STYLE:return{cssText:d}}throw new Error("<"+c.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},a.prototype.flattenArrayTypeChildren=function(c){var d,h=c.child,g=c.arrayTypeChildren,m=c.newChildProps,p=c.nestedChildren;return qi({},g,(d={},d[h.type]=[].concat(g[h.type]||[],[qi({},m,this.mapNestedChildrenToProps(h,p))]),d))},a.prototype.mapObjectTypeChildren=function(c){var d,h,g=c.child,m=c.newProps,p=c.newChildProps,v=c.nestedChildren;switch(g.type){case dn.TITLE:return qi({},m,(d={},d[g.type]=v,d.titleAttributes=qi({},p),d));case dn.BODY:return qi({},m,{bodyAttributes:qi({},p)});case dn.HTML:return qi({},m,{htmlAttributes:qi({},p)})}return qi({},m,(h={},h[g.type]=qi({},p),h))},a.prototype.mapArrayTypeChildrenToProps=function(c,d){var h=qi({},d);return Object.keys(c).forEach(function(g){var m;h=qi({},h,(m={},m[g]=c[g],m))}),h},a.prototype.warnOnInvalidChildren=function(c,d){return!0},a.prototype.mapChildrenToProps=function(c,d){var h=this,g={};return Ne.Children.forEach(c,function(m){if(!(!m||!m.props)){var p=m.props,v=p.children,j=b_(p,["children"]),N=kde(j);switch(h.warnOnInvalidChildren(m,v),m.type){case dn.LINK:case dn.META:case dn.NOSCRIPT:case dn.SCRIPT:case dn.STYLE:g=h.flattenArrayTypeChildren({child:m,arrayTypeChildren:g,newChildProps:N,nestedChildren:v});break;default:d=h.mapObjectTypeChildren({child:m,newProps:d,newChildProps:N,nestedChildren:v});break}}}),d=this.mapArrayTypeChildrenToProps(g,d),d},a.prototype.render=function(){var c=this.props,d=c.children,h=b_(c,["children"]),g=qi({},h);return d&&(g=this.mapChildrenToProps(d,g)),Ne.createElement(e,g)},yde(a,null,[{key:"canUseDOM",set:function(c){e.canUseDOM=c}}]),a}(Ne.Component),s.propTypes={base:Vs.object,bodyAttributes:Vs.object,children:Vs.oneOfType([Vs.arrayOf(Vs.node),Vs.node]),defaultTitle:Vs.string,defer:Vs.bool,encodeSpecialCharacters:Vs.bool,htmlAttributes:Vs.object,link:Vs.arrayOf(Vs.object),meta:Vs.arrayOf(Vs.object),noscript:Vs.arrayOf(Vs.object),onChangeClientState:Vs.func,script:Vs.arrayOf(Vs.object),style:Vs.arrayOf(Vs.object),title:Vs.string,titleAttributes:Vs.object,titleTemplate:Vs.string},s.defaultProps={defer:!0,encodeSpecialCharacters:!0},s.peek=e.peek,s.rewind=function(){var i=e.rewind();return i||(i=bB({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},r},Ode=function(){return null},Fde=nde(Sde,Ide,bB)(Ode),um=Lde(Fde);um.renderStatic=um.rewind;/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Tc(t,e){return typeof t=="function"?t(e):t}function _a(t,e){return s=>{e.setState(r=>({...r,[t]:Tc(s,r[t])}))}}function Gy(t){return t instanceof Function}function Bde(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function zde(t,e){const s=[],r=i=>{i.forEach(a=>{s.push(a);const o=e(a);o!=null&&o.length&&r(o)})};return r(t),s}function $t(t,e,s){let r=[],i;return a=>{let o;s.key&&s.debug&&(o=Date.now());const c=t(a);if(!(c.length!==r.length||c.some((g,m)=>r[m]!==g)))return i;r=c;let h;if(s.key&&s.debug&&(h=Date.now()),i=e(...c),s==null||s.onChange==null||s.onChange(i),s.key&&s.debug&&s!=null&&s.debug()){const g=Math.round((Date.now()-o)*100)/100,m=Math.round((Date.now()-h)*100)/100,p=m/16,v=(j,N)=>{for(j=String(j);j.length<N;)j=" "+j;return j};console.info(`%c ${v(m,5)} /${v(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*p,120))}deg 100% 31%);`,s==null?void 0:s.key)}return i}}function Ut(t,e,s,r){return{debug:()=>{var i;return(i=t==null?void 0:t.debugAll)!=null?i:t[e]},key:!1,onChange:r}}function Vde(t,e,s,r){const i=()=>{var o;return(o=a.getValue())!=null?o:t.options.renderFallbackValue},a={id:`${e.id}_${s.id}`,row:e,column:s,getValue:()=>e.getValue(r),renderValue:i,getContext:$t(()=>[t,s,e,a],(o,c,d,h)=>({table:o,column:c,row:d,cell:h,getValue:h.getValue,renderValue:h.renderValue}),Ut(t.options,"debugCells"))};return t._features.forEach(o=>{o.createCell==null||o.createCell(a,s,e,t)},{}),a}function $de(t,e,s,r){var i,a;const c={...t._getDefaultColumnDef(),...e},d=c.accessorKey;let h=(i=(a=c.id)!=null?a:d?typeof String.prototype.replaceAll=="function"?d.replaceAll(".","_"):d.replace(/\./g,"_"):void 0)!=null?i:typeof c.header=="string"?c.header:void 0,g;if(c.accessorFn?g=c.accessorFn:d&&(d.includes(".")?g=p=>{let v=p;for(const N of d.split(".")){var j;v=(j=v)==null?void 0:j[N]}return v}:g=p=>p[c.accessorKey]),!h)throw new Error;let m={id:`${String(h)}`,accessorFn:g,parent:r,depth:s,columnDef:c,columns:[],getFlatColumns:$t(()=>[!0],()=>{var p;return[m,...(p=m.columns)==null?void 0:p.flatMap(v=>v.getFlatColumns())]},Ut(t.options,"debugColumns")),getLeafColumns:$t(()=>[t._getOrderColumnsFn()],p=>{var v;if((v=m.columns)!=null&&v.length){let j=m.columns.flatMap(N=>N.getLeafColumns());return p(j)}return[m]},Ut(t.options,"debugColumns"))};for(const p of t._features)p.createColumn==null||p.createColumn(m,t);return m}const hi="debugHeaders";function S_(t,e,s){var r;let a={id:(r=s.id)!=null?r:e.id,column:e,index:s.index,isPlaceholder:!!s.isPlaceholder,placeholderId:s.placeholderId,depth:s.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],c=d=>{d.subHeaders&&d.subHeaders.length&&d.subHeaders.map(c),o.push(d)};return c(a),o},getContext:()=>({table:t,header:a,column:e})};return t._features.forEach(o=>{o.createHeader==null||o.createHeader(a,t)}),a}const Ude={createTable:t=>{t.getHeaderGroups=$t(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,s,r,i)=>{var a,o;const c=(a=r==null?void 0:r.map(m=>s.find(p=>p.id===m)).filter(Boolean))!=null?a:[],d=(o=i==null?void 0:i.map(m=>s.find(p=>p.id===m)).filter(Boolean))!=null?o:[],h=s.filter(m=>!(r!=null&&r.includes(m.id))&&!(i!=null&&i.includes(m.id)));return bx(e,[...c,...h,...d],t)},Ut(t.options,hi)),t.getCenterHeaderGroups=$t(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,s,r,i)=>(s=s.filter(a=>!(r!=null&&r.includes(a.id))&&!(i!=null&&i.includes(a.id))),bx(e,s,t,"center")),Ut(t.options,hi)),t.getLeftHeaderGroups=$t(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,s,r)=>{var i;const a=(i=r==null?void 0:r.map(o=>s.find(c=>c.id===o)).filter(Boolean))!=null?i:[];return bx(e,a,t,"left")},Ut(t.options,hi)),t.getRightHeaderGroups=$t(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,s,r)=>{var i;const a=(i=r==null?void 0:r.map(o=>s.find(c=>c.id===o)).filter(Boolean))!=null?i:[];return bx(e,a,t,"right")},Ut(t.options,hi)),t.getFooterGroups=$t(()=>[t.getHeaderGroups()],e=>[...e].reverse(),Ut(t.options,hi)),t.getLeftFooterGroups=$t(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),Ut(t.options,hi)),t.getCenterFooterGroups=$t(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),Ut(t.options,hi)),t.getRightFooterGroups=$t(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),Ut(t.options,hi)),t.getFlatHeaders=$t(()=>[t.getHeaderGroups()],e=>e.map(s=>s.headers).flat(),Ut(t.options,hi)),t.getLeftFlatHeaders=$t(()=>[t.getLeftHeaderGroups()],e=>e.map(s=>s.headers).flat(),Ut(t.options,hi)),t.getCenterFlatHeaders=$t(()=>[t.getCenterHeaderGroups()],e=>e.map(s=>s.headers).flat(),Ut(t.options,hi)),t.getRightFlatHeaders=$t(()=>[t.getRightHeaderGroups()],e=>e.map(s=>s.headers).flat(),Ut(t.options,hi)),t.getCenterLeafHeaders=$t(()=>[t.getCenterFlatHeaders()],e=>e.filter(s=>{var r;return!((r=s.subHeaders)!=null&&r.length)}),Ut(t.options,hi)),t.getLeftLeafHeaders=$t(()=>[t.getLeftFlatHeaders()],e=>e.filter(s=>{var r;return!((r=s.subHeaders)!=null&&r.length)}),Ut(t.options,hi)),t.getRightLeafHeaders=$t(()=>[t.getRightFlatHeaders()],e=>e.filter(s=>{var r;return!((r=s.subHeaders)!=null&&r.length)}),Ut(t.options,hi)),t.getLeafHeaders=$t(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,s,r)=>{var i,a,o,c,d,h;return[...(i=(a=e[0])==null?void 0:a.headers)!=null?i:[],...(o=(c=s[0])==null?void 0:c.headers)!=null?o:[],...(d=(h=r[0])==null?void 0:h.headers)!=null?d:[]].map(g=>g.getLeafHeaders()).flat()},Ut(t.options,hi))}};function bx(t,e,s,r){var i,a;let o=0;const c=function(p,v){v===void 0&&(v=1),o=Math.max(o,v),p.filter(j=>j.getIsVisible()).forEach(j=>{var N;(N=j.columns)!=null&&N.length&&c(j.columns,v+1)},0)};c(t);let d=[];const h=(p,v)=>{const j={depth:v,id:[r,`${v}`].filter(Boolean).join("_"),headers:[]},N=[];p.forEach(E=>{const _=[...N].reverse()[0],S=E.column.depth===j.depth;let C,I=!1;if(S&&E.column.parent?C=E.column.parent:(C=E.column,I=!0),_&&(_==null?void 0:_.column)===C)_.subHeaders.push(E);else{const P=S_(s,C,{id:[r,v,C.id,E==null?void 0:E.id].filter(Boolean).join("_"),isPlaceholder:I,placeholderId:I?`${N.filter(L=>L.column===C).length}`:void 0,depth:v,index:N.length});P.subHeaders.push(E),N.push(P)}j.headers.push(E),E.headerGroup=j}),d.push(j),v>0&&h(N,v-1)},g=e.map((p,v)=>S_(s,p,{depth:o,index:v}));h(g,o-1),d.reverse();const m=p=>p.filter(j=>j.column.getIsVisible()).map(j=>{let N=0,E=0,_=[0];j.subHeaders&&j.subHeaders.length?(_=[],m(j.subHeaders).forEach(C=>{let{colSpan:I,rowSpan:P}=C;N+=I,_.push(P)})):N=1;const S=Math.min(..._);return E=E+S,j.colSpan=N,j.rowSpan=E,{colSpan:N,rowSpan:E}});return m((i=(a=d[0])==null?void 0:a.headers)!=null?i:[]),d}const wS=(t,e,s,r,i,a,o)=>{let c={id:e,index:r,original:s,depth:i,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:d=>{if(c._valuesCache.hasOwnProperty(d))return c._valuesCache[d];const h=t.getColumn(d);if(h!=null&&h.accessorFn)return c._valuesCache[d]=h.accessorFn(c.original,r),c._valuesCache[d]},getUniqueValues:d=>{if(c._uniqueValuesCache.hasOwnProperty(d))return c._uniqueValuesCache[d];const h=t.getColumn(d);if(h!=null&&h.accessorFn)return h.columnDef.getUniqueValues?(c._uniqueValuesCache[d]=h.columnDef.getUniqueValues(c.original,r),c._uniqueValuesCache[d]):(c._uniqueValuesCache[d]=[c.getValue(d)],c._uniqueValuesCache[d])},renderValue:d=>{var h;return(h=c.getValue(d))!=null?h:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>zde(c.subRows,d=>d.subRows),getParentRow:()=>c.parentId?t.getRow(c.parentId,!0):void 0,getParentRows:()=>{let d=[],h=c;for(;;){const g=h.getParentRow();if(!g)break;d.push(g),h=g}return d.reverse()},getAllCells:$t(()=>[t.getAllLeafColumns()],d=>d.map(h=>Vde(t,c,h,h.id)),Ut(t.options,"debugRows")),_getAllCellsByColumnId:$t(()=>[c.getAllCells()],d=>d.reduce((h,g)=>(h[g.column.id]=g,h),{}),Ut(t.options,"debugRows"))};for(let d=0;d<t._features.length;d++){const h=t._features[d];h==null||h.createRow==null||h.createRow(c,t)}return c},Wde={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},NB=(t,e,s)=>{var r,i;const a=s==null||(r=s.toString())==null?void 0:r.toLowerCase();return!!(!((i=t.getValue(e))==null||(i=i.toString())==null||(i=i.toLowerCase())==null)&&i.includes(a))};NB.autoRemove=t=>Co(t);const CB=(t,e,s)=>{var r;return!!(!((r=t.getValue(e))==null||(r=r.toString())==null)&&r.includes(s))};CB.autoRemove=t=>Co(t);const SB=(t,e,s)=>{var r;return((r=t.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(s==null?void 0:s.toLowerCase())};SB.autoRemove=t=>Co(t);const AB=(t,e,s)=>{var r;return(r=t.getValue(e))==null?void 0:r.includes(s)};AB.autoRemove=t=>Co(t);const EB=(t,e,s)=>!s.some(r=>{var i;return!((i=t.getValue(e))!=null&&i.includes(r))});EB.autoRemove=t=>Co(t)||!(t!=null&&t.length);const _B=(t,e,s)=>s.some(r=>{var i;return(i=t.getValue(e))==null?void 0:i.includes(r)});_B.autoRemove=t=>Co(t)||!(t!=null&&t.length);const IB=(t,e,s)=>t.getValue(e)===s;IB.autoRemove=t=>Co(t);const TB=(t,e,s)=>t.getValue(e)==s;TB.autoRemove=t=>Co(t);const jS=(t,e,s)=>{let[r,i]=s;const a=t.getValue(e);return a>=r&&a<=i};jS.resolveFilterValue=t=>{let[e,s]=t,r=typeof e!="number"?parseFloat(e):e,i=typeof s!="number"?parseFloat(s):s,a=e===null||Number.isNaN(r)?-1/0:r,o=s===null||Number.isNaN(i)?1/0:i;if(a>o){const c=a;a=o,o=c}return[a,o]};jS.autoRemove=t=>Co(t)||Co(t[0])&&Co(t[1]);const Sl={includesString:NB,includesStringSensitive:CB,equalsString:SB,arrIncludes:AB,arrIncludesAll:EB,arrIncludesSome:_B,equals:IB,weakEquals:TB,inNumberRange:jS};function Co(t){return t==null||t===""}const Hde={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:_a("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const s=e.getCoreRowModel().flatRows[0],r=s==null?void 0:s.getValue(t.id);return typeof r=="string"?Sl.includesString:typeof r=="number"?Sl.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?Sl.equals:Array.isArray(r)?Sl.arrIncludes:Sl.weakEquals},t.getFilterFn=()=>{var s,r;return Gy(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(s=(r=e.options.filterFns)==null?void 0:r[t.columnDef.filterFn])!=null?s:Sl[t.columnDef.filterFn]},t.getCanFilter=()=>{var s,r,i;return((s=t.columnDef.enableColumnFilter)!=null?s:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var s;return(s=e.getState().columnFilters)==null||(s=s.find(r=>r.id===t.id))==null?void 0:s.value},t.getFilterIndex=()=>{var s,r;return(s=(r=e.getState().columnFilters)==null?void 0:r.findIndex(i=>i.id===t.id))!=null?s:-1},t.setFilterValue=s=>{e.setColumnFilters(r=>{const i=t.getFilterFn(),a=r==null?void 0:r.find(g=>g.id===t.id),o=Tc(s,a?a.value:void 0);if(A_(i,o,t)){var c;return(c=r==null?void 0:r.filter(g=>g.id!==t.id))!=null?c:[]}const d={id:t.id,value:o};if(a){var h;return(h=r==null?void 0:r.map(g=>g.id===t.id?d:g))!=null?h:[]}return r!=null&&r.length?[...r,d]:[d]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const s=t.getAllLeafColumns(),r=i=>{var a;return(a=Tc(e,i))==null?void 0:a.filter(o=>{const c=s.find(d=>d.id===o.id);if(c){const d=c.getFilterFn();if(A_(d,o.value,c))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(r)},t.resetColumnFilters=e=>{var s,r;t.setColumnFilters(e?[]:(s=(r=t.initialState)==null?void 0:r.columnFilters)!=null?s:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function A_(t,e,s){return(t&&t.autoRemove?t.autoRemove(e,s):!1)||typeof e>"u"||typeof e=="string"&&!e}const qde=(t,e,s)=>s.reduce((r,i)=>{const a=i.getValue(t);return r+(typeof a=="number"?a:0)},0),Gde=(t,e,s)=>{let r;return s.forEach(i=>{const a=i.getValue(t);a!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}),r},Yde=(t,e,s)=>{let r;return s.forEach(i=>{const a=i.getValue(t);a!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}),r},Kde=(t,e,s)=>{let r,i;return s.forEach(a=>{const o=a.getValue(t);o!=null&&(r===void 0?o>=o&&(r=i=o):(r>o&&(r=o),i<o&&(i=o)))}),[r,i]},Zde=(t,e)=>{let s=0,r=0;if(e.forEach(i=>{let a=i.getValue(t);a!=null&&(a=+a)>=a&&(++s,r+=a)}),s)return r/s},Qde=(t,e)=>{if(!e.length)return;const s=e.map(a=>a.getValue(t));if(!Bde(s))return;if(s.length===1)return s[0];const r=Math.floor(s.length/2),i=s.sort((a,o)=>a-o);return s.length%2!==0?i[r]:(i[r-1]+i[r])/2},Xde=(t,e)=>Array.from(new Set(e.map(s=>s.getValue(t))).values()),Jde=(t,e)=>new Set(e.map(s=>s.getValue(t))).size,eue=(t,e)=>e.length,zw={sum:qde,min:Gde,max:Yde,extent:Kde,mean:Zde,median:Qde,unique:Xde,uniqueCount:Jde,count:eue},tue={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,s;return(e=(s=t.getValue())==null||s.toString==null?void 0:s.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:_a("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(s=>s!=null&&s.includes(t.id)?s.filter(r=>r!==t.id):[...s??[],t.id])},t.getCanGroup=()=>{var s,r;return((s=t.columnDef.enableGrouping)!=null?s:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var s;return(s=e.getState().grouping)==null?void 0:s.includes(t.id)},t.getGroupedIndex=()=>{var s;return(s=e.getState().grouping)==null?void 0:s.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const s=t.getCanGroup();return()=>{s&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const s=e.getCoreRowModel().flatRows[0],r=s==null?void 0:s.getValue(t.id);if(typeof r=="number")return zw.sum;if(Object.prototype.toString.call(r)==="[object Date]")return zw.extent},t.getAggregationFn=()=>{var s,r;if(!t)throw new Error;return Gy(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(s=(r=e.options.aggregationFns)==null?void 0:r[t.columnDef.aggregationFn])!=null?s:zw[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var s,r;t.setGrouping(e?[]:(s=(r=t.initialState)==null?void 0:r.grouping)!=null?s:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=s=>{if(t._groupingValuesCache.hasOwnProperty(s))return t._groupingValuesCache[s];const r=e.getColumn(s);return r!=null&&r.columnDef.getGroupingValue?(t._groupingValuesCache[s]=r.columnDef.getGroupingValue(t.original),t._groupingValuesCache[s]):t.getValue(s)},t._groupingValuesCache={}},createCell:(t,e,s,r)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===s.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var i;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((i=s.subRows)!=null&&i.length)}}};function nue(t,e,s){if(!(e!=null&&e.length)||!s)return t;const r=t.filter(a=>!e.includes(a.id));return s==="remove"?r:[...e.map(a=>t.find(o=>o.id===a)).filter(Boolean),...r]}const sue={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:_a("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=$t(s=>[tp(e,s)],s=>s.findIndex(r=>r.id===t.id),Ut(e.options,"debugColumns")),t.getIsFirstColumn=s=>{var r;return((r=tp(e,s)[0])==null?void 0:r.id)===t.id},t.getIsLastColumn=s=>{var r;const i=tp(e,s);return((r=i[i.length-1])==null?void 0:r.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var s;t.setColumnOrder(e?[]:(s=t.initialState.columnOrder)!=null?s:[])},t._getOrderColumnsFn=$t(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,s,r)=>i=>{let a=[];if(!(e!=null&&e.length))a=i;else{const o=[...e],c=[...i];for(;c.length&&o.length;){const d=o.shift(),h=c.findIndex(g=>g.id===d);h>-1&&a.push(c.splice(h,1)[0])}a=[...a,...c]}return nue(a,s,r)},Ut(t.options,"debugTable"))}},Vw=()=>({left:[],right:[]}),rue={getInitialState:t=>({columnPinning:Vw(),...t}),getDefaultOptions:t=>({onColumnPinningChange:_a("columnPinning",t)}),createColumn:(t,e)=>{t.pin=s=>{const r=t.getLeafColumns().map(i=>i.id).filter(Boolean);e.setColumnPinning(i=>{var a,o;if(s==="right"){var c,d;return{left:((c=i==null?void 0:i.left)!=null?c:[]).filter(m=>!(r!=null&&r.includes(m))),right:[...((d=i==null?void 0:i.right)!=null?d:[]).filter(m=>!(r!=null&&r.includes(m))),...r]}}if(s==="left"){var h,g;return{left:[...((h=i==null?void 0:i.left)!=null?h:[]).filter(m=>!(r!=null&&r.includes(m))),...r],right:((g=i==null?void 0:i.right)!=null?g:[]).filter(m=>!(r!=null&&r.includes(m)))}}return{left:((a=i==null?void 0:i.left)!=null?a:[]).filter(m=>!(r!=null&&r.includes(m))),right:((o=i==null?void 0:i.right)!=null?o:[]).filter(m=>!(r!=null&&r.includes(m)))}})},t.getCanPin=()=>t.getLeafColumns().some(r=>{var i,a,o;return((i=r.columnDef.enablePinning)!=null?i:!0)&&((a=(o=e.options.enableColumnPinning)!=null?o:e.options.enablePinning)!=null?a:!0)}),t.getIsPinned=()=>{const s=t.getLeafColumns().map(c=>c.id),{left:r,right:i}=e.getState().columnPinning,a=s.some(c=>r==null?void 0:r.includes(c)),o=s.some(c=>i==null?void 0:i.includes(c));return a?"left":o?"right":!1},t.getPinnedIndex=()=>{var s,r;const i=t.getIsPinned();return i?(s=(r=e.getState().columnPinning)==null||(r=r[i])==null?void 0:r.indexOf(t.id))!=null?s:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=$t(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(s,r,i)=>{const a=[...r??[],...i??[]];return s.filter(o=>!a.includes(o.column.id))},Ut(e.options,"debugRows")),t.getLeftVisibleCells=$t(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(s,r)=>(r??[]).map(a=>s.find(o=>o.column.id===a)).filter(Boolean).map(a=>({...a,position:"left"})),Ut(e.options,"debugRows")),t.getRightVisibleCells=$t(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(s,r)=>(r??[]).map(a=>s.find(o=>o.column.id===a)).filter(Boolean).map(a=>({...a,position:"right"})),Ut(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var s,r;return t.setColumnPinning(e?Vw():(s=(r=t.initialState)==null?void 0:r.columnPinning)!=null?s:Vw())},t.getIsSomeColumnsPinned=e=>{var s;const r=t.getState().columnPinning;if(!e){var i,a;return!!((i=r.left)!=null&&i.length||(a=r.right)!=null&&a.length)}return!!((s=r[e])!=null&&s.length)},t.getLeftLeafColumns=$t(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,s)=>(s??[]).map(r=>e.find(i=>i.id===r)).filter(Boolean),Ut(t.options,"debugColumns")),t.getRightLeafColumns=$t(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,s)=>(s??[]).map(r=>e.find(i=>i.id===r)).filter(Boolean),Ut(t.options,"debugColumns")),t.getCenterLeafColumns=$t(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,s,r)=>{const i=[...s??[],...r??[]];return e.filter(a=>!i.includes(a.id))},Ut(t.options,"debugColumns"))}},Nx={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},$w=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),iue={getDefaultColumnDef:()=>Nx,getInitialState:t=>({columnSizing:{},columnSizingInfo:$w(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:_a("columnSizing",t),onColumnSizingInfoChange:_a("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var s,r,i;const a=e.getState().columnSizing[t.id];return Math.min(Math.max((s=t.columnDef.minSize)!=null?s:Nx.minSize,(r=a??t.columnDef.size)!=null?r:Nx.size),(i=t.columnDef.maxSize)!=null?i:Nx.maxSize)},t.getStart=$t(s=>[s,tp(e,s),e.getState().columnSizing],(s,r)=>r.slice(0,t.getIndex(s)).reduce((i,a)=>i+a.getSize(),0),Ut(e.options,"debugColumns")),t.getAfter=$t(s=>[s,tp(e,s),e.getState().columnSizing],(s,r)=>r.slice(t.getIndex(s)+1).reduce((i,a)=>i+a.getSize(),0),Ut(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(s=>{let{[t.id]:r,...i}=s;return i})},t.getCanResize=()=>{var s,r;return((s=t.columnDef.enableResizing)!=null?s:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let s=0;const r=i=>{if(i.subHeaders.length)i.subHeaders.forEach(r);else{var a;s+=(a=i.column.getSize())!=null?a:0}};return r(t),s},t.getStart=()=>{if(t.index>0){const s=t.headerGroup.headers[t.index-1];return s.getStart()+s.getSize()}return 0},t.getResizeHandler=s=>{const r=e.getColumn(t.column.id),i=r==null?void 0:r.getCanResize();return a=>{if(!r||!i||(a.persist==null||a.persist(),Uw(a)&&a.touches&&a.touches.length>1))return;const o=t.getSize(),c=t?t.getLeafHeaders().map(_=>[_.column.id,_.column.getSize()]):[[r.id,r.getSize()]],d=Uw(a)?Math.round(a.touches[0].clientX):a.clientX,h={},g=(_,S)=>{typeof S=="number"&&(e.setColumnSizingInfo(C=>{var I,P;const L=e.options.columnResizeDirection==="rtl"?-1:1,T=(S-((I=C==null?void 0:C.startOffset)!=null?I:0))*L,M=Math.max(T/((P=C==null?void 0:C.startSize)!=null?P:0),-.999999);return C.columnSizingStart.forEach(k=>{let[O,V]=k;h[O]=Math.round(Math.max(V+V*M,0)*100)/100}),{...C,deltaOffset:T,deltaPercentage:M}}),(e.options.columnResizeMode==="onChange"||_==="end")&&e.setColumnSizing(C=>({...C,...h})))},m=_=>g("move",_),p=_=>{g("end",_),e.setColumnSizingInfo(S=>({...S,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},v=s||typeof document<"u"?document:null,j={moveHandler:_=>m(_.clientX),upHandler:_=>{v==null||v.removeEventListener("mousemove",j.moveHandler),v==null||v.removeEventListener("mouseup",j.upHandler),p(_.clientX)}},N={moveHandler:_=>(_.cancelable&&(_.preventDefault(),_.stopPropagation()),m(_.touches[0].clientX),!1),upHandler:_=>{var S;v==null||v.removeEventListener("touchmove",N.moveHandler),v==null||v.removeEventListener("touchend",N.upHandler),_.cancelable&&(_.preventDefault(),_.stopPropagation()),p((S=_.touches[0])==null?void 0:S.clientX)}},E=aue()?{passive:!1}:!1;Uw(a)?(v==null||v.addEventListener("touchmove",N.moveHandler,E),v==null||v.addEventListener("touchend",N.upHandler,E)):(v==null||v.addEventListener("mousemove",j.moveHandler,E),v==null||v.addEventListener("mouseup",j.upHandler,E)),e.setColumnSizingInfo(_=>({..._,startOffset:d,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:c,isResizingColumn:r.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var s;t.setColumnSizing(e?{}:(s=t.initialState.columnSizing)!=null?s:{})},t.resetHeaderSizeInfo=e=>{var s;t.setColumnSizingInfo(e?$w():(s=t.initialState.columnSizingInfo)!=null?s:$w())},t.getTotalSize=()=>{var e,s;return(e=(s=t.getHeaderGroups()[0])==null?void 0:s.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,s;return(e=(s=t.getLeftHeaderGroups()[0])==null?void 0:s.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,s;return(e=(s=t.getCenterHeaderGroups()[0])==null?void 0:s.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,s;return(e=(s=t.getRightHeaderGroups()[0])==null?void 0:s.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0}}};let Cx=null;function aue(){if(typeof Cx=="boolean")return Cx;let t=!1;try{const e={get passive(){return t=!0,!1}},s=()=>{};window.addEventListener("test",s,e),window.removeEventListener("test",s)}catch{t=!1}return Cx=t,Cx}function Uw(t){return t.type==="touchstart"}const oue={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:_a("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=s=>{t.getCanHide()&&e.setColumnVisibility(r=>({...r,[t.id]:s??!t.getIsVisible()}))},t.getIsVisible=()=>{var s,r;const i=t.columns;return(s=i.length?i.some(a=>a.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[t.id])!=null?s:!0},t.getCanHide=()=>{var s,r;return((s=t.columnDef.enableHiding)!=null?s:!0)&&((r=e.options.enableHiding)!=null?r:!0)},t.getToggleVisibilityHandler=()=>s=>{t.toggleVisibility==null||t.toggleVisibility(s.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=$t(()=>[t.getAllCells(),e.getState().columnVisibility],s=>s.filter(r=>r.column.getIsVisible()),Ut(e.options,"debugRows")),t.getVisibleCells=$t(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(s,r,i)=>[...s,...r,...i],Ut(e.options,"debugRows"))},createTable:t=>{const e=(s,r)=>$t(()=>[r(),r().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(a=>a.getIsVisible==null?void 0:a.getIsVisible()),Ut(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=s=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(s),t.resetColumnVisibility=s=>{var r;t.setColumnVisibility(s?{}:(r=t.initialState.columnVisibility)!=null?r:{})},t.toggleAllColumnsVisible=s=>{var r;s=(r=s)!=null?r:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((i,a)=>({...i,[a.id]:s||!(a.getCanHide!=null&&a.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(s=>!(s.getIsVisible!=null&&s.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(s=>s.getIsVisible==null?void 0:s.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>s=>{var r;t.toggleAllColumnsVisible((r=s.target)==null?void 0:r.checked)}}};function tp(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const lue={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},cue={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:_a("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var s;const r=(s=t.getCoreRowModel().flatRows[0])==null||(s=s._getAllCellsByColumnId()[e.id])==null?void 0:s.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var s,r,i,a;return((s=t.columnDef.enableGlobalFilter)!=null?s:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&((a=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?a:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>Sl.includesString,t.getGlobalFilterFn=()=>{var e,s;const{globalFilterFn:r}=t.options;return Gy(r)?r:r==="auto"?t.getGlobalAutoFilterFn():(e=(s=t.options.filterFns)==null?void 0:s[r])!=null?e:Sl[r]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},due={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:_a("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,s=!1;t._autoResetExpanded=()=>{var r,i;if(!e){t._queue(()=>{e=!0});return}if((r=(i=t.options.autoResetAll)!=null?i:t.options.autoResetExpanded)!=null?r:!t.options.manualExpanding){if(s)return;s=!0,t._queue(()=>{t.resetExpanded(),s=!1})}},t.setExpanded=r=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(r),t.toggleAllRowsExpanded=r=>{r??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=r=>{var i,a;t.setExpanded(r?{}:(i=(a=t.initialState)==null?void 0:a.expanded)!=null?i:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const r=t.getState().expanded;return r===!0||Object.values(r).some(Boolean)},t.getIsAllRowsExpanded=()=>{const r=t.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||t.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},t.getExpandedDepth=()=>{let r=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(a=>{const o=a.split(".");r=Math.max(r,o.length)}),r},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=s=>{e.setExpanded(r=>{var i;const a=r===!0?!0:!!(r!=null&&r[t.id]);let o={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(c=>{o[c]=!0}):o=r,s=(i=s)!=null?i:!a,!a&&s)return{...o,[t.id]:!0};if(a&&!s){const{[t.id]:c,...d}=o;return d}return r})},t.getIsExpanded=()=>{var s;const r=e.getState().expanded;return!!((s=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?s:r===!0||r!=null&&r[t.id])},t.getCanExpand=()=>{var s,r,i;return(s=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?s:((r=e.options.enableExpanding)!=null?r:!0)&&!!((i=t.subRows)!=null&&i.length)},t.getIsAllParentsExpanded=()=>{let s=!0,r=t;for(;s&&r.parentId;)r=e.getRow(r.parentId,!0),s=r.getIsExpanded();return s},t.getToggleExpandedHandler=()=>{const s=t.getCanExpand();return()=>{s&&t.toggleExpanded()}}}},lN=0,cN=10,Ww=()=>({pageIndex:lN,pageSize:cN}),uue={getInitialState:t=>({...t,pagination:{...Ww(),...t==null?void 0:t.pagination}}),getDefaultOptions:t=>({onPaginationChange:_a("pagination",t)}),createTable:t=>{let e=!1,s=!1;t._autoResetPageIndex=()=>{var r,i;if(!e){t._queue(()=>{e=!0});return}if((r=(i=t.options.autoResetAll)!=null?i:t.options.autoResetPageIndex)!=null?r:!t.options.manualPagination){if(s)return;s=!0,t._queue(()=>{t.resetPageIndex(),s=!1})}},t.setPagination=r=>{const i=a=>Tc(r,a);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(i)},t.resetPagination=r=>{var i;t.setPagination(r?Ww():(i=t.initialState.pagination)!=null?i:Ww())},t.setPageIndex=r=>{t.setPagination(i=>{let a=Tc(r,i.pageIndex);const o=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return a=Math.max(0,Math.min(a,o)),{...i,pageIndex:a}})},t.resetPageIndex=r=>{var i,a;t.setPageIndex(r?lN:(i=(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageIndex)!=null?i:lN)},t.resetPageSize=r=>{var i,a;t.setPageSize(r?cN:(i=(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageSize)!=null?i:cN)},t.setPageSize=r=>{t.setPagination(i=>{const a=Math.max(1,Tc(r,i.pageSize)),o=i.pageSize*i.pageIndex,c=Math.floor(o/a);return{...i,pageIndex:c,pageSize:a}})},t.setPageCount=r=>t.setPagination(i=>{var a;let o=Tc(r,(a=t.options.pageCount)!=null?a:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...i,pageCount:o}}),t.getPageOptions=$t(()=>[t.getPageCount()],r=>{let i=[];return r&&r>0&&(i=[...new Array(r)].fill(null).map((a,o)=>o)),i},Ut(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:r}=t.getState().pagination,i=t.getPageCount();return i===-1?!0:i===0?!1:r<i-1},t.previousPage=()=>t.setPageIndex(r=>r-1),t.nextPage=()=>t.setPageIndex(r=>r+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var r;return(r=t.options.pageCount)!=null?r:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var r;return(r=t.options.rowCount)!=null?r:t.getPrePaginationRowModel().rows.length}}},Hw=()=>({top:[],bottom:[]}),hue={getInitialState:t=>({rowPinning:Hw(),...t}),getDefaultOptions:t=>({onRowPinningChange:_a("rowPinning",t)}),createRow:(t,e)=>{t.pin=(s,r,i)=>{const a=r?t.getLeafRows().map(d=>{let{id:h}=d;return h}):[],o=i?t.getParentRows().map(d=>{let{id:h}=d;return h}):[],c=new Set([...o,t.id,...a]);e.setRowPinning(d=>{var h,g;if(s==="bottom"){var m,p;return{top:((m=d==null?void 0:d.top)!=null?m:[]).filter(N=>!(c!=null&&c.has(N))),bottom:[...((p=d==null?void 0:d.bottom)!=null?p:[]).filter(N=>!(c!=null&&c.has(N))),...Array.from(c)]}}if(s==="top"){var v,j;return{top:[...((v=d==null?void 0:d.top)!=null?v:[]).filter(N=>!(c!=null&&c.has(N))),...Array.from(c)],bottom:((j=d==null?void 0:d.bottom)!=null?j:[]).filter(N=>!(c!=null&&c.has(N)))}}return{top:((h=d==null?void 0:d.top)!=null?h:[]).filter(N=>!(c!=null&&c.has(N))),bottom:((g=d==null?void 0:d.bottom)!=null?g:[]).filter(N=>!(c!=null&&c.has(N)))}})},t.getCanPin=()=>{var s;const{enableRowPinning:r,enablePinning:i}=e.options;return typeof r=="function"?r(t):(s=r??i)!=null?s:!0},t.getIsPinned=()=>{const s=[t.id],{top:r,bottom:i}=e.getState().rowPinning,a=s.some(c=>r==null?void 0:r.includes(c)),o=s.some(c=>i==null?void 0:i.includes(c));return a?"top":o?"bottom":!1},t.getPinnedIndex=()=>{var s,r;const i=t.getIsPinned();if(!i)return-1;const a=(s=i==="top"?e.getTopRows():e.getBottomRows())==null?void 0:s.map(o=>{let{id:c}=o;return c});return(r=a==null?void 0:a.indexOf(t.id))!=null?r:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var s,r;return t.setRowPinning(e?Hw():(s=(r=t.initialState)==null?void 0:r.rowPinning)!=null?s:Hw())},t.getIsSomeRowsPinned=e=>{var s;const r=t.getState().rowPinning;if(!e){var i,a;return!!((i=r.top)!=null&&i.length||(a=r.bottom)!=null&&a.length)}return!!((s=r[e])!=null&&s.length)},t._getPinnedRows=(e,s,r)=>{var i;return((i=t.options.keepPinnedRows)==null||i?(s??[]).map(o=>{const c=t.getRow(o,!0);return c.getIsAllParentsExpanded()?c:null}):(s??[]).map(o=>e.find(c=>c.id===o))).filter(Boolean).map(o=>({...o,position:r}))},t.getTopRows=$t(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,s)=>t._getPinnedRows(e,s,"top"),Ut(t.options,"debugRows")),t.getBottomRows=$t(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,s)=>t._getPinnedRows(e,s,"bottom"),Ut(t.options,"debugRows")),t.getCenterRows=$t(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,s,r)=>{const i=new Set([...s??[],...r??[]]);return e.filter(a=>!i.has(a.id))},Ut(t.options,"debugRows"))}},mue={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:_a("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var s;return t.setRowSelection(e?{}:(s=t.initialState.rowSelection)!=null?s:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(s=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const r={...s},i=t.getPreGroupedRowModel().flatRows;return e?i.forEach(a=>{a.getCanSelect()&&(r[a.id]=!0)}):i.forEach(a=>{delete r[a.id]}),r})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(s=>{const r=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),i={...s};return t.getRowModel().rows.forEach(a=>{dN(i,a.id,r,!0,t)}),i}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=$t(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,s)=>Object.keys(e).length?qw(t,s):{rows:[],flatRows:[],rowsById:{}},Ut(t.options,"debugTable")),t.getFilteredSelectedRowModel=$t(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,s)=>Object.keys(e).length?qw(t,s):{rows:[],flatRows:[],rowsById:{}},Ut(t.options,"debugTable")),t.getGroupedSelectedRowModel=$t(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,s)=>Object.keys(e).length?qw(t,s):{rows:[],flatRows:[],rowsById:{}},Ut(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:s}=t.getState();let r=!!(e.length&&Object.keys(s).length);return r&&e.some(i=>i.getCanSelect()&&!s[i.id])&&(r=!1),r},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:s}=t.getState();let r=!!e.length;return r&&e.some(i=>!s[i.id])&&(r=!1),r},t.getIsSomeRowsSelected=()=>{var e;const s=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return s>0&&s<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(s=>s.getCanSelect()).some(s=>s.getIsSelected()||s.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(s,r)=>{const i=t.getIsSelected();e.setRowSelection(a=>{var o;if(s=typeof s<"u"?s:!i,t.getCanSelect()&&i===s)return a;const c={...a};return dN(c,t.id,s,(o=r==null?void 0:r.selectChildren)!=null?o:!0,e),c})},t.getIsSelected=()=>{const{rowSelection:s}=e.getState();return bS(t,s)},t.getIsSomeSelected=()=>{const{rowSelection:s}=e.getState();return uN(t,s)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:s}=e.getState();return uN(t,s)==="all"},t.getCanSelect=()=>{var s;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(s=e.options.enableRowSelection)!=null?s:!0},t.getCanSelectSubRows=()=>{var s;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(s=e.options.enableSubRowSelection)!=null?s:!0},t.getCanMultiSelect=()=>{var s;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(s=e.options.enableMultiRowSelection)!=null?s:!0},t.getToggleSelectedHandler=()=>{const s=t.getCanSelect();return r=>{var i;s&&t.toggleSelected((i=r.target)==null?void 0:i.checked)}}}},dN=(t,e,s,r,i)=>{var a;const o=i.getRow(e,!0);s?(o.getCanMultiSelect()||Object.keys(t).forEach(c=>delete t[c]),o.getCanSelect()&&(t[e]=!0)):delete t[e],r&&(a=o.subRows)!=null&&a.length&&o.getCanSelectSubRows()&&o.subRows.forEach(c=>dN(t,c.id,s,r,i))};function qw(t,e){const s=t.getState().rowSelection,r=[],i={},a=function(o,c){return o.map(d=>{var h;const g=bS(d,s);if(g&&(r.push(d),i[d.id]=d),(h=d.subRows)!=null&&h.length&&(d={...d,subRows:a(d.subRows)}),g)return d}).filter(Boolean)};return{rows:a(e.rows),flatRows:r,rowsById:i}}function bS(t,e){var s;return(s=e[t.id])!=null?s:!1}function uN(t,e,s){var r;if(!((r=t.subRows)!=null&&r.length))return!1;let i=!0,a=!1;return t.subRows.forEach(o=>{if(!(a&&!i)&&(o.getCanSelect()&&(bS(o,e)?a=!0:i=!1),o.subRows&&o.subRows.length)){const c=uN(o,e);c==="all"?a=!0:(c==="some"&&(a=!0),i=!1)}}),i?"all":a?"some":!1}const hN=/([0-9]+)/gm,fue=(t,e,s)=>MB(ed(t.getValue(s)).toLowerCase(),ed(e.getValue(s)).toLowerCase()),pue=(t,e,s)=>MB(ed(t.getValue(s)),ed(e.getValue(s))),gue=(t,e,s)=>NS(ed(t.getValue(s)).toLowerCase(),ed(e.getValue(s)).toLowerCase()),xue=(t,e,s)=>NS(ed(t.getValue(s)),ed(e.getValue(s))),vue=(t,e,s)=>{const r=t.getValue(s),i=e.getValue(s);return r>i?1:r<i?-1:0},yue=(t,e,s)=>NS(t.getValue(s),e.getValue(s));function NS(t,e){return t===e?0:t>e?1:-1}function ed(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function MB(t,e){const s=t.split(hN).filter(Boolean),r=e.split(hN).filter(Boolean);for(;s.length&&r.length;){const i=s.shift(),a=r.shift(),o=parseInt(i,10),c=parseInt(a,10),d=[o,c].sort();if(isNaN(d[0])){if(i>a)return 1;if(a>i)return-1;continue}if(isNaN(d[1]))return isNaN(o)?-1:1;if(o>c)return 1;if(c>o)return-1}return s.length-r.length}const hf={alphanumeric:fue,alphanumericCaseSensitive:pue,text:gue,textCaseSensitive:xue,datetime:vue,basic:yue},wue={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:_a("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const s=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const i of s){const a=i==null?void 0:i.getValue(t.id);if(Object.prototype.toString.call(a)==="[object Date]")return hf.datetime;if(typeof a=="string"&&(r=!0,a.split(hN).length>1))return hf.alphanumeric}return r?hf.text:hf.basic},t.getAutoSortDir=()=>{const s=e.getFilteredRowModel().flatRows[0];return typeof(s==null?void 0:s.getValue(t.id))=="string"?"asc":"desc"},t.getSortingFn=()=>{var s,r;if(!t)throw new Error;return Gy(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(s=(r=e.options.sortingFns)==null?void 0:r[t.columnDef.sortingFn])!=null?s:hf[t.columnDef.sortingFn]},t.toggleSorting=(s,r)=>{const i=t.getNextSortingOrder(),a=typeof s<"u"&&s!==null;e.setSorting(o=>{const c=o==null?void 0:o.find(v=>v.id===t.id),d=o==null?void 0:o.findIndex(v=>v.id===t.id);let h=[],g,m=a?s:i==="desc";if(o!=null&&o.length&&t.getCanMultiSort()&&r?c?g="toggle":g="add":o!=null&&o.length&&d!==o.length-1?g="replace":c?g="toggle":g="replace",g==="toggle"&&(a||i||(g="remove")),g==="add"){var p;h=[...o,{id:t.id,desc:m}],h.splice(0,h.length-((p=e.options.maxMultiSortColCount)!=null?p:Number.MAX_SAFE_INTEGER))}else g==="toggle"?h=o.map(v=>v.id===t.id?{...v,desc:m}:v):g==="remove"?h=o.filter(v=>v.id!==t.id):h=[{id:t.id,desc:m}];return h})},t.getFirstSortDir=()=>{var s,r;return((s=(r=t.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?s:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=s=>{var r,i;const a=t.getFirstSortDir(),o=t.getIsSorted();return o?o!==a&&((r=e.options.enableSortingRemoval)==null||r)&&(!(s&&(i=e.options.enableMultiRemove)!=null)||i)?!1:o==="desc"?"asc":"desc":a},t.getCanSort=()=>{var s,r;return((s=t.columnDef.enableSorting)!=null?s:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var s,r;return(s=(r=t.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?s:!!t.accessorFn},t.getIsSorted=()=>{var s;const r=(s=e.getState().sorting)==null?void 0:s.find(i=>i.id===t.id);return r?r.desc?"desc":"asc":!1},t.getSortIndex=()=>{var s,r;return(s=(r=e.getState().sorting)==null?void 0:r.findIndex(i=>i.id===t.id))!=null?s:-1},t.clearSorting=()=>{e.setSorting(s=>s!=null&&s.length?s.filter(r=>r.id!==t.id):[])},t.getToggleSortingHandler=()=>{const s=t.getCanSort();return r=>{s&&(r.persist==null||r.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var s,r;t.setSorting(e?[]:(s=(r=t.initialState)==null?void 0:r.sorting)!=null?s:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},jue=[Ude,oue,sue,rue,Wde,Hde,lue,cue,wue,tue,due,uue,hue,mue,iue];function bue(t){var e,s;const r=[...jue,...(e=t._features)!=null?e:[]];let i={_features:r};const a=i._features.reduce((p,v)=>Object.assign(p,v.getDefaultOptions==null?void 0:v.getDefaultOptions(i)),{}),o=p=>i.options.mergeOptions?i.options.mergeOptions(a,p):{...a,...p};let d={...{},...(s=t.initialState)!=null?s:{}};i._features.forEach(p=>{var v;d=(v=p.getInitialState==null?void 0:p.getInitialState(d))!=null?v:d});const h=[];let g=!1;const m={_features:r,options:{...a,...t},initialState:d,_queue:p=>{h.push(p),g||(g=!0,Promise.resolve().then(()=>{for(;h.length;)h.shift()();g=!1}).catch(v=>setTimeout(()=>{throw v})))},reset:()=>{i.setState(i.initialState)},setOptions:p=>{const v=Tc(p,i.options);i.options=o(v)},getState:()=>i.options.state,setState:p=>{i.options.onStateChange==null||i.options.onStateChange(p)},_getRowId:(p,v,j)=>{var N;return(N=i.options.getRowId==null?void 0:i.options.getRowId(p,v,j))!=null?N:`${j?[j.id,v].join("."):v}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(p,v)=>{let j=(v?i.getPrePaginationRowModel():i.getRowModel()).rowsById[p];if(!j&&(j=i.getCoreRowModel().rowsById[p],!j))throw new Error;return j},_getDefaultColumnDef:$t(()=>[i.options.defaultColumn],p=>{var v;return p=(v=p)!=null?v:{},{header:j=>{const N=j.header.column.columnDef;return N.accessorKey?N.accessorKey:N.accessorFn?N.id:null},cell:j=>{var N,E;return(N=(E=j.renderValue())==null||E.toString==null?void 0:E.toString())!=null?N:null},...i._features.reduce((j,N)=>Object.assign(j,N.getDefaultColumnDef==null?void 0:N.getDefaultColumnDef()),{}),...p}},Ut(t,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:$t(()=>[i._getColumnDefs()],p=>{const v=function(j,N,E){return E===void 0&&(E=0),j.map(_=>{const S=$de(i,_,E,N),C=_;return S.columns=C.columns?v(C.columns,S,E+1):[],S})};return v(p)},Ut(t,"debugColumns")),getAllFlatColumns:$t(()=>[i.getAllColumns()],p=>p.flatMap(v=>v.getFlatColumns()),Ut(t,"debugColumns")),_getAllFlatColumnsById:$t(()=>[i.getAllFlatColumns()],p=>p.reduce((v,j)=>(v[j.id]=j,v),{}),Ut(t,"debugColumns")),getAllLeafColumns:$t(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(p,v)=>{let j=p.flatMap(N=>N.getLeafColumns());return v(j)},Ut(t,"debugColumns")),getColumn:p=>i._getAllFlatColumnsById()[p]};Object.assign(i,m);for(let p=0;p<i._features.length;p++){const v=i._features[p];v==null||v.createTable==null||v.createTable(i)}return i}function Nue(){return t=>$t(()=>[t.options.data],e=>{const s={rows:[],flatRows:[],rowsById:{}},r=function(i,a,o){a===void 0&&(a=0);const c=[];for(let h=0;h<i.length;h++){const g=wS(t,t._getRowId(i[h],h,o),i[h],h,a,void 0,o==null?void 0:o.id);if(s.flatRows.push(g),s.rowsById[g.id]=g,c.push(g),t.options.getSubRows){var d;g.originalSubRows=t.options.getSubRows(i[h],h),(d=g.originalSubRows)!=null&&d.length&&(g.subRows=r(g.originalSubRows,a+1,g))}}return c};return s.rows=r(e),s},Ut(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function Cue(t){const e=[],s=r=>{var i;e.push(r),(i=r.subRows)!=null&&i.length&&r.getIsExpanded()&&r.subRows.forEach(s)};return t.rows.forEach(s),{rows:e,flatRows:t.flatRows,rowsById:t.rowsById}}function DB(t,e,s){return s.options.filterFromLeafRows?Sue(t,e,s):Aue(t,e,s)}function Sue(t,e,s){var r;const i=[],a={},o=(r=s.options.maxLeafRowFilterDepth)!=null?r:100,c=function(d,h){h===void 0&&(h=0);const g=[];for(let p=0;p<d.length;p++){var m;let v=d[p];const j=wS(s,v.id,v.original,v.index,v.depth,void 0,v.parentId);if(j.columnFilters=v.columnFilters,(m=v.subRows)!=null&&m.length&&h<o){if(j.subRows=c(v.subRows,h+1),v=j,e(v)&&!j.subRows.length){g.push(v),a[v.id]=v,i.push(v);continue}if(e(v)||j.subRows.length){g.push(v),a[v.id]=v,i.push(v);continue}}else v=j,e(v)&&(g.push(v),a[v.id]=v,i.push(v))}return g};return{rows:c(t),flatRows:i,rowsById:a}}function Aue(t,e,s){var r;const i=[],a={},o=(r=s.options.maxLeafRowFilterDepth)!=null?r:100,c=function(d,h){h===void 0&&(h=0);const g=[];for(let p=0;p<d.length;p++){let v=d[p];if(e(v)){var m;if((m=v.subRows)!=null&&m.length&&h<o){const N=wS(s,v.id,v.original,v.index,v.depth,void 0,v.parentId);N.subRows=c(v.subRows,h+1),v=N}g.push(v),i.push(v),a[v.id]=v}}return g};return{rows:c(t),flatRows:i,rowsById:a}}function Eue(){return(t,e)=>$t(()=>[t.getPreFilteredRowModel(),t.getState().columnFilters,t.getState().globalFilter,t.getFilteredRowModel()],(s,r,i)=>{if(!s.rows.length||!(r!=null&&r.length)&&!i)return s;const a=[...r.map(c=>c.id).filter(c=>c!==e),i?"__global__":void 0].filter(Boolean),o=c=>{for(let d=0;d<a.length;d++)if(c.columnFilters[a[d]]===!1)return!1;return!0};return DB(s.rows,o,t)},Ut(t.options,"debugTable"))}function _ue(){return(t,e)=>$t(()=>{var s;return[(s=t.getColumn(e))==null?void 0:s.getFacetedRowModel()]},s=>{if(!s)return new Map;let r=new Map;for(let a=0;a<s.flatRows.length;a++){const o=s.flatRows[a].getUniqueValues(e);for(let c=0;c<o.length;c++){const d=o[c];if(r.has(d)){var i;r.set(d,((i=r.get(d))!=null?i:0)+1)}else r.set(d,1)}}return r},Ut(t.options,"debugTable"))}function Iue(){return t=>$t(()=>[t.getPreFilteredRowModel(),t.getState().columnFilters,t.getState().globalFilter],(e,s,r)=>{if(!e.rows.length||!(s!=null&&s.length)&&!r){for(let p=0;p<e.flatRows.length;p++)e.flatRows[p].columnFilters={},e.flatRows[p].columnFiltersMeta={};return e}const i=[],a=[];(s??[]).forEach(p=>{var v;const j=t.getColumn(p.id);if(!j)return;const N=j.getFilterFn();N&&i.push({id:p.id,filterFn:N,resolvedValue:(v=N.resolveFilterValue==null?void 0:N.resolveFilterValue(p.value))!=null?v:p.value})});const o=(s??[]).map(p=>p.id),c=t.getGlobalFilterFn(),d=t.getAllLeafColumns().filter(p=>p.getCanGlobalFilter());r&&c&&d.length&&(o.push("__global__"),d.forEach(p=>{var v;a.push({id:p.id,filterFn:c,resolvedValue:(v=c.resolveFilterValue==null?void 0:c.resolveFilterValue(r))!=null?v:r})}));let h,g;for(let p=0;p<e.flatRows.length;p++){const v=e.flatRows[p];if(v.columnFilters={},i.length)for(let j=0;j<i.length;j++){h=i[j];const N=h.id;v.columnFilters[N]=h.filterFn(v,N,h.resolvedValue,E=>{v.columnFiltersMeta[N]=E})}if(a.length){for(let j=0;j<a.length;j++){g=a[j];const N=g.id;if(g.filterFn(v,N,g.resolvedValue,E=>{v.columnFiltersMeta[N]=E})){v.columnFilters.__global__=!0;break}}v.columnFilters.__global__!==!0&&(v.columnFilters.__global__=!1)}}const m=p=>{for(let v=0;v<o.length;v++)if(p.columnFilters[o[v]]===!1)return!1;return!0};return DB(e.rows,m,t)},Ut(t.options,"debugTable","getFilteredRowModel",()=>t._autoResetPageIndex()))}function Tue(t){return e=>$t(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(s,r)=>{if(!r.rows.length)return r;const{pageSize:i,pageIndex:a}=s;let{rows:o,flatRows:c,rowsById:d}=r;const h=i*a,g=h+i;o=o.slice(h,g);let m;e.options.paginateExpandedRows?m={rows:o,flatRows:c,rowsById:d}:m=Cue({rows:o,flatRows:c,rowsById:d}),m.flatRows=[];const p=v=>{m.flatRows.push(v),v.subRows.length&&v.subRows.forEach(p)};return m.rows.forEach(p),m},Ut(e.options,"debugTable"))}function Mue(){return t=>$t(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,s)=>{if(!s.rows.length||!(e!=null&&e.length))return s;const r=t.getState().sorting,i=[],a=r.filter(d=>{var h;return(h=t.getColumn(d.id))==null?void 0:h.getCanSort()}),o={};a.forEach(d=>{const h=t.getColumn(d.id);h&&(o[d.id]={sortUndefined:h.columnDef.sortUndefined,invertSorting:h.columnDef.invertSorting,sortingFn:h.getSortingFn()})});const c=d=>{const h=d.map(g=>({...g}));return h.sort((g,m)=>{for(let v=0;v<a.length;v+=1){var p;const j=a[v],N=o[j.id],E=N.sortUndefined,_=(p=j==null?void 0:j.desc)!=null?p:!1;let S=0;if(E){const C=g.getValue(j.id),I=m.getValue(j.id),P=C===void 0,L=I===void 0;if(P||L){if(E==="first")return P?-1:1;if(E==="last")return P?1:-1;S=P&&L?0:P?E:-E}}if(S===0&&(S=N.sortingFn(g,m,j.id)),S!==0)return _&&(S*=-1),N.invertSorting&&(S*=-1),S}return g.index-m.index}),h.forEach(g=>{var m;i.push(g),(m=g.subRows)!=null&&m.length&&(g.subRows=c(g.subRows))}),h};return{rows:c(s.rows),flatRows:i,rowsById:s.rowsById}},Ut(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function E_(t,e){return t?Due(t)?y.createElement(t,e):t:null}function Due(t){return kue(t)||typeof t=="function"||Pue(t)}function kue(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function Pue(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function Rue(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[s]=y.useState(()=>({current:bue(e)})),[r,i]=y.useState(()=>s.current.initialState);return s.current.setOptions(a=>({...a,...t,state:{...r,...t.state},onStateChange:o=>{i(o),t.onStateChange==null||t.onStateChange(o)}})),s.current}var __=1,Lue=.9,Oue=.8,Fue=.17,Gw=.1,Yw=.999,Bue=.9999,zue=.99,Vue=/[\\\/_+.#"@\[\(\{&]/,$ue=/[\\\/_+.#"@\[\(\{&]/g,Uue=/[\s-]/,kB=/[\s-]/g;function mN(t,e,s,r,i,a,o){if(a===e.length)return i===t.length?__:zue;var c=`${i},${a}`;if(o[c]!==void 0)return o[c];for(var d=r.charAt(a),h=s.indexOf(d,i),g=0,m,p,v,j;h>=0;)m=mN(t,e,s,r,h+1,a+1,o),m>g&&(h===i?m*=__:Vue.test(t.charAt(h-1))?(m*=Oue,v=t.slice(i,h-1).match($ue),v&&i>0&&(m*=Math.pow(Yw,v.length))):Uue.test(t.charAt(h-1))?(m*=Lue,j=t.slice(i,h-1).match(kB),j&&i>0&&(m*=Math.pow(Yw,j.length))):(m*=Fue,i>0&&(m*=Math.pow(Yw,h-i))),t.charAt(h)!==e.charAt(a)&&(m*=Bue)),(m<Gw&&s.charAt(h-1)===r.charAt(a+1)||r.charAt(a+1)===r.charAt(a)&&s.charAt(h-1)!==r.charAt(a))&&(p=mN(t,e,s,r,h+1,a+2,o),p*Gw>m&&(m=p*Gw)),m>g&&(g=m),h=s.indexOf(d,h+1);return o[c]=g,g}function I_(t){return t.toLowerCase().replace(kB," ")}function Wue(t,e,s){return t=s&&s.length>0?`${t+" "+s.join(" ")}`:t,mN(t,e,I_(t),I_(e),0,0,{})}var mf='[cmdk-group=""]',Kw='[cmdk-group-items=""]',Hue='[cmdk-group-heading=""]',CS='[cmdk-item=""]',T_=`${CS}:not([aria-disabled="true"])`,fN="cmdk-item-select",_d="data-value",que=(t,e,s)=>Wue(t,e,s),PB=y.createContext(void 0),Lg=()=>y.useContext(PB),RB=y.createContext(void 0),SS=()=>y.useContext(RB),LB=y.createContext(void 0),OB=y.forwardRef((t,e)=>{let s=zu(()=>{var $,xe;return{search:"",value:(xe=($=t.value)!=null?$:t.defaultValue)!=null?xe:"",filtered:{count:0,items:new Map,groups:new Set}}}),r=zu(()=>new Set),i=zu(()=>new Map),a=zu(()=>new Map),o=zu(()=>new Set),c=FB(t),{label:d,children:h,value:g,onValueChange:m,filter:p,shouldFilter:v,loop:j,disablePointerSelection:N=!1,vimBindings:E=!0,..._}=t,S=Rr(),C=Rr(),I=Rr(),P=y.useRef(null),L=she();cu(()=>{if(g!==void 0){let $=g.trim();s.current.value=$,T.emit()}},[g]),cu(()=>{L(6,Y)},[]);let T=y.useMemo(()=>({subscribe:$=>(o.current.add($),()=>o.current.delete($)),snapshot:()=>s.current,setState:($,xe,te)=>{var ae,ee,de;if(!Object.is(s.current[$],xe)){if(s.current[$]=xe,$==="search")B(),O(),L(1,V);else if($==="value"&&(te||L(5,Y),((ae=c.current)==null?void 0:ae.value)!==void 0)){let pe=xe??"";(de=(ee=c.current).onValueChange)==null||de.call(ee,pe);return}T.emit()}},emit:()=>{o.current.forEach($=>$())}}),[]),M=y.useMemo(()=>({value:($,xe,te)=>{var ae;xe!==((ae=a.current.get($))==null?void 0:ae.value)&&(a.current.set($,{value:xe,keywords:te}),s.current.filtered.items.set($,k(xe,te)),L(2,()=>{O(),T.emit()}))},item:($,xe)=>(r.current.add($),xe&&(i.current.has(xe)?i.current.get(xe).add($):i.current.set(xe,new Set([$]))),L(3,()=>{B(),O(),s.current.value||V(),T.emit()}),()=>{a.current.delete($),r.current.delete($),s.current.filtered.items.delete($);let te=z();L(4,()=>{B(),(te==null?void 0:te.getAttribute("id"))===$&&V(),T.emit()})}),group:$=>(i.current.has($)||i.current.set($,new Set),()=>{a.current.delete($),i.current.delete($)}),filter:()=>c.current.shouldFilter,label:d||t["aria-label"],getDisablePointerSelection:()=>c.current.disablePointerSelection,listId:S,inputId:I,labelId:C,listInnerRef:P}),[]);function k($,xe){var te,ae;let ee=(ae=(te=c.current)==null?void 0:te.filter)!=null?ae:que;return $?ee($,s.current.search,xe):0}function O(){if(!s.current.search||c.current.shouldFilter===!1)return;let $=s.current.filtered.items,xe=[];s.current.filtered.groups.forEach(ae=>{let ee=i.current.get(ae),de=0;ee.forEach(pe=>{let Me=$.get(pe);de=Math.max(Me,de)}),xe.push([ae,de])});let te=P.current;G().sort((ae,ee)=>{var de,pe;let Me=ae.getAttribute("id"),Le=ee.getAttribute("id");return((de=$.get(Le))!=null?de:0)-((pe=$.get(Me))!=null?pe:0)}).forEach(ae=>{let ee=ae.closest(Kw);ee?ee.appendChild(ae.parentElement===ee?ae:ae.closest(`${Kw} > *`)):te.appendChild(ae.parentElement===te?ae:ae.closest(`${Kw} > *`))}),xe.sort((ae,ee)=>ee[1]-ae[1]).forEach(ae=>{var ee;let de=(ee=P.current)==null?void 0:ee.querySelector(`${mf}[${_d}="${encodeURIComponent(ae[0])}"]`);de==null||de.parentElement.appendChild(de)})}function V(){let $=G().find(te=>te.getAttribute("aria-disabled")!=="true"),xe=$==null?void 0:$.getAttribute(_d);T.setState("value",xe||void 0)}function B(){var $,xe,te,ae;if(!s.current.search||c.current.shouldFilter===!1){s.current.filtered.count=r.current.size;return}s.current.filtered.groups=new Set;let ee=0;for(let de of r.current){let pe=(xe=($=a.current.get(de))==null?void 0:$.value)!=null?xe:"",Me=(ae=(te=a.current.get(de))==null?void 0:te.keywords)!=null?ae:[],Le=k(pe,Me);s.current.filtered.items.set(de,Le),Le>0&&ee++}for(let[de,pe]of i.current)for(let Me of pe)if(s.current.filtered.items.get(Me)>0){s.current.filtered.groups.add(de);break}s.current.filtered.count=ee}function Y(){var $,xe,te;let ae=z();ae&&((($=ae.parentElement)==null?void 0:$.firstChild)===ae&&((te=(xe=ae.closest(mf))==null?void 0:xe.querySelector(Hue))==null||te.scrollIntoView({block:"nearest"})),ae.scrollIntoView({block:"nearest"}))}function z(){var $;return($=P.current)==null?void 0:$.querySelector(`${CS}[aria-selected="true"]`)}function G(){var $;return Array.from((($=P.current)==null?void 0:$.querySelectorAll(T_))||[])}function he($){let xe=G()[$];xe&&T.setState("value",xe.getAttribute(_d))}function le($){var xe;let te=z(),ae=G(),ee=ae.findIndex(pe=>pe===te),de=ae[ee+$];(xe=c.current)!=null&&xe.loop&&(de=ee+$<0?ae[ae.length-1]:ee+$===ae.length?ae[0]:ae[ee+$]),de&&T.setState("value",de.getAttribute(_d))}function se($){let xe=z(),te=xe==null?void 0:xe.closest(mf),ae;for(;te&&!ae;)te=$>0?the(te,mf):nhe(te,mf),ae=te==null?void 0:te.querySelector(T_);ae?T.setState("value",ae.getAttribute(_d)):le($)}let re=()=>he(G().length-1),me=$=>{$.preventDefault(),$.metaKey?re():$.altKey?se(1):le(1)},Ce=$=>{$.preventDefault(),$.metaKey?he(0):$.altKey?se(-1):le(-1)};return y.createElement(St.div,{ref:e,tabIndex:-1,..._,"cmdk-root":"",onKeyDown:$=>{var xe;if((xe=_.onKeyDown)==null||xe.call(_,$),!$.defaultPrevented)switch($.key){case"n":case"j":{E&&$.ctrlKey&&me($);break}case"ArrowDown":{me($);break}case"p":case"k":{E&&$.ctrlKey&&Ce($);break}case"ArrowUp":{Ce($);break}case"Home":{$.preventDefault(),he(0);break}case"End":{$.preventDefault(),re();break}case"Enter":if(!$.nativeEvent.isComposing&&$.keyCode!==229){$.preventDefault();let te=z();if(te){let ae=new Event(fN);te.dispatchEvent(ae)}}}}},y.createElement("label",{"cmdk-label":"",htmlFor:M.inputId,id:M.labelId,style:ihe},d),Yy(t,$=>y.createElement(RB.Provider,{value:T},y.createElement(PB.Provider,{value:M},$))))}),Gue=y.forwardRef((t,e)=>{var s,r;let i=Rr(),a=y.useRef(null),o=y.useContext(LB),c=Lg(),d=FB(t),h=(r=(s=d.current)==null?void 0:s.forceMount)!=null?r:o==null?void 0:o.forceMount;cu(()=>{if(!h)return c.item(i,o==null?void 0:o.id)},[h]);let g=BB(i,a,[t.value,t.children,a],t.keywords),m=SS(),p=du(L=>L.value&&L.value===g.current),v=du(L=>h||c.filter()===!1?!0:L.search?L.filtered.items.get(i)>0:!0);y.useEffect(()=>{let L=a.current;if(!(!L||t.disabled))return L.addEventListener(fN,j),()=>L.removeEventListener(fN,j)},[v,t.onSelect,t.disabled]);function j(){var L,T;N(),(T=(L=d.current).onSelect)==null||T.call(L,g.current)}function N(){m.setState("value",g.current,!0)}if(!v)return null;let{disabled:E,value:_,onSelect:S,forceMount:C,keywords:I,...P}=t;return y.createElement(St.div,{ref:Jp([a,e]),...P,id:i,"cmdk-item":"",role:"option","aria-disabled":!!E,"aria-selected":!!p,"data-disabled":!!E,"data-selected":!!p,onPointerMove:E||c.getDisablePointerSelection()?void 0:N,onClick:E?void 0:j},t.children)}),Yue=y.forwardRef((t,e)=>{let{heading:s,children:r,forceMount:i,...a}=t,o=Rr(),c=y.useRef(null),d=y.useRef(null),h=Rr(),g=Lg(),m=du(v=>i||g.filter()===!1?!0:v.search?v.filtered.groups.has(o):!0);cu(()=>g.group(o),[]),BB(o,c,[t.value,t.heading,d]);let p=y.useMemo(()=>({id:o,forceMount:i}),[i]);return y.createElement(St.div,{ref:Jp([c,e]),...a,"cmdk-group":"",role:"presentation",hidden:m?void 0:!0},s&&y.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:h},s),Yy(t,v=>y.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":s?h:void 0},y.createElement(LB.Provider,{value:p},v))))}),Kue=y.forwardRef((t,e)=>{let{alwaysRender:s,...r}=t,i=y.useRef(null),a=du(o=>!o.search);return!s&&!a?null:y.createElement(St.div,{ref:Jp([i,e]),...r,"cmdk-separator":"",role:"separator"})}),Zue=y.forwardRef((t,e)=>{let{onValueChange:s,...r}=t,i=t.value!=null,a=SS(),o=du(g=>g.search),c=du(g=>g.value),d=Lg(),h=y.useMemo(()=>{var g;let m=(g=d.listInnerRef.current)==null?void 0:g.querySelector(`${CS}[${_d}="${encodeURIComponent(c)}"]`);return m==null?void 0:m.getAttribute("id")},[]);return y.useEffect(()=>{t.value!=null&&a.setState("search",t.value)},[t.value]),y.createElement(St.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":h,id:d.inputId,type:"text",value:i?t.value:o,onChange:g=>{i||a.setState("search",g.target.value),s==null||s(g.target.value)}})}),Que=y.forwardRef((t,e)=>{let{children:s,label:r="Suggestions",...i}=t,a=y.useRef(null),o=y.useRef(null),c=Lg();return y.useEffect(()=>{if(o.current&&a.current){let d=o.current,h=a.current,g,m=new ResizeObserver(()=>{g=requestAnimationFrame(()=>{let p=d.offsetHeight;h.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return m.observe(d),()=>{cancelAnimationFrame(g),m.unobserve(d)}}},[]),y.createElement(St.div,{ref:Jp([a,e]),...i,"cmdk-list":"",role:"listbox","aria-label":r,id:c.listId},Yy(t,d=>y.createElement("div",{ref:Jp([o,c.listInnerRef]),"cmdk-list-sizer":""},d)))}),Xue=y.forwardRef((t,e)=>{let{open:s,onOpenChange:r,overlayClassName:i,contentClassName:a,container:o,...c}=t;return y.createElement(iS,{open:s,onOpenChange:r},y.createElement(aS,{container:o},y.createElement(Vy,{"cmdk-overlay":"",className:i}),y.createElement($y,{"aria-label":t.label,"cmdk-dialog":"",className:a},y.createElement(OB,{ref:e,...c}))))}),Jue=y.forwardRef((t,e)=>du(s=>s.filtered.count===0)?y.createElement(St.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),ehe=y.forwardRef((t,e)=>{let{progress:s,children:r,label:i="Loading...",...a}=t;return y.createElement(St.div,{ref:e,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},Yy(t,o=>y.createElement("div",{"aria-hidden":!0},o)))}),ia=Object.assign(OB,{List:Que,Item:Gue,Input:Zue,Group:Yue,Separator:Kue,Dialog:Xue,Empty:Jue,Loading:ehe});function the(t,e){let s=t.nextElementSibling;for(;s;){if(s.matches(e))return s;s=s.nextElementSibling}}function nhe(t,e){let s=t.previousElementSibling;for(;s;){if(s.matches(e))return s;s=s.previousElementSibling}}function FB(t){let e=y.useRef(t);return cu(()=>{e.current=t}),e}var cu=typeof window>"u"?y.useEffect:y.useLayoutEffect;function zu(t){let e=y.useRef();return e.current===void 0&&(e.current=t()),e}function Jp(t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}function du(t){let e=SS(),s=()=>t(e.snapshot());return LR.useSyncExternalStore(e.subscribe,s,s)}function BB(t,e,s,r=[]){let i=y.useRef(),a=Lg();return cu(()=>{var o;let c=(()=>{var h;for(let g of s){if(typeof g=="string")return g.trim();if(typeof g=="object"&&"current"in g)return g.current?(h=g.current.textContent)==null?void 0:h.trim():i.current}})(),d=r.map(h=>h.trim());a.value(t,c,d),(o=e.current)==null||o.setAttribute(_d,c),i.current=c}),i}var she=()=>{let[t,e]=y.useState(),s=zu(()=>new Map);return cu(()=>{s.current.forEach(r=>r()),s.current=new Map},[t]),(r,i)=>{s.current.set(r,i),e({})}};function rhe(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function Yy({asChild:t,children:e},s){return t&&y.isValidElement(e)?y.cloneElement(rhe(e),{ref:e.ref},s(e.props.children)):s(e)}var ihe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const r0=y.forwardRef(({className:t,...e},s)=>n.jsx(ia,{ref:s,className:we("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));r0.displayName=ia.displayName;const i0=y.forwardRef(({className:t,...e},s)=>n.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[n.jsx(Bi,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),n.jsx(ia.Input,{ref:s,className:we("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));i0.displayName=ia.Input.displayName;const a0=y.forwardRef(({className:t,...e},s)=>n.jsx(ia.List,{ref:s,className:we("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));a0.displayName=ia.List.displayName;const o0=y.forwardRef((t,e)=>n.jsx(ia.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));o0.displayName=ia.Empty.displayName;const l0=y.forwardRef(({className:t,...e},s)=>n.jsx(ia.Group,{ref:s,className:we("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e}));l0.displayName=ia.Group.displayName;const ahe=y.forwardRef(({className:t,...e},s)=>n.jsx(ia.Separator,{ref:s,className:we("-mx-1 h-px bg-border",t),...e}));ahe.displayName=ia.Separator.displayName;const Mf=y.forwardRef(({className:t,...e},s)=>n.jsx(ia.Item,{ref:s,className:we("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",t),...e}));Mf.displayName=ia.Item.displayName;function ohe({filter:t,label:e,onRemove:s}){const r=typeof t.value=="object"&&t.value!==null?`${t.value.min} - ${t.value.max}`:Array.isArray(t.value)?t.value.join(", "):String(t.value),i={equals:"=",contains:"contains",startsWith:"starts with",endsWith:"ends with",between:"between",greaterThan:">",lessThan:"<",isAnyOf:"is any of",is:"is",isNot:"is not",after:"after",before:"before",isToday:"is today"}[t.operator];return n.jsxs(Ze,{variant:"outline",className:"flex items-center gap-1 rounded-md px-2 py-1",children:[e&&n.jsx("span",{className:"text-xs font-medium",children:e}),i&&n.jsx("span",{className:"text-xs",children:i}),n.jsx("span",{className:"text-xs font-medium",children:r}),s&&n.jsx(H,{variant:"ghost",size:"icon",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:s,children:n.jsx(ys,{className:"h-3 w-3"})})]})}function lhe({table:t,filters:e}){var _,S,C,I,P,L,T;const[s,r]=y.useState(!1),[i,a]=y.useState(null),[o,c]=y.useState("contains"),[d,h]=y.useState(""),g=t.getState().columnFilters,m=M=>{a(M);const k=e.find(O=>O.id===M);if(k){const O=k.operators&&k.operators.length>0?k.operators[0].value:k.type==="select"||k.type==="multi-select"?"equals":"contains";c(O)}},p=M=>{c(M)},v=()=>{if(!i||!d)return;const M=t.getColumn(i);if(!M)return;const k=e.find(O=>O.id===i);(k==null?void 0:k.type)==="multi-select"?M.setFilterValue(d.split(",")):M.setFilterValue(d),h(""),r(!1)},j=()=>{t.resetColumnFilters()},N=M=>{const k=t.getColumn(M);k&&k.setFilterValue(void 0)},E=y.useMemo(()=>g.map(M=>{const k=t.getColumn(M.id),O=k==null?void 0:k.columnDef,V=e.find(B=>B.id===M.id);return{id:M.id,label:(V==null?void 0:V.title)||(O==null?void 0:O.header)||M.id,value:M.value,operator:"contains"}}),[g,t,e]);return n.jsx("div",{className:"mb-4 flex flex-col gap-4",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsxs(Ls,{open:s,onOpenChange:r,children:[n.jsx(Os,{asChild:!0,children:n.jsxs(H,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[n.jsx("span",{children:"Add filter"}),n.jsx(ys,{className:"ml-2 h-4 w-4 opacity-0"})]})}),n.jsxs(Es,{className:"w-[200px] p-0",align:"start",children:[n.jsxs(r0,{children:[n.jsx(i0,{placeholder:"Find filter..."}),n.jsxs(a0,{children:[n.jsx(o0,{children:"No filters found."}),n.jsx(l0,{children:e.map(M=>n.jsx(Mf,{onSelect:()=>m(M.id),children:M.title},M.id))})]})]}),i&&n.jsxs(n.Fragment,{children:[n.jsx(pr,{}),n.jsx("div",{className:"p-2",children:n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("div",{className:"text-sm font-medium",children:(_=e.find(M=>M.id===i))==null?void 0:_.title}),n.jsx("div",{className:"grid gap-2",children:n.jsxs(r0,{children:[n.jsx(i0,{placeholder:"Select operator..."}),n.jsxs(a0,{children:[n.jsx(o0,{children:"No operators found."}),n.jsx(l0,{children:((C=(S=e.find(M=>M.id===i))==null?void 0:S.operators)==null?void 0:C.map(M=>n.jsx(Mf,{onSelect:()=>p(M.value),children:M.label},M.value)))||n.jsx(Mf,{onSelect:()=>p("contains"),children:"Contains"})})]})]})}),n.jsx("div",{className:"grid gap-2",children:((I=e.find(M=>M.id===i))==null?void 0:I.type)==="select"?n.jsxs(r0,{children:[n.jsx(i0,{placeholder:"Select value..."}),n.jsxs(a0,{children:[n.jsx(o0,{children:"No options found."}),n.jsx(l0,{children:(L=(P=e.find(M=>M.id===i))==null?void 0:P.options)==null?void 0:L.map(M=>n.jsx(Mf,{onSelect:()=>h(M.value),children:M.label},M.value))})]})]}):n.jsx(ve,{placeholder:((T=e.find(M=>M.id===i))==null?void 0:T.placeholder)||"Enter value...",value:d,onChange:M=>h(M.target.value),className:"h-8"})}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>r(!1),children:"Cancel"}),n.jsx(H,{size:"sm",onClick:v,children:"Apply"})]})]})})]})]})]}),E.map((M,k)=>n.jsx(ohe,{filter:M,label:M.label,onRemove:()=>N(M.id)},`${M.id}-${k}`)),E.length>0&&n.jsx(H,{variant:"ghost",size:"sm",onClick:j,className:"h-8 px-2 lg:px-3",children:"Reset"})]})})}function che({table:t,filterableColumns:e=[],searchableColumns:s=[],globalSearchPlaceholder:r="Search all columns..."}){t.getState().columnFilters.length>0;const[i,a]=y.useState(""),o=c=>{a(c.target.value),t.setGlobalFilter(c.target.value)};return n.jsxs("div",{className:"flex flex-col gap-4 py-4",children:[n.jsx("div",{className:"flex flex-col gap-2 md:flex-row",children:n.jsx("div",{className:"flex-1",children:n.jsx(ve,{placeholder:r,value:i,onChange:o,className:"h-8 w-full"})})}),e.length>0&&n.jsx(lhe,{table:t,filters:e})]})}function dhe({table:t}){return n.jsxs("div",{className:"flex items-center justify-between px-2",children:[n.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[t.getFilteredRowModel().rows.length," row(s)"]}),n.jsxs("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("p",{className:"text-sm font-medium",children:"Rows per page"}),n.jsx("select",{className:"h-8 w-[70px] rounded-md border border-input bg-transparent px-2 py-1 text-sm",value:t.getState().pagination.pageSize,onChange:e=>{t.setPageSize(Number(e.target.value))},children:[10,20,30,40,50].map(e=>n.jsx("option",{value:e,children:e},e))})]}),n.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",t.getState().pagination.pageIndex+1," of"," ",t.getPageCount()]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{className:"rounded-md border border-input p-1 disabled:opacity-50",onClick:()=>t.setPageIndex(0),disabled:!t.getCanPreviousPage(),children:"<<"}),n.jsx("button",{className:"rounded-md border border-input p-1 disabled:opacity-50",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),children:"<"}),n.jsx("button",{className:"rounded-md border border-input p-1 disabled:opacity-50",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),children:">"}),n.jsx("button",{className:"rounded-md border border-input p-1 disabled:opacity-50",onClick:()=>t.setPageIndex(t.getPageCount()-1),disabled:!t.getCanNextPage(),children:">>"})]})]})]})}function zB({columns:t,data:e,filterableColumns:s=[],searchableColumns:r=[],globalSearchPlaceholder:i,enableGlobalSearch:a=!0,enablePagination:o=!0,enableColumnVisibility:c=!0}){var C;const[d,h]=y.useState([]),[g,m]=y.useState([]),[p,v]=y.useState({}),[j,N]=y.useState({}),[E,_]=y.useState(""),S=Rue({data:e,columns:t,state:{sorting:d,columnFilters:g,columnVisibility:p,rowSelection:j,globalFilter:E},enableRowSelection:!0,onRowSelectionChange:N,onSortingChange:h,onColumnFiltersChange:m,onColumnVisibilityChange:v,onGlobalFilterChange:_,getCoreRowModel:Nue(),getFilteredRowModel:Iue(),getPaginationRowModel:o?Tue():void 0,getSortedRowModel:Mue(),getFacetedRowModel:Eue(),getFacetedUniqueValues:_ue()});return n.jsxs("div",{className:"space-y-4",children:[n.jsx(che,{table:S,filterableColumns:s,searchableColumns:r,globalSearchPlaceholder:i}),n.jsx("div",{className:"rounded-md border overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(jr,{children:[n.jsx(br,{children:S.getHeaderGroups().map(I=>n.jsx(yn,{children:I.headers.map(P=>n.jsx(Ye,{colSpan:P.colSpan,children:P.isPlaceholder?null:n.jsxs("div",{className:P.column.getCanSort()?"cursor-pointer select-none flex items-center whitespace-nowrap":"whitespace-nowrap",onClick:P.column.getToggleSortingHandler(),children:[E_(P.column.columnDef.header,P.getContext()),{asc:" ",desc:" "}[P.column.getIsSorted()]??null]})},P.id))},I.id))}),n.jsx(Nr,{children:(C=S.getRowModel().rows)!=null&&C.length?S.getRowModel().rows.map(I=>n.jsx(yn,{"data-state":I.getIsSelected()&&"selected",children:I.getVisibleCells().map(P=>n.jsx(qe,{className:"px-3 py-2 sm:px-4 sm:py-3",children:E_(P.column.columnDef.cell,P.getContext())},P.id))},I.id)):n.jsx(yn,{children:n.jsx(qe,{colSpan:t.length,className:"h-24 text-center",children:"No results."})})})]})})}),o&&n.jsx(dhe,{table:S})]})}function El(t,e,{checkForDefaultPrevented:s=!0}={}){return function(i){if(t==null||t(i),s===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function M_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function VB(...t){return e=>{let s=!1;const r=t.map(i=>{const a=M_(i,e);return!s&&typeof a=="function"&&(s=!0),a});if(s)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():M_(t[i],null)}}}}function gu(...t){return y.useCallback(VB(...t),t)}var $B=y.forwardRef((t,e)=>{const{children:s,...r}=t,i=y.Children.toArray(s),a=i.find(uhe);if(a){const o=a.props.children,c=i.map(d=>d===a?y.Children.count(o)>1?y.Children.only(null):y.isValidElement(o)?o.props.children:null:d);return n.jsx(pN,{...r,ref:e,children:y.isValidElement(o)?y.cloneElement(o,void 0,c):null})}return n.jsx(pN,{...r,ref:e,children:s})});$B.displayName="Slot";var pN=y.forwardRef((t,e)=>{const{children:s,...r}=t;if(y.isValidElement(s)){const i=mhe(s),a=hhe(r,s.props);return s.type!==y.Fragment&&(a.ref=e?VB(e,i):i),y.cloneElement(s,a)}return y.Children.count(s)>1?y.Children.only(null):null});pN.displayName="SlotClone";var UB=({children:t})=>n.jsx(n.Fragment,{children:t});function uhe(t){return y.isValidElement(t)&&t.type===UB}function hhe(t,e){const s={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...c)=>{a(...c),i(...c)}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...t,...s}}function mhe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var fhe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],xu=fhe.reduce((t,e)=>{const s=y.forwardRef((r,i)=>{const{asChild:a,...o}=r,c=a?$B:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...o,ref:i})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function phe(t,e){t&&ra.flushSync(()=>t.dispatchEvent(e))}var ghe="DismissableLayer",gN="dismissableLayer.update",xhe="dismissableLayer.pointerDownOutside",vhe="dismissableLayer.focusOutside",D_,WB=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),HB=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:c,...d}=t,h=y.useContext(WB),[g,m]=y.useState(null),p=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=y.useState({}),j=gu(e,T=>m(T)),N=Array.from(h.layers),[E]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),_=N.indexOf(E),S=g?N.indexOf(g):-1,C=h.layersWithOutsidePointerEventsDisabled.size>0,I=S>=_,P=jhe(T=>{const M=T.target,k=[...h.branches].some(O=>O.contains(M));!I||k||(i==null||i(T),o==null||o(T),T.defaultPrevented||c==null||c())},p),L=bhe(T=>{const M=T.target;[...h.branches].some(O=>O.contains(M))||(a==null||a(T),o==null||o(T),T.defaultPrevented||c==null||c())},p);return ML(T=>{S===h.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&c&&(T.preventDefault(),c()))},p),y.useEffect(()=>{if(g)return s&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(D_=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(g)),h.layers.add(g),k_(),()=>{s&&h.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=D_)}},[g,p,s,h]),y.useEffect(()=>()=>{g&&(h.layers.delete(g),h.layersWithOutsidePointerEventsDisabled.delete(g),k_())},[g,h]),y.useEffect(()=>{const T=()=>v({});return document.addEventListener(gN,T),()=>document.removeEventListener(gN,T)},[]),n.jsx(xu.div,{...d,ref:j,style:{pointerEvents:C?I?"auto":"none":void 0,...t.style},onFocusCapture:El(t.onFocusCapture,L.onFocusCapture),onBlurCapture:El(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:El(t.onPointerDownCapture,P.onPointerDownCapture)})});HB.displayName=ghe;var yhe="DismissableLayerBranch",whe=y.forwardRef((t,e)=>{const s=y.useContext(WB),r=y.useRef(null),i=gu(e,r);return y.useEffect(()=>{const a=r.current;if(a)return s.branches.add(a),()=>{s.branches.delete(a)}},[s.branches]),n.jsx(xu.div,{...t,ref:i})});whe.displayName=yhe;function jhe(t,e=globalThis==null?void 0:globalThis.document){const s=vs(t),r=y.useRef(!1),i=y.useRef(()=>{});return y.useEffect(()=>{const a=c=>{if(c.target&&!r.current){let d=function(){qB(xhe,s,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,s]),{onPointerDownCapture:()=>r.current=!0}}function bhe(t,e=globalThis==null?void 0:globalThis.document){const s=vs(t),r=y.useRef(!1);return y.useEffect(()=>{const i=a=>{a.target&&!r.current&&qB(vhe,s,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,s]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function k_(){const t=new CustomEvent(gN);document.dispatchEvent(t)}function qB(t,e,s,{discrete:r}){const i=s.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&i.addEventListener(t,e,{once:!0}),r?phe(i,a):i.dispatchEvent(a)}var Nhe="Arrow",GB=y.forwardRef((t,e)=>{const{children:s,width:r=10,height:i=5,...a}=t;return n.jsx(xu.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});GB.displayName=Nhe;var Che=GB,AS="Popper",[YB,KB]=Or(AS),[She,ZB]=YB(AS),QB=t=>{const{__scopePopper:e,children:s}=t,[r,i]=y.useState(null);return n.jsx(She,{scope:e,anchor:r,onAnchorChange:i,children:s})};QB.displayName=AS;var XB="PopperAnchor",JB=y.forwardRef((t,e)=>{const{__scopePopper:s,virtualRef:r,...i}=t,a=ZB(XB,s),o=y.useRef(null),c=gu(e,o);return y.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:n.jsx(xu.div,{...i,ref:c})});JB.displayName=XB;var ES="PopperContent",[Ahe,Ehe]=YB(ES),ez=y.forwardRef((t,e)=>{var de,pe,Me,Le,We,jt;const{__scopePopper:s,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:g=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:v="optimized",onPlaced:j,...N}=t,E=ZB(ES,s),[_,S]=y.useState(null),C=gu(e,mt=>S(mt)),[I,P]=y.useState(null),L=Sm(I),T=(L==null?void 0:L.width)??0,M=(L==null?void 0:L.height)??0,k=r+(a!=="center"?"-"+a:""),O=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},V=Array.isArray(h)?h:[h],B=V.length>0,Y={padding:O,boundary:V.filter(Ihe),altBoundary:B},{refs:z,floatingStyles:G,placement:he,isPositioned:le,middlewareData:se}=qL({strategy:"fixed",placement:k,whileElementsMounted:(...mt)=>WL(...mt,{animationFrame:v==="always"}),elements:{reference:E.anchor},middleware:[GL({mainAxis:i+M,alignmentAxis:o}),d&&YL({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?KL():void 0,...Y}),d&&ZL({...Y}),QL({...Y,apply:({elements:mt,rects:ke,availableWidth:yt,availableHeight:On})=>{const{width:zt,height:ce}=ke.reference,be=mt.floating.style;be.setProperty("--radix-popper-available-width",`${yt}px`),be.setProperty("--radix-popper-available-height",`${On}px`),be.setProperty("--radix-popper-anchor-width",`${zt}px`),be.setProperty("--radix-popper-anchor-height",`${ce}px`)}}),I&&JL({element:I,padding:c}),The({arrowWidth:T,arrowHeight:M}),p&&XL({strategy:"referenceHidden",...Y})]}),[re,me]=sz(he),Ce=vs(j);Bs(()=>{le&&(Ce==null||Ce())},[le,Ce]);const $=(de=se.arrow)==null?void 0:de.x,xe=(pe=se.arrow)==null?void 0:pe.y,te=((Me=se.arrow)==null?void 0:Me.centerOffset)!==0,[ae,ee]=y.useState();return Bs(()=>{_&&ee(window.getComputedStyle(_).zIndex)},[_]),n.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:le?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ae,"--radix-popper-transform-origin":[(Le=se.transformOrigin)==null?void 0:Le.x,(We=se.transformOrigin)==null?void 0:We.y].join(" "),...((jt=se.hide)==null?void 0:jt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:n.jsx(Ahe,{scope:s,placedSide:re,onArrowChange:P,arrowX:$,arrowY:xe,shouldHideArrow:te,children:n.jsx(xu.div,{"data-side":re,"data-align":me,...N,ref:C,style:{...N.style,animation:le?void 0:"none"}})})})});ez.displayName=ES;var tz="PopperArrow",_he={top:"bottom",right:"left",bottom:"top",left:"right"},nz=y.forwardRef(function(e,s){const{__scopePopper:r,...i}=e,a=Ehe(tz,r),o=_he[a.placedSide];return n.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:n.jsx(Che,{...i,ref:s,style:{...i.style,display:"block"}})})});nz.displayName=tz;function Ihe(t){return t!==null}var The=t=>({name:"transformOrigin",options:t,fn(e){var E,_,S;const{placement:s,rects:r,middlewareData:i}=e,o=((E=i.arrow)==null?void 0:E.centerOffset)!==0,c=o?0:t.arrowWidth,d=o?0:t.arrowHeight,[h,g]=sz(s),m={start:"0%",center:"50%",end:"100%"}[g],p=(((_=i.arrow)==null?void 0:_.x)??0)+c/2,v=(((S=i.arrow)==null?void 0:S.y)??0)+d/2;let j="",N="";return h==="bottom"?(j=o?m:`${p}px`,N=`${-d}px`):h==="top"?(j=o?m:`${p}px`,N=`${r.floating.height+d}px`):h==="right"?(j=`${-d}px`,N=o?m:`${v}px`):h==="left"&&(j=`${r.floating.width+d}px`,N=o?m:`${v}px`),{data:{x:j,y:N}}}});function sz(t){const[e,s="center"]=t.split("-");return[e,s]}var Mhe=QB,Dhe=JB,khe=ez,Phe=nz;function Rhe(t,e){return y.useReducer((s,r)=>e[s][r]??s,t)}var rz=t=>{const{present:e,children:s}=t,r=Lhe(e),i=typeof s=="function"?s({present:r.isPresent}):y.Children.only(s),a=gu(r.ref,Ohe(i));return typeof s=="function"||r.isPresent?y.cloneElement(i,{ref:a}):null};rz.displayName="Presence";function Lhe(t){const[e,s]=y.useState(),r=y.useRef({}),i=y.useRef(t),a=y.useRef("none"),o=t?"mounted":"unmounted",[c,d]=Rhe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const h=Sx(r.current);a.current=c==="mounted"?h:"none"},[c]),Bs(()=>{const h=r.current,g=i.current;if(g!==t){const p=a.current,v=Sx(h);t?d("MOUNT"):v==="none"||(h==null?void 0:h.display)==="none"?d("UNMOUNT"):d(g&&p!==v?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,d]),Bs(()=>{if(e){let h;const g=e.ownerDocument.defaultView??window,m=v=>{const N=Sx(r.current).includes(v.animationName);if(v.target===e&&N&&(d("ANIMATION_END"),!i.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",h=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},p=v=>{v.target===e&&(a.current=Sx(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{g.clearTimeout(h),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:y.useCallback(h=>{h&&(r.current=getComputedStyle(h)),s(h)},[])}}function Sx(t){return(t==null?void 0:t.animationName)||"none"}function Ohe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var Fhe="VisuallyHidden",iz=y.forwardRef((t,e)=>n.jsx(xu.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));iz.displayName=Fhe;var Bhe=iz,[Ky,Lye]=Or("Tooltip",[KB]),Zy=KB(),az="TooltipProvider",zhe=700,xN="tooltip.open",[Vhe,_S]=Ky(az),oz=t=>{const{__scopeTooltip:e,delayDuration:s=zhe,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:a}=t,[o,c]=y.useState(!0),d=y.useRef(!1),h=y.useRef(0);return y.useEffect(()=>{const g=h.current;return()=>window.clearTimeout(g)},[]),n.jsx(Vhe,{scope:e,isOpenDelayed:o,delayDuration:s,onOpen:y.useCallback(()=>{window.clearTimeout(h.current),c(!1)},[]),onClose:y.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>c(!0),r)},[r]),isPointerInTransitRef:d,onPointerInTransitChange:y.useCallback(g=>{d.current=g},[]),disableHoverableContent:i,children:a})};oz.displayName=az;var Qy="Tooltip",[$he,Xy]=Ky(Qy),lz=t=>{const{__scopeTooltip:e,children:s,open:r,defaultOpen:i=!1,onOpenChange:a,disableHoverableContent:o,delayDuration:c}=t,d=_S(Qy,t.__scopeTooltip),h=Zy(e),[g,m]=y.useState(null),p=Rr(),v=y.useRef(0),j=o??d.disableHoverableContent,N=c??d.delayDuration,E=y.useRef(!1),[_=!1,S]=ta({prop:r,defaultProp:i,onChange:T=>{T?(d.onOpen(),document.dispatchEvent(new CustomEvent(xN))):d.onClose(),a==null||a(T)}}),C=y.useMemo(()=>_?E.current?"delayed-open":"instant-open":"closed",[_]),I=y.useCallback(()=>{window.clearTimeout(v.current),v.current=0,E.current=!1,S(!0)},[S]),P=y.useCallback(()=>{window.clearTimeout(v.current),v.current=0,S(!1)},[S]),L=y.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{E.current=!0,S(!0),v.current=0},N)},[N,S]);return y.useEffect(()=>()=>{v.current&&(window.clearTimeout(v.current),v.current=0)},[]),n.jsx(Mhe,{...h,children:n.jsx($he,{scope:e,contentId:p,open:_,stateAttribute:C,trigger:g,onTriggerChange:m,onTriggerEnter:y.useCallback(()=>{d.isOpenDelayed?L():I()},[d.isOpenDelayed,L,I]),onTriggerLeave:y.useCallback(()=>{j?P():(window.clearTimeout(v.current),v.current=0)},[P,j]),onOpen:I,onClose:P,disableHoverableContent:j,children:s})})};lz.displayName=Qy;var vN="TooltipTrigger",cz=y.forwardRef((t,e)=>{const{__scopeTooltip:s,...r}=t,i=Xy(vN,s),a=_S(vN,s),o=Zy(s),c=y.useRef(null),d=gu(e,c,i.onTriggerChange),h=y.useRef(!1),g=y.useRef(!1),m=y.useCallback(()=>h.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),n.jsx(Dhe,{asChild:!0,...o,children:n.jsx(xu.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:d,onPointerMove:El(t.onPointerMove,p=>{p.pointerType!=="touch"&&!g.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),g.current=!0)}),onPointerLeave:El(t.onPointerLeave,()=>{i.onTriggerLeave(),g.current=!1}),onPointerDown:El(t.onPointerDown,()=>{h.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:El(t.onFocus,()=>{h.current||i.onOpen()}),onBlur:El(t.onBlur,i.onClose),onClick:El(t.onClick,i.onClose)})})});cz.displayName=vN;var Uhe="TooltipPortal",[Oye,Whe]=Ky(Uhe,{forceMount:void 0}),hm="TooltipContent",dz=y.forwardRef((t,e)=>{const s=Whe(hm,t.__scopeTooltip),{forceMount:r=s.forceMount,side:i="top",...a}=t,o=Xy(hm,t.__scopeTooltip);return n.jsx(rz,{present:r||o.open,children:o.disableHoverableContent?n.jsx(uz,{side:i,...a,ref:e}):n.jsx(Hhe,{side:i,...a,ref:e})})}),Hhe=y.forwardRef((t,e)=>{const s=Xy(hm,t.__scopeTooltip),r=_S(hm,t.__scopeTooltip),i=y.useRef(null),a=gu(e,i),[o,c]=y.useState(null),{trigger:d,onClose:h}=s,g=i.current,{onPointerInTransitChange:m}=r,p=y.useCallback(()=>{c(null),m(!1)},[m]),v=y.useCallback((j,N)=>{const E=j.currentTarget,_={x:j.clientX,y:j.clientY},S=Khe(_,E.getBoundingClientRect()),C=Zhe(_,S),I=Qhe(N.getBoundingClientRect()),P=Jhe([...C,...I]);c(P),m(!0)},[m]);return y.useEffect(()=>()=>p(),[p]),y.useEffect(()=>{if(d&&g){const j=E=>v(E,g),N=E=>v(E,d);return d.addEventListener("pointerleave",j),g.addEventListener("pointerleave",N),()=>{d.removeEventListener("pointerleave",j),g.removeEventListener("pointerleave",N)}}},[d,g,v,p]),y.useEffect(()=>{if(o){const j=N=>{const E=N.target,_={x:N.clientX,y:N.clientY},S=(d==null?void 0:d.contains(E))||(g==null?void 0:g.contains(E)),C=!Xhe(_,o);S?p():C&&(p(),h())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[d,g,o,h,p]),n.jsx(uz,{...t,ref:a})}),[qhe,Ghe]=Ky(Qy,{isInside:!1}),uz=y.forwardRef((t,e)=>{const{__scopeTooltip:s,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...c}=t,d=Xy(hm,s),h=Zy(s),{onClose:g}=d;return y.useEffect(()=>(document.addEventListener(xN,g),()=>document.removeEventListener(xN,g)),[g]),y.useEffect(()=>{if(d.trigger){const m=p=>{const v=p.target;v!=null&&v.contains(d.trigger)&&g()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[d.trigger,g]),n.jsx(HB,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:m=>m.preventDefault(),onDismiss:g,children:n.jsxs(khe,{"data-state":d.stateAttribute,...h,...c,ref:e,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(UB,{children:r}),n.jsx(qhe,{scope:s,isInside:!0,children:n.jsx(Bhe,{id:d.contentId,role:"tooltip",children:i||r})})]})})});dz.displayName=hm;var hz="TooltipArrow",Yhe=y.forwardRef((t,e)=>{const{__scopeTooltip:s,...r}=t,i=Zy(s);return Ghe(hz,s).isInside?null:n.jsx(Phe,{...i,...r,ref:e})});Yhe.displayName=hz;function Khe(t,e){const s=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(s,r,i,a)){case a:return"left";case i:return"right";case s:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Zhe(t,e,s=5){const r=[];switch(e){case"top":r.push({x:t.x-s,y:t.y+s},{x:t.x+s,y:t.y+s});break;case"bottom":r.push({x:t.x-s,y:t.y-s},{x:t.x+s,y:t.y-s});break;case"left":r.push({x:t.x+s,y:t.y-s},{x:t.x+s,y:t.y+s});break;case"right":r.push({x:t.x-s,y:t.y-s},{x:t.x-s,y:t.y+s});break}return r}function Qhe(t){const{top:e,right:s,bottom:r,left:i}=t;return[{x:i,y:e},{x:s,y:e},{x:s,y:r},{x:i,y:r}]}function Xhe(t,e){const{x:s,y:r}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const c=e[a].x,d=e[a].y,h=e[o].x,g=e[o].y;d>r!=g>r&&s<(h-c)*(r-d)/(g-d)+c&&(i=!i)}return i}function Jhe(t){const e=t.slice();return e.sort((s,r)=>s.x<r.x?-1:s.x>r.x?1:s.y<r.y?-1:s.y>r.y?1:0),eme(e)}function eme(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const s=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;s.length>=2;){const a=s[s.length-1],o=s[s.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))s.pop();else break}s.push(i)}return s.pop(),e.length===1&&s.length===1&&e[0].x===s[0].x&&e[0].y===s[0].y?e:e.concat(s)}var tme=oz,nme=lz,sme=cz,mz=dz;const P_=tme,R_=nme,L_=sme,yN=y.forwardRef(({className:t,sideOffset:e=4,...s},r)=>n.jsx(mz,{ref:r,sideOffset:e,className:we("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));yN.displayName=mz.displayName;function Ax({clients:t,isLoading:e}){const[s,r]=_n(),i=[{accessorFn:o=>{var c;return((c=o.user)==null?void 0:c.name)||"Unknown"},id:"user.name",header:"Client Name",cell:({row:o})=>{var d;const c=o.original;return!c||!c.user?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center text-sm flex-shrink-0",children:"?"}),n.jsx("div",{children:n.jsx("div",{className:"font-medium",children:"Unknown Client"})})]}):n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-8 w-8 rounded-full bg-primary text-white flex items-center justify-center text-sm flex-shrink-0",children:c.user.name.charAt(0).toUpperCase()}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:c.user.name}),((d=c.client)==null?void 0:d.companyName)&&n.jsx("div",{className:"text-xs text-muted-foreground",children:c.client.companyName})]})]})}},{accessorKey:"contractType",header:"Type",cell:({row:o})=>{const c=o.getValue("contractType"),d=c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"Residential";let h="",g=n.jsx(xi,{className:"h-3 w-3 mr-1"});switch(c==null?void 0:c.toLowerCase()){case"commercial":h="bg-blue-100 text-primary border-blue-200",g=n.jsx(tu,{className:"h-3 w-3 mr-1"});break;case"service":h="bg-purple-100 text-purple-600 border-purple-200",g=n.jsx(so,{className:"h-3 w-3 mr-1"});break;case"maintenance":h="bg-amber-100 text-amber-600 border-amber-200",g=n.jsx(tn,{className:"h-3 w-3 mr-1"});break;default:h="bg-green-100 text-green-600 border-green-200",g=n.jsx(xi,{className:"h-3 w-3 mr-1"})}return n.jsxs(Ze,{variant:"outline",className:`flex items-center ${h}`,children:[g,d]})}},{accessorFn:o=>{var c;return((c=o.user)==null?void 0:c.email)||"N/A"},id:"user.email",header:"Email",cell:({row:o})=>{const c=o.original;if(!c||!c.user)return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qs,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"N/A"})]});const d=c.user.email,h=d.length>25?`${d.substring(0,22)}...`:d;return n.jsx(P_,{children:n.jsxs(R_,{children:[n.jsx(L_,{asChild:!0,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qs,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm",children:h})]})}),d.length>25&&n.jsx(yN,{children:n.jsx("p",{children:d})})]})})}},{accessorFn:o=>{var c,d;return((c=o==null?void 0:o.user)==null?void 0:c.phone)||((d=o==null?void 0:o.client)==null?void 0:d.phone)||"N/A"},id:"user.phone",header:"Phone",cell:({row:o})=>{var h,g;const c=o.original;if(!c||!c.user)return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qr,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"N/A"})]});const d=c.user.phone||((h=c.client)==null?void 0:h.phone)||"N/A";return console.log("Phone data for client:",c.user.name,{userPhone:c.user.phone,clientPhone:(g=c.client)==null?void 0:g.phone,finalPhone:d}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qr,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm whitespace-nowrap",children:d})]})}},{accessorFn:o=>{const c=o==null?void 0:o.user,d=o==null?void 0:o.client;if(!c&&!d)return"N/A";if(c&&c.address)return c.address||"N/A";if(d&&d.address){const h=d.address||"",g=d.city||"",m=d.state||"",p=d.zip||"";return h?`${h}${g?`, ${g}`:""}${m?`, ${m}`:""}${p?` ${p}`:""}`:"N/A"}return"N/A"},id:"user.address",header:"Address",cell:({row:o})=>{var g,m;const c=o.original;if(!c||!c.user)return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(bi,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"N/A"})]});let d=c.user.address||"N/A";d==="N/A"&&((g=c.client)!=null&&g.address)&&(d=`${c.client.address}${c.client.city?`, ${c.client.city}`:""}${c.client.state?`, ${c.client.state}`:""}${c.client.zip?` ${c.client.zip}`:""}`),console.log("Address data for client:",c.user.name,{userAddress:c.user.address,clientAddress:(m=c.client)!=null&&m.address?`${c.client.address}, ${c.client.city}, ${c.client.state}`:null,finalAddress:d});const h=d.length>30?`${d.substring(0,27)}...`:d;return n.jsx(P_,{children:n.jsxs(R_,{children:[n.jsx(L_,{asChild:!0,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(bi,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm truncate max-w-[200px]",children:h})]})}),d.length>30&&n.jsx(yN,{children:n.jsx("p",{children:d})})]})})}},{id:"actions",cell:({row:o})=>{var h;const c=o.original;if(!c)return null;const d=c.id||((h=c.client)==null?void 0:h.id);return d?n.jsxs(oi,{children:[n.jsx(li,{asChild:!0,children:n.jsxs(H,{variant:"ghost",className:"h-8 w-8 p-0",children:[n.jsx("span",{className:"sr-only",children:"Open menu"}),n.jsx(ri,{className:"h-4 w-4"})]})}),n.jsxs(Yr,{align:"end",children:[n.jsx(_m,{children:"Actions"}),n.jsx(bt,{onClick:()=>navigator.clipboard.writeText(d.toString()),children:"Copy client ID"}),n.jsx(sl,{}),n.jsxs(bt,{onClick:()=>r(`/clients/${d}`),children:[n.jsx(xo,{className:"mr-2 h-4 w-4"}),"View Details"]}),n.jsxs(bt,{onClick:()=>r(`/clients/${d}/edit`),children:[n.jsx(Gr,{className:"mr-2 h-4 w-4"}),"Edit"]}),n.jsxs(bt,{className:"text-red-600",onClick:()=>{var g;confirm(`Are you sure you want to delete client "${((g=c.user)==null?void 0:g.name)||"Unknown"}"?`)&&alert("Delete functionality would be implemented here")},children:[n.jsx(Ni,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]}):null}}],a=[{id:"user.name",title:"Client Name",type:"text",placeholder:"Filter by name...",operators:[{label:"Contains",value:"contains"},{label:"Equals",value:"equals"},{label:"Starts with",value:"startsWith"}]},{id:"contractType",title:"Client Type",type:"select",options:[{label:"Residential",value:"residential",icon:xi},{label:"Commercial",value:"commercial",icon:tu},{label:"Service",value:"service",icon:so},{label:"Maintenance",value:"maintenance",icon:tn}]},{id:"user.email",title:"Email",type:"text",placeholder:"Filter by email...",operators:[{label:"Contains",value:"contains"},{label:"Equals",value:"equals"},{label:"Starts with",value:"startsWith"}]},{id:"client.phone",title:"Phone",type:"text",placeholder:"Filter by phone..."},{id:"client.address",title:"Address",type:"text",placeholder:"Filter by address..."},{id:"client.city",title:"City",type:"text",placeholder:"Filter by city..."},{id:"client.state",title:"State",type:"text",placeholder:"Filter by state..."}];return e?n.jsx("div",{className:"p-8 flex justify-center",children:"Loading clients..."}):!t||t.length===0?n.jsxs("div",{className:"border rounded-md p-8 text-center text-muted-foreground",children:[n.jsx(Hs,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/60"}),n.jsx("h3",{className:"text-lg font-medium mb-1",children:"No clients found"}),n.jsx("p",{className:"mb-4 text-sm",children:"No clients match your current filters or search criteria."}),n.jsxs(H,{onClick:()=>r("/clients/add"),className:"bg-primary text-white hover:bg-primary/90",children:[n.jsx(gi,{className:"h-4 w-4 mr-1"}),"Add Client"]})]}):(console.log("Client data sample:",t.slice(0,1)),n.jsx("div",{className:"space-y-4 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto -mx-4 sm:mx-0",children:n.jsx("div",{className:"min-w-full sm:rounded-md",children:n.jsx(zB,{columns:i,data:t,filterableColumns:a,globalSearchPlaceholder:"Search all client data...",enableGlobalSearch:!0,enablePagination:!0,enableColumnVisibility:!0})})})}))}function rme(){var L;const[,t]=_n(),{isAuthenticated:e,isLoading:s,checkSession:r}=Kr();jn();const{toast:i}=Lt(),[a,o]=y.useState(!1),{data:c,isLoading:d,error:h,refetch:g,isError:m}=wt({queryKey:["/api/clients"],enabled:e,retry:1,staleTime:3e4,gcTime:6e4}),p=s||d,v=c&&(Array.isArray(c)?c:c&&"clients"in c?c.clients:[]);console.log("Authentication state:",{isAuthenticated:e,authLoading:s}),console.log("Clients data received:",c),console.log("Clients data error:",h);const j=async()=>{o(!0);try{const T=await r();console.log("Session refresh result:",T),T?(i({title:"Session Refreshed",description:"Your session has been successfully refreshed."}),await g()):(i({title:"Session Expired",description:"Your session has expired. Please login again.",variant:"destructive"}),t("/"))}catch(T){console.error("Error refreshing session:",T),i({title:"Refresh Failed",description:"There was a problem refreshing your session.",variant:"destructive"})}finally{o(!1)}},N=(v||[]).map(T=>!T||!T.client?(console.error("Invalid client data detected:",T),null):{...T,id:T.client.id,companyName:T.client.companyName,contractType:T.client.contractType}).filter(Boolean),E=N==null?void 0:N.filter(T=>{var M;return((M=T.contractType)==null?void 0:M.toLowerCase())==="commercial"}),_=N==null?void 0:N.filter(T=>{var M;return((M=T.contractType)==null?void 0:M.toLowerCase())==="residential"||!T.contractType}),S=N==null?void 0:N.filter(T=>{var M;return((M=T.contractType)==null?void 0:M.toLowerCase())==="service"}),C=!e&&!s,I=e&&m&&((L=h==null?void 0:h.response)==null?void 0:L.status)===401,P=e&&!p&&!m&&(!N||N.length===0);return C?n.jsxs("div",{children:[n.jsx(um,{children:n.jsx("title",{children:"Clients | Pool Management"})}),n.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(yi,{className:"h-7 w-7 text-primary mr-2"}),n.jsx("h1",{className:"text-2xl font-bold text-foreground font-heading",children:"Clients"})]})}),n.jsxs(Ae,{className:"mb-6",children:[n.jsx(Be,{children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(fs,{className:"h-5 w-5 text-amber-500 mr-2"}),n.jsx("h3",{className:"text-lg font-medium",children:"Authentication Required"})]})}),n.jsxs(Ee,{children:[n.jsx("p",{className:"mb-4",children:"You need to be logged in to view client information."}),n.jsxs(H,{className:"bg-primary hover:bg-primary/90 text-white font-medium",onClick:()=>t("/"),children:[n.jsx(G0,{className:"h-4 w-4 mr-1"}),"Go to Login"]})]})]})]}):n.jsxs("div",{children:[n.jsx(um,{children:n.jsx("title",{children:"Clients | Pool Management"})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(yi,{className:"h-7 w-7 text-primary mr-2"}),n.jsx("h1",{className:"text-2xl font-bold text-foreground font-heading",children:"Clients"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3 md:mt-0",children:[n.jsxs(H,{variant:"outline",size:"sm",onClick:()=>t("/clients"),className:"h-9",children:[n.jsx(kl,{className:"h-4 w-4 mr-1"}),"Card View"]}),n.jsxs(H,{className:"bg-primary hover:bg-primary/90 text-white font-medium",onClick:()=>t("/clients/add"),children:[n.jsx(gi,{className:"h-4 w-4 mr-1"}),"Add Client"]})]})]}),I&&n.jsxs(Cr,{variant:"destructive",className:"mb-6",children:[n.jsx(fs,{className:"h-4 w-4"}),n.jsx(eo,{children:"Session Error"}),n.jsxs(Sr,{className:"space-y-2",children:[n.jsx("p",{children:"Your session appears to be invalid or expired. Please refresh your session or login again."}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[n.jsx(H,{variant:"outline",size:"sm",onClick:j,disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"h-4 w-4 mr-1 animate-spin"}),"Refreshing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Qa,{className:"h-4 w-4 mr-1"}),"Refresh Session"]})}),n.jsxs(H,{size:"sm",onClick:()=>t("/"),children:[n.jsx(G0,{className:"h-4 w-4 mr-1"}),"Go to Login"]})]})]})]}),m&&!I&&n.jsxs(Cr,{variant:"destructive",className:"mb-6",children:[n.jsx(fs,{className:"h-4 w-4"}),n.jsx(eo,{children:"Error Loading Clients"}),n.jsxs(Sr,{className:"space-y-2",children:[n.jsx("p",{children:"There was a problem loading the client data. Please try again."}),n.jsx("div",{className:"flex items-center gap-2 mt-2",children:n.jsx(H,{variant:"outline",size:"sm",onClick:()=>g(),disabled:d,children:d?n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"h-4 w-4 mr-1 animate-spin"}),"Loading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Qa,{className:"h-4 w-4 mr-1"}),"Try Again"]})})})]})]}),P&&n.jsxs(Cr,{className:"mb-6",children:[n.jsx(BG,{className:"h-4 w-4"}),n.jsx(eo,{children:"No Client Data"}),n.jsxs(Sr,{className:"space-y-2",children:[n.jsx("p",{children:"You are authenticated but no client data was found."}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsxs(H,{variant:"outline",size:"sm",onClick:()=>g(),disabled:d,children:[n.jsx(Qa,{className:"h-4 w-4 mr-1"}),"Refresh Data"]}),n.jsxs(H,{variant:"outline",size:"sm",onClick:()=>t("/clients/add"),children:[n.jsx(gi,{className:"h-4 w-4 mr-1"}),"Add New Client"]})]})]})]}),p?n.jsxs("div",{className:"flex justify-center items-center py-12",children:[n.jsx(Kt,{className:"h-8 w-8 animate-spin text-primary mr-2"}),n.jsx("span",{className:"text-muted-foreground",children:"Loading clients..."})]}):n.jsxs(ps,{defaultValue:"all",className:"mb-6",children:[n.jsxs(gs,{className:"w-full sm:w-auto overflow-x-auto",children:[n.jsxs(Ge,{value:"all",children:["All Clients (",(N==null?void 0:N.length)||0,")"]}),n.jsxs(Ge,{value:"residential",children:["Residential (",(_==null?void 0:_.length)||0,")"]}),n.jsxs(Ge,{value:"commercial",children:["Commercial (",(E==null?void 0:E.length)||0,")"]}),n.jsxs(Ge,{value:"service",children:["Service (",(S==null?void 0:S.length)||0,")"]})]}),n.jsx(Qe,{value:"all",children:n.jsx(Ax,{clients:N||[],isLoading:p})}),n.jsx(Qe,{value:"residential",children:n.jsx(Ax,{clients:_||[],isLoading:p})}),n.jsx(Qe,{value:"commercial",children:n.jsx(Ax,{clients:E||[],isLoading:p})}),n.jsx(Qe,{value:"service",children:n.jsx(Ax,{clients:S||[],isLoading:p})})]})]})}const Zw=768;function ime(){const[t,e]=y.useState(void 0);return y.useEffect(()=>{const s=window.matchMedia(`(max-width: ${Zw-1}px)`),r=()=>{e(window.innerWidth<Zw)};return s.addEventListener("change",r),e(window.innerWidth<Zw),()=>s.removeEventListener("change",r)},[]),!!t}function eg(t){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eg(t)}function ame(t,e){if(eg(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,e||"default");if(eg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ome(t){var e=ame(t,"string");return eg(e)=="symbol"?e:e+""}function Ue(t,e,s){return(e=ome(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function fz(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qw,O_;function lme(){if(O_)return Qw;O_=1;var t=function(s,r,i,a,o,c,d,h){if(!s){var g;if(r===void 0)g=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var m=[i,a,o,c,d,h],p=0;g=new Error(r.replace(/%s/g,function(){return m[p++]})),g.name="Invariant Violation"}throw g.framesToPop=1,g}};return Qw=t,Qw}var cme=lme(),Lr=fz(cme),xn=y.createContext(null);function pz(){Lr(!!y.useContext,"useGoogleMap is React hook and requires React version 16.8+");var t=y.useContext(xn);return Lr(!!t,"useGoogleMap needs a GoogleMap available up in the tree"),t}function dme(t,e,s){return Object.keys(t).reduce(function(i,a){return e(i,t[a],a)},s)}function ume(t,e){Object.keys(t).forEach(s=>e(t[s],s))}function hme(t,e,s,r){var i={},a=(o,c)=>{var d=s[c];d!==e[c]&&(i[c]=d,o(r,d))};return ume(t,a),i}function mme(t,e,s){var r=dme(s,function(a,o,c){return typeof t[c]=="function"&&a.push(google.maps.event.addListener(e,o,t[c])),a},[]);return r}function fme(t){google.maps.event.removeListener(t)}function Rn(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.forEach(fme)}function Dn(t){var{updaterMap:e,eventMap:s,prevProps:r,nextProps:i,instance:a}=t,o=mme(i,a,s);return hme(e,r,i,a),o}var F_={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},B_={extraMapTypes(t,e){e.forEach(function(r,i){t.mapTypes.set(String(i),r)})},center(t,e){t.setCenter(e)},clickableIcons(t,e){t.setClickableIcons(e)},heading(t,e){t.setHeading(e)},mapTypeId(t,e){t.setMapTypeId(e)},options(t,e){t.setOptions(e)},streetView(t,e){t.setStreetView(e)},tilt(t,e){t.setTilt(e)},zoom(t,e){t.setZoom(e)}};function pme(t){var{children:e,options:s,id:r,mapContainerStyle:i,mapContainerClassName:a,center:o,onClick:c,onDblClick:d,onDrag:h,onDragEnd:g,onDragStart:m,onMouseMove:p,onMouseOut:v,onMouseOver:j,onMouseDown:N,onMouseUp:E,onRightClick:_,onCenterChanged:S,onLoad:C,onUnmount:I}=t,[P,L]=y.useState(null),T=y.useRef(null),[M,k]=y.useState(null),[O,V]=y.useState(null),[B,Y]=y.useState(null),[z,G]=y.useState(null),[he,le]=y.useState(null),[se,re]=y.useState(null),[me,Ce]=y.useState(null),[$,xe]=y.useState(null),[te,ae]=y.useState(null),[ee,de]=y.useState(null),[pe,Me]=y.useState(null),[Le,We]=y.useState(null);return y.useEffect(()=>{s&&P!==null&&P.setOptions(s)},[P,s]),y.useEffect(()=>{P!==null&&typeof o<"u"&&P.setCenter(o)},[P,o]),y.useEffect(()=>{P&&d&&(O!==null&&google.maps.event.removeListener(O),V(google.maps.event.addListener(P,"dblclick",d)))},[d]),y.useEffect(()=>{P&&g&&(B!==null&&google.maps.event.removeListener(B),Y(google.maps.event.addListener(P,"dragend",g)))},[g]),y.useEffect(()=>{P&&m&&(z!==null&&google.maps.event.removeListener(z),G(google.maps.event.addListener(P,"dragstart",m)))},[m]),y.useEffect(()=>{P&&N&&(he!==null&&google.maps.event.removeListener(he),le(google.maps.event.addListener(P,"mousedown",N)))},[N]),y.useEffect(()=>{P&&p&&(se!==null&&google.maps.event.removeListener(se),re(google.maps.event.addListener(P,"mousemove",p)))},[p]),y.useEffect(()=>{P&&v&&(me!==null&&google.maps.event.removeListener(me),Ce(google.maps.event.addListener(P,"mouseout",v)))},[v]),y.useEffect(()=>{P&&j&&($!==null&&google.maps.event.removeListener($),xe(google.maps.event.addListener(P,"mouseover",j)))},[j]),y.useEffect(()=>{P&&E&&(te!==null&&google.maps.event.removeListener(te),ae(google.maps.event.addListener(P,"mouseup",E)))},[E]),y.useEffect(()=>{P&&_&&(ee!==null&&google.maps.event.removeListener(ee),de(google.maps.event.addListener(P,"rightclick",_)))},[_]),y.useEffect(()=>{P&&c&&(pe!==null&&google.maps.event.removeListener(pe),Me(google.maps.event.addListener(P,"click",c)))},[c]),y.useEffect(()=>{P&&h&&(Le!==null&&google.maps.event.removeListener(Le),We(google.maps.event.addListener(P,"drag",h)))},[h]),y.useEffect(()=>{P&&S&&(M!==null&&google.maps.event.removeListener(M),k(google.maps.event.addListener(P,"center_changed",S)))},[c]),y.useEffect(()=>{var jt=T.current===null?null:new google.maps.Map(T.current,s);return L(jt),jt!==null&&C&&C(jt),()=>{jt!==null&&I&&I(jt)}},[]),n.jsx("div",{id:r,ref:T,style:i,className:a,children:n.jsx(xn.Provider,{value:P,children:P!==null?e:null})})}y.memo(pme);class gz extends y.PureComponent{constructor(){super(...arguments),Ue(this,"state",{map:null}),Ue(this,"registeredEvents",[]),Ue(this,"mapRef",null),Ue(this,"getInstance",()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options)),Ue(this,"panTo",e=>{var s=this.getInstance();s&&s.panTo(e)}),Ue(this,"setMapCallback",()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)}),Ue(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=Dn({updaterMap:B_,eventMap:F_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){this.state.map!==null&&(Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:B_,eventMap:F_,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),Rn(this.registeredEvents))}render(){return n.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:n.jsx(xn.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})}}function z_(t,e,s,r,i,a,o){try{var c=t[a](o),d=c.value}catch(h){return void s(h)}c.done?e(d):Promise.resolve(d).then(r,i)}function xz(t){return function(){var e=this,s=arguments;return new Promise(function(r,i){var a=t.apply(e,s);function o(d){z_(a,r,i,o,c,"next",d)}function c(d){z_(a,r,i,o,c,"throw",d)}o(void 0)})}}function vz(t){var{googleMapsApiKey:e,googleMapsClientId:s,version:r="weekly",language:i,region:a,libraries:o,channel:c,mapIds:d,authReferrerPolicy:h}=t,g=[];return Lr(e&&s||!(e&&s),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?g.push("key=".concat(e)):s&&g.push("client=".concat(s)),r&&g.push("v=".concat(r)),i&&g.push("language=".concat(i)),a&&g.push("region=".concat(a)),o&&o.length&&g.push("libraries=".concat(o.sort().join(","))),c&&g.push("channel=".concat(c)),d&&d.length&&g.push("map_ids=".concat(d.join(","))),h&&g.push("auth_referrer_policy=".concat(h)),g.push("loading=async"),g.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?".concat(g.join("&"))}var Mc=typeof document<"u";function yz(t){var{url:e,id:s,nonce:r}=t;return Mc?new Promise(function(a,o){var c=document.getElementById(s),d=window;if(c){var h=c.getAttribute("data-state");if(c.src===e&&h!=="error"){if(h==="ready")return a(s);var g=d.initMap,m=c.onerror;d.initMap=function(){g&&g(),a(s)},c.onerror=function(v){m&&m(v),o(v)};return}else c.remove()}var p=document.createElement("script");p.type="text/javascript",p.src=e,p.id=s,p.async=!0,p.nonce=r||"",p.onerror=function(j){p.setAttribute("data-state","error"),o(j)},d.initMap=function(){p.setAttribute("data-state","ready"),a(s)},document.head.appendChild(p)}).catch(i=>{throw console.error("injectScript error: ",i),i}):Promise.reject(new Error("document is undefined"))}function V_(t){var e=t.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:t.tagName.toLowerCase()==="style"&&t.styleSheet&&t.styleSheet.cssText&&t.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(t.styleSheet.cssText="",!0):t.tagName.toLowerCase()==="style"&&t.innerHTML&&t.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(t.innerHTML="",!0):t.tagName.toLowerCase()==="style"&&!t.styleSheet&&!t.innerHTML}function IS(){var t=document.getElementsByTagName("head")[0];if(t){var e=t.insertBefore.bind(t);t.insertBefore=function(i,a){return V_(i)||Reflect.apply(e,t,[i,a]),i};var s=t.appendChild.bind(t);t.appendChild=function(i){return V_(i)||Reflect.apply(s,t,[i]),i}}}var ff=!1;function wz(){return n.jsx("div",{children:"Loading..."})}var tg={id:"script-loader",version:"weekly"};class TS extends y.PureComponent{constructor(){super(...arguments),Ue(this,"check",null),Ue(this,"state",{loaded:!1}),Ue(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),Ue(this,"isCleaningUp",xz(function*(){function e(s){if(!ff)s();else if(Mc)var r=window.setInterval(function(){ff||(window.clearInterval(r),s())},1)}return new Promise(e)})),Ue(this,"cleanup",()=>{ff=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(r){return typeof r.src=="string"&&r.src.includes("maps.googleapis")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(r){return r.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(r){return r.innerText!==void 0&&r.innerText.length>0&&r.innerText.includes(".gm-")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)})}),Ue(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&IS(),Lr(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:vz(this.props)};yz(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(s=>{this.props.onError&&this.props.onError(s),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),Ue(this,"getRef",e=>{this.check=e})}componentDidMount(){if(Mc){if(window.google&&window.google.maps&&!ff){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(s){console.error("Error at injecting script after cleaning up: ",s)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),Mc&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(Mc){this.cleanup();var e=()=>{this.check||(delete window.google,ff=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return n.jsxs(n.Fragment,{children:[n.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||n.jsx(wz,{})]})}}Ue(TS,"defaultProps",tg);function gme(t,e){if(t==null)return{};var s={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;s[r]=t[r]}return s}function MS(t,e){if(t==null)return{};var s,r,i=gme(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)s=a[r],e.includes(s)||{}.propertyIsEnumerable.call(t,s)&&(i[s]=t[s])}return i}var $_;function jz(t){var{id:e=tg.id,version:s=tg.version,nonce:r,googleMapsApiKey:i,googleMapsClientId:a,language:o,region:c,libraries:d,preventGoogleFontsLoading:h,channel:g,mapIds:m,authReferrerPolicy:p}=t,v=y.useRef(!1),[j,N]=y.useState(!1),[E,_]=y.useState(void 0);y.useEffect(function(){return v.current=!0,()=>{v.current=!1}},[]),y.useEffect(function(){Mc&&h&&IS()},[h]),y.useEffect(function(){j&&Lr(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[j]);var S=vz({version:s,googleMapsApiKey:i,googleMapsClientId:a,language:o,region:c,libraries:d,channel:g,mapIds:m,authReferrerPolicy:p});y.useEffect(function(){if(!Mc)return;function P(){v.current&&(N(!0),$_=S)}if(window.google&&window.google.maps&&$_===S){P();return}yz({id:e,url:S,nonce:r}).then(P).catch(function(T){v.current&&_(T),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(i||"-",") or Client ID (").concat(a||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(T)})},[e,S,r]);var C=y.useRef(void 0);return y.useEffect(function(){C.current&&d!==C.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),C.current=d},[d]),{isLoaded:j,loadError:E,url:S}}var xme=["loadingElement","onLoad","onError","onUnmount","children"],vme=n.jsx(wz,{});function yme(t){var{loadingElement:e,onLoad:s,onError:r,onUnmount:i,children:a}=t,o=MS(t,xme),{isLoaded:c,loadError:d}=jz(o);return y.useEffect(function(){c&&typeof s=="function"&&s()},[c,s]),y.useEffect(function(){d&&typeof r=="function"&&r(d)},[d,r]),y.useEffect(function(){return()=>{i&&i()}},[i]),c?a:e||vme}y.memo(yme);function wme(t,e,s,r){function i(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function c(g){try{h(r.next(g))}catch(m){o(m)}}function d(g){try{h(r.throw(g))}catch(m){o(m)}}function h(g){g.done?a(g.value):i(g.value).then(c,d)}h((r=r.apply(t,[])).next())})}function jme(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bme=function t(e,s){if(e===s)return!0;if(e&&s&&typeof e=="object"&&typeof s=="object"){if(e.constructor!==s.constructor)return!1;var r,i,a;if(Array.isArray(e)){if(r=e.length,r!=s.length)return!1;for(i=r;i--!==0;)if(!t(e[i],s[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(s).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(s,a[i]))return!1;for(i=r;i--!==0;){var o=a[i];if(!t(e[o],s[o]))return!1}return!0}return e!==e&&s!==s},Nme=jme(bme),U_="__googleMapsScriptId",ah;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(ah||(ah={}));class Id{constructor(e){var{apiKey:s,authReferrerPolicy:r,channel:i,client:a,id:o=U_,language:c,libraries:d=[],mapIds:h,nonce:g,region:m,retries:p=3,url:v="https://maps.googleapis.com/maps/api/js",version:j}=e;if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=s,this.authReferrerPolicy=r,this.channel=i,this.client=a,this.id=o||U_,this.language=c,this.libraries=d,this.mapIds=h,this.nonce=g,this.region=m,this.retries=p,this.url=v,this.version=j,Id.instance){if(!Nme(this.options,Id.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(Id.instance.options)));return Id.instance}Id.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?ah.FAILURE:this.done?ah.SUCCESS:this.loading?ah.LOADING:ah.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){var e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+="&key=".concat(this.apiKey)),this.channel&&(e+="&channel=".concat(this.channel)),this.client&&(e+="&client=".concat(this.client)),this.libraries.length>0&&(e+="&libraries=".concat(this.libraries.join(","))),this.language&&(e+="&language=".concat(this.language)),this.region&&(e+="&region=".concat(this.region)),this.version&&(e+="&v=".concat(this.version)),this.mapIds&&(e+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(e+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),e}deleteScript(){var e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,s)=>{this.loadCallback(r=>{r?s(r.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,s;if(document.getElementById(this.id)){this.callback();return}var r={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(r).forEach(a=>!r[a]&&delete r[a]),!((s=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||s===void 0)&&s.importLibrary||(a=>{var o,c,d,h="The Google Maps JavaScript API",g="google",m="importLibrary",p="__ib__",v=document,j=window;j=j[g]||(j[g]={});var N=j.maps||(j.maps={}),E=new Set,_=new URLSearchParams,S=()=>o||(o=new Promise((C,I)=>wme(this,void 0,void 0,function*(){var P;yield c=v.createElement("script"),c.id=this.id,_.set("libraries",[...E]+"");for(d in a)_.set(d.replace(/[A-Z]/g,L=>"_"+L[0].toLowerCase()),a[d]);_.set("callback",g+".maps."+p),c.src=this.url+"?"+_,N[p]=C,c.onerror=()=>o=I(Error(h+" could not load.")),c.nonce=this.nonce||((P=v.querySelector("script[nonce]"))===null||P===void 0?void 0:P.nonce)||"",v.head.append(c)})));N[m]?console.warn(h+" only loads once. Ignoring:",a):N[m]=function(C){for(var I=arguments.length,P=new Array(I>1?I-1:0),L=1;L<I;L++)P[L-1]=arguments[L];return E.add(C)&&S().then(()=>N[m](C,...P))}})(r);var i=this.libraries.map(a=>this.importLibrary(a));i.length||i.push(this.importLibrary("core")),Promise.all(i).then(()=>this.callback(),a=>{var o=new ErrorEvent("error",{error:a});this.loadErrorCallback(o)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){var s=this.errors.length*Math.pow(2,this.errors.length);console.error("Failed to load Google Maps script, retrying in ".concat(s," ms.")),setTimeout(()=>{this.deleteScript(),this.setScript()},s)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}var Cme=["maps"];function Sme(t){var{id:e=tg.id,version:s=tg.version,nonce:r,googleMapsApiKey:i,language:a,region:o,libraries:c=Cme,preventGoogleFontsLoading:d,mapIds:h,authReferrerPolicy:g}=t,m=y.useRef(!1),[p,v]=y.useState(!1),[j,N]=y.useState(void 0);y.useEffect(function(){return m.current=!0,()=>{m.current=!1}},[]);var E=y.useMemo(()=>new Id({id:e,apiKey:i,version:s,libraries:c,language:a||"en",region:o||"US",mapIds:h||[],nonce:r||"",authReferrerPolicy:g||"origin"}),[e,i,s,c,a,o,h,r,g]);y.useEffect(function(){p||E.load().then(()=>{m.current&&v(!0)}).catch(C=>{N(C)})},[]),y.useEffect(()=>{Mc&&d&&IS()},[d]);var _=y.useRef();return y.useEffect(()=>{_.current&&c!==_.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),_.current=c},[c]),{isLoaded:p,loadError:j}}function W_(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,r)}return s}function Lv(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?W_(Object(s),!0).forEach(function(r){Ue(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):W_(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}var H_={},q_={options(t,e){t.setOptions(e)}};function Ame(t){var{options:e,onLoad:s,onUnmount:r}=t,i=y.useContext(xn),[a,o]=y.useState(null);return y.useEffect(()=>{a!==null&&a.setMap(i)},[i]),y.useEffect(()=>{e&&a!==null&&a.setOptions(e)},[a,e]),y.useEffect(()=>{var c=new google.maps.TrafficLayer(Lv(Lv({},e),{},{map:i}));return o(c),s&&s(c),()=>{a!==null&&(r&&r(a),a.setMap(null))}},[]),null}y.memo(Ame);class bz extends y.PureComponent{constructor(){super(...arguments),Ue(this,"state",{trafficLayer:null}),Ue(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),Ue(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(Lv(Lv({},this.props.options),{},{map:this.context}));this.registeredEvents=Dn({updaterMap:q_,eventMap:H_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&(Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:q_,eventMap:H_,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),Rn(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}Ue(bz,"contextType",xn);function Eme(t){var{onLoad:e,onUnmount:s}=t,r=y.useContext(xn),[i,a]=y.useState(null);return y.useEffect(()=>{i!==null&&i.setMap(r)},[r]),y.useEffect(()=>{var o=new google.maps.BicyclingLayer;return a(o),o.setMap(r),e&&e(o),()=>{o!==null&&(s&&s(o),o.setMap(null))}},[]),null}y.memo(Eme);class Nz extends y.PureComponent{constructor(){super(...arguments),Ue(this,"state",{bicyclingLayer:null}),Ue(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}Ue(Nz,"contextType",xn);function _me(t){var{onLoad:e,onUnmount:s}=t,r=y.useContext(xn),[i,a]=y.useState(null);return y.useEffect(()=>{i!==null&&i.setMap(r)},[r]),y.useEffect(()=>{var o=new google.maps.TransitLayer;return a(o),o.setMap(r),e&&e(o),()=>{i!==null&&(s&&s(i),i.setMap(null))}},[]),null}y.memo(_me);class Cz extends y.PureComponent{constructor(){super(...arguments),Ue(this,"state",{transitLayer:null}),Ue(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}Ue(Cz,"contextType",xn);function G_(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,r)}return s}function Ov(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?G_(Object(s),!0).forEach(function(r){Ue(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):G_(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}var Y_={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},K_={drawingMode(t,e){t.setDrawingMode(e)},options(t,e){t.setOptions(e)}};function Ime(t){var{options:e,drawingMode:s,onCircleComplete:r,onMarkerComplete:i,onOverlayComplete:a,onPolygonComplete:o,onPolylineComplete:c,onRectangleComplete:d,onLoad:h,onUnmount:g}=t,m=y.useContext(xn),[p,v]=y.useState(null),[j,N]=y.useState(null),[E,_]=y.useState(null),[S,C]=y.useState(null),[I,P]=y.useState(null),[L,T]=y.useState(null),[M,k]=y.useState(null);return y.useEffect(()=>{p!==null&&p.setMap(m)},[m]),y.useEffect(()=>{e&&p!==null&&p.setOptions(e)},[p,e]),y.useEffect(()=>{p!==null&&p.setDrawingMode(s??null)},[p,s]),y.useEffect(()=>{p&&r&&(j!==null&&google.maps.event.removeListener(j),N(google.maps.event.addListener(p,"circlecomplete",r)))},[p,r]),y.useEffect(()=>{p&&i&&(E!==null&&google.maps.event.removeListener(E),_(google.maps.event.addListener(p,"markercomplete",i)))},[p,i]),y.useEffect(()=>{p&&a&&(S!==null&&google.maps.event.removeListener(S),C(google.maps.event.addListener(p,"overlaycomplete",a)))},[p,a]),y.useEffect(()=>{p&&o&&(I!==null&&google.maps.event.removeListener(I),P(google.maps.event.addListener(p,"polygoncomplete",o)))},[p,o]),y.useEffect(()=>{p&&c&&(L!==null&&google.maps.event.removeListener(L),T(google.maps.event.addListener(p,"polylinecomplete",c)))},[p,c]),y.useEffect(()=>{p&&d&&(M!==null&&google.maps.event.removeListener(M),k(google.maps.event.addListener(p,"rectanglecomplete",d)))},[p,d]),y.useEffect(()=>{Lr(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var O=new google.maps.drawing.DrawingManager(Ov(Ov({},e),{},{map:m}));return s&&O.setDrawingMode(s),r&&N(google.maps.event.addListener(O,"circlecomplete",r)),i&&_(google.maps.event.addListener(O,"markercomplete",i)),a&&C(google.maps.event.addListener(O,"overlaycomplete",a)),o&&P(google.maps.event.addListener(O,"polygoncomplete",o)),c&&T(google.maps.event.addListener(O,"polylinecomplete",c)),d&&k(google.maps.event.addListener(O,"rectanglecomplete",d)),v(O),h&&h(O),()=>{p!==null&&(j&&google.maps.event.removeListener(j),E&&google.maps.event.removeListener(E),S&&google.maps.event.removeListener(S),I&&google.maps.event.removeListener(I),L&&google.maps.event.removeListener(L),M&&google.maps.event.removeListener(M),g&&g(p),p.setMap(null))}},[]),null}y.memo(Ime);class Sz extends y.PureComponent{constructor(e){super(e),Ue(this,"registeredEvents",[]),Ue(this,"state",{drawingManager:null}),Ue(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),Lr(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(Ov(Ov({},this.props.options),{},{map:this.context}));this.registeredEvents=Dn({updaterMap:K_,eventMap:Y_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&(Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:K_,eventMap:Y_,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),Rn(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}Ue(Sz,"contextType",xn);function Z_(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,r)}return s}function _h(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Z_(Object(s),!0).forEach(function(r){Ue(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Z_(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}var Q_={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},X_={animation(t,e){t.setAnimation(e)},clickable(t,e){t.setClickable(e)},cursor(t,e){t.setCursor(e)},draggable(t,e){t.setDraggable(e)},icon(t,e){t.setIcon(e)},label(t,e){t.setLabel(e)},map(t,e){t.setMap(e)},opacity(t,e){t.setOpacity(e)},options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},shape(t,e){t.setShape(e)},title(t,e){t.setTitle(e)},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},Fv={};function Tme(t){var{position:e,options:s,clusterer:r,noClustererRedraw:i,children:a,draggable:o,visible:c,animation:d,clickable:h,cursor:g,icon:m,label:p,opacity:v,shape:j,title:N,zIndex:E,onClick:_,onDblClick:S,onDrag:C,onDragEnd:I,onDragStart:P,onMouseOut:L,onMouseOver:T,onMouseUp:M,onMouseDown:k,onRightClick:O,onClickableChanged:V,onCursorChanged:B,onAnimationChanged:Y,onDraggableChanged:z,onFlatChanged:G,onIconChanged:he,onPositionChanged:le,onShapeChanged:se,onTitleChanged:re,onVisibleChanged:me,onZindexChanged:Ce,onLoad:$,onUnmount:xe}=t,te=y.useContext(xn),[ae,ee]=y.useState(null),[de,pe]=y.useState(null),[Me,Le]=y.useState(null),[We,jt]=y.useState(null),[mt,ke]=y.useState(null),[yt,On]=y.useState(null),[zt,ce]=y.useState(null),[be,ze]=y.useState(null),[Pe,Je]=y.useState(null),[Ke,Nt]=y.useState(null),[dt,Dt]=y.useState(null),[At,qt]=y.useState(null),[Hn,er]=y.useState(null),[nn,Bt]=y.useState(null),[bn,rt]=y.useState(null),[qn,Vn]=y.useState(null),[$n,aa]=y.useState(null),[ao,Vi]=y.useState(null),[Fn,oa]=y.useState(null),[la,Yl]=y.useState(null),[Ar,oo]=y.useState(null),[zs,Ma]=y.useState(null);y.useEffect(()=>{ae!==null&&ae.setMap(te)},[te]),y.useEffect(()=>{typeof s<"u"&&ae!==null&&ae.setOptions(s)},[ae,s]),y.useEffect(()=>{typeof o<"u"&&ae!==null&&ae.setDraggable(o)},[ae,o]),y.useEffect(()=>{e&&ae!==null&&ae.setPosition(e)},[ae,e]),y.useEffect(()=>{typeof c<"u"&&ae!==null&&ae.setVisible(c)},[ae,c]),y.useEffect(()=>{ae==null||ae.setAnimation(d)},[ae,d]),y.useEffect(()=>{ae&&h!==void 0&&ae.setClickable(h)},[ae,h]),y.useEffect(()=>{ae&&g!==void 0&&ae.setCursor(g)},[ae,g]),y.useEffect(()=>{ae&&m!==void 0&&ae.setIcon(m)},[ae,m]),y.useEffect(()=>{ae&&p!==void 0&&ae.setLabel(p)},[ae,p]),y.useEffect(()=>{ae&&v!==void 0&&ae.setOpacity(v)},[ae,v]),y.useEffect(()=>{ae&&j!==void 0&&ae.setShape(j)},[ae,j]),y.useEffect(()=>{ae&&N!==void 0&&ae.setTitle(N)},[ae,N]),y.useEffect(()=>{ae&&E!==void 0&&ae.setZIndex(E)},[ae,E]),y.useEffect(()=>{ae&&S&&(de!==null&&google.maps.event.removeListener(de),pe(google.maps.event.addListener(ae,"dblclick",S)))},[S]),y.useEffect(()=>{ae&&I&&(Me!==null&&google.maps.event.removeListener(Me),Le(google.maps.event.addListener(ae,"dragend",I)))},[I]),y.useEffect(()=>{ae&&P&&(We!==null&&google.maps.event.removeListener(We),jt(google.maps.event.addListener(ae,"dragstart",P)))},[P]),y.useEffect(()=>{ae&&k&&(mt!==null&&google.maps.event.removeListener(mt),ke(google.maps.event.addListener(ae,"mousedown",k)))},[k]),y.useEffect(()=>{ae&&L&&(yt!==null&&google.maps.event.removeListener(yt),On(google.maps.event.addListener(ae,"mouseout",L)))},[L]),y.useEffect(()=>{ae&&T&&(zt!==null&&google.maps.event.removeListener(zt),ce(google.maps.event.addListener(ae,"mouseover",T)))},[T]),y.useEffect(()=>{ae&&M&&(be!==null&&google.maps.event.removeListener(be),ze(google.maps.event.addListener(ae,"mouseup",M)))},[M]),y.useEffect(()=>{ae&&O&&(Pe!==null&&google.maps.event.removeListener(Pe),Je(google.maps.event.addListener(ae,"rightclick",O)))},[O]),y.useEffect(()=>{ae&&_&&(Ke!==null&&google.maps.event.removeListener(Ke),Nt(google.maps.event.addListener(ae,"click",_)))},[_]),y.useEffect(()=>{ae&&C&&(dt!==null&&google.maps.event.removeListener(dt),Dt(google.maps.event.addListener(ae,"drag",C)))},[C]),y.useEffect(()=>{ae&&V&&(At!==null&&google.maps.event.removeListener(At),qt(google.maps.event.addListener(ae,"clickable_changed",V)))},[V]),y.useEffect(()=>{ae&&B&&(Hn!==null&&google.maps.event.removeListener(Hn),er(google.maps.event.addListener(ae,"cursor_changed",B)))},[B]),y.useEffect(()=>{ae&&Y&&(nn!==null&&google.maps.event.removeListener(nn),Bt(google.maps.event.addListener(ae,"animation_changed",Y)))},[Y]),y.useEffect(()=>{ae&&z&&(bn!==null&&google.maps.event.removeListener(bn),rt(google.maps.event.addListener(ae,"draggable_changed",z)))},[z]),y.useEffect(()=>{ae&&G&&(qn!==null&&google.maps.event.removeListener(qn),Vn(google.maps.event.addListener(ae,"flat_changed",G)))},[G]),y.useEffect(()=>{ae&&he&&($n!==null&&google.maps.event.removeListener($n),aa(google.maps.event.addListener(ae,"icon_changed",he)))},[he]),y.useEffect(()=>{ae&&le&&(ao!==null&&google.maps.event.removeListener(ao),Vi(google.maps.event.addListener(ae,"position_changed",le)))},[le]),y.useEffect(()=>{ae&&se&&(Fn!==null&&google.maps.event.removeListener(Fn),oa(google.maps.event.addListener(ae,"shape_changed",se)))},[se]),y.useEffect(()=>{ae&&re&&(la!==null&&google.maps.event.removeListener(la),Yl(google.maps.event.addListener(ae,"title_changed",re)))},[re]),y.useEffect(()=>{ae&&me&&(Ar!==null&&google.maps.event.removeListener(Ar),oo(google.maps.event.addListener(ae,"visible_changed",me)))},[me]),y.useEffect(()=>{ae&&Ce&&(zs!==null&&google.maps.event.removeListener(zs),Ma(google.maps.event.addListener(ae,"zindex_changed",Ce)))},[Ce]),y.useEffect(()=>{var Fr=_h(_h(_h({},s||Fv),r?Fv:{map:te}),{},{position:e}),en=new google.maps.Marker(Fr);return r?r.addMarker(en,!!i):en.setMap(te),e&&en.setPosition(e),typeof c<"u"&&en.setVisible(c),typeof o<"u"&&en.setDraggable(o),typeof h<"u"&&en.setClickable(h),typeof g=="string"&&en.setCursor(g),m&&en.setIcon(m),typeof p<"u"&&en.setLabel(p),typeof v<"u"&&en.setOpacity(v),j&&en.setShape(j),typeof N=="string"&&en.setTitle(N),typeof E=="number"&&en.setZIndex(E),S&&pe(google.maps.event.addListener(en,"dblclick",S)),I&&Le(google.maps.event.addListener(en,"dragend",I)),P&&jt(google.maps.event.addListener(en,"dragstart",P)),k&&ke(google.maps.event.addListener(en,"mousedown",k)),L&&On(google.maps.event.addListener(en,"mouseout",L)),T&&ce(google.maps.event.addListener(en,"mouseover",T)),M&&ze(google.maps.event.addListener(en,"mouseup",M)),O&&Je(google.maps.event.addListener(en,"rightclick",O)),_&&Nt(google.maps.event.addListener(en,"click",_)),C&&Dt(google.maps.event.addListener(en,"drag",C)),V&&qt(google.maps.event.addListener(en,"clickable_changed",V)),B&&er(google.maps.event.addListener(en,"cursor_changed",B)),Y&&Bt(google.maps.event.addListener(en,"animation_changed",Y)),z&&rt(google.maps.event.addListener(en,"draggable_changed",z)),G&&Vn(google.maps.event.addListener(en,"flat_changed",G)),he&&aa(google.maps.event.addListener(en,"icon_changed",he)),le&&Vi(google.maps.event.addListener(en,"position_changed",le)),se&&oa(google.maps.event.addListener(en,"shape_changed",se)),re&&Yl(google.maps.event.addListener(en,"title_changed",re)),me&&oo(google.maps.event.addListener(en,"visible_changed",me)),Ce&&Ma(google.maps.event.addListener(en,"zindex_changed",Ce)),ee(en),$&&$(en),()=>{de!==null&&google.maps.event.removeListener(de),Me!==null&&google.maps.event.removeListener(Me),We!==null&&google.maps.event.removeListener(We),mt!==null&&google.maps.event.removeListener(mt),yt!==null&&google.maps.event.removeListener(yt),zt!==null&&google.maps.event.removeListener(zt),be!==null&&google.maps.event.removeListener(be),Pe!==null&&google.maps.event.removeListener(Pe),Ke!==null&&google.maps.event.removeListener(Ke),At!==null&&google.maps.event.removeListener(At),Hn!==null&&google.maps.event.removeListener(Hn),nn!==null&&google.maps.event.removeListener(nn),bn!==null&&google.maps.event.removeListener(bn),qn!==null&&google.maps.event.removeListener(qn),$n!==null&&google.maps.event.removeListener($n),ao!==null&&google.maps.event.removeListener(ao),la!==null&&google.maps.event.removeListener(la),Ar!==null&&google.maps.event.removeListener(Ar),zs!==null&&google.maps.event.removeListener(zs),xe&&xe(en),r?r.removeMarker(en,!!i):en&&en.setMap(null)}},[]);var Kl=y.useMemo(()=>a?y.Children.map(a,Fr=>{if(!y.isValidElement(Fr))return Fr;var en=Fr;return y.cloneElement(en,{anchor:ae})}):null,[a,ae]);return n.jsx(n.Fragment,{children:Kl})||null}y.memo(Tme);class DS extends y.PureComponent{constructor(){super(...arguments),Ue(this,"registeredEvents",[])}componentDidMount(){var e=this;return xz(function*(){var s=_h(_h(_h({},e.props.options||Fv),e.props.clusterer?Fv:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(s),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=Dn({updaterMap:X_,eventMap:Q_,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&(Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:X_,eventMap:Q_,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),Rn(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?y.Children.map(this.props.children,s=>{if(!y.isValidElement(s))return s;var r=s;return y.cloneElement(r,{anchor:this.marker})}):null;return e||null}}Ue(DS,"contextType",xn);var Mme=function(){function t(e,s){e.getClusterer().extend(t,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=s,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return t.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},t.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},t.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var s=this.cluster.getClusterer();if(google.maps.event.trigger(s,"click",this.cluster),google.maps.event.trigger(s,"clusterclick",this.cluster),s.getZoomOnClick()){var r=s.getMaxZoom(),i=this.cluster.getBounds(),a=s.getMap();a!==null&&"fitBounds"in a&&a.fitBounds(i),this.timeOut=window.setTimeout(function(){var o=s.getMap();if(o!==null){"fitBounds"in o&&o.fitBounds(i);var c=o.getZoom()||0;r!==null&&c>r&&o.setZoom(r+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},t.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},t.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},t.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var s=this.getMap();s!==null&&(this.boundsChangedListener=google.maps.event.addListener(s,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},t.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},t.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},t.prototype.show=function(){var e,s,r,i,a,o;if(this.div&&this.center){var c=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,d=this.backgroundPosition.split(" "),h=parseInt(((e=d[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),g=parseInt(((s=d[1])===null||s===void 0?void 0:s.replace(/^\s+|\s+$/g,""))||"0",10),m=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(m!==null?"".concat(m.y,"px"):"0","; left: ").concat(m!==null?"".concat(m.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var p=document.createElement("img");p.alt=c,p.src=this.url,p.width=this.width,p.height=this.height,p.setAttribute("style","position: absolute; top: ".concat(g,"px; left: ").concat(h,"px")),this.cluster.getClusterer().enableRetinaIcons||(p.style.clip="rect(-".concat(g,"px, -").concat(h+this.width,"px, -").concat(g+this.height,", -").concat(h,")"));var v=document.createElement("div");v.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((r=this.sums)===null||r===void 0)&&r.text&&(v.innerText="".concat((i=this.sums)===null||i===void 0?void 0:i.text)),!((a=this.sums)===null||a===void 0)&&a.html&&(v.innerHTML="".concat((o=this.sums)===null||o===void 0?void 0:o.html)),this.div.innerHTML="",this.div.appendChild(p),this.div.appendChild(v),this.div.title=c,this.div.style.display=""}this.visible=!0},t.prototype.useStyle=function(e){this.sums=e;var s=this.cluster.getClusterer().getStyles(),r=s[Math.min(s.length-1,Math.max(0,e.index-1))];r&&(this.url=r.url,this.height=r.height,this.width=r.width,r.className&&(this.className="".concat(this.clusterClassName," ").concat(r.className)),this.anchorText=r.anchorText||[0,0],this.anchorIcon=r.anchorIcon||[this.height/2,this.width/2],this.textColor=r.textColor||"black",this.textSize=r.textSize||11,this.textDecoration=r.textDecoration||"none",this.fontWeight=r.fontWeight||"bold",this.fontStyle=r.fontStyle||"normal",this.fontFamily=r.fontFamily||"Arial,sans-serif",this.backgroundPosition=r.backgroundPosition||"0 0")},t.prototype.setCenter=function(e){this.center=e},t.prototype.getPosFromLatLng=function(e){var s=this.getProjection().fromLatLngToDivPixel(e);return s!==null&&(s.x-=this.anchorIcon[1],s.y-=this.anchorIcon[0]),s},t}(),Dme=function(){function t(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new Mme(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return t.prototype.getSize=function(){return this.markers.length},t.prototype.getMarkers=function(){return this.markers},t.prototype.getCenter=function(){return this.center},t.prototype.getMap=function(){return this.map},t.prototype.getClusterer=function(){return this.markerClusterer},t.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),s=this.getMarkers(),r=0,i=s;r<i.length;r++){var a=i[r],o=a.getPosition();o&&e.extend(o)}return e},t.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},t.prototype.addMarker=function(e){var s;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var r=e.getPosition();if(r){var i=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(i-1)+r.lat())/i,(this.center.lng()*(i-1)+r.lng())/i),this.calculateBounds()}}}else{var r=e.getPosition();r&&(this.center=r,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var a=this.markers.length,o=this.markerClusterer.getMaxZoom(),c=(s=this.map)===null||s===void 0?void 0:s.getZoom();if(o!==null&&typeof c<"u"&&c>o)e.getMap()!==this.map&&e.setMap(this.map);else if(a<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(a===this.minClusterSize)for(var d=0,h=this.markers;d<h.length;d++){var g=h[d];g.setMap(null)}else e.setMap(null);return!0},t.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var s=e.getPosition();if(s)return this.bounds.contains(s)}return!1},t.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},t.prototype.updateIcon=function(){var e,s=this.markers.length,r=this.markerClusterer.getMaxZoom(),i=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(r!==null&&typeof i<"u"&&i>r){this.clusterIcon.hide();return}if(s<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},t.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var s=0;s<this.markers.length;s++)if(e===this.markers[s])return!0;return!1},t}();function kme(t,e){var s=t.length,r=s.toString().length,i=Math.min(r,e);return{text:s.toString(),index:i,title:""}}var Pme=2e3,Rme=500,Lme="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",Ome="png",Fme=[53,56,66,78,90],Bme="cluster",Az=function(){function t(e,s,r){s===void 0&&(s=[]),r===void 0&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(t,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,r.zoomOnClick!==void 0&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,r.averageCenter!==void 0&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,r.ignoreHidden!==void 0&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,r.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||Lme,this.imageExtension=r.imageExtension||Ome,this.imageSizes=r.imageSizes||Fme,this.calculator=r.calculator||kme,this.batchSize=r.batchSize||Pme,this.batchSizeIE=r.batchSizeIE||Rme,this.clusterClass=r.clusterClass||Bme,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(s,!0),this.setMap(e)}return t.prototype.onZoomChanged=function(){var e,s;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((s=this.getMap())===null||s===void 0?void 0:s.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},t.prototype.onIdle=function(){this.redraw()},t.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},t.prototype.onRemove=function(){for(var e=0,s=this.markers;e<s.length;e++){var r=s[e];r.getMap()!==this.activeMap&&r.setMap(this.activeMap)}for(var i=0,a=this.clusters;i<a.length;i++){var o=a[i];o.remove()}this.clusters=[];for(var c=0,d=this.listeners;c<d.length;c++){var h=d[c];google.maps.event.removeListener(h)}this.listeners=[],this.activeMap=null,this.ready=!1},t.prototype.draw=function(){},t.prototype.getMap=function(){return null},t.prototype.getPanes=function(){return null},t.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},t.prototype.setMap=function(){},t.prototype.addListener=function(){return{remove:function(){}}},t.prototype.bindTo=function(){},t.prototype.get=function(){},t.prototype.notify=function(){},t.prototype.set=function(){},t.prototype.setValues=function(){},t.prototype.unbind=function(){},t.prototype.unbindAll=function(){},t.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},t.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),s=new google.maps.LatLngBounds,r=0,i=e;r<i.length;r++){var a=i[r],o=a.getPosition();o&&s.extend(o)}var c=this.getMap();c!==null&&"fitBounds"in c&&c.fitBounds(s)},t.prototype.getGridSize=function(){return this.gridSize},t.prototype.setGridSize=function(e){this.gridSize=e},t.prototype.getMinimumClusterSize=function(){return this.minClusterSize},t.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.setMaxZoom=function(e){this.maxZoom=e},t.prototype.getStyles=function(){return this.styles},t.prototype.setStyles=function(e){this.styles=e},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.getZoomOnClick=function(){return this.zoomOnClick},t.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},t.prototype.getAverageCenter=function(){return this.averageCenter},t.prototype.setAverageCenter=function(e){this.averageCenter=e},t.prototype.getIgnoreHidden=function(){return this.ignoreHidden},t.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},t.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},t.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},t.prototype.getImageExtension=function(){return this.imageExtension},t.prototype.setImageExtension=function(e){this.imageExtension=e},t.prototype.getImagePath=function(){return this.imagePath},t.prototype.setImagePath=function(e){this.imagePath=e},t.prototype.getImageSizes=function(){return this.imageSizes},t.prototype.setImageSizes=function(e){this.imageSizes=e},t.prototype.getCalculator=function(){return this.calculator},t.prototype.setCalculator=function(e){this.calculator=e},t.prototype.getBatchSizeIE=function(){return this.batchSizeIE},t.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},t.prototype.getClusterClass=function(){return this.clusterClass},t.prototype.setClusterClass=function(e){this.clusterClass=e},t.prototype.getMarkers=function(){return this.markers},t.prototype.getTotalMarkers=function(){return this.markers.length},t.prototype.getClusters=function(){return this.clusters},t.prototype.getTotalClusters=function(){return this.clusters.length},t.prototype.addMarker=function(e,s){this.pushMarkerTo(e),s||this.redraw()},t.prototype.addMarkers=function(e,s){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];i&&this.pushMarkerTo(i)}s||this.redraw()},t.prototype.pushMarkerTo=function(e){var s=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){s.ready&&(e.isAdded=!1,s.repaint())}),e.isAdded=!1,this.markers.push(e)},t.prototype.removeMarker_=function(e){var s=-1;if(this.markers.indexOf)s=this.markers.indexOf(e);else for(var r=0;r<this.markers.length;r++)if(e===this.markers[r]){s=r;break}return s===-1?!1:(e.setMap(null),this.markers.splice(s,1),!0)},t.prototype.removeMarker=function(e,s){var r=this.removeMarker_(e);return!s&&r&&this.repaint(),r},t.prototype.removeMarkers=function(e,s){for(var r=!1,i=0,a=e;i<a.length;i++){var o=a[i];r=r||this.removeMarker_(o)}return!s&&r&&this.repaint(),r},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},t.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var r=0,i=e;r<i.length;r++){var a=i[r];a.remove()}},0)},t.prototype.getExtendedBounds=function(e){var s=this.getProjection(),r=s.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));r!==null&&(r.x+=this.gridSize,r.y-=this.gridSize);var i=s.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(i!==null&&(i.x-=this.gridSize,i.y+=this.gridSize),r!==null){var a=s.fromDivPixelToLatLng(r);a!==null&&e.extend(a)}if(i!==null){var o=s.fromDivPixelToLatLng(i);o!==null&&e.extend(o)}return e},t.prototype.redraw=function(){this.createClusters(0)},t.prototype.resetViewport=function(e){for(var s=0,r=this.clusters;s<r.length;s++){var i=r[s];i.remove()}this.clusters=[];for(var a=0,o=this.markers;a<o.length;a++){var c=o[a];c.isAdded=!1,e&&c.setMap(null)}},t.prototype.distanceBetweenPoints=function(e,s){var r=6371,i=(s.lat()-e.lat())*Math.PI/180,a=(s.lng()-e.lng())*Math.PI/180,o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(s.lat()*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return r*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},t.prototype.isMarkerInBounds=function(e,s){var r=e.getPosition();return r?s.contains(r):!1},t.prototype.addToClosestCluster=function(e){for(var s,r=4e4,i=null,a=0,o=this.clusters;a<o.length;a++){var c=o[a];s=c;var d=s.getCenter(),h=e.getPosition();if(d&&h){var g=this.distanceBetweenPoints(d,h);g<r&&(r=g,i=s)}}i&&i.isMarkerInClusterBounds(e)?i.addMarker(e):(s=new Dme(this),s.addMarker(e),this.clusters.push(s))},t.prototype.createClusters=function(e){var s=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var r=this.getMap(),i=r!==null&&("getBounds"in r)?r.getBounds():null,a=(r==null?void 0:r.getZoom())||0,o=a>3?new google.maps.LatLngBounds(i==null?void 0:i.getSouthWest(),i==null?void 0:i.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),c=this.getExtendedBounds(o),d=Math.min(e+this.batchSize,this.markers.length),h=e;h<d;h++){var g=this.markers[h];g&&!g.isAdded&&this.isMarkerInBounds(g,c)&&(!this.ignoreHidden||this.ignoreHidden&&g.getVisible())&&this.addToClosestCluster(g)}if(d<this.markers.length)this.timerRefStatic=window.setTimeout(function(){s.createClusters(d)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var m=0,p=this.clusters;m<p.length;m++){var v=p[m];v.updateIcon()}}}},t.prototype.extend=function(e,s){return(function(i){for(var a in i.prototype){var o=a;this.prototype[o]=i.prototype[o]}return this}).apply(e,[s])},t}();function J_(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,r)}return s}function zme(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?J_(Object(s),!0).forEach(function(r){Ue(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):J_(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}var za={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},ts={averageCenter(t,e){t.setAverageCenter(e)},batchSizeIE(t,e){t.setBatchSizeIE(e)},calculator(t,e){t.setCalculator(e)},clusterClass(t,e){t.setClusterClass(e)},enableRetinaIcons(t,e){t.setEnableRetinaIcons(e)},gridSize(t,e){t.setGridSize(e)},ignoreHidden(t,e){t.setIgnoreHidden(e)},imageExtension(t,e){t.setImageExtension(e)},imagePath(t,e){t.setImagePath(e)},imageSizes(t,e){t.setImageSizes(e)},maxZoom(t,e){t.setMaxZoom(e)},minimumClusterSize(t,e){t.setMinimumClusterSize(e)},styles(t,e){t.setStyles(e)},title(t,e){t.setTitle(e)},zoomOnClick(t,e){t.setZoomOnClick(e)}},Vme={};function $me(t){var{children:e,options:s,averageCenter:r,batchSizeIE:i,calculator:a,clusterClass:o,enableRetinaIcons:c,gridSize:d,ignoreHidden:h,imageExtension:g,imagePath:m,imageSizes:p,maxZoom:v,minimumClusterSize:j,styles:N,title:E,zoomOnClick:_,onClick:S,onClusteringBegin:C,onClusteringEnd:I,onMouseOver:P,onMouseOut:L,onLoad:T,onUnmount:M}=t,[k,O]=y.useState(null),V=y.useContext(xn),[B,Y]=y.useState(null),[z,G]=y.useState(null),[he,le]=y.useState(null),[se,re]=y.useState(null),[me,Ce]=y.useState(null);return y.useEffect(()=>{k&&L&&(se!==null&&google.maps.event.removeListener(se),re(google.maps.event.addListener(k,za.onMouseOut,L)))},[L]),y.useEffect(()=>{k&&P&&(me!==null&&google.maps.event.removeListener(me),Ce(google.maps.event.addListener(k,za.onMouseOver,P)))},[P]),y.useEffect(()=>{k&&S&&(B!==null&&google.maps.event.removeListener(B),Y(google.maps.event.addListener(k,za.onClick,S)))},[S]),y.useEffect(()=>{k&&C&&(z!==null&&google.maps.event.removeListener(z),G(google.maps.event.addListener(k,za.onClusteringBegin,C)))},[C]),y.useEffect(()=>{k&&I&&(he!==null&&google.maps.event.removeListener(he),G(google.maps.event.addListener(k,za.onClusteringEnd,I)))},[I]),y.useEffect(()=>{typeof r<"u"&&k!==null&&ts.averageCenter(k,r)},[k,r]),y.useEffect(()=>{typeof i<"u"&&k!==null&&ts.batchSizeIE(k,i)},[k,i]),y.useEffect(()=>{typeof a<"u"&&k!==null&&ts.calculator(k,a)},[k,a]),y.useEffect(()=>{typeof o<"u"&&k!==null&&ts.clusterClass(k,o)},[k,o]),y.useEffect(()=>{typeof c<"u"&&k!==null&&ts.enableRetinaIcons(k,c)},[k,c]),y.useEffect(()=>{typeof d<"u"&&k!==null&&ts.gridSize(k,d)},[k,d]),y.useEffect(()=>{typeof h<"u"&&k!==null&&ts.ignoreHidden(k,h)},[k,h]),y.useEffect(()=>{typeof g<"u"&&k!==null&&ts.imageExtension(k,g)},[k,g]),y.useEffect(()=>{typeof m<"u"&&k!==null&&ts.imagePath(k,m)},[k,m]),y.useEffect(()=>{typeof p<"u"&&k!==null&&ts.imageSizes(k,p)},[k,p]),y.useEffect(()=>{typeof v<"u"&&k!==null&&ts.maxZoom(k,v)},[k,v]),y.useEffect(()=>{typeof j<"u"&&k!==null&&ts.minimumClusterSize(k,j)},[k,j]),y.useEffect(()=>{typeof N<"u"&&k!==null&&ts.styles(k,N)},[k,N]),y.useEffect(()=>{typeof E<"u"&&k!==null&&ts.title(k,E)},[k,E]),y.useEffect(()=>{typeof _<"u"&&k!==null&&ts.zoomOnClick(k,_)},[k,_]),y.useEffect(()=>{if(V){var $=zme({},s||Vme),xe=new Az(V,[],$);return r&&ts.averageCenter(xe,r),i&&ts.batchSizeIE(xe,i),a&&ts.calculator(xe,a),o&&ts.clusterClass(xe,o),c&&ts.enableRetinaIcons(xe,c),d&&ts.gridSize(xe,d),h&&ts.ignoreHidden(xe,h),g&&ts.imageExtension(xe,g),m&&ts.imagePath(xe,m),p&&ts.imageSizes(xe,p),v&&ts.maxZoom(xe,v),j&&ts.minimumClusterSize(xe,j),N&&ts.styles(xe,N),E&&ts.title(xe,E),_&&ts.zoomOnClick(xe,_),L&&re(google.maps.event.addListener(xe,za.onMouseOut,L)),P&&Ce(google.maps.event.addListener(xe,za.onMouseOver,P)),S&&Y(google.maps.event.addListener(xe,za.onClick,S)),C&&G(google.maps.event.addListener(xe,za.onClusteringBegin,C)),I&&le(google.maps.event.addListener(xe,za.onClusteringEnd,I)),O(xe),T&&T(xe),()=>{se!==null&&google.maps.event.removeListener(se),me!==null&&google.maps.event.removeListener(me),B!==null&&google.maps.event.removeListener(B),z!==null&&google.maps.event.removeListener(z),he!==null&&google.maps.event.removeListener(he),M&&M(xe)}}},[]),k!==null&&e(k)||null}y.memo($me);class Ez extends y.PureComponent{constructor(){super(...arguments),Ue(this,"registeredEvents",[]),Ue(this,"state",{markerClusterer:null}),Ue(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new Az(this.context,[],this.props.options);this.registeredEvents=Dn({updaterMap:ts,eventMap:za,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:ts,eventMap:za,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),Rn(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}Ue(Ez,"contextType",xn);function eI(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}var _z=function(){function t(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(t,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return t.prototype.createInfoBoxDiv=function(){var e=this,s=function(g){g.returnValue=!1,g.preventDefault&&g.preventDefault(),e.enableEventPropagation||eI(g)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var r=this.getPanes();if(r!==null&&r[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var i=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-i.left-i.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var a=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],o=0,c=a;o<c.length;o++){var d=c[o];this.eventListeners.push(google.maps.event.addListener(this.div,d,eI))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",s),google.maps.event.trigger(this,"domready")}},t.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},t.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},t.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},t.prototype.getCloseClickHandler=function(){return this.closeClickHandler},t.prototype.panBox=function(e){if(this.div&&!e){var s=this.getMap();if(s instanceof google.maps.Map){var r=0,i=0,a=s.getBounds();a&&!a.contains(this.position)&&s.setCenter(this.position);var o=s.getDiv(),c=o.offsetWidth,d=o.offsetHeight,h=this.pixelOffset.width,g=this.pixelOffset.height,m=this.div.offsetWidth,p=this.div.offsetHeight,v=this.infoBoxClearance.width,j=this.infoBoxClearance.height,N=this.getProjection(),E=N.fromLatLngToContainerPixel(this.position);E!==null&&(E.x<-h+v?r=E.x+h-v:E.x+m+h+v>c&&(r=E.x+m+h+v-c),this.alignBottom?E.y<-g+j+p?i=E.y+g-j-p:E.y+g+j>d&&(i=E.y+g+j-d):E.y<-g+j?i=E.y+g-j:E.y+p+g+j>d&&(i=E.y+p+g+j-d)),r===0&&i===0||s.panBy(r,i)}}},t.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(this.div.style[s]=e[s]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var r=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+r*100+')"',this.div.style.filter="alpha(opacity="+r*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},t.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var s=this.div.ownerDocument,r=s&&s.defaultView?s.defaultView.getComputedStyle(this.div,""):null;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var i=this.div.currentStyle;i&&(e.top=parseInt(i.borderTopWidth||"",10)||0,e.bottom=parseInt(i.borderBottomWidth||"",10)||0,e.left=parseInt(i.borderLeftWidth||"",10)||0,e.right=parseInt(i.borderRightWidth||"",10)||0)}return e},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),s=e.fromLatLngToDivPixel(this.position);s!==null&&(this.div.style.left=s.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(s.y+this.pixelOffset.height)+"px":this.div.style.top=s.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},t.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},t.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},t.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},t.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},t.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},t.prototype.getContent=function(){return this.content},t.prototype.getPosition=function(){return this.position},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},t.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},t.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},t.prototype.open=function(e,s){var r=this;s&&(this.position=s.getPosition(),this.moveListener=google.maps.event.addListener(s,"position_changed",function(){var i=s.getPosition();r.setPosition(i)}),this.mapListener=google.maps.event.addListener(s,"map_changed",function(){r.setMap(s.map)})),this.setMap(e),this.div&&this.panBox()},t.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,s=this.eventListeners;e<s.length;e++){var r=s[e];google.maps.event.removeListener(r)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},t.prototype.extend=function(e,s){return(function(i){for(var a in i.prototype)Object.prototype.hasOwnProperty.call(this,a)||(this.prototype[a]=i.prototype[a]);return this}).apply(e,[s])},t}(),Ume=["position"],Wme=["position"];function tI(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,r)}return s}function Bv(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?tI(Object(s),!0).forEach(function(r){Ue(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):tI(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}var nI={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},sI={options(t,e){t.setOptions(e)},position(t,e){e instanceof google.maps.LatLng?t.setPosition(e):t.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},Hme={};function qme(t){var{children:e,anchor:s,options:r,position:i,zIndex:a,onCloseClick:o,onDomReady:c,onContentChanged:d,onPositionChanged:h,onZindexChanged:g,onLoad:m,onUnmount:p}=t,v=y.useContext(xn),[j,N]=y.useState(null),[E,_]=y.useState(null),[S,C]=y.useState(null),[I,P]=y.useState(null),[L,T]=y.useState(null),[M,k]=y.useState(null),O=y.useRef(null);return y.useEffect(()=>{v&&j!==null&&(j.close(),s?j.open(v,s):j.getPosition()&&j.open(v))},[v,j,s]),y.useEffect(()=>{r&&j!==null&&j.setOptions(r)},[j,r]),y.useEffect(()=>{if(i&&j!==null){var V=i instanceof google.maps.LatLng?i:new google.maps.LatLng(i.lat,i.lng);j.setPosition(V)}},[i]),y.useEffect(()=>{typeof a=="number"&&j!==null&&j.setZIndex(a)},[a]),y.useEffect(()=>{j&&o&&(E!==null&&google.maps.event.removeListener(E),_(google.maps.event.addListener(j,"closeclick",o)))},[o]),y.useEffect(()=>{j&&c&&(S!==null&&google.maps.event.removeListener(S),C(google.maps.event.addListener(j,"domready",c)))},[c]),y.useEffect(()=>{j&&d&&(I!==null&&google.maps.event.removeListener(I),P(google.maps.event.addListener(j,"content_changed",d)))},[d]),y.useEffect(()=>{j&&h&&(L!==null&&google.maps.event.removeListener(L),T(google.maps.event.addListener(j,"position_changed",h)))},[h]),y.useEffect(()=>{j&&g&&(M!==null&&google.maps.event.removeListener(M),k(google.maps.event.addListener(j,"zindex_changed",g)))},[g]),y.useEffect(()=>{if(v){var V=r||Hme,{position:B}=V,Y=MS(V,Ume),z;B&&!(B instanceof google.maps.LatLng)&&(z=new google.maps.LatLng(B.lat,B.lng));var G=new _z(Bv(Bv({},Y),z?{position:z}:{}));O.current=document.createElement("div"),N(G),o&&_(google.maps.event.addListener(G,"closeclick",o)),c&&C(google.maps.event.addListener(G,"domready",c)),d&&P(google.maps.event.addListener(G,"content_changed",d)),h&&T(google.maps.event.addListener(G,"position_changed",h)),g&&k(google.maps.event.addListener(G,"zindex_changed",g)),G.setContent(O.current),s?G.open(v,s):G.getPosition()?G.open(v):Lr(!1,"You must provide either an anchor or a position prop for <InfoBox>."),m&&m(G)}return()=>{j!==null&&(E&&google.maps.event.removeListener(E),I&&google.maps.event.removeListener(I),S&&google.maps.event.removeListener(S),L&&google.maps.event.removeListener(L),M&&google.maps.event.removeListener(M),p&&p(j),j.close())}},[]),O.current?ra.createPortal(y.Children.only(e),O.current):null}y.memo(qme);class Iz extends y.PureComponent{constructor(){super(...arguments),Ue(this,"registeredEvents",[]),Ue(this,"containerElement",null),Ue(this,"state",{infoBox:null}),Ue(this,"open",(e,s)=>{s?this.context!==null&&e.open(this.context,s):e.getPosition()?this.context!==null&&e.open(this.context):Lr(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),Ue(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:s}=e,r=MS(e,Wme),i;s&&!(s instanceof google.maps.LatLng)&&(i=new google.maps.LatLng(s.lat,s.lng));var a=new _z(Bv(Bv({},r),i?{position:i}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=Dn({updaterMap:sI,eventMap:nI,prevProps:{},nextProps:this.props,instance:a}),this.setState({infoBox:a},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:s}=this.state;s!==null&&(Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:sI,eventMap:nI,prevProps:e,nextProps:this.props,instance:s}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:s}=this.state;s!==null&&(e&&e(s),Rn(this.registeredEvents),s.close())}render(){return this.containerElement?ra.createPortal(y.Children.only(this.props.children),this.containerElement):null}}Ue(Iz,"contextType",xn);var Xw,rI;function Gme(){return rI||(rI=1,Xw=function t(e,s){if(e===s)return!0;if(e&&s&&typeof e=="object"&&typeof s=="object"){if(e.constructor!==s.constructor)return!1;var r,i,a;if(Array.isArray(e)){if(r=e.length,r!=s.length)return!1;for(i=r;i--!==0;)if(!t(e[i],s[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(s).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(s,a[i]))return!1;for(i=r;i--!==0;){var o=a[i];if(!t(e[o],s[o]))return!1}return!0}return e!==e&&s!==s}),Xw}var Yme=Gme(),iI=fz(Yme),aI=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Jw=1,pf=8;class kS{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[s,r]=new Uint8Array(e,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");var i=r>>4;if(i!==Jw)throw new Error("Got v".concat(i," data when expected v").concat(Jw,"."));var a=aI[r&15];if(!a)throw new Error("Unrecognized array type.");var[o]=new Uint16Array(e,2,1),[c]=new Uint32Array(e,4,1);return new kS(c,o,a,e)}constructor(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var a=aI.indexOf(this.ArrayType),o=e*2*this.ArrayType.BYTES_PER_ELEMENT,c=e*this.IndexArrayType.BYTES_PER_ELEMENT,d=(8-c%8)%8;if(a<0)throw new Error("Unexpected typed array class: ".concat(r,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,pf,e),this.coords=new this.ArrayType(this.data,pf+c+d,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(pf+o+c+d),this.ids=new this.IndexArrayType(this.data,pf,e),this.coords=new this.ArrayType(this.data,pf+c+d,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(Jw<<4)+a]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=e)}add(e,s){var r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=s,r}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return wN(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,s,r,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:a,coords:o,nodeSize:c}=this,d=[0,a.length-1,0],h=[];d.length;){var g=d.pop()||0,m=d.pop()||0,p=d.pop()||0;if(m-p<=c){for(var v=p;v<=m;v++){var j=o[2*v],N=o[2*v+1];j>=e&&j<=r&&N>=s&&N<=i&&h.push(a[v])}continue}var E=p+m>>1,_=o[2*E],S=o[2*E+1];_>=e&&_<=r&&S>=s&&S<=i&&h.push(a[E]),(g===0?e<=_:s<=S)&&(d.push(p),d.push(E-1),d.push(1-g)),(g===0?r>=_:i>=S)&&(d.push(E+1),d.push(m),d.push(1-g))}return h}within(e,s,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:i,coords:a,nodeSize:o}=this,c=[0,i.length-1,0],d=[],h=r*r;c.length;){var g=c.pop()||0,m=c.pop()||0,p=c.pop()||0;if(m-p<=o){for(var v=p;v<=m;v++)oI(a[2*v],a[2*v+1],e,s)<=h&&d.push(i[v]);continue}var j=p+m>>1,N=a[2*j],E=a[2*j+1];oI(N,E,e,s)<=h&&d.push(i[j]),(g===0?e-r<=N:s-r<=E)&&(c.push(p),c.push(j-1),c.push(1-g)),(g===0?e+r>=N:s+r>=E)&&(c.push(j+1),c.push(m),c.push(1-g))}return d}}function wN(t,e,s,r,i,a){if(!(i-r<=s)){var o=r+i>>1;Tz(t,e,o,r,i,a),wN(t,e,s,r,o-1,1-a),wN(t,e,s,o+1,i,1-a)}}function Tz(t,e,s,r,i,a){for(;i>r;){if(i-r>600){var o=i-r+1,c=s-r+1,d=Math.log(o),h=.5*Math.exp(2*d/3),g=.5*Math.sqrt(d*h*(o-h)/o)*(c-o/2<0?-1:1),m=Math.max(r,Math.floor(s-c*h/o+g)),p=Math.min(i,Math.floor(s+(o-c)*h/o+g));Tz(t,e,s,m,p,a)}var v=e[2*s+a],j=r,N=i;for(gf(t,e,r,s),e[2*i+a]>v&&gf(t,e,r,i);j<N;){for(gf(t,e,j,N),j++,N--;e[2*j+a]<v;)j++;for(;e[2*N+a]>v;)N--}e[2*r+a]===v?gf(t,e,r,N):(N++,gf(t,e,N,i)),N<=s&&(r=N+1),s<=N&&(i=N-1)}}function gf(t,e,s,r){ej(t,s,r),ej(e,2*s,2*r),ej(e,2*s+1,2*r+1)}function ej(t,e,s){var r=t[e];t[e]=t[s],t[s]=r}function oI(t,e,s,r){var i=t-s,a=e-r;return i*i+a*a}var Kme={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},lI=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1)),wd=2,uc=3,tj=4,lc=5,Mz=6;class Zme{constructor(e){this.options=Object.assign(Object.create(Kme),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:s,minZoom:r,maxZoom:i}=this.options;s&&console.time("total time");var a="prepare ".concat(e.length," points");s&&console.time(a),this.points=e;for(var o=[],c=0;c<e.length;c++){var d=e[c];if(d.geometry){var[h,g]=d.geometry.coordinates,m=lI(Ex(h)),p=lI(_x(g));o.push(m,p,1/0,c,-1,1),this.options.reduce&&o.push(0)}}var v=this.trees[i+1]=this._createTree(o);s&&console.timeEnd(a);for(var j=i;j>=r;j--){var N=+Date.now();v=this.trees[j]=this._createTree(this._cluster(v,j)),s&&console.log("z%d: %d clusters in %dms",j,v.numItems,+Date.now()-N)}return s&&console.timeEnd("total time"),this}getClusters(e,s){var r=((e[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[1])),a=e[2]===180?180:((e[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,a=180;else if(r>a){var c=this.getClusters([r,i,180,o],s),d=this.getClusters([-180,i,a,o],s);return c.concat(d)}var h=this.trees[this._limitZoom(s)],g=h.range(Ex(r),_x(o),Ex(a),_x(i)),m=h.data,p=[];for(var v of g){var j=this.stride*v;p.push(m[j+lc]>1?cI(m,j,this.clusterProps):this.points[m[j+uc]])}return p}getChildren(e){var s=this._getOriginId(e),r=this._getOriginZoom(e),i="No cluster with the specified id.",a=this.trees[r];if(!a)throw new Error(i);var o=a.data;if(s*this.stride>=o.length)throw new Error(i);var c=this.options.radius/(this.options.extent*Math.pow(2,r-1)),d=o[s*this.stride],h=o[s*this.stride+1],g=a.within(d,h,c),m=[];for(var p of g){var v=p*this.stride;o[v+tj]===e&&m.push(o[v+lc]>1?cI(o,v,this.clusterProps):this.points[o[v+uc]])}if(m.length===0)throw new Error(i);return m}getLeaves(e,s,r){s=s||10,r=r||0;var i=[];return this._appendLeaves(i,e,s,r,0),i}getTile(e,s,r){var i=this.trees[this._limitZoom(e)],a=Math.pow(2,e),{extent:o,radius:c}=this.options,d=c/o,h=(r-d)/a,g=(r+1+d)/a,m={features:[]};return this._addTileFeatures(i.range((s-d)/a,h,(s+1+d)/a,g),i.data,s,r,a,m),s===0&&this._addTileFeatures(i.range(1-d/a,h,1,g),i.data,a,r,a,m),s===a-1&&this._addTileFeatures(i.range(0,h,d/a,g),i.data,-1,r,a,m),m.features.length?m:null}getClusterExpansionZoom(e){for(var s=this._getOriginZoom(e)-1;s<=this.options.maxZoom;){var r=this.getChildren(e);if(s++,r.length!==1)break;e=r[0].properties.cluster_id}return s}_appendLeaves(e,s,r,i,a){var o=this.getChildren(s);for(var c of o){var d=c.properties;if(d&&d.cluster?a+d.point_count<=i?a+=d.point_count:a=this._appendLeaves(e,d.cluster_id,r,i,a):a<i?a++:e.push(c),e.length===r)break}return a}_createTree(e){for(var s=new kS(e.length/this.stride|0,this.options.nodeSize,Float32Array),r=0;r<e.length;r+=this.stride)s.add(e[r],e[r+1]);return s.finish(),s.data=e,s}_addTileFeatures(e,s,r,i,a,o){for(var c of e){var d=c*this.stride,h=s[d+lc]>1,g=void 0,m=void 0,p=void 0;if(h)g=Dz(s,d,this.clusterProps),m=s[d],p=s[d+1];else{var v=this.points[s[d+uc]];g=v.properties;var[j,N]=v.geometry.coordinates;m=Ex(j),p=_x(N)}var E={type:1,geometry:[[Math.round(this.options.extent*(m*a-r)),Math.round(this.options.extent*(p*a-i))]],tags:g},_=void 0;h||this.options.generateId?_=s[d+uc]:_=this.points[s[d+uc]].id,_!==void 0&&(E.id=_),o.features.push(E)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,s){for(var{radius:r,extent:i,reduce:a,minPoints:o}=this.options,c=r/(i*Math.pow(2,s)),d=e.data,h=[],g=this.stride,m=0;m<d.length;m+=g)if(!(d[m+wd]<=s)){d[m+wd]=s;var p=d[m],v=d[m+1],j=e.within(d[m],d[m+1],c),N=d[m+lc],E=N;for(var _ of j){var S=_*g;d[S+wd]>s&&(E+=d[S+lc])}if(E>N&&E>=o){var C=p*N,I=v*N,P=void 0,L=-1,T=((m/g|0)<<5)+(s+1)+this.points.length;for(var M of j){var k=M*g;if(!(d[k+wd]<=s)){d[k+wd]=s;var O=d[k+lc];C+=d[k]*O,I+=d[k+1]*O,d[k+tj]=T,a&&(P||(P=this._map(d,m,!0),L=this.clusterProps.length,this.clusterProps.push(P)),a(P,this._map(d,k)))}}d[m+tj]=T,h.push(C/E,I/E,1/0,T,-1,E),a&&h.push(L)}else{for(var V=0;V<g;V++)h.push(d[m+V]);if(E>1)for(var B of j){var Y=B*g;if(!(d[Y+wd]<=s)){d[Y+wd]=s;for(var z=0;z<g;z++)h.push(d[Y+z])}}}}return h}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,s,r){if(e[s+lc]>1){var i=this.clusterProps[e[s+Mz]];return r?Object.assign({},i):i}var a=this.points[e[s+uc]].properties,o=this.options.map(a);return r&&o===a?Object.assign({},o):o}}function cI(t,e,s){return{type:"Feature",id:t[e+uc],properties:Dz(t,e,s),geometry:{type:"Point",coordinates:[Qme(t[e]),Xme(t[e+1])]}}}function Dz(t,e,s){var r=t[e+lc],i=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?"".concat(Math.round(r/100)/10,"k"):r,a=t[e+Mz],o=a===-1?{}:Object.assign({},s[a]);return Object.assign(o,{cluster:!0,cluster_id:t[e+uc],point_count:r,point_count_abbreviated:i})}function Ex(t){return t/360+.5}function _x(t){var e=Math.sin(t*Math.PI/180),s=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return s<0?0:s>1?1:s}function Qme(t){return(t-.5)*360}function Xme(t){var e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Jme(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s}class ya{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,s){this.isAdvancedMarker(e)?e.map=s:e.setMap(s)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class jN{constructor(e){var{markers:s,position:r}=e;this.markers=s,r&&(r instanceof google.maps.LatLng?this._position=r:this._position=new google.maps.LatLng(r))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var s of this.markers)e.extend(ya.getPosition(s));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>ya.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(ya.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class efe{constructor(e){var{maxZoom:s=16}=e;this.maxZoom=s}noop(e){var{markers:s}=e;return tfe(s)}}var tfe=t=>{var e=t.map(s=>new jN({position:ya.getPosition(s),markers:[s]}));return e};class nfe extends efe{constructor(e){var{maxZoom:s,radius:r=60}=e,i=Jme(e,["maxZoom","radius"]);super({maxZoom:s}),this.state={zoom:-1},this.superCluster=new Zme(Object.assign({maxZoom:this.maxZoom,radius:r},i))}calculate(e){var s=!1,r={zoom:e.map.getZoom()};if(!iI(e.markers,this.markers)){s=!0,this.markers=[...e.markers];var i=this.markers.map(a=>{var o=ya.getPosition(a),c=[o.lng(),o.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:c},properties:{marker:a}}});this.superCluster.load(i)}return s||(this.state.zoom<=this.maxZoom||r.zoom<=this.maxZoom)&&(s=!iI(this.state,r)),this.state=r,s&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:s}}cluster(e){var{map:s}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(s.getZoom())).map(r=>this.transformCluster(r))}transformCluster(e){var{geometry:{coordinates:[s,r]},properties:i}=e;if(i.cluster)return new jN({markers:this.superCluster.getLeaves(i.cluster_id,1/0).map(o=>o.properties.marker),position:{lat:r,lng:s}});var a=i.marker;return new jN({markers:[a],position:ya.getPosition(a)})}}class sfe{constructor(e,s){this.markers={sum:e.length};var r=s.map(a=>a.count),i=r.reduce((a,o)=>a+o,0);this.clusters={count:s.length,markers:{mean:i/s.length,sum:i,min:Math.min(...r),max:Math.max(...r)}}}}class rfe{render(e,s,r){var{count:i,position:a}=e,o=i>Math.max(10,s.clusters.markers.mean)?"#ff0000":"#0000ff",c='<svg fill="'.concat(o,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(i,`</text>
</svg>`),d="Cluster of ".concat(i," markers"),h=Number(google.maps.Marker.MAX_ZINDEX)+i;if(ya.isAdvancedMarkerAvailable(r)){var g=new DOMParser,m=g.parseFromString(c,"image/svg+xml").documentElement;m.setAttribute("transform","translate(0 25)");var p={map:r,position:a,zIndex:h,title:d,content:m};return new google.maps.marker.AdvancedMarkerElement(p)}var v={position:a,zIndex:h,title:d,icon:{url:"data:image/svg+xml;base64,".concat(btoa(c)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(v)}}function ife(t,e){for(var s in e.prototype)t.prototype[s]=e.prototype[s]}class PS{constructor(){ife(PS,google.maps.OverlayView)}}var np;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(np||(np={}));var afe=(t,e,s)=>{s.fitBounds(e.bounds)};class ofe extends PS{constructor(e){var{map:s,markers:r=[],algorithmOptions:i={},algorithm:a=new nfe(i),renderer:o=new rfe,onClusterClick:c=afe}=e;super(),this.markers=[...r],this.clusters=[],this.algorithm=a,this.renderer=o,this.onClusterClick=c,s&&this.setMap(s)}addMarker(e,s){this.markers.includes(e)||(this.markers.push(e),s||this.render())}addMarkers(e,s){e.forEach(r=>{this.addMarker(r,!0)}),s||this.render()}removeMarker(e,s){var r=this.markers.indexOf(e);return r===-1?!1:(ya.setMap(e,null),this.markers.splice(r,1),s||this.render(),!0)}removeMarkers(e,s){var r=!1;return e.forEach(i=>{r=this.removeMarker(i,!0)||r}),r&&!s&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,np.CLUSTERING_BEGIN,this);var{clusters:s,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(r||r==null){var i=new Set;for(var a of s)a.markers.length==1&&i.add(a.markers[0]);var o=[];for(var c of this.clusters)c.marker!=null&&(c.markers.length==1?i.has(c.marker)||ya.setMap(c.marker,null):o.push(c.marker));this.clusters=s,this.renderClusters(),requestAnimationFrame(()=>o.forEach(d=>ya.setMap(d,null)))}google.maps.event.trigger(this,np.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>ya.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new sfe(this.markers,this.clusters),s=this.getMap();this.clusters.forEach(r=>{r.markers.length===1?r.marker=r.markers[0]:(r.marker=this.renderer.render(r,e,s),r.markers.forEach(i=>ya.setMap(i,null)),this.onClusterClick&&r.marker.addListener("click",i=>{google.maps.event.trigger(this,np.CLUSTER_CLICK,r),this.onClusterClick(i,r,s)})),ya.setMap(r.marker,s)})}}function dI(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,r)}return s}function uI(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?dI(Object(s),!0).forEach(function(r){Ue(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):dI(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function lfe(t){var e=pz(),[s,r]=y.useState(null);return y.useEffect(()=>{if(e&&s===null){var i=new ofe(uI(uI({},t),{},{map:e}));r(i)}},[e]),s}function cfe(t){var{children:e,options:s}=t,r=lfe(s);return r!==null?e(r):null}y.memo(cfe);var hI={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},mI={options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},zIndex(t,e){t.setZIndex(e)}};function dfe(t){var{children:e,anchor:s,options:r,position:i,zIndex:a,onCloseClick:o,onDomReady:c,onContentChanged:d,onPositionChanged:h,onZindexChanged:g,onLoad:m,onUnmount:p}=t,v=y.useContext(xn),[j,N]=y.useState(null),[E,_]=y.useState(null),[S,C]=y.useState(null),[I,P]=y.useState(null),[L,T]=y.useState(null),[M,k]=y.useState(null),O=y.useRef(null);return y.useEffect(()=>{j!==null&&(j.close(),s?j.open(v,s):j.getPosition()&&j.open(v))},[v,j,s]),y.useEffect(()=>{r&&j!==null&&j.setOptions(r)},[j,r]),y.useEffect(()=>{i&&j!==null&&j.setPosition(i)},[i]),y.useEffect(()=>{typeof a=="number"&&j!==null&&j.setZIndex(a)},[a]),y.useEffect(()=>{j&&o&&(E!==null&&google.maps.event.removeListener(E),_(google.maps.event.addListener(j,"closeclick",o)))},[o]),y.useEffect(()=>{j&&c&&(S!==null&&google.maps.event.removeListener(S),C(google.maps.event.addListener(j,"domready",c)))},[c]),y.useEffect(()=>{j&&d&&(I!==null&&google.maps.event.removeListener(I),P(google.maps.event.addListener(j,"content_changed",d)))},[d]),y.useEffect(()=>{j&&h&&(L!==null&&google.maps.event.removeListener(L),T(google.maps.event.addListener(j,"position_changed",h)))},[h]),y.useEffect(()=>{j&&g&&(M!==null&&google.maps.event.removeListener(M),k(google.maps.event.addListener(j,"zindex_changed",g)))},[g]),y.useEffect(()=>{var V=new google.maps.InfoWindow(r);return N(V),O.current=document.createElement("div"),o&&_(google.maps.event.addListener(V,"closeclick",o)),c&&C(google.maps.event.addListener(V,"domready",c)),d&&P(google.maps.event.addListener(V,"content_changed",d)),h&&T(google.maps.event.addListener(V,"position_changed",h)),g&&k(google.maps.event.addListener(V,"zindex_changed",g)),V.setContent(O.current),i&&V.setPosition(i),a&&V.setZIndex(a),s?V.open(v,s):V.getPosition()?V.open(v):Lr(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),m&&m(V),()=>{E&&google.maps.event.removeListener(E),I&&google.maps.event.removeListener(I),S&&google.maps.event.removeListener(S),L&&google.maps.event.removeListener(L),M&&google.maps.event.removeListener(M),p&&p(V),V.close()}},[]),O.current?ra.createPortal(y.Children.only(e),O.current):null}y.memo(dfe);class kz extends y.PureComponent{constructor(){super(...arguments),Ue(this,"registeredEvents",[]),Ue(this,"containerElement",null),Ue(this,"state",{infoWindow:null}),Ue(this,"open",(e,s)=>{s?e.open(this.context,s):e.getPosition()?e.open(this.context):Lr(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),Ue(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=Dn({updaterMap:mI,eventMap:hI,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&(Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:mI,eventMap:hI,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(Rn(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?ra.createPortal(y.Children.only(this.props.children),this.containerElement):null}}Ue(kz,"contextType",xn);function fI(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,r)}return s}function zv(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?fI(Object(s),!0).forEach(function(r){Ue(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):fI(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}var pI={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},gI={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},visible(t,e){t.setVisible(e)}},ufe={};function hfe(t){var{options:e,draggable:s,editable:r,visible:i,path:a,onDblClick:o,onDragEnd:c,onDragStart:d,onMouseDown:h,onMouseMove:g,onMouseOut:m,onMouseOver:p,onMouseUp:v,onRightClick:j,onClick:N,onDrag:E,onLoad:_,onUnmount:S}=t,C=y.useContext(xn),[I,P]=y.useState(null),[L,T]=y.useState(null),[M,k]=y.useState(null),[O,V]=y.useState(null),[B,Y]=y.useState(null),[z,G]=y.useState(null),[he,le]=y.useState(null),[se,re]=y.useState(null),[me,Ce]=y.useState(null),[$,xe]=y.useState(null),[te,ae]=y.useState(null),[ee,de]=y.useState(null);return y.useEffect(()=>{I!==null&&I.setMap(C)},[C]),y.useEffect(()=>{typeof e<"u"&&I!==null&&I.setOptions(e)},[I,e]),y.useEffect(()=>{typeof s<"u"&&I!==null&&I.setDraggable(s)},[I,s]),y.useEffect(()=>{typeof r<"u"&&I!==null&&I.setEditable(r)},[I,r]),y.useEffect(()=>{typeof i<"u"&&I!==null&&I.setVisible(i)},[I,i]),y.useEffect(()=>{typeof a<"u"&&I!==null&&I.setPath(a)},[I,a]),y.useEffect(()=>{I&&o&&(L!==null&&google.maps.event.removeListener(L),T(google.maps.event.addListener(I,"dblclick",o)))},[o]),y.useEffect(()=>{I&&c&&(M!==null&&google.maps.event.removeListener(M),k(google.maps.event.addListener(I,"dragend",c)))},[c]),y.useEffect(()=>{I&&d&&(O!==null&&google.maps.event.removeListener(O),V(google.maps.event.addListener(I,"dragstart",d)))},[d]),y.useEffect(()=>{I&&h&&(B!==null&&google.maps.event.removeListener(B),Y(google.maps.event.addListener(I,"mousedown",h)))},[h]),y.useEffect(()=>{I&&g&&(z!==null&&google.maps.event.removeListener(z),G(google.maps.event.addListener(I,"mousemove",g)))},[g]),y.useEffect(()=>{I&&m&&(he!==null&&google.maps.event.removeListener(he),le(google.maps.event.addListener(I,"mouseout",m)))},[m]),y.useEffect(()=>{I&&p&&(se!==null&&google.maps.event.removeListener(se),re(google.maps.event.addListener(I,"mouseover",p)))},[p]),y.useEffect(()=>{I&&v&&(me!==null&&google.maps.event.removeListener(me),Ce(google.maps.event.addListener(I,"mouseup",v)))},[v]),y.useEffect(()=>{I&&j&&($!==null&&google.maps.event.removeListener($),xe(google.maps.event.addListener(I,"rightclick",j)))},[j]),y.useEffect(()=>{I&&N&&(te!==null&&google.maps.event.removeListener(te),ae(google.maps.event.addListener(I,"click",N)))},[N]),y.useEffect(()=>{I&&E&&(ee!==null&&google.maps.event.removeListener(ee),de(google.maps.event.addListener(I,"drag",E)))},[E]),y.useEffect(()=>{var pe=new google.maps.Polyline(zv(zv({},e||ufe),{},{map:C}));return a&&pe.setPath(a),typeof i<"u"&&pe.setVisible(i),typeof r<"u"&&pe.setEditable(r),typeof s<"u"&&pe.setDraggable(s),o&&T(google.maps.event.addListener(pe,"dblclick",o)),c&&k(google.maps.event.addListener(pe,"dragend",c)),d&&V(google.maps.event.addListener(pe,"dragstart",d)),h&&Y(google.maps.event.addListener(pe,"mousedown",h)),g&&G(google.maps.event.addListener(pe,"mousemove",g)),m&&le(google.maps.event.addListener(pe,"mouseout",m)),p&&re(google.maps.event.addListener(pe,"mouseover",p)),v&&Ce(google.maps.event.addListener(pe,"mouseup",v)),j&&xe(google.maps.event.addListener(pe,"rightclick",j)),N&&ae(google.maps.event.addListener(pe,"click",N)),E&&de(google.maps.event.addListener(pe,"drag",E)),P(pe),_&&_(pe),()=>{L!==null&&google.maps.event.removeListener(L),M!==null&&google.maps.event.removeListener(M),O!==null&&google.maps.event.removeListener(O),B!==null&&google.maps.event.removeListener(B),z!==null&&google.maps.event.removeListener(z),he!==null&&google.maps.event.removeListener(he),se!==null&&google.maps.event.removeListener(se),me!==null&&google.maps.event.removeListener(me),$!==null&&google.maps.event.removeListener($),te!==null&&google.maps.event.removeListener(te),S&&S(pe),pe.setMap(null)}},[]),null}y.memo(hfe);class Pz extends y.PureComponent{constructor(){super(...arguments),Ue(this,"registeredEvents",[]),Ue(this,"state",{polyline:null}),Ue(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(zv(zv({},this.props.options),{},{map:this.context}));this.registeredEvents=Dn({updaterMap:gI,eventMap:pI,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&(Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:gI,eventMap:pI,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),Rn(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}Ue(Pz,"contextType",xn);function xI(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,r)}return s}function vI(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?xI(Object(s),!0).forEach(function(r){Ue(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):xI(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}var yI={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},wI={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},paths(t,e){t.setPaths(e)},visible(t,e){t.setVisible(e)}};function mfe(t){var{options:e,draggable:s,editable:r,visible:i,path:a,paths:o,onDblClick:c,onDragEnd:d,onDragStart:h,onMouseDown:g,onMouseMove:m,onMouseOut:p,onMouseOver:v,onMouseUp:j,onRightClick:N,onClick:E,onDrag:_,onLoad:S,onUnmount:C,onEdit:I}=t,P=y.useContext(xn),[L,T]=y.useState(null),[M,k]=y.useState(null),[O,V]=y.useState(null),[B,Y]=y.useState(null),[z,G]=y.useState(null),[he,le]=y.useState(null),[se,re]=y.useState(null),[me,Ce]=y.useState(null),[$,xe]=y.useState(null),[te,ae]=y.useState(null),[ee,de]=y.useState(null),[pe,Me]=y.useState(null);return y.useEffect(()=>{L!==null&&L.setMap(P)},[P]),y.useEffect(()=>{typeof e<"u"&&L!==null&&L.setOptions(e)},[L,e]),y.useEffect(()=>{typeof s<"u"&&L!==null&&L.setDraggable(s)},[L,s]),y.useEffect(()=>{typeof r<"u"&&L!==null&&L.setEditable(r)},[L,r]),y.useEffect(()=>{typeof i<"u"&&L!==null&&L.setVisible(i)},[L,i]),y.useEffect(()=>{typeof a<"u"&&L!==null&&L.setPath(a)},[L,a]),y.useEffect(()=>{typeof o<"u"&&L!==null&&L.setPaths(o)},[L,o]),y.useEffect(()=>{L&&typeof c=="function"&&(M!==null&&google.maps.event.removeListener(M),k(google.maps.event.addListener(L,"dblclick",c)))},[c]),y.useEffect(()=>{L&&(google.maps.event.addListener(L.getPath(),"insert_at",()=>{I==null||I(L)}),google.maps.event.addListener(L.getPath(),"set_at",()=>{I==null||I(L)}),google.maps.event.addListener(L.getPath(),"remove_at",()=>{I==null||I(L)}))},[L,I]),y.useEffect(()=>{L&&typeof d=="function"&&(O!==null&&google.maps.event.removeListener(O),V(google.maps.event.addListener(L,"dragend",d)))},[d]),y.useEffect(()=>{L&&typeof h=="function"&&(B!==null&&google.maps.event.removeListener(B),Y(google.maps.event.addListener(L,"dragstart",h)))},[h]),y.useEffect(()=>{L&&typeof g=="function"&&(z!==null&&google.maps.event.removeListener(z),G(google.maps.event.addListener(L,"mousedown",g)))},[g]),y.useEffect(()=>{L&&typeof m=="function"&&(he!==null&&google.maps.event.removeListener(he),le(google.maps.event.addListener(L,"mousemove",m)))},[m]),y.useEffect(()=>{L&&typeof p=="function"&&(se!==null&&google.maps.event.removeListener(se),re(google.maps.event.addListener(L,"mouseout",p)))},[p]),y.useEffect(()=>{L&&typeof v=="function"&&(me!==null&&google.maps.event.removeListener(me),Ce(google.maps.event.addListener(L,"mouseover",v)))},[v]),y.useEffect(()=>{L&&typeof j=="function"&&($!==null&&google.maps.event.removeListener($),xe(google.maps.event.addListener(L,"mouseup",j)))},[j]),y.useEffect(()=>{L&&typeof N=="function"&&(te!==null&&google.maps.event.removeListener(te),ae(google.maps.event.addListener(L,"rightclick",N)))},[N]),y.useEffect(()=>{L&&typeof E=="function"&&(ee!==null&&google.maps.event.removeListener(ee),de(google.maps.event.addListener(L,"click",E)))},[E]),y.useEffect(()=>{L&&typeof _=="function"&&(pe!==null&&google.maps.event.removeListener(pe),Me(google.maps.event.addListener(L,"drag",_)))},[_]),y.useEffect(()=>{var Le=new google.maps.Polygon(vI(vI({},e),{},{map:P}));return a&&Le.setPath(a),o&&Le.setPaths(o),typeof i<"u"&&Le.setVisible(i),typeof r<"u"&&Le.setEditable(r),typeof s<"u"&&Le.setDraggable(s),c&&k(google.maps.event.addListener(Le,"dblclick",c)),d&&V(google.maps.event.addListener(Le,"dragend",d)),h&&Y(google.maps.event.addListener(Le,"dragstart",h)),g&&G(google.maps.event.addListener(Le,"mousedown",g)),m&&le(google.maps.event.addListener(Le,"mousemove",m)),p&&re(google.maps.event.addListener(Le,"mouseout",p)),v&&Ce(google.maps.event.addListener(Le,"mouseover",v)),j&&xe(google.maps.event.addListener(Le,"mouseup",j)),N&&ae(google.maps.event.addListener(Le,"rightclick",N)),E&&de(google.maps.event.addListener(Le,"click",E)),_&&Me(google.maps.event.addListener(Le,"drag",_)),T(Le),S&&S(Le),()=>{M!==null&&google.maps.event.removeListener(M),O!==null&&google.maps.event.removeListener(O),B!==null&&google.maps.event.removeListener(B),z!==null&&google.maps.event.removeListener(z),he!==null&&google.maps.event.removeListener(he),se!==null&&google.maps.event.removeListener(se),me!==null&&google.maps.event.removeListener(me),$!==null&&google.maps.event.removeListener($),te!==null&&google.maps.event.removeListener(te),ee!==null&&google.maps.event.removeListener(ee),C&&C(Le),Le.setMap(null)}},[]),null}y.memo(mfe);class Rz extends y.PureComponent{constructor(){super(...arguments),Ue(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=Dn({updaterMap:wI,eventMap:yI,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:wI,eventMap:yI,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),Rn(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}Ue(Rz,"contextType",xn);function jI(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,r)}return s}function Vv(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?jI(Object(s),!0).forEach(function(r){Ue(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):jI(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}var bI={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},NI={bounds(t,e){t.setBounds(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},visible(t,e){t.setVisible(e)}};function ffe(t){var{options:e,bounds:s,draggable:r,editable:i,visible:a,onDblClick:o,onDragEnd:c,onDragStart:d,onMouseDown:h,onMouseMove:g,onMouseOut:m,onMouseOver:p,onMouseUp:v,onRightClick:j,onClick:N,onDrag:E,onBoundsChanged:_,onLoad:S,onUnmount:C}=t,I=y.useContext(xn),[P,L]=y.useState(null),[T,M]=y.useState(null),[k,O]=y.useState(null),[V,B]=y.useState(null),[Y,z]=y.useState(null),[G,he]=y.useState(null),[le,se]=y.useState(null),[re,me]=y.useState(null),[Ce,$]=y.useState(null),[xe,te]=y.useState(null),[ae,ee]=y.useState(null),[de,pe]=y.useState(null),[Me,Le]=y.useState(null);return y.useEffect(()=>{P!==null&&P.setMap(I)},[I]),y.useEffect(()=>{typeof e<"u"&&P!==null&&P.setOptions(e)},[P,e]),y.useEffect(()=>{typeof r<"u"&&P!==null&&P.setDraggable(r)},[P,r]),y.useEffect(()=>{typeof i<"u"&&P!==null&&P.setEditable(i)},[P,i]),y.useEffect(()=>{typeof a<"u"&&P!==null&&P.setVisible(a)},[P,a]),y.useEffect(()=>{typeof s<"u"&&P!==null&&P.setBounds(s)},[P,s]),y.useEffect(()=>{P&&o&&(T!==null&&google.maps.event.removeListener(T),M(google.maps.event.addListener(P,"dblclick",o)))},[o]),y.useEffect(()=>{P&&c&&(k!==null&&google.maps.event.removeListener(k),O(google.maps.event.addListener(P,"dragend",c)))},[c]),y.useEffect(()=>{P&&d&&(V!==null&&google.maps.event.removeListener(V),B(google.maps.event.addListener(P,"dragstart",d)))},[d]),y.useEffect(()=>{P&&h&&(Y!==null&&google.maps.event.removeListener(Y),z(google.maps.event.addListener(P,"mousedown",h)))},[h]),y.useEffect(()=>{P&&g&&(G!==null&&google.maps.event.removeListener(G),he(google.maps.event.addListener(P,"mousemove",g)))},[g]),y.useEffect(()=>{P&&m&&(le!==null&&google.maps.event.removeListener(le),se(google.maps.event.addListener(P,"mouseout",m)))},[m]),y.useEffect(()=>{P&&p&&(re!==null&&google.maps.event.removeListener(re),me(google.maps.event.addListener(P,"mouseover",p)))},[p]),y.useEffect(()=>{P&&v&&(Ce!==null&&google.maps.event.removeListener(Ce),$(google.maps.event.addListener(P,"mouseup",v)))},[v]),y.useEffect(()=>{P&&j&&(xe!==null&&google.maps.event.removeListener(xe),te(google.maps.event.addListener(P,"rightclick",j)))},[j]),y.useEffect(()=>{P&&N&&(ae!==null&&google.maps.event.removeListener(ae),ee(google.maps.event.addListener(P,"click",N)))},[N]),y.useEffect(()=>{P&&E&&(de!==null&&google.maps.event.removeListener(de),pe(google.maps.event.addListener(P,"drag",E)))},[E]),y.useEffect(()=>{P&&_&&(Me!==null&&google.maps.event.removeListener(Me),Le(google.maps.event.addListener(P,"bounds_changed",_)))},[_]),y.useEffect(()=>{var We=new google.maps.Rectangle(Vv(Vv({},e),{},{map:I}));return typeof a<"u"&&We.setVisible(a),typeof i<"u"&&We.setEditable(i),typeof r<"u"&&We.setDraggable(r),typeof s<"u"&&We.setBounds(s),o&&M(google.maps.event.addListener(We,"dblclick",o)),c&&O(google.maps.event.addListener(We,"dragend",c)),d&&B(google.maps.event.addListener(We,"dragstart",d)),h&&z(google.maps.event.addListener(We,"mousedown",h)),g&&he(google.maps.event.addListener(We,"mousemove",g)),m&&se(google.maps.event.addListener(We,"mouseout",m)),p&&me(google.maps.event.addListener(We,"mouseover",p)),v&&$(google.maps.event.addListener(We,"mouseup",v)),j&&te(google.maps.event.addListener(We,"rightclick",j)),N&&ee(google.maps.event.addListener(We,"click",N)),E&&pe(google.maps.event.addListener(We,"drag",E)),_&&Le(google.maps.event.addListener(We,"bounds_changed",_)),L(We),S&&S(We),()=>{T!==null&&google.maps.event.removeListener(T),k!==null&&google.maps.event.removeListener(k),V!==null&&google.maps.event.removeListener(V),Y!==null&&google.maps.event.removeListener(Y),G!==null&&google.maps.event.removeListener(G),le!==null&&google.maps.event.removeListener(le),re!==null&&google.maps.event.removeListener(re),Ce!==null&&google.maps.event.removeListener(Ce),xe!==null&&google.maps.event.removeListener(xe),ae!==null&&google.maps.event.removeListener(ae),de!==null&&google.maps.event.removeListener(de),Me!==null&&google.maps.event.removeListener(Me),C&&C(We),We.setMap(null)}},[]),null}y.memo(ffe);class Lz extends y.PureComponent{constructor(){super(...arguments),Ue(this,"registeredEvents",[]),Ue(this,"state",{rectangle:null}),Ue(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(Vv(Vv({},this.props.options),{},{map:this.context}));this.registeredEvents=Dn({updaterMap:NI,eventMap:bI,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&(Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:NI,eventMap:bI,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),Rn(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}Ue(Lz,"contextType",xn);function CI(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,r)}return s}function $v(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?CI(Object(s),!0).forEach(function(r){Ue(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):CI(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}var SI={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},AI={center(t,e){t.setCenter(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},radius(t,e){t.setRadius(e)},visible(t,e){t.setVisible(e)}},pfe={};function gfe(t){var{options:e,center:s,radius:r,draggable:i,editable:a,visible:o,onDblClick:c,onDragEnd:d,onDragStart:h,onMouseDown:g,onMouseMove:m,onMouseOut:p,onMouseOver:v,onMouseUp:j,onRightClick:N,onClick:E,onDrag:_,onCenterChanged:S,onRadiusChanged:C,onLoad:I,onUnmount:P}=t,L=y.useContext(xn),[T,M]=y.useState(null),[k,O]=y.useState(null),[V,B]=y.useState(null),[Y,z]=y.useState(null),[G,he]=y.useState(null),[le,se]=y.useState(null),[re,me]=y.useState(null),[Ce,$]=y.useState(null),[xe,te]=y.useState(null),[ae,ee]=y.useState(null),[de,pe]=y.useState(null),[Me,Le]=y.useState(null),[We,jt]=y.useState(null),[mt,ke]=y.useState(null);return y.useEffect(()=>{T!==null&&T.setMap(L)},[L]),y.useEffect(()=>{typeof e<"u"&&T!==null&&T.setOptions(e)},[T,e]),y.useEffect(()=>{typeof i<"u"&&T!==null&&T.setDraggable(i)},[T,i]),y.useEffect(()=>{typeof a<"u"&&T!==null&&T.setEditable(a)},[T,a]),y.useEffect(()=>{typeof o<"u"&&T!==null&&T.setVisible(o)},[T,o]),y.useEffect(()=>{typeof r=="number"&&T!==null&&T.setRadius(r)},[T,r]),y.useEffect(()=>{typeof s<"u"&&T!==null&&T.setCenter(s)},[T,s]),y.useEffect(()=>{T&&c&&(k!==null&&google.maps.event.removeListener(k),O(google.maps.event.addListener(T,"dblclick",c)))},[c]),y.useEffect(()=>{T&&d&&(V!==null&&google.maps.event.removeListener(V),B(google.maps.event.addListener(T,"dragend",d)))},[d]),y.useEffect(()=>{T&&h&&(Y!==null&&google.maps.event.removeListener(Y),z(google.maps.event.addListener(T,"dragstart",h)))},[h]),y.useEffect(()=>{T&&g&&(G!==null&&google.maps.event.removeListener(G),he(google.maps.event.addListener(T,"mousedown",g)))},[g]),y.useEffect(()=>{T&&m&&(le!==null&&google.maps.event.removeListener(le),se(google.maps.event.addListener(T,"mousemove",m)))},[m]),y.useEffect(()=>{T&&p&&(re!==null&&google.maps.event.removeListener(re),me(google.maps.event.addListener(T,"mouseout",p)))},[p]),y.useEffect(()=>{T&&v&&(Ce!==null&&google.maps.event.removeListener(Ce),$(google.maps.event.addListener(T,"mouseover",v)))},[v]),y.useEffect(()=>{T&&j&&(xe!==null&&google.maps.event.removeListener(xe),te(google.maps.event.addListener(T,"mouseup",j)))},[j]),y.useEffect(()=>{T&&N&&(ae!==null&&google.maps.event.removeListener(ae),ee(google.maps.event.addListener(T,"rightclick",N)))},[N]),y.useEffect(()=>{T&&E&&(de!==null&&google.maps.event.removeListener(de),pe(google.maps.event.addListener(T,"click",E)))},[E]),y.useEffect(()=>{T&&_&&(Me!==null&&google.maps.event.removeListener(Me),Le(google.maps.event.addListener(T,"drag",_)))},[_]),y.useEffect(()=>{T&&S&&(We!==null&&google.maps.event.removeListener(We),jt(google.maps.event.addListener(T,"center_changed",S)))},[E]),y.useEffect(()=>{T&&C&&(mt!==null&&google.maps.event.removeListener(mt),ke(google.maps.event.addListener(T,"radius_changed",C)))},[C]),y.useEffect(()=>{var yt=new google.maps.Circle($v($v({},e||pfe),{},{map:L}));return typeof r=="number"&&yt.setRadius(r),typeof s<"u"&&yt.setCenter(s),typeof r=="number"&&yt.setRadius(r),typeof o<"u"&&yt.setVisible(o),typeof a<"u"&&yt.setEditable(a),typeof i<"u"&&yt.setDraggable(i),c&&O(google.maps.event.addListener(yt,"dblclick",c)),d&&B(google.maps.event.addListener(yt,"dragend",d)),h&&z(google.maps.event.addListener(yt,"dragstart",h)),g&&he(google.maps.event.addListener(yt,"mousedown",g)),m&&se(google.maps.event.addListener(yt,"mousemove",m)),p&&me(google.maps.event.addListener(yt,"mouseout",p)),v&&$(google.maps.event.addListener(yt,"mouseover",v)),j&&te(google.maps.event.addListener(yt,"mouseup",j)),N&&ee(google.maps.event.addListener(yt,"rightclick",N)),E&&pe(google.maps.event.addListener(yt,"click",E)),_&&Le(google.maps.event.addListener(yt,"drag",_)),S&&jt(google.maps.event.addListener(yt,"center_changed",S)),C&&ke(google.maps.event.addListener(yt,"radius_changed",C)),M(yt),I&&I(yt),()=>{k!==null&&google.maps.event.removeListener(k),V!==null&&google.maps.event.removeListener(V),Y!==null&&google.maps.event.removeListener(Y),G!==null&&google.maps.event.removeListener(G),le!==null&&google.maps.event.removeListener(le),re!==null&&google.maps.event.removeListener(re),Ce!==null&&google.maps.event.removeListener(Ce),xe!==null&&google.maps.event.removeListener(xe),ae!==null&&google.maps.event.removeListener(ae),de!==null&&google.maps.event.removeListener(de),We!==null&&google.maps.event.removeListener(We),mt!==null&&google.maps.event.removeListener(mt),P&&P(yt),yt.setMap(null)}},[]),null}y.memo(gfe);class Oz extends y.PureComponent{constructor(){super(...arguments),Ue(this,"registeredEvents",[]),Ue(this,"state",{circle:null}),Ue(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle($v($v({},this.props.options),{},{map:this.context}));this.registeredEvents=Dn({updaterMap:AI,eventMap:SI,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&(Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:AI,eventMap:SI,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),Rn(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}Ue(Oz,"contextType",xn);function EI(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,r)}return s}function Uv(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?EI(Object(s),!0).forEach(function(r){Ue(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):EI(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}var _I={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},II={add(t,e){t.add(e)},addgeojson(t,e,s){t.addGeoJson(e,s)},contains(t,e){t.contains(e)},foreach(t,e){t.forEach(e)},loadgeojson(t,e,s,r){t.loadGeoJson(e,s,r)},overridestyle(t,e,s){t.overrideStyle(e,s)},remove(t,e){t.remove(e)},revertstyle(t,e){t.revertStyle(e)},controlposition(t,e){t.setControlPosition(e)},controls(t,e){t.setControls(e)},drawingmode(t,e){t.setDrawingMode(e)},map(t,e){t.setMap(e)},style(t,e){t.setStyle(e)},togeojson(t,e){t.toGeoJson(e)}};function xfe(t){var{options:e,onClick:s,onDblClick:r,onMouseDown:i,onMouseMove:a,onMouseOut:o,onMouseOver:c,onMouseUp:d,onRightClick:h,onAddFeature:g,onRemoveFeature:m,onRemoveProperty:p,onSetGeometry:v,onSetProperty:j,onLoad:N,onUnmount:E}=t,_=y.useContext(xn),[S,C]=y.useState(null),[I,P]=y.useState(null),[L,T]=y.useState(null),[M,k]=y.useState(null),[O,V]=y.useState(null),[B,Y]=y.useState(null),[z,G]=y.useState(null),[he,le]=y.useState(null),[se,re]=y.useState(null),[me,Ce]=y.useState(null),[$,xe]=y.useState(null),[te,ae]=y.useState(null),[ee,de]=y.useState(null),[pe,Me]=y.useState(null);return y.useEffect(()=>{S!==null&&S.setMap(_)},[_]),y.useEffect(()=>{S&&r&&(I!==null&&google.maps.event.removeListener(I),P(google.maps.event.addListener(S,"dblclick",r)))},[r]),y.useEffect(()=>{S&&i&&(L!==null&&google.maps.event.removeListener(L),T(google.maps.event.addListener(S,"mousedown",i)))},[i]),y.useEffect(()=>{S&&a&&(M!==null&&google.maps.event.removeListener(M),k(google.maps.event.addListener(S,"mousemove",a)))},[a]),y.useEffect(()=>{S&&o&&(O!==null&&google.maps.event.removeListener(O),V(google.maps.event.addListener(S,"mouseout",o)))},[o]),y.useEffect(()=>{S&&c&&(B!==null&&google.maps.event.removeListener(B),Y(google.maps.event.addListener(S,"mouseover",c)))},[c]),y.useEffect(()=>{S&&d&&(z!==null&&google.maps.event.removeListener(z),G(google.maps.event.addListener(S,"mouseup",d)))},[d]),y.useEffect(()=>{S&&h&&(he!==null&&google.maps.event.removeListener(he),le(google.maps.event.addListener(S,"rightclick",h)))},[h]),y.useEffect(()=>{S&&s&&(se!==null&&google.maps.event.removeListener(se),re(google.maps.event.addListener(S,"click",s)))},[s]),y.useEffect(()=>{S&&g&&(me!==null&&google.maps.event.removeListener(me),Ce(google.maps.event.addListener(S,"addfeature",g)))},[g]),y.useEffect(()=>{S&&m&&($!==null&&google.maps.event.removeListener($),xe(google.maps.event.addListener(S,"removefeature",m)))},[m]),y.useEffect(()=>{S&&p&&(te!==null&&google.maps.event.removeListener(te),ae(google.maps.event.addListener(S,"removeproperty",p)))},[p]),y.useEffect(()=>{S&&v&&(ee!==null&&google.maps.event.removeListener(ee),de(google.maps.event.addListener(S,"setgeometry",v)))},[v]),y.useEffect(()=>{S&&j&&(pe!==null&&google.maps.event.removeListener(pe),Me(google.maps.event.addListener(S,"setproperty",j)))},[j]),y.useEffect(()=>{if(_!==null){var Le=new google.maps.Data(Uv(Uv({},e),{},{map:_}));r&&P(google.maps.event.addListener(Le,"dblclick",r)),i&&T(google.maps.event.addListener(Le,"mousedown",i)),a&&k(google.maps.event.addListener(Le,"mousemove",a)),o&&V(google.maps.event.addListener(Le,"mouseout",o)),c&&Y(google.maps.event.addListener(Le,"mouseover",c)),d&&G(google.maps.event.addListener(Le,"mouseup",d)),h&&le(google.maps.event.addListener(Le,"rightclick",h)),s&&re(google.maps.event.addListener(Le,"click",s)),g&&Ce(google.maps.event.addListener(Le,"addfeature",g)),m&&xe(google.maps.event.addListener(Le,"removefeature",m)),p&&ae(google.maps.event.addListener(Le,"removeproperty",p)),v&&de(google.maps.event.addListener(Le,"setgeometry",v)),j&&Me(google.maps.event.addListener(Le,"setproperty",j)),C(Le),N&&N(Le)}return()=>{S&&(I!==null&&google.maps.event.removeListener(I),L!==null&&google.maps.event.removeListener(L),M!==null&&google.maps.event.removeListener(M),O!==null&&google.maps.event.removeListener(O),B!==null&&google.maps.event.removeListener(B),z!==null&&google.maps.event.removeListener(z),he!==null&&google.maps.event.removeListener(he),se!==null&&google.maps.event.removeListener(se),me!==null&&google.maps.event.removeListener(me),$!==null&&google.maps.event.removeListener($),te!==null&&google.maps.event.removeListener(te),ee!==null&&google.maps.event.removeListener(ee),pe!==null&&google.maps.event.removeListener(pe),E&&E(S),S.setMap(null))}},[]),null}y.memo(xfe);class Fz extends y.PureComponent{constructor(){super(...arguments),Ue(this,"registeredEvents",[]),Ue(this,"state",{data:null}),Ue(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data(Uv(Uv({},this.props.options),{},{map:this.context}));this.registeredEvents=Dn({updaterMap:II,eventMap:_I,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&(Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:II,eventMap:_I,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),Rn(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}Ue(Fz,"contextType",xn);function TI(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,r)}return s}function MI(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?TI(Object(s),!0).forEach(function(r){Ue(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):TI(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}var DI={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},kI={options(t,e){t.setOptions(e)},url(t,e){t.setUrl(e)},zIndex(t,e){t.setZIndex(e)}};class Bz extends y.PureComponent{constructor(){super(...arguments),Ue(this,"registeredEvents",[]),Ue(this,"state",{kmlLayer:null}),Ue(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(MI(MI({},this.props.options),{},{map:this.context}));this.registeredEvents=Dn({updaterMap:kI,eventMap:DI,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&(Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:kI,eventMap:DI,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),Rn(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}Ue(Bz,"contextType",xn);function zz(t,e){return typeof e=="function"?e(t.offsetWidth,t.offsetHeight):{x:0,y:0}}function vfe(t,e){return new e(t.lat,t.lng)}function yfe(t,e){return new e(new google.maps.LatLng(t.ne.lat,t.ne.lng),new google.maps.LatLng(t.sw.lat,t.sw.lng))}function wfe(t,e,s){return t instanceof e?t:s(t,e)}function jfe(t,e,s){return t instanceof e?t:s(t,e)}function bfe(t,e,s){var r=t&&t.fromLatLngToDivPixel(s.getNorthEast()),i=t&&t.fromLatLngToDivPixel(s.getSouthWest());return r&&i?{left:"".concat(i.x+e.x,"px"),top:"".concat(r.y+e.y,"px"),width:"".concat(r.x-i.x-e.x,"px"),height:"".concat(i.y-r.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function Nfe(t,e,s){var r=t&&t.fromLatLngToDivPixel(s);if(r){var{x:i,y:a}=r;return{left:"".concat(i+e.x,"px"),top:"".concat(a+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function Vz(t,e,s,r){return s!==void 0?bfe(t,e,jfe(s,google.maps.LatLngBounds,yfe)):Nfe(t,e,wfe(r,google.maps.LatLng,vfe))}function Cfe(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.height&&t.height===e.height}function PI(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,r)}return s}function Sfe(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?PI(Object(s),!0).forEach(function(r){Ue(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):PI(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function Afe(t,e,s,r,i){class a extends google.maps.OverlayView{constructor(c,d,h,g){super(),this.container=c,this.pane=d,this.position=h,this.bounds=g}onAdd(){var c,d=(c=this.getPanes())===null||c===void 0?void 0:c[this.pane];d==null||d.appendChild(this.container)}draw(){var c=this.getProjection(),d=Sfe({},this.container?zz(this.container,i):{x:0,y:0}),h=Vz(c,d,this.bounds,this.position);for(var[g,m]of Object.entries(h))this.container.style[g]=m}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new a(t,e,s,r)}function RI(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,r)}return s}function Efe(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?RI(Object(s),!0).forEach(function(r){Ue(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):RI(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function LI(t){if(!t)return"";var e=t instanceof google.maps.LatLng?t:new google.maps.LatLng(t.lat,t.lng);return e+""}function OI(t){if(!t)return"";var e=t instanceof google.maps.LatLngBounds?t:new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.east),new google.maps.LatLng(t.north,t.west));return e+""}function _fe(t){var{position:e,bounds:s,mapPaneName:r,zIndex:i,onLoad:a,onUnmount:o,getPixelPositionOffset:c,children:d}=t,h=y.useContext(xn),g=y.useMemo(()=>{var p=document.createElement("div");return p.style.position="absolute",p},[]),m=y.useMemo(()=>Afe(g,r,e,s,c),[g,r,e,s]);return y.useEffect(()=>(a==null||a(m),m==null||m.setMap(h),()=>{o==null||o(m),m==null||m.setMap(null)}),[h,m]),y.useEffect(()=>{g.style.zIndex="".concat(i)},[i,g]),ra.createPortal(d,g)}y.memo(_fe);class vu extends y.PureComponent{constructor(e){super(e),Ue(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),Ue(this,"updatePane",()=>{var r=this.props.mapPaneName,i=this.overlayView.getPanes();Lr(!!r,"OverlayView requires props.mapPaneName but got %s",r),i?this.setState({paneEl:i[r]}):this.setState({paneEl:null})}),Ue(this,"onAdd",()=>{var r,i;this.updatePane(),(r=(i=this.props).onLoad)===null||r===void 0||r.call(i,this.overlayView)}),Ue(this,"onPositionElement",()=>{var r=this.overlayView.getProjection(),i=Efe({x:0,y:0},this.containerRef.current?zz(this.containerRef.current,this.props.getPixelPositionOffset):{}),a=Vz(r,i,this.props.bounds,this.props.position);if(!Cfe(a,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var o,c,d,h;this.setState({containerStyle:{top:(o=a.top)!==null&&o!==void 0?o:0,left:(c=a.left)!==null&&c!==void 0?c:0,width:(d=a.width)!==null&&d!==void 0?d:0,height:(h=a.height)!==null&&h!==void 0?h:0,position:"absolute"}})}}),Ue(this,"draw",()=>{this.onPositionElement()}),Ue(this,"onRemove",()=>{var r,i;this.setState(()=>({paneEl:null})),(r=(i=this.props).onUnmount)===null||r===void 0||r.call(i,this.overlayView)}),this.containerRef=y.createRef();var s=new google.maps.OverlayView;s.onAdd=this.onAdd,s.draw=this.draw,s.onRemove=this.onRemove,this.overlayView=s}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var s=LI(e.position),r=LI(this.props.position),i=OI(e.bounds),a=OI(this.props.bounds);(s!==r||i!==a)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?ra.createPortal(n.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:y.Children.only(this.props.children)}),e):null}}Ue(vu,"FLOAT_PANE","floatPane");Ue(vu,"MAP_PANE","mapPane");Ue(vu,"MARKER_LAYER","markerLayer");Ue(vu,"OVERLAY_LAYER","overlayLayer");Ue(vu,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");Ue(vu,"contextType",xn);function Ife(){}function FI(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,r)}return s}function BI(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?FI(Object(s),!0).forEach(function(r){Ue(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):FI(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}var zI={onDblClick:"dblclick",onClick:"click"},VI={opacity(t,e){t.setOpacity(e)}};function Tfe(t){var{url:e,bounds:s,options:r,visible:i}=t,a=y.useContext(xn),o=new google.maps.LatLngBounds(new google.maps.LatLng(s.south,s.west),new google.maps.LatLng(s.north,s.east)),c=y.useMemo(()=>new google.maps.GroundOverlay(e,o,r),[]);return y.useEffect(()=>{c!==null&&c.setMap(a)},[a]),y.useEffect(()=>{typeof e<"u"&&c!==null&&(c.set("url",e),c.setMap(a))},[c,e]),y.useEffect(()=>{typeof i<"u"&&c!==null&&c.setOpacity(i?1:0)},[c,i]),y.useEffect(()=>{var d=new google.maps.LatLngBounds(new google.maps.LatLng(s.south,s.west),new google.maps.LatLng(s.north,s.east));typeof s<"u"&&c!==null&&(c.set("bounds",d),c.setMap(a))},[c,s]),null}y.memo(Tfe);class RS extends y.PureComponent{constructor(){super(...arguments),Ue(this,"registeredEvents",[]),Ue(this,"state",{groundOverlay:null}),Ue(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){Lr(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,BI(BI({},this.props.options),{},{map:this.context}));this.registeredEvents=Dn({updaterMap:VI,eventMap:zI,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&(Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:VI,eventMap:zI,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}Ue(RS,"defaultProps",{onLoad:Ife});Ue(RS,"contextType",xn);function $I(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,r)}return s}function Wv(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?$I(Object(s),!0).forEach(function(r){Ue(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):$I(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}var UI={},WI={data(t,e){t.setData(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)}};function Mfe(t){var{data:e,onLoad:s,onUnmount:r,options:i}=t,a=y.useContext(xn),[o,c]=y.useState(null);return y.useEffect(()=>{google.maps.visualization||Lr(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),y.useEffect(()=>{Lr(!!e,"data property is required in HeatmapLayer %s",e)},[e]),y.useEffect(()=>{o!==null&&o.setMap(a)},[a]),y.useEffect(()=>{i&&o!==null&&o.setOptions(i)},[o,i]),y.useEffect(()=>{var d=new google.maps.visualization.HeatmapLayer(Wv(Wv({},i),{},{data:e,map:a}));return c(d),s&&s(d),()=>{o!==null&&(r&&r(o),o.setMap(null))}},[]),null}y.memo(Mfe);class $z extends y.PureComponent{constructor(){super(...arguments),Ue(this,"registeredEvents",[]),Ue(this,"state",{heatmapLayer:null}),Ue(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){Lr(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),Lr(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(Wv(Wv({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=Dn({updaterMap:WI,eventMap:UI,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:WI,eventMap:UI,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),Rn(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}Ue($z,"contextType",xn);var HI={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},qI={register(t,e,s){t.registerPanoProvider(e,s)},links(t,e){t.setLinks(e)},motionTracking(t,e){t.setMotionTracking(e)},options(t,e){t.setOptions(e)},pano(t,e){t.setPano(e)},position(t,e){t.setPosition(e)},pov(t,e){t.setPov(e)},visible(t,e){t.setVisible(e)},zoom(t,e){t.setZoom(e)}};class Uz extends y.PureComponent{constructor(){super(...arguments),Ue(this,"registeredEvents",[]),Ue(this,"state",{streetViewPanorama:null}),Ue(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,s,r=(e=(s=this.context)===null||s===void 0?void 0:s.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=Dn({updaterMap:qI,eventMap:HI,prevProps:{},nextProps:this.props,instance:r}),this.setState(()=>({streetViewPanorama:r}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&(Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:qI,eventMap:HI,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),Rn(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}Ue(Uz,"contextType",xn);class Wz extends y.PureComponent{constructor(){super(...arguments),Ue(this,"state",{streetViewService:null}),Ue(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}Ue(Wz,"contextType",xn);var GI={onDirectionsChanged:"directions_changed"},YI={directions(t,e){t.setDirections(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},panel(t,e){t.setPanel(e)},routeIndex(t,e){t.setRouteIndex(e)}};class Hz extends y.PureComponent{constructor(){super(...arguments),Ue(this,"registeredEvents",[]),Ue(this,"state",{directionsRenderer:null}),Ue(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=Dn({updaterMap:YI,eventMap:GI,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&(Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:YI,eventMap:GI,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),Rn(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}Ue(Hz,"contextType",xn);var KI={onPlacesChanged:"places_changed"},ZI={bounds(t,e){t.setBounds(e)}};class qz extends y.PureComponent{constructor(){super(...arguments),Ue(this,"registeredEvents",[]),Ue(this,"containerElement",y.createRef()),Ue(this,"state",{searchBox:null}),Ue(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(Lr(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var s=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=Dn({updaterMap:ZI,eventMap:KI,prevProps:{},nextProps:this.props,instance:s}),this.setState(function(){return{searchBox:s}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&(Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:ZI,eventMap:KI,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),Rn(this.registeredEvents))}render(){return n.jsx("div",{ref:this.containerElement,children:y.Children.only(this.props.children)})}}Ue(qz,"contextType",xn);var QI={onPlaceChanged:"place_changed"},XI={bounds(t,e){t.setBounds(e)},restrictions(t,e){t.setComponentRestrictions(e)},fields(t,e){t.setFields(e)},options(t,e){t.setOptions(e)},types(t,e){t.setTypes(e)}};class LS extends y.PureComponent{constructor(){super(...arguments),Ue(this,"registeredEvents",[]),Ue(this,"containerElement",y.createRef()),Ue(this,"state",{autocomplete:null}),Ue(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;Lr(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var s=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(s){var r=new google.maps.places.Autocomplete(s,this.props.options);this.registeredEvents=Dn({updaterMap:XI,eventMap:QI,prevProps:{},nextProps:this.props,instance:r}),this.setState(()=>({autocomplete:r}),this.setAutocompleteCallback)}}componentDidUpdate(e){Rn(this.registeredEvents),this.registeredEvents=Dn({updaterMap:XI,eventMap:QI,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&Rn(this.registeredEvents)}render(){return n.jsx("div",{ref:this.containerElement,className:this.props.className,children:y.Children.only(this.props.children)})}}Ue(LS,"defaultProps",{className:""});Ue(LS,"contextType",xn);const Dfe=Object.freeze(Object.defineProperty({__proto__:null,Autocomplete:LS,BicyclingLayer:Nz,Circle:Oz,Data:Fz,DirectionsRenderer:Hz,DrawingManager:Sz,GoogleMap:gz,GroundOverlay:RS,HeatmapLayer:$z,InfoBox:Iz,InfoWindow:kz,KmlLayer:Bz,LoadScript:TS,MapContext:xn,Marker:DS,MarkerClusterer:Ez,OverlayView:vu,Polygon:Rz,Polyline:Pz,Rectangle:Lz,StandaloneSearchBox:qz,StreetViewPanorama:Uz,StreetViewService:Wz,TrafficLayer:bz,TransitLayer:Cz,useGoogleMap:pz,useJsApiLoader:Sme,useLoadScript:jz},Symbol.toStringTag,{value:"Module"})),kfe=({address:t,latitude:e,longitude:s,height:r="200px",width:i="100%",zoom:a=16,mapType:o="satellite"})=>{const[c,d]=y.useState(null),[h,g]=y.useState(!1);Ne.useEffect(()=>{(async()=>{try{const S=await fetch("/api/google-maps-key");if(!S.ok)throw new Error("Failed to fetch API key");const C=await S.json();C.apiKey?d(C.apiKey):console.error("No API key returned from server")}catch(S){console.error("Error fetching Google Maps API key:",S)}})()},[]);const m=y.useCallback(()=>{g(!0)},[]),[p,v]=y.useState(null);Ne.useEffect(()=>{(!e||!s)&&t&&c&&window.google&&new window.google.maps.Geocoder().geocode({address:t},(S,C)=>{if(C==="OK"&&S&&S[0]){const I=S[0].geometry.location;v({lat:I.lat(),lng:I.lng()})}})},[t,c,e,s]);const j=e&&s?{lat:e,lng:s}:p||{lat:28.3232,lng:-81.513};if(!c)return n.jsx("div",{className:"flex items-center justify-center bg-gray-100 rounded-md",style:{height:r,width:i},children:n.jsx("p",{className:"text-sm text-gray-500",children:"Loading map..."})});const N={width:i,height:r},E={mapTypeId:o,mapTypeControl:!0,zoomControl:!0,streetViewControl:!1,fullscreenControl:!0};return n.jsx(TS,{googleMapsApiKey:c,onLoad:m,children:n.jsx(gz,{mapContainerStyle:N,center:j,zoom:a,options:E,children:n.jsx(DS,{position:j,title:t})})})};function Pfe(){var S;const{id:t}=id(),[e,s]=_n(),[r,i]=y.useState("overview"),a=ime(),{data:o,isLoading:c,error:d}=wt({queryKey:["/api/clients",t],queryFn:async()=>{const C=await fetch(`/api/clients/${t}`);if(!C.ok)throw new Error("Failed to fetch client");return C.json()},enabled:!!t}),{data:h,isLoading:g}=wt({queryKey:[`/api/clients/${t}/equipment`],queryFn:async()=>{const C=await fetch(`/api/clients/${t}/equipment`);if(!C.ok)throw new Error("Failed to fetch equipment");return C.json()},enabled:!!t}),{data:m,isLoading:p}=wt({queryKey:[`/api/clients/${t}/images`],queryFn:async()=>{const C=await fetch(`/api/clients/${t}/images`);if(!C.ok)throw new Error("Failed to fetch images");return C.json()},enabled:!!t}),{data:v,isLoading:j}=wt({queryKey:["/api/maintenances/upcoming",t],queryFn:async()=>{const C=await fetch(`/api/maintenances/upcoming?clientId=${t}&days=30`);if(!C.ok)throw new Error("Failed to fetch upcoming services");return C.json()},enabled:!!t}),{data:N,isLoading:E}=wt({queryKey:["/api/maintenances",t],queryFn:async()=>{const C=await fetch(`/api/maintenances?clientId=${t}`);if(!C.ok)throw new Error("Failed to fetch maintenance history");return C.json()},enabled:!!t}),_=N==null?void 0:N.map(C=>{var L,T;if(C.status!=="completed")return null;let I={ph:null,chlorine:null,alkalinity:null},P=C.notes||"";if(P.includes("Service Report:"))try{const M=P.split("Service Report:")[1].trim(),k=M.match(/pH\s*:\s*([\d.]+)/i),O=M.match(/Chlorine\s*:\s*([\d.]+)/i),V=M.match(/Alkalinity\s*:\s*([\d.]+)/i);I={ph:k?k[1]:null,chlorine:O?O[1]:null,alkalinity:V?V[1]:null},P=M.split(`
`).filter(Y=>!Y.match(/^(pH|Chlorine|Alkalinity|Date|Time|Weather)/i)).join(`
`).trim()||"Regular maintenance performed"}catch(M){console.error("Error parsing service report:",M)}return{id:C.id,date:C.scheduleDate,type:C.type||"Regular Maintenance",category:"maintenance",notes:P,technician:((T=(L=C.technician)==null?void 0:L.user)==null?void 0:T.name)||"Unassigned",waterChemistry:I,status:C.status}}).filter(Boolean);return o&&{...o},y.useEffect(()=>{o&&console.log("Client data loaded:",o),h&&console.log("Equipment data loaded:",h),m&&console.log("Images data loaded:",m),N&&console.log("Maintenance history loaded:",N),_&&console.log("Service history processed:",_)},[o,h,m,N,_]),c?n.jsxs("div",{className:"container mx-auto p-6",children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx(_e,{className:"h-8 w-40 mr-4"}),n.jsx(_e,{className:"h-8 w-24"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(_e,{className:"h-40 w-full"}),n.jsx(_e,{className:"h-40 w-full"}),n.jsx(_e,{className:"h-40 w-full"})]})]}):o?n.jsxs("div",{className:"container mx-auto p-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:o.user.name}),n.jsx("p",{className:"text-gray-500",children:o.user.address||"No address provided"})]}),n.jsxs("div",{className:"mt-4 md:mt-0 flex gap-2",children:[n.jsx(H,{variant:"outline",onClick:()=>s(`/clients/${t}/edit`),children:"Edit Client"}),n.jsxs(H,{variant:"outline",onClick:()=>s(`/pool-wizard/${t}`),className:"flex items-center",children:[n.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Pool Wizard"]}),n.jsx(H,{onClick:()=>s(`/clients/${t}/portal`),children:"View Client Portal"})]})]}),n.jsxs(ps,{defaultValue:"overview",className:"space-y-6",onValueChange:i,children:[n.jsxs(gs,{className:"bg-white border min-w-max",children:[n.jsx(Ge,{value:"overview",children:"Overview"}),n.jsx(Ge,{value:"services",children:"Services"}),n.jsx(Ge,{value:"pool",children:"Pool Details"}),n.jsx(Ge,{value:"billing",children:"Billing"}),n.jsx(Ge,{value:"documents",children:"Documents"})]}),n.jsxs(Qe,{value:"overview",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(Ae,{className:"bg-white",children:[n.jsx(Be,{className:"pb-2",children:n.jsx(Ve,{className:"text-lg",children:"Contact Information"})}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx(bi,{className:"h-5 w-5 mr-2 text-gray-500 mt-0.5"}),n.jsx("div",{children:n.jsx("p",{children:o.user.address||"No address provided"})})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(qr,{className:"h-5 w-5 mr-2 text-gray-500"}),n.jsx("p",{children:o.user.phone||"No phone provided"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Qs,{className:"h-5 w-5 mr-2 text-gray-500"}),n.jsx("p",{children:o.user.email||"No email provided"})]}),o.user.address&&n.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100",children:n.jsx(kfe,{address:o.user.address,latitude:o.client.latitude||null,longitude:o.client.longitude||null,height:"200px",width:"100%",mapType:"satellite",zoom:17})})]})})]}),n.jsxs(Ae,{className:"bg-white",children:[n.jsxs(Be,{className:"pb-2 flex justify-between items-center",children:[n.jsx(Ve,{className:"text-lg",children:"Pool Information"}),!a&&n.jsx(H,{variant:"ghost",size:"sm",className:"text-primary hover:text-primary/80",onClick:()=>{i("pool"),setTimeout(()=>{const C=document.getElementById("pool-details-section");C&&C.scrollIntoView({behavior:"smooth"})},100)},children:"View Details"})]}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Pool Type:"}),n.jsx("span",{children:o.poolType||"Not specified"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Size:"}),n.jsx("span",{children:o.poolSize||"Not specified"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Filter Type:"}),n.jsx("span",{children:o.filterType||"Not specified"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Chemical System:"}),n.jsx("span",{children:o.chemicalSystem||"Not specified"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Heater Type:"}),n.jsx("span",{children:o.heaterType||"Not specified"})]}),a&&n.jsx("div",{className:"flex flex-col gap-2 pt-3",children:n.jsx(H,{variant:"outline",size:"sm",className:"w-full",onClick:()=>s(`/pool-wizard/${t}`),children:"Edit Pool Information"})})]})})]}),n.jsxs(Ae,{className:"bg-white",children:[n.jsx(Be,{className:"pb-2 flex justify-between items-center",children:n.jsx(Ve,{className:"text-lg",children:"Service Contract"})}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-500",children:"Contract Type:"}),n.jsx(Ze,{variant:"outline",children:o.contractType||"Not Specified"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Service Day:"}),n.jsx("span",{children:o.serviceDay||"Not Specified"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Monthly Rate:"}),n.jsx("span",{className:"font-medium",children:Ic(o.monthlyRate||199)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Special Notes:"}),n.jsx("span",{children:o.specialNotes||"None"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Last Updated:"}),n.jsx("span",{children:new Date().toLocaleDateString()})]}),a&&n.jsx(H,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:()=>s(`/clients/${t}/edit`),children:"Edit Contract"})]})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[n.jsxs(Ae,{className:"bg-white",children:[n.jsx(Be,{children:n.jsx(Ve,{className:"text-lg",children:"Upcoming Services"})}),n.jsx(Ee,{children:v&&v.length>0?n.jsxs("div",{className:"space-y-4",children:[v.map((C,I)=>{var P,L;return n.jsxs("div",{className:"flex items-start p-3 border rounded-lg",children:[n.jsx("div",{className:"bg-blue-100 p-2 rounded-full mr-3",children:n.jsx(tn,{className:"h-4 w-4 text-blue-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("h4",{className:"font-medium",children:C.type||"Maintenance"}),n.jsx("span",{className:"text-sm text-gray-500",children:ln(C.scheduleDate)})]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[n.jsx(Ur,{className:"h-3 w-3 mr-1"}),n.jsx("span",{children:C.scheduleTime||"09:00 AM"})]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[n.jsx(xi,{className:"h-3 w-3 mr-1"}),n.jsx("span",{children:((L=(P=C.technician)==null?void 0:P.user)==null?void 0:L.name)||"Not assigned"})]})]})]},I)}),a&&n.jsx(H,{variant:"outline",className:"w-full mt-2",onClick:()=>{s("/maintenance")},children:"Schedule Additional Service"})]}):n.jsxs("div",{className:"text-center py-6",children:[n.jsx(Ga,{className:"h-12 w-12 mx-auto text-blue-200 mb-2"}),n.jsx("p",{className:"text-gray-500",children:"No upcoming services scheduled"}),n.jsx(H,{variant:"outline",className:"mt-4",onClick:()=>{s("/maintenance")},children:"Schedule Service"})]})})]}),n.jsxs(Ae,{className:"bg-white",children:[n.jsx(Be,{children:n.jsx(Ve,{className:"text-lg",children:"Recent Issues"})}),n.jsx(Ee,{children:o.issues&&o.issues.length>0?n.jsxs("div",{className:"space-y-4",children:[o.issues.map((C,I)=>n.jsxs("div",{className:"flex items-start p-3 border rounded-lg",children:[n.jsx("div",{className:`p-2 rounded-full mr-3 ${C.resolved?"bg-green-100":"bg-amber-100"}`,children:C.resolved?n.jsx(zc,{className:"h-4 w-4 text-green-600"}):n.jsx(fs,{className:"h-4 w-4 text-amber-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("h4",{className:"font-medium",children:C.title}),n.jsx(Ze,{variant:C.resolved?"outline":"secondary",children:C.resolved?"Resolved":"Open"})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C.description}),n.jsxs("div",{className:"flex justify-between items-center mt-2",children:[n.jsxs("span",{className:"text-xs text-gray-500",children:["Reported: ",ln(C.reportedDate)]}),C.resolved&&n.jsxs("span",{className:"text-xs text-gray-500",children:["Resolved: ",ln(C.resolvedDate)]})]})]})]},I)),a&&n.jsx(H,{variant:"outline",className:"w-full mt-2",onClick:()=>{s("/repairs")},children:"Report New Issue"})]}):n.jsxs("div",{className:"text-center py-6",children:[n.jsx(zc,{className:"h-12 w-12 mx-auto text-green-200 mb-2"}),n.jsx("p",{className:"text-gray-500",children:"No recent issues reported"}),n.jsx(H,{variant:"outline",className:"mt-4",onClick:()=>{s("/repairs")},children:"Report New Issue"})]})})]})]})]}),n.jsx(Qe,{value:"services",children:n.jsx("div",{className:"space-y-6",children:n.jsxs(ps,{defaultValue:"all",children:[n.jsx("div",{className:"flex justify-center w-full overflow-x-auto pb-2",children:n.jsxs(gs,{className:"justify-center min-w-max",children:[n.jsx(Ge,{value:"all",children:"All Services"}),n.jsx(Ge,{value:"maintenance",children:"Maintenance"}),n.jsx(Ge,{value:"repair",children:"Repairs"}),n.jsx(Ge,{value:"construction",children:"Construction"})]})}),n.jsx(Qe,{value:"all",children:n.jsxs(Ae,{className:"bg-white",children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Service History"}),n.jsx(ct,{children:"All service visits for this client"})]}),n.jsx(Ee,{children:n.jsx("div",{className:"space-y-4",children:_&&_.length>0?_.map((C,I)=>n.jsxs("div",{className:"flex items-start p-4 border rounded-lg",children:[n.jsx("div",{className:"mr-4",children:n.jsx("div",{className:`p-3 rounded-full ${C.category==="repair"?"bg-amber-100":C.category==="construction"?"bg-indigo-100":"bg-blue-100"}`,children:n.jsx(Ga,{className:`h-5 w-5 ${C.category==="repair"?"text-amber-600":C.category==="construction"?"text-indigo-600":"text-blue-600"}`})})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:C.type}),n.jsx(Ze,{className:"mt-1",variant:C.category==="repair"?"destructive":C.category==="construction"?"secondary":"default",children:C.category||"Maintenance"})]}),n.jsx("span",{className:"text-sm text-gray-500",children:ln(C.date)})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-2",children:C.notes}),C.waterChemistry&&(C.waterChemistry.ph||C.waterChemistry.chlorine||C.waterChemistry.alkalinity)&&n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-3",children:[C.waterChemistry.ph&&n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"pH:"})," ",C.waterChemistry.ph]}),C.waterChemistry.chlorine&&n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"Chlorine:"})," ",C.waterChemistry.chlorine," ppm"]}),C.waterChemistry.alkalinity&&n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"Alkalinity:"})," ",C.waterChemistry.alkalinity," ppm"]}),n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"Technician:"})," ",C.technician]})]}),n.jsx(H,{variant:"ghost",size:"sm",className:"mt-2",onClick:()=>s(`/service-report/${C.id}`),children:"View Full Report"})]})]},I)):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Sp,{className:"h-12 w-12 mx-auto text-blue-200 mb-2"}),n.jsx("p",{className:"text-gray-500",children:"No service history available"}),n.jsx(H,{variant:"outline",className:"mt-4",onClick:()=>s("/maintenance"),children:"Schedule Service"})]})})})]})}),n.jsx(Qe,{value:"maintenance",children:n.jsxs(Ae,{className:"bg-white",children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Maintenance History"}),n.jsx(ct,{children:"Regular pool maintenance visits"})]}),n.jsx(Ee,{children:n.jsx("div",{className:"space-y-4",children:_&&_.length>0?_.filter(C=>C.category==="maintenance").map((C,I)=>n.jsxs("div",{className:"flex items-start p-4 border rounded-lg",children:[n.jsx("div",{className:"mr-4",children:n.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:n.jsx(Ga,{className:"h-5 w-5 text-blue-600"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("h4",{className:"font-medium",children:C.type||"Regular Maintenance"}),n.jsx("span",{className:"text-sm text-gray-500",children:ln(C.date)})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C.notes}),C.waterChemistry&&(C.waterChemistry.ph||C.waterChemistry.chlorine||C.waterChemistry.alkalinity)&&n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-3",children:[C.waterChemistry.ph&&n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"pH:"})," ",C.waterChemistry.ph]}),C.waterChemistry.chlorine&&n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"Chlorine:"})," ",C.waterChemistry.chlorine," ppm"]}),C.waterChemistry.alkalinity&&n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"Alkalinity:"})," ",C.waterChemistry.alkalinity," ppm"]}),n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"Technician:"})," ",C.technician]})]}),n.jsx(H,{variant:"ghost",size:"sm",className:"mt-2",onClick:()=>s(`/service-report/${C.id}`),children:"View Full Report"})]})]},I)):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Sp,{className:"h-12 w-12 mx-auto text-blue-200 mb-2"}),n.jsx("p",{className:"text-gray-500",children:"No maintenance history available"}),n.jsx(H,{variant:"outline",className:"mt-4",onClick:()=>s("/maintenance"),children:"Schedule Maintenance"})]})})})]})}),n.jsx(Qe,{value:"repair",children:n.jsxs(Ae,{className:"bg-white",children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Repair History"}),n.jsx(ct,{children:"Equipment and system repairs"})]}),n.jsx(Ee,{children:n.jsx("div",{className:"space-y-4",children:_&&_.filter(C=>C.category==="repair").length>0?_.filter(C=>C.category==="repair").map((C,I)=>n.jsxs("div",{className:"flex items-start p-4 border rounded-lg",children:[n.jsx("div",{className:"mr-4",children:n.jsx("div",{className:"bg-amber-100 p-3 rounded-full",children:n.jsx(Hs,{className:"h-5 w-5 text-amber-600"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("h4",{className:"font-medium",children:C.type||"Equipment Repair"}),n.jsx("span",{className:"text-sm text-gray-500",children:ln(C.date)})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C.notes}),n.jsxs("div",{className:"flex flex-col xs:flex-row gap-2 mt-3",children:[n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"Cost:"})," ",Ic(C.cost||0)]}),n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"Technician:"})," ",C.technician]})]}),n.jsx(H,{variant:"ghost",size:"sm",className:"mt-2",onClick:()=>s(`/service-report/${C.id}`),children:"View Full Report"})]})]},I)):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Hs,{className:"h-12 w-12 mx-auto text-amber-200 mb-2"}),n.jsx("p",{className:"text-gray-500",children:"No repair history available"}),n.jsx(H,{variant:"outline",className:"mt-4",onClick:()=>s("/repairs"),children:"Request Repair"})]})})})]})}),n.jsx(Qe,{value:"construction",children:n.jsxs(Ae,{className:"bg-white",children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Construction History"}),n.jsx(ct,{children:"Pool construction and major renovations"})]}),n.jsx(Ee,{children:n.jsx("div",{className:"space-y-4",children:_&&_.filter(C=>C.category==="construction").length>0?_.filter(C=>C.category==="construction").map((C,I)=>n.jsxs("div",{className:"flex items-start p-4 border rounded-lg",children:[n.jsx("div",{className:"mr-4",children:n.jsx("div",{className:"bg-indigo-100 p-3 rounded-full",children:n.jsx(tu,{className:"h-5 w-5 text-indigo-600"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("h4",{className:"font-medium",children:C.type||"Construction"}),n.jsx("span",{className:"text-sm text-gray-500",children:ln(C.date)})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C.notes}),n.jsxs("div",{className:"flex flex-col xs:flex-row gap-2 mt-3",children:[n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"Project Value:"})," ",Ic(C.cost||0)]}),n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"Supervisor:"})," ",C.technician]})]}),n.jsx(H,{variant:"ghost",size:"sm",className:"mt-2",onClick:()=>s(`/service-report/${C.id}`),children:"View Project Details"})]})]},I)):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(tu,{className:"h-12 w-12 mx-auto text-indigo-200 mb-2"}),n.jsx("p",{className:"text-gray-500",children:"No construction/renovation history available"}),n.jsx(H,{variant:"outline",className:"mt-4",onClick:()=>s("/projects"),children:"Discuss Renovation Options"})]})})})]})})]})})}),n.jsx(Qe,{value:"billing",children:n.jsxs(Ae,{className:"bg-white",children:[n.jsx(Be,{children:n.jsx(Ve,{children:"Billing Information"})}),n.jsx(Ee,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-medium",children:"Payment Details"}),n.jsxs("div",{className:"p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex justify-between mb-2",children:[n.jsx("span",{className:"text-gray-500",children:"Payment Method:"}),n.jsxs("span",{children:["Credit Card ending in ",((S=o.paymentInfo)==null?void 0:S.lastFour)||"1234"]})]}),n.jsxs("div",{className:"flex justify-between mb-2",children:[n.jsx("span",{className:"text-gray-500",children:"Billing Cycle:"}),n.jsx("span",{children:o.billingCycle||"Monthly"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Auto-Pay:"}),n.jsx("span",{children:o.autoPay?"Enabled":"Disabled"})]})]}),n.jsx(H,{variant:"outline",children:"Update Payment Method"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-medium",children:"Recent Invoices"}),o.invoices&&o.invoices.length>0?n.jsx("div",{className:"space-y-2",children:o.invoices.map((C,I)=>n.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium",children:["Invoice #",C.number]}),n.jsx("p",{className:"text-sm text-gray-500",children:ln(C.date)})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"font-medium",children:Ic(C.amount)}),n.jsx(Ze,{variant:C.status==="paid"?"default":C.status==="pending"?"secondary":"outline",children:C.status.charAt(0).toUpperCase()+C.status.slice(1)})]})]},I))}):n.jsx("div",{className:"text-center py-4 border rounded-lg",children:n.jsx("p",{className:"text-gray-500",children:"No invoices available"})}),n.jsx(H,{variant:"outline",children:"View All Invoices"})]})]})})]})}),n.jsx(Qe,{value:"pool",children:n.jsxs("div",{id:"pool-details-section",className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Pool Details"}),n.jsxs(H,{onClick:()=>{const C={poolType:o.poolType||"",poolSize:o.poolSize||"",filterType:o.filterType||"",heaterType:o.heaterType||null,chemicalSystem:o.chemicalSystem||"",specialNotes:o.specialNotes||"",serviceDay:o.serviceDay||"",equipment:h||[],images:m||[]};localStorage.setItem(`pool_wizard_${t}`,JSON.stringify(C)),s(`/pool-wizard/${t}`)},className:"flex items-center",children:[n.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Update Pool Information"]})]}),n.jsxs(Ae,{className:"bg-white",children:[n.jsxs(Be,{children:[n.jsxs(Ve,{className:"flex items-center",children:[n.jsx(Ga,{className:"h-5 w-5 mr-2 text-primary"}),"Pool Specifications"]}),n.jsx(ct,{children:"Technical details about the pool"})]}),n.jsxs(Ee,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-medium",children:"Pool Type:"}),n.jsx("span",{children:o.poolType||"Not specified"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-medium",children:"Pool Size:"}),n.jsx("span",{children:o.poolSize||"Not specified"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-medium",children:"Filter Type:"}),n.jsx("span",{children:o.filterType||"Not specified"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-medium",children:"Heater Type:"}),n.jsx("span",{children:o.heaterType||"Not specified"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-medium",children:"Chemical System:"}),n.jsx("span",{children:o.chemicalSystem||"Not specified"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-medium",children:"Service Day:"}),n.jsx("span",{children:o.serviceDay||"Not specified"})]})]})]}),o.specialNotes&&n.jsxs("div",{className:"mt-6",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Special Notes:"}),n.jsx("div",{className:"p-3 bg-gray-50 rounded-md",children:n.jsx("p",{className:"text-sm",children:o.specialNotes})})]})]})]}),n.jsxs(Ae,{className:"bg-white",children:[n.jsxs(Be,{className:"flex flex-row items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ve,{className:"flex items-center",children:[n.jsx(Hs,{className:"h-5 w-5 mr-2 text-primary"}),"Equipment Inventory"]}),n.jsx(ct,{children:"Pool equipment and components"})]}),n.jsxs(H,{onClick:()=>s(`/pool-wizard/${t}`),size:"sm",className:"ml-auto",children:[n.jsx(os,{className:"h-4 w-4 mr-1"}),"Add Equipment"]})]}),n.jsx(Ee,{children:g?n.jsxs("div",{className:"space-y-4",children:[n.jsx(_e,{className:"h-24 w-full"}),n.jsx(_e,{className:"h-24 w-full"})]}):h&&h.length>0?n.jsx("div",{className:"space-y-4",children:h.map((C,I)=>n.jsxs("div",{className:"p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium",children:C.name}),n.jsx(Ze,{variant:"outline",className:"mt-1",children:C.type})]}),n.jsx(Ze,{className:C.status==="operational"?"bg-green-100 text-green-800":C.status==="needs_service"?"bg-yellow-100 text-yellow-800":C.status==="replaced"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800",children:C.status==="operational"?"Operational":C.status==="needs_service"?"Needs Service":C.status==="replaced"?"Replaced":C.status==="obsolete"?"Obsolete":"Unknown Status"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-gray-500",children:"Brand"}),n.jsx("p",{className:"text-sm",children:C.brand||"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-gray-500",children:"Model"}),n.jsx("p",{className:"text-sm",children:C.model||"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-gray-500",children:"Serial Number"}),n.jsx("p",{className:"text-sm",children:C.serialNumber||"N/A"})]})]}),C.installDate&&n.jsxs("div",{className:"mt-2",children:[n.jsx("span",{className:"text-xs text-gray-500",children:"Install Date"}),n.jsx("p",{className:"text-sm",children:ln(new Date(C.installDate))})]}),C.notes&&n.jsxs("div",{className:"mt-2",children:[n.jsx("span",{className:"text-xs text-gray-500",children:"Notes"}),n.jsx("p",{className:"text-sm",children:C.notes})]})]},I))}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Hs,{className:"h-12 w-12 mx-auto text-gray-200 mb-2"}),n.jsx("p",{className:"text-gray-500",children:"No equipment recorded"}),n.jsx(H,{variant:"outline",className:"mt-4",onClick:()=>s(`/pool-wizard/${t}`),children:"Add Equipment"})]})})]}),n.jsxs(Ae,{className:"bg-white",children:[n.jsxs(Be,{className:"flex flex-row items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ve,{className:"flex items-center",children:[n.jsx(em,{className:"h-5 w-5 mr-2 text-primary"}),"Pool Images"]}),n.jsx(ct,{children:"Photos of the pool and equipment"})]}),n.jsxs(H,{onClick:()=>s(`/pool-wizard/${t}`),size:"sm",className:"ml-auto",children:[n.jsx(OE,{className:"h-4 w-4 mr-1"}),"Add Images"]})]}),n.jsx(Ee,{children:p?n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[n.jsx(_e,{className:"h-48 w-full rounded-lg"}),n.jsx(_e,{className:"h-48 w-full rounded-lg"}),n.jsx(_e,{className:"h-48 w-full rounded-lg"})]}):m&&m.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:m.map((C,I)=>n.jsx("div",{className:"border rounded-lg overflow-hidden",children:n.jsxs("div",{className:"aspect-video relative",children:[n.jsx("img",{src:C.imageUrl,alt:C.caption||`Pool image ${I+1}`,className:"object-cover w-full h-full"}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white p-2",children:n.jsx("p",{className:"text-sm truncate",children:C.caption||`Image ${I+1}`})}),n.jsx(Ze,{className:"absolute top-2 right-2 text-xs",variant:"secondary",children:C.category||"pool"})]})},I))}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(em,{className:"h-12 w-12 mx-auto text-gray-200 mb-2"}),n.jsx("p",{className:"text-gray-500",children:"No images available"}),n.jsxs(H,{variant:"outline",className:"mt-4",onClick:()=>s(`/pool-wizard/${t}`),children:[n.jsx(OE,{className:"h-4 w-4 mr-1"}),"Add Images"]})]})})]})]})}),n.jsx(Qe,{value:"documents",children:n.jsxs(Ae,{className:"bg-white",children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Documents"}),n.jsx(ct,{children:"Contracts, reports, and other documents"})]}),n.jsx(Ee,{children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.documents&&o.documents.length>0?o.documents.map((C,I)=>n.jsxs("div",{className:"p-4 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx("div",{className:"bg-blue-100 p-2 rounded-lg mr-3",children:n.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm",children:C.name}),n.jsx("p",{className:"text-xs text-gray-500",children:ln(C.date)})]})]}),n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsxs("span",{className:"text-gray-500",children:["Type: ",C.type]}),n.jsx("span",{className:"text-gray-500",children:C.size})]})]},I)):n.jsxs("div",{className:"text-center py-8 col-span-3",children:[n.jsx("p",{className:"text-gray-500",children:"No documents available"}),n.jsx(H,{variant:"outline",className:"mt-4",children:"Upload Document"})]})})})]})})]})]}):n.jsxs("div",{className:"container mx-auto p-6",children:[n.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Client not found"}),n.jsx(H,{onClick:()=>s("/clients"),children:"Back to Clients"})]})}function Rfe(t,e){const[s,r]=y.useState(t);return y.useEffect(()=>{const i=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(i)}},[t,e]),s}const Lfe=async t=>{if(!t||t.length<3)return[];try{try{await $5()}catch(i){return console.warn("Failed to load Google Maps API:",i),nj(t)}if(!window.google||!window.google.maps||!window.google.maps.places)return console.warn("Google Maps Places API not loaded. Using fallback suggestions."),nj(t);const e=new window.google.maps.places.AutocompleteSessionToken,s=new window.google.maps.places.AutocompleteService;return(await new Promise((i,a)=>{s.getPlacePredictions({input:t,types:["address"],sessionToken:e},(o,c)=>{c!==google.maps.places.PlacesServiceStatus.OK||!o?(console.warn("Google Places API status:",c),i([])):i(o)})})).map(i=>i.description)}catch(e){return console.error("Error fetching address suggestions:",e),nj(t)}},nj=t=>!t||t.length<3?Promise.resolve([]):new Promise(e=>{setTimeout(()=>{const s=["CA","FL","NY","TX","IL"],r=["Main","Park","Oak","Maple","Washington","Cedar"],i=["St","Ave","Blvd","Dr","Ln","Rd"],a=["Springfield","Riverside","Oakdale","Lakeside","Maplewood"],o=[];if(/^\d+\s+\w+/.test(t)){const c=t.split(" "),d=c[0],h=c.slice(1).join(" ");for(let g=0;g<3&&g<i.length;g++)for(let m=0;m<2&&m<a.length;m++){const p=Math.floor(9e4+Math.random()*1e4);o.push(`${d} ${h} ${i[g]}, ${a[m]}, ${s[m%s.length]} ${p}`)}}for(let c=0;c<5-o.length;c++){const d=Math.floor(100+Math.random()*900),h=r[Math.floor(Math.random()*r.length)],g=i[Math.floor(Math.random()*i.length)],m=a[Math.floor(Math.random()*a.length)],p=s[Math.floor(Math.random()*s.length)],v=Math.floor(9e4+Math.random()*1e4),j=`${d} ${h} ${g}, ${m}, ${p} ${v}`;j.toLowerCase().includes(t.toLowerCase())&&o.push(j)}for(;o.length<3;){const c=Math.floor(100+Math.random()*900),d=r[Math.floor(Math.random()*r.length)],h=i[Math.floor(Math.random()*i.length)],g=a[Math.floor(Math.random()*a.length)],m=s[Math.floor(Math.random()*s.length)],p=Math.floor(9e4+Math.random()*1e4);o.push(`${c} ${d} ${h}, ${g}, ${m} ${p}`)}e(o)},300)});function Gz({onAddressSelect:t,value:e,...s}){const[r,i]=y.useState(e||""),[a,o]=y.useState([]),[c,d]=y.useState(!1),[h,g]=y.useState(!1),[m,p]=y.useState(!1),v=Rfe(r,300),j=y.useRef(null);y.useEffect(()=>{(async()=>{if(v.length<3){o([]);return}g(!0);try{const C=await Lfe(v);o(C),d(C.length>0)}catch(C){console.error("Error fetching address suggestions:",C)}finally{g(!1)}})()},[v]),y.useEffect(()=>{i(e||"")},[e]),y.useEffect(()=>{const S=C=>{j.current&&!j.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[]);const N=S=>{i(S.target.value),d(S.target.value.length>=3)},E=async S=>{i(S),d(!1),p(!0);try{const C=await aJ(S);C?(console.log("Geocoded address:",C),t(S,{latitude:C.latitude,longitude:C.longitude,formattedAddress:C.formattedAddress})):(console.warn("Geocoding failed for address:",S),t(S,{latitude:34.0522,longitude:-118.2437,formattedAddress:S}))}catch(C){console.error("Error geocoding address:",C),t(S,{latitude:34.0522,longitude:-118.2437,formattedAddress:S})}finally{p(!1)}},_=()=>{i(""),t(""),d(!1)};return n.jsxs("div",{className:"relative",ref:j,children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400",children:n.jsx(bi,{className:"h-4 w-4"})}),n.jsx(ve,{...s,value:r,onChange:N,onFocus:()=>r.length>=3&&d(!0),className:"pl-8 pr-8",placeholder:"123 Main St, City, State"}),r&&n.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 cursor-pointer text-gray-400 hover:text-gray-600",onClick:_,children:n.jsx(ys,{className:"h-4 w-4"})})]}),c&&n.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border border-gray-200 max-h-60 overflow-auto",children:h?n.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"Loading suggestions..."}):a.length>0?n.jsx("ul",{children:a.map((S,C)=>n.jsxs("li",{className:"px-4 py-2 text-sm hover:bg-blue-50 cursor-pointer flex items-center",onClick:()=>E(S),children:[n.jsx(bi,{className:"h-4 w-4 mr-2 text-blue-500"}),n.jsx("span",{children:S})]},C))}):v.length>=3?n.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No suggestions found"}):null})]})}const Ofe=q.object({name:q.string().min(2,{message:"Name must be at least 2 characters"}),email:q.string().email({message:"Please enter a valid email address"}),phone:q.string().optional(),address:q.string().optional(),companyName:q.string().optional(),contractType:q.string().optional(),username:q.string().min(4,{message:"Username must be at least 4 characters"}),password:q.string().min(6,{message:"Password must be at least 6 characters"}),role:q.string().default("client"),latitude:q.number().optional(),longitude:q.number().optional()});function Ffe(){const[,t]=_n(),{toast:e}=Lt();y.useState(null);const s={role:"client",contractType:"residential"},r=mn({resolver:pn(Ofe),defaultValues:s}),i=Pt({mutationFn:async c=>{const d={user:{name:c.name,email:c.email,phone:c.phone||null,address:c.address||null,username:c.username,password:c.password,role:c.role},client:{companyName:c.companyName||null,contractType:c.contractType||null,latitude:c.latitude||null,longitude:c.longitude||null}};return console.log("Client data with coordinates:",d),await pt("/api/clients","POST")},onSuccess:()=>{ga.invalidateQueries({queryKey:["/api/clients"]}),e({title:"Client added",description:"The new client has been successfully added to the system."}),t("/clients")},onError:c=>{console.error("Error adding client:",c);let d="There was a problem adding the client. Please try again.";c.response&&c.response.data&&c.response.data.message?d=c.response.data.message:c.message&&(d=c.message),e({title:"Error",description:d,variant:"destructive"})}});function a(c){i.mutate(c)}const o=()=>{t("/clients")};return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs(H,{variant:"outline",onClick:o,children:[n.jsx(Vl,{className:"mr-2 h-4 w-4"})," Back"]})}),n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Add New Client"}),n.jsx(ct,{children:"Enter the details to add a new client to the system."})]}),n.jsx(Ee,{children:n.jsx(fn,{...r,children:n.jsxs("form",{onSubmit:r.handleSubmit(a),className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:r.control,name:"username",render:({field:c})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Username"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"username",...c})}),n.jsx(ne,{})]})}),n.jsx(J,{control:r.control,name:"password",render:({field:c})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Password"}),n.jsx(Q,{children:n.jsx(ve,{type:"password",placeholder:"******",...c})}),n.jsx(ne,{})]})})]})]}),n.jsx(pr,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:r.control,name:"name",render:({field:c})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Full Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"John Doe",...c})}),n.jsx(ne,{})]})}),n.jsx(J,{control:r.control,name:"email",render:({field:c})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Email Address"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"example@email.com",...c})}),n.jsx(ne,{})]})}),n.jsx(J,{control:r.control,name:"phone",render:({field:c})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Phone Number"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"(555) 555-5555",...c})}),n.jsx(ne,{})]})}),n.jsx(J,{control:r.control,name:"address",render:({field:c})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Address"}),n.jsx(Q,{children:n.jsx(Gz,{onAddressSelect:(d,h)=>{c.onChange(d),h?(r.setValue("latitude",h.latitude),r.setValue("longitude",h.longitude),console.log("Address geocoded:",h)):(r.setValue("latitude",void 0),r.setValue("longitude",void 0))},value:c.value||"",id:c.name,onBlur:c.onBlur})}),n.jsx(ot,{children:"Start typing to see address suggestions"}),n.jsx(ne,{})]})})]})]}),n.jsx(pr,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Client Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:r.control,name:"companyName",render:({field:c})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Company Name (Optional)"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Company Name",...c})}),n.jsx(ot,{children:"Leave blank for residential clients"}),n.jsx(ne,{})]})}),n.jsx(J,{control:r.control,name:"contractType",render:({field:c})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Contract Type"}),n.jsxs(gt,{onValueChange:c.onChange,defaultValue:c.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select contract type"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"residential",children:"Residential"}),n.jsx(ue,{value:"commercial",children:"Commercial"}),n.jsx(ue,{value:"service",children:"Service Only"}),n.jsx(ue,{value:"maintenance",children:"Maintenance"})]})]}),n.jsx(ne,{})]})})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(H,{variant:"outline",type:"button",onClick:o,children:"Cancel"}),n.jsx(H,{type:"submit",disabled:i.isPending,children:i.isPending?"Saving...":"Add Client"})]})]})})})]})]})}const xc=["residential","commercial","service","maintenance"],Bfe=q.object({name:q.string().min(2,{message:"Name must be at least 2 characters"}),email:q.string().email({message:"Please enter a valid email address"}),phone:q.string().optional().nullable(),address:q.string().optional().nullable(),companyName:q.string().optional().nullable(),latitude:q.number().optional().nullable(),longitude:q.number().optional().nullable(),contractType:q.string().transform(t=>{if(!t)return"residential";const e=String(t).toLowerCase();return xc.includes(e)?e:(console.warn(`Invalid contract type "${t}", defaulting to "residential"`),"residential")}).refine(t=>xc.includes(t),{message:`Contract type must be one of: ${xc.join(", ")}`})});function zfe(){const[,t]=ha("/clients/:id/edit"),e=t!=null&&t.id?parseInt(t.id):null,[,s]=_n(),{toast:r}=Lt(),i=jn(),[a,o]=y.useState("idle"),[c,d]=y.useState(null),[h,g]=y.useState(!0),[m,p]=y.useState(null),[v,j]=y.useState(null),[N,E]=y.useState(navigator.onLine),[_,S]=y.useState(!1),C=()=>{if(!e)return null;const B=localStorage.getItem(`client_edit_${e}`);if(B)try{return JSON.parse(B)}catch(Y){return console.error("Error parsing saved form data:",Y),null}return null},{data:I,isLoading:P,error:L}=wt({queryKey:["/api/clients",e],enabled:!!e}),T=mn({resolver:pn(Bfe),defaultValues:{name:"",email:"",phone:"",address:"",companyName:"",latitude:null,longitude:null,contractType:"residential"},mode:"onChange"});Pt({mutationFn:async B=>{if(!I||!e)return null;try{console.log(`[Client Update] Starting update process for client ID ${e}`);const Y={name:B.name,email:B.email,phone:B.phone||null,address:B.address||null};console.log(`[Client Update] Step 1: Updating user ${I.user.id} with data:`,Y),await pt(`/api/users/${I.user.id}`,"PATCH",Y),console.log("[Client Update] User update successful");let z="residential";if(B.contractType){const se=String(B.contractType).toLowerCase();xc.includes(se)?z=se:console.warn(`[Client Update] Contract type "${B.contractType}" is not valid, defaulting to "residential"`)}console.log("[Client Update] Step 2: Using normalized contract type:",z);const G={};if(I.companyName!==(B.companyName||null)&&(G.companyName=B.companyName||null),I.latitude!==B.latitude&&B.latitude!==void 0&&(G.latitude=B.latitude,console.log(`[Client Update] LATITUDE CHANGE: ${I.latitude}  ${B.latitude}`)),I.longitude!==B.longitude&&B.longitude!==void 0&&(G.longitude=B.longitude,console.log(`[Client Update] LONGITUDE CHANGE: ${I.longitude}  ${B.longitude}`)),(I.contractType?String(I.contractType).toLowerCase():null)!==z&&(G.contractType=z,console.log(`[Client Update] CONTRACT TYPE CHANGE: "${I.contractType}"  "${z}"`)),console.log("[Client Update] Step 3: Raw client data for update:",JSON.stringify(G)),!(Object.keys(G).length>0))return console.log("[Client Update] No client field changes detected, skipping client update"),I;console.log("[Client Update] Fields being updated:",Object.keys(G).join(", ")),console.log(`[Client Update] Step 4: Updating client ${e} with client-specific data:`,G);try{const se=await pt(`/api/clients/${e}`,"PATCH",G);return console.log("[Client Update] Client update successful, received:",se),se}catch(se){if(console.error("[Client Update] Error updating client:",se),(typeof se=="object"&&se!==null?se.message||JSON.stringify(se):String(se)).includes("match the expected pattern")){console.error("[Client Update] Pattern matching error detected. Forcing contractType to standard value.");const me={companyName:G.companyName,contractType:I.contractType||"residential"};return console.log("[Client Update] Trying with fallback data:",me),await pt(`/api/clients/${e}`,"PATCH",me)}throw se}}catch(Y){throw console.error("[Client Update] Error during update process:",Y),Y}},onSuccess:B=>{console.log("[Client Update Success] Response data:",B),console.log("[Client Update] Invalidating client queries"),i.invalidateQueries({queryKey:["/api/clients"]}),i.invalidateQueries({queryKey:["/api/clients",e]}),i.invalidateQueries({queryKey:["/api/dashboard"]})},onError:B=>{console.error("[Client Update Error]:",B);const Y=(B==null?void 0:B.message)||"Unknown error occurred";r({title:"Error updating client",description:`There was a problem updating the client: ${Y}. Please try again.`,variant:"destructive"}),i.invalidateQueries({queryKey:["/api/clients"]}),i.invalidateQueries({queryKey:["/api/clients",e]})}}),y.useEffect(()=>{const B=()=>{console.log("[Network] Device is now online"),E(!0),r({title:"Back online",description:"Your changes will now sync with the server"}),v&&e&&I&&(console.log("[Network] Attempting to sync offline data"),S(!0),(async()=>{try{console.log(`[Network Sync] Updating user ${I.user.id} with offline data`);const G={name:v.name,email:v.email,phone:v.phone||null,address:v.address||null};await pt(`/api/users/${I.user.id}`,"PATCH",G),console.log("[Network Sync] User update successful");const he={};I.companyName!==(v.companyName||null)&&(he.companyName=v.companyName||null),I.latitude!==v.latitude&&v.latitude!==void 0&&(he.latitude=v.latitude,console.log(`[Network Sync] LATITUDE CHANGE: ${I.latitude}  ${v.latitude}`)),I.longitude!==v.longitude&&v.longitude!==void 0&&(he.longitude=v.longitude,console.log(`[Network Sync] LONGITUDE CHANGE: ${I.longitude}  ${v.longitude}`));const le=String(v.contractType).toLowerCase();return(I.contractType?String(I.contractType).toLowerCase():null)!==le&&(he.contractType=le),Object.keys(he).length>0&&(console.log(`[Network Sync] Updating client ${e} with data:`,he),await pt(`/api/clients/${e}`,"PATCH",he)),console.log("[Network Sync] Sync completed successfully"),localStorage.removeItem(`client_edit_${e}`),j(null),S(!1),i.invalidateQueries({queryKey:["/api/clients"]}),i.invalidateQueries({queryKey:["/api/clients",e]}),r({title:"Data synced",description:"Your offline changes have been saved to the server"}),!0}catch(G){return console.error("[Network Sync] Failed to sync offline data:",G),S(!1),r({title:"Sync failed",description:"Unable to save your offline changes. They'll be saved locally until you're back online.",variant:"destructive"}),!1}})())},Y=()=>{console.log("[Network] Device is now offline"),E(!1),r({title:"You're offline",description:"Changes will be saved locally until you reconnect",variant:"default"})};return window.addEventListener("online",B),window.addEventListener("offline",Y),()=>{window.removeEventListener("online",B),window.removeEventListener("offline",Y)}},[e,v,r,I,i]),y.useEffect(()=>{if(e){const B=C();B&&(console.log("[Local Storage] Found saved form data:",B),j(B),r({title:"Unsaved changes found",description:"We've restored your previous edits"}))}},[e,r]),y.useEffect(()=>{if(I&&I.user){console.log("[Form Debug] Setting form with client data:",{contractType:I.contractType,companyName:I.companyName});let B="residential";if(I.contractType){const G=String(I.contractType).toLowerCase();xc.includes(G)?(B=G,console.log(`[Form Debug] Found valid contract type: "${G}"`)):console.warn(`Invalid contract type from server: "${I.contractType}", defaulting to "residential"`)}else console.log('[Form Debug] Client has no contract type, using default: "residential"');const Y=C(),z=Y||{name:I.user.name,email:I.user.email,phone:I.user.phone||"",address:I.user.address||"",companyName:I.companyName||"",latitude:I.latitude||null,longitude:I.longitude||null,contractType:B};console.log("[Form Debug] Final form values:",z),T.reset(z),d(z),o("idle"),Y&&r({title:"Restored unsaved changes",description:"You had unsaved changes that have been restored"})}},[I,T,r]);const M=B=>{if(e)try{localStorage.setItem(`client_edit_${e}`,JSON.stringify(B)),p(new Date),console.log("[Local Storage] Saved client edit data to localStorage")}catch(Y){console.error("[Local Storage] Error saving to localStorage:",Y)}},k=B=>{console.log("[Auto-save] Called debounced save with:",B),h&&(o("saving"),M(B),setTimeout(()=>{if(N&&c&&I){if(B.name===c.name&&B.email===c.email&&B.phone===c.phone&&B.address===c.address&&B.companyName===c.companyName&&B.latitude===c.latitude&&B.longitude===c.longitude&&String(B.contractType).toLowerCase()===String(c.contractType).toLowerCase()){console.log("[Auto-save] No changes detected, skipping server save"),o("saved"),setTimeout(()=>o("idle"),2e3);return}(async()=>{try{console.log(`[Manual Save] Updating user ${I.user.id} with data`);const z={name:B.name,email:B.email,phone:B.phone||null,address:B.address||null};await pt(`/api/users/${I.user.id}`,"PATCH",z),console.log("[Manual Save] User update successful");const G={};I.companyName!==(B.companyName||null)&&(G.companyName=B.companyName||null),I.latitude!==B.latitude&&B.latitude!==void 0&&(G.latitude=B.latitude,console.log(`[Debounced Save] LATITUDE CHANGE: ${I.latitude}  ${B.latitude}`)),I.longitude!==B.longitude&&B.longitude!==void 0&&(G.longitude=B.longitude,console.log(`[Debounced Save] LONGITUDE CHANGE: ${I.longitude}  ${B.longitude}`));const he=String(B.contractType).toLowerCase();return(I.contractType?String(I.contractType).toLowerCase():null)!==he&&(G.contractType=he),Object.keys(G).length>0&&(console.log(`[Manual Save] Updating client ${e} with data:`,G),await pt(`/api/clients/${e}`,"PATCH",G)),console.log("[Manual Save] Save completed successfully"),o("saved"),i.invalidateQueries({queryKey:["/api/clients"]}),i.invalidateQueries({queryKey:["/api/clients",e]}),d(B),j(null),e&&localStorage.removeItem(`client_edit_${e}`),setTimeout(()=>o("idle"),2e3),p(new Date),S(!1),!0}catch(z){return console.error("[Manual Save] Error saving data:",z),o("error"),j(B),setTimeout(()=>o("idle"),3e3),S(!1),!1}})()}else N||(console.log("[Auto-save] Device offline, storing changes for later sync"),j(B),o("saved"),setTimeout(()=>o("idle"),2e3))},500))};y.useEffect(()=>{if(!c)return;const B=T.watch(Y=>{if(!Y.name||!Y.email){console.log("[Auto-save] Incomplete required data, not saving");return}const z=T.getValues();let G="residential";if(z.contractType){const le=String(z.contractType).toLowerCase();xc.includes(le)&&(G=le)}const he={name:z.name,email:z.email,phone:z.phone||"",address:z.address||"",companyName:z.companyName||"",latitude:z.latitude,longitude:z.longitude,contractType:G};console.log("[Auto-save] Change detected, will save after debounce:",he),o("saving"),setTimeout(()=>{k(he)},1e3)});return()=>B.unsubscribe()},[T,c,I,e,h,N]);function O(B){console.log("[Submit] Form submitted, navigating back to client details"),s(e?`/clients/${e}`:"/clients")}const V=()=>{s(e?`/clients/${e}`:"/clients")};return P?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx("p",{children:"Loading client details..."})}):L||!I?n.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[n.jsx("p",{className:"text-red-500",children:"Error loading client details."}),n.jsxs(H,{variant:"outline",className:"mt-4",onClick:V,children:[n.jsx(Vl,{className:"mr-2 h-4 w-4"})," Back"]})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs(H,{variant:"outline",onClick:V,children:[n.jsx(Vl,{className:"mr-2 h-4 w-4"})," Back"]})}),n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Edit Client"}),n.jsx(ct,{children:"Update the client's information."})]}),n.jsx(Ee,{children:n.jsx(fn,{...T,children:n.jsxs("form",{onSubmit:T.handleSubmit(O),className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 bg-muted/30 p-3 rounded-md",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Wr,{htmlFor:"autosave",className:"cursor-pointer",children:"Autosave"}),n.jsx(is,{id:"autosave",checked:h,onCheckedChange:g}),a==="saving"&&n.jsxs(Ze,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 animate-pulse",children:[n.jsx(fy,{className:"h-3 w-3 mr-1 animate-pulse"}),"Saving..."]}),a==="saved"&&n.jsxs(Ze,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[n.jsx(Ao,{className:"h-3 w-3 mr-1"}),"Saved"]}),a==="error"&&n.jsxs(Ze,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:[n.jsx("span",{className:"h-3 w-3 mr-1",children:"!"}),"Error Saving"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[N?n.jsxs(Ze,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[n.jsx(wL,{className:"h-3 w-3 mr-1"}),"Online"]}):n.jsxs(Ze,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200",children:[n.jsx(yL,{className:"h-3 w-3 mr-1"}),"Offline"]}),m&&n.jsxs("span",{className:"text-xs text-muted-foreground flex items-center",children:[n.jsx(Ur,{className:"h-3 w-3 mr-1"}),"Last saved: ",m.toLocaleTimeString()]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:T.control,name:"name",render:({field:B})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Full Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"John Doe",...B})}),n.jsx(ne,{})]})}),n.jsx(J,{control:T.control,name:"email",render:({field:B})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Email Address"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"example@email.com",...B})}),n.jsx(ne,{})]})}),n.jsx(J,{control:T.control,name:"phone",render:({field:B})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Phone Number"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"(555) 555-5555",...B,value:B.value||""})}),n.jsx(ne,{})]})}),n.jsx(J,{control:T.control,name:"address",render:({field:B})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Address"}),n.jsx(Q,{children:n.jsx(Gz,{onAddressSelect:(Y,z)=>{B.onChange(Y),z&&(T.setValue("latitude",z.latitude),T.setValue("longitude",z.longitude),console.log("Address coordinates set:",z))},value:B.value||"",id:B.name,onBlur:B.onBlur})}),n.jsx(ot,{children:"Start typing to see address suggestions"}),n.jsx(ne,{})]})})]})]}),n.jsx(pr,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Client Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:T.control,name:"companyName",render:({field:B})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Company Name (Optional)"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Company Name",...B,value:B.value||""})}),n.jsx(ot,{children:"Leave blank for residential clients"}),n.jsx(ne,{})]})}),n.jsx(J,{control:T.control,name:"contractType",render:({field:B})=>{console.log(`[Contract Type Field] Current value: "${B.value}"`);let Y="residential";if(B.value){const z=String(B.value).toLowerCase();xc.includes(z)?Y=z:console.warn(`Invalid contract type detected: "${z}", defaulting to "residential"`)}return n.jsxs(Z,{children:[n.jsx(X,{children:"Contract Type"}),n.jsxs(gt,{onValueChange:z=>{if(console.log(`[Contract Type Field] Select changed to: "${z}" (from UI)`),!xc.includes(z)){console.warn(`Invalid contract type selected: "${z}"`),r({title:"Invalid selection",description:`"${z}" is not a valid contract type`,variant:"destructive"});return}o("saving");const G=z.toLowerCase();B.onChange(G),console.log(`[Contract Type Field] Using direct API for type update to "${G}"`),pt(`/api/clients/${e}/contract-type`,"POST").then(he=>{console.log("[Contract Type Field] Direct API response:",he),o("saved"),setTimeout(()=>o("idle"),2e3),d({...c,contractType:G}),i.invalidateQueries({queryKey:["/api/clients"]}),i.invalidateQueries({queryKey:["/api/clients",e]}),r({title:"Contract type updated",description:`Contract type successfully changed to ${G}`})}).catch(he=>{console.error("[Contract Type Field] Direct API error:",he),o("error"),r({title:"Update failed",description:`Could not update contract type: ${he.message||"Unknown error"}`,variant:"destructive"})})},value:Y,defaultValue:"residential",children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select contract type"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"residential",children:"Residential"}),n.jsx(ue,{value:"commercial",children:"Commercial"}),n.jsx(ue,{value:"service",children:"Service Only"}),n.jsx(ue,{value:"maintenance",children:"Maintenance"})]})]}),n.jsxs(ot,{children:["Contract type: ",Y," (DB value: ",(I==null?void 0:I.contractType)||"none",")"]}),n.jsx(ne,{})]})}})]})]}),n.jsx("div",{className:"flex justify-end items-center mt-6",children:n.jsx(H,{variant:"default",type:"button",onClick:V,children:"Done"})})]})})})]})]})}function Vfe({technicians:t,isLoading:e,onTechnicianSelect:s}){return e?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array(6).fill(0).map((r,i)=>n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx(_e,{className:"h-16 w-16 rounded-full"}),n.jsxs("div",{className:"ml-4 space-y-2 flex-1",children:[n.jsx(_e,{className:"h-5 w-32"}),n.jsx(_e,{className:"h-4 w-24"}),n.jsxs("div",{className:"flex mt-1",children:[n.jsx(_e,{className:"h-4 w-4 rounded-full mr-1"}),n.jsx(_e,{className:"h-4 w-4 rounded-full mr-1"}),n.jsx(_e,{className:"h-4 w-4 rounded-full mr-1"}),n.jsx(_e,{className:"h-4 w-4 rounded-full mr-1"}),n.jsx(_e,{className:"h-4 w-4 rounded-full mr-1"})]})]})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(_e,{className:"h-4 w-4 mr-2"}),n.jsx(_e,{className:"h-4 w-32"})]}),n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(_e,{className:"h-4 w-4 mr-2"}),n.jsx(_e,{className:"h-4 w-24"})]}),n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(_e,{className:"h-4 w-4 mr-2"}),n.jsx(_e,{className:"h-4 w-48"})]}),n.jsx("div",{className:"flex gap-2",children:n.jsx(_e,{className:"h-9 w-full rounded-md"})})]})]},i))}):t.length===0?n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm text-center",children:n.jsx("p",{className:"text-gray-500",children:"No technicians found."})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(r=>n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"h-16 w-16 rounded-full bg-primary text-white flex items-center justify-center text-xl flex-shrink-0",children:r.user.name.charAt(0)}),n.jsxs("div",{className:"ml-4 min-w-0 flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold truncate",children:r.user.name}),n.jsx("p",{className:"text-sm text-gray-500 truncate",children:r.specialization}),n.jsxs("div",{className:"flex items-center mt-1",children:[n.jsx("div",{className:"flex flex-shrink-0",children:[1,2,3,4,5].map(i=>n.jsx(vL,{className:"h-4 w-4 text-yellow-400 fill-yellow-400"},i))}),n.jsx("span",{className:"ml-1 text-xs text-gray-500",children:"(32)"})]})]})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[n.jsxs("div",{className:"space-y-2 mb-4",children:[n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(Qs,{className:"h-4 w-4 text-gray-400 mr-2 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:r.user.email})]}),r.user.phone&&n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(qr,{className:"h-4 w-4 text-gray-400 mr-2 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:r.user.phone})]}),r.user.address&&n.jsxs("div",{className:"flex items-start text-sm",children:[n.jsx(bi,{className:"h-4 w-4 text-gray-400 mr-2 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:r.user.address})]})]}),n.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:r.certifications&&r.certifications.split(",").map((i,a)=>n.jsx(Ze,{variant:"secondary",className:"bg-blue-100 text-primary hover:bg-blue-200",children:i.trim()},a))}),n.jsx(H,{onClick:()=>s(r),variant:"outline",className:"w-full",children:"View Details"})]})]},r.id))})}const $fe=q.object({user:q.object({name:q.string().min(2,{message:"Name must be at least 2 characters"}),email:q.string().email({message:"Please enter a valid email address"}),phone:q.string().optional(),address:q.string().optional()}),specialization:q.string().min(2,{message:"Specialization is required"}),certifications:q.string().optional(),rate:q.string().optional(),notes:q.string().optional()});function Ufe({onSuccess:t}){const{toast:e}=Lt(),s=jn(),[r,i]=y.useState(!1),{isAuthenticated:a,user:o,checkSession:c}=Kr(),d=mn({resolver:pn($fe),defaultValues:{user:{name:"",email:"",phone:"",address:""},specialization:"",certifications:"",rate:"",notes:""}}),h=Pt({mutationFn:async m=>{try{const p=await fetch("/api/technicians/create",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(m)});if(!p.ok){const v=await p.json(),j=new Error(v.error||"Failed to create technician");throw j.status=p.status,j}return await p.json()}catch(p){throw console.error("API Request Error:",p),p}},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/technicians-with-users"]}),e({title:"Technician created",description:"The technician has been successfully added"}),d.reset(),t&&t()},onError:m=>{var p,v,j;console.error("Error creating technician:",m),m.status===401||(p=m.message)!=null&&p.includes("Unauthorized")?e({title:"Authentication Required",description:"You need to be logged in to create a technician. Please log in and try again.",variant:"destructive"}):(v=m.message)!=null&&v.includes("Missing required user data")?e({title:"Missing Information",description:"Please fill in all required fields including name and email.",variant:"destructive"}):(j=m.message)!=null&&j.includes("exists")?e({title:"Email Already in Use",description:"A user with this email already exists. Please use a different email address.",variant:"destructive"}):e({title:"Error",description:m.message||"Failed to create technician. Please try again.",variant:"destructive"})},onSettled:()=>{i(!1)}});y.useEffect(()=>{c().catch(m=>{console.error("Failed to check session on component mount:",m)})},[c]);const g=async m=>{try{if(!a&&!await c()){i(!1),e({title:"Authentication Required",description:"You need to be logged in to create a technician. Please login first.",variant:"destructive"});return}const p={user:{name:m.user.name.trim(),email:m.user.email.trim(),phone:m.user.phone?m.user.phone.trim():null,address:m.user.address?m.user.address.trim():null},specialization:m.specialization.trim(),certifications:m.certifications?m.certifications.trim():null,rate:m.rate?m.rate.trim():null,notes:m.notes?m.notes.trim():null};i(!0),h.mutate(p)}catch(p){console.error("Error during form submission:",p),i(!1),e({title:"Error",description:"Failed to process your request. Please try again.",variant:"destructive"})}};return n.jsx(fn,{...d,children:n.jsxs("form",{onSubmit:d.handleSubmit(g),className:"space-y-6",children:[!a&&n.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3 mb-4",children:n.jsxs("p",{className:"text-amber-800 text-sm flex items-center",children:[n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"You must be logged in to add a technician. Please log in first."]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"User Information"}),n.jsx(J,{control:d.control,name:"user.name",render:({field:m})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Full Name *"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"John Doe",...m})}),n.jsx(ne,{})]})}),n.jsx(J,{control:d.control,name:"user.email",render:({field:m})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Email *"}),n.jsx(Q,{children:n.jsx(ve,{type:"email",placeholder:"john.doe@example.com",...m})}),n.jsx(ne,{})]})}),n.jsx(J,{control:d.control,name:"user.phone",render:({field:m})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Phone Number"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"(555) 555-5555",...m})}),n.jsx(ne,{})]})}),n.jsx(J,{control:d.control,name:"user.address",render:({field:m})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Address"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"123 Main St, City, State 12345",...m})}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Professional Information"}),n.jsx(J,{control:d.control,name:"specialization",render:({field:m})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Specialization *"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Pool Maintenance, Repairs, Installation, etc.",...m})}),n.jsx(ne,{})]})}),n.jsx(J,{control:d.control,name:"certifications",render:({field:m})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Certifications"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Certified Pool Operator, NSPF Certified, etc.",...m})}),n.jsx(ne,{}),n.jsx("p",{className:"text-sm text-gray-500",children:"Separate multiple certifications with commas"})]})}),n.jsx(J,{control:d.control,name:"rate",render:({field:m})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Hourly Rate"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"$50.00",...m})}),n.jsx(ne,{})]})}),n.jsx(J,{control:d.control,name:"notes",render:({field:m})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Additional Notes"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Additional information about the technician",...m,rows:3})}),n.jsx(ne,{})]})})]}),n.jsx(H,{type:"submit",className:"w-full",disabled:r||!a,children:r?"Adding Technician...":a?"Add Technician":"Please Log In First"})]})})}function Wfe(){const[t,e]=y.useState(!1),[s,r]=y.useState(null),[i,a]=y.useState(""),{data:o,isLoading:c}=wt({queryKey:["/api/technicians-with-users"]}),d=o==null?void 0:o.filter(h=>!(i&&!h.user.name.toLowerCase().includes(i.toLowerCase())&&!h.specialization.toLowerCase().includes(i.toLowerCase())&&!h.user.email.toLowerCase().includes(i.toLowerCase())));return n.jsxs("div",{className:"w-full max-w-full overflow-hidden",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground font-heading mb-3 md:mb-0",children:"Technicians"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[n.jsxs("div",{className:"relative flex-1 sm:flex-initial",children:[n.jsx(ve,{type:"text",placeholder:"Search technicians...",className:"pl-10 pr-4 w-full",value:i,onChange:h=>a(h.target.value)}),n.jsx(Bi,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]}),n.jsxs(An,{open:t,onOpenChange:e,children:[n.jsx(ll,{asChild:!0,children:n.jsxs(H,{className:"bg-primary hover:bg-primary/90 text-white font-medium whitespace-nowrap",children:[n.jsx(gi,{className:"h-4 w-4 mr-1 flex-shrink-0"}),n.jsx("span",{children:"Add Technician"})]})}),n.jsxs(wn,{className:"max-w-md overflow-y-auto max-h-[90vh]",children:[n.jsx(Tn,{children:n.jsx(Mn,{children:"Add New Technician"})}),n.jsx("div",{className:"space-y-4 py-2",children:n.jsx(Ufe,{onSuccess:()=>e(!1)})})]})]})]})]}),n.jsx("div",{className:"mb-6",children:n.jsx(Vfe,{technicians:d||[],isLoading:c,onTechnicianSelect:r})}),s&&n.jsx(An,{open:!!s,onOpenChange:()=>r(null),children:n.jsxs(wn,{className:"max-w-2xl overflow-y-auto max-h-[90vh]",children:[n.jsx(Tn,{children:n.jsx(Mn,{children:"Technician Details"})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx("div",{className:"md:col-span-1",children:n.jsx(Ae,{children:n.jsxs(Ee,{className:"pt-6",children:[n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"h-20 w-20 sm:h-24 sm:w-24 rounded-full bg-primary text-white flex items-center justify-center text-2xl sm:text-3xl mb-4",children:s.user.name.charAt(0)}),n.jsx("h3",{className:"text-lg font-semibold text-center",children:s.user.name}),n.jsx("p",{className:"text-sm text-gray-500 text-center",children:s.specialization}),n.jsxs("div",{className:"mt-2 flex items-center",children:[n.jsx("div",{className:"flex items-center flex-shrink-0",children:[1,2,3,4,5].map(h=>n.jsx(vL,{className:"h-4 w-4 text-yellow-400 fill-yellow-400"},h))}),n.jsx("span",{className:"ml-1 text-xs text-gray-500",children:"(32 reviews)"})]})]}),n.jsxs("div",{className:"mt-6 space-y-3",children:[n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(Qs,{className:"h-4 w-4 text-gray-400 mr-2 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:s.user.email})]}),s.user.phone&&n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(qr,{className:"h-4 w-4 text-gray-400 mr-2 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:s.user.phone})]}),s.user.address&&n.jsxs("div",{className:"flex items-start text-sm",children:[n.jsx(bi,{className:"h-4 w-4 text-gray-400 mr-2 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:s.user.address})]})]})]})})}),n.jsxs("div",{className:"md:col-span-2 space-y-4",children:[n.jsx(Ae,{children:n.jsxs(Ee,{className:"pt-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(_G,{className:"h-5 w-5 text-primary mr-2 flex-shrink-0"}),n.jsx("h3",{className:"text-lg font-semibold truncate",children:"Certifications"})]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:s.certifications?s.certifications.split(",").map((h,g)=>n.jsx("div",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-primary mb-2",children:h.trim()},g)):n.jsx("p",{className:"text-sm text-gray-500",children:"No certifications listed."})})]})}),n.jsx(Ae,{children:n.jsxs(Ee,{className:"pt-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(tn,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0"}),n.jsx("h3",{className:"text-lg font-semibold truncate",children:"Current Assignments"})]}),c?n.jsxs("div",{className:"space-y-2",children:[n.jsx(_e,{className:"h-20 w-full"}),n.jsx(_e,{className:"h-20 w-full"})]}):n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-sm truncate",children:"Mediterranean Luxury Pool"}),n.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Construction - Morrison Family"}),n.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2",children:[n.jsx("span",{className:"text-xs text-blue-600",children:"In Progress (68%)"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Role: Lead"})]})]})})]})}),n.jsx(Ae,{children:n.jsxs(Ee,{className:"pt-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(Jh,{className:"h-5 w-5 text-yellow-500 mr-2 flex-shrink-0"}),n.jsx("h3",{className:"text-lg font-semibold truncate",children:"Upcoming Schedule"})]}),c?n.jsxs("div",{className:"space-y-2",children:[n.jsx(_e,{className:"h-16 w-full"}),n.jsx(_e,{className:"h-16 w-full"})]}):n.jsx("div",{className:"space-y-3",children:n.jsx("div",{className:"border border-gray-100 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-start",children:[n.jsxs("div",{className:"flex flex-col items-center justify-center bg-blue-100 rounded-lg p-2 mr-3 flex-shrink-0 w-12 h-12 text-center",children:[n.jsx("span",{className:"text-primary text-sm font-semibold",children:"27"}),n.jsx("span",{className:"text-primary text-xs",children:"Oct"})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-sm font-medium text-foreground truncate",children:"Jensen Family"}),n.jsx("p",{className:"text-xs text-gray-500 truncate",children:"Weekly Pool Cleaning"}),n.jsx("div",{className:"flex items-center mt-1",children:n.jsx("span",{className:"text-xs bg-blue-100 text-primary px-2 py-0.5 rounded-full",children:"10:00 AM"})})]})]})})})]})})]})]})]})})]})}function Hfe(){const{id:t}=id(),[e,s]=_n(),[r,i]=y.useState(null),[a,o]=y.useState(!0),[c,d]=y.useState("overview");return y.useEffect(()=>{t&&fetch(`/api/clients/${t}`).then(h=>h.json()).then(h=>{i(h),o(!1)}).catch(h=>{console.error("Error fetching client:",h),o(!1)})},[t]),a?n.jsxs("div",{className:"container mx-auto p-6",children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx(_e,{className:"h-8 w-40 mr-4"}),n.jsx(_e,{className:"h-8 w-24"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(_e,{className:"h-40 w-full"}),n.jsx(_e,{className:"h-40 w-full"}),n.jsx(_e,{className:"h-40 w-full"})]})]}):r?n.jsxs("div",{className:"container mx-auto p-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold",children:[r.user.name,"'s Pool Management"]}),n.jsx("p",{className:"text-gray-500",children:r.address})]}),n.jsxs("div",{className:"mt-4 md:mt-0 flex gap-2",children:[n.jsx(H,{variant:"outline",onClick:()=>s(`/clients/${t}/edit`),children:"Edit Client"}),n.jsx(H,{children:"Schedule Service"})]})]}),n.jsxs(ps,{defaultValue:"overview",className:"space-y-6",onValueChange:d,children:[n.jsxs(gs,{className:"bg-white border",children:[n.jsx(Ge,{value:"overview",children:"Overview"}),n.jsx(Ge,{value:"maintenance",children:"Maintenance"}),n.jsx(Ge,{value:"waterQuality",children:"Water Quality"}),n.jsx(Ge,{value:"equipment",children:"Equipment"}),n.jsx(Ge,{value:"history",children:"Service History"})]}),n.jsx(Qe,{value:"overview",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(Ae,{className:"bg-white",children:[n.jsx(Be,{className:"pb-2",children:n.jsxs(Ve,{className:"flex items-center text-lg",children:[n.jsx(Ga,{className:"mr-2 h-5 w-5 text-blue-500"}),"Pool Status"]})}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-500",children:"Last Service:"}),n.jsx("span",{className:"font-medium",children:r.lastServiceDate?ln(r.lastServiceDate):"Never"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-500",children:"Pool Type:"}),n.jsx("span",{className:"font-medium",children:r.poolType||"In-ground"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-500",children:"Size:"}),n.jsx("span",{className:"font-medium",children:r.poolSize||"15,000 gallons"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-500",children:"Filter Type:"}),n.jsx("span",{className:"font-medium",children:r.filterType||"Sand"})]})]})})]}),n.jsxs(Ae,{className:"bg-white",children:[n.jsx(Be,{className:"pb-2",children:n.jsxs(Ve,{className:"flex items-center text-lg",children:[n.jsx(IG,{className:"mr-2 h-5 w-5 text-green-500"}),"Water Chemistry"]})}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-500",children:"Chlorine:"}),n.jsxs(Ze,{variant:r.chlorineLevel&&r.chlorineLevel>1?"default":"destructive",children:[r.chlorineLevel||"2.5"," ppm"]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-500",children:"pH Level:"}),n.jsx(Ze,{variant:r.phLevel&&r.phLevel>7.2&&r.phLevel<7.8?"default":"secondary",children:r.phLevel||"7.4"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-500",children:"Alkalinity:"}),n.jsxs(Ze,{variant:"outline",children:[r.alkalinity||"120"," ppm"]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-500",children:"Last Tested:"}),n.jsx("span",{className:"text-sm",children:r.lastWaterTest?ln(r.lastWaterTest):"3 days ago"})]})]})})]}),n.jsxs(Ae,{className:"bg-white",children:[n.jsx(Be,{className:"pb-2",children:n.jsxs(Ve,{className:"flex items-center text-lg",children:[n.jsx(tn,{className:"mr-2 h-5 w-5 text-indigo-500"}),"Upcoming Service"]})}),n.jsx(Ee,{children:r.upcomingService?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ur,{className:"h-4 w-4 mr-2 text-gray-500"}),n.jsx("span",{children:ln(r.upcomingService.date)})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(aL,{className:"h-4 w-4 mr-2 text-gray-500"}),n.jsx("span",{children:r.upcomingService.type||"Regular Maintenance"})]}),n.jsx("div",{className:"mt-4",children:n.jsx(H,{className:"w-full",children:"Reschedule"})})]}):n.jsxs("div",{className:"text-center py-6",children:[n.jsx("p",{className:"text-gray-500 mb-4",children:"No upcoming service scheduled"}),n.jsx(H,{variant:"outline",children:"Schedule Service"})]})})]})]})}),n.jsx(Qe,{value:"maintenance",children:n.jsxs(Ae,{className:"bg-white",children:[n.jsx(Be,{children:n.jsx(Ve,{children:"Maintenance History"})}),n.jsx(Ee,{children:n.jsx("div",{className:"space-y-4",children:r.maintenanceHistory&&r.maintenanceHistory.length>0?r.maintenanceHistory.map((h,g)=>n.jsxs("div",{className:"flex items-start p-3 border rounded-lg",children:[n.jsx("div",{className:"bg-blue-100 p-2 rounded-full mr-3",children:n.jsx(uL,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("h4",{className:"font-medium",children:h.type}),n.jsx("span",{className:"text-sm text-gray-500",children:ln(h.date)})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:h.notes}),n.jsx("div",{className:"flex items-center mt-2",children:n.jsxs("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full",children:["Performed by: ",h.technician]})})]})]},g)):n.jsx("div",{className:"text-center py-6",children:n.jsx("p",{className:"text-gray-500",children:"No maintenance records available"})})})})]})}),n.jsx(Qe,{value:"waterQuality",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs(Ae,{className:"bg-white",children:[n.jsx(Be,{children:n.jsx(Ve,{children:"Water Chemistry Trends"})}),n.jsxs(Ee,{children:[n.jsx("div",{className:"h-64 flex items-center justify-center border rounded-lg bg-gray-50",children:n.jsx("p",{className:"text-gray-500",children:"Water chemistry graph will appear here"})}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[n.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"pH"}),n.jsx("h3",{className:"text-xl font-bold",children:r.phLevel||"7.4"}),n.jsx("p",{className:"text-xs text-green-600",children:"Optimal"})]}),n.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Chlorine"}),n.jsx("h3",{className:"text-xl font-bold",children:r.chlorineLevel||"2.5"}),n.jsx("p",{className:"text-xs text-green-600",children:"Good"})]}),n.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Alkalinity"}),n.jsx("h3",{className:"text-xl font-bold",children:r.alkalinity||"120"}),n.jsx("p",{className:"text-xs text-green-600",children:"Optimal"})]})]})]})]}),n.jsxs(Ae,{className:"bg-white",children:[n.jsx(Be,{children:n.jsx(Ve,{children:"Treatment Recommendations"})}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-3 border rounded-lg bg-blue-50",children:[n.jsx("h4",{className:"font-medium text-blue-700",children:"Weekly Shock Treatment"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Add 1lb of shock treatment to maintain proper sanitization levels."})]}),n.jsxs("div",{className:"p-3 border rounded-lg",children:[n.jsx("h4",{className:"font-medium",children:"Alkalinity Adjustment"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"No adjustment needed. Current levels are within optimal range."})]}),n.jsxs("div",{className:"p-3 border rounded-lg",children:[n.jsx("h4",{className:"font-medium",children:"pH Balance"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"No adjustment needed. Current pH is ideal."})]})]})})]})]})}),n.jsx(Qe,{value:"equipment",children:n.jsxs(Ae,{className:"bg-white",children:[n.jsx(Be,{children:n.jsx(Ve,{children:"Pool Equipment"})}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("h4",{className:"font-medium",children:"Pool Pump"}),n.jsx(Ze,{variant:"outline",children:"Working"})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Hayward Super Pump 1.5 HP"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Installed: Jan 2022"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Last Service: 2 months ago"})]}),n.jsxs("div",{className:"p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("h4",{className:"font-medium",children:"Filter System"}),n.jsx(Ze,{variant:"outline",children:"Working"})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"SmartWater Sand Filter"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Installed: Jan 2022"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Last Backwash: 2 weeks ago"})]}),n.jsxs("div",{className:"p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("h4",{className:"font-medium",children:"Heater"}),n.jsx(Ze,{variant:"secondary",children:"Maintenance Needed"})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"SmartWater MasterTemp 400"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Installed: Jan 2022"}),n.jsx("p",{className:"text-sm text-gray-500 text-amber-600",children:"Issue: Ignition failure"})]}),n.jsxs("div",{className:"p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("h4",{className:"font-medium",children:"Salt Chlorinator"}),n.jsx(Ze,{variant:"outline",children:"Working"})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Hayward AquaRite"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Installed: Jan 2022"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Salt Level: Optimal"})]})]}),n.jsx("div",{className:"mt-4",children:n.jsx(H,{variant:"outline",children:"Request Equipment Service"})})]})})]})}),n.jsx(Qe,{value:"history",children:n.jsx("div",{className:"space-y-6",children:n.jsxs(ps,{defaultValue:"all",children:[n.jsx("div",{className:"flex justify-center w-full overflow-x-auto pb-2",children:n.jsxs(gs,{className:"justify-center min-w-max",children:[n.jsx(Ge,{value:"all",children:"All Services"}),n.jsx(Ge,{value:"maintenance",children:"Maintenance"}),n.jsx(Ge,{value:"repair",children:"Repairs"}),n.jsx(Ge,{value:"construction",children:"Construction"})]})}),n.jsx(Qe,{value:"all",children:n.jsxs(Ae,{className:"bg-white",children:[n.jsx(Be,{children:n.jsx(Ve,{children:"Service History"})}),n.jsx(Ee,{children:n.jsx("div",{className:"space-y-4",children:r.serviceHistory&&r.serviceHistory.length>0?r.serviceHistory.map((h,g)=>n.jsxs("div",{className:"flex items-start p-4 border rounded-lg",children:[n.jsx("div",{className:"mr-4",children:n.jsx("div",{className:`p-3 rounded-full ${h.category==="repair"?"bg-amber-100":h.category==="construction"?"bg-indigo-100":"bg-blue-100"}`,children:h.category==="repair"?n.jsx(Hs,{className:"h-5 w-5 text-amber-600"}):h.category==="construction"?n.jsx(tu,{className:"h-5 w-5 text-indigo-600"}):n.jsx(Ga,{className:"h-5 w-5 text-blue-600"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:h.type}),n.jsx(Ze,{className:"mt-1",variant:h.category==="repair"?"destructive":h.category==="construction"?"secondary":"default",children:h.category})]}),n.jsx("span",{className:"text-sm text-gray-500 mt-1 sm:mt-0",children:ln(h.date)})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-2",children:h.notes}),n.jsx("div",{className:"flex items-center mt-2",children:n.jsxs("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full",children:["Performed by: ",h.technician]})})]})]},g)):n.jsx("div",{className:"text-center py-6",children:n.jsx("p",{className:"text-gray-500",children:"No service records available"})})})})]})}),n.jsx(Qe,{value:"maintenance",children:n.jsxs(Ae,{className:"bg-white",children:[n.jsx(Be,{children:n.jsx(Ve,{children:"Maintenance History"})}),n.jsx(Ee,{children:n.jsx("div",{className:"space-y-4",children:r.serviceHistory&&r.serviceHistory.filter(h=>h.category==="maintenance").length>0?r.serviceHistory.filter(h=>h.category==="maintenance").map((h,g)=>n.jsxs("div",{className:"flex items-start p-4 border rounded-lg",children:[n.jsx("div",{className:"mr-4",children:n.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:n.jsx(Ga,{className:"h-5 w-5 text-blue-600"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between",children:[n.jsx("h4",{className:"font-medium",children:h.type||"Regular Maintenance"}),n.jsx("span",{className:"text-sm text-gray-500 mt-1 sm:mt-0",children:ln(h.date)})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:h.notes}),h.waterChemistry&&n.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-3 gap-2 mt-3",children:[n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"pH:"})," ",h.waterChemistry.ph||"N/A"]}),n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"Chlorine:"})," ",h.waterChemistry.chlorine||"N/A"," ppm"]}),n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"Alkalinity:"})," ",h.waterChemistry.alkalinity||"N/A"," ppm"]})]}),n.jsx("div",{className:"flex items-center mt-2",children:n.jsxs("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full",children:["Performed by: ",h.technician]})})]})]},g)):n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"No maintenance history available"})})})})]})}),n.jsx(Qe,{value:"repair",children:n.jsxs(Ae,{className:"bg-white",children:[n.jsx(Be,{children:n.jsx(Ve,{children:"Repair History"})}),n.jsx(Ee,{children:n.jsx("div",{className:"space-y-4",children:r.serviceHistory&&r.serviceHistory.filter(h=>h.category==="repair").length>0?r.serviceHistory.filter(h=>h.category==="repair").map((h,g)=>{var m;return n.jsxs("div",{className:"flex items-start p-4 border rounded-lg",children:[n.jsx("div",{className:"mr-4",children:n.jsx("div",{className:"bg-amber-100 p-3 rounded-full",children:n.jsx(Hs,{className:"h-5 w-5 text-amber-600"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between",children:[n.jsx("h4",{className:"font-medium",children:h.type||"Equipment Repair"}),n.jsx("span",{className:"text-sm text-gray-500 mt-1 sm:mt-0",children:ln(h.date)})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:h.notes}),n.jsxs("div",{className:"flex flex-col xs:flex-row gap-2 mt-3",children:[n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"Cost:"})," $",((m=h.cost)==null?void 0:m.toFixed(2))||"0.00"]}),n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"Technician:"})," ",h.technician]})]})]})]},g)}):n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"No repair history available"})})})})]})}),n.jsx(Qe,{value:"construction",children:n.jsxs(Ae,{className:"bg-white",children:[n.jsx(Be,{children:n.jsx(Ve,{children:"Construction History"})}),n.jsx(Ee,{children:n.jsx("div",{className:"space-y-4",children:r.serviceHistory&&r.serviceHistory.filter(h=>h.category==="construction").length>0?r.serviceHistory.filter(h=>h.category==="construction").map((h,g)=>{var m;return n.jsxs("div",{className:"flex items-start p-4 border rounded-lg",children:[n.jsx("div",{className:"mr-4",children:n.jsx("div",{className:"bg-indigo-100 p-3 rounded-full",children:n.jsx(tu,{className:"h-5 w-5 text-indigo-600"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between",children:[n.jsx("h4",{className:"font-medium",children:h.type||"Construction"}),n.jsx("span",{className:"text-sm text-gray-500 mt-1 sm:mt-0",children:ln(h.date)})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:h.notes}),n.jsxs("div",{className:"flex flex-col xs:flex-row gap-2 mt-3",children:[n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"Project Value:"})," $",((m=h.cost)==null?void 0:m.toFixed(2))||"0.00"]}),n.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded-md",children:[n.jsx("span",{className:"text-gray-500",children:"Supervisor:"})," ",h.technician]})]}),n.jsx(H,{variant:"ghost",size:"sm",className:"mt-2",children:"View Project Details"})]})]},g)}):n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"No construction/renovation history available"})})})})]})})]})})})]})]}):n.jsxs("div",{className:"container mx-auto p-6",children:[n.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Client not found"}),n.jsx(H,{onClick:()=>s("/clients"),children:"Back to Clients"})]})}const qfe=q.object({poolType:q.string().min(1,{message:"Pool type is required"}),poolSize:q.string().min(1,{message:"Pool size is required"}),filterType:q.string().min(1,{message:"Filter type is required"}),heaterType:q.string().nullable().optional(),chemicalSystem:q.string().min(1,{message:"Chemical system is required"}),specialNotes:q.string().optional(),serviceDay:q.string().optional(),equipment:q.array(q.object({name:q.string().min(1,{message:"Equipment name is required"}),type:q.string().min(1,{message:"Equipment type is required"}),brand:q.string().optional(),model:q.string().optional(),serialNumber:q.string().optional(),installDate:q.string().optional(),status:q.string().default("operational"),notes:q.string().optional()})).optional().default([]),images:q.array(q.object({imageUrl:q.string().min(1,{message:"Image URL is required"}),caption:q.string().optional(),category:q.string().optional()})).optional().default([])}),Gfe=[{value:"inground",label:"In-Ground"},{value:"aboveground",label:"Above Ground"},{value:"vinyl",label:"Vinyl Liner"},{value:"fiberglass",label:"Fiberglass"},{value:"gunite",label:"Gunite/Concrete"},{value:"other",label:"Other"}],Yfe=[{value:"sand",label:"Sand Filter"},{value:"cartridge",label:"Cartridge Filter"},{value:"de",label:"DE (Diatomaceous Earth) Filter"},{value:"other",label:"Other"}],Kfe=[{value:"gas",label:"Gas Heater"},{value:"electric",label:"Electric Heater"},{value:"heatpump",label:"Heat Pump"},{value:"solar",label:"Solar Heating"},{value:"none",label:"No Heater"}],Zfe=[{value:"chlorine",label:"Traditional Chlorine"},{value:"salt",label:"Salt Water Chlorinator"},{value:"mineral",label:"Mineral System"},{value:"ozone",label:"Ozone System"},{value:"uv",label:"UV System"},{value:"other",label:"Other"}],Qfe=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}],Xfe=[{value:"pump",label:"Pump"},{value:"filter",label:"Filter"},{value:"heater",label:"Heater"},{value:"chlorinator",label:"Chlorinator"},{value:"cleaner",label:"Automatic Cleaner"},{value:"light",label:"Light"},{value:"timer",label:"Timer/Controller"},{value:"other",label:"Other"}];function Jfe({clientId:t,onComplete:e,existingData:s}){var le,se;const{toast:r}=Lt(),i=jn(),[a,o]=_n(),[c,d]=y.useState(1),[h,g]=y.useState([]),[m,p]=y.useState(!0),[v,j]=y.useState(null),[N,E]=y.useState(null),[_,S]=y.useState(navigator.onLine),[C,I]=y.useState(!1),L=(()=>{const re=localStorage.getItem(`pool_wizard_${t}`);if(re)try{return JSON.parse(re)}catch(me){return console.error("Error parsing saved form data:",me),null}return null})(),T=mn({resolver:pn(qfe),defaultValues:{poolType:(L==null?void 0:L.poolType)||(s==null?void 0:s.poolType)||"",poolSize:(L==null?void 0:L.poolSize)||(s==null?void 0:s.poolSize)||"",filterType:(L==null?void 0:L.filterType)||(s==null?void 0:s.filterType)||"",heaterType:(L==null?void 0:L.heaterType)||(s==null?void 0:s.heaterType)||null,chemicalSystem:(L==null?void 0:L.chemicalSystem)||(s==null?void 0:s.chemicalSystem)||"",specialNotes:(L==null?void 0:L.specialNotes)||(s==null?void 0:s.specialNotes)||"",serviceDay:(L==null?void 0:L.serviceDay)||(s==null?void 0:s.serviceDay)||"",equipment:(L==null?void 0:L.equipment)||(s==null?void 0:s.equipment)||[],images:(L==null?void 0:L.images)||(s==null?void 0:s.images)||[]}}),M=Pt({mutationFn:async re=>(console.log("Updating client with data:",re),await pt(`/api/clients/${t}`,"PATCH")),onSuccess:()=>{i.invalidateQueries({queryKey:["/api/clients",t]}),r({title:"Pool information updated",description:"The client pool details have been successfully updated."}),e&&e()},onError:re=>{console.error("Error updating client:",re),r({title:"Update failed",description:"There was a problem updating the pool information.",variant:"destructive"})}}),k=()=>{const re=T.getValues("equipment")||[];T.setValue("equipment",[...re,{name:"",type:"",brand:"",model:"",serialNumber:"",installDate:"",status:"operational",notes:""}])},O=re=>{const me=T.getValues("equipment")||[];T.setValue("equipment",me.filter((Ce,$)=>$!==re))},V=re=>{const me=re.target.files;!me||me.length===0||Array.from(me).forEach(Ce=>{const $=new FileReader;$.onload=xe=>{var ee;const te=(ee=xe.target)==null?void 0:ee.result,ae=new Image;ae.onload=()=>{const de=document.createElement("canvas"),pe=1200,Me=1200;let Le=ae.width,We=ae.height;Le>We?Le>pe&&(We*=pe/Le,Le=pe):We>Me&&(Le*=Me/We,We=Me),de.width=Le,de.height=We;const jt=de.getContext("2d");jt==null||jt.drawImage(ae,0,0,Le,We);const mt=de.toDataURL("image/jpeg",.8);g(yt=>[...yt,{dataUrl:mt,file:Ce}]);const ke=T.getValues("images")||[];T.setValue("images",[...ke,{imageUrl:mt,caption:"",category:"pool"}])},ae.src=te},$.readAsDataURL(Ce)})},B=Pt({mutationFn:async re=>{console.log("Adding equipment:",re);const me={...re,installDate:re.installDate&&re.installDate.trim()!==""?re.installDate:null,lastServiceDate:re.lastServiceDate&&re.lastServiceDate.trim()!==""?re.lastServiceDate:null};return console.log("Processed equipment for saving:",me),await pt(`/api/clients/${t}/equipment`,"POST")},onSuccess:()=>{console.log("Equipment added successfully"),i.invalidateQueries({queryKey:[`/api/clients/${t}/equipment`]})},onError:re=>{console.error("Error adding equipment:",re),r({title:"Failed to add equipment",description:"There was a problem saving the equipment details.",variant:"destructive"})}}),Y=Pt({mutationFn:async re=>(console.log("Adding image:",re),await pt(`/api/clients/${t}/images`,"POST")),onSuccess:()=>{console.log("Image added successfully"),i.invalidateQueries({queryKey:[`/api/clients/${t}/images`]})},onError:re=>{console.error("Error adding image:",re),r({title:"Failed to add image",description:"There was a problem saving the image.",variant:"destructive"})}}),z=re=>{try{localStorage.setItem(`pool_wizard_${t}`,JSON.stringify(re)),j(new Date),console.log("Saved pool wizard data to localStorage")}catch(me){console.error("Error saving to localStorage:",me)}},G=re=>{m&&z(re)};y.useEffect(()=>{const re=()=>{S(!0),r({title:"You're back online",description:"You can now save your work to the server."})},me=()=>{S(!1),r({title:"You're offline",description:"Don't worry, your work is automatically saved locally.",variant:"destructive"})};window.addEventListener("online",re),window.addEventListener("offline",me);const Ce=T.watch($=>{setTimeout(()=>{G($)},2e3)});return()=>{window.removeEventListener("online",re),window.removeEventListener("offline",me),Ce.unsubscribe()}},[m,t,T]),y.useEffect(()=>{_&&N&&(async()=>{try{await he(N),E(null),localStorage.removeItem(`pool_wizard_${t}`),r({title:"Offline data saved",description:"Your offline changes have been successfully uploaded to the server."})}catch(me){console.error("Failed to save offline data:",me),r({title:"Failed to save offline data",description:"Please try again by clicking 'Save All Information'.",variant:"destructive"})}})()},[_,N]);const he=async re=>{console.log("Submitting pool information:",re);try{const me={poolType:re.poolType,poolSize:re.poolSize,filterType:re.filterType,heaterType:re.heaterType,chemicalSystem:re.chemicalSystem,specialNotes:re.specialNotes,serviceDay:re.serviceDay};if(console.log("Updating client with pool information:",me),await M.mutateAsync(me),console.log("Client update completed successfully"),re.equipment&&re.equipment.length>0){console.log(`Saving ${re.equipment.length} equipment items...`);const Ce=re.equipment.map($=>B.mutateAsync({...$,clientId:t}));await Promise.all(Ce),console.log("All equipment saved successfully")}if(re.images&&re.images.length>0){console.log(`Saving ${re.images.length} images...`);const Ce=re.images.map($=>Y.mutateAsync({...$,clientId:t}));await Promise.all(Ce),console.log("All images saved successfully")}r({title:"Pool information wizard completed",description:"All information has been successfully saved."}),i.invalidateQueries({queryKey:["/api/clients",t]}),i.invalidateQueries({queryKey:[`/api/clients/${t}/equipment`]}),i.invalidateQueries({queryKey:[`/api/clients/${t}/images`]}),o(`/clients/${t}`),e&&e()}catch(me){console.error("Error saving pool information:",me),r({title:"Save failed",description:"There was a problem saving the pool information.",variant:"destructive"})}};return n.jsxs(Ae,{className:"max-w-4xl mx-auto",children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Pool Information Wizard"}),n.jsx(ct,{children:"Collect detailed information about the client's pool and equipment"})]}),n.jsx(Ee,{children:n.jsx(fn,{...T,children:n.jsxs("form",{onSubmit:T.handleSubmit(he),className:"space-y-6",children:[n.jsxs(ps,{value:`step-${c}`,onValueChange:re=>d(parseInt(re.split("-")[1])),children:[n.jsxs(gs,{className:"grid grid-cols-3 w-full",children:[n.jsx(Ge,{value:"step-1",children:"Pool Information"}),n.jsx(Ge,{value:"step-2",children:"Equipment"}),n.jsx(Ge,{value:"step-3",children:"Images"})]}),n.jsx(Qe,{value:"step-1",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx(J,{control:T.control,name:"poolType",render:({field:re})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Pool Type"}),n.jsxs(gt,{onValueChange:re.onChange,defaultValue:re.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select pool type"})})}),n.jsx(ht,{children:Gfe.map(me=>n.jsx(ue,{value:me.value,children:me.label},me.value))})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:T.control,name:"poolSize",render:({field:re})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Pool Size"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"e.g., 15,000 gallons or 16' x 32'",...re})}),n.jsx(ot,{children:"Enter size in gallons or dimensions"}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx(J,{control:T.control,name:"filterType",render:({field:re})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Filter Type"}),n.jsxs(gt,{onValueChange:re.onChange,defaultValue:re.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select filter type"})})}),n.jsx(ht,{children:Yfe.map(me=>n.jsx(ue,{value:me.value,children:me.label},me.value))})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:T.control,name:"heaterType",render:({field:re})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Heater Type"}),n.jsxs(gt,{onValueChange:re.onChange,defaultValue:re.value||"",children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select heater type (optional)"})})}),n.jsx(ht,{children:Kfe.map(me=>n.jsx(ue,{value:me.value,children:me.label},me.value))})]}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx(J,{control:T.control,name:"chemicalSystem",render:({field:re})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Chemical System"}),n.jsxs(gt,{onValueChange:re.onChange,defaultValue:re.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select chemical system"})})}),n.jsx(ht,{children:Zfe.map(me=>n.jsx(ue,{value:me.value,children:me.label},me.value))})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:T.control,name:"serviceDay",render:({field:re})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Preferred Service Day"}),n.jsxs(gt,{onValueChange:re.onChange,defaultValue:re.value||"",children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select service day (optional)"})})}),n.jsx(ht,{children:Qfe.map(me=>n.jsx(ue,{value:me.value,children:me.label},me.value))})]}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:T.control,name:"specialNotes",render:({field:re})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Special Notes"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter any special notes or instructions about this pool",className:"h-24",...re})}),n.jsx(ne,{})]})})]})}),n.jsx(Qe,{value:"step-2",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Pool Equipment"}),n.jsx(H,{type:"button",variant:"outline",onClick:k,children:"Add Equipment"})]}),(le=T.watch("equipment"))==null?void 0:le.map((re,me)=>n.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h4",{className:"font-medium",children:["Equipment #",me+1]}),n.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>O(me),children:"Remove"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:T.control,name:`equipment.${me}.name`,render:({field:Ce})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Equipment Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"e.g., Main Pump",...Ce})}),n.jsx(ne,{})]})}),n.jsx(J,{control:T.control,name:`equipment.${me}.type`,render:({field:Ce})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Equipment Type"}),n.jsxs(gt,{onValueChange:Ce.onChange,defaultValue:Ce.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select equipment type"})})}),n.jsx(ht,{children:Xfe.map($=>n.jsx(ue,{value:$.value,children:$.label},$.value))})]}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:T.control,name:`equipment.${me}.brand`,render:({field:Ce})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Brand"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"e.g., Hayward",...Ce})}),n.jsx(ne,{})]})}),n.jsx(J,{control:T.control,name:`equipment.${me}.model`,render:({field:Ce})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Model"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"e.g., Super Pump",...Ce})}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:T.control,name:`equipment.${me}.serialNumber`,render:({field:Ce})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Serial Number"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Serial Number",...Ce})}),n.jsx(ne,{})]})}),n.jsx(J,{control:T.control,name:`equipment.${me}.installDate`,render:({field:Ce})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Install Date"}),n.jsx(Q,{children:n.jsx(ve,{type:"date",...Ce,value:Ce.value||""})}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:T.control,name:`equipment.${me}.status`,render:({field:Ce})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Status"}),n.jsxs(gt,{onValueChange:Ce.onChange,defaultValue:Ce.value||"operational",children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select status"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"operational",children:"Operational"}),n.jsx(ue,{value:"needs_service",children:"Needs Service"}),n.jsx(ue,{value:"replaced",children:"Replaced"}),n.jsx(ue,{value:"obsolete",children:"Obsolete"})]})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:T.control,name:`equipment.${me}.notes`,render:({field:Ce})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Notes"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Any notes about this equipment",...Ce})}),n.jsx(ne,{})]})})]},me)),(!T.watch("equipment")||T.watch("equipment").length===0)&&n.jsxs("div",{className:"text-center p-6 border border-dashed rounded-lg",children:[n.jsx("p",{className:"text-gray-500",children:"No equipment added yet"}),n.jsx(H,{type:"button",variant:"outline",className:"mt-4",onClick:k,children:"Add First Equipment"})]})]})}),n.jsx(Qe,{value:"step-3",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Pool Images"}),n.jsxs("div",{children:[n.jsx("input",{type:"file",id:"image-upload",multiple:!0,accept:"image/*",className:"hidden",onChange:V}),n.jsxs(H,{type:"button",variant:"outline",className:"mr-2",onClick:()=>{var re;return(re=document.getElementById("image-upload"))==null?void 0:re.click()},children:[n.jsx(nm,{className:"h-4 w-4 mr-2"}),"Upload Image"]}),n.jsxs(H,{type:"button",variant:"outline",children:[n.jsx(em,{className:"h-4 w-4 mr-2"}),"Take Photo"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(se=T.watch("images"))==null?void 0:se.map((re,me)=>n.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"aspect-video relative",children:[n.jsx("img",{src:re.imageUrl,alt:re.caption||`Pool image ${me+1}`,className:"object-cover w-full h-full"}),n.jsx(H,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>{const Ce=T.getValues("images")||[];T.setValue("images",Ce.filter(($,xe)=>xe!==me))},children:"Remove"})]}),n.jsxs("div",{className:"p-3",children:[n.jsx(J,{control:T.control,name:`images.${me}.caption`,render:({field:Ce})=>n.jsx(Z,{children:n.jsx(Q,{children:n.jsx(ve,{placeholder:"Add a caption",...Ce})})})}),n.jsx(J,{control:T.control,name:`images.${me}.category`,render:({field:Ce})=>n.jsx(Z,{className:"mt-2",children:n.jsxs(gt,{onValueChange:Ce.onChange,defaultValue:Ce.value||"pool",children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Category"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"pool",children:"Pool"}),n.jsx(ue,{value:"equipment",children:"Equipment"}),n.jsx(ue,{value:"issue",children:"Issue/Problem"}),n.jsx(ue,{value:"landscape",children:"Landscape"}),n.jsx(ue,{value:"other",children:"Other"})]})]})})})]})]},me)),(!T.watch("images")||T.watch("images").length===0)&&n.jsxs("div",{className:"col-span-3 text-center p-6 border border-dashed rounded-lg",children:[n.jsx("p",{className:"text-gray-500",children:"No images added yet"}),n.jsx(H,{type:"button",variant:"outline",className:"mt-4",onClick:()=>{var re;return(re=document.getElementById("image-upload"))==null?void 0:re.click()},children:"Upload First Image"})]})]})]})})]}),n.jsx(pr,{}),n.jsxs("div",{className:"flex items-center justify-between mb-4 bg-muted/30 p-3 rounded-md",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Wr,{htmlFor:"autosave",className:"cursor-pointer",children:"Autosave"}),n.jsx(is,{id:"autosave",checked:m,onCheckedChange:p})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[_?n.jsxs(Ze,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[n.jsx(wL,{className:"h-3 w-3 mr-1"}),"Online"]}):n.jsxs(Ze,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200",children:[n.jsx(yL,{className:"h-3 w-3 mr-1"}),"Offline"]}),v&&n.jsxs("span",{className:"text-xs text-muted-foreground flex items-center",children:[n.jsx(Ur,{className:"h-3 w-3 mr-1"}),"Last saved: ",v.toLocaleTimeString()]})]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("div",{children:c>1&&n.jsxs(H,{type:"button",variant:"outline",onClick:()=>d(c-1),children:[n.jsx(kl,{className:"h-4 w-4 mr-2"}),"Previous"]})}),n.jsx("div",{children:c<3?n.jsxs(H,{type:"button",onClick:()=>d(c+1),children:["Next",n.jsx(ph,{className:"h-4 w-4 ml-2"})]}):n.jsx(H,{type:"button",onClick:()=>{I(!0);try{const re=T.getValues();z(re),_?T.handleSubmit(he)():(E(re),r({title:"Saved locally",description:"Your changes have been saved offline. They will upload automatically when you're back online."}))}catch(re){console.error("Error in Save All Information:",re),r({title:"Error saving information",description:"There was a problem saving your changes.",variant:"destructive"})}finally{I(!1)}},disabled:M.isPending||C,children:M.isPending||C?n.jsx("span",{children:"Saving..."}):n.jsxs(n.Fragment,{children:[_?n.jsx(fy,{className:"h-4 w-4 mr-2"}):n.jsx(ZC,{className:"h-4 w-4 mr-2"}),"Save All Information"]})})})]})]})})})]})}function JI(){const{id:t}=id(),[e,s]=_n(),{toast:r}=Lt(),[i,a]=y.useState(!0),[o,c]=y.useState(null);y.useEffect(()=>{t&&fetch(`/api/clients/${t}`).then(g=>g.json()).then(g=>{c(g),a(!1)}).catch(g=>{console.error("Error fetching client:",g),r({title:"Error",description:"Failed to load client data",variant:"destructive"}),a(!1)})},[t,r]);const d=()=>{r({title:"Success",description:"Pool information has been updated successfully"}),s(`/clients/${t}`)};if(i)return n.jsxs("div",{className:"container mx-auto p-6",children:[n.jsx("div",{className:"flex items-center mb-6",children:n.jsx(_e,{className:"h-8 w-40 mr-4"})}),n.jsx(_e,{className:"h-[600px] w-full"})]});if(!o)return n.jsxs("div",{className:"container mx-auto p-6",children:[n.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Client not found"}),n.jsx(H,{onClick:()=>s("/clients"),children:"Back to Clients"})]});const h={poolType:o.poolType||"",poolSize:o.poolSize||"",filterType:o.filterType||"",heaterType:o.heaterType||null,chemicalSystem:o.chemicalSystem||"",specialNotes:o.specialNotes||"",serviceDay:o.serviceDay||"",equipment:[],images:[]};return n.jsxs("div",{className:"container mx-auto p-6",children:[n.jsx("div",{className:"mb-6",children:n.jsxs(H,{variant:"ghost",onClick:()=>s(`/clients/${t}`),children:[n.jsx(Vl,{className:"h-4 w-4 mr-2"}),"Back to Client"]})}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("h1",{className:"text-2xl font-bold",children:[o.user.name,"'s Pool Information"]}),n.jsx("p",{className:"text-gray-500",children:"Complete the wizard to update pool details and equipment"})]}),n.jsx(Jfe,{clientId:parseInt(t||"0"),existingData:h,onComplete:d})]})}const epe=q.object({completionDate:q.date({required_error:"Please select the completion date"}),waterReadings:q.object({phLevel:q.coerce.number().min(0).max(14).optional(),chlorineLevel:q.coerce.number().min(0).max(10).optional(),alkalinity:q.coerce.number().min(0).max(300).optional()}).optional(),tasksCompleted:q.array(q.string()).optional(),notes:q.string().optional(),status:q.enum(["in_progress","completed","cancelled"],{required_error:"Please select a status"})}),sj=["Pool cleaning","Equipment inspection","Chemical balance adjustment","Filter cleaning","Skimmer and pump basket cleaning","Water testing","Debris removal","Surface cleaning"];function tpe(){var L,T;const{id:t}=id(),[,e]=_n(),{toast:s}=Lt(),r=jn(),[i,a]=y.useState(!1),[o,c]=y.useState(!1),[d,h]=y.useState(null),{data:g,isLoading:m,error:p}=wt({queryKey:["/api/maintenances",parseInt(t)],enabled:!!t}),{data:v,isLoading:j}=wt({queryKey:["/api/service-templates"]}),N=m||j,E=p,_=mn({resolver:pn(epe),defaultValues:{completionDate:new Date,waterReadings:{phLevel:void 0,chlorineLevel:void 0,alkalinity:void 0},tasksCompleted:[],notes:"",status:"in_progress"}});y.useEffect(()=>{if(g)if(g.notes&&g.notes.includes("Service Report:")&&g.notes){c(g.notes.includes("Water Readings:"));const k=g.notes.match(/Tasks Completed: (.*?)(?:\\n|$)/),O=k?k[1].split(", ").filter(B=>sj.includes(B)):[],V=g.status==="completed"||g.status==="in_progress"||g.status==="cancelled"?g.status:"in_progress";_.reset({completionDate:new Date,waterReadings:{phLevel:void 0,chlorineLevel:void 0,alkalinity:void 0},tasksCompleted:O,notes:g.notes.includes("Notes: ")?g.notes.split("Notes: ")[1].trim():"",status:V})}else{const k=g.status==="completed"||g.status==="in_progress"||g.status==="cancelled"?g.status:"in_progress";_.reset({completionDate:new Date,waterReadings:{phLevel:void 0,chlorineLevel:void 0,alkalinity:void 0},tasksCompleted:[],notes:g.notes||"",status:k})}},[g,_]);const S=Pt({mutationFn:async M=>g?({...M,completionDate:M.status==="completed"&&M.completionDate.toISOString(),notes:C(M)},await pt(`/api/maintenances/${g.id}`,"PATCH")):null,onSuccess:()=>{r.invalidateQueries({queryKey:["/api/maintenances"]}),r.invalidateQueries({queryKey:["/api/maintenances/upcoming"]}),r.invalidateQueries({queryKey:["/api/dashboard/summary"]}),s({title:"Service report submitted",description:"The service report has been submitted successfully."}),e("/maintenance")},onError:M=>{s({title:"Failed to submit report",description:"There was an error submitting the service report. Please try again.",variant:"destructive"}),a(!1)}}),C=M=>{const k=[];if(k.push(`Service Report: ${ft(new Date,"PPP h:mm a")}`),M.tasksCompleted&&M.tasksCompleted.length>0&&k.push(`Tasks Completed: ${M.tasksCompleted.join(", ")}`),o&&M.waterReadings){const O=[];M.waterReadings.phLevel!==void 0&&O.push(`pH: ${M.waterReadings.phLevel}`),M.waterReadings.chlorineLevel!==void 0&&O.push(`Chlorine: ${M.waterReadings.chlorineLevel} ppm`),M.waterReadings.alkalinity!==void 0&&O.push(`Alkalinity: ${M.waterReadings.alkalinity} ppm`),O.length>0&&k.push(`Water Readings: ${O.join(", ")}`)}return M.notes&&k.push(`Notes: ${M.notes}`),k.join(`
`)},I=M=>{if(!v)return;const k=v.find(Y=>Y.id===M);if(!k)return;h(M);const O=k.checklistItems||[],B=[..._.getValues("tasksCompleted")||[]];O.forEach(Y=>{B.includes(Y)||B.push(Y)}),_.setValue("tasksCompleted",B),s({title:"Template Applied",description:`Applied "${k.name}" template with ${O.length} tasks`})};function P(M){a(!0),S.mutate(M,{onSettled:()=>{a(!1)}})}return N?n.jsx("div",{className:"container py-6",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(Kt,{className:"h-8 w-8 animate-spin text-primary"})})}):E||!g?n.jsxs("div",{className:"container py-6",children:[n.jsxs(Cr,{variant:"destructive",children:[n.jsx(fs,{className:"h-4 w-4"}),n.jsx(eo,{children:"Error"}),n.jsx(Sr,{children:"Could not load maintenance data. Please try again or go back to the maintenance page."})]}),n.jsx("div",{className:"mt-4",children:n.jsxs(H,{onClick:()=>e("/maintenance"),children:[n.jsx(kl,{className:"h-4 w-4 mr-2"}),"Back to Maintenance"]})})]}):n.jsxs("div",{className:"container py-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs(H,{variant:"outline",size:"sm",onClick:()=>e("/maintenance"),className:"mb-4",children:[n.jsx(kl,{className:"h-4 w-4 mr-2"}),"Back to Maintenance"]}),n.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Service Report"}),n.jsx("p",{className:"text-muted-foreground",children:"Complete service details for this maintenance visit"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Maintenance Details"}),n.jsx(ct,{children:"Fill in the details of the service performed"})]}),n.jsx(Ee,{children:n.jsx(fn,{..._,children:n.jsxs("form",{id:"service-report-form",onSubmit:_.handleSubmit(P),className:"space-y-6",children:[n.jsxs("div",{className:"mb-6 p-4 bg-muted/30 border rounded-md",children:[n.jsx("h3",{className:"font-medium mb-2",children:"Service Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Client"}),n.jsx("p",{className:"font-medium",children:g.client.user.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Service Type"}),n.jsx("p",{className:"font-medium",children:g.type.split("_").map(M=>M.charAt(0).toUpperCase()+M.slice(1)).join(" ")})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Scheduled Date"}),n.jsx("p",{className:"font-medium",children:ft(new Date(g.scheduleDate),"PPP")})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Technician"}),n.jsx("p",{className:"font-medium",children:g.technician?g.technician.user.name:"Unassigned"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[n.jsx(J,{control:_.control,name:"completionDate",render:({field:M})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Completion Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[M.value?ft(M.value,"PPP"):n.jsx("span",{children:"Select date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:M.value,onSelect:M.onChange,initialFocus:!0})})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:_.control,name:"status",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Status"}),n.jsxs(gt,{onValueChange:M.onChange,defaultValue:M.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select status"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"in_progress",children:"In Progress"}),n.jsx(ue,{value:"completed",children:"Completed"}),n.jsx(ue,{value:"cancelled",children:"Cancelled"})]})]}),n.jsx(ne,{})]})})]}),n.jsx(pr,{}),n.jsxs(Z,{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(X,{children:"Tasks Completed"}),v&&v.length>0&&n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-sm mr-2",children:"Apply Template:"}),n.jsxs(gt,{onValueChange:M=>I(parseInt(M)),value:(d==null?void 0:d.toString())||"",children:[n.jsx(ut,{className:"w-[180px]",children:n.jsx(xt,{placeholder:"Select template"})}),n.jsx(ht,{children:v.map(M=>n.jsx(ue,{value:M.id.toString(),children:M.name},M.id))})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2 mt-2 border rounded-md p-3 bg-muted/20",children:[n.jsxs("div",{className:"col-span-full mb-3",children:[n.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center",children:[n.jsx("span",{className:"inline-flex justify-center items-center w-5 h-5 rounded-full bg-primary/10 text-primary mr-2 text-xs",children:"S"}),"Standard Tasks"]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2",children:sj.map(M=>n.jsx(J,{control:_.control,name:"tasksCompleted",render:({field:k})=>{var O;return n.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0",children:[n.jsx(Q,{children:n.jsx(Ri,{checked:(O=k.value)==null?void 0:O.includes(M),onCheckedChange:V=>{const B=k.value||[],Y=V?[...B,M]:B.filter(z=>z!==M);k.onChange(Y)}})}),n.jsx(X,{className:"text-sm font-normal",children:M})]},M)}},`standard-${M}`))})]}),d&&v&&n.jsxs("div",{className:"col-span-full",children:[n.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center",children:[n.jsx("span",{className:"inline-flex justify-center items-center w-5 h-5 rounded-full bg-primary/10 text-primary mr-2 text-xs",children:n.jsx(fr,{className:"h-3 w-3"})}),"Template Tasks"]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2",children:(T=(L=v.find(M=>M.id===d))==null?void 0:L.checklistItems)==null?void 0:T.filter(M=>M&&!sj.includes(M)).map((M,k)=>n.jsx(J,{control:_.control,name:"tasksCompleted",render:({field:O})=>{var V;return n.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0",children:[n.jsx(Q,{children:n.jsx(Ri,{checked:(V=O.value)==null?void 0:V.includes(M),onCheckedChange:B=>{const Y=O.value||[],z=B?[...Y,M]:Y.filter(G=>G!==M);O.onChange(z)}})}),n.jsx(X,{className:"text-sm font-normal",children:M})]})}},`template-${k}-${M}`))})]})]})]}),n.jsx(pr,{}),n.jsx(Z,{children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ri,{id:"waterReadings",checked:o,onCheckedChange:()=>c(!o)}),n.jsx("label",{htmlFor:"waterReadings",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Include Water Test Readings"})]})}),o&&n.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-muted/30",children:[n.jsx("h3",{className:"text-sm font-medium",children:"Water Test Readings"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[n.jsx(J,{control:_.control,name:"waterReadings.phLevel",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"pH Level"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",step:"0.1",min:"0",max:"14",placeholder:"7.2-7.8",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value?Number(k.target.value):void 0)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:_.control,name:"waterReadings.chlorineLevel",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Chlorine (ppm)"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",step:"0.1",min:"0",max:"10",placeholder:"1.0-3.0",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value?Number(k.target.value):void 0)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:_.control,name:"waterReadings.alkalinity",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Alkalinity (ppm)"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",step:"1",min:"0",max:"300",placeholder:"80-120",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value?Number(k.target.value):void 0)})}),n.jsx(ne,{})]})})]})]}),n.jsx(pr,{}),n.jsx(J,{control:_.control,name:"notes",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Additional Notes"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter any additional information about the service visit",className:"resize-none h-24",...M})}),n.jsx(ot,{children:"Include any issues found, recommendations, or follow-up needed."}),n.jsx(ne,{})]})})]})})}),n.jsxs(Pn,{className:"flex gap-2 justify-end",children:[n.jsx(H,{variant:"outline",onClick:()=>e("/maintenance"),disabled:i,children:"Cancel"}),n.jsx(H,{type:"submit",form:"service-report-form",disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ao,{className:"mr-2 h-4 w-4"}),"Submit Report"]})})]})]})}),n.jsx("div",{children:n.jsxs(Ae,{children:[n.jsx(Be,{children:n.jsx(Ve,{children:"Tips for Service Reports"})}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"text-sm font-medium",children:"Water Chemistry Guidelines"}),n.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"pH: 7.2-7.8 is the ideal range"}),n.jsx("li",{children:"Chlorine: 1.0-3.0 ppm is recommended"}),n.jsx("li",{children:"Alkalinity: 80-120 ppm for most pools"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"text-sm font-medium",children:"Common Issues"}),n.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Green water - Check chlorine levels"}),n.jsx("li",{children:"Cloudy water - Filter issues or chemistry imbalance"}),n.jsx("li",{children:"Equipment noise - Check for obstructions"}),n.jsx("li",{children:"Strong chemical smell - Check sanitizer levels"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"text-sm font-medium",children:"Helpful Reminders"}),n.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Take photos of any issues"}),n.jsx("li",{children:"Include equipment conditions in notes"}),n.jsx("li",{children:"Mark completed tasks accurately"}),n.jsx("li",{children:"Note any customer concerns"})]})]})]})]})})]})]})}function npe(){var d,h,g,m,p,v,j,N,E,_,S;const{id:t}=id(),e=parseInt(t||"0",10),[,s]=_n(),{toast:r}=Lt(),{data:i,isLoading:a}=wt({queryKey:["/api/maintenances",e],queryFn:async({queryKey:C})=>await pt(`/api/maintenances/${e}`,"GET"),enabled:!!e,retry:1}),o=C=>{if(!C)return"Not scheduled";try{return ft(new Date(C),"PPP")}catch{return"Invalid date"}},c=C=>{if(!C)return"";try{return ft(new Date(C),"p")}catch{return""}};return n.jsx("div",{className:"container py-6 max-w-5xl",children:n.jsxs("div",{className:"flex flex-col gap-6",children:[n.jsxs("div",{children:[n.jsxs(H,{variant:"ghost",size:"sm",className:"mb-2",onClick:()=>window.history.back(),children:[n.jsx(Vl,{className:"mr-1 h-4 w-4"}),"Back"]}),n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Maintenance Report"}),a?n.jsx(_e,{className:"h-5 w-60 mt-1"}):n.jsx("p",{className:"text-muted-foreground",children:i?n.jsxs(n.Fragment,{children:["Maintenance ID: ",i.id," ",i.status==="completed"?n.jsx("span",{className:"text-green-600 font-medium ml-1",children:"Completed"}):i.status==="in_progress"?n.jsx("span",{className:"text-amber-600 font-medium ml-1",children:"In Progress"}):n.jsx("span",{className:"text-gray-600 font-medium ml-1",children:"Scheduled"})]}):"Maintenance not found"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(H,{size:"sm",variant:"outline",onClick:()=>s("/maintenance"),children:[n.jsx(tn,{className:"h-4 w-4 mr-1"}),"Maintenance Calendar"]}),n.jsxs(H,{size:"sm",variant:"outline",onClick:()=>s("/"),children:[n.jsx(py,{className:"h-4 w-4 mr-1"}),"Dashboard"]})]})]})]}),a?n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"rounded-lg border p-4",children:[n.jsx(_e,{className:"h-5 w-32 mb-3"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_e,{className:"h-4 w-full"}),n.jsx(_e,{className:"h-4 w-3/4"}),n.jsx(_e,{className:"h-4 w-1/2"})]})]}),n.jsxs("div",{className:"rounded-lg border p-4",children:[n.jsx(_e,{className:"h-5 w-32 mb-3"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_e,{className:"h-4 w-full"}),n.jsx(_e,{className:"h-4 w-3/4"}),n.jsx(_e,{className:"h-4 w-1/2"})]})]})]}):i?n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"rounded-lg border p-4",children:[n.jsx("h2",{className:"font-semibold text-sm text-muted-foreground mb-3",children:"CLIENT INFORMATION"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(xi,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:((h=(d=i.client)==null?void 0:d.user)==null?void 0:h.name)||"Unknown Client"}),((g=i.client)==null?void 0:g.companyName)&&n.jsx("div",{className:"text-sm text-muted-foreground",children:i.client.companyName})]})]}),((p=(m=i.client)==null?void 0:m.user)==null?void 0:p.email)&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qs,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("a",{href:`mailto:${i.client.user.email}`,className:"text-sm hover:underline",children:i.client.user.email})]}),((j=(v=i.client)==null?void 0:v.user)==null?void 0:j.phone)&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qr,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("a",{href:`tel:${i.client.user.phone}`,className:"text-sm hover:underline",children:i.client.user.phone})]}),i.client&&n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(bi,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),n.jsxs("div",{className:"text-sm",children:[i.client.address&&n.jsx("div",{children:i.client.address}),i.client.city&&n.jsxs("div",{children:[i.client.city,i.client.state?`, ${i.client.state}`:"",i.client.zipCode?` ${i.client.zipCode}`:""]})]})]}),i.client&&n.jsxs("div",{className:"flex flex-col gap-1 mt-2 pt-2 border-t",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:"Pool Type"}),n.jsx("span",{className:"text-xs font-medium",children:i.client.poolType||"Not specified"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:"Pool Size"}),n.jsx("span",{className:"text-xs font-medium",children:i.client.poolSize||"Not specified"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:"Filter Type"}),n.jsx("span",{className:"text-xs font-medium",children:i.client.filterType||"Not specified"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:"Contract Type"}),n.jsx("span",{className:"text-xs font-medium capitalize",children:i.client.contractType||"Not specified"})]})]})]})]}),n.jsxs("div",{className:"rounded-lg border p-4",children:[n.jsx("h2",{className:"font-semibold text-sm text-muted-foreground mb-3",children:"SERVICE INFORMATION"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:o(i.scheduleDate)}),i.scheduleDate&&n.jsx("span",{className:"text-sm text-muted-foreground ml-1",children:c(i.scheduleDate)})]})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(eY,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:((E=(N=i.technician)==null?void 0:N.user)==null?void 0:E.name)||"Not Assigned"}),((S=(_=i.technician)==null?void 0:_.user)==null?void 0:S.phone)&&n.jsx("a",{href:`tel:${i.technician.user.phone}`,className:"text-sm text-muted-foreground hover:underline",children:i.technician.user.phone})]})]}),i.type&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(so,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{className:"font-medium capitalize",children:[i.type," Service"]})]}),i.routeName&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ym,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{className:"text-sm",children:["Route: ",i.routeName]})]}),i.notes&&n.jsxs("div",{className:"mt-2 pt-2 border-t",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Notes"}),n.jsx("div",{className:"text-sm",children:i.notes})]}),i.completionDate&&n.jsxs("div",{className:"flex items-center gap-2 mt-2 pt-2 border-t",children:[n.jsx(Ur,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Completed"}),n.jsxs("div",{className:"text-sm font-medium",children:[o(i.completionDate)," ",c(i.completionDate)]})]})]})]})]})]}):n.jsxs("div",{className:"rounded-lg border p-6 text-center",children:[n.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Maintenance Not Found"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"The maintenance record you're looking for doesn't exist or you may not have permission to view it."}),n.jsx(H,{onClick:()=>s("/maintenance"),children:"Return to Maintenance List"})]}),i&&n.jsx(mS,{open:!0,onOpenChange:()=>s("/maintenance"),maintenanceId:e,clientId:i.clientId,onSuccess:()=>{r({title:"Maintenance report submitted",description:"The maintenance report has been submitted successfully."}),s("/maintenance")}})]})})}function spe(){var p,v,j,N,E,_,S,C,I,P,L,T;const[t,e]=y.useState("email"),{toast:s}=Lt(),{data:r=[],isLoading:i}=wt({queryKey:["/api/communication-providers"],select:M=>M.filter(k=>(k.type==="gmail"||k.type==="outlook")&&k.isActive)}),{data:a=[],isLoading:o}=wt({queryKey:["/api/communication-providers"],select:M=>M.filter(k=>k.type==="twilio"&&k.isActive)}),{data:c=[],isLoading:d}=wt({queryKey:["/api/communication-providers"],select:M=>M.filter(k=>k.type==="ringcentral"&&k.isActive)}),h=r.length>0,g=a.length>0,m=c.length>0;return n.jsxs("div",{className:"container mx-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Communications"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage client communications through multiple channels"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(H,{variant:"outline",children:[n.jsx(Bi,{className:"h-4 w-4 mr-2"}),"Search"]}),n.jsx(H,{onClick:()=>{if(!h&&t==="email"){s({title:"No Email Provider Configured",description:"You need to set up an email provider in Settings first.",variant:"destructive"});return}if(!g&&t==="sms"){s({title:"No SMS Provider Configured",description:"You need to set up an SMS provider in Settings first.",variant:"destructive"});return}s({title:"Create Message",description:"Creating a new message..."})},children:"New Message"})]})]}),n.jsxs(ps,{defaultValue:"email",value:t,onValueChange:e,className:"w-full",children:[n.jsxs(gs,{className:"grid grid-cols-3 w-full max-w-lg mx-auto mb-6",children:[n.jsxs(Ge,{value:"email",className:"flex items-center",children:[n.jsx(Qs,{className:"h-4 w-4 mr-2"}),"Email"]}),n.jsxs(Ge,{value:"sms",className:"flex items-center",children:[n.jsx(ja,{className:"h-4 w-4 mr-2"}),"SMS"]}),n.jsxs(Ge,{value:"calls",className:"flex items-center",children:[n.jsx(qr,{className:"h-4 w-4 mr-2"}),"Call Log"]})]}),n.jsxs(Qe,{value:"email",className:"space-y-4",children:[h?n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Ze,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:((p=r.filter(M=>M.isDefault)[0])==null?void 0:p.name)||((v=r[0])==null?void 0:v.name)}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["Using ",((j=r.filter(M=>M.isDefault)[0])==null?void 0:j.type)||((N=r[0])==null?void 0:N.type)," as the default email provider"]})]})}):n.jsxs(Cr,{variant:"destructive",className:"mb-6",children:[n.jsx(fs,{className:"h-4 w-4"}),n.jsx(eo,{children:"No Email Provider Configured"}),n.jsxs(Sr,{className:"flex justify-between items-center",children:[n.jsx("span",{children:"You need to set up an email provider to use this feature."}),n.jsx(H,{variant:"outline",size:"sm",asChild:!0,children:n.jsxs(rs,{to:"/settings",children:[n.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Configure Provider"]})})]})]}),n.jsxs("div",{className:"flex justify-between mb-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(gt,{defaultValue:"all",children:[n.jsx(ut,{className:"w-[180px]",children:n.jsx(xt,{placeholder:"Filter by"})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"all",children:"All Emails"}),n.jsx(ue,{value:"sent",children:"Sent"}),n.jsx(ue,{value:"received",children:"Received"}),n.jsx(ue,{value:"drafts",children:"Drafts"})]})]}),n.jsx(ve,{placeholder:"Search emails...",className:"w-64"})]}),n.jsxs(H,{disabled:!h,children:[n.jsx(Qs,{className:"h-4 w-4 mr-2"}),"Compose Email"]})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Recent Emails"}),n.jsx(ct,{children:"Manage and view client email correspondence"})]}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-muted-foreground",children:"No emails to display yet."}),n.jsxs("div",{className:"bg-muted rounded-md p-6 text-center",children:[n.jsx(Qs,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-medium",children:"Email Integration"}),n.jsx("p",{className:"text-sm text-muted-foreground max-w-md mx-auto mt-2",children:h?"Your email provider is configured. You can now send and receive emails.":"Connect your email account to send and receive client emails directly from this dashboard."})]})]})}),n.jsx(Pn,{className:"border-t p-4",children:n.jsxs("div",{className:"flex w-full justify-between items-center",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:h?`${r.length} email ${r.length===1?"provider":"providers"} configured`:"No email providers configured"}),n.jsx(H,{variant:"outline",size:"sm",asChild:!0,children:n.jsxs(rs,{to:"/settings",children:[n.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Manage Providers"]})})]})})]})]}),n.jsxs(Qe,{value:"sms",className:"space-y-4",children:[g?n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Ze,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:((E=a.filter(M=>M.isDefault)[0])==null?void 0:E.name)||((_=a[0])==null?void 0:_.name)}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["Using ",((S=a.filter(M=>M.isDefault)[0])==null?void 0:S.type)||((C=a[0])==null?void 0:C.type)," for SMS messaging"]})]})}):n.jsxs(Cr,{variant:"destructive",className:"mb-6",children:[n.jsx(fs,{className:"h-4 w-4"}),n.jsx(eo,{children:"No SMS Provider Configured"}),n.jsxs(Sr,{className:"flex justify-between items-center",children:[n.jsx("span",{children:"You need to set up an SMS provider (like Twilio) to use this feature."}),n.jsx(H,{variant:"outline",size:"sm",asChild:!0,children:n.jsxs(rs,{to:"/settings",children:[n.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Configure Provider"]})})]})]}),n.jsxs("div",{className:"flex justify-between mb-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(gt,{defaultValue:"all",children:[n.jsx(ut,{className:"w-[180px]",children:n.jsx(xt,{placeholder:"Filter by"})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"all",children:"All Messages"}),n.jsx(ue,{value:"sent",children:"Sent"}),n.jsx(ue,{value:"received",children:"Received"})]})]}),n.jsx(ve,{placeholder:"Search messages...",className:"w-64"})]}),n.jsxs(H,{disabled:!g,children:[n.jsx(ja,{className:"h-4 w-4 mr-2"}),"New SMS"]})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"SMS Messages"}),n.jsx(ct,{children:"Send and track text messages to clients"})]}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-muted-foreground",children:"No messages to display yet."}),n.jsxs("div",{className:"bg-muted rounded-md p-6 text-center",children:[n.jsx(ja,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-medium",children:"SMS Integration"}),n.jsx("p",{className:"text-sm text-muted-foreground max-w-md mx-auto mt-2",children:g?"Your SMS provider is configured. You can now send text messages to clients.":"Connect with an SMS provider to send maintenance reminders, service updates, and other communications to clients."})]})]})}),n.jsx(Pn,{className:"border-t p-4",children:n.jsxs("div",{className:"flex w-full justify-between items-center",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:g?`${a.length} SMS ${a.length===1?"provider":"providers"} configured`:"No SMS providers configured"}),n.jsx(H,{variant:"outline",size:"sm",asChild:!0,children:n.jsxs(rs,{to:"/settings",children:[n.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Manage Providers"]})})]})})]})]}),n.jsxs(Qe,{value:"calls",className:"space-y-4",children:[m?n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Ze,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:((I=c.filter(M=>M.isDefault)[0])==null?void 0:I.name)||((P=c[0])==null?void 0:P.name)}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["Using ",((L=c.filter(M=>M.isDefault)[0])==null?void 0:L.type)||((T=c[0])==null?void 0:T.type)," for voice calls"]})]})}):n.jsxs(Cr,{variant:"destructive",className:"mb-6",children:[n.jsx(fs,{className:"h-4 w-4"}),n.jsx(eo,{children:"No Voice Provider Configured"}),n.jsxs(Sr,{className:"flex justify-between items-center",children:[n.jsx("span",{children:"You need to set up a voice provider (like RingCentral) to use this feature."}),n.jsx(H,{variant:"outline",size:"sm",asChild:!0,children:n.jsxs(rs,{to:"/settings",children:[n.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Configure Provider"]})})]})]}),n.jsxs("div",{className:"flex justify-between mb-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(gt,{defaultValue:"all",children:[n.jsx(ut,{className:"w-[180px]",children:n.jsx(xt,{placeholder:"Filter by"})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"all",children:"All Calls"}),n.jsx(ue,{value:"incoming",children:"Incoming"}),n.jsx(ue,{value:"outgoing",children:"Outgoing"}),n.jsx(ue,{value:"missed",children:"Missed"})]})]}),n.jsx(ve,{placeholder:"Search call logs...",className:"w-64"})]}),n.jsxs(H,{disabled:!m,children:[n.jsx(qr,{className:"h-4 w-4 mr-2"}),"Log New Call"]})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Call History"}),n.jsx(ct,{children:"Track and manage client phone conversations"})]}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-muted-foreground",children:"No call logs to display yet."}),n.jsxs("div",{className:"bg-muted rounded-md p-6 text-center",children:[n.jsx(qr,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-medium",children:"Call Tracking"}),n.jsx("p",{className:"text-sm text-muted-foreground max-w-md mx-auto mt-2",children:m?"Your voice provider is configured. You can now log and track client calls.":"Configure a voice provider to log and track client calls, set reminders, and manage follow-ups all in one place."})]})]})}),n.jsx(Pn,{className:"border-t p-4",children:n.jsxs("div",{className:"flex w-full justify-between items-center",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:m?`${c.length} voice ${c.length===1?"provider":"providers"} configured`:"No voice providers configured"}),n.jsx(H,{variant:"outline",size:"sm",asChild:!0,children:n.jsxs(rs,{to:"/settings",children:[n.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Manage Providers"]})})]})})]})]})]})]})}function rpe({data:t,isLoading:e,onEdit:s,onDelete:r,onView:i}){const a=[{id:1,date:"2025-03-01",category:"chemicals",description:"Chlorine purchase for route supplies",amount:12999,vendor:"Pool Supply Warehouse",approved:!0,reimbursable:!1,reimbursed:!1},{id:2,date:"2025-03-05",category:"vehicle",description:"Fuel for service vehicles",amount:8750,vendor:"Shell Gas Station",approved:!0,reimbursable:!1,reimbursed:!1},{id:3,date:"2025-03-08",category:"equipment",description:"Replacement pump parts",amount:34599,vendor:"Pool Equipment Supply Co",approved:!1,reimbursable:!1,reimbursed:!1},{id:4,date:"2025-03-09",category:"office",description:"Office supplies",amount:6225,vendor:"Office Depot",approved:!0,reimbursable:!0,reimbursed:!1}],o=t.length>0?t:a,c=h=>`$${(h/100).toFixed(2)}`,d=h=>{switch(h){case"chemicals":return"bg-blue-100 text-blue-800";case"equipment":return"bg-green-100 text-green-800";case"vehicle":return"bg-orange-100 text-orange-800";case"office":return"bg-purple-100 text-purple-800";case"marketing":return"bg-pink-100 text-pink-800";case"insurance":return"bg-yellow-100 text-yellow-800";case"utilities":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e?n.jsx(Ae,{children:n.jsx(Ee,{className:"pt-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(_e,{className:"h-10 w-full"}),n.jsx(_e,{className:"h-10 w-full"}),n.jsx(_e,{className:"h-10 w-full"}),n.jsx(_e,{className:"h-10 w-full"}),n.jsx(_e,{className:"h-10 w-full"})]})})}):n.jsx(Ae,{children:n.jsx(Ee,{className:"pt-6",children:n.jsx("div",{className:"rounded-md border",children:n.jsxs(jr,{children:[n.jsx(br,{children:n.jsxs(yn,{children:[n.jsx(Ye,{children:"Date"}),n.jsx(Ye,{children:"Category"}),n.jsx(Ye,{children:"Description"}),n.jsx(Ye,{children:"Vendor"}),n.jsx(Ye,{className:"text-right",children:"Amount"}),n.jsx(Ye,{children:"Status"}),n.jsx(Ye,{className:"text-right",children:"Actions"})]})}),n.jsx(Nr,{children:o.map(h=>n.jsxs(yn,{children:[n.jsx(qe,{children:ln(new Date(h.date))}),n.jsx(qe,{children:n.jsx(Ze,{variant:"outline",className:d(h.category),children:h.category})}),n.jsx(qe,{children:h.description}),n.jsx(qe,{children:h.vendor||""}),n.jsx(qe,{className:"text-right font-medium",children:c(h.amount)}),n.jsxs(qe,{children:[h.approved?n.jsx(Ze,{variant:"outline",className:"bg-green-100 text-green-800",children:"Approved"}):n.jsx(Ze,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:"Pending"}),h.reimbursable&&n.jsx(Ze,{variant:"outline",className:"bg-blue-100 text-blue-800 ml-1",children:h.reimbursed?"Reimbursed":"Reimbursable"})]}),n.jsx(qe,{className:"text-right",children:n.jsxs(oi,{children:[n.jsx(li,{asChild:!0,children:n.jsxs(H,{variant:"ghost",className:"h-8 w-8 p-0",children:[n.jsx("span",{className:"sr-only",children:"Open menu"}),n.jsx(ri,{className:"h-4 w-4"})]})}),n.jsxs(Yr,{align:"end",children:[n.jsxs(bt,{onClick:()=>i&&i(h),children:[n.jsx(xo,{className:"mr-2 h-4 w-4"}),"View"]}),n.jsxs(bt,{onClick:()=>s&&s(h),children:[n.jsx(Gr,{className:"mr-2 h-4 w-4"}),"Edit"]}),n.jsxs(bt,{onClick:()=>r&&r(h.id),children:[n.jsx(Ni,{className:"mr-2 h-4 w-4"}),"Delete"]}),n.jsxs(bt,{children:[n.jsx(YC,{className:"mr-2 h-4 w-4"}),"Export Receipt"]})]})]})})]},h.id))})]})})})})}function ipe({data:t,isLoading:e}){const s=[{id:1,userId:3,projectId:1,date:"2025-03-01",hoursWorked:8,description:"Pool installation - framing",status:"approved",approvedBy:1,notes:null,createdAt:"2025-03-01T17:00:00Z"},{id:2,userId:4,projectId:1,date:"2025-03-01",hoursWorked:8,description:"Pool installation - plumbing",status:"approved",approvedBy:1,notes:null,createdAt:"2025-03-01T17:05:00Z"},{id:3,userId:2,projectId:3,date:"2025-03-01",hoursWorked:6,description:"Maintenance route - north",status:"approved",approvedBy:1,notes:"Completed 8 service calls",createdAt:"2025-03-01T15:30:00Z"}],r=t.length>0?t:s,i=c=>({1:"Admin User",2:"John Technician",3:"Sarah Technician",4:"Mike Technician",5:"Lisa Technician"})[c]||`User ${c}`,a=c=>({1:"Thompson Pool Installation",2:"Wilson Pool Renovation",3:"Maintenance Routes",4:"Repair Services"})[c]||`Project ${c}`,o=c=>{switch(c){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e?n.jsx(Ae,{children:n.jsx(Ee,{className:"pt-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(_e,{className:"h-10 w-full"}),n.jsx(_e,{className:"h-10 w-full"}),n.jsx(_e,{className:"h-10 w-full"})]})})}):n.jsx(Ae,{children:n.jsx(Ee,{className:"pt-6",children:n.jsx("div",{className:"rounded-md border",children:n.jsxs(jr,{children:[n.jsx(br,{children:n.jsxs(yn,{children:[n.jsx(Ye,{children:"Employee"}),n.jsx(Ye,{children:"Date"}),n.jsx(Ye,{children:"Hours"}),n.jsx(Ye,{children:"Project/Task"}),n.jsx(Ye,{children:"Description"}),n.jsx(Ye,{children:"Status"})]})}),n.jsx(Nr,{children:r.map(c=>n.jsxs(yn,{children:[n.jsx(qe,{className:"font-medium",children:i(c.userId)}),n.jsx(qe,{children:ln(new Date(c.date))}),n.jsx(qe,{children:c.startTime&&c.endTime?n.jsxs("span",{children:[c.startTime," - ",c.endTime,c.breakDuration&&c.breakDuration>0&&n.jsxs("span",{className:"text-xs text-gray-500 block",children:["(",c.breakDuration," min break)"]})]}):c.hoursWorked}),n.jsx(qe,{children:a(c.projectId)}),n.jsx(qe,{children:c.description}),n.jsx(qe,{children:n.jsx(Ze,{variant:"outline",className:o(c.status),children:c.status.charAt(0).toUpperCase()+c.status.slice(1)})})]},c.id))})]})})})})}function ape({data:t,isLoading:e,onEdit:s,onDelete:r,onRun:i,onView:a}){const o=[{id:1,name:"Monthly Profit and Loss",type:"profit_loss",startDate:"2025-03-01",endDate:"2025-03-31",createdBy:1,createdByName:"Alex Johnson",lastRunDate:"2025-03-09T10:30:00",scheduleFrequency:"monthly",isPublic:!0},{id:2,name:"Quarterly Balance Sheet",type:"balance_sheet",startDate:"2025-01-01",endDate:"2025-03-31",createdBy:1,createdByName:"Alex Johnson",lastRunDate:"2025-03-05T14:15:00",scheduleFrequency:"quarterly",isPublic:!1},{id:3,name:"Route Profitability Analysis",type:"route_profitability",startDate:"2025-03-01",endDate:"2025-03-31",createdBy:2,createdByName:"Sarah Manager",lastRunDate:null,scheduleFrequency:null,isPublic:!1},{id:4,name:"Chemical Usage by Client Type",type:"chemical_usage",startDate:"2025-01-01",endDate:"2025-03-31",createdBy:1,createdByName:"Alex Johnson",lastRunDate:"2025-03-08T09:00:00",scheduleFrequency:"weekly",isPublic:!0}],c=t.length>0?t:o,d=m=>{switch(m){case"income_statement":return"Income Statement";case"balance_sheet":return"Balance Sheet";case"cash_flow":return"Cash Flow";case"profit_loss":return"Profit & Loss";case"expense_summary":return"Expense Summary";case"revenue_by_service":return"Revenue by Service";case"technician_productivity":return"Technician Productivity";case"chemical_usage":return"Chemical Usage";case"route_profitability":return"Route Profitability";case"custom":return"Custom Report";default:return m.replace(/_/g," ").replace(/\b\w/g,p=>p.toUpperCase())}},h=m=>{switch(m){case"income_statement":case"profit_loss":return"bg-green-100 text-green-800";case"balance_sheet":return"bg-blue-100 text-blue-800";case"cash_flow":return"bg-indigo-100 text-indigo-800";case"expense_summary":return"bg-red-100 text-red-800";case"revenue_by_service":return"bg-purple-100 text-purple-800";case"technician_productivity":return"bg-amber-100 text-amber-800";case"chemical_usage":return"bg-cyan-100 text-cyan-800";case"route_profitability":return"bg-teal-100 text-teal-800";case"custom":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},g=m=>m?m.charAt(0).toUpperCase()+m.slice(1):"On demand";return e?n.jsx(Ae,{children:n.jsx(Ee,{className:"pt-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(_e,{className:"h-10 w-full"}),n.jsx(_e,{className:"h-10 w-full"}),n.jsx(_e,{className:"h-10 w-full"}),n.jsx(_e,{className:"h-10 w-full"})]})})}):n.jsx(Ae,{children:n.jsx(Ee,{className:"pt-6",children:n.jsx("div",{className:"rounded-md border",children:n.jsxs(jr,{children:[n.jsx(br,{children:n.jsxs(yn,{children:[n.jsx(Ye,{children:"Report Name"}),n.jsx(Ye,{children:"Type"}),n.jsx(Ye,{children:"Date Range"}),n.jsx(Ye,{children:"Schedule"}),n.jsx(Ye,{children:"Last Run"}),n.jsx(Ye,{className:"text-right",children:"Actions"})]})}),n.jsx(Nr,{children:c.map(m=>n.jsxs(yn,{children:[n.jsxs(qe,{className:"font-medium",children:[m.name,m.isPublic&&n.jsx(Ze,{variant:"outline",className:"ml-2 bg-blue-50 text-blue-700",children:"Public"})]}),n.jsx(qe,{children:n.jsx(Ze,{variant:"outline",className:h(m.type),children:d(m.type)})}),n.jsxs(qe,{children:[ln(new Date(m.startDate))," - ",ln(new Date(m.endDate))]}),n.jsx(qe,{children:g(m.scheduleFrequency)}),n.jsx(qe,{children:m.lastRunDate?ln(new Date(m.lastRunDate)):"Never run"}),n.jsx(qe,{className:"text-right",children:n.jsxs(oi,{children:[n.jsx(li,{asChild:!0,children:n.jsxs(H,{variant:"ghost",className:"h-8 w-8 p-0",children:[n.jsx("span",{className:"sr-only",children:"Open menu"}),n.jsx(ri,{className:"h-4 w-4"})]})}),n.jsxs(Yr,{align:"end",children:[n.jsxs(bt,{onClick:()=>i&&i(m.id),children:[n.jsx(DG,{className:"mr-2 h-4 w-4"}),"Run Report"]}),n.jsxs(bt,{onClick:()=>a&&a(m.id),children:[n.jsx(oL,{className:"mr-2 h-4 w-4"}),"View Results"]}),n.jsxs(bt,{onClick:()=>s&&s(m),children:[n.jsx(Gr,{className:"mr-2 h-4 w-4"}),"Edit"]}),n.jsxs(bt,{onClick:()=>r&&r(m.id),children:[n.jsx(Ni,{className:"mr-2 h-4 w-4"}),"Delete"]}),n.jsxs(bt,{children:[n.jsx(YC,{className:"mr-2 h-4 w-4"}),"Export"]})]})]})})]},m.id))})]})})})})}const ope=[{value:"water_chemistry",label:"Water Chemistry"},{value:"chemical_usage",label:"Chemical Usage"},{value:"equipment_performance",label:"Equipment Performance"},{value:"maintenance_efficiency",label:"Maintenance Efficiency"},{value:"client_satisfaction",label:"Client Satisfaction"},{value:"cost_analysis",label:"Cost Analysis"}],lpe=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"biweekly",label:"Bi-Weekly"},{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"},{value:"on_demand",label:"On Demand"}],cpe=q.object({name:q.string().min(3,"Name must be at least 3 characters"),type:q.string().min(1,"Please select a report type"),description:q.string().optional(),startDate:q.date({required_error:"Start date is required"}),endDate:q.date({required_error:"End date is required"}),schedule:q.string().min(1,"Please select a schedule"),isPublic:q.boolean().default(!1)});function Yz({open:t,onOpenChange:e,initialData:s}){const{toast:r}=Lt(),i=jn(),[a,o]=y.useState(!1),c=mn({resolver:pn(cpe),defaultValues:s||{name:"",type:"",description:"",startDate:new Date,endDate:new Date(new Date().setMonth(new Date().getMonth()+1)),schedule:"monthly",isPublic:!1}}),d=Pt({mutationFn:async g=>{o(!0);try{return s!=null&&s.name?(await pt(`/api/business/pool-reports/${s.name}`,{method:"PATCH",body:JSON.stringify(g)}),{success:!0,message:"Pool report updated successfully"}):(await pt("/api/business/pool-reports",{method:"POST",body:JSON.stringify(g)}),{success:!0,message:"Pool report created successfully"})}finally{o(!1)}},onSuccess:g=>{g.success&&(r({title:"Success",description:g.message}),i.invalidateQueries({queryKey:["/api/business/pool-reports"]}),e(!1),c.reset())},onError:g=>{r({title:"Error",description:"Failed to save pool report. Please try again.",variant:"destructive"})}}),h=g=>{d.mutate(g)};return n.jsx(An,{open:t,onOpenChange:e,children:n.jsxs(wn,{className:"sm:max-w-[600px]",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:s?"Edit Pool Report":"Create Pool Report"}),n.jsx(ws,{children:"Create reports to analyze pool water chemistry, chemical usage, and maintenance data."})]}),n.jsx(fn,{...c,children:n.jsxs("form",{onSubmit:c.handleSubmit(h),className:"space-y-4",children:[n.jsx(J,{control:c.control,name:"name",render:({field:g})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Report Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Monthly Water Chemistry Report",...g})}),n.jsx(ot,{children:"Enter a descriptive name for this report"}),n.jsx(ne,{})]})}),n.jsx(J,{control:c.control,name:"type",render:({field:g})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Report Type"}),n.jsxs(gt,{onValueChange:g.onChange,defaultValue:g.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a report type"})})}),n.jsx(ht,{children:ope.map(m=>n.jsx(ue,{value:m.value,children:m.label},m.value))})]}),n.jsx(ot,{children:"Select the type of data this report will analyze"}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[n.jsx(J,{control:c.control,name:"startDate",render:({field:g})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Start Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:we("w-full pl-3 text-left font-normal",!g.value&&"text-muted-foreground"),children:[g.value?ft(g.value,"PPP"):n.jsx("span",{children:"Pick a date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:g.value,onSelect:g.onChange,initialFocus:!0})})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:c.control,name:"endDate",render:({field:g})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"End Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:we("w-full pl-3 text-left font-normal",!g.value&&"text-muted-foreground"),children:[g.value?ft(g.value,"PPP"):n.jsx("span",{children:"Pick a date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:g.value,onSelect:g.onChange,initialFocus:!0,disabled:m=>{const p=c.getValues("startDate");return p?m<p:!1}})})]}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:c.control,name:"schedule",render:({field:g})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Report Schedule"}),n.jsxs(gt,{onValueChange:g.onChange,defaultValue:g.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a schedule"})})}),n.jsx(ht,{children:lpe.map(m=>n.jsx(ue,{value:m.value,children:m.label},m.value))})]}),n.jsx(ot,{children:"How often should this report run?"}),n.jsx(ne,{})]})}),n.jsx(J,{control:c.control,name:"description",render:({field:g})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Description"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"This report analyzes water chemistry trends and provides recommendations for chemical adjustments.",className:"resize-none",...g})}),n.jsx(ne,{})]})}),n.jsx(J,{control:c.control,name:"isPublic",render:({field:g})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(X,{className:"text-base",children:"Public Report"}),n.jsx(ot,{children:"Make this report accessible to clients via the client portal"})]}),n.jsx(Q,{children:n.jsx(is,{checked:g.value,onCheckedChange:g.onChange})})]})}),n.jsxs(hs,{children:[n.jsx(H,{type:"button",variant:"outline",onClick:()=>e(!1),children:"Cancel"}),n.jsx(H,{type:"submit",disabled:a,children:a?"Saving...":s?"Update Report":"Create Report"})]})]})})]})})}function dpe({reports:t=[],isLoading:e,onCreateReport:s}){const{toast:r}=Lt(),i=jn(),[a,o]=y.useState(null),[c,d]=y.useState(!1),[h,g]=y.useState(!1),m=T=>T.split("_").map(M=>M.charAt(0).toUpperCase()+M.slice(1)).join(" "),p=T=>{switch(T){case"daily":return"bg-blue-100 text-blue-800";case"weekly":return"bg-green-100 text-green-800";case"biweekly":return"bg-teal-100 text-teal-800";case"monthly":return"bg-purple-100 text-purple-800";case"quarterly":return"bg-amber-100 text-amber-800";case"on_demand":default:return"bg-gray-100 text-gray-800"}},v=T=>T==="on_demand"?"On Demand":T.charAt(0).toUpperCase()+T.slice(1),j=Pt({mutationFn:async T=>await pt(`/api/business/pool-reports/${T}/run`,{method:"POST"}),onSuccess:()=>{r({title:"Report Executed",description:"Report has been queued for execution."}),i.invalidateQueries({queryKey:["/api/business/pool-reports"]})},onError:T=>{r({title:"Error",description:"Failed to run report. Please try again.",variant:"destructive"})}}),N=Pt({mutationFn:async T=>await pt(`/api/business/pool-reports/${T}`,{method:"DELETE"}),onSuccess:()=>{r({title:"Report Deleted",description:"Report has been deleted successfully."}),g(!1),o(null),i.invalidateQueries({queryKey:["/api/business/pool-reports"]})},onError:T=>{r({title:"Error",description:"Failed to delete report. Please try again.",variant:"destructive"})}}),E=Pt({mutationFn:async T=>await pt(`/api/business/pool-reports/${T}/pdf`,{method:"GET"}),onSuccess:()=>{r({title:"PDF Generated",description:"Report PDF has been generated and is ready for download."})},onError:T=>{r({title:"Error",description:"Failed to generate PDF. Please try again.",variant:"destructive"})}}),_=T=>{j.mutate(T)},S=T=>{o(T),d(!0)},C=T=>{window.location.href=`/business/pool-reports/${T}`},I=T=>{o(T),g(!0)},P=T=>{E.mutate(T)},L=()=>{a&&N.mutate(a.id)};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-full overflow-auto",children:e?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):t&&t.length>0?n.jsxs(jr,{children:[n.jsx(br,{children:n.jsxs(yn,{children:[n.jsx(Ye,{className:"whitespace-nowrap",children:"Report Name"}),n.jsx(Ye,{className:"whitespace-nowrap hidden sm:table-cell",children:"Type"}),n.jsx(Ye,{className:"whitespace-nowrap",children:"Schedule"}),n.jsx(Ye,{className:"whitespace-nowrap hidden md:table-cell",children:"Date Range"}),n.jsx(Ye,{className:"whitespace-nowrap hidden md:table-cell",children:"Last Run"}),n.jsx(Ye,{className:"whitespace-nowrap hidden sm:table-cell",children:"Public"}),n.jsx(Ye,{className:"text-right whitespace-nowrap",children:"Actions"})]})}),n.jsx(Nr,{children:t.map(T=>n.jsxs(yn,{children:[n.jsxs(qe,{className:"font-medium text-xs sm:text-sm",children:[T.name,n.jsx("div",{className:"block sm:hidden mt-1",children:n.jsx(Ze,{variant:"secondary",className:`text-xs ${p(T.schedule)}`,children:v(T.schedule)})})]}),n.jsx(qe,{className:"hidden sm:table-cell text-xs sm:text-sm",children:m(T.type)}),n.jsx(qe,{className:"hidden xs:table-cell",children:n.jsx(Ze,{className:p(T.schedule),children:v(T.schedule)})}),n.jsxs(qe,{className:"hidden md:table-cell text-xs sm:text-sm",children:[ft(new Date(T.startDate),"MMM d, yyyy")," - ",ft(new Date(T.endDate),"MMM d, yyyy")]}),n.jsx(qe,{className:"hidden md:table-cell text-xs sm:text-sm",children:T.lastRun?ft(new Date(T.lastRun),"MMM d, yyyy h:mm a"):"Never"}),n.jsx(qe,{className:"hidden sm:table-cell",children:T.isPublic?n.jsx(Ze,{variant:"default",children:"Public"}):n.jsx(Ze,{variant:"outline",children:"Private"})}),n.jsx(qe,{className:"text-right",children:n.jsxs(oi,{children:[n.jsx(li,{asChild:!0,children:n.jsxs(H,{variant:"ghost",className:"h-8 w-8 p-0",children:[n.jsx("span",{className:"sr-only",children:"Open menu"}),n.jsx(ri,{className:"h-4 w-4"})]})}),n.jsxs(Yr,{align:"end",children:[n.jsx(_m,{children:"Actions"}),n.jsxs(bt,{onClick:()=>C(T.id),children:[n.jsx(xo,{className:"mr-2 h-4 w-4"}),"View Report"]}),n.jsxs(bt,{onClick:()=>_(T.id),children:[n.jsx(Qa,{className:"mr-2 h-4 w-4"}),"Run Report"]}),n.jsxs(bt,{onClick:()=>P(T.id),children:[n.jsx(Cb,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),n.jsx(sl,{}),n.jsxs(bt,{onClick:()=>S(T),children:[n.jsx(Gr,{className:"mr-2 h-4 w-4"}),"Edit"]}),n.jsxs(bt,{onClick:()=>I(T),className:"text-red-600",children:[n.jsx(Ni,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},T.id))})]}):n.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[n.jsx(fr,{className:"h-10 w-10 sm:h-12 sm:w-12 text-gray-400 mb-3 sm:mb-4"}),n.jsx("h3",{className:"text-base sm:text-lg font-medium mb-1 sm:mb-2",children:"No Pool Reports"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mb-3 sm:mb-4 max-w-xs sm:max-w-md px-4",children:"Create pool reports to analyze water chemistry, chemical usage, and maintenance data."}),n.jsxs(H,{onClick:s,className:"text-xs sm:text-sm px-3 py-1 sm:px-4 sm:py-2",children:[n.jsx(tn,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),"Create Your First Report"]})]})}),a&&n.jsx(Yz,{open:c,onOpenChange:d,initialData:{name:a.name,type:a.type,description:a.description||"",startDate:new Date(a.startDate),endDate:new Date(a.endDate),schedule:a.schedule,isPublic:a.isPublic}}),n.jsx(An,{open:h,onOpenChange:g,children:n.jsxs(wn,{className:"max-w-[90%] sm:max-w-md",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{className:"text-base sm:text-lg",children:"Confirm Deletion"}),n.jsxs(ws,{className:"text-xs sm:text-sm mt-1.5",children:['Are you sure you want to delete the report "',a==null?void 0:a.name,'"? This action cannot be undone.']})]}),n.jsxs(hs,{className:"flex flex-col-reverse sm:flex-row gap-2 sm:gap-2 mt-4",children:[n.jsx(H,{variant:"outline",onClick:()=>g(!1),className:"text-xs sm:text-sm",children:"Cancel"}),n.jsx(H,{variant:"destructive",onClick:L,className:"text-xs sm:text-sm",children:"Delete Report"})]})]})})]})}function upe({data:t,isLoading:e,onEdit:s,onDelete:r,onCreateOrder:i}){const a=[{id:1,name:"Pool Supply Warehouse",contactName:"John Smith",email:"john@poolsupply.example.com",phone:"555-123-4567",category:"chemical supplier",isActive:!0},{id:2,name:"Equipment Pros",contactName:"Sarah Johnson",email:"sarah@equipmentpros.example.com",phone:"555-987-6543",category:"equipment",isActive:!0},{id:3,name:"Pool Parts Direct",contactName:"Mike Wilson",email:"mike@poolparts.example.com",phone:"555-456-7890",category:"parts",isActive:!0},{id:4,name:"Office Supplies Inc",contactName:"Jessica Brown",email:"jessica@officesupplies.example.com",phone:"555-222-3333",category:"office",isActive:!1}],o=t.length>0?t:a,c=d=>{switch(d){case"chemical supplier":return"bg-blue-100 text-blue-800";case"equipment":return"bg-green-100 text-green-800";case"parts":return"bg-orange-100 text-orange-800";case"service":return"bg-purple-100 text-purple-800";case"office":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e?n.jsx(Ae,{children:n.jsx(Ee,{className:"pt-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(_e,{className:"h-10 w-full"}),n.jsx(_e,{className:"h-10 w-full"}),n.jsx(_e,{className:"h-10 w-full"}),n.jsx(_e,{className:"h-10 w-full"})]})})}):n.jsx(Ae,{children:n.jsx(Ee,{className:"pt-6",children:n.jsx("div",{className:"rounded-md border",children:n.jsxs(jr,{children:[n.jsx(br,{children:n.jsxs(yn,{children:[n.jsx(Ye,{children:"Vendor Name"}),n.jsx(Ye,{children:"Category"}),n.jsx(Ye,{children:"Contact"}),n.jsx(Ye,{children:"Email/Phone"}),n.jsx(Ye,{children:"Status"}),n.jsx(Ye,{className:"text-right",children:"Actions"})]})}),n.jsx(Nr,{children:o.map(d=>n.jsxs(yn,{children:[n.jsx(qe,{className:"font-medium",children:d.name}),n.jsx(qe,{children:n.jsx(Ze,{variant:"outline",className:c(d.category),children:d.category})}),n.jsx(qe,{children:d.contactName||""}),n.jsxs(qe,{className:"space-y-1",children:[d.email&&n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(Qs,{className:"mr-1 h-3 w-3"}),d.email]}),d.phone&&n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(qr,{className:"mr-1 h-3 w-3"}),d.phone]})]}),n.jsx(qe,{children:d.isActive?n.jsx(Ze,{variant:"outline",className:"bg-green-100 text-green-800",children:"Active"}):n.jsx(Ze,{variant:"outline",className:"bg-gray-100 text-gray-800",children:"Inactive"})}),n.jsx(qe,{className:"text-right",children:n.jsxs(oi,{children:[n.jsx(li,{asChild:!0,children:n.jsxs(H,{variant:"ghost",className:"h-8 w-8 p-0",children:[n.jsx("span",{className:"sr-only",children:"Open menu"}),n.jsx(ri,{className:"h-4 w-4"})]})}),n.jsxs(Yr,{align:"end",children:[n.jsxs(bt,{onClick:()=>s&&s(d),children:[n.jsx(Gr,{className:"mr-2 h-4 w-4"}),"Edit"]}),n.jsxs(bt,{onClick:()=>r&&r(d.id),children:[n.jsx(Ni,{className:"mr-2 h-4 w-4"}),"Delete"]}),n.jsxs(bt,{onClick:()=>i&&i(d.id),children:[n.jsx(XC,{className:"mr-2 h-4 w-4"}),"Create Order"]}),d.email&&n.jsxs(bt,{onClick:()=>window.location.href=`mailto:${d.email}`,children:[n.jsx(Qs,{className:"mr-2 h-4 w-4"}),"Send Email"]}),d.phone&&n.jsxs(bt,{onClick:()=>window.location.href=`tel:${d.phone}`,children:[n.jsx(qr,{className:"mr-2 h-4 w-4"}),"Call"]})]})]})})]},d.id))})]})})})})}function hpe({data:t,isLoading:e,onEdit:s,onDelete:r,onView:i,onMarkReceived:a,onCancel:o}){const c=[{id:1,orderNumber:"PO-2025-001",vendorId:1,vendorName:"Pool Supply Warehouse",orderDate:"2025-03-01",expectedDeliveryDate:"2025-03-10",receivedDate:null,status:"approved",totalAmount:125985,paymentStatus:"unpaid",notes:"Monthly chlorine and chemical order"},{id:2,orderNumber:"PO-2025-002",vendorId:2,vendorName:"Equipment Pros",orderDate:"2025-03-03",expectedDeliveryDate:"2025-03-15",receivedDate:null,status:"shipped",totalAmount:374950,paymentStatus:"partial",notes:"Replacement pumps and filters"},{id:3,orderNumber:"PO-2025-003",vendorId:3,vendorName:"Pool Parts Direct",orderDate:"2025-03-05",expectedDeliveryDate:"2025-03-12",receivedDate:"2025-03-08",status:"received",totalAmount:68745,paymentStatus:"paid",notes:"Emergency replacement parts for repairs"},{id:4,orderNumber:"PO-2025-004",vendorId:4,vendorName:"Office Supplies Inc",orderDate:"2025-03-07",expectedDeliveryDate:"2025-03-14",receivedDate:null,status:"cancelled",totalAmount:24350,paymentStatus:"unpaid",notes:"Office supplies - cancelled due to incorrect items"}],d=t.length>0?t:c,h=p=>`$${(p/100).toFixed(2)}`,g=p=>{switch(p){case"draft":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"received":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},m=p=>{switch(p){case"unpaid":return"bg-red-100 text-red-800";case"partial":return"bg-amber-100 text-amber-800";case"paid":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return e?n.jsx(Ae,{children:n.jsx(Ee,{className:"pt-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(_e,{className:"h-10 w-full"}),n.jsx(_e,{className:"h-10 w-full"}),n.jsx(_e,{className:"h-10 w-full"}),n.jsx(_e,{className:"h-10 w-full"})]})})}):n.jsx(Ae,{children:n.jsx(Ee,{className:"pt-6",children:n.jsx("div",{className:"rounded-md border",children:n.jsxs(jr,{children:[n.jsx(br,{children:n.jsxs(yn,{children:[n.jsx(Ye,{children:"Order #"}),n.jsx(Ye,{children:"Vendor"}),n.jsx(Ye,{children:"Date"}),n.jsx(Ye,{children:"Status"}),n.jsx(Ye,{children:"Amount"}),n.jsx(Ye,{children:"Payment"}),n.jsx(Ye,{className:"text-right",children:"Actions"})]})}),n.jsx(Nr,{children:d.map(p=>n.jsxs(yn,{children:[n.jsx(qe,{className:"font-medium",children:p.orderNumber}),n.jsx(qe,{children:p.vendorName}),n.jsxs(qe,{children:[n.jsx("div",{children:ln(new Date(p.orderDate))}),p.expectedDeliveryDate&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Expected: ",ln(new Date(p.expectedDeliveryDate))]}),p.receivedDate&&n.jsxs("div",{className:"text-xs text-green-600",children:["Received: ",ln(new Date(p.receivedDate))]})]}),n.jsx(qe,{children:n.jsx(Ze,{variant:"outline",className:g(p.status),children:p.status.charAt(0).toUpperCase()+p.status.slice(1)})}),n.jsx(qe,{children:h(p.totalAmount)}),n.jsx(qe,{children:p.paymentStatus?n.jsx(Ze,{variant:"outline",className:m(p.paymentStatus),children:p.paymentStatus.charAt(0).toUpperCase()+p.paymentStatus.slice(1)}):n.jsx(Ze,{variant:"outline",className:"bg-gray-100 text-gray-800",children:"Not Set"})}),n.jsx(qe,{className:"text-right",children:n.jsxs(oi,{children:[n.jsx(li,{asChild:!0,children:n.jsxs(H,{variant:"ghost",className:"h-8 w-8 p-0",children:[n.jsx("span",{className:"sr-only",children:"Open menu"}),n.jsx(ri,{className:"h-4 w-4"})]})}),n.jsxs(Yr,{align:"end",children:[n.jsxs(bt,{onClick:()=>i&&i(p.id),children:[n.jsx(xo,{className:"mr-2 h-4 w-4"}),"View Details"]}),n.jsxs(bt,{onClick:()=>s&&s(p),children:[n.jsx(Gr,{className:"mr-2 h-4 w-4"}),"Edit"]}),p.status!=="received"&&p.status!=="cancelled"&&n.jsxs(bt,{onClick:()=>a&&a(p.id),children:[n.jsx(Ao,{className:"mr-2 h-4 w-4"}),"Mark Received"]}),p.status!=="received"&&p.status!=="cancelled"&&n.jsxs(bt,{onClick:()=>o&&o(p.id),children:[n.jsx(ys,{className:"mr-2 h-4 w-4"}),"Cancel Order"]}),n.jsxs(bt,{onClick:()=>r&&r(p.id),children:[n.jsx(Ni,{className:"mr-2 h-4 w-4"}),"Delete"]}),n.jsxs(bt,{children:[n.jsx(fr,{className:"mr-2 h-4 w-4"}),"Generate Invoice"]}),n.jsxs(bt,{children:[n.jsx(YC,{className:"mr-2 h-4 w-4"}),"Export PDF"]})]})]})})]},p.id))})]})})})})}function mpe({data:t,isLoading:e,onEdit:s,onDelete:r,onAddStock:i,onRemoveStock:a,onCreateOrder:o}){const c=[{id:1,name:"Liquid Chlorine (10% solution)",sku:"CHEM-LC10-1",category:"chemicals",quantity:45,minQuantity:20,unitPrice:599,location:"Warehouse A3",lastRestockDate:"2025-03-01",notes:"1 gallon containers"},{id:2,name:'3" Chlorine Tablets',sku:"CHEM-CT3-1",category:"chemicals",quantity:12,minQuantity:15,unitPrice:8999,location:"Warehouse A2",lastRestockDate:"2025-02-15",notes:"50 lb buckets"},{id:3,name:"Pool Pump 1.5HP",sku:"EQUIP-PP15-1",category:"equipment",quantity:5,minQuantity:3,unitPrice:29999,location:"Warehouse B1",lastRestockDate:"2025-02-10",notes:"Pentair SuperFlo"},{id:4,name:"Filter Cartridge",sku:"PART-FC100-1",category:"parts",quantity:8,minQuantity:10,unitPrice:4499,location:"Warehouse B4",lastRestockDate:"2025-02-20",notes:"Fits most standard pool filters"}],d=t.length>0?t:c,h=p=>`$${(p/100).toFixed(2)}`,g=(p,v)=>p<=0?{status:"Out of stock",color:"bg-red-100 text-red-800"}:p<v?{status:"Low stock",color:"bg-yellow-100 text-yellow-800"}:{status:"In stock",color:"bg-green-100 text-green-800"},m=p=>{switch(p){case"chemicals":return"bg-blue-100 text-blue-800";case"equipment":return"bg-green-100 text-green-800";case"parts":return"bg-orange-100 text-orange-800";case"tools":return"bg-purple-100 text-purple-800";case"office":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e?n.jsx(Ae,{children:n.jsx(Ee,{className:"pt-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(_e,{className:"h-10 w-full"}),n.jsx(_e,{className:"h-10 w-full"}),n.jsx(_e,{className:"h-10 w-full"}),n.jsx(_e,{className:"h-10 w-full"})]})})}):n.jsx(Ae,{children:n.jsx(Ee,{className:"pt-6",children:n.jsx("div",{className:"rounded-md border",children:n.jsxs(jr,{children:[n.jsx(br,{children:n.jsxs(yn,{children:[n.jsx(Ye,{children:"Item Name"}),n.jsx(Ye,{children:"SKU"}),n.jsx(Ye,{children:"Category"}),n.jsx(Ye,{children:"Qty"}),n.jsx(Ye,{children:"Status"}),n.jsx(Ye,{children:"Unit Price"}),n.jsx(Ye,{children:"Location"}),n.jsx(Ye,{className:"text-right",children:"Actions"})]})}),n.jsx(Nr,{children:d.map(p=>{const v=g(p.quantity,p.minQuantity);return n.jsxs(yn,{children:[n.jsx(qe,{className:"font-medium",children:p.name}),n.jsx(qe,{children:p.sku}),n.jsx(qe,{children:n.jsx(Ze,{variant:"outline",className:m(p.category),children:p.category})}),n.jsx(qe,{children:n.jsxs("div",{className:"text-center",children:[p.quantity,n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Min: ",p.minQuantity]})]})}),n.jsx(qe,{children:n.jsx(Ze,{variant:"outline",className:v.color,children:v.status})}),n.jsx(qe,{children:h(p.unitPrice)}),n.jsx(qe,{children:p.location||""}),n.jsx(qe,{className:"text-right",children:n.jsxs(oi,{children:[n.jsx(li,{asChild:!0,children:n.jsxs(H,{variant:"ghost",className:"h-8 w-8 p-0",children:[n.jsx("span",{className:"sr-only",children:"Open menu"}),n.jsx(ri,{className:"h-4 w-4"})]})}),n.jsxs(Yr,{align:"end",children:[n.jsxs(bt,{onClick:()=>s&&s(p),children:[n.jsx(Gr,{className:"mr-2 h-4 w-4"}),"Edit"]}),n.jsxs(bt,{onClick:()=>i&&i(p.id),children:[n.jsx(os,{className:"mr-2 h-4 w-4"}),"Add Stock"]}),n.jsxs(bt,{onClick:()=>a&&a(p.id),children:[n.jsx(gL,{className:"mr-2 h-4 w-4"}),"Remove Stock"]}),n.jsxs(bt,{onClick:()=>o&&o(p.id),children:[n.jsx(XC,{className:"mr-2 h-4 w-4"}),"Create Order"]}),n.jsxs(bt,{children:[n.jsx(Sp,{className:"mr-2 h-4 w-4"}),"View History"]}),n.jsxs(bt,{onClick:()=>r&&r(p.id),children:[n.jsx(Ni,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},p.id)})})]})})})})}function fpe({data:t,isLoading:e,onEdit:s,onDelete:r,onView:i}){const a=t&&t.length>0,o=d=>{const h=new Date,m=new Date(d).getTime()-h.getTime();return Math.ceil(m/(1e3*60*60*24))},c=(d,h)=>{const g=o(h);return d==="active"&&g<=30?n.jsxs(Ze,{className:"bg-amber-500 hover:bg-amber-600",children:[n.jsx(fs,{className:"h-3 w-3 mr-1"}),"Expiring Soon"]}):d==="active"?n.jsx(Ze,{className:"bg-green-500 hover:bg-green-600",children:"Active"}):d==="expired"?n.jsx(Ze,{className:"bg-red-500 hover:bg-red-600",children:"Expired"}):d==="pending"?n.jsx(Ze,{className:"bg-blue-500 hover:bg-blue-600",children:"Pending"}):n.jsx(Ze,{children:d})};return n.jsx(Ae,{children:n.jsx(Ee,{className:"p-0",children:e?n.jsx("div",{className:"flex justify-center items-center p-8",children:n.jsx("p",{children:"Loading licenses..."})}):a?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(jr,{children:[n.jsx(br,{children:n.jsxs(yn,{children:[n.jsx(Ye,{children:"License Name"}),n.jsx(Ye,{children:"Number"}),n.jsx(Ye,{children:"Issuing Authority"}),n.jsx(Ye,{children:"Issue Date"}),n.jsx(Ye,{children:"Expiry Date"}),n.jsx(Ye,{children:"Status"}),n.jsx(Ye,{className:"text-right",children:"Actions"})]})}),n.jsx(Nr,{children:t.map(d=>n.jsxs(yn,{children:[n.jsx(qe,{className:"font-medium",children:d.name}),n.jsx(qe,{children:d.licenseNumber}),n.jsx(qe,{children:d.issuingAuthority}),n.jsx(qe,{children:ln(new Date(d.issueDate))}),n.jsx(qe,{children:ln(new Date(d.expiryDate))}),n.jsx(qe,{children:c(d.status,d.expiryDate)}),n.jsx(qe,{className:"text-right",children:n.jsxs("div",{className:"flex justify-end gap-2",children:[i&&n.jsx(H,{variant:"outline",size:"icon",onClick:()=>i(d),title:"View Details",children:n.jsx(fr,{className:"h-4 w-4"})}),s&&n.jsx(H,{variant:"outline",size:"icon",onClick:()=>s(d),title:"Edit License",children:n.jsx(xL,{className:"h-4 w-4"})}),r&&n.jsx(H,{variant:"outline",size:"icon",className:"text-red-500",onClick:()=>r(d.id),title:"Delete License",children:n.jsx(Ni,{className:"h-4 w-4"})})]})})]},d.id))})]})}):n.jsx("div",{className:"flex justify-center items-center p-8 text-center",children:n.jsxs("div",{children:[n.jsx(fr,{className:"h-10 w-10 mx-auto mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"No licenses found."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Add a license to get started."})]})})})})}function ppe({data:t,isLoading:e,onEdit:s,onDelete:r,onView:i}){const a=t&&t.length>0,o=d=>{const h=new Date,m=new Date(d).getTime()-h.getTime();return Math.ceil(m/(1e3*60*60*24))},c=(d,h)=>{const g=o(h);return d==="active"&&g<=30?n.jsxs(Ze,{className:"bg-amber-500 hover:bg-amber-600",children:[n.jsx(fs,{className:"h-3 w-3 mr-1"}),"Expiring Soon"]}):d==="active"?n.jsx(Ze,{className:"bg-green-500 hover:bg-green-600",children:"Active"}):d==="expired"?n.jsx(Ze,{className:"bg-red-500 hover:bg-red-600",children:"Expired"}):d==="pending"?n.jsx(Ze,{className:"bg-blue-500 hover:bg-blue-600",children:"Pending Renewal"}):n.jsx(Ze,{children:d})};return n.jsx(Ae,{children:n.jsx(Ee,{className:"p-0",children:e?n.jsx("div",{className:"flex justify-center items-center p-8",children:n.jsx("p",{children:"Loading insurance policies..."})}):a?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(jr,{children:[n.jsx(br,{children:n.jsxs(yn,{children:[n.jsx(Ye,{children:"Policy Name"}),n.jsx(Ye,{children:"Provider"}),n.jsx(Ye,{children:"Policy Number"}),n.jsx(Ye,{children:"Coverage"}),n.jsx(Ye,{children:"Premium"}),n.jsx(Ye,{children:"End Date"}),n.jsx(Ye,{children:"Status"}),n.jsx(Ye,{className:"text-right",children:"Actions"})]})}),n.jsx(Nr,{children:t.map(d=>n.jsxs(yn,{children:[n.jsx(qe,{className:"font-medium",children:d.name}),n.jsx(qe,{children:d.provider}),n.jsx(qe,{children:d.policyNumber}),n.jsx(qe,{children:Ic(d.coverageAmount)}),n.jsx(qe,{children:Ic(d.premium)}),n.jsx(qe,{children:ln(new Date(d.endDate))}),n.jsx(qe,{children:c(d.status,d.endDate)}),n.jsx(qe,{className:"text-right",children:n.jsxs("div",{className:"flex justify-end gap-2",children:[i&&n.jsx(H,{variant:"outline",size:"icon",onClick:()=>i(d),title:"View Details",children:n.jsx(fr,{className:"h-4 w-4"})}),s&&n.jsx(H,{variant:"outline",size:"icon",onClick:()=>s(d),title:"Edit Insurance",children:n.jsx(xL,{className:"h-4 w-4"})}),r&&n.jsx(H,{variant:"outline",size:"icon",className:"text-red-500",onClick:()=>r(d.id),title:"Delete Insurance",children:n.jsx(Ni,{className:"h-4 w-4"})})]})})]},d.id))})]})}):n.jsx("div",{className:"flex justify-center items-center p-8 text-center",children:n.jsxs("div",{children:[n.jsx(wm,{className:"h-10 w-10 mx-auto mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"No insurance policies found."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Add an insurance policy to get started."})]})})})})}const gpe=q.object({date:q.date({required_error:"Expense date is required"}),category:q.string({required_error:"Category is required"}),amount:q.coerce.number({required_error:"Amount is required",invalid_type_error:"Amount must be a number"}).min(.01,"Amount must be greater than $0"),description:q.string({required_error:"Description is required"}).min(3,"Description must be at least 3 characters"),vendor:q.string().optional(),reimbursable:q.boolean().default(!1),notes:q.string().optional()});function xpe({categories:t,expenseToEdit:e,onClose:s}){const{toast:r}=Lt(),i=jn(),[a,o]=y.useState(!0),c={date:e!=null&&e.date?new Date(e.date):new Date,category:(e==null?void 0:e.category)||"",description:(e==null?void 0:e.description)||"",amount:e!=null&&e.amount?e.amount/100:void 0,vendor:(e==null?void 0:e.vendor)||"",reimbursable:(e==null?void 0:e.reimbursable)||!1,notes:(e==null?void 0:e.notes)||""},d=mn({resolver:pn(gpe),defaultValues:c}),h=Pt({mutationFn:async p=>{const v={...p,amount:Math.round(p.amount*100),createdBy:1};return e!=null&&e.id?pt(`/api/business/expenses/${e.id}`,{method:"PATCH",body:JSON.stringify(v)}):pt("/api/business/expenses",{method:"POST",body:JSON.stringify(v)})},onSuccess:()=>{r({title:e!=null&&e.id?"Expense updated":"Expense created",description:e!=null&&e.id?"The expense has been updated successfully.":"A new expense has been created successfully."}),i.invalidateQueries({queryKey:["/api/business/expenses"]}),i.invalidateQueries({queryKey:["/api/business/dashboard"]}),m()},onError:p=>{r({title:"Error",description:`Failed to ${e!=null&&e.id?"update":"create"} expense. ${p.message}`,variant:"destructive"})}});function g(p){h.mutate(p)}function m(){o(!1),s()}return n.jsx(An,{open:a,onOpenChange:o,children:n.jsxs(wn,{className:"sm:max-w-[600px]",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:e!=null&&e.id?"Edit Expense":"Add New Expense"}),n.jsx(ws,{children:e!=null&&e.id?"Update the details of this expense.":"Enter the details of the new expense."})]}),n.jsx(fn,{...d,children:n.jsxs("form",{onSubmit:d.handleSubmit(g),className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:d.control,name:"date",render:({field:p})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:we("w-full pl-3 text-left font-normal",!p.value&&"text-muted-foreground"),children:[p.value?ft(p.value,"PPP"):n.jsx("span",{children:"Pick a date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:p.value,onSelect:p.onChange,disabled:v=>v>new Date||v<new Date("2000-01-01"),initialFocus:!0})})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:d.control,name:"category",render:({field:p})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Category"}),n.jsxs(gt,{onValueChange:p.onChange,defaultValue:p.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a category"})})}),n.jsx(ht,{children:t.map(v=>n.jsx(ue,{value:v,children:v.charAt(0).toUpperCase()+v.slice(1)},v))})]}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:d.control,name:"description",render:({field:p})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Description"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter a description",...p})}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:d.control,name:"amount",render:({field:p})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Amount ($)"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",placeholder:"0.00",step:"0.01",min:"0",...p})}),n.jsx(ne,{})]})}),n.jsx(J,{control:d.control,name:"vendor",render:({field:p})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Vendor (Optional)"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter vendor name",...p})}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:d.control,name:"reimbursable",render:({field:p})=>n.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[n.jsx(Q,{children:n.jsx(Ri,{checked:p.value,onCheckedChange:p.onChange})}),n.jsxs("div",{className:"space-y-1 leading-none",children:[n.jsx(X,{children:"Reimbursable expense"}),n.jsx(ot,{children:"Check this if the expense should be reimbursed."})]})]})}),n.jsx(J,{control:d.control,name:"notes",render:({field:p})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Notes (Optional)"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter any additional notes",...p,rows:3})}),n.jsx(ne,{})]})}),n.jsxs(hs,{children:[n.jsxs(H,{type:"button",variant:"outline",onClick:m,className:"gap-1",children:[n.jsx(ys,{className:"h-4 w-4"})," Cancel"]}),n.jsxs(H,{type:"submit",disabled:h.isPending,className:"gap-1",children:[h.isPending&&n.jsx(Kt,{className:"h-4 w-4 animate-spin"}),e!=null&&e.id?"Update Expense":"Create Expense"]})]})]})})]})})}const vpe=q.object({userId:q.coerce.number({required_error:"Employee is required"}),date:q.date({required_error:"Date is required"}),startTime:q.string({required_error:"Start time is required"}),endTime:q.string().optional(),breakDuration:q.coerce.number().min(0,"Break duration cannot be negative").default(0),projectId:q.coerce.number().optional(),maintenanceId:q.coerce.number().optional(),repairId:q.coerce.number().optional(),notes:q.string().optional(),status:q.enum(["pending","approved","rejected"],{required_error:"Status is required"}).default("pending")});function ype({entryToEdit:t,onClose:e}){const{toast:s}=Lt(),r=jn(),[i,a]=y.useState(!0),[o,c]=y.useState(t!=null&&t.projectId?"project":t!=null&&t.maintenanceId?"maintenance":t!=null&&t.repairId?"repair":"other");wt({queryKey:["/api/technicians"]}),wt({queryKey:["/api/projects"],enabled:o==="project"}),wt({queryKey:["/api/maintenances"],enabled:o==="maintenance"}),wt({queryKey:["/api/repairs"],enabled:o==="repair"});const d={userId:(t==null?void 0:t.userId)||void 0,date:t!=null&&t.date?new Date(t.date):new Date,startTime:(t==null?void 0:t.startTime)||"09:00",endTime:(t==null?void 0:t.endTime)||void 0,breakDuration:(t==null?void 0:t.breakDuration)||0,projectId:(t==null?void 0:t.projectId)||void 0,maintenanceId:(t==null?void 0:t.maintenanceId)||void 0,repairId:(t==null?void 0:t.repairId)||void 0,notes:(t==null?void 0:t.notes)||"",status:(t==null?void 0:t.status)||"pending"},h=mn({resolver:pn(vpe),defaultValues:d}),g=Pt({mutationFn:async v=>t!=null&&t.id?pt(`/api/business/time-entries/${t.id}`,{method:"PATCH",body:JSON.stringify(v)}):pt("/api/business/time-entries",{method:"POST",body:JSON.stringify(v)}),onSuccess:()=>{s({title:t!=null&&t.id?"Time entry updated":"Time entry created",description:t!=null&&t.id?"The time entry has been updated successfully.":"A new time entry has been created successfully."}),r.invalidateQueries({queryKey:["/api/business/time-entries"]}),r.invalidateQueries({queryKey:["/api/business/dashboard"]}),p()},onError:v=>{s({title:"Error",description:`Failed to ${t!=null&&t.id?"update":"create"} time entry. ${v.message}`,variant:"destructive"})}});function m(v){const j={...v};o!=="project"&&(j.projectId=void 0),o!=="maintenance"&&(j.maintenanceId=void 0),o!=="repair"&&(j.repairId=void 0),g.mutate(j)}function p(){a(!1),e()}return n.jsx(An,{open:i,onOpenChange:a,children:n.jsxs(wn,{className:"sm:max-w-[700px]",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:t!=null&&t.id?"Edit Time Entry":"Add New Time Entry"}),n.jsx(ws,{children:t!=null&&t.id?"Update the details of this time entry.":"Enter the details of the new time entry."})]}),n.jsx(fn,{...h,children:n.jsxs("form",{onSubmit:h.handleSubmit(m),className:"space-y-4",children:[n.jsx(J,{control:h.control,name:"userId",render:({field:v})=>{var j;return n.jsxs(Z,{children:[n.jsx(X,{children:"Employee"}),n.jsxs(gt,{onValueChange:N=>v.onChange(parseInt(N)),value:(j=v.value)==null?void 0:j.toString(),children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select an employee"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"4",children:"Jane Technician"}),n.jsx(ue,{value:"5",children:"Bob Technician"}),n.jsx(ue,{value:"6",children:"Alex Technician"})]})]}),n.jsx(ne,{})]})}}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:h.control,name:"date",render:({field:v})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:we("w-full pl-3 text-left font-normal",!v.value&&"text-muted-foreground"),children:[v.value?ft(v.value,"PPP"):n.jsx("span",{children:"Pick a date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:v.value,onSelect:v.onChange,initialFocus:!0})})]}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"flex flex-col space-y-1.5",children:[n.jsx(X,{children:"Task Type"}),n.jsxs(gt,{onValueChange:v=>c(v),value:o,children:[n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select task type"})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"project",children:"Project"}),n.jsx(ue,{value:"maintenance",children:"Maintenance Service"}),n.jsx(ue,{value:"repair",children:"Repair"}),n.jsx(ue,{value:"other",children:"Other"})]})]})]})]}),o==="project"&&n.jsx(J,{control:h.control,name:"projectId",render:({field:v})=>{var j;return n.jsxs(Z,{children:[n.jsx(X,{children:"Project"}),n.jsxs(gt,{onValueChange:N=>v.onChange(parseInt(N)),value:(j=v.value)==null?void 0:j.toString(),children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a project"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"1",children:"Thompson Pool Construction"}),n.jsx(ue,{value:"2",children:"Johnson Pool Renovation"}),n.jsx(ue,{value:"3",children:"Community Center Pool"})]})]}),n.jsx(ne,{})]})}}),o==="maintenance"&&n.jsx(J,{control:h.control,name:"maintenanceId",render:({field:v})=>{var j;return n.jsxs(Z,{children:[n.jsx(X,{children:"Maintenance Service"}),n.jsxs(gt,{onValueChange:N=>v.onChange(parseInt(N)),value:(j=v.value)==null?void 0:j.toString(),children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a maintenance service"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"1",children:"Smith Residence - Regular Service"}),n.jsx(ue,{value:"2",children:"Johnson Pool - Weekly Cleaning"}),n.jsx(ue,{value:"3",children:"Downtown Apartments - Pool Maintenance"})]})]}),n.jsx(ne,{})]})}}),o==="repair"&&n.jsx(J,{control:h.control,name:"repairId",render:({field:v})=>{var j;return n.jsxs(Z,{children:[n.jsx(X,{children:"Repair"}),n.jsxs(gt,{onValueChange:N=>v.onChange(parseInt(N)),value:(j=v.value)==null?void 0:j.toString(),children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a repair"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"1",children:"Johnson Pool - Filter Repair"}),n.jsx(ue,{value:"2",children:"Smith Residence - Pump Replacement"}),n.jsx(ue,{value:"3",children:"Community Center - Heater Fix"})]})]}),n.jsx(ne,{})]})}}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(J,{control:h.control,name:"startTime",render:({field:v})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Start Time"}),n.jsx(Q,{children:n.jsx(ve,{type:"time",...v})}),n.jsx(ne,{})]})}),n.jsx(J,{control:h.control,name:"endTime",render:({field:v})=>n.jsxs(Z,{children:[n.jsx(X,{children:"End Time (Optional)"}),n.jsx(Q,{children:n.jsx(ve,{type:"time",...v,value:v.value||""})}),n.jsx(ne,{})]})}),n.jsx(J,{control:h.control,name:"breakDuration",render:({field:v})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Break (minutes)"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",min:"0",step:"5",...v})}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:h.control,name:"notes",render:({field:v})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Notes (Optional)"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter any notes about this time entry",...v,value:v.value||""})}),n.jsx(ne,{})]})}),n.jsx(J,{control:h.control,name:"status",render:({field:v})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Status"}),n.jsxs(gt,{onValueChange:v.onChange,value:v.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select status"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"pending",children:"Pending"}),n.jsx(ue,{value:"approved",children:"Approved"}),n.jsx(ue,{value:"rejected",children:"Rejected"})]})]}),n.jsx(ne,{})]})}),n.jsxs(hs,{children:[n.jsxs(H,{type:"button",variant:"outline",onClick:p,className:"gap-1",children:[n.jsx(ys,{className:"h-4 w-4"})," Cancel"]}),n.jsxs(H,{type:"submit",disabled:g.isPending,className:"gap-1",children:[g.isPending&&n.jsx(Kt,{className:"h-4 w-4 animate-spin"}),t!=null&&t.id?"Update Entry":"Create Entry"]})]})]})})]})})}var Mt;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Mt||(Mt={}));var eT=new Map([[Mt.QR_CODE,"QR_CODE"],[Mt.AZTEC,"AZTEC"],[Mt.CODABAR,"CODABAR"],[Mt.CODE_39,"CODE_39"],[Mt.CODE_93,"CODE_93"],[Mt.CODE_128,"CODE_128"],[Mt.DATA_MATRIX,"DATA_MATRIX"],[Mt.MAXICODE,"MAXICODE"],[Mt.ITF,"ITF"],[Mt.EAN_13,"EAN_13"],[Mt.EAN_8,"EAN_8"],[Mt.PDF_417,"PDF_417"],[Mt.RSS_14,"RSS_14"],[Mt.RSS_EXPANDED,"RSS_EXPANDED"],[Mt.UPC_A,"UPC_A"],[Mt.UPC_E,"UPC_E"],[Mt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),tT;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(tT||(tT={}));function wpe(t){return Object.values(Mt).includes(t)}var Hv;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Hv||(Hv={}));var jpe=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Hv.SCAN_TYPE_CAMERA,Hv.SCAN_TYPE_FILE],t}(),Kz=function(){function t(e,s){this.format=e,this.formatName=s}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!eT.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,eT.get(e))},t}(),nT=function(){function t(){}return t.createFromText=function(e){var s={text:e};return{decodedText:e,result:s}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),bN;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(bN||(bN={}));var bpe=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:bN.UNKWOWN_ERROR}},t}(),Npe=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,s){(this.verbose||s===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function bl(t){return typeof t>"u"||t===null}var oh=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),Zz=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,s){if(typeof e!="object"){var r=typeof e;return s.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(i),o=Object.keys(e),c=0,d=o;c<d.length;c++){var h=d[c];if(a.has(h))return s.logError("".concat(h," is not supported videoConstaints."),!0),!1}return!0},t}(),NN={exports:{}};(function(t,e){(function(s,r){r(e)})(Hm,function(s){function r(U){return U==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,l){U.__proto__=l}||function(U,l){for(var u in l)l.hasOwnProperty(u)&&(U[u]=l[u])};function a(U,l){i(U,l);function u(){this.constructor=U}U.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}function o(U,l){var u=Object.setPrototypeOf;u?u(U,l):U.__proto__=l}function c(U,l){l===void 0&&(l=U.constructor);var u=Error.captureStackTrace;u&&u(U,l)}var d=function(U){a(l,U);function l(u){var f=this.constructor,x=U.call(this,u)||this;return Object.defineProperty(x,"name",{value:f.name,enumerable:!1}),o(x,f.prototype),c(x),x}return l}(Error);class h extends d{constructor(l=void 0){super(l),this.message=l}getKind(){return this.constructor.kind}}h.kind="Exception";class g extends h{}g.kind="ArgumentException";class m extends h{}m.kind="IllegalArgumentException";class p{constructor(l){if(this.binarizer=l,l===null)throw new m("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(l,u){return this.binarizer.getBlackRow(l,u)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(l,u,f,x){const w=this.binarizer.getLuminanceSource().crop(l,u,f,x);return new p(this.binarizer.createBinarizer(w))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const l=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new p(this.binarizer.createBinarizer(l))}rotateCounterClockwise45(){const l=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new p(this.binarizer.createBinarizer(l))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class v extends h{static getChecksumInstance(){return new v}}v.kind="ChecksumException";class j{constructor(l){this.source=l}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class N{static arraycopy(l,u,f,x,w){for(;w--;)f[x++]=l[u++]}static currentTimeMillis(){return Date.now()}}class E extends h{}E.kind="IndexOutOfBoundsException";class _ extends E{constructor(l=void 0,u=void 0){super(u),this.index=l,this.message=u}}_.kind="ArrayIndexOutOfBoundsException";class S{static fill(l,u){for(let f=0,x=l.length;f<x;f++)l[f]=u}static fillWithin(l,u,f,x){S.rangeCheck(l.length,u,f);for(let w=u;w<f;w++)l[w]=x}static rangeCheck(l,u,f){if(u>f)throw new m("fromIndex("+u+") > toIndex("+f+")");if(u<0)throw new _(u);if(f>l)throw new _(f)}static asList(...l){return l}static create(l,u,f){return Array.from({length:l}).map(w=>Array.from({length:u}).fill(f))}static createInt32Array(l,u,f){return Array.from({length:l}).map(w=>Int32Array.from({length:u}).fill(f))}static equals(l,u){if(!l||!u||!l.length||!u.length||l.length!==u.length)return!1;for(let f=0,x=l.length;f<x;f++)if(l[f]!==u[f])return!1;return!0}static hashCode(l){if(l===null)return 0;let u=1;for(const f of l)u=31*u+f;return u}static fillUint8Array(l,u){for(let f=0;f!==l.length;f++)l[f]=u}static copyOf(l,u){return l.slice(0,u)}static copyOfUint8Array(l,u){if(l.length<=u){const f=new Uint8Array(u);return f.set(l),f}return l.slice(0,u)}static copyOfRange(l,u,f){const x=f-u,w=new Int32Array(x);return N.arraycopy(l,u,w,0,x),w}static binarySearch(l,u,f){f===void 0&&(f=S.numberComparator);let x=0,w=l.length-1;for(;x<=w;){const b=w+x>>1,A=f(u,l[b]);if(A>0)x=b+1;else if(A<0)w=b-1;else return b}return-x-1}static numberComparator(l,u){return l-u}}class C{static numberOfTrailingZeros(l){let u;if(l===0)return 32;let f=31;return u=l<<16,u!==0&&(f-=16,l=u),u=l<<8,u!==0&&(f-=8,l=u),u=l<<4,u!==0&&(f-=4,l=u),u=l<<2,u!==0&&(f-=2,l=u),f-(l<<1>>>31)}static numberOfLeadingZeros(l){if(l===0)return 32;let u=1;return l>>>16||(u+=16,l<<=16),l>>>24||(u+=8,l<<=8),l>>>28||(u+=4,l<<=4),l>>>30||(u+=2,l<<=2),u-=l>>>31,u}static toHexString(l){return l.toString(16)}static toBinaryString(l){return String(parseInt(String(l),2))}static bitCount(l){return l=l-(l>>>1&1431655765),l=(l&858993459)+(l>>>2&858993459),l=l+(l>>>4)&252645135,l=l+(l>>>8),l=l+(l>>>16),l&63}static truncDivision(l,u){return Math.trunc(l/u)}static parseInt(l,u=void 0){return parseInt(l,u)}}C.MIN_VALUE_32_BITS=-2147483648,C.MAX_VALUE=Number.MAX_SAFE_INTEGER;class I{constructor(l,u){l===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=l,u==null?this.bits=I.makeArray(l):this.bits=u)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(l){if(l>this.bits.length*32){const u=I.makeArray(l);N.arraycopy(this.bits,0,u,0,this.bits.length),this.bits=u}}get(l){return(this.bits[Math.floor(l/32)]&1<<(l&31))!==0}set(l){this.bits[Math.floor(l/32)]|=1<<(l&31)}flip(l){this.bits[Math.floor(l/32)]^=1<<(l&31)}getNextSet(l){const u=this.size;if(l>=u)return u;const f=this.bits;let x=Math.floor(l/32),w=f[x];w&=~((1<<(l&31))-1);const b=f.length;for(;w===0;){if(++x===b)return u;w=f[x]}const A=x*32+C.numberOfTrailingZeros(w);return A>u?u:A}getNextUnset(l){const u=this.size;if(l>=u)return u;const f=this.bits;let x=Math.floor(l/32),w=~f[x];w&=~((1<<(l&31))-1);const b=f.length;for(;w===0;){if(++x===b)return u;w=~f[x]}const A=x*32+C.numberOfTrailingZeros(w);return A>u?u:A}setBulk(l,u){this.bits[Math.floor(l/32)]=u}setRange(l,u){if(u<l||l<0||u>this.size)throw new m;if(u===l)return;u--;const f=Math.floor(l/32),x=Math.floor(u/32),w=this.bits;for(let b=f;b<=x;b++){const A=b>f?0:l&31,R=(2<<(b<x?31:u&31))-(1<<A);w[b]|=R}}clear(){const l=this.bits.length,u=this.bits;for(let f=0;f<l;f++)u[f]=0}isRange(l,u,f){if(u<l||l<0||u>this.size)throw new m;if(u===l)return!0;u--;const x=Math.floor(l/32),w=Math.floor(u/32),b=this.bits;for(let A=x;A<=w;A++){const D=A>x?0:l&31,F=(2<<(A<w?31:u&31))-(1<<D)&4294967295;if((b[A]&F)!==(f?F:0))return!1}return!0}appendBit(l){this.ensureCapacity(this.size+1),l&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(l,u){if(u<0||u>32)throw new m("Num bits must be between 0 and 32");this.ensureCapacity(this.size+u);for(let f=u;f>0;f--)this.appendBit((l>>f-1&1)===1)}appendBitArray(l){const u=l.size;this.ensureCapacity(this.size+u);for(let f=0;f<u;f++)this.appendBit(l.get(f))}xor(l){if(this.size!==l.size)throw new m("Sizes don't match");const u=this.bits;for(let f=0,x=u.length;f<x;f++)u[f]^=l.bits[f]}toBytes(l,u,f,x){for(let w=0;w<x;w++){let b=0;for(let A=0;A<8;A++)this.get(l)&&(b|=1<<7-A),l++;u[f+w]=b}}getBitArray(){return this.bits}reverse(){const l=new Int32Array(this.bits.length),u=Math.floor((this.size-1)/32),f=u+1,x=this.bits;for(let w=0;w<f;w++){let b=x[w];b=b>>1&1431655765|(b&1431655765)<<1,b=b>>2&858993459|(b&858993459)<<2,b=b>>4&252645135|(b&252645135)<<4,b=b>>8&16711935|(b&16711935)<<8,b=b>>16&65535|(b&65535)<<16,l[u-w]=b}if(this.size!==f*32){const w=f*32-this.size;let b=l[0]>>>w;for(let A=1;A<f;A++){const D=l[A];b|=D<<32-w,l[A-1]=b,b=D>>>w}l[f-1]=b}this.bits=l}static makeArray(l){return new Int32Array(Math.floor((l+31)/32))}equals(l){if(!(l instanceof I))return!1;const u=l;return this.size===u.size&&S.equals(this.bits,u.bits)}hashCode(){return 31*this.size+S.hashCode(this.bits)}toString(){let l="";for(let u=0,f=this.size;u<f;u++)u&7||(l+=" "),l+=this.get(u)?"X":".";return l}clone(){return new I(this.size,this.bits.slice())}}var P;(function(U){U[U.OTHER=0]="OTHER",U[U.PURE_BARCODE=1]="PURE_BARCODE",U[U.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",U[U.TRY_HARDER=3]="TRY_HARDER",U[U.CHARACTER_SET=4]="CHARACTER_SET",U[U.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",U[U.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",U[U.ASSUME_GS1=7]="ASSUME_GS1",U[U.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",U[U.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",U[U.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(P||(P={}));var L=P;class T extends h{static getFormatInstance(){return new T}}T.kind="FormatException";var M;(function(U){U[U.Cp437=0]="Cp437",U[U.ISO8859_1=1]="ISO8859_1",U[U.ISO8859_2=2]="ISO8859_2",U[U.ISO8859_3=3]="ISO8859_3",U[U.ISO8859_4=4]="ISO8859_4",U[U.ISO8859_5=5]="ISO8859_5",U[U.ISO8859_6=6]="ISO8859_6",U[U.ISO8859_7=7]="ISO8859_7",U[U.ISO8859_8=8]="ISO8859_8",U[U.ISO8859_9=9]="ISO8859_9",U[U.ISO8859_10=10]="ISO8859_10",U[U.ISO8859_11=11]="ISO8859_11",U[U.ISO8859_13=12]="ISO8859_13",U[U.ISO8859_14=13]="ISO8859_14",U[U.ISO8859_15=14]="ISO8859_15",U[U.ISO8859_16=15]="ISO8859_16",U[U.SJIS=16]="SJIS",U[U.Cp1250=17]="Cp1250",U[U.Cp1251=18]="Cp1251",U[U.Cp1252=19]="Cp1252",U[U.Cp1256=20]="Cp1256",U[U.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",U[U.UTF8=22]="UTF8",U[U.ASCII=23]="ASCII",U[U.Big5=24]="Big5",U[U.GB18030=25]="GB18030",U[U.EUC_KR=26]="EUC_KR"})(M||(M={}));class k{constructor(l,u,f,...x){this.valueIdentifier=l,this.name=f,typeof u=="number"?this.values=Int32Array.from([u]):this.values=u,this.otherEncodingNames=x,k.VALUE_IDENTIFIER_TO_ECI.set(l,this),k.NAME_TO_ECI.set(f,this);const w=this.values;for(let b=0,A=w.length;b!==A;b++){const D=w[b];k.VALUES_TO_ECI.set(D,this)}for(const b of x)k.NAME_TO_ECI.set(b,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(l){if(l<0||l>=900)throw new T("incorect value");const u=k.VALUES_TO_ECI.get(l);if(u===void 0)throw new T("incorect value");return u}static getCharacterSetECIByName(l){const u=k.NAME_TO_ECI.get(l);if(u===void 0)throw new T("incorect value");return u}equals(l){if(!(l instanceof k))return!1;const u=l;return this.getName()===u.getName()}}k.VALUE_IDENTIFIER_TO_ECI=new Map,k.VALUES_TO_ECI=new Map,k.NAME_TO_ECI=new Map,k.Cp437=new k(M.Cp437,Int32Array.from([0,2]),"Cp437"),k.ISO8859_1=new k(M.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),k.ISO8859_2=new k(M.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),k.ISO8859_3=new k(M.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),k.ISO8859_4=new k(M.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),k.ISO8859_5=new k(M.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),k.ISO8859_6=new k(M.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),k.ISO8859_7=new k(M.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),k.ISO8859_8=new k(M.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),k.ISO8859_9=new k(M.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),k.ISO8859_10=new k(M.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),k.ISO8859_11=new k(M.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),k.ISO8859_13=new k(M.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),k.ISO8859_14=new k(M.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),k.ISO8859_15=new k(M.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),k.ISO8859_16=new k(M.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),k.SJIS=new k(M.SJIS,20,"SJIS","Shift_JIS"),k.Cp1250=new k(M.Cp1250,21,"Cp1250","windows-1250"),k.Cp1251=new k(M.Cp1251,22,"Cp1251","windows-1251"),k.Cp1252=new k(M.Cp1252,23,"Cp1252","windows-1252"),k.Cp1256=new k(M.Cp1256,24,"Cp1256","windows-1256"),k.UnicodeBigUnmarked=new k(M.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),k.UTF8=new k(M.UTF8,26,"UTF8","UTF-8"),k.ASCII=new k(M.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),k.Big5=new k(M.Big5,28,"Big5"),k.GB18030=new k(M.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),k.EUC_KR=new k(M.EUC_KR,30,"EUC_KR","EUC-KR");class O extends h{}O.kind="UnsupportedOperationException";class V{static decode(l,u){const f=this.encodingName(u);return this.customDecoder?this.customDecoder(l,f):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(f)?this.decodeFallback(l,f):new TextDecoder(f).decode(l)}static shouldDecodeOnFallback(l){return!V.isBrowser()&&l==="ISO-8859-1"}static encode(l,u){const f=this.encodingName(u);return this.customEncoder?this.customEncoder(l,f):typeof TextEncoder>"u"?this.encodeFallback(l):new TextEncoder().encode(l)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(l){return typeof l=="string"?l:l.getName()}static encodingCharacterSet(l){return l instanceof k?l:k.getCharacterSetECIByName(l)}static decodeFallback(l,u){const f=this.encodingCharacterSet(u);if(V.isDecodeFallbackSupported(f)){let x="";for(let w=0,b=l.length;w<b;w++){let A=l[w].toString(16);A.length<2&&(A="0"+A),x+="%"+A}return decodeURIComponent(x)}if(f.equals(k.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(l.buffer));throw new O(`Encoding ${this.encodingName(u)} not supported by fallback.`)}static isDecodeFallbackSupported(l){return l.equals(k.UTF8)||l.equals(k.ISO8859_1)||l.equals(k.ASCII)}static encodeFallback(l){const f=btoa(unescape(encodeURIComponent(l))).split(""),x=[];for(let w=0;w<f.length;w++)x.push(f[w].charCodeAt(0));return new Uint8Array(x)}}class B{static castAsNonUtf8Char(l,u=null){const f=u?u.getName():this.ISO88591;return V.decode(new Uint8Array([l]),f)}static guessEncoding(l,u){if(u!=null&&u.get(L.CHARACTER_SET)!==void 0)return u.get(L.CHARACTER_SET).toString();const f=l.length;let x=!0,w=!0,b=!0,A=0,D=0,R=0,F=0,W=0,K=0,oe=0,ge=0,je=0,Te=0,Oe=0;const nt=l.length>3&&l[0]===239&&l[1]===187&&l[2]===191;for(let at=0;at<f&&(x||w||b);at++){const et=l[at]&255;b&&(A>0?et&128?A--:b=!1:et&128&&(et&64?(A++,et&32?(A++,et&16?(A++,et&8?b=!1:F++):R++):D++):b=!1)),x&&(et>127&&et<160?x=!1:et>159&&(et<192||et===215||et===247)&&Oe++),w&&(W>0?et<64||et===127||et>252?w=!1:W--:et===128||et===160||et>239?w=!1:et>160&&et<224?(K++,ge=0,oe++,oe>je&&(je=oe)):et>127?(W++,oe=0,ge++,ge>Te&&(Te=ge)):(oe=0,ge=0))}return b&&A>0&&(b=!1),w&&W>0&&(w=!1),b&&(nt||D+R+F>0)?B.UTF8:w&&(B.ASSUME_SHIFT_JIS||je>=3||Te>=3)?B.SHIFT_JIS:x&&w?je===2&&K===2||Oe*10>=f?B.SHIFT_JIS:B.ISO88591:x?B.ISO88591:w?B.SHIFT_JIS:b?B.UTF8:B.PLATFORM_DEFAULT_ENCODING}static format(l,...u){let f=-1;function x(b,A,D,R,F,W){if(b==="%%")return"%";if(u[++f]===void 0)return;b=R?parseInt(R.substr(1)):void 0;let K=F?parseInt(F.substr(1)):void 0,oe;switch(W){case"s":oe=u[f];break;case"c":oe=u[f][0];break;case"f":oe=parseFloat(u[f]).toFixed(b);break;case"p":oe=parseFloat(u[f]).toPrecision(b);break;case"e":oe=parseFloat(u[f]).toExponential(b);break;case"x":oe=parseInt(u[f]).toString(K||16);break;case"d":oe=parseFloat(parseInt(u[f],K||10).toPrecision(b)).toFixed(0);break}oe=typeof oe=="object"?JSON.stringify(oe):(+oe).toString(K);let ge=parseInt(D),je=D&&D[0]+""=="0"?"0":" ";for(;oe.length<ge;)oe=A!==void 0?oe+je:je+oe;return oe}let w=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return l.replace(w,x)}static getBytes(l,u){return V.encode(l,u)}static getCharCode(l,u=0){return l.charCodeAt(u)}static getCharAt(l){return String.fromCharCode(l)}}B.SHIFT_JIS=k.SJIS.getName(),B.GB2312="GB2312",B.ISO88591=k.ISO8859_1.getName(),B.EUC_JP="EUC_JP",B.UTF8=k.UTF8.getName(),B.PLATFORM_DEFAULT_ENCODING=B.UTF8,B.ASSUME_SHIFT_JIS=!1;class Y{constructor(l=""){this.value=l}enableDecoding(l){return this.encoding=l,this}append(l){return typeof l=="string"?this.value+=l.toString():this.encoding?this.value+=B.castAsNonUtf8Char(l,this.encoding):this.value+=String.fromCharCode(l),this}appendChars(l,u,f){for(let x=u;u<u+f;x++)this.append(l[x]);return this}length(){return this.value.length}charAt(l){return this.value.charAt(l)}deleteCharAt(l){this.value=this.value.substr(0,l)+this.value.substring(l+1)}setCharAt(l,u){this.value=this.value.substr(0,l)+u+this.value.substr(l+1)}substring(l,u){return this.value.substring(l,u)}setLengthToZero(){this.value=""}toString(){return this.value}insert(l,u){this.value=this.value.substr(0,l)+u+this.value.substr(l+u.length)}}class z{constructor(l,u,f,x){if(this.width=l,this.height=u,this.rowSize=f,this.bits=x,u==null&&(u=l),this.height=u,l<1||u<1)throw new m("Both dimensions must be greater than 0");f==null&&(f=Math.floor((l+31)/32)),this.rowSize=f,x==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(l){const u=l.length,f=l[0].length,x=new z(f,u);for(let w=0;w<u;w++){const b=l[w];for(let A=0;A<f;A++)b[A]&&x.set(A,w)}return x}static parseFromString(l,u,f){if(l===null)throw new m("stringRepresentation cannot be null");const x=new Array(l.length);let w=0,b=0,A=-1,D=0,R=0;for(;R<l.length;)if(l.charAt(R)===`
`||l.charAt(R)==="\r"){if(w>b){if(A===-1)A=w-b;else if(w-b!==A)throw new m("row lengths do not match");b=w,D++}R++}else if(l.substring(R,R+u.length)===u)R+=u.length,x[w]=!0,w++;else if(l.substring(R,R+f.length)===f)R+=f.length,x[w]=!1,w++;else throw new m("illegal character encountered: "+l.substring(R));if(w>b){if(A===-1)A=w-b;else if(w-b!==A)throw new m("row lengths do not match");D++}const F=new z(A,D);for(let W=0;W<w;W++)x[W]&&F.set(Math.floor(W%A),Math.floor(W/A));return F}get(l,u){const f=u*this.rowSize+Math.floor(l/32);return(this.bits[f]>>>(l&31)&1)!==0}set(l,u){const f=u*this.rowSize+Math.floor(l/32);this.bits[f]|=1<<(l&31)&4294967295}unset(l,u){const f=u*this.rowSize+Math.floor(l/32);this.bits[f]&=~(1<<(l&31)&4294967295)}flip(l,u){const f=u*this.rowSize+Math.floor(l/32);this.bits[f]^=1<<(l&31)&4294967295}xor(l){if(this.width!==l.getWidth()||this.height!==l.getHeight()||this.rowSize!==l.getRowSize())throw new m("input matrix dimensions do not match");const u=new I(Math.floor(this.width/32)+1),f=this.rowSize,x=this.bits;for(let w=0,b=this.height;w<b;w++){const A=w*f,D=l.getRow(w,u).getBitArray();for(let R=0;R<f;R++)x[A+R]^=D[R]}}clear(){const l=this.bits,u=l.length;for(let f=0;f<u;f++)l[f]=0}setRegion(l,u,f,x){if(u<0||l<0)throw new m("Left and top must be nonnegative");if(x<1||f<1)throw new m("Height and width must be at least 1");const w=l+f,b=u+x;if(b>this.height||w>this.width)throw new m("The region must fit inside the matrix");const A=this.rowSize,D=this.bits;for(let R=u;R<b;R++){const F=R*A;for(let W=l;W<w;W++)D[F+Math.floor(W/32)]|=1<<(W&31)&4294967295}}getRow(l,u){u==null||u.getSize()<this.width?u=new I(this.width):u.clear();const f=this.rowSize,x=this.bits,w=l*f;for(let b=0;b<f;b++)u.setBulk(b*32,x[w+b]);return u}setRow(l,u){N.arraycopy(u.getBitArray(),0,this.bits,l*this.rowSize,this.rowSize)}rotate180(){const l=this.getWidth(),u=this.getHeight();let f=new I(l),x=new I(l);for(let w=0,b=Math.floor((u+1)/2);w<b;w++)f=this.getRow(w,f),x=this.getRow(u-1-w,x),f.reverse(),x.reverse(),this.setRow(w,x),this.setRow(u-1-w,f)}getEnclosingRectangle(){const l=this.width,u=this.height,f=this.rowSize,x=this.bits;let w=l,b=u,A=-1,D=-1;for(let R=0;R<u;R++)for(let F=0;F<f;F++){const W=x[R*f+F];if(W!==0){if(R<b&&(b=R),R>D&&(D=R),F*32<w){let K=0;for(;!(W<<31-K&4294967295);)K++;F*32+K<w&&(w=F*32+K)}if(F*32+31>A){let K=31;for(;!(W>>>K);)K--;F*32+K>A&&(A=F*32+K)}}}return A<w||D<b?null:Int32Array.from([w,b,A-w+1,D-b+1])}getTopLeftOnBit(){const l=this.rowSize,u=this.bits;let f=0;for(;f<u.length&&u[f]===0;)f++;if(f===u.length)return null;const x=f/l;let w=f%l*32;const b=u[f];let A=0;for(;!(b<<31-A&4294967295);)A++;return w+=A,Int32Array.from([w,x])}getBottomRightOnBit(){const l=this.rowSize,u=this.bits;let f=u.length-1;for(;f>=0&&u[f]===0;)f--;if(f<0)return null;const x=Math.floor(f/l);let w=Math.floor(f%l)*32;const b=u[f];let A=31;for(;!(b>>>A);)A--;return w+=A,Int32Array.from([w,x])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(l){if(!(l instanceof z))return!1;const u=l;return this.width===u.width&&this.height===u.height&&this.rowSize===u.rowSize&&S.equals(this.bits,u.bits)}hashCode(){let l=this.width;return l=31*l+this.width,l=31*l+this.height,l=31*l+this.rowSize,l=31*l+S.hashCode(this.bits),l}toString(l="X ",u="  ",f=`
`){return this.buildToString(l,u,f)}buildToString(l,u,f){let x=new Y;for(let w=0,b=this.height;w<b;w++){for(let A=0,D=this.width;A<D;A++)x.append(this.get(A,w)?l:u);x.append(f)}return x.toString()}clone(){return new z(this.width,this.height,this.rowSize,this.bits.slice())}}class G extends h{static getNotFoundInstance(){return new G}}G.kind="NotFoundException";class he extends j{constructor(l){super(l),this.luminances=he.EMPTY,this.buckets=new Int32Array(he.LUMINANCE_BUCKETS)}getBlackRow(l,u){const f=this.getLuminanceSource(),x=f.getWidth();u==null||u.getSize()<x?u=new I(x):u.clear(),this.initArrays(x);const w=f.getRow(l,this.luminances),b=this.buckets;for(let D=0;D<x;D++)b[(w[D]&255)>>he.LUMINANCE_SHIFT]++;const A=he.estimateBlackPoint(b);if(x<3)for(let D=0;D<x;D++)(w[D]&255)<A&&u.set(D);else{let D=w[0]&255,R=w[1]&255;for(let F=1;F<x-1;F++){const W=w[F+1]&255;(R*4-D-W)/2<A&&u.set(F),D=R,R=W}}return u}getBlackMatrix(){const l=this.getLuminanceSource(),u=l.getWidth(),f=l.getHeight(),x=new z(u,f);this.initArrays(u);const w=this.buckets;for(let D=1;D<5;D++){const R=Math.floor(f*D/5),F=l.getRow(R,this.luminances),W=Math.floor(u*4/5);for(let K=Math.floor(u/5);K<W;K++){const oe=F[K]&255;w[oe>>he.LUMINANCE_SHIFT]++}}const b=he.estimateBlackPoint(w),A=l.getMatrix();for(let D=0;D<f;D++){const R=D*u;for(let F=0;F<u;F++)(A[R+F]&255)<b&&x.set(F,D)}return x}createBinarizer(l){return new he(l)}initArrays(l){this.luminances.length<l&&(this.luminances=new Uint8ClampedArray(l));const u=this.buckets;for(let f=0;f<he.LUMINANCE_BUCKETS;f++)u[f]=0}static estimateBlackPoint(l){const u=l.length;let f=0,x=0,w=0;for(let F=0;F<u;F++)l[F]>w&&(x=F,w=l[F]),l[F]>f&&(f=l[F]);let b=0,A=0;for(let F=0;F<u;F++){const W=F-x,K=l[F]*W*W;K>A&&(b=F,A=K)}if(x>b){const F=x;x=b,b=F}if(b-x<=u/16)throw new G;let D=b-1,R=-1;for(let F=b-1;F>x;F--){const W=F-x,K=W*W*(b-F)*(f-l[F]);K>R&&(D=F,R=K)}return D<<he.LUMINANCE_SHIFT}}he.LUMINANCE_BITS=5,he.LUMINANCE_SHIFT=8-he.LUMINANCE_BITS,he.LUMINANCE_BUCKETS=1<<he.LUMINANCE_BITS,he.EMPTY=Uint8ClampedArray.from([0]);class le extends he{constructor(l){super(l),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const l=this.getLuminanceSource(),u=l.getWidth(),f=l.getHeight();if(u>=le.MINIMUM_DIMENSION&&f>=le.MINIMUM_DIMENSION){const x=l.getMatrix();let w=u>>le.BLOCK_SIZE_POWER;u&le.BLOCK_SIZE_MASK&&w++;let b=f>>le.BLOCK_SIZE_POWER;f&le.BLOCK_SIZE_MASK&&b++;const A=le.calculateBlackPoints(x,w,b,u,f),D=new z(u,f);le.calculateThresholdForBlock(x,w,b,u,f,A,D),this.matrix=D}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(l){return new le(l)}static calculateThresholdForBlock(l,u,f,x,w,b,A){const D=w-le.BLOCK_SIZE,R=x-le.BLOCK_SIZE;for(let F=0;F<f;F++){let W=F<<le.BLOCK_SIZE_POWER;W>D&&(W=D);const K=le.cap(F,2,f-3);for(let oe=0;oe<u;oe++){let ge=oe<<le.BLOCK_SIZE_POWER;ge>R&&(ge=R);const je=le.cap(oe,2,u-3);let Te=0;for(let nt=-2;nt<=2;nt++){const at=b[K+nt];Te+=at[je-2]+at[je-1]+at[je]+at[je+1]+at[je+2]}const Oe=Te/25;le.thresholdBlock(l,ge,W,Oe,x,A)}}}static cap(l,u,f){return l<u?u:l>f?f:l}static thresholdBlock(l,u,f,x,w,b){for(let A=0,D=f*w+u;A<le.BLOCK_SIZE;A++,D+=w)for(let R=0;R<le.BLOCK_SIZE;R++)(l[D+R]&255)<=x&&b.set(u+R,f+A)}static calculateBlackPoints(l,u,f,x,w){const b=w-le.BLOCK_SIZE,A=x-le.BLOCK_SIZE,D=new Array(f);for(let R=0;R<f;R++){D[R]=new Int32Array(u);let F=R<<le.BLOCK_SIZE_POWER;F>b&&(F=b);for(let W=0;W<u;W++){let K=W<<le.BLOCK_SIZE_POWER;K>A&&(K=A);let oe=0,ge=255,je=0;for(let Oe=0,nt=F*x+K;Oe<le.BLOCK_SIZE;Oe++,nt+=x){for(let at=0;at<le.BLOCK_SIZE;at++){const et=l[nt+at]&255;oe+=et,et<ge&&(ge=et),et>je&&(je=et)}if(je-ge>le.MIN_DYNAMIC_RANGE)for(Oe++,nt+=x;Oe<le.BLOCK_SIZE;Oe++,nt+=x)for(let at=0;at<le.BLOCK_SIZE;at++)oe+=l[nt+at]&255}let Te=oe>>le.BLOCK_SIZE_POWER*2;if(je-ge<=le.MIN_DYNAMIC_RANGE&&(Te=ge/2,R>0&&W>0)){const Oe=(D[R-1][W]+2*D[R][W-1]+D[R-1][W-1])/4;ge<Oe&&(Te=Oe)}D[R][W]=Te}}return D}}le.BLOCK_SIZE_POWER=3,le.BLOCK_SIZE=1<<le.BLOCK_SIZE_POWER,le.BLOCK_SIZE_MASK=le.BLOCK_SIZE-1,le.MINIMUM_DIMENSION=le.BLOCK_SIZE*5,le.MIN_DYNAMIC_RANGE=24;class se{constructor(l,u){this.width=l,this.height=u}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(l,u,f,x){throw new O("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new O("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new O("This luminance source does not support rotation by 45 degrees.")}toString(){const l=new Uint8ClampedArray(this.width);let u=new Y;for(let f=0;f<this.height;f++){const x=this.getRow(f,l);for(let w=0;w<this.width;w++){const b=x[w]&255;let A;b<64?A="#":b<128?A="+":b<192?A=".":A=" ",u.append(A)}u.append(`
`)}return u.toString()}}class re extends se{constructor(l){super(l.getWidth(),l.getHeight()),this.delegate=l}getRow(l,u){const f=this.delegate.getRow(l,u),x=this.getWidth();for(let w=0;w<x;w++)f[w]=255-(f[w]&255);return f}getMatrix(){const l=this.delegate.getMatrix(),u=this.getWidth()*this.getHeight(),f=new Uint8ClampedArray(u);for(let x=0;x<u;x++)f[x]=255-(l[x]&255);return f}isCropSupported(){return this.delegate.isCropSupported()}crop(l,u,f,x){return new re(this.delegate.crop(l,u,f,x))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new re(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new re(this.delegate.rotateCounterClockwise45())}}class me extends se{constructor(l){super(l.width,l.height),this.canvas=l,this.tempCanvasElement=null,this.buffer=me.makeBufferFromCanvasImageData(l)}static makeBufferFromCanvasImageData(l){const u=l.getContext("2d").getImageData(0,0,l.width,l.height);return me.toGrayscaleBuffer(u.data,l.width,l.height)}static toGrayscaleBuffer(l,u,f){const x=new Uint8ClampedArray(u*f);for(let w=0,b=0,A=l.length;w<A;w+=4,b++){let D;if(l[w+3]===0)D=255;else{const F=l[w],W=l[w+1],K=l[w+2];D=306*F+601*W+117*K+512>>10}x[b]=D}return x}getRow(l,u){if(l<0||l>=this.getHeight())throw new m("Requested row is outside the image: "+l);const f=this.getWidth(),x=l*f;return u===null?u=this.buffer.slice(x,x+f):(u.length<f&&(u=new Uint8ClampedArray(f)),u.set(this.buffer.slice(x,x+f))),u}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(l,u,f,x){return super.crop(l,u,f,x),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const l=this.canvas.ownerDocument.createElement("canvas");l.width=this.canvas.width,l.height=this.canvas.height,this.tempCanvasElement=l}return this.tempCanvasElement}rotate(l){const u=this.getTempCanvasElement(),f=u.getContext("2d"),x=l*me.DEGREE_TO_RADIANS,w=this.canvas.width,b=this.canvas.height,A=Math.ceil(Math.abs(Math.cos(x))*w+Math.abs(Math.sin(x))*b),D=Math.ceil(Math.abs(Math.sin(x))*w+Math.abs(Math.cos(x))*b);return u.width=A,u.height=D,f.translate(A/2,D/2),f.rotate(x),f.drawImage(this.canvas,w/-2,b/-2),this.buffer=me.makeBufferFromCanvasImageData(u),this}invert(){return new re(this)}}me.DEGREE_TO_RADIANS=Math.PI/180;class Ce{constructor(l,u,f){this.deviceId=l,this.label=u,this.kind="videoinput",this.groupId=f||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var $=(globalThis||Hm||self||window||void 0)&&(globalThis||Hm||self||window||void 0).__awaiter||function(U,l,u,f){function x(w){return w instanceof u?w:new u(function(b){b(w)})}return new(u||(u=Promise))(function(w,b){function A(F){try{R(f.next(F))}catch(W){b(W)}}function D(F){try{R(f.throw(F))}catch(W){b(W)}}function R(F){F.done?w(F.value):x(F.value).then(A,D)}R((f=f.apply(U,l||[])).next())})};class xe{constructor(l,u=500,f){this.reader=l,this.timeBetweenScansMillis=u,this._hints=f,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(l){this._timeBetweenDecodingAttempts=l<0?0:l}set hints(l){this._hints=l||null}get hints(){return this._hints}listVideoInputDevices(){return $(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const l=yield navigator.mediaDevices.enumerateDevices(),u=[];for(const f of l){const x=f.kind==="video"?"videoinput":f.kind;if(x!=="videoinput")continue;const w=f.deviceId||f.id,b=f.label||`Video device ${u.length+1}`,A=f.groupId,D={deviceId:w,label:b,kind:x,groupId:A};u.push(D)}return u})}getVideoInputDevices(){return $(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(u=>new Ce(u.deviceId,u.label))})}findDeviceById(l){return $(this,void 0,void 0,function*(){const u=yield this.listVideoInputDevices();return u?u.find(f=>f.deviceId===l):null})}decodeFromInputVideoDevice(l,u){return $(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(l,u)})}decodeOnceFromVideoDevice(l,u){return $(this,void 0,void 0,function*(){this.reset();let f;l?f={deviceId:{exact:l}}:f={facingMode:"environment"};const x={video:f};return yield this.decodeOnceFromConstraints(x,u)})}decodeOnceFromConstraints(l,u){return $(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(l);return yield this.decodeOnceFromStream(f,u)})}decodeOnceFromStream(l,u){return $(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(l,u);return yield this.decodeOnce(f)})}decodeFromInputVideoDeviceContinuously(l,u,f){return $(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(l,u,f)})}decodeFromVideoDevice(l,u,f){return $(this,void 0,void 0,function*(){let x;l?x={deviceId:{exact:l}}:x={facingMode:"environment"};const w={video:x};return yield this.decodeFromConstraints(w,u,f)})}decodeFromConstraints(l,u,f){return $(this,void 0,void 0,function*(){const x=yield navigator.mediaDevices.getUserMedia(l);return yield this.decodeFromStream(x,u,f)})}decodeFromStream(l,u,f){return $(this,void 0,void 0,function*(){this.reset();const x=yield this.attachStreamToVideo(l,u);return yield this.decodeContinuously(x,f)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(l,u){return $(this,void 0,void 0,function*(){const f=this.prepareVideoElement(u);return this.addVideoSource(f,l),this.videoElement=f,this.stream=l,yield this.playVideoOnLoadAsync(f),f})}playVideoOnLoadAsync(l){return new Promise((u,f)=>this.playVideoOnLoad(l,()=>u()))}playVideoOnLoad(l,u){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(l),l.addEventListener("ended",this.videoEndedListener),l.addEventListener("canplay",this.videoCanPlayListener),l.addEventListener("playing",u),this.tryPlayVideo(l)}isVideoPlaying(l){return l.currentTime>0&&!l.paused&&!l.ended&&l.readyState>2}tryPlayVideo(l){return $(this,void 0,void 0,function*(){if(this.isVideoPlaying(l)){console.warn("Trying to play video that is already playing.");return}try{yield l.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(l,u){const f=document.getElementById(l);if(!f)throw new g(`element with id '${l}' not found`);if(f.nodeName.toLowerCase()!==u.toLowerCase())throw new g(`element with id '${l}' must be an ${u} element`);return f}decodeFromImage(l,u){if(!l&&!u)throw new g("either imageElement with a src set or an url must be provided");return u&&!l?this.decodeFromImageUrl(u):this.decodeFromImageElement(l)}decodeFromVideo(l,u){if(!l&&!u)throw new g("Either an element with a src set or an URL must be provided");return u&&!l?this.decodeFromVideoUrl(u):this.decodeFromVideoElement(l)}decodeFromVideoContinuously(l,u,f){if(l===void 0&&u===void 0)throw new g("Either an element with a src set or an URL must be provided");return u&&!l?this.decodeFromVideoUrlContinuously(u,f):this.decodeFromVideoElementContinuously(l,f)}decodeFromImageElement(l){if(!l)throw new g("An image element must be provided.");this.reset();const u=this.prepareImageElement(l);this.imageElement=u;let f;return this.isImageLoaded(u)?f=this.decodeOnce(u,!1,!0):f=this._decodeOnLoadImage(u),f}decodeFromVideoElement(l){const u=this._decodeFromVideoElementSetup(l);return this._decodeOnLoadVideo(u)}decodeFromVideoElementContinuously(l,u){const f=this._decodeFromVideoElementSetup(l);return this._decodeOnLoadVideoContinuously(f,u)}_decodeFromVideoElementSetup(l){if(!l)throw new g("A video element must be provided.");this.reset();const u=this.prepareVideoElement(l);return this.videoElement=u,u}decodeFromImageUrl(l){if(!l)throw new g("An URL must be provided.");this.reset();const u=this.prepareImageElement();this.imageElement=u;const f=this._decodeOnLoadImage(u);return u.src=l,f}decodeFromVideoUrl(l){if(!l)throw new g("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),f=this.decodeFromVideoElement(u);return u.src=l,f}decodeFromVideoUrlContinuously(l,u){if(!l)throw new g("An URL must be provided.");this.reset();const f=this.prepareVideoElement(),x=this.decodeFromVideoElementContinuously(f,u);return f.src=l,x}_decodeOnLoadImage(l){return new Promise((u,f)=>{this.imageLoadedListener=()=>this.decodeOnce(l,!1,!0).then(u,f),l.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(l){return $(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(l),yield this.decodeOnce(l)})}_decodeOnLoadVideoContinuously(l,u){return $(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(l),this.decodeContinuously(l,u)})}isImageLoaded(l){return!(!l.complete||l.naturalWidth===0)}prepareImageElement(l){let u;return typeof l>"u"&&(u=document.createElement("img"),u.width=200,u.height=200),typeof l=="string"&&(u=this.getMediaElement(l,"img")),l instanceof HTMLImageElement&&(u=l),u}prepareVideoElement(l){let u;return!l&&typeof document<"u"&&(u=document.createElement("video"),u.width=200,u.height=200),typeof l=="string"&&(u=this.getMediaElement(l,"video")),l instanceof HTMLVideoElement&&(u=l),u.setAttribute("autoplay","true"),u.setAttribute("muted","true"),u.setAttribute("playsinline","true"),u}decodeOnce(l,u=!0,f=!0){this._stopAsyncDecode=!1;const x=(w,b)=>{if(this._stopAsyncDecode){b(new G("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const A=this.decode(l);w(A)}catch(A){const D=u&&A instanceof G,F=(A instanceof v||A instanceof T)&&f;if(D||F)return setTimeout(x,this._timeBetweenDecodingAttempts,w,b);b(A)}};return new Promise((w,b)=>x(w,b))}decodeContinuously(l,u){this._stopContinuousDecode=!1;const f=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const x=this.decode(l);u(x,null),setTimeout(f,this.timeBetweenScansMillis)}catch(x){u(null,x);const w=x instanceof v||x instanceof T,b=x instanceof G;(w||b)&&setTimeout(f,this._timeBetweenDecodingAttempts)}};f()}decode(l){const u=this.createBinaryBitmap(l);return this.decodeBitmap(u)}_isHTMLVideoElement(l){return l.videoWidth!==0}drawFrameOnCanvas(l,u,f){u||(u={sx:0,sy:0,sWidth:l.videoWidth,sHeight:l.videoHeight,dx:0,dy:0,dWidth:l.videoWidth,dHeight:l.videoHeight}),f||(f=this.captureCanvasContext),f.drawImage(l,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}drawImageOnCanvas(l,u,f=this.captureCanvasContext){u||(u={sx:0,sy:0,sWidth:l.naturalWidth,sHeight:l.naturalHeight,dx:0,dy:0,dWidth:l.naturalWidth,dHeight:l.naturalHeight}),f||(f=this.captureCanvasContext),f.drawImage(l,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}createBinaryBitmap(l){this.getCaptureCanvasContext(l),this._isHTMLVideoElement(l)?this.drawFrameOnCanvas(l):this.drawImageOnCanvas(l);const u=this.getCaptureCanvas(l),f=new me(u),x=new le(f);return new p(x)}getCaptureCanvasContext(l){if(!this.captureCanvasContext){const f=this.getCaptureCanvas(l).getContext("2d");this.captureCanvasContext=f}return this.captureCanvasContext}getCaptureCanvas(l){if(!this.captureCanvas){const u=this.createCaptureCanvas(l);this.captureCanvas=u}return this.captureCanvas}decodeBitmap(l){return this.reader.decode(l,this._hints)}createCaptureCanvas(l){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const u=document.createElement("canvas");let f,x;return typeof l<"u"&&(l instanceof HTMLVideoElement?(f=l.videoWidth,x=l.videoHeight):l instanceof HTMLImageElement&&(f=l.naturalWidth||l.width,x=l.naturalHeight||l.height)),u.style.width=f+"px",u.style.height=x+"px",u.width=f,u.height=x,u}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(l=>l.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(l,u){try{l.srcObject=u}catch{l.src=URL.createObjectURL(u)}}cleanVideoSource(l){try{l.srcObject=null}catch{l.src=""}this.videoElement.removeAttribute("src")}}class te{constructor(l,u,f=u==null?0:8*u.length,x,w,b=N.currentTimeMillis()){this.text=l,this.rawBytes=u,this.numBits=f,this.resultPoints=x,this.format=w,this.timestamp=b,this.text=l,this.rawBytes=u,f==null?this.numBits=u==null?0:8*u.length:this.numBits=f,this.resultPoints=x,this.format=w,this.resultMetadata=null,b==null?this.timestamp=N.currentTimeMillis():this.timestamp=b}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(l,u){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(l,u)}putAllMetadata(l){l!==null&&(this.resultMetadata===null?this.resultMetadata=l:this.resultMetadata=new Map(l))}addResultPoints(l){const u=this.resultPoints;if(u===null)this.resultPoints=l;else if(l!==null&&l.length>0){const f=new Array(u.length+l.length);N.arraycopy(u,0,f,0,u.length),N.arraycopy(l,0,f,u.length,l.length),this.resultPoints=f}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ae;(function(U){U[U.AZTEC=0]="AZTEC",U[U.CODABAR=1]="CODABAR",U[U.CODE_39=2]="CODE_39",U[U.CODE_93=3]="CODE_93",U[U.CODE_128=4]="CODE_128",U[U.DATA_MATRIX=5]="DATA_MATRIX",U[U.EAN_8=6]="EAN_8",U[U.EAN_13=7]="EAN_13",U[U.ITF=8]="ITF",U[U.MAXICODE=9]="MAXICODE",U[U.PDF_417=10]="PDF_417",U[U.QR_CODE=11]="QR_CODE",U[U.RSS_14=12]="RSS_14",U[U.RSS_EXPANDED=13]="RSS_EXPANDED",U[U.UPC_A=14]="UPC_A",U[U.UPC_E=15]="UPC_E",U[U.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ae||(ae={}));var ee=ae,de;(function(U){U[U.OTHER=0]="OTHER",U[U.ORIENTATION=1]="ORIENTATION",U[U.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",U[U.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",U[U.ISSUE_NUMBER=4]="ISSUE_NUMBER",U[U.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",U[U.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",U[U.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",U[U.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",U[U.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",U[U.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(de||(de={}));var pe=de;class Me{constructor(l,u,f,x,w=-1,b=-1){this.rawBytes=l,this.text=u,this.byteSegments=f,this.ecLevel=x,this.structuredAppendSequenceNumber=w,this.structuredAppendParity=b,this.numBits=l==null?0:8*l.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(l){this.numBits=l}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(l){this.errorsCorrected=l}getErasures(){return this.erasures}setErasures(l){this.erasures=l}getOther(){return this.other}setOther(l){this.other=l}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Le{exp(l){return this.expTable[l]}log(l){if(l===0)throw new m;return this.logTable[l]}static addOrSubtract(l,u){return l^u}}class We{constructor(l,u){if(u.length===0)throw new m;this.field=l;const f=u.length;if(f>1&&u[0]===0){let x=1;for(;x<f&&u[x]===0;)x++;x===f?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(f-x),N.arraycopy(u,x,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(l){return this.coefficients[this.coefficients.length-1-l]}evaluateAt(l){if(l===0)return this.getCoefficient(0);const u=this.coefficients;let f;if(l===1){f=0;for(let b=0,A=u.length;b!==A;b++){const D=u[b];f=Le.addOrSubtract(f,D)}return f}f=u[0];const x=u.length,w=this.field;for(let b=1;b<x;b++)f=Le.addOrSubtract(w.multiply(l,f),u[b]);return f}addOrSubtract(l){if(!this.field.equals(l.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero())return l;if(l.isZero())return this;let u=this.coefficients,f=l.coefficients;if(u.length>f.length){const b=u;u=f,f=b}let x=new Int32Array(f.length);const w=f.length-u.length;N.arraycopy(f,0,x,0,w);for(let b=w;b<f.length;b++)x[b]=Le.addOrSubtract(u[b-w],f[b]);return new We(this.field,x)}multiply(l){if(!this.field.equals(l.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero()||l.isZero())return this.field.getZero();const u=this.coefficients,f=u.length,x=l.coefficients,w=x.length,b=new Int32Array(f+w-1),A=this.field;for(let D=0;D<f;D++){const R=u[D];for(let F=0;F<w;F++)b[D+F]=Le.addOrSubtract(b[D+F],A.multiply(R,x[F]))}return new We(A,b)}multiplyScalar(l){if(l===0)return this.field.getZero();if(l===1)return this;const u=this.coefficients.length,f=this.field,x=new Int32Array(u),w=this.coefficients;for(let b=0;b<u;b++)x[b]=f.multiply(w[b],l);return new We(f,x)}multiplyByMonomial(l,u){if(l<0)throw new m;if(u===0)return this.field.getZero();const f=this.coefficients,x=f.length,w=new Int32Array(x+l),b=this.field;for(let A=0;A<x;A++)w[A]=b.multiply(f[A],u);return new We(b,w)}divide(l){if(!this.field.equals(l.field))throw new m("GenericGFPolys do not have same GenericGF field");if(l.isZero())throw new m("Divide by 0");const u=this.field;let f=u.getZero(),x=this;const w=l.getCoefficient(l.getDegree()),b=u.inverse(w);for(;x.getDegree()>=l.getDegree()&&!x.isZero();){const A=x.getDegree()-l.getDegree(),D=u.multiply(x.getCoefficient(x.getDegree()),b),R=l.multiplyByMonomial(A,D),F=u.buildMonomial(A,D);f=f.addOrSubtract(F),x=x.addOrSubtract(R)}return[f,x]}toString(){let l="";for(let u=this.getDegree();u>=0;u--){let f=this.getCoefficient(u);if(f!==0){if(f<0?(l+=" - ",f=-f):l.length>0&&(l+=" + "),u===0||f!==1){const x=this.field.log(f);x===0?l+="1":x===1?l+="a":(l+="a^",l+=x)}u!==0&&(u===1?l+="x":(l+="x^",l+=u))}}return l}}class jt extends h{}jt.kind="ArithmeticException";class mt extends Le{constructor(l,u,f){super(),this.primitive=l,this.size=u,this.generatorBase=f;const x=new Int32Array(u);let w=1;for(let A=0;A<u;A++)x[A]=w,w*=2,w>=u&&(w^=l,w&=u-1);this.expTable=x;const b=new Int32Array(u);for(let A=0;A<u-1;A++)b[x[A]]=A;this.logTable=b,this.zero=new We(this,Int32Array.from([0])),this.one=new We(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(l,u){if(l<0)throw new m;if(u===0)return this.zero;const f=new Int32Array(l+1);return f[0]=u,new We(this,f)}inverse(l){if(l===0)throw new jt;return this.expTable[this.size-this.logTable[l]-1]}multiply(l,u){return l===0||u===0?0:this.expTable[(this.logTable[l]+this.logTable[u])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+C.toHexString(this.primitive)+","+this.size+")"}equals(l){return l===this}}mt.AZTEC_DATA_12=new mt(4201,4096,1),mt.AZTEC_DATA_10=new mt(1033,1024,1),mt.AZTEC_DATA_6=new mt(67,64,1),mt.AZTEC_PARAM=new mt(19,16,1),mt.QR_CODE_FIELD_256=new mt(285,256,0),mt.DATA_MATRIX_FIELD_256=new mt(301,256,1),mt.AZTEC_DATA_8=mt.DATA_MATRIX_FIELD_256,mt.MAXICODE_FIELD_64=mt.AZTEC_DATA_6;class ke extends h{}ke.kind="ReedSolomonException";class yt extends h{}yt.kind="IllegalStateException";class On{constructor(l){this.field=l}decode(l,u){const f=this.field,x=new We(f,l),w=new Int32Array(u);let b=!0;for(let oe=0;oe<u;oe++){const ge=x.evaluateAt(f.exp(oe+f.getGeneratorBase()));w[w.length-1-oe]=ge,ge!==0&&(b=!1)}if(b)return;const A=new We(f,w),D=this.runEuclideanAlgorithm(f.buildMonomial(u,1),A,u),R=D[0],F=D[1],W=this.findErrorLocations(R),K=this.findErrorMagnitudes(F,W);for(let oe=0;oe<W.length;oe++){const ge=l.length-1-f.log(W[oe]);if(ge<0)throw new ke("Bad error location");l[ge]=mt.addOrSubtract(l[ge],K[oe])}}runEuclideanAlgorithm(l,u,f){if(l.getDegree()<u.getDegree()){const oe=l;l=u,u=oe}const x=this.field;let w=l,b=u,A=x.getZero(),D=x.getOne();for(;b.getDegree()>=(f/2|0);){let oe=w,ge=A;if(w=b,A=D,w.isZero())throw new ke("r_{i-1} was zero");b=oe;let je=x.getZero();const Te=w.getCoefficient(w.getDegree()),Oe=x.inverse(Te);for(;b.getDegree()>=w.getDegree()&&!b.isZero();){const nt=b.getDegree()-w.getDegree(),at=x.multiply(b.getCoefficient(b.getDegree()),Oe);je=je.addOrSubtract(x.buildMonomial(nt,at)),b=b.addOrSubtract(w.multiplyByMonomial(nt,at))}if(D=je.multiply(A).addOrSubtract(ge),b.getDegree()>=w.getDegree())throw new yt("Division algorithm failed to reduce polynomial?")}const R=D.getCoefficient(0);if(R===0)throw new ke("sigmaTilde(0) was zero");const F=x.inverse(R),W=D.multiplyScalar(F),K=b.multiplyScalar(F);return[W,K]}findErrorLocations(l){const u=l.getDegree();if(u===1)return Int32Array.from([l.getCoefficient(1)]);const f=new Int32Array(u);let x=0;const w=this.field;for(let b=1;b<w.getSize()&&x<u;b++)l.evaluateAt(b)===0&&(f[x]=w.inverse(b),x++);if(x!==u)throw new ke("Error locator degree does not match number of roots");return f}findErrorMagnitudes(l,u){const f=u.length,x=new Int32Array(f),w=this.field;for(let b=0;b<f;b++){const A=w.inverse(u[b]);let D=1;for(let R=0;R<f;R++)if(b!==R){const F=w.multiply(u[R],A),W=F&1?F&-2:F|1;D=w.multiply(D,W)}x[b]=w.multiply(l.evaluateAt(A),w.inverse(D)),w.getGeneratorBase()!==0&&(x[b]=w.multiply(x[b],A))}return x}}var zt;(function(U){U[U.UPPER=0]="UPPER",U[U.LOWER=1]="LOWER",U[U.MIXED=2]="MIXED",U[U.DIGIT=3]="DIGIT",U[U.PUNCT=4]="PUNCT",U[U.BINARY=5]="BINARY"})(zt||(zt={}));class ce{decode(l){this.ddata=l;let u=l.getBits(),f=this.extractBits(u),x=this.correctBits(f),w=ce.convertBoolArrayToByteArray(x),b=ce.getEncodedData(x),A=new Me(w,b,null,null);return A.setNumBits(x.length),A}static highLevelDecode(l){return this.getEncodedData(l)}static getEncodedData(l){let u=l.length,f=zt.UPPER,x=zt.UPPER,w="",b=0;for(;b<u;)if(x===zt.BINARY){if(u-b<5)break;let A=ce.readCode(l,b,5);if(b+=5,A===0){if(u-b<11)break;A=ce.readCode(l,b,11)+31,b+=11}for(let D=0;D<A;D++){if(u-b<8){b=u;break}const R=ce.readCode(l,b,8);w+=B.castAsNonUtf8Char(R),b+=8}x=f}else{let A=x===zt.DIGIT?4:5;if(u-b<A)break;let D=ce.readCode(l,b,A);b+=A;let R=ce.getCharacter(x,D);R.startsWith("CTRL_")?(f=x,x=ce.getTable(R.charAt(5)),R.charAt(6)==="L"&&(f=x)):(w+=R,x=f)}return w}static getTable(l){switch(l){case"L":return zt.LOWER;case"P":return zt.PUNCT;case"M":return zt.MIXED;case"D":return zt.DIGIT;case"B":return zt.BINARY;case"U":default:return zt.UPPER}}static getCharacter(l,u){switch(l){case zt.UPPER:return ce.UPPER_TABLE[u];case zt.LOWER:return ce.LOWER_TABLE[u];case zt.MIXED:return ce.MIXED_TABLE[u];case zt.PUNCT:return ce.PUNCT_TABLE[u];case zt.DIGIT:return ce.DIGIT_TABLE[u];default:throw new yt("Bad table")}}correctBits(l){let u,f;this.ddata.getNbLayers()<=2?(f=6,u=mt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(f=8,u=mt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(f=10,u=mt.AZTEC_DATA_10):(f=12,u=mt.AZTEC_DATA_12);let x=this.ddata.getNbDatablocks(),w=l.length/f;if(w<x)throw new T;let b=l.length%f,A=new Int32Array(w);for(let K=0;K<w;K++,b+=f)A[K]=ce.readCode(l,b,f);try{new On(u).decode(A,w-x)}catch(K){throw new T(K)}let D=(1<<f)-1,R=0;for(let K=0;K<x;K++){let oe=A[K];if(oe===0||oe===D)throw new T;(oe===1||oe===D-1)&&R++}let F=new Array(x*f-R),W=0;for(let K=0;K<x;K++){let oe=A[K];if(oe===1||oe===D-1)F.fill(oe>1,W,W+f-1),W+=f-1;else for(let ge=f-1;ge>=0;--ge)F[W++]=(oe&1<<ge)!==0}return F}extractBits(l){let u=this.ddata.isCompact(),f=this.ddata.getNbLayers(),x=(u?11:14)+f*4,w=new Int32Array(x),b=new Array(this.totalBitsInLayer(f,u));if(u)for(let A=0;A<w.length;A++)w[A]=A;else{let A=x+1+2*C.truncDivision(C.truncDivision(x,2)-1,15),D=x/2,R=C.truncDivision(A,2);for(let F=0;F<D;F++){let W=F+C.truncDivision(F,15);w[D-F-1]=R-W-1,w[D+F]=R+W+1}}for(let A=0,D=0;A<f;A++){let R=(f-A)*4+(u?9:12),F=A*2,W=x-1-F;for(let K=0;K<R;K++){let oe=K*2;for(let ge=0;ge<2;ge++)b[D+oe+ge]=l.get(w[F+ge],w[F+K]),b[D+2*R+oe+ge]=l.get(w[F+K],w[W-ge]),b[D+4*R+oe+ge]=l.get(w[W-ge],w[W-K]),b[D+6*R+oe+ge]=l.get(w[W-K],w[F+ge])}D+=R*8}return b}static readCode(l,u,f){let x=0;for(let w=u;w<u+f;w++)x<<=1,l[w]&&(x|=1);return x}static readByte(l,u){let f=l.length-u;return f>=8?ce.readCode(l,u,8):ce.readCode(l,u,f)<<8-f}static convertBoolArrayToByteArray(l){let u=new Uint8Array((l.length+7)/8);for(let f=0;f<u.length;f++)u[f]=ce.readByte(l,8*f);return u}totalBitsInLayer(l,u){return((u?88:112)+16*l)*l}}ce.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ce.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ce.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ce.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ce.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class be{constructor(){}static round(l){return l===NaN?0:l<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:l>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:l+(l<0?-.5:.5)|0}static distance(l,u,f,x){const w=l-f,b=u-x;return Math.sqrt(w*w+b*b)}static sum(l){let u=0;for(let f=0,x=l.length;f!==x;f++){const w=l[f];u+=w}return u}}class ze{static floatToIntBits(l){return l}}ze.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Pe{constructor(l,u){this.x=l,this.y=u}getX(){return this.x}getY(){return this.y}equals(l){if(l instanceof Pe){const u=l;return this.x===u.x&&this.y===u.y}return!1}hashCode(){return 31*ze.floatToIntBits(this.x)+ze.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(l){const u=this.distance(l[0],l[1]),f=this.distance(l[1],l[2]),x=this.distance(l[0],l[2]);let w,b,A;if(f>=u&&f>=x?(b=l[0],w=l[1],A=l[2]):x>=f&&x>=u?(b=l[1],w=l[0],A=l[2]):(b=l[2],w=l[0],A=l[1]),this.crossProductZ(w,b,A)<0){const D=w;w=A,A=D}l[0]=w,l[1]=b,l[2]=A}static distance(l,u){return be.distance(l.x,l.y,u.x,u.y)}static crossProductZ(l,u,f){const x=u.x,w=u.y;return(f.x-x)*(l.y-w)-(f.y-w)*(l.x-x)}}class Je{constructor(l,u){this.bits=l,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class Ke extends Je{constructor(l,u,f,x,w){super(l,u),this.compact=f,this.nbDatablocks=x,this.nbLayers=w}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Nt{constructor(l,u,f,x){this.image=l,this.height=l.getHeight(),this.width=l.getWidth(),u==null&&(u=Nt.INIT_SIZE),f==null&&(f=l.getWidth()/2|0),x==null&&(x=l.getHeight()/2|0);const w=u/2|0;if(this.leftInit=f-w,this.rightInit=f+w,this.upInit=x-w,this.downInit=x+w,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new G}detect(){let l=this.leftInit,u=this.rightInit,f=this.upInit,x=this.downInit,w=!1,b=!0,A=!1,D=!1,R=!1,F=!1,W=!1;const K=this.width,oe=this.height;for(;b;){b=!1;let ge=!0;for(;(ge||!D)&&u<K;)ge=this.containsBlackPoint(f,x,u,!1),ge?(u++,b=!0,D=!0):D||u++;if(u>=K){w=!0;break}let je=!0;for(;(je||!R)&&x<oe;)je=this.containsBlackPoint(l,u,x,!0),je?(x++,b=!0,R=!0):R||x++;if(x>=oe){w=!0;break}let Te=!0;for(;(Te||!F)&&l>=0;)Te=this.containsBlackPoint(f,x,l,!1),Te?(l--,b=!0,F=!0):F||l--;if(l<0){w=!0;break}let Oe=!0;for(;(Oe||!W)&&f>=0;)Oe=this.containsBlackPoint(l,u,f,!0),Oe?(f--,b=!0,W=!0):W||f--;if(f<0){w=!0;break}b&&(A=!0)}if(!w&&A){const ge=u-l;let je=null;for(let at=1;je===null&&at<ge;at++)je=this.getBlackPointOnSegment(l,x-at,l+at,x);if(je==null)throw new G;let Te=null;for(let at=1;Te===null&&at<ge;at++)Te=this.getBlackPointOnSegment(l,f+at,l+at,f);if(Te==null)throw new G;let Oe=null;for(let at=1;Oe===null&&at<ge;at++)Oe=this.getBlackPointOnSegment(u,f+at,u-at,f);if(Oe==null)throw new G;let nt=null;for(let at=1;nt===null&&at<ge;at++)nt=this.getBlackPointOnSegment(u,x-at,u-at,x);if(nt==null)throw new G;return this.centerEdges(nt,je,Oe,Te)}else throw new G}getBlackPointOnSegment(l,u,f,x){const w=be.round(be.distance(l,u,f,x)),b=(f-l)/w,A=(x-u)/w,D=this.image;for(let R=0;R<w;R++){const F=be.round(l+R*b),W=be.round(u+R*A);if(D.get(F,W))return new Pe(F,W)}return null}centerEdges(l,u,f,x){const w=l.getX(),b=l.getY(),A=u.getX(),D=u.getY(),R=f.getX(),F=f.getY(),W=x.getX(),K=x.getY(),oe=Nt.CORR;return w<this.width/2?[new Pe(W-oe,K+oe),new Pe(A+oe,D+oe),new Pe(R-oe,F-oe),new Pe(w+oe,b-oe)]:[new Pe(W+oe,K+oe),new Pe(A+oe,D-oe),new Pe(R-oe,F+oe),new Pe(w-oe,b-oe)]}containsBlackPoint(l,u,f,x){const w=this.image;if(x){for(let b=l;b<=u;b++)if(w.get(b,f))return!0}else for(let b=l;b<=u;b++)if(w.get(f,b))return!0;return!1}}Nt.INIT_SIZE=10,Nt.CORR=1;class dt{static checkAndNudgePoints(l,u){const f=l.getWidth(),x=l.getHeight();let w=!0;for(let b=0;b<u.length&&w;b+=2){const A=Math.floor(u[b]),D=Math.floor(u[b+1]);if(A<-1||A>f||D<-1||D>x)throw new G;w=!1,A===-1?(u[b]=0,w=!0):A===f&&(u[b]=f-1,w=!0),D===-1?(u[b+1]=0,w=!0):D===x&&(u[b+1]=x-1,w=!0)}w=!0;for(let b=u.length-2;b>=0&&w;b-=2){const A=Math.floor(u[b]),D=Math.floor(u[b+1]);if(A<-1||A>f||D<-1||D>x)throw new G;w=!1,A===-1?(u[b]=0,w=!0):A===f&&(u[b]=f-1,w=!0),D===-1?(u[b+1]=0,w=!0):D===x&&(u[b+1]=x-1,w=!0)}}}class Dt{constructor(l,u,f,x,w,b,A,D,R){this.a11=l,this.a21=u,this.a31=f,this.a12=x,this.a22=w,this.a32=b,this.a13=A,this.a23=D,this.a33=R}static quadrilateralToQuadrilateral(l,u,f,x,w,b,A,D,R,F,W,K,oe,ge,je,Te){const Oe=Dt.quadrilateralToSquare(l,u,f,x,w,b,A,D);return Dt.squareToQuadrilateral(R,F,W,K,oe,ge,je,Te).times(Oe)}transformPoints(l){const u=l.length,f=this.a11,x=this.a12,w=this.a13,b=this.a21,A=this.a22,D=this.a23,R=this.a31,F=this.a32,W=this.a33;for(let K=0;K<u;K+=2){const oe=l[K],ge=l[K+1],je=w*oe+D*ge+W;l[K]=(f*oe+b*ge+R)/je,l[K+1]=(x*oe+A*ge+F)/je}}transformPointsWithValues(l,u){const f=this.a11,x=this.a12,w=this.a13,b=this.a21,A=this.a22,D=this.a23,R=this.a31,F=this.a32,W=this.a33,K=l.length;for(let oe=0;oe<K;oe++){const ge=l[oe],je=u[oe],Te=w*ge+D*je+W;l[oe]=(f*ge+b*je+R)/Te,u[oe]=(x*ge+A*je+F)/Te}}static squareToQuadrilateral(l,u,f,x,w,b,A,D){const R=l-f+w-A,F=u-x+b-D;if(R===0&&F===0)return new Dt(f-l,w-f,l,x-u,b-x,u,0,0,1);{const W=f-w,K=A-w,oe=x-b,ge=D-b,je=W*ge-K*oe,Te=(R*ge-K*F)/je,Oe=(W*F-R*oe)/je;return new Dt(f-l+Te*f,A-l+Oe*A,l,x-u+Te*x,D-u+Oe*D,u,Te,Oe,1)}}static quadrilateralToSquare(l,u,f,x,w,b,A,D){return Dt.squareToQuadrilateral(l,u,f,x,w,b,A,D).buildAdjoint()}buildAdjoint(){return new Dt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(l){return new Dt(this.a11*l.a11+this.a21*l.a12+this.a31*l.a13,this.a11*l.a21+this.a21*l.a22+this.a31*l.a23,this.a11*l.a31+this.a21*l.a32+this.a31*l.a33,this.a12*l.a11+this.a22*l.a12+this.a32*l.a13,this.a12*l.a21+this.a22*l.a22+this.a32*l.a23,this.a12*l.a31+this.a22*l.a32+this.a32*l.a33,this.a13*l.a11+this.a23*l.a12+this.a33*l.a13,this.a13*l.a21+this.a23*l.a22+this.a33*l.a23,this.a13*l.a31+this.a23*l.a32+this.a33*l.a33)}}class At extends dt{sampleGrid(l,u,f,x,w,b,A,D,R,F,W,K,oe,ge,je,Te,Oe,nt,at){const et=Dt.quadrilateralToQuadrilateral(x,w,b,A,D,R,F,W,K,oe,ge,je,Te,Oe,nt,at);return this.sampleGridWithTransform(l,u,f,et)}sampleGridWithTransform(l,u,f,x){if(u<=0||f<=0)throw new G;const w=new z(u,f),b=new Float32Array(2*u);for(let A=0;A<f;A++){const D=b.length,R=A+.5;for(let F=0;F<D;F+=2)b[F]=F/2+.5,b[F+1]=R;x.transformPoints(b),dt.checkAndNudgePoints(l,b);try{for(let F=0;F<D;F+=2)l.get(Math.floor(b[F]),Math.floor(b[F+1]))&&w.set(F/2,A)}catch{throw new G}}return w}}class qt{static setGridSampler(l){qt.gridSampler=l}static getInstance(){return qt.gridSampler}}qt.gridSampler=new At;class Hn{constructor(l,u){this.x=l,this.y=u}toResultPoint(){return new Pe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class er{constructor(l){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=l}detect(){return this.detectMirror(!1)}detectMirror(l){let u=this.getMatrixCenter(),f=this.getBullsEyeCorners(u);if(l){let b=f[0];f[0]=f[2],f[2]=b}this.extractParameters(f);let x=this.sampleGrid(this.image,f[this.shift%4],f[(this.shift+1)%4],f[(this.shift+2)%4],f[(this.shift+3)%4]),w=this.getMatrixCornerPoints(f);return new Ke(x,w,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(l){if(!this.isValidPoint(l[0])||!this.isValidPoint(l[1])||!this.isValidPoint(l[2])||!this.isValidPoint(l[3]))throw new G;let u=2*this.nbCenterLayers,f=new Int32Array([this.sampleLine(l[0],l[1],u),this.sampleLine(l[1],l[2],u),this.sampleLine(l[2],l[3],u),this.sampleLine(l[3],l[0],u)]);this.shift=this.getRotation(f,u);let x=0;for(let b=0;b<4;b++){let A=f[(this.shift+b)%4];this.compact?(x<<=7,x+=A>>1&127):(x<<=10,x+=(A>>2&992)+(A>>1&31))}let w=this.getCorrectedParameterData(x,this.compact);this.compact?(this.nbLayers=(w>>6)+1,this.nbDataBlocks=(w&63)+1):(this.nbLayers=(w>>11)+1,this.nbDataBlocks=(w&2047)+1)}getRotation(l,u){let f=0;l.forEach((x,w,b)=>{let A=(x>>u-2<<1)+(x&1);f=(f<<3)+A}),f=((f&1)<<11)+(f>>1);for(let x=0;x<4;x++)if(C.bitCount(f^this.EXPECTED_CORNER_BITS[x])<=2)return x;throw new G}getCorrectedParameterData(l,u){let f,x;u?(f=7,x=2):(f=10,x=4);let w=f-x,b=new Int32Array(f);for(let D=f-1;D>=0;--D)b[D]=l&15,l>>=4;try{new On(mt.AZTEC_PARAM).decode(b,w)}catch{throw new G}let A=0;for(let D=0;D<x;D++)A=(A<<4)+b[D];return A}getBullsEyeCorners(l){let u=l,f=l,x=l,w=l,b=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let W=this.getFirstDifferent(u,b,1,-1),K=this.getFirstDifferent(f,b,1,1),oe=this.getFirstDifferent(x,b,-1,1),ge=this.getFirstDifferent(w,b,-1,-1);if(this.nbCenterLayers>2){let je=this.distancePoint(ge,W)*this.nbCenterLayers/(this.distancePoint(w,u)*(this.nbCenterLayers+2));if(je<.75||je>1.25||!this.isWhiteOrBlackRectangle(W,K,oe,ge))break}u=W,f=K,x=oe,w=ge,b=!b}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new G;this.compact=this.nbCenterLayers===5;let A=new Pe(u.getX()+.5,u.getY()-.5),D=new Pe(f.getX()+.5,f.getY()+.5),R=new Pe(x.getX()-.5,x.getY()+.5),F=new Pe(w.getX()-.5,w.getY()-.5);return this.expandSquare([A,D,R,F],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let l,u,f,x;try{let A=new Nt(this.image).detect();l=A[0],u=A[1],f=A[2],x=A[3]}catch{let D=this.image.getWidth()/2,R=this.image.getHeight()/2;l=this.getFirstDifferent(new Hn(D+7,R-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new Hn(D+7,R+7),!1,1,1).toResultPoint(),f=this.getFirstDifferent(new Hn(D-7,R+7),!1,-1,1).toResultPoint(),x=this.getFirstDifferent(new Hn(D-7,R-7),!1,-1,-1).toResultPoint()}let w=be.round((l.getX()+x.getX()+u.getX()+f.getX())/4),b=be.round((l.getY()+x.getY()+u.getY()+f.getY())/4);try{let A=new Nt(this.image,15,w,b).detect();l=A[0],u=A[1],f=A[2],x=A[3]}catch{l=this.getFirstDifferent(new Hn(w+7,b-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new Hn(w+7,b+7),!1,1,1).toResultPoint(),f=this.getFirstDifferent(new Hn(w-7,b+7),!1,-1,1).toResultPoint(),x=this.getFirstDifferent(new Hn(w-7,b-7),!1,-1,-1).toResultPoint()}return w=be.round((l.getX()+x.getX()+u.getX()+f.getX())/4),b=be.round((l.getY()+x.getY()+u.getY()+f.getY())/4),new Hn(w,b)}getMatrixCornerPoints(l){return this.expandSquare(l,2*this.nbCenterLayers,this.getDimension())}sampleGrid(l,u,f,x,w){let b=qt.getInstance(),A=this.getDimension(),D=A/2-this.nbCenterLayers,R=A/2+this.nbCenterLayers;return b.sampleGrid(l,A,A,D,D,R,D,R,R,D,R,u.getX(),u.getY(),f.getX(),f.getY(),x.getX(),x.getY(),w.getX(),w.getY())}sampleLine(l,u,f){let x=0,w=this.distanceResultPoint(l,u),b=w/f,A=l.getX(),D=l.getY(),R=b*(u.getX()-l.getX())/w,F=b*(u.getY()-l.getY())/w;for(let W=0;W<f;W++)this.image.get(be.round(A+W*R),be.round(D+W*F))&&(x|=1<<f-W-1);return x}isWhiteOrBlackRectangle(l,u,f,x){let w=3;l=new Hn(l.getX()-w,l.getY()+w),u=new Hn(u.getX()-w,u.getY()-w),f=new Hn(f.getX()+w,f.getY()-w),x=new Hn(x.getX()+w,x.getY()+w);let b=this.getColor(x,l);if(b===0)return!1;let A=this.getColor(l,u);return A!==b||(A=this.getColor(u,f),A!==b)?!1:(A=this.getColor(f,x),A===b)}getColor(l,u){let f=this.distancePoint(l,u),x=(u.getX()-l.getX())/f,w=(u.getY()-l.getY())/f,b=0,A=l.getX(),D=l.getY(),R=this.image.get(l.getX(),l.getY()),F=Math.ceil(f);for(let K=0;K<F;K++)A+=x,D+=w,this.image.get(be.round(A),be.round(D))!==R&&b++;let W=b/f;return W>.1&&W<.9?0:W<=.1===R?1:-1}getFirstDifferent(l,u,f,x){let w=l.getX()+f,b=l.getY()+x;for(;this.isValid(w,b)&&this.image.get(w,b)===u;)w+=f,b+=x;for(w-=f,b-=x;this.isValid(w,b)&&this.image.get(w,b)===u;)w+=f;for(w-=f;this.isValid(w,b)&&this.image.get(w,b)===u;)b+=x;return b-=x,new Hn(w,b)}expandSquare(l,u,f){let x=f/(2*u),w=l[0].getX()-l[2].getX(),b=l[0].getY()-l[2].getY(),A=(l[0].getX()+l[2].getX())/2,D=(l[0].getY()+l[2].getY())/2,R=new Pe(A+x*w,D+x*b),F=new Pe(A-x*w,D-x*b);w=l[1].getX()-l[3].getX(),b=l[1].getY()-l[3].getY(),A=(l[1].getX()+l[3].getX())/2,D=(l[1].getY()+l[3].getY())/2;let W=new Pe(A+x*w,D+x*b),K=new Pe(A-x*w,D-x*b);return[R,W,F,K]}isValid(l,u){return l>=0&&l<this.image.getWidth()&&u>0&&u<this.image.getHeight()}isValidPoint(l){let u=be.round(l.getX()),f=be.round(l.getY());return this.isValid(u,f)}distancePoint(l,u){return be.distance(l.getX(),l.getY(),u.getX(),u.getY())}distanceResultPoint(l,u){return be.distance(l.getX(),l.getY(),u.getX(),u.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(C.truncDivision(this.nbLayers-4,8)+1)+15}}class nn{decode(l,u=null){let f=null,x=new er(l.getBlackMatrix()),w=null,b=null;try{let F=x.detectMirror(!1);w=F.getPoints(),this.reportFoundResultPoints(u,w),b=new ce().decode(F)}catch(F){f=F}if(b==null)try{let F=x.detectMirror(!0);w=F.getPoints(),this.reportFoundResultPoints(u,w),b=new ce().decode(F)}catch(F){throw f??F}let A=new te(b.getText(),b.getRawBytes(),b.getNumBits(),w,ee.AZTEC,N.currentTimeMillis()),D=b.getByteSegments();D!=null&&A.putMetadata(pe.BYTE_SEGMENTS,D);let R=b.getECLevel();return R!=null&&A.putMetadata(pe.ERROR_CORRECTION_LEVEL,R),A}reportFoundResultPoints(l,u){if(l!=null){let f=l.get(L.NEED_RESULT_POINT_CALLBACK);f!=null&&u.forEach((x,w,b)=>{f.foundPossibleResultPoint(x)})}}reset(){}}class Bt extends xe{constructor(l=500){super(new nn,l)}}class bn{decode(l,u){try{return this.doDecode(l,u)}catch{if(u&&u.get(L.TRY_HARDER)===!0&&l.isRotateSupported()){const w=l.rotateCounterClockwise(),b=this.doDecode(w,u),A=b.getResultMetadata();let D=270;A!==null&&A.get(pe.ORIENTATION)===!0&&(D=D+A.get(pe.ORIENTATION)%360),b.putMetadata(pe.ORIENTATION,D);const R=b.getResultPoints();if(R!==null){const F=w.getHeight();for(let W=0;W<R.length;W++)R[W]=new Pe(F-R[W].getY()-1,R[W].getX())}return b}else throw new G}}reset(){}doDecode(l,u){const f=l.getWidth(),x=l.getHeight();let w=new I(f);const b=u&&u.get(L.TRY_HARDER)===!0,A=Math.max(1,x>>(b?8:5));let D;b?D=x:D=15;const R=Math.trunc(x/2);for(let F=0;F<D;F++){const W=Math.trunc((F+1)/2),K=(F&1)===0,oe=R+A*(K?W:-W);if(oe<0||oe>=x)break;try{w=l.getBlackRow(oe,w)}catch{continue}for(let ge=0;ge<2;ge++){if(ge===1&&(w.reverse(),u&&u.get(L.NEED_RESULT_POINT_CALLBACK)===!0)){const je=new Map;u.forEach((Te,Oe)=>je.set(Oe,Te)),je.delete(L.NEED_RESULT_POINT_CALLBACK),u=je}try{const je=this.decodeRow(oe,w,u);if(ge===1){je.putMetadata(pe.ORIENTATION,180);const Te=je.getResultPoints();Te!==null&&(Te[0]=new Pe(f-Te[0].getX()-1,Te[0].getY()),Te[1]=new Pe(f-Te[1].getX()-1,Te[1].getY()))}return je}catch{}}}throw new G}static recordPattern(l,u,f){const x=f.length;for(let R=0;R<x;R++)f[R]=0;const w=l.getSize();if(u>=w)throw new G;let b=!l.get(u),A=0,D=u;for(;D<w;){if(l.get(D)!==b)f[A]++;else{if(++A===x)break;f[A]=1,b=!b}D++}if(!(A===x||A===x-1&&D===w))throw new G}static recordPatternInReverse(l,u,f){let x=f.length,w=l.get(u);for(;u>0&&x>=0;)l.get(--u)!==w&&(x--,w=!w);if(x>=0)throw new G;bn.recordPattern(l,u+1,f)}static patternMatchVariance(l,u,f){const x=l.length;let w=0,b=0;for(let R=0;R<x;R++)w+=l[R],b+=u[R];if(w<b)return Number.POSITIVE_INFINITY;const A=w/b;f*=A;let D=0;for(let R=0;R<x;R++){const F=l[R],W=u[R]*A,K=F>W?F-W:W-F;if(K>f)return Number.POSITIVE_INFINITY;D+=K}return D/w}}class rt extends bn{static findStartPattern(l){const u=l.getSize(),f=l.getNextSet(0);let x=0,w=Int32Array.from([0,0,0,0,0,0]),b=f,A=!1;const D=6;for(let R=f;R<u;R++)if(l.get(R)!==A)w[x]++;else{if(x===D-1){let F=rt.MAX_AVG_VARIANCE,W=-1;for(let K=rt.CODE_START_A;K<=rt.CODE_START_C;K++){const oe=bn.patternMatchVariance(w,rt.CODE_PATTERNS[K],rt.MAX_INDIVIDUAL_VARIANCE);oe<F&&(F=oe,W=K)}if(W>=0&&l.isRange(Math.max(0,b-(R-b)/2),b,!1))return Int32Array.from([b,R,W]);b+=w[0]+w[1],w=w.slice(2,w.length-1),w[x-1]=0,w[x]=0,x--}else x++;w[x]=1,A=!A}throw new G}static decodeCode(l,u,f){bn.recordPattern(l,f,u);let x=rt.MAX_AVG_VARIANCE,w=-1;for(let b=0;b<rt.CODE_PATTERNS.length;b++){const A=rt.CODE_PATTERNS[b],D=this.patternMatchVariance(u,A,rt.MAX_INDIVIDUAL_VARIANCE);D<x&&(x=D,w=b)}if(w>=0)return w;throw new G}decodeRow(l,u,f){const x=f&&f.get(L.ASSUME_GS1)===!0,w=rt.findStartPattern(u),b=w[2];let A=0;const D=new Uint8Array(20);D[A++]=b;let R;switch(b){case rt.CODE_START_A:R=rt.CODE_CODE_A;break;case rt.CODE_START_B:R=rt.CODE_CODE_B;break;case rt.CODE_START_C:R=rt.CODE_CODE_C;break;default:throw new T}let F=!1,W=!1,K="",oe=w[0],ge=w[1];const je=Int32Array.from([0,0,0,0,0,0]);let Te=0,Oe=0,nt=b,at=0,et=!0,Bn=!1,un=!1;for(;!F;){const _u=W;switch(W=!1,Te=Oe,Oe=rt.decodeCode(u,je,ge),D[A++]=Oe,Oe!==rt.CODE_STOP&&(et=!0),Oe!==rt.CODE_STOP&&(at++,nt+=at*Oe),oe=ge,ge+=je.reduce((zU,VU)=>zU+VU,0),Oe){case rt.CODE_START_A:case rt.CODE_START_B:case rt.CODE_START_C:throw new T}switch(R){case rt.CODE_CODE_A:if(Oe<64)un===Bn?K+=String.fromCharCode(32+Oe):K+=String.fromCharCode(32+Oe+128),un=!1;else if(Oe<96)un===Bn?K+=String.fromCharCode(Oe-64):K+=String.fromCharCode(Oe+64),un=!1;else switch(Oe!==rt.CODE_STOP&&(et=!1),Oe){case rt.CODE_FNC_1:x&&(K.length===0?K+="]C1":K+="");break;case rt.CODE_FNC_2:case rt.CODE_FNC_3:break;case rt.CODE_FNC_4_A:!Bn&&un?(Bn=!0,un=!1):Bn&&un?(Bn=!1,un=!1):un=!0;break;case rt.CODE_SHIFT:W=!0,R=rt.CODE_CODE_B;break;case rt.CODE_CODE_B:R=rt.CODE_CODE_B;break;case rt.CODE_CODE_C:R=rt.CODE_CODE_C;break;case rt.CODE_STOP:F=!0;break}break;case rt.CODE_CODE_B:if(Oe<96)un===Bn?K+=String.fromCharCode(32+Oe):K+=String.fromCharCode(32+Oe+128),un=!1;else switch(Oe!==rt.CODE_STOP&&(et=!1),Oe){case rt.CODE_FNC_1:x&&(K.length===0?K+="]C1":K+="");break;case rt.CODE_FNC_2:case rt.CODE_FNC_3:break;case rt.CODE_FNC_4_B:!Bn&&un?(Bn=!0,un=!1):Bn&&un?(Bn=!1,un=!1):un=!0;break;case rt.CODE_SHIFT:W=!0,R=rt.CODE_CODE_A;break;case rt.CODE_CODE_A:R=rt.CODE_CODE_A;break;case rt.CODE_CODE_C:R=rt.CODE_CODE_C;break;case rt.CODE_STOP:F=!0;break}break;case rt.CODE_CODE_C:if(Oe<100)Oe<10&&(K+="0"),K+=Oe;else switch(Oe!==rt.CODE_STOP&&(et=!1),Oe){case rt.CODE_FNC_1:x&&(K.length===0?K+="]C1":K+="");break;case rt.CODE_CODE_A:R=rt.CODE_CODE_A;break;case rt.CODE_CODE_B:R=rt.CODE_CODE_B;break;case rt.CODE_STOP:F=!0;break}break}_u&&(R=R===rt.CODE_CODE_A?rt.CODE_CODE_B:rt.CODE_CODE_A)}const Ui=ge-oe;if(ge=u.getNextUnset(ge),!u.isRange(ge,Math.min(u.getSize(),ge+(ge-oe)/2),!1))throw new G;if(nt-=at*Te,nt%103!==Te)throw new v;const lo=K.length;if(lo===0)throw new G;lo>0&&et&&(R===rt.CODE_CODE_C?K=K.substring(0,lo-2):K=K.substring(0,lo-1));const Wi=(w[1]+w[0])/2,Ns=oe+Ui/2,ti=D.length,ua=new Uint8Array(ti);for(let _u=0;_u<ti;_u++)ua[_u]=D[_u];const Eu=[new Pe(Wi,l),new Pe(Ns,l)];return new te(K,ua,0,Eu,ee.CODE_128,new Date().getTime())}}rt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],rt.MAX_AVG_VARIANCE=.25,rt.MAX_INDIVIDUAL_VARIANCE=.7,rt.CODE_SHIFT=98,rt.CODE_CODE_C=99,rt.CODE_CODE_B=100,rt.CODE_CODE_A=101,rt.CODE_FNC_1=102,rt.CODE_FNC_2=97,rt.CODE_FNC_3=96,rt.CODE_FNC_4_A=101,rt.CODE_FNC_4_B=100,rt.CODE_START_A=103,rt.CODE_START_B=104,rt.CODE_START_C=105,rt.CODE_STOP=106;class qn extends bn{constructor(l=!1,u=!1){super(),this.usingCheckDigit=l,this.extendedMode=u,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(l,u,f){let x=this.counters;x.fill(0),this.decodeRowResult="";let w=qn.findAsteriskPattern(u,x),b=u.getNextSet(w[1]),A=u.getSize(),D,R;do{qn.recordPattern(u,b,x);let je=qn.toNarrowWidePattern(x);if(je<0)throw new G;D=qn.patternToChar(je),this.decodeRowResult+=D,R=b;for(let Te of x)b+=Te;b=u.getNextSet(b)}while(D!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let F=0;for(let je of x)F+=je;let W=b-R-F;if(b!==A&&W*2<F)throw new G;if(this.usingCheckDigit){let je=this.decodeRowResult.length-1,Te=0;for(let Oe=0;Oe<je;Oe++)Te+=qn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Oe));if(this.decodeRowResult.charAt(je)!==qn.ALPHABET_STRING.charAt(Te%43))throw new v;this.decodeRowResult=this.decodeRowResult.substring(0,je)}if(this.decodeRowResult.length===0)throw new G;let K;this.extendedMode?K=qn.decodeExtended(this.decodeRowResult):K=this.decodeRowResult;let oe=(w[1]+w[0])/2,ge=R+F/2;return new te(K,null,0,[new Pe(oe,l),new Pe(ge,l)],ee.CODE_39,new Date().getTime())}static findAsteriskPattern(l,u){let f=l.getSize(),x=l.getNextSet(0),w=0,b=x,A=!1,D=u.length;for(let R=x;R<f;R++)if(l.get(R)!==A)u[w]++;else{if(w===D-1){if(this.toNarrowWidePattern(u)===qn.ASTERISK_ENCODING&&l.isRange(Math.max(0,b-Math.floor((R-b)/2)),b,!1))return[b,R];b+=u[0]+u[1],u.copyWithin(0,2,2+w-1),u[w-1]=0,u[w]=0,w--}else w++;u[w]=1,A=!A}throw new G}static toNarrowWidePattern(l){let u=l.length,f=0,x;do{let w=2147483647;for(let D of l)D<w&&D>f&&(w=D);f=w,x=0;let b=0,A=0;for(let D=0;D<u;D++){let R=l[D];R>f&&(A|=1<<u-1-D,x++,b+=R)}if(x===3){for(let D=0;D<u&&x>0;D++){let R=l[D];if(R>f&&(x--,R*2>=b))return-1}return A}}while(x>3);return-1}static patternToChar(l){for(let u=0;u<qn.CHARACTER_ENCODINGS.length;u++)if(qn.CHARACTER_ENCODINGS[u]===l)return qn.ALPHABET_STRING.charAt(u);if(l===qn.ASTERISK_ENCODING)return"*";throw new G}static decodeExtended(l){let u=l.length,f="";for(let x=0;x<u;x++){let w=l.charAt(x);if(w==="+"||w==="$"||w==="%"||w==="/"){let b=l.charAt(x+1),A="\0";switch(w){case"+":if(b>="A"&&b<="Z")A=String.fromCharCode(b.charCodeAt(0)+32);else throw new T;break;case"$":if(b>="A"&&b<="Z")A=String.fromCharCode(b.charCodeAt(0)-64);else throw new T;break;case"%":if(b>="A"&&b<="E")A=String.fromCharCode(b.charCodeAt(0)-38);else if(b>="F"&&b<="J")A=String.fromCharCode(b.charCodeAt(0)-11);else if(b>="K"&&b<="O")A=String.fromCharCode(b.charCodeAt(0)+16);else if(b>="P"&&b<="T")A=String.fromCharCode(b.charCodeAt(0)+43);else if(b==="U")A="\0";else if(b==="V")A="@";else if(b==="W")A="`";else if(b==="X"||b==="Y"||b==="Z")A="";else throw new T;break;case"/":if(b>="A"&&b<="O")A=String.fromCharCode(b.charCodeAt(0)-32);else if(b==="Z")A=":";else throw new T;break}f+=A,x++}else f+=w}return f}}qn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",qn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],qn.ASTERISK_ENCODING=148;class Vn extends bn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(l,u,f){let x=this.decodeStart(u),w=this.decodeEnd(u),b=new Y;Vn.decodeMiddle(u,x[1],w[0],b);let A=b.toString(),D=null;f!=null&&(D=f.get(L.ALLOWED_LENGTHS)),D==null&&(D=Vn.DEFAULT_ALLOWED_LENGTHS);let R=A.length,F=!1,W=0;for(let ge of D){if(R===ge){F=!0;break}ge>W&&(W=ge)}if(!F&&R>W&&(F=!0),!F)throw new T;const K=[new Pe(x[1],l),new Pe(w[0],l)];return new te(A,null,0,K,ee.ITF,new Date().getTime())}static decodeMiddle(l,u,f,x){let w=new Int32Array(10),b=new Int32Array(5),A=new Int32Array(5);for(w.fill(0),b.fill(0),A.fill(0);u<f;){bn.recordPattern(l,u,w);for(let R=0;R<5;R++){let F=2*R;b[R]=w[F],A[R]=w[F+1]}let D=Vn.decodeDigit(b);x.append(D.toString()),D=this.decodeDigit(A),x.append(D.toString()),w.forEach(function(R){u+=R})}}decodeStart(l){let u=Vn.skipWhiteSpace(l),f=Vn.findGuardPattern(l,u,Vn.START_PATTERN);return this.narrowLineWidth=(f[1]-f[0])/4,this.validateQuietZone(l,f[0]),f}validateQuietZone(l,u){let f=this.narrowLineWidth*10;f=f<u?f:u;for(let x=u-1;f>0&&x>=0&&!l.get(x);x--)f--;if(f!==0)throw new G}static skipWhiteSpace(l){const u=l.getSize(),f=l.getNextSet(0);if(f===u)throw new G;return f}decodeEnd(l){l.reverse();try{let u=Vn.skipWhiteSpace(l),f;try{f=Vn.findGuardPattern(l,u,Vn.END_PATTERN_REVERSED[0])}catch(w){w instanceof G&&(f=Vn.findGuardPattern(l,u,Vn.END_PATTERN_REVERSED[1]))}this.validateQuietZone(l,f[0]);let x=f[0];return f[0]=l.getSize()-f[1],f[1]=l.getSize()-x,f}finally{l.reverse()}}static findGuardPattern(l,u,f){let x=f.length,w=new Int32Array(x),b=l.getSize(),A=!1,D=0,R=u;w.fill(0);for(let F=u;F<b;F++)if(l.get(F)!==A)w[D]++;else{if(D===x-1){if(bn.patternMatchVariance(w,f,Vn.MAX_INDIVIDUAL_VARIANCE)<Vn.MAX_AVG_VARIANCE)return[R,F];R+=w[0]+w[1],N.arraycopy(w,2,w,0,D-1),w[D-1]=0,w[D]=0,D--}else D++;w[D]=1,A=!A}throw new G}static decodeDigit(l){let u=Vn.MAX_AVG_VARIANCE,f=-1,x=Vn.PATTERNS.length;for(let w=0;w<x;w++){let b=Vn.PATTERNS[w],A=bn.patternMatchVariance(l,b,Vn.MAX_INDIVIDUAL_VARIANCE);A<u?(u=A,f=w):A===u&&(f=-1)}if(f>=0)return f%10;throw new G}}Vn.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Vn.MAX_AVG_VARIANCE=.38,Vn.MAX_INDIVIDUAL_VARIANCE=.5,Vn.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Vn.START_PATTERN=Int32Array.from([1,1,1,1]),Vn.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class $n extends bn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(l){let u=!1,f,x=0,w=Int32Array.from([0,0,0]);for(;!u;){w=Int32Array.from([0,0,0]),f=$n.findGuardPattern(l,x,!1,this.START_END_PATTERN,w);let b=f[0];x=f[1];let A=b-(x-b);A>=0&&(u=l.isRange(A,b,!1))}return f}static checkChecksum(l){return $n.checkStandardUPCEANChecksum(l)}static checkStandardUPCEANChecksum(l){let u=l.length;if(u===0)return!1;let f=parseInt(l.charAt(u-1),10);return $n.getStandardUPCEANChecksum(l.substring(0,u-1))===f}static getStandardUPCEANChecksum(l){let u=l.length,f=0;for(let x=u-1;x>=0;x-=2){let w=l.charAt(x).charCodeAt(0)-48;if(w<0||w>9)throw new T;f+=w}f*=3;for(let x=u-2;x>=0;x-=2){let w=l.charAt(x).charCodeAt(0)-48;if(w<0||w>9)throw new T;f+=w}return(1e3-f)%10}static decodeEnd(l,u){return $n.findGuardPattern(l,u,!1,$n.START_END_PATTERN,new Int32Array($n.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(l,u,f,x){return this.findGuardPattern(l,u,f,x,new Int32Array(x.length))}static findGuardPattern(l,u,f,x,w){let b=l.getSize();u=f?l.getNextUnset(u):l.getNextSet(u);let A=0,D=u,R=x.length,F=f;for(let W=u;W<b;W++)if(l.get(W)!==F)w[A]++;else{if(A===R-1){if(bn.patternMatchVariance(w,x,$n.MAX_INDIVIDUAL_VARIANCE)<$n.MAX_AVG_VARIANCE)return Int32Array.from([D,W]);D+=w[0]+w[1];let K=w.slice(2,w.length-1);for(let oe=0;oe<A-1;oe++)w[oe]=K[oe];w[A-1]=0,w[A]=0,A--}else A++;w[A]=1,F=!F}throw new G}static decodeDigit(l,u,f,x){this.recordPattern(l,f,u);let w=this.MAX_AVG_VARIANCE,b=-1,A=x.length;for(let D=0;D<A;D++){let R=x[D],F=bn.patternMatchVariance(u,R,$n.MAX_INDIVIDUAL_VARIANCE);F<w&&(w=F,b=D)}if(b>=0)return b;throw new G}}$n.MAX_AVG_VARIANCE=.48,$n.MAX_INDIVIDUAL_VARIANCE=.7,$n.START_END_PATTERN=Int32Array.from([1,1,1]),$n.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),$n.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),$n.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class aa{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(l,u,f){let x=this.decodeRowStringBuffer,w=this.decodeMiddle(u,f,x),b=x.toString(),A=aa.parseExtensionString(b),D=[new Pe((f[0]+f[1])/2,l),new Pe(w,l)],R=new te(b,null,0,D,ee.UPC_EAN_EXTENSION,new Date().getTime());return A!=null&&R.putAllMetadata(A),R}decodeMiddle(l,u,f){let x=this.decodeMiddleCounters;x[0]=0,x[1]=0,x[2]=0,x[3]=0;let w=l.getSize(),b=u[1],A=0;for(let R=0;R<5&&b<w;R++){let F=$n.decodeDigit(l,x,b,$n.L_AND_G_PATTERNS);f+=String.fromCharCode(48+F%10);for(let W of x)b+=W;F>=10&&(A|=1<<4-R),R!==4&&(b=l.getNextSet(b),b=l.getNextUnset(b))}if(f.length!==5)throw new G;let D=this.determineCheckDigit(A);if(aa.extensionChecksum(f.toString())!==D)throw new G;return b}static extensionChecksum(l){let u=l.length,f=0;for(let x=u-2;x>=0;x-=2)f+=l.charAt(x).charCodeAt(0)-48;f*=3;for(let x=u-1;x>=0;x-=2)f+=l.charAt(x).charCodeAt(0)-48;return f*=3,f%10}determineCheckDigit(l){for(let u=0;u<10;u++)if(l===this.CHECK_DIGIT_ENCODINGS[u])return u;throw new G}static parseExtensionString(l){if(l.length!==5)return null;let u=aa.parseExtension5String(l);return u==null?null:new Map([[pe.SUGGESTED_PRICE,u]])}static parseExtension5String(l){let u;switch(l.charAt(0)){case"0":u="";break;case"5":u="$";break;case"9":switch(l){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}u="";break;default:u="";break}let f=parseInt(l.substring(1)),x=(f/100).toString(),w=f%100,b=w<10?"0"+w:w.toString();return u+x+"."+b}}class ao{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(l,u,f){let x=this.decodeRowStringBuffer,w=this.decodeMiddle(u,f,x),b=x.toString(),A=ao.parseExtensionString(b),D=[new Pe((f[0]+f[1])/2,l),new Pe(w,l)],R=new te(b,null,0,D,ee.UPC_EAN_EXTENSION,new Date().getTime());return A!=null&&R.putAllMetadata(A),R}decodeMiddle(l,u,f){let x=this.decodeMiddleCounters;x[0]=0,x[1]=0,x[2]=0,x[3]=0;let w=l.getSize(),b=u[1],A=0;for(let D=0;D<2&&b<w;D++){let R=$n.decodeDigit(l,x,b,$n.L_AND_G_PATTERNS);f+=String.fromCharCode(48+R%10);for(let F of x)b+=F;R>=10&&(A|=1<<1-D),D!==1&&(b=l.getNextSet(b),b=l.getNextUnset(b))}if(f.length!==2)throw new G;if(parseInt(f.toString())%4!==A)throw new G;return b}static parseExtensionString(l){return l.length!==2?null:new Map([[pe.ISSUE_NUMBER,parseInt(l)]])}}class Vi{static decodeRow(l,u,f){let x=$n.findGuardPattern(u,f,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new aa().decodeRow(l,u,x)}catch{return new ao().decodeRow(l,u,x)}}}Vi.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Fn extends $n{constructor(){super(),this.decodeRowStringBuffer="",Fn.L_AND_G_PATTERNS=Fn.L_PATTERNS.map(l=>Int32Array.from(l));for(let l=10;l<20;l++){let u=Fn.L_PATTERNS[l-10],f=new Int32Array(u.length);for(let x=0;x<u.length;x++)f[x]=u[u.length-x-1];Fn.L_AND_G_PATTERNS[l]=f}}decodeRow(l,u,f){let x=Fn.findStartGuardPattern(u),w=f==null?null:f.get(L.NEED_RESULT_POINT_CALLBACK);if(w!=null){const et=new Pe((x[0]+x[1])/2,l);w.foundPossibleResultPoint(et)}let b=this.decodeMiddle(u,x,this.decodeRowStringBuffer),A=b.rowOffset,D=b.resultString;if(w!=null){const et=new Pe(A,l);w.foundPossibleResultPoint(et)}let R=this.decodeEnd(u,A);if(w!=null){const et=new Pe((R[0]+R[1])/2,l);w.foundPossibleResultPoint(et)}let F=R[1],W=F+(F-R[0]);if(W>=u.getSize()||!u.isRange(F,W,!1))throw new G;let K=D.toString();if(K.length<8)throw new T;if(!Fn.checkChecksum(K))throw new v;let oe=(x[1]+x[0])/2,ge=(R[1]+R[0])/2,je=this.getBarcodeFormat(),Te=[new Pe(oe,l),new Pe(ge,l)],Oe=new te(K,null,0,Te,je,new Date().getTime()),nt=0;try{let et=Vi.decodeRow(l,u,R[1]);Oe.putMetadata(pe.UPC_EAN_EXTENSION,et.getText()),Oe.putAllMetadata(et.getResultMetadata()),Oe.addResultPoints(et.getResultPoints()),nt=et.getText().length}catch{}let at=f==null?null:f.get(L.ALLOWED_EAN_EXTENSIONS);if(at!=null){let et=!1;for(let Bn in at)if(nt.toString()===Bn){et=!0;break}if(!et)throw new G}return Oe}decodeEnd(l,u){return Fn.findGuardPattern(l,u,!1,Fn.START_END_PATTERN,new Int32Array(Fn.START_END_PATTERN.length).fill(0))}static checkChecksum(l){return Fn.checkStandardUPCEANChecksum(l)}static checkStandardUPCEANChecksum(l){let u=l.length;if(u===0)return!1;let f=parseInt(l.charAt(u-1),10);return Fn.getStandardUPCEANChecksum(l.substring(0,u-1))===f}static getStandardUPCEANChecksum(l){let u=l.length,f=0;for(let x=u-1;x>=0;x-=2){let w=l.charAt(x).charCodeAt(0)-48;if(w<0||w>9)throw new T;f+=w}f*=3;for(let x=u-2;x>=0;x-=2){let w=l.charAt(x).charCodeAt(0)-48;if(w<0||w>9)throw new T;f+=w}return(1e3-f)%10}}class oa extends Fn{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(l,u,f){let x=this.decodeMiddleCounters;x[0]=0,x[1]=0,x[2]=0,x[3]=0;let w=l.getSize(),b=u[1],A=0;for(let R=0;R<6&&b<w;R++){let F=Fn.decodeDigit(l,x,b,Fn.L_AND_G_PATTERNS);f+=String.fromCharCode(48+F%10);for(let W of x)b+=W;F>=10&&(A|=1<<5-R)}f=oa.determineFirstDigit(f,A),b=Fn.findGuardPattern(l,b,!0,Fn.MIDDLE_PATTERN,new Int32Array(Fn.MIDDLE_PATTERN.length).fill(0))[1];for(let R=0;R<6&&b<w;R++){let F=Fn.decodeDigit(l,x,b,Fn.L_PATTERNS);f+=String.fromCharCode(48+F);for(let W of x)b+=W}return{rowOffset:b,resultString:f}}getBarcodeFormat(){return ee.EAN_13}static determineFirstDigit(l,u){for(let f=0;f<10;f++)if(u===this.FIRST_DIGIT_ENCODINGS[f])return l=String.fromCharCode(48+f)+l,l;throw new G}}oa.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class la extends Fn{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(l,u,f){const x=this.decodeMiddleCounters;x[0]=0,x[1]=0,x[2]=0,x[3]=0;let w=l.getSize(),b=u[1];for(let D=0;D<4&&b<w;D++){let R=Fn.decodeDigit(l,x,b,Fn.L_PATTERNS);f+=String.fromCharCode(48+R);for(let F of x)b+=F}b=Fn.findGuardPattern(l,b,!0,Fn.MIDDLE_PATTERN,new Int32Array(Fn.MIDDLE_PATTERN.length).fill(0))[1];for(let D=0;D<4&&b<w;D++){let R=Fn.decodeDigit(l,x,b,Fn.L_PATTERNS);f+=String.fromCharCode(48+R);for(let F of x)b+=F}return{rowOffset:b,resultString:f}}getBarcodeFormat(){return ee.EAN_8}}class Yl extends Fn{constructor(){super(...arguments),this.ean13Reader=new oa}getBarcodeFormat(){return ee.UPC_A}decode(l,u){return this.maybeReturnResult(this.ean13Reader.decode(l))}decodeRow(l,u,f){return this.maybeReturnResult(this.ean13Reader.decodeRow(l,u,f))}decodeMiddle(l,u,f){return this.ean13Reader.decodeMiddle(l,u,f)}maybeReturnResult(l){let u=l.getText();if(u.charAt(0)==="0"){let f=new te(u.substring(1),null,null,l.getResultPoints(),ee.UPC_A);return l.getResultMetadata()!=null&&f.putAllMetadata(l.getResultMetadata()),f}else throw new G}reset(){this.ean13Reader.reset()}}class Ar extends Fn{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(l,u,f){const x=this.decodeMiddleCounters.map(R=>R);x[0]=0,x[1]=0,x[2]=0,x[3]=0;const w=l.getSize();let b=u[1],A=0;for(let R=0;R<6&&b<w;R++){const F=Ar.decodeDigit(l,x,b,Ar.L_AND_G_PATTERNS);f+=String.fromCharCode(48+F%10);for(let W of x)b+=W;F>=10&&(A|=1<<5-R)}let D=Ar.determineNumSysAndCheckDigit(f,A);return{rowOffset:b,resultString:D}}decodeEnd(l,u){return Ar.findGuardPatternWithoutCounters(l,u,!0,Ar.MIDDLE_END_PATTERN)}checkChecksum(l){return Fn.checkChecksum(Ar.convertUPCEtoUPCA(l))}static determineNumSysAndCheckDigit(l,u){for(let f=0;f<=1;f++)for(let x=0;x<10;x++)if(u===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[f][x]){let w=String.fromCharCode(48+f),b=String.fromCharCode(48+x);return w+l+b}throw G.getNotFoundInstance()}getBarcodeFormat(){return ee.UPC_E}static convertUPCEtoUPCA(l){const u=l.slice(1,7).split("").map(w=>w.charCodeAt(0)),f=new Y;f.append(l.charAt(0));let x=u[5];switch(x){case 0:case 1:case 2:f.appendChars(u,0,2),f.append(x),f.append("0000"),f.appendChars(u,2,3);break;case 3:f.appendChars(u,0,3),f.append("00000"),f.appendChars(u,3,2);break;case 4:f.appendChars(u,0,4),f.append("00000"),f.append(u[4]);break;default:f.appendChars(u,0,5),f.append("0000"),f.append(x);break}return l.length>=8&&f.append(l.charAt(7)),f.toString()}}Ar.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ar.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class oo extends bn{constructor(l){super();let u=l==null?null:l.get(L.POSSIBLE_FORMATS),f=[];r(u)?(f.push(new oa),f.push(new Yl),f.push(new la),f.push(new Ar)):(u.indexOf(ee.EAN_13)>-1&&f.push(new oa),u.indexOf(ee.UPC_A)>-1&&f.push(new Yl),u.indexOf(ee.EAN_8)>-1&&f.push(new la),u.indexOf(ee.UPC_E)>-1&&f.push(new Ar)),this.readers=f}decodeRow(l,u,f){for(let x of this.readers)try{const w=x.decodeRow(l,u,f),b=w.getBarcodeFormat()===ee.EAN_13&&w.getText().charAt(0)==="0",A=f==null?null:f.get(L.POSSIBLE_FORMATS),D=A==null||A.includes(ee.UPC_A);if(b&&D){const R=w.getRawBytes(),F=new te(w.getText().substring(1),R,R?R.length:null,w.getResultPoints(),ee.UPC_A);return F.putAllMetadata(w.getResultMetadata()),F}return w}catch{}throw new G}reset(){for(let l of this.readers)l.reset()}}class zs extends bn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(l,u){for(let f=0;f<u.length;f++)if(bn.patternMatchVariance(l,u[f],zs.MAX_INDIVIDUAL_VARIANCE)<zs.MAX_AVG_VARIANCE)return f;throw new G}static count(l){return be.sum(new Int32Array(l))}static increment(l,u){let f=0,x=u[0];for(let w=1;w<l.length;w++)u[w]>x&&(x=u[w],f=w);l[f]++}static decrement(l,u){let f=0,x=u[0];for(let w=1;w<l.length;w++)u[w]<x&&(x=u[w],f=w);l[f]--}static isFinderPattern(l){let u=l[0]+l[1],f=u+l[2]+l[3],x=u/f;if(x>=zs.MIN_FINDER_PATTERN_RATIO&&x<=zs.MAX_FINDER_PATTERN_RATIO){let w=Number.MAX_SAFE_INTEGER,b=Number.MIN_SAFE_INTEGER;for(let A of l)A>b&&(b=A),A<w&&(w=A);return b<10*w}return!1}}zs.MAX_AVG_VARIANCE=.2,zs.MAX_INDIVIDUAL_VARIANCE=.45,zs.MIN_FINDER_PATTERN_RATIO=9.5/12,zs.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ma{constructor(l,u){this.value=l,this.checksumPortion=u}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(l){if(!(l instanceof Ma))return!1;const u=l;return this.value===u.value&&this.checksumPortion===u.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Kl{constructor(l,u,f,x,w){this.value=l,this.startEnd=u,this.value=l,this.startEnd=u,this.resultPoints=new Array,this.resultPoints.push(new Pe(f,w)),this.resultPoints.push(new Pe(x,w))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(l){if(!(l instanceof Kl))return!1;const u=l;return this.value===u.value}hashCode(){return this.value}}class Fr{constructor(){}static getRSSvalue(l,u,f){let x=0;for(let D of l)x+=D;let w=0,b=0,A=l.length;for(let D=0;D<A-1;D++){let R;for(R=1,b|=1<<D;R<l[D];R++,b&=~(1<<D)){let F=Fr.combins(x-R-1,A-D-2);if(f&&b===0&&x-R-(A-D-1)>=A-D-1&&(F-=Fr.combins(x-R-(A-D),A-D-2)),A-D-1>1){let W=0;for(let K=x-R-(A-D-2);K>u;K--)W+=Fr.combins(x-R-K-1,A-D-3);F-=W*(A-1-D)}else x-R>u&&F--;w+=F}x-=R}return w}static combins(l,u){let f,x;l-u>u?(x=u,f=l-u):(x=l-u,f=u);let w=1,b=1;for(let A=l;A>f;A--)w*=A,b<=x&&(w/=b,b++);for(;b<=x;)w/=b,b++;return w}}class en{static buildBitArray(l){let u=l.length*2-1;l[l.length-1].getRightChar()==null&&(u-=1);let f=12*u,x=new I(f),w=0,A=l[0].getRightChar().getValue();for(let D=11;D>=0;--D)A&1<<D&&x.set(w),w++;for(let D=1;D<l.length;++D){let R=l[D],F=R.getLeftChar().getValue();for(let W=11;W>=0;--W)F&1<<W&&x.set(w),w++;if(R.getRightChar()!=null){let W=R.getRightChar().getValue();for(let K=11;K>=0;--K)W&1<<K&&x.set(w),w++}}return x}}class dl{constructor(l,u){u?this.decodedInformation=null:(this.finished=l,this.decodedInformation=u)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class yu{constructor(l){this.newPosition=l}getNewPosition(){return this.newPosition}}class Qr extends yu{constructor(l,u){super(l),this.value=u}getValue(){return this.value}isFNC1(){return this.value===Qr.FNC1}}Qr.FNC1="$";class Er extends yu{constructor(l,u,f){super(l),f?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=u}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Xr extends yu{constructor(l,u,f){if(super(l),u<0||u>10||f<0||f>10)throw new T;this.firstDigit=u,this.secondDigit=f}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Xr.FNC1}isSecondDigitFNC1(){return this.secondDigit===Xr.FNC1}isAnyFNC1(){return this.firstDigit===Xr.FNC1||this.secondDigit===Xr.FNC1}}Xr.FNC1=10;class Et{constructor(){}static parseFieldsInGeneralPurpose(l){if(!l)return null;if(l.length<2)throw new G;let u=l.substring(0,2);for(let w of Et.TWO_DIGIT_DATA_LENGTH)if(w[0]===u)return w[1]===Et.VARIABLE_LENGTH?Et.processVariableAI(2,w[2],l):Et.processFixedAI(2,w[1],l);if(l.length<3)throw new G;let f=l.substring(0,3);for(let w of Et.THREE_DIGIT_DATA_LENGTH)if(w[0]===f)return w[1]===Et.VARIABLE_LENGTH?Et.processVariableAI(3,w[2],l):Et.processFixedAI(3,w[1],l);for(let w of Et.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(w[0]===f)return w[1]===Et.VARIABLE_LENGTH?Et.processVariableAI(4,w[2],l):Et.processFixedAI(4,w[1],l);if(l.length<4)throw new G;let x=l.substring(0,4);for(let w of Et.FOUR_DIGIT_DATA_LENGTH)if(w[0]===x)return w[1]===Et.VARIABLE_LENGTH?Et.processVariableAI(4,w[2],l):Et.processFixedAI(4,w[1],l);throw new G}static processFixedAI(l,u,f){if(f.length<l)throw new G;let x=f.substring(0,l);if(f.length<l+u)throw new G;let w=f.substring(l,l+u),b=f.substring(l+u),A="("+x+")"+w,D=Et.parseFieldsInGeneralPurpose(b);return D==null?A:A+D}static processVariableAI(l,u,f){let x=f.substring(0,l),w;f.length<l+u?w=f.length:w=l+u;let b=f.substring(l,w),A=f.substring(w),D="("+x+")"+b,R=Et.parseFieldsInGeneralPurpose(A);return R==null?D:D+R}}Et.VARIABLE_LENGTH=[],Et.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Et.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Et.VARIABLE_LENGTH,20],["22",Et.VARIABLE_LENGTH,29],["30",Et.VARIABLE_LENGTH,8],["37",Et.VARIABLE_LENGTH,8],["90",Et.VARIABLE_LENGTH,30],["91",Et.VARIABLE_LENGTH,30],["92",Et.VARIABLE_LENGTH,30],["93",Et.VARIABLE_LENGTH,30],["94",Et.VARIABLE_LENGTH,30],["95",Et.VARIABLE_LENGTH,30],["96",Et.VARIABLE_LENGTH,30],["97",Et.VARIABLE_LENGTH,3],["98",Et.VARIABLE_LENGTH,30],["99",Et.VARIABLE_LENGTH,30]],Et.THREE_DIGIT_DATA_LENGTH=[["240",Et.VARIABLE_LENGTH,30],["241",Et.VARIABLE_LENGTH,30],["242",Et.VARIABLE_LENGTH,6],["250",Et.VARIABLE_LENGTH,30],["251",Et.VARIABLE_LENGTH,30],["253",Et.VARIABLE_LENGTH,17],["254",Et.VARIABLE_LENGTH,20],["400",Et.VARIABLE_LENGTH,30],["401",Et.VARIABLE_LENGTH,30],["402",17],["403",Et.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Et.VARIABLE_LENGTH,20],["421",Et.VARIABLE_LENGTH,15],["422",3],["423",Et.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Et.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Et.VARIABLE_LENGTH,15],["391",Et.VARIABLE_LENGTH,18],["392",Et.VARIABLE_LENGTH,15],["393",Et.VARIABLE_LENGTH,18],["703",Et.VARIABLE_LENGTH,30]],Et.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Et.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Et.VARIABLE_LENGTH,20],["8003",Et.VARIABLE_LENGTH,30],["8004",Et.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Et.VARIABLE_LENGTH,30],["8008",Et.VARIABLE_LENGTH,12],["8018",18],["8020",Et.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Et.VARIABLE_LENGTH,70],["8200",Et.VARIABLE_LENGTH,70]];class ca{constructor(l){this.buffer=new Y,this.information=l}decodeAllCodes(l,u){let f=u,x=null;do{let w=this.decodeGeneralPurposeField(f,x),b=Et.parseFieldsInGeneralPurpose(w.getNewString());if(b!=null&&l.append(b),w.isRemaining()?x=""+w.getRemainingValue():x=null,f===w.getNewPosition())break;f=w.getNewPosition()}while(!0);return l.toString()}isStillNumeric(l){if(l+7>this.information.getSize())return l+4<=this.information.getSize();for(let u=l;u<l+3;++u)if(this.information.get(u))return!0;return this.information.get(l+3)}decodeNumeric(l){if(l+7>this.information.getSize()){let w=this.extractNumericValueFromBitArray(l,4);return w===0?new Xr(this.information.getSize(),Xr.FNC1,Xr.FNC1):new Xr(this.information.getSize(),w-1,Xr.FNC1)}let u=this.extractNumericValueFromBitArray(l,7),f=(u-8)/11,x=(u-8)%11;return new Xr(l+7,f,x)}extractNumericValueFromBitArray(l,u){return ca.extractNumericValueFromBitArray(this.information,l,u)}static extractNumericValueFromBitArray(l,u,f){let x=0;for(let w=0;w<f;++w)l.get(u+w)&&(x|=1<<f-w-1);return x}decodeGeneralPurposeField(l,u){this.buffer.setLengthToZero(),u!=null&&this.buffer.append(u),this.current.setPosition(l);let f=this.parseBlocks();return f!=null&&f.isRemaining()?new Er(this.current.getPosition(),this.buffer.toString(),f.getRemainingValue()):new Er(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let l,u;do{let f=this.current.getPosition();if(this.current.isAlpha()?(u=this.parseAlphaBlock(),l=u.isFinished()):this.current.isIsoIec646()?(u=this.parseIsoIec646Block(),l=u.isFinished()):(u=this.parseNumericBlock(),l=u.isFinished()),!(f!==this.current.getPosition())&&!l)break}while(!l);return u.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let l=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFirstDigitFNC1()){let u;return l.isSecondDigitFNC1()?u=new Er(this.current.getPosition(),this.buffer.toString()):u=new Er(this.current.getPosition(),this.buffer.toString(),l.getSecondDigit()),new dl(!0,u)}if(this.buffer.append(l.getFirstDigit()),l.isSecondDigitFNC1()){let u=new Er(this.current.getPosition(),this.buffer.toString());return new dl(!0,u)}this.buffer.append(l.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new dl(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let l=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFNC1()){let u=new Er(this.current.getPosition(),this.buffer.toString());return new dl(!0,u)}this.buffer.append(l.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new dl(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let l=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFNC1()){let u=new Er(this.current.getPosition(),this.buffer.toString());return new dl(!0,u)}this.buffer.append(l.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new dl(!1)}isStillIsoIec646(l){if(l+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(l,5);if(u>=5&&u<16)return!0;if(l+7>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(l,7);if(f>=64&&f<116)return!0;if(l+8>this.information.getSize())return!1;let x=this.extractNumericValueFromBitArray(l,8);return x>=232&&x<253}decodeIsoIec646(l){let u=this.extractNumericValueFromBitArray(l,5);if(u===15)return new Qr(l+5,Qr.FNC1);if(u>=5&&u<15)return new Qr(l+5,"0"+(u-5));let f=this.extractNumericValueFromBitArray(l,7);if(f>=64&&f<90)return new Qr(l+7,""+(f+1));if(f>=90&&f<116)return new Qr(l+7,""+(f+7));let x=this.extractNumericValueFromBitArray(l,8),w;switch(x){case 232:w="!";break;case 233:w='"';break;case 234:w="%";break;case 235:w="&";break;case 236:w="'";break;case 237:w="(";break;case 238:w=")";break;case 239:w="*";break;case 240:w="+";break;case 241:w=",";break;case 242:w="-";break;case 243:w=".";break;case 244:w="/";break;case 245:w=":";break;case 246:w=";";break;case 247:w="<";break;case 248:w="=";break;case 249:w=">";break;case 250:w="?";break;case 251:w="_";break;case 252:w=" ";break;default:throw new T}return new Qr(l+8,w)}isStillAlpha(l){if(l+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(l,5);if(u>=5&&u<16)return!0;if(l+6>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(l,6);return f>=16&&f<63}decodeAlphanumeric(l){let u=this.extractNumericValueFromBitArray(l,5);if(u===15)return new Qr(l+5,Qr.FNC1);if(u>=5&&u<15)return new Qr(l+5,"0"+(u-5));let f=this.extractNumericValueFromBitArray(l,6);if(f>=32&&f<58)return new Qr(l+6,""+(f+33));let x;switch(f){case 58:x="*";break;case 59:x=",";break;case 60:x="-";break;case 61:x=".";break;case 62:x="/";break;default:throw new yt("Decoding invalid alphanumeric value: "+f)}return new Qr(l+6,x)}isAlphaTo646ToAlphaLatch(l){if(l+1>this.information.getSize())return!1;for(let u=0;u<5&&u+l<this.information.getSize();++u)if(u===2){if(!this.information.get(l+2))return!1}else if(this.information.get(l+u))return!1;return!0}isAlphaOr646ToNumericLatch(l){if(l+3>this.information.getSize())return!1;for(let u=l;u<l+3;++u)if(this.information.get(u))return!1;return!0}isNumericToAlphaNumericLatch(l){if(l+1>this.information.getSize())return!1;for(let u=0;u<4&&u+l<this.information.getSize();++u)if(this.information.get(l+u))return!1;return!0}}class wu{constructor(l){this.information=l,this.generalDecoder=new ca(l)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Br extends wu{constructor(l){super(l)}encodeCompressedGtin(l,u){l.append("(01)");let f=l.length();l.append("9"),this.encodeCompressedGtinWithoutAI(l,u,f)}encodeCompressedGtinWithoutAI(l,u,f){for(let x=0;x<4;++x){let w=this.getGeneralDecoder().extractNumericValueFromBitArray(u+10*x,10);w/100===0&&l.append("0"),w/10===0&&l.append("0"),l.append(w)}Br.appendCheckDigit(l,f)}static appendCheckDigit(l,u){let f=0;for(let x=0;x<13;x++){let w=l.charAt(x+u).charCodeAt(0)-48;f+=x&1?w:3*w}f=10-f%10,f===10&&(f=0),l.append(f)}}Br.GTIN_SIZE=40;class ul extends Br{constructor(l){super(l)}parseInformation(){let l=new Y;l.append("(01)");let u=l.length(),f=this.getGeneralDecoder().extractNumericValueFromBitArray(ul.HEADER_SIZE,4);return l.append(f),this.encodeCompressedGtinWithoutAI(l,ul.HEADER_SIZE+4,u),this.getGeneralDecoder().decodeAllCodes(l,ul.HEADER_SIZE+44)}}ul.HEADER_SIZE=4;class hl extends wu{constructor(l){super(l)}parseInformation(){let l=new Y;return this.getGeneralDecoder().decodeAllCodes(l,hl.HEADER_SIZE)}}hl.HEADER_SIZE=5;class ju extends Br{constructor(l){super(l)}encodeCompressedWeight(l,u,f){let x=this.getGeneralDecoder().extractNumericValueFromBitArray(u,f);this.addWeightCode(l,x);let w=this.checkWeight(x),b=1e5;for(let A=0;A<5;++A)w/b===0&&l.append("0"),b/=10;l.append(w)}}class da extends ju{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()!=da.HEADER_SIZE+ju.GTIN_SIZE+da.WEIGHT_SIZE)throw new G;let l=new Y;return this.encodeCompressedGtin(l,da.HEADER_SIZE),this.encodeCompressedWeight(l,da.HEADER_SIZE+ju.GTIN_SIZE,da.WEIGHT_SIZE),l.toString()}}da.HEADER_SIZE=5,da.WEIGHT_SIZE=15;class bu extends da{constructor(l){super(l)}addWeightCode(l,u){l.append("(3103)")}checkWeight(l){return l}}class Og extends da{constructor(l){super(l)}addWeightCode(l,u){u<1e4?l.append("(3202)"):l.append("(3203)")}checkWeight(l){return l<1e4?l:l-1e4}}class xr extends Br{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()<xr.HEADER_SIZE+Br.GTIN_SIZE)throw new G;let l=new Y;this.encodeCompressedGtin(l,xr.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(xr.HEADER_SIZE+Br.GTIN_SIZE,xr.LAST_DIGIT_SIZE);l.append("(392"),l.append(u),l.append(")");let f=this.getGeneralDecoder().decodeGeneralPurposeField(xr.HEADER_SIZE+Br.GTIN_SIZE+xr.LAST_DIGIT_SIZE,null);return l.append(f.getNewString()),l.toString()}}xr.HEADER_SIZE=8,xr.LAST_DIGIT_SIZE=2;class tr extends Br{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()<tr.HEADER_SIZE+Br.GTIN_SIZE)throw new G;let l=new Y;this.encodeCompressedGtin(l,tr.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(tr.HEADER_SIZE+Br.GTIN_SIZE,tr.LAST_DIGIT_SIZE);l.append("(393"),l.append(u),l.append(")");let f=this.getGeneralDecoder().extractNumericValueFromBitArray(tr.HEADER_SIZE+Br.GTIN_SIZE+tr.LAST_DIGIT_SIZE,tr.FIRST_THREE_DIGITS_SIZE);f/100==0&&l.append("0"),f/10==0&&l.append("0"),l.append(f);let x=this.getGeneralDecoder().decodeGeneralPurposeField(tr.HEADER_SIZE+Br.GTIN_SIZE+tr.LAST_DIGIT_SIZE+tr.FIRST_THREE_DIGITS_SIZE,null);return l.append(x.getNewString()),l.toString()}}tr.HEADER_SIZE=8,tr.LAST_DIGIT_SIZE=2,tr.FIRST_THREE_DIGITS_SIZE=10;class js extends ju{constructor(l,u,f){super(l),this.dateCode=f,this.firstAIdigits=u}parseInformation(){if(this.getInformation().getSize()!=js.HEADER_SIZE+js.GTIN_SIZE+js.WEIGHT_SIZE+js.DATE_SIZE)throw new G;let l=new Y;return this.encodeCompressedGtin(l,js.HEADER_SIZE),this.encodeCompressedWeight(l,js.HEADER_SIZE+js.GTIN_SIZE,js.WEIGHT_SIZE),this.encodeCompressedDate(l,js.HEADER_SIZE+js.GTIN_SIZE+js.WEIGHT_SIZE),l.toString()}encodeCompressedDate(l,u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(u,js.DATE_SIZE);if(f==38400)return;l.append("("),l.append(this.dateCode),l.append(")");let x=f%32;f/=32;let w=f%12+1;f/=12;let b=f;b/10==0&&l.append("0"),l.append(b),w/10==0&&l.append("0"),l.append(w),x/10==0&&l.append("0"),l.append(x)}addWeightCode(l,u){l.append("("),l.append(this.firstAIdigits),l.append(u/1e5),l.append(")")}checkWeight(l){return l%1e5}}js.HEADER_SIZE=8,js.WEIGHT_SIZE=20,js.DATE_SIZE=16;function Da(U){try{if(U.get(1))return new ul(U);if(!U.get(2))return new hl(U);switch(ca.extractNumericValueFromBitArray(U,1,4)){case 4:return new bu(U);case 5:return new Og(U)}switch(ca.extractNumericValueFromBitArray(U,1,5)){case 12:return new xr(U);case 13:return new tr(U)}switch(ca.extractNumericValueFromBitArray(U,1,7)){case 56:return new js(U,"310","11");case 57:return new js(U,"320","11");case 58:return new js(U,"310","13");case 59:return new js(U,"320","13");case 60:return new js(U,"310","15");case 61:return new js(U,"320","15");case 62:return new js(U,"310","17");case 63:return new js(U,"320","17")}}catch(l){throw console.log(l),new yt("unknown decoder: "+U)}}class ka{constructor(l,u,f,x){this.leftchar=l,this.rightchar=u,this.finderpattern=f,this.maybeLast=x}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(l,u){return l instanceof ka?ka.equalsOrNull(l.leftchar,u.leftchar)&&ka.equalsOrNull(l.rightchar,u.rightchar)&&ka.equalsOrNull(l.finderpattern,u.finderpattern):!1}static equalsOrNull(l,u){return l===null?u===null:ka.equals(l,u)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Nu{constructor(l,u,f){this.pairs=l,this.rowNumber=u,this.wasReversed=f}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(l){return this.checkEqualitity(this,l)}toString(){return"{ "+this.pairs+" }"}equals(l,u){return l instanceof Nu?this.checkEqualitity(l,u)&&l.wasReversed===u.wasReversed:!1}checkEqualitity(l,u){if(!l||!u)return;let f;return l.forEach((x,w)=>{u.forEach(b=>{x.getLeftChar().getValue()===b.getLeftChar().getValue()&&x.getRightChar().getValue()===b.getRightChar().getValue()&&x.getFinderPatter().getValue()===b.getFinderPatter().getValue()&&(f=!0)})}),f}}class He extends zs{constructor(l){super(...arguments),this.pairs=new Array(He.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=l===!0}decodeRow(l,u,f){this.pairs.length=0,this.startFromEven=!1;try{return He.constructResult(this.decodeRow2pairs(l,u))}catch(x){this.verbose&&console.log(x)}return this.pairs.length=0,this.startFromEven=!0,He.constructResult(this.decodeRow2pairs(l,u))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(l,u){let f=!1;for(;!f;)try{this.pairs.push(this.retrieveNextPair(u,this.pairs,l))}catch(w){if(w instanceof G){if(!this.pairs.length)throw new G;f=!0}}if(this.checkChecksum())return this.pairs;let x;if(this.rows.length?x=!0:x=!1,this.storeRow(l,!1),x){let w=this.checkRowsBoolean(!1);if(w!=null||(w=this.checkRowsBoolean(!0),w!=null))return w}throw new G}checkRowsBoolean(l){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,l&&(this.rows=this.rows.reverse());let u=null;try{u=this.checkRows(new Array,0)}catch(f){this.verbose&&console.log(f)}return l&&(this.rows=this.rows.reverse()),u}checkRows(l,u){for(let f=u;f<this.rows.length;f++){let x=this.rows[f];this.pairs.length=0;for(let b of l)this.pairs.push(b.getPairs());if(this.pairs.push(x.getPairs()),!He.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let w=new Array(l);w.push(x);try{return this.checkRows(w,f+1)}catch(b){this.verbose&&console.log(b)}}throw new G}static isValidSequence(l){for(let u of He.FINDER_PATTERN_SEQUENCES){if(l.length>u.length)continue;let f=!0;for(let x=0;x<l.length;x++)if(l[x].getFinderPattern().getValue()!=u[x]){f=!1;break}if(f)return!0}return!1}storeRow(l,u){let f=0,x=!1,w=!1;for(;f<this.rows.length;){let b=this.rows[f];if(b.getRowNumber()>l){w=b.isEquivalent(this.pairs);break}x=b.isEquivalent(this.pairs),f++}w||x||He.isPartialRow(this.pairs,this.rows)||(this.rows.push(f,new Nu(this.pairs,l,u)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(l,u){for(let f of u)if(f.getPairs().length!==l.length){for(let x of f.getPairs())for(let w of l)if(ka.equals(x,w))break}}static isPartialRow(l,u){for(let f of u){let x=!0;for(let w of l){let b=!1;for(let A of f.getPairs())if(w.equals(A)){b=!0;break}if(!b){x=!1;break}}if(x)return!0}return!1}getRows(){return this.rows}static constructResult(l){let u=en.buildBitArray(l),x=Da(u).parseInformation(),w=l[0].getFinderPattern().getResultPoints(),b=l[l.length-1].getFinderPattern().getResultPoints(),A=[w[0],w[1],b[0],b[1]];return new te(x,null,null,A,ee.RSS_EXPANDED,null)}checkChecksum(){let l=this.pairs.get(0),u=l.getLeftChar(),f=l.getRightChar();if(f==null)return!1;let x=f.getChecksumPortion(),w=2;for(let A=1;A<this.pairs.size();++A){let D=this.pairs.get(A);x+=D.getLeftChar().getChecksumPortion(),w++;let R=D.getRightChar();R!=null&&(x+=R.getChecksumPortion(),w++)}return x%=211,211*(w-4)+x==u.getValue()}static getNextSecondBar(l,u){let f;return l.get(u)?(f=l.getNextUnset(u),f=l.getNextSet(f)):(f=l.getNextSet(u),f=l.getNextUnset(f)),f}retrieveNextPair(l,u,f){let x=u.length%2==0;this.startFromEven&&(x=!x);let w,b=!0,A=-1;do this.findNextPair(l,u,A),w=this.parseFoundFinderPattern(l,f,x),w==null?A=He.getNextSecondBar(l,this.startEnd[0]):b=!1;while(b);let D=this.decodeDataCharacter(l,w,x,!0);if(!this.isEmptyPair(u)&&u[u.length-1].mustBeLast())throw new G;let R;try{R=this.decodeDataCharacter(l,w,x,!1)}catch(F){R=null,this.verbose&&console.log(F)}return new ka(D,R,w,!0)}isEmptyPair(l){return l.length===0}findNextPair(l,u,f){let x=this.getDecodeFinderCounters();x[0]=0,x[1]=0,x[2]=0,x[3]=0;let w=l.getSize(),b;f>=0?b=f:this.isEmptyPair(u)?b=0:b=u[u.length-1].getFinderPattern().getStartEnd()[1];let A=u.length%2!=0;this.startFromEven&&(A=!A);let D=!1;for(;b<w&&(D=!l.get(b),!!D);)b++;let R=0,F=b;for(let W=b;W<w;W++)if(l.get(W)!=D)x[R]++;else{if(R==3){if(A&&He.reverseCounters(x),He.isFinderPattern(x)){this.startEnd[0]=F,this.startEnd[1]=W;return}A&&He.reverseCounters(x),F+=x[0]+x[1],x[0]=x[2],x[1]=x[3],x[2]=0,x[3]=0,R--}else R++;x[R]=1,D=!D}throw new G}static reverseCounters(l){let u=l.length;for(let f=0;f<u/2;++f){let x=l[f];l[f]=l[u-f-1],l[u-f-1]=x}}parseFoundFinderPattern(l,u,f){let x,w,b;if(f){let R=this.startEnd[0]-1;for(;R>=0&&!l.get(R);)R--;R++,x=this.startEnd[0]-R,w=R,b=this.startEnd[1]}else w=this.startEnd[0],b=l.getNextUnset(this.startEnd[1]+1),x=b-this.startEnd[1];let A=this.getDecodeFinderCounters();N.arraycopy(A,0,A,1,A.length-1),A[0]=x;let D;try{D=this.parseFinderValue(A,He.FINDER_PATTERNS)}catch{return null}return new Kl(D,[w,b],w,b,u)}decodeDataCharacter(l,u,f,x){let w=this.getDataCharacterCounters();for(let Ns=0;Ns<w.length;Ns++)w[Ns]=0;if(x)He.recordPatternInReverse(l,u.getStartEnd()[0],w);else{He.recordPattern(l,u.getStartEnd()[1],w);for(let Ns=0,ti=w.length-1;Ns<ti;Ns++,ti--){let ua=w[Ns];w[Ns]=w[ti],w[ti]=ua}}let b=17,A=be.sum(new Int32Array(w))/b,D=(u.getStartEnd()[1]-u.getStartEnd()[0])/15;if(Math.abs(A-D)/D>.3)throw new G;let R=this.getOddCounts(),F=this.getEvenCounts(),W=this.getOddRoundingErrors(),K=this.getEvenRoundingErrors();for(let Ns=0;Ns<w.length;Ns++){let ti=1*w[Ns]/A,ua=ti+.5;if(ua<1){if(ti<.3)throw new G;ua=1}else if(ua>8){if(ti>8.7)throw new G;ua=8}let Eu=Ns/2;Ns&1?(F[Eu]=ua,K[Eu]=ti-ua):(R[Eu]=ua,W[Eu]=ti-ua)}this.adjustOddEvenCounts(b);let oe=4*u.getValue()+(f?0:2)+(x?0:1)-1,ge=0,je=0;for(let Ns=R.length-1;Ns>=0;Ns--){if(He.isNotA1left(u,f,x)){let ti=He.WEIGHTS[oe][2*Ns];je+=R[Ns]*ti}ge+=R[Ns]}let Te=0;for(let Ns=F.length-1;Ns>=0;Ns--)if(He.isNotA1left(u,f,x)){let ti=He.WEIGHTS[oe][2*Ns+1];Te+=F[Ns]*ti}let Oe=je+Te;if(ge&1||ge>13||ge<4)throw new G;let nt=(13-ge)/2,at=He.SYMBOL_WIDEST[nt],et=9-at,Bn=Fr.getRSSvalue(R,at,!0),un=Fr.getRSSvalue(F,et,!1),Ui=He.EVEN_TOTAL_SUBSET[nt],lo=He.GSUM[nt],Wi=Bn*Ui+un+lo;return new Ma(Wi,Oe)}static isNotA1left(l,u,f){return!(l.getValue()==0&&u&&f)}adjustOddEvenCounts(l){let u=be.sum(new Int32Array(this.getOddCounts())),f=be.sum(new Int32Array(this.getEvenCounts())),x=!1,w=!1;u>13?w=!0:u<4&&(x=!0);let b=!1,A=!1;f>13?A=!0:f<4&&(b=!0);let D=u+f-l,R=(u&1)==1,F=(f&1)==0;if(D==1)if(R){if(F)throw new G;w=!0}else{if(!F)throw new G;A=!0}else if(D==-1)if(R){if(F)throw new G;x=!0}else{if(!F)throw new G;b=!0}else if(D==0){if(R){if(!F)throw new G;u<f?(x=!0,A=!0):(w=!0,b=!0)}else if(F)throw new G}else throw new G;if(x){if(w)throw new G;He.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(w&&He.decrement(this.getOddCounts(),this.getOddRoundingErrors()),b){if(A)throw new G;He.increment(this.getEvenCounts(),this.getOddRoundingErrors())}A&&He.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}He.SYMBOL_WIDEST=[7,5,4,3,1],He.EVEN_TOTAL_SUBSET=[4,20,52,104,204],He.GSUM=[0,348,1388,2948,3988],He.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],He.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],He.FINDER_PAT_A=0,He.FINDER_PAT_B=1,He.FINDER_PAT_C=2,He.FINDER_PAT_D=3,He.FINDER_PAT_E=4,He.FINDER_PAT_F=5,He.FINDER_PATTERN_SEQUENCES=[[He.FINDER_PAT_A,He.FINDER_PAT_A],[He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B],[He.FINDER_PAT_A,He.FINDER_PAT_C,He.FINDER_PAT_B,He.FINDER_PAT_D],[He.FINDER_PAT_A,He.FINDER_PAT_E,He.FINDER_PAT_B,He.FINDER_PAT_D,He.FINDER_PAT_C],[He.FINDER_PAT_A,He.FINDER_PAT_E,He.FINDER_PAT_B,He.FINDER_PAT_D,He.FINDER_PAT_D,He.FINDER_PAT_F],[He.FINDER_PAT_A,He.FINDER_PAT_E,He.FINDER_PAT_B,He.FINDER_PAT_D,He.FINDER_PAT_E,He.FINDER_PAT_F,He.FINDER_PAT_F],[He.FINDER_PAT_A,He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B,He.FINDER_PAT_C,He.FINDER_PAT_C,He.FINDER_PAT_D,He.FINDER_PAT_D],[He.FINDER_PAT_A,He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B,He.FINDER_PAT_C,He.FINDER_PAT_C,He.FINDER_PAT_D,He.FINDER_PAT_E,He.FINDER_PAT_E],[He.FINDER_PAT_A,He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B,He.FINDER_PAT_C,He.FINDER_PAT_C,He.FINDER_PAT_D,He.FINDER_PAT_E,He.FINDER_PAT_F,He.FINDER_PAT_F],[He.FINDER_PAT_A,He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B,He.FINDER_PAT_C,He.FINDER_PAT_D,He.FINDER_PAT_D,He.FINDER_PAT_E,He.FINDER_PAT_E,He.FINDER_PAT_F,He.FINDER_PAT_F]],He.MAX_PAIRS=11;class pd extends Ma{constructor(l,u,f){super(l,u),this.count=0,this.finderPattern=f}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Is extends zs{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(l,u,f){const x=this.decodePair(u,!1,l,f);Is.addOrTally(this.possibleLeftPairs,x),u.reverse();let w=this.decodePair(u,!0,l,f);Is.addOrTally(this.possibleRightPairs,w),u.reverse();for(let b of this.possibleLeftPairs)if(b.getCount()>1){for(let A of this.possibleRightPairs)if(A.getCount()>1&&Is.checkChecksum(b,A))return Is.constructResult(b,A)}throw new G}static addOrTally(l,u){if(u==null)return;let f=!1;for(let x of l)if(x.getValue()===u.getValue()){x.incrementCount(),f=!0;break}f||l.push(u)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(l,u){let f=4537077*l.getValue()+u.getValue(),x=new String(f).toString(),w=new Y;for(let R=13-x.length;R>0;R--)w.append("0");w.append(x);let b=0;for(let R=0;R<13;R++){let F=w.charAt(R).charCodeAt(0)-48;b+=R&1?F:3*F}b=10-b%10,b===10&&(b=0),w.append(b.toString());let A=l.getFinderPattern().getResultPoints(),D=u.getFinderPattern().getResultPoints();return new te(w.toString(),null,0,[A[0],A[1],D[0],D[1]],ee.RSS_14,new Date().getTime())}static checkChecksum(l,u){let f=(l.getChecksumPortion()+16*u.getChecksumPortion())%79,x=9*l.getFinderPattern().getValue()+u.getFinderPattern().getValue();return x>72&&x--,x>8&&x--,f===x}decodePair(l,u,f,x){try{let w=this.findFinderPattern(l,u),b=this.parseFoundFinderPattern(l,f,u,w),A=x==null?null:x.get(L.NEED_RESULT_POINT_CALLBACK);if(A!=null){let F=(w[0]+w[1])/2;u&&(F=l.getSize()-1-F),A.foundPossibleResultPoint(new Pe(F,f))}let D=this.decodeDataCharacter(l,b,!0),R=this.decodeDataCharacter(l,b,!1);return new pd(1597*D.getValue()+R.getValue(),D.getChecksumPortion()+4*R.getChecksumPortion(),b)}catch{return null}}decodeDataCharacter(l,u,f){let x=this.getDataCharacterCounters();for(let Te=0;Te<x.length;Te++)x[Te]=0;if(f)bn.recordPatternInReverse(l,u.getStartEnd()[0],x);else{bn.recordPattern(l,u.getStartEnd()[1]+1,x);for(let Te=0,Oe=x.length-1;Te<Oe;Te++,Oe--){let nt=x[Te];x[Te]=x[Oe],x[Oe]=nt}}let w=f?16:15,b=be.sum(new Int32Array(x))/w,A=this.getOddCounts(),D=this.getEvenCounts(),R=this.getOddRoundingErrors(),F=this.getEvenRoundingErrors();for(let Te=0;Te<x.length;Te++){let Oe=x[Te]/b,nt=Math.floor(Oe+.5);nt<1?nt=1:nt>8&&(nt=8);let at=Math.floor(Te/2);Te&1?(D[at]=nt,F[at]=Oe-nt):(A[at]=nt,R[at]=Oe-nt)}this.adjustOddEvenCounts(f,w);let W=0,K=0;for(let Te=A.length-1;Te>=0;Te--)K*=9,K+=A[Te],W+=A[Te];let oe=0,ge=0;for(let Te=D.length-1;Te>=0;Te--)oe*=9,oe+=D[Te],ge+=D[Te];let je=K+3*oe;if(f){if(W&1||W>12||W<4)throw new G;let Te=(12-W)/2,Oe=Is.OUTSIDE_ODD_WIDEST[Te],nt=9-Oe,at=Fr.getRSSvalue(A,Oe,!1),et=Fr.getRSSvalue(D,nt,!0),Bn=Is.OUTSIDE_EVEN_TOTAL_SUBSET[Te],un=Is.OUTSIDE_GSUM[Te];return new Ma(at*Bn+et+un,je)}else{if(ge&1||ge>10||ge<4)throw new G;let Te=(10-ge)/2,Oe=Is.INSIDE_ODD_WIDEST[Te],nt=9-Oe,at=Fr.getRSSvalue(A,Oe,!0),et=Fr.getRSSvalue(D,nt,!1),Bn=Is.INSIDE_ODD_TOTAL_SUBSET[Te],un=Is.INSIDE_GSUM[Te];return new Ma(et*Bn+at+un,je)}}findFinderPattern(l,u){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let x=l.getSize(),w=!1,b=0;for(;b<x&&(w=!l.get(b),u!==w);)b++;let A=0,D=b;for(let R=b;R<x;R++)if(l.get(R)!==w)f[A]++;else{if(A===3){if(zs.isFinderPattern(f))return[D,R];D+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,A--}else A++;f[A]=1,w=!w}throw new G}parseFoundFinderPattern(l,u,f,x){let w=l.get(x[0]),b=x[0]-1;for(;b>=0&&w!==l.get(b);)b--;b++;const A=x[0]-b,D=this.getDecodeFinderCounters(),R=new Int32Array(D.length);N.arraycopy(D,0,R,1,D.length-1),R[0]=A;const F=this.parseFinderValue(R,Is.FINDER_PATTERNS);let W=b,K=x[1];return f&&(W=l.getSize()-1-W,K=l.getSize()-1-K),new Kl(F,[b,x[1]],W,K,u)}adjustOddEvenCounts(l,u){let f=be.sum(new Int32Array(this.getOddCounts())),x=be.sum(new Int32Array(this.getEvenCounts())),w=!1,b=!1,A=!1,D=!1;l?(f>12?b=!0:f<4&&(w=!0),x>12?D=!0:x<4&&(A=!0)):(f>11?b=!0:f<5&&(w=!0),x>10?D=!0:x<4&&(A=!0));let R=f+x-u,F=(f&1)===(l?1:0),W=(x&1)===1;if(R===1)if(F){if(W)throw new G;b=!0}else{if(!W)throw new G;D=!0}else if(R===-1)if(F){if(W)throw new G;w=!0}else{if(!W)throw new G;A=!0}else if(R===0){if(F){if(!W)throw new G;f<x?(w=!0,D=!0):(b=!0,A=!0)}else if(W)throw new G}else throw new G;if(w){if(b)throw new G;zs.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(b&&zs.decrement(this.getOddCounts(),this.getOddRoundingErrors()),A){if(D)throw new G;zs.increment(this.getEvenCounts(),this.getOddRoundingErrors())}D&&zs.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Is.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Is.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Is.OUTSIDE_GSUM=[0,161,961,2015,2715],Is.INSIDE_GSUM=[0,336,1036,1516],Is.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Is.INSIDE_ODD_WIDEST=[2,4,6,8],Is.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ml extends bn{constructor(l,u){super(),this.readers=[],this.verbose=u===!0;const f=l?l.get(L.POSSIBLE_FORMATS):null,x=l&&l.get(L.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;f?((f.includes(ee.EAN_13)||f.includes(ee.UPC_A)||f.includes(ee.EAN_8)||f.includes(ee.UPC_E))&&this.readers.push(new oo(l)),f.includes(ee.CODE_39)&&this.readers.push(new qn(x)),f.includes(ee.CODE_128)&&this.readers.push(new rt),f.includes(ee.ITF)&&this.readers.push(new Vn),f.includes(ee.RSS_14)&&this.readers.push(new Is),f.includes(ee.RSS_EXPANDED)&&this.readers.push(new He(this.verbose))):(this.readers.push(new oo(l)),this.readers.push(new qn),this.readers.push(new oo(l)),this.readers.push(new rt),this.readers.push(new Vn),this.readers.push(new Is),this.readers.push(new He(this.verbose)))}decodeRow(l,u,f){for(let x=0;x<this.readers.length;x++)try{return this.readers[x].decodeRow(l,u,f)}catch{}throw new G}reset(){this.readers.forEach(l=>l.reset())}}class Zl extends xe{constructor(l=500,u){super(new ml(u),l,u)}}class Jn{constructor(l,u,f){this.ecCodewords=l,this.ecBlocks=[u],f&&this.ecBlocks.push(f)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Kn{constructor(l,u){this.count=l,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class kn{constructor(l,u,f,x,w,b){this.versionNumber=l,this.symbolSizeRows=u,this.symbolSizeColumns=f,this.dataRegionSizeRows=x,this.dataRegionSizeColumns=w,this.ecBlocks=b;let A=0;const D=b.getECCodewords(),R=b.getECBlocks();for(let F of R)A+=F.getCount()*(F.getDataCodewords()+D);this.totalCodewords=A}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(l,u){if(l&1||u&1)throw new T;for(let f of kn.VERSIONS)if(f.symbolSizeRows===l&&f.symbolSizeColumns===u)return f;throw new T}toString(){return""+this.versionNumber}static buildVersions(){return[new kn(1,10,10,8,8,new Jn(5,new Kn(1,3))),new kn(2,12,12,10,10,new Jn(7,new Kn(1,5))),new kn(3,14,14,12,12,new Jn(10,new Kn(1,8))),new kn(4,16,16,14,14,new Jn(12,new Kn(1,12))),new kn(5,18,18,16,16,new Jn(14,new Kn(1,18))),new kn(6,20,20,18,18,new Jn(18,new Kn(1,22))),new kn(7,22,22,20,20,new Jn(20,new Kn(1,30))),new kn(8,24,24,22,22,new Jn(24,new Kn(1,36))),new kn(9,26,26,24,24,new Jn(28,new Kn(1,44))),new kn(10,32,32,14,14,new Jn(36,new Kn(1,62))),new kn(11,36,36,16,16,new Jn(42,new Kn(1,86))),new kn(12,40,40,18,18,new Jn(48,new Kn(1,114))),new kn(13,44,44,20,20,new Jn(56,new Kn(1,144))),new kn(14,48,48,22,22,new Jn(68,new Kn(1,174))),new kn(15,52,52,24,24,new Jn(42,new Kn(2,102))),new kn(16,64,64,14,14,new Jn(56,new Kn(2,140))),new kn(17,72,72,16,16,new Jn(36,new Kn(4,92))),new kn(18,80,80,18,18,new Jn(48,new Kn(4,114))),new kn(19,88,88,20,20,new Jn(56,new Kn(4,144))),new kn(20,96,96,22,22,new Jn(68,new Kn(4,174))),new kn(21,104,104,24,24,new Jn(56,new Kn(6,136))),new kn(22,120,120,18,18,new Jn(68,new Kn(6,175))),new kn(23,132,132,20,20,new Jn(62,new Kn(8,163))),new kn(24,144,144,22,22,new Jn(62,new Kn(8,156),new Kn(2,155))),new kn(25,8,18,6,16,new Jn(7,new Kn(1,5))),new kn(26,8,32,6,14,new Jn(11,new Kn(1,10))),new kn(27,12,26,10,24,new Jn(14,new Kn(1,16))),new kn(28,12,36,10,16,new Jn(18,new Kn(1,22))),new kn(29,16,36,14,16,new Jn(24,new Kn(1,32))),new kn(30,16,48,14,22,new Jn(28,new Kn(1,49)))]}}kn.VERSIONS=kn.buildVersions();class Cu{constructor(l){const u=l.getHeight();if(u<8||u>144||u&1)throw new T;this.version=Cu.readVersion(l),this.mappingBitMatrix=this.extractDataRegion(l),this.readMappingMatrix=new z(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(l){const u=l.getHeight(),f=l.getWidth();return kn.getVersionForDimensions(u,f)}readCodewords(){const l=new Int8Array(this.version.getTotalCodewords());let u=0,f=4,x=0;const w=this.mappingBitMatrix.getHeight(),b=this.mappingBitMatrix.getWidth();let A=!1,D=!1,R=!1,F=!1;do if(f===w&&x===0&&!A)l[u++]=this.readCorner1(w,b)&255,f-=2,x+=2,A=!0;else if(f===w-2&&x===0&&b&3&&!D)l[u++]=this.readCorner2(w,b)&255,f-=2,x+=2,D=!0;else if(f===w+4&&x===2&&!(b&7)&&!R)l[u++]=this.readCorner3(w,b)&255,f-=2,x+=2,R=!0;else if(f===w-2&&x===0&&(b&7)===4&&!F)l[u++]=this.readCorner4(w,b)&255,f-=2,x+=2,F=!0;else{do f<w&&x>=0&&!this.readMappingMatrix.get(x,f)&&(l[u++]=this.readUtah(f,x,w,b)&255),f-=2,x+=2;while(f>=0&&x<b);f+=1,x+=3;do f>=0&&x<b&&!this.readMappingMatrix.get(x,f)&&(l[u++]=this.readUtah(f,x,w,b)&255),f+=2,x-=2;while(f<w&&x>=0);f+=3,x+=1}while(f<w||x<b);if(u!==this.version.getTotalCodewords())throw new T;return l}readModule(l,u,f,x){return l<0&&(l+=f,u+=4-(f+4&7)),u<0&&(u+=x,l+=4-(x+4&7)),this.readMappingMatrix.set(u,l),this.mappingBitMatrix.get(u,l)}readUtah(l,u,f,x){let w=0;return this.readModule(l-2,u-2,f,x)&&(w|=1),w<<=1,this.readModule(l-2,u-1,f,x)&&(w|=1),w<<=1,this.readModule(l-1,u-2,f,x)&&(w|=1),w<<=1,this.readModule(l-1,u-1,f,x)&&(w|=1),w<<=1,this.readModule(l-1,u,f,x)&&(w|=1),w<<=1,this.readModule(l,u-2,f,x)&&(w|=1),w<<=1,this.readModule(l,u-1,f,x)&&(w|=1),w<<=1,this.readModule(l,u,f,x)&&(w|=1),w}readCorner1(l,u){let f=0;return this.readModule(l-1,0,l,u)&&(f|=1),f<<=1,this.readModule(l-1,1,l,u)&&(f|=1),f<<=1,this.readModule(l-1,2,l,u)&&(f|=1),f<<=1,this.readModule(0,u-2,l,u)&&(f|=1),f<<=1,this.readModule(0,u-1,l,u)&&(f|=1),f<<=1,this.readModule(1,u-1,l,u)&&(f|=1),f<<=1,this.readModule(2,u-1,l,u)&&(f|=1),f<<=1,this.readModule(3,u-1,l,u)&&(f|=1),f}readCorner2(l,u){let f=0;return this.readModule(l-3,0,l,u)&&(f|=1),f<<=1,this.readModule(l-2,0,l,u)&&(f|=1),f<<=1,this.readModule(l-1,0,l,u)&&(f|=1),f<<=1,this.readModule(0,u-4,l,u)&&(f|=1),f<<=1,this.readModule(0,u-3,l,u)&&(f|=1),f<<=1,this.readModule(0,u-2,l,u)&&(f|=1),f<<=1,this.readModule(0,u-1,l,u)&&(f|=1),f<<=1,this.readModule(1,u-1,l,u)&&(f|=1),f}readCorner3(l,u){let f=0;return this.readModule(l-1,0,l,u)&&(f|=1),f<<=1,this.readModule(l-1,u-1,l,u)&&(f|=1),f<<=1,this.readModule(0,u-3,l,u)&&(f|=1),f<<=1,this.readModule(0,u-2,l,u)&&(f|=1),f<<=1,this.readModule(0,u-1,l,u)&&(f|=1),f<<=1,this.readModule(1,u-3,l,u)&&(f|=1),f<<=1,this.readModule(1,u-2,l,u)&&(f|=1),f<<=1,this.readModule(1,u-1,l,u)&&(f|=1),f}readCorner4(l,u){let f=0;return this.readModule(l-3,0,l,u)&&(f|=1),f<<=1,this.readModule(l-2,0,l,u)&&(f|=1),f<<=1,this.readModule(l-1,0,l,u)&&(f|=1),f<<=1,this.readModule(0,u-2,l,u)&&(f|=1),f<<=1,this.readModule(0,u-1,l,u)&&(f|=1),f<<=1,this.readModule(1,u-1,l,u)&&(f|=1),f<<=1,this.readModule(2,u-1,l,u)&&(f|=1),f<<=1,this.readModule(3,u-1,l,u)&&(f|=1),f}extractDataRegion(l){const u=this.version.getSymbolSizeRows(),f=this.version.getSymbolSizeColumns();if(l.getHeight()!==u)throw new m("Dimension of bitMatrix must match the version size");const x=this.version.getDataRegionSizeRows(),w=this.version.getDataRegionSizeColumns(),b=u/x|0,A=f/w|0,D=b*x,R=A*w,F=new z(R,D);for(let W=0;W<b;++W){const K=W*x;for(let oe=0;oe<A;++oe){const ge=oe*w;for(let je=0;je<x;++je){const Te=W*(x+2)+1+je,Oe=K+je;for(let nt=0;nt<w;++nt){const at=oe*(w+2)+1+nt;if(l.get(at,Te)){const et=ge+nt;F.set(et,Oe)}}}}}return F}}class Rm{constructor(l,u){this.numDataCodewords=l,this.codewords=u}static getDataBlocks(l,u){const f=u.getECBlocks();let x=0;const w=f.getECBlocks();for(let je of w)x+=je.getCount();const b=new Array(x);let A=0;for(let je of w)for(let Te=0;Te<je.getCount();Te++){const Oe=je.getDataCodewords(),nt=f.getECCodewords()+Oe;b[A++]=new Rm(Oe,new Uint8Array(nt))}const R=b[0].codewords.length-f.getECCodewords(),F=R-1;let W=0;for(let je=0;je<F;je++)for(let Te=0;Te<A;Te++)b[Te].codewords[je]=l[W++];const K=u.getVersionNumber()===24,oe=K?8:A;for(let je=0;je<oe;je++)b[je].codewords[R-1]=l[W++];const ge=b[0].codewords.length;for(let je=R;je<ge;je++)for(let Te=0;Te<A;Te++){const Oe=K?(Te+8)%A:Te,nt=K&&Oe>7?je-1:je;b[Oe].codewords[nt]=l[W++]}if(W!==l.length)throw new m;return b}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Lm{constructor(l){this.bytes=l,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(l){if(l<1||l>32||l>this.available())throw new m(""+l);let u=0,f=this.bitOffset,x=this.byteOffset;const w=this.bytes;if(f>0){const b=8-f,A=l<b?l:b,D=b-A,R=255>>8-A<<D;u=(w[x]&R)>>D,l-=A,f+=A,f===8&&(f=0,x++)}if(l>0){for(;l>=8;)u=u<<8|w[x]&255,x++,l-=8;if(l>0){const b=8-l,A=255>>b<<b;u=u<<l|(w[x]&A)>>b,f+=l}}return this.bitOffset=f,this.byteOffset=x,u}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var cr;(function(U){U[U.PAD_ENCODE=0]="PAD_ENCODE",U[U.ASCII_ENCODE=1]="ASCII_ENCODE",U[U.C40_ENCODE=2]="C40_ENCODE",U[U.TEXT_ENCODE=3]="TEXT_ENCODE",U[U.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",U[U.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",U[U.BASE256_ENCODE=6]="BASE256_ENCODE"})(cr||(cr={}));class Ro{static decode(l){const u=new Lm(l),f=new Y,x=new Y,w=new Array;let b=cr.ASCII_ENCODE;do if(b===cr.ASCII_ENCODE)b=this.decodeAsciiSegment(u,f,x);else{switch(b){case cr.C40_ENCODE:this.decodeC40Segment(u,f);break;case cr.TEXT_ENCODE:this.decodeTextSegment(u,f);break;case cr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(u,f);break;case cr.EDIFACT_ENCODE:this.decodeEdifactSegment(u,f);break;case cr.BASE256_ENCODE:this.decodeBase256Segment(u,f,w);break;default:throw new T}b=cr.ASCII_ENCODE}while(b!==cr.PAD_ENCODE&&u.available()>0);return x.length()>0&&f.append(x.toString()),new Me(l,f.toString(),w.length===0?null:w,null)}static decodeAsciiSegment(l,u,f){let x=!1;do{let w=l.readBits(8);if(w===0)throw new T;if(w<=128)return x&&(w+=128),u.append(String.fromCharCode(w-1)),cr.ASCII_ENCODE;if(w===129)return cr.PAD_ENCODE;if(w<=229){const b=w-130;b<10&&u.append("0"),u.append(""+b)}else switch(w){case 230:return cr.C40_ENCODE;case 231:return cr.BASE256_ENCODE;case 232:u.append("");break;case 233:case 234:break;case 235:x=!0;break;case 236:u.append("[)>05"),f.insert(0,"");break;case 237:u.append("[)>06"),f.insert(0,"");break;case 238:return cr.ANSIX12_ENCODE;case 239:return cr.TEXT_ENCODE;case 240:return cr.EDIFACT_ENCODE;case 241:break;default:if(w!==254||l.available()!==0)throw new T;break}}while(l.available()>0);return cr.ASCII_ENCODE}static decodeC40Segment(l,u){let f=!1;const x=[];let w=0;do{if(l.available()===8)return;const b=l.readBits(8);if(b===254)return;this.parseTwoBytes(b,l.readBits(8),x);for(let A=0;A<3;A++){const D=x[A];switch(w){case 0:if(D<3)w=D+1;else if(D<this.C40_BASIC_SET_CHARS.length){const R=this.C40_BASIC_SET_CHARS[D];f?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),f=!1):u.append(R)}else throw new T;break;case 1:f?(u.append(String.fromCharCode(D+128)),f=!1):u.append(String.fromCharCode(D)),w=0;break;case 2:if(D<this.C40_SHIFT2_SET_CHARS.length){const R=this.C40_SHIFT2_SET_CHARS[D];f?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),f=!1):u.append(R)}else switch(D){case 27:u.append("");break;case 30:f=!0;break;default:throw new T}w=0;break;case 3:f?(u.append(String.fromCharCode(D+224)),f=!1):u.append(String.fromCharCode(D+96)),w=0;break;default:throw new T}}}while(l.available()>0)}static decodeTextSegment(l,u){let f=!1,x=[],w=0;do{if(l.available()===8)return;const b=l.readBits(8);if(b===254)return;this.parseTwoBytes(b,l.readBits(8),x);for(let A=0;A<3;A++){const D=x[A];switch(w){case 0:if(D<3)w=D+1;else if(D<this.TEXT_BASIC_SET_CHARS.length){const R=this.TEXT_BASIC_SET_CHARS[D];f?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),f=!1):u.append(R)}else throw new T;break;case 1:f?(u.append(String.fromCharCode(D+128)),f=!1):u.append(String.fromCharCode(D)),w=0;break;case 2:if(D<this.TEXT_SHIFT2_SET_CHARS.length){const R=this.TEXT_SHIFT2_SET_CHARS[D];f?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),f=!1):u.append(R)}else switch(D){case 27:u.append("");break;case 30:f=!0;break;default:throw new T}w=0;break;case 3:if(D<this.TEXT_SHIFT3_SET_CHARS.length){const R=this.TEXT_SHIFT3_SET_CHARS[D];f?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),f=!1):u.append(R),w=0}else throw new T;break;default:throw new T}}}while(l.available()>0)}static decodeAnsiX12Segment(l,u){const f=[];do{if(l.available()===8)return;const x=l.readBits(8);if(x===254)return;this.parseTwoBytes(x,l.readBits(8),f);for(let w=0;w<3;w++){const b=f[w];switch(b){case 0:u.append("\r");break;case 1:u.append("*");break;case 2:u.append(">");break;case 3:u.append(" ");break;default:if(b<14)u.append(String.fromCharCode(b+44));else if(b<40)u.append(String.fromCharCode(b+51));else throw new T;break}}}while(l.available()>0)}static parseTwoBytes(l,u,f){let x=(l<<8)+u-1,w=Math.floor(x/1600);f[0]=w,x-=w*1600,w=Math.floor(x/40),f[1]=w,f[2]=x-w*40}static decodeEdifactSegment(l,u){do{if(l.available()<=16)return;for(let f=0;f<4;f++){let x=l.readBits(6);if(x===31){const w=8-l.getBitOffset();w!==8&&l.readBits(w);return}x&32||(x|=64),u.append(String.fromCharCode(x))}}while(l.available()>0)}static decodeBase256Segment(l,u,f){let x=1+l.getByteOffset();const w=this.unrandomize255State(l.readBits(8),x++);let b;if(w===0?b=l.available()/8|0:w<250?b=w:b=250*(w-249)+this.unrandomize255State(l.readBits(8),x++),b<0)throw new T;const A=new Uint8Array(b);for(let D=0;D<b;D++){if(l.available()<8)throw new T;A[D]=this.unrandomize255State(l.readBits(8),x++)}f.push(A);try{u.append(V.decode(A,B.ISO88591))}catch(D){throw new yt("Platform does not support required encoding: "+D.message)}}static unrandomize255State(l,u){const f=149*u%255+1,x=l-f;return x>=0?x:x+256}}Ro.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ro.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ro.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ro.TEXT_SHIFT2_SET_CHARS=Ro.C40_SHIFT2_SET_CHARS,Ro.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class t1{constructor(){this.rsDecoder=new On(mt.DATA_MATRIX_FIELD_256)}decode(l){const u=new Cu(l),f=u.getVersion(),x=u.readCodewords(),w=Rm.getDataBlocks(x,f);let b=0;for(let R of w)b+=R.getNumDataCodewords();const A=new Uint8Array(b),D=w.length;for(let R=0;R<D;R++){const F=w[R],W=F.getCodewords(),K=F.getNumDataCodewords();this.correctErrors(W,K);for(let oe=0;oe<K;oe++)A[oe*D+R]=W[oe]}return Ro.decode(A)}correctErrors(l,u){const f=new Int32Array(l);try{this.rsDecoder.decode(f,l.length-u)}catch{throw new v}for(let x=0;x<u;x++)l[x]=f[x]}}class Ot{constructor(l){this.image=l,this.rectangleDetector=new Nt(this.image)}detect(){const l=this.rectangleDetector.detect();let u=this.detectSolid1(l);if(u=this.detectSolid2(u),u[3]=this.correctTopRight(u),!u[3])throw new G;u=this.shiftToModuleCenter(u);const f=u[0],x=u[1],w=u[2],b=u[3];let A=this.transitionsBetween(f,b)+1,D=this.transitionsBetween(w,b)+1;(A&1)===1&&(A+=1),(D&1)===1&&(D+=1),4*A<7*D&&4*D<7*A&&(A=D=Math.max(A,D));let R=Ot.sampleGrid(this.image,f,x,w,b,A,D);return new Je(R,[f,x,w,b])}static shiftPoint(l,u,f){let x=(u.getX()-l.getX())/(f+1),w=(u.getY()-l.getY())/(f+1);return new Pe(l.getX()+x,l.getY()+w)}static moveAway(l,u,f){let x=l.getX(),w=l.getY();return x<u?x-=1:x+=1,w<f?w-=1:w+=1,new Pe(x,w)}detectSolid1(l){let u=l[0],f=l[1],x=l[3],w=l[2],b=this.transitionsBetween(u,f),A=this.transitionsBetween(f,x),D=this.transitionsBetween(x,w),R=this.transitionsBetween(w,u),F=b,W=[w,u,f,x];return F>A&&(F=A,W[0]=u,W[1]=f,W[2]=x,W[3]=w),F>D&&(F=D,W[0]=f,W[1]=x,W[2]=w,W[3]=u),F>R&&(W[0]=x,W[1]=w,W[2]=u,W[3]=f),W}detectSolid2(l){let u=l[0],f=l[1],x=l[2],w=l[3],b=this.transitionsBetween(u,w),A=Ot.shiftPoint(f,x,(b+1)*4),D=Ot.shiftPoint(x,f,(b+1)*4),R=this.transitionsBetween(A,u),F=this.transitionsBetween(D,w);return R<F?(l[0]=u,l[1]=f,l[2]=x,l[3]=w):(l[0]=f,l[1]=x,l[2]=w,l[3]=u),l}correctTopRight(l){let u=l[0],f=l[1],x=l[2],w=l[3],b=this.transitionsBetween(u,w),A=this.transitionsBetween(f,w),D=Ot.shiftPoint(u,f,(A+1)*4),R=Ot.shiftPoint(x,f,(b+1)*4);b=this.transitionsBetween(D,w),A=this.transitionsBetween(R,w);let F=new Pe(w.getX()+(x.getX()-f.getX())/(b+1),w.getY()+(x.getY()-f.getY())/(b+1)),W=new Pe(w.getX()+(u.getX()-f.getX())/(A+1),w.getY()+(u.getY()-f.getY())/(A+1));if(!this.isValid(F))return this.isValid(W)?W:null;if(!this.isValid(W))return F;let K=this.transitionsBetween(D,F)+this.transitionsBetween(R,F),oe=this.transitionsBetween(D,W)+this.transitionsBetween(R,W);return K>oe?F:W}shiftToModuleCenter(l){let u=l[0],f=l[1],x=l[2],w=l[3],b=this.transitionsBetween(u,w)+1,A=this.transitionsBetween(x,w)+1,D=Ot.shiftPoint(u,f,A*4),R=Ot.shiftPoint(x,f,b*4);b=this.transitionsBetween(D,w)+1,A=this.transitionsBetween(R,w)+1,(b&1)===1&&(b+=1),(A&1)===1&&(A+=1);let F=(u.getX()+f.getX()+x.getX()+w.getX())/4,W=(u.getY()+f.getY()+x.getY()+w.getY())/4;u=Ot.moveAway(u,F,W),f=Ot.moveAway(f,F,W),x=Ot.moveAway(x,F,W),w=Ot.moveAway(w,F,W);let K,oe;return D=Ot.shiftPoint(u,f,A*4),D=Ot.shiftPoint(D,w,b*4),K=Ot.shiftPoint(f,u,A*4),K=Ot.shiftPoint(K,x,b*4),R=Ot.shiftPoint(x,w,A*4),R=Ot.shiftPoint(R,f,b*4),oe=Ot.shiftPoint(w,x,A*4),oe=Ot.shiftPoint(oe,u,b*4),[D,K,R,oe]}isValid(l){return l.getX()>=0&&l.getX()<this.image.getWidth()&&l.getY()>0&&l.getY()<this.image.getHeight()}static sampleGrid(l,u,f,x,w,b,A){return qt.getInstance().sampleGrid(l,b,A,.5,.5,b-.5,.5,b-.5,A-.5,.5,A-.5,u.getX(),u.getY(),w.getX(),w.getY(),x.getX(),x.getY(),f.getX(),f.getY())}transitionsBetween(l,u){let f=Math.trunc(l.getX()),x=Math.trunc(l.getY()),w=Math.trunc(u.getX()),b=Math.trunc(u.getY()),A=Math.abs(b-x)>Math.abs(w-f);if(A){let je=f;f=x,x=je,je=w,w=b,b=je}let D=Math.abs(w-f),R=Math.abs(b-x),F=-D/2,W=x<b?1:-1,K=f<w?1:-1,oe=0,ge=this.image.get(A?x:f,A?f:x);for(let je=f,Te=x;je!==w;je+=K){let Oe=this.image.get(A?Te:je,A?je:Te);if(Oe!==ge&&(oe++,ge=Oe),F+=R,F>0){if(Te===b)break;Te+=W,F-=D}}return oe}}class Nn{constructor(){this.decoder=new t1}decode(l,u=null){let f,x;if(u!=null&&u.has(L.PURE_BARCODE)){const R=Nn.extractPureBits(l.getBlackMatrix());f=this.decoder.decode(R),x=Nn.NO_POINTS}else{const R=new Ot(l.getBlackMatrix()).detect();f=this.decoder.decode(R.getBits()),x=R.getPoints()}const w=f.getRawBytes(),b=new te(f.getText(),w,8*w.length,x,ee.DATA_MATRIX,N.currentTimeMillis()),A=f.getByteSegments();A!=null&&b.putMetadata(pe.BYTE_SEGMENTS,A);const D=f.getECLevel();return D!=null&&b.putMetadata(pe.ERROR_CORRECTION_LEVEL,D),b}reset(){}static extractPureBits(l){const u=l.getTopLeftOnBit(),f=l.getBottomRightOnBit();if(u==null||f==null)throw new G;const x=this.moduleSize(u,l);let w=u[1];const b=f[1];let A=u[0];const R=(f[0]-A+1)/x,F=(b-w+1)/x;if(R<=0||F<=0)throw new G;const W=x/2;w+=W,A+=W;const K=new z(R,F);for(let oe=0;oe<F;oe++){const ge=w+oe*x;for(let je=0;je<R;je++)l.get(A+je*x,ge)&&K.set(je,oe)}return K}static moduleSize(l,u){const f=u.getWidth();let x=l[0];const w=l[1];for(;x<f&&u.get(x,w);)x++;if(x===f)throw new G;const b=x-l[0];if(b===0)throw new G;return b}}Nn.NO_POINTS=[];class cs extends xe{constructor(l=500){super(new Nn,l)}}var Zn;(function(U){U[U.L=0]="L",U[U.M=1]="M",U[U.Q=2]="Q",U[U.H=3]="H"})(Zn||(Zn={}));class Gt{constructor(l,u,f){this.value=l,this.stringValue=u,this.bits=f,Gt.FOR_BITS.set(f,this),Gt.FOR_VALUE.set(l,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(l){switch(l){case"L":return Gt.L;case"M":return Gt.M;case"Q":return Gt.Q;case"H":return Gt.H;default:throw new g(l+"not available")}}toString(){return this.stringValue}equals(l){if(!(l instanceof Gt))return!1;const u=l;return this.value===u.value}static forBits(l){if(l<0||l>=Gt.FOR_BITS.size)throw new m;return Gt.FOR_BITS.get(l)}}Gt.FOR_BITS=new Map,Gt.FOR_VALUE=new Map,Gt.L=new Gt(Zn.L,"L",1),Gt.M=new Gt(Zn.M,"M",0),Gt.Q=new Gt(Zn.Q,"Q",3),Gt.H=new Gt(Zn.H,"H",2);class nr{constructor(l){this.errorCorrectionLevel=Gt.forBits(l>>3&3),this.dataMask=l&7}static numBitsDiffering(l,u){return C.bitCount(l^u)}static decodeFormatInformation(l,u){const f=nr.doDecodeFormatInformation(l,u);return f!==null?f:nr.doDecodeFormatInformation(l^nr.FORMAT_INFO_MASK_QR,u^nr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(l,u){let f=Number.MAX_SAFE_INTEGER,x=0;for(const w of nr.FORMAT_INFO_DECODE_LOOKUP){const b=w[0];if(b===l||b===u)return new nr(w[1]);let A=nr.numBitsDiffering(l,b);A<f&&(x=w[1],f=A),l!==u&&(A=nr.numBitsDiffering(u,b),A<f&&(x=w[1],f=A))}return f<=3?new nr(x):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(l){if(!(l instanceof nr))return!1;const u=l;return this.errorCorrectionLevel===u.errorCorrectionLevel&&this.dataMask===u.dataMask}}nr.FORMAT_INFO_MASK_QR=21522,nr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Ie{constructor(l,...u){this.ecCodewordsPerBlock=l,this.ecBlocks=u}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let l=0;const u=this.ecBlocks;for(const f of u)l+=f.getCount();return l}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ie{constructor(l,u){this.count=l,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ft{constructor(l,u,...f){this.versionNumber=l,this.alignmentPatternCenters=u,this.ecBlocks=f;let x=0;const w=f[0].getECCodewordsPerBlock(),b=f[0].getECBlocks();for(const A of b)x+=A.getCount()*(A.getDataCodewords()+w);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(l){return this.ecBlocks[l.getValue()]}static getProvisionalVersionForDimension(l){if(l%4!==1)throw new T;try{return this.getVersionForNumber((l-17)/4)}catch{throw new T}}static getVersionForNumber(l){if(l<1||l>40)throw new m;return Ft.VERSIONS[l-1]}static decodeVersionInformation(l){let u=Number.MAX_SAFE_INTEGER,f=0;for(let x=0;x<Ft.VERSION_DECODE_INFO.length;x++){const w=Ft.VERSION_DECODE_INFO[x];if(w===l)return Ft.getVersionForNumber(x+7);const b=nr.numBitsDiffering(l,w);b<u&&(f=x+7,u=b)}return u<=3?Ft.getVersionForNumber(f):null}buildFunctionPattern(){const l=this.getDimensionForVersion(),u=new z(l);u.setRegion(0,0,9,9),u.setRegion(l-8,0,8,9),u.setRegion(0,l-8,9,8);const f=this.alignmentPatternCenters.length;for(let x=0;x<f;x++){const w=this.alignmentPatternCenters[x]-2;for(let b=0;b<f;b++)x===0&&(b===0||b===f-1)||x===f-1&&b===0||u.setRegion(this.alignmentPatternCenters[b]-2,w,5,5)}return u.setRegion(6,9,1,l-17),u.setRegion(9,6,l-17,1),this.versionNumber>6&&(u.setRegion(l-11,0,3,6),u.setRegion(0,l-11,6,3)),u}toString(){return""+this.versionNumber}}Ft.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ft.VERSIONS=[new Ft(1,new Int32Array(0),new Ie(7,new ie(1,19)),new Ie(10,new ie(1,16)),new Ie(13,new ie(1,13)),new Ie(17,new ie(1,9))),new Ft(2,Int32Array.from([6,18]),new Ie(10,new ie(1,34)),new Ie(16,new ie(1,28)),new Ie(22,new ie(1,22)),new Ie(28,new ie(1,16))),new Ft(3,Int32Array.from([6,22]),new Ie(15,new ie(1,55)),new Ie(26,new ie(1,44)),new Ie(18,new ie(2,17)),new Ie(22,new ie(2,13))),new Ft(4,Int32Array.from([6,26]),new Ie(20,new ie(1,80)),new Ie(18,new ie(2,32)),new Ie(26,new ie(2,24)),new Ie(16,new ie(4,9))),new Ft(5,Int32Array.from([6,30]),new Ie(26,new ie(1,108)),new Ie(24,new ie(2,43)),new Ie(18,new ie(2,15),new ie(2,16)),new Ie(22,new ie(2,11),new ie(2,12))),new Ft(6,Int32Array.from([6,34]),new Ie(18,new ie(2,68)),new Ie(16,new ie(4,27)),new Ie(24,new ie(4,19)),new Ie(28,new ie(4,15))),new Ft(7,Int32Array.from([6,22,38]),new Ie(20,new ie(2,78)),new Ie(18,new ie(4,31)),new Ie(18,new ie(2,14),new ie(4,15)),new Ie(26,new ie(4,13),new ie(1,14))),new Ft(8,Int32Array.from([6,24,42]),new Ie(24,new ie(2,97)),new Ie(22,new ie(2,38),new ie(2,39)),new Ie(22,new ie(4,18),new ie(2,19)),new Ie(26,new ie(4,14),new ie(2,15))),new Ft(9,Int32Array.from([6,26,46]),new Ie(30,new ie(2,116)),new Ie(22,new ie(3,36),new ie(2,37)),new Ie(20,new ie(4,16),new ie(4,17)),new Ie(24,new ie(4,12),new ie(4,13))),new Ft(10,Int32Array.from([6,28,50]),new Ie(18,new ie(2,68),new ie(2,69)),new Ie(26,new ie(4,43),new ie(1,44)),new Ie(24,new ie(6,19),new ie(2,20)),new Ie(28,new ie(6,15),new ie(2,16))),new Ft(11,Int32Array.from([6,30,54]),new Ie(20,new ie(4,81)),new Ie(30,new ie(1,50),new ie(4,51)),new Ie(28,new ie(4,22),new ie(4,23)),new Ie(24,new ie(3,12),new ie(8,13))),new Ft(12,Int32Array.from([6,32,58]),new Ie(24,new ie(2,92),new ie(2,93)),new Ie(22,new ie(6,36),new ie(2,37)),new Ie(26,new ie(4,20),new ie(6,21)),new Ie(28,new ie(7,14),new ie(4,15))),new Ft(13,Int32Array.from([6,34,62]),new Ie(26,new ie(4,107)),new Ie(22,new ie(8,37),new ie(1,38)),new Ie(24,new ie(8,20),new ie(4,21)),new Ie(22,new ie(12,11),new ie(4,12))),new Ft(14,Int32Array.from([6,26,46,66]),new Ie(30,new ie(3,115),new ie(1,116)),new Ie(24,new ie(4,40),new ie(5,41)),new Ie(20,new ie(11,16),new ie(5,17)),new Ie(24,new ie(11,12),new ie(5,13))),new Ft(15,Int32Array.from([6,26,48,70]),new Ie(22,new ie(5,87),new ie(1,88)),new Ie(24,new ie(5,41),new ie(5,42)),new Ie(30,new ie(5,24),new ie(7,25)),new Ie(24,new ie(11,12),new ie(7,13))),new Ft(16,Int32Array.from([6,26,50,74]),new Ie(24,new ie(5,98),new ie(1,99)),new Ie(28,new ie(7,45),new ie(3,46)),new Ie(24,new ie(15,19),new ie(2,20)),new Ie(30,new ie(3,15),new ie(13,16))),new Ft(17,Int32Array.from([6,30,54,78]),new Ie(28,new ie(1,107),new ie(5,108)),new Ie(28,new ie(10,46),new ie(1,47)),new Ie(28,new ie(1,22),new ie(15,23)),new Ie(28,new ie(2,14),new ie(17,15))),new Ft(18,Int32Array.from([6,30,56,82]),new Ie(30,new ie(5,120),new ie(1,121)),new Ie(26,new ie(9,43),new ie(4,44)),new Ie(28,new ie(17,22),new ie(1,23)),new Ie(28,new ie(2,14),new ie(19,15))),new Ft(19,Int32Array.from([6,30,58,86]),new Ie(28,new ie(3,113),new ie(4,114)),new Ie(26,new ie(3,44),new ie(11,45)),new Ie(26,new ie(17,21),new ie(4,22)),new Ie(26,new ie(9,13),new ie(16,14))),new Ft(20,Int32Array.from([6,34,62,90]),new Ie(28,new ie(3,107),new ie(5,108)),new Ie(26,new ie(3,41),new ie(13,42)),new Ie(30,new ie(15,24),new ie(5,25)),new Ie(28,new ie(15,15),new ie(10,16))),new Ft(21,Int32Array.from([6,28,50,72,94]),new Ie(28,new ie(4,116),new ie(4,117)),new Ie(26,new ie(17,42)),new Ie(28,new ie(17,22),new ie(6,23)),new Ie(30,new ie(19,16),new ie(6,17))),new Ft(22,Int32Array.from([6,26,50,74,98]),new Ie(28,new ie(2,111),new ie(7,112)),new Ie(28,new ie(17,46)),new Ie(30,new ie(7,24),new ie(16,25)),new Ie(24,new ie(34,13))),new Ft(23,Int32Array.from([6,30,54,78,102]),new Ie(30,new ie(4,121),new ie(5,122)),new Ie(28,new ie(4,47),new ie(14,48)),new Ie(30,new ie(11,24),new ie(14,25)),new Ie(30,new ie(16,15),new ie(14,16))),new Ft(24,Int32Array.from([6,28,54,80,106]),new Ie(30,new ie(6,117),new ie(4,118)),new Ie(28,new ie(6,45),new ie(14,46)),new Ie(30,new ie(11,24),new ie(16,25)),new Ie(30,new ie(30,16),new ie(2,17))),new Ft(25,Int32Array.from([6,32,58,84,110]),new Ie(26,new ie(8,106),new ie(4,107)),new Ie(28,new ie(8,47),new ie(13,48)),new Ie(30,new ie(7,24),new ie(22,25)),new Ie(30,new ie(22,15),new ie(13,16))),new Ft(26,Int32Array.from([6,30,58,86,114]),new Ie(28,new ie(10,114),new ie(2,115)),new Ie(28,new ie(19,46),new ie(4,47)),new Ie(28,new ie(28,22),new ie(6,23)),new Ie(30,new ie(33,16),new ie(4,17))),new Ft(27,Int32Array.from([6,34,62,90,118]),new Ie(30,new ie(8,122),new ie(4,123)),new Ie(28,new ie(22,45),new ie(3,46)),new Ie(30,new ie(8,23),new ie(26,24)),new Ie(30,new ie(12,15),new ie(28,16))),new Ft(28,Int32Array.from([6,26,50,74,98,122]),new Ie(30,new ie(3,117),new ie(10,118)),new Ie(28,new ie(3,45),new ie(23,46)),new Ie(30,new ie(4,24),new ie(31,25)),new Ie(30,new ie(11,15),new ie(31,16))),new Ft(29,Int32Array.from([6,30,54,78,102,126]),new Ie(30,new ie(7,116),new ie(7,117)),new Ie(28,new ie(21,45),new ie(7,46)),new Ie(30,new ie(1,23),new ie(37,24)),new Ie(30,new ie(19,15),new ie(26,16))),new Ft(30,Int32Array.from([6,26,52,78,104,130]),new Ie(30,new ie(5,115),new ie(10,116)),new Ie(28,new ie(19,47),new ie(10,48)),new Ie(30,new ie(15,24),new ie(25,25)),new Ie(30,new ie(23,15),new ie(25,16))),new Ft(31,Int32Array.from([6,30,56,82,108,134]),new Ie(30,new ie(13,115),new ie(3,116)),new Ie(28,new ie(2,46),new ie(29,47)),new Ie(30,new ie(42,24),new ie(1,25)),new Ie(30,new ie(23,15),new ie(28,16))),new Ft(32,Int32Array.from([6,34,60,86,112,138]),new Ie(30,new ie(17,115)),new Ie(28,new ie(10,46),new ie(23,47)),new Ie(30,new ie(10,24),new ie(35,25)),new Ie(30,new ie(19,15),new ie(35,16))),new Ft(33,Int32Array.from([6,30,58,86,114,142]),new Ie(30,new ie(17,115),new ie(1,116)),new Ie(28,new ie(14,46),new ie(21,47)),new Ie(30,new ie(29,24),new ie(19,25)),new Ie(30,new ie(11,15),new ie(46,16))),new Ft(34,Int32Array.from([6,34,62,90,118,146]),new Ie(30,new ie(13,115),new ie(6,116)),new Ie(28,new ie(14,46),new ie(23,47)),new Ie(30,new ie(44,24),new ie(7,25)),new Ie(30,new ie(59,16),new ie(1,17))),new Ft(35,Int32Array.from([6,30,54,78,102,126,150]),new Ie(30,new ie(12,121),new ie(7,122)),new Ie(28,new ie(12,47),new ie(26,48)),new Ie(30,new ie(39,24),new ie(14,25)),new Ie(30,new ie(22,15),new ie(41,16))),new Ft(36,Int32Array.from([6,24,50,76,102,128,154]),new Ie(30,new ie(6,121),new ie(14,122)),new Ie(28,new ie(6,47),new ie(34,48)),new Ie(30,new ie(46,24),new ie(10,25)),new Ie(30,new ie(2,15),new ie(64,16))),new Ft(37,Int32Array.from([6,28,54,80,106,132,158]),new Ie(30,new ie(17,122),new ie(4,123)),new Ie(28,new ie(29,46),new ie(14,47)),new Ie(30,new ie(49,24),new ie(10,25)),new Ie(30,new ie(24,15),new ie(46,16))),new Ft(38,Int32Array.from([6,32,58,84,110,136,162]),new Ie(30,new ie(4,122),new ie(18,123)),new Ie(28,new ie(13,46),new ie(32,47)),new Ie(30,new ie(48,24),new ie(14,25)),new Ie(30,new ie(42,15),new ie(32,16))),new Ft(39,Int32Array.from([6,26,54,82,110,138,166]),new Ie(30,new ie(20,117),new ie(4,118)),new Ie(28,new ie(40,47),new ie(7,48)),new Ie(30,new ie(43,24),new ie(22,25)),new Ie(30,new ie(10,15),new ie(67,16))),new Ft(40,Int32Array.from([6,30,58,86,114,142,170]),new Ie(30,new ie(19,118),new ie(6,119)),new Ie(28,new ie(18,47),new ie(31,48)),new Ie(30,new ie(34,24),new ie(34,25)),new Ie(30,new ie(20,15),new ie(61,16)))];var zr;(function(U){U[U.DATA_MASK_000=0]="DATA_MASK_000",U[U.DATA_MASK_001=1]="DATA_MASK_001",U[U.DATA_MASK_010=2]="DATA_MASK_010",U[U.DATA_MASK_011=3]="DATA_MASK_011",U[U.DATA_MASK_100=4]="DATA_MASK_100",U[U.DATA_MASK_101=5]="DATA_MASK_101",U[U.DATA_MASK_110=6]="DATA_MASK_110",U[U.DATA_MASK_111=7]="DATA_MASK_111"})(zr||(zr={}));class Pa{constructor(l,u){this.value=l,this.isMasked=u}unmaskBitMatrix(l,u){for(let f=0;f<u;f++)for(let x=0;x<u;x++)this.isMasked(f,x)&&l.flip(x,f)}}Pa.values=new Map([[zr.DATA_MASK_000,new Pa(zr.DATA_MASK_000,(U,l)=>(U+l&1)===0)],[zr.DATA_MASK_001,new Pa(zr.DATA_MASK_001,(U,l)=>(U&1)===0)],[zr.DATA_MASK_010,new Pa(zr.DATA_MASK_010,(U,l)=>l%3===0)],[zr.DATA_MASK_011,new Pa(zr.DATA_MASK_011,(U,l)=>(U+l)%3===0)],[zr.DATA_MASK_100,new Pa(zr.DATA_MASK_100,(U,l)=>(Math.floor(U/2)+Math.floor(l/3)&1)===0)],[zr.DATA_MASK_101,new Pa(zr.DATA_MASK_101,(U,l)=>U*l%6===0)],[zr.DATA_MASK_110,new Pa(zr.DATA_MASK_110,(U,l)=>U*l%6<3)],[zr.DATA_MASK_111,new Pa(zr.DATA_MASK_111,(U,l)=>(U+l+U*l%3&1)===0)]]);class yU{constructor(l){const u=l.getHeight();if(u<21||(u&3)!==1)throw new T;this.bitMatrix=l}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let l=0;for(let w=0;w<6;w++)l=this.copyBit(w,8,l);l=this.copyBit(7,8,l),l=this.copyBit(8,8,l),l=this.copyBit(8,7,l);for(let w=5;w>=0;w--)l=this.copyBit(8,w,l);const u=this.bitMatrix.getHeight();let f=0;const x=u-7;for(let w=u-1;w>=x;w--)f=this.copyBit(8,w,f);for(let w=u-8;w<u;w++)f=this.copyBit(w,8,f);if(this.parsedFormatInfo=nr.decodeFormatInformation(l,f),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new T}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const l=this.bitMatrix.getHeight(),u=Math.floor((l-17)/4);if(u<=6)return Ft.getVersionForNumber(u);let f=0;const x=l-11;for(let b=5;b>=0;b--)for(let A=l-9;A>=x;A--)f=this.copyBit(A,b,f);let w=Ft.decodeVersionInformation(f);if(w!==null&&w.getDimensionForVersion()===l)return this.parsedVersion=w,w;f=0;for(let b=5;b>=0;b--)for(let A=l-9;A>=x;A--)f=this.copyBit(b,A,f);if(w=Ft.decodeVersionInformation(f),w!==null&&w.getDimensionForVersion()===l)return this.parsedVersion=w,w;throw new T}copyBit(l,u,f){return(this.isMirror?this.bitMatrix.get(u,l):this.bitMatrix.get(l,u))?f<<1|1:f<<1}readCodewords(){const l=this.readFormatInformation(),u=this.readVersion(),f=Pa.values.get(l.getDataMask()),x=this.bitMatrix.getHeight();f.unmaskBitMatrix(this.bitMatrix,x);const w=u.buildFunctionPattern();let b=!0;const A=new Uint8Array(u.getTotalCodewords());let D=0,R=0,F=0;for(let W=x-1;W>0;W-=2){W===6&&W--;for(let K=0;K<x;K++){const oe=b?x-1-K:K;for(let ge=0;ge<2;ge++)w.get(W-ge,oe)||(F++,R<<=1,this.bitMatrix.get(W-ge,oe)&&(R|=1),F===8&&(A[D++]=R,F=0,R=0))}b=!b}if(D!==u.getTotalCodewords())throw new T;return A}remask(){if(this.parsedFormatInfo===null)return;const l=Pa.values[this.parsedFormatInfo.getDataMask()],u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u)}setMirror(l){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=l}mirror(){const l=this.bitMatrix;for(let u=0,f=l.getWidth();u<f;u++)for(let x=u+1,w=l.getHeight();x<w;x++)l.get(u,x)!==l.get(x,u)&&(l.flip(x,u),l.flip(u,x))}}class n1{constructor(l,u){this.numDataCodewords=l,this.codewords=u}static getDataBlocks(l,u,f){if(l.length!==u.getTotalCodewords())throw new m;const x=u.getECBlocksForLevel(f);let w=0;const b=x.getECBlocks();for(const ge of b)w+=ge.getCount();const A=new Array(w);let D=0;for(const ge of b)for(let je=0;je<ge.getCount();je++){const Te=ge.getDataCodewords(),Oe=x.getECCodewordsPerBlock()+Te;A[D++]=new n1(Te,new Uint8Array(Oe))}const R=A[0].codewords.length;let F=A.length-1;for(;F>=0&&A[F].codewords.length!==R;)F--;F++;const W=R-x.getECCodewordsPerBlock();let K=0;for(let ge=0;ge<W;ge++)for(let je=0;je<D;je++)A[je].codewords[ge]=l[K++];for(let ge=F;ge<D;ge++)A[ge].codewords[W]=l[K++];const oe=A[0].codewords.length;for(let ge=W;ge<oe;ge++)for(let je=0;je<D;je++){const Te=je<F?ge:ge+1;A[je].codewords[Te]=l[K++]}return A}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ra;(function(U){U[U.TERMINATOR=0]="TERMINATOR",U[U.NUMERIC=1]="NUMERIC",U[U.ALPHANUMERIC=2]="ALPHANUMERIC",U[U.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",U[U.BYTE=4]="BYTE",U[U.ECI=5]="ECI",U[U.KANJI=6]="KANJI",U[U.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",U[U.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",U[U.HANZI=9]="HANZI"})(Ra||(Ra={}));class Vt{constructor(l,u,f,x){this.value=l,this.stringValue=u,this.characterCountBitsForVersions=f,this.bits=x,Vt.FOR_BITS.set(x,this),Vt.FOR_VALUE.set(l,this)}static forBits(l){const u=Vt.FOR_BITS.get(l);if(u===void 0)throw new m;return u}getCharacterCountBits(l){const u=l.getVersionNumber();let f;return u<=9?f=0:u<=26?f=1:f=2,this.characterCountBitsForVersions[f]}getValue(){return this.value}getBits(){return this.bits}equals(l){if(!(l instanceof Vt))return!1;const u=l;return this.value===u.value}toString(){return this.stringValue}}Vt.FOR_BITS=new Map,Vt.FOR_VALUE=new Map,Vt.TERMINATOR=new Vt(Ra.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Vt.NUMERIC=new Vt(Ra.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Vt.ALPHANUMERIC=new Vt(Ra.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Vt.STRUCTURED_APPEND=new Vt(Ra.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Vt.BYTE=new Vt(Ra.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Vt.ECI=new Vt(Ra.ECI,"ECI",Int32Array.from([0,0,0]),7),Vt.KANJI=new Vt(Ra.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Vt.FNC1_FIRST_POSITION=new Vt(Ra.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Vt.FNC1_SECOND_POSITION=new Vt(Ra.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Vt.HANZI=new Vt(Ra.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class qs{static decode(l,u,f,x){const w=new Lm(l);let b=new Y;const A=new Array;let D=-1,R=-1;try{let F=null,W=!1,K;do{if(w.available()<4)K=Vt.TERMINATOR;else{const oe=w.readBits(4);K=Vt.forBits(oe)}switch(K){case Vt.TERMINATOR:break;case Vt.FNC1_FIRST_POSITION:case Vt.FNC1_SECOND_POSITION:W=!0;break;case Vt.STRUCTURED_APPEND:if(w.available()<16)throw new T;D=w.readBits(8),R=w.readBits(8);break;case Vt.ECI:const oe=qs.parseECIValue(w);if(F=k.getCharacterSetECIByValue(oe),F===null)throw new T;break;case Vt.HANZI:const ge=w.readBits(4),je=w.readBits(K.getCharacterCountBits(u));ge===qs.GB2312_SUBSET&&qs.decodeHanziSegment(w,b,je);break;default:const Te=w.readBits(K.getCharacterCountBits(u));switch(K){case Vt.NUMERIC:qs.decodeNumericSegment(w,b,Te);break;case Vt.ALPHANUMERIC:qs.decodeAlphanumericSegment(w,b,Te,W);break;case Vt.BYTE:qs.decodeByteSegment(w,b,Te,F,A,x);break;case Vt.KANJI:qs.decodeKanjiSegment(w,b,Te);break;default:throw new T}break}}while(K!==Vt.TERMINATOR)}catch{throw new T}return new Me(l,b.toString(),A.length===0?null:A,f===null?null:f.toString(),D,R)}static decodeHanziSegment(l,u,f){if(f*13>l.available())throw new T;const x=new Uint8Array(2*f);let w=0;for(;f>0;){const b=l.readBits(13);let A=b/96<<8&4294967295|b%96;A<959?A+=41377:A+=42657,x[w]=A>>8&255,x[w+1]=A&255,w+=2,f--}try{u.append(V.decode(x,B.GB2312))}catch(b){throw new T(b)}}static decodeKanjiSegment(l,u,f){if(f*13>l.available())throw new T;const x=new Uint8Array(2*f);let w=0;for(;f>0;){const b=l.readBits(13);let A=b/192<<8&4294967295|b%192;A<7936?A+=33088:A+=49472,x[w]=A>>8,x[w+1]=A,w+=2,f--}try{u.append(V.decode(x,B.SHIFT_JIS))}catch(b){throw new T(b)}}static decodeByteSegment(l,u,f,x,w,b){if(8*f>l.available())throw new T;const A=new Uint8Array(f);for(let R=0;R<f;R++)A[R]=l.readBits(8);let D;x===null?D=B.guessEncoding(A,b):D=x.getName();try{u.append(V.decode(A,D))}catch(R){throw new T(R)}w.push(A)}static toAlphaNumericChar(l){if(l>=qs.ALPHANUMERIC_CHARS.length)throw new T;return qs.ALPHANUMERIC_CHARS[l]}static decodeAlphanumericSegment(l,u,f,x){const w=u.length();for(;f>1;){if(l.available()<11)throw new T;const b=l.readBits(11);u.append(qs.toAlphaNumericChar(Math.floor(b/45))),u.append(qs.toAlphaNumericChar(b%45)),f-=2}if(f===1){if(l.available()<6)throw new T;u.append(qs.toAlphaNumericChar(l.readBits(6)))}if(x)for(let b=w;b<u.length();b++)u.charAt(b)==="%"&&(b<u.length()-1&&u.charAt(b+1)==="%"?u.deleteCharAt(b+1):u.setCharAt(b,""))}static decodeNumericSegment(l,u,f){for(;f>=3;){if(l.available()<10)throw new T;const x=l.readBits(10);if(x>=1e3)throw new T;u.append(qs.toAlphaNumericChar(Math.floor(x/100))),u.append(qs.toAlphaNumericChar(Math.floor(x/10)%10)),u.append(qs.toAlphaNumericChar(x%10)),f-=3}if(f===2){if(l.available()<7)throw new T;const x=l.readBits(7);if(x>=100)throw new T;u.append(qs.toAlphaNumericChar(Math.floor(x/10))),u.append(qs.toAlphaNumericChar(x%10))}else if(f===1){if(l.available()<4)throw new T;const x=l.readBits(4);if(x>=10)throw new T;u.append(qs.toAlphaNumericChar(x))}}static parseECIValue(l){const u=l.readBits(8);if(!(u&128))return u&127;if((u&192)===128){const f=l.readBits(8);return(u&63)<<8&4294967295|f}if((u&224)===192){const f=l.readBits(16);return(u&31)<<16&4294967295|f}throw new T}}qs.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",qs.GB2312_SUBSET=1;class QS{constructor(l){this.mirrored=l}isMirrored(){return this.mirrored}applyMirroredCorrection(l){if(!this.mirrored||l===null||l.length<3)return;const u=l[0];l[0]=l[2],l[2]=u}}class wU{constructor(){this.rsDecoder=new On(mt.QR_CODE_FIELD_256)}decodeBooleanArray(l,u){return this.decodeBitMatrix(z.parseFromBooleanArray(l),u)}decodeBitMatrix(l,u){const f=new yU(l);let x=null;try{return this.decodeBitMatrixParser(f,u)}catch(w){x=w}try{f.remask(),f.setMirror(!0),f.readVersion(),f.readFormatInformation(),f.mirror();const w=this.decodeBitMatrixParser(f,u);return w.setOther(new QS(!0)),w}catch(w){throw x!==null?x:w}}decodeBitMatrixParser(l,u){const f=l.readVersion(),x=l.readFormatInformation().getErrorCorrectionLevel(),w=l.readCodewords(),b=n1.getDataBlocks(w,f,x);let A=0;for(const F of b)A+=F.getNumDataCodewords();const D=new Uint8Array(A);let R=0;for(const F of b){const W=F.getCodewords(),K=F.getNumDataCodewords();this.correctErrors(W,K);for(let oe=0;oe<K;oe++)D[R++]=W[oe]}return qs.decode(D,f,x,u)}correctErrors(l,u){const f=new Int32Array(l);try{this.rsDecoder.decode(f,l.length-u)}catch{throw new v}for(let x=0;x<u;x++)l[x]=f[x]}}class s1 extends Pe{constructor(l,u,f){super(l,u),this.estimatedModuleSize=f}aboutEquals(l,u,f){if(Math.abs(u-this.getY())<=l&&Math.abs(f-this.getX())<=l){const x=Math.abs(l-this.estimatedModuleSize);return x<=1||x<=this.estimatedModuleSize}return!1}combineEstimate(l,u,f){const x=(this.getX()+u)/2,w=(this.getY()+l)/2,b=(this.estimatedModuleSize+f)/2;return new s1(x,w,b)}}class Fg{constructor(l,u,f,x,w,b,A){this.image=l,this.startX=u,this.startY=f,this.width=x,this.height=w,this.moduleSize=b,this.resultPointCallback=A,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const l=this.startX,u=this.height,f=this.width,x=l+f,w=this.startY+u/2,b=new Int32Array(3),A=this.image;for(let D=0;D<u;D++){const R=w+(D&1?-Math.floor((D+1)/2):Math.floor((D+1)/2));b[0]=0,b[1]=0,b[2]=0;let F=l;for(;F<x&&!A.get(F,R);)F++;let W=0;for(;F<x;){if(A.get(F,R))if(W===1)b[1]++;else if(W===2){if(this.foundPatternCross(b)){const K=this.handlePossibleCenter(b,R,F);if(K!==null)return K}b[0]=b[2],b[1]=1,b[2]=0,W=1}else b[++W]++;else W===1&&W++,b[W]++;F++}if(this.foundPatternCross(b)){const K=this.handlePossibleCenter(b,R,x);if(K!==null)return K}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new G}static centerFromEnd(l,u){return u-l[2]-l[1]/2}foundPatternCross(l){const u=this.moduleSize,f=u/2;for(let x=0;x<3;x++)if(Math.abs(u-l[x])>=f)return!1;return!0}crossCheckVertical(l,u,f,x){const w=this.image,b=w.getHeight(),A=this.crossCheckStateCount;A[0]=0,A[1]=0,A[2]=0;let D=l;for(;D>=0&&w.get(u,D)&&A[1]<=f;)A[1]++,D--;if(D<0||A[1]>f)return NaN;for(;D>=0&&!w.get(u,D)&&A[0]<=f;)A[0]++,D--;if(A[0]>f)return NaN;for(D=l+1;D<b&&w.get(u,D)&&A[1]<=f;)A[1]++,D++;if(D===b||A[1]>f)return NaN;for(;D<b&&!w.get(u,D)&&A[2]<=f;)A[2]++,D++;if(A[2]>f)return NaN;const R=A[0]+A[1]+A[2];return 5*Math.abs(R-x)>=2*x?NaN:this.foundPatternCross(A)?Fg.centerFromEnd(A,D):NaN}handlePossibleCenter(l,u,f){const x=l[0]+l[1]+l[2],w=Fg.centerFromEnd(l,f),b=this.crossCheckVertical(u,w,2*l[1],x);if(!isNaN(b)){const A=(l[0]+l[1]+l[2])/3;for(const R of this.possibleCenters)if(R.aboutEquals(A,b,w))return R.combineEstimate(b,w,A);const D=new s1(w,b,A);this.possibleCenters.push(D),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(D)}return null}}class r1 extends Pe{constructor(l,u,f,x){super(l,u),this.estimatedModuleSize=f,this.count=x,x===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(l,u,f){if(Math.abs(u-this.getY())<=l&&Math.abs(f-this.getX())<=l){const x=Math.abs(l-this.estimatedModuleSize);return x<=1||x<=this.estimatedModuleSize}return!1}combineEstimate(l,u,f){const x=this.count+1,w=(this.count*this.getX()+u)/x,b=(this.count*this.getY()+l)/x,A=(this.count*this.estimatedModuleSize+f)/x;return new r1(w,b,A,x)}}class jU{constructor(l){this.bottomLeft=l[0],this.topLeft=l[1],this.topRight=l[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Vr{constructor(l,u){this.image=l,this.resultPointCallback=u,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=u}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(l){const u=l!=null&&l.get(L.TRY_HARDER)!==void 0,f=l!=null&&l.get(L.PURE_BARCODE)!==void 0,x=this.image,w=x.getHeight(),b=x.getWidth();let A=Math.floor(3*w/(4*Vr.MAX_MODULES));(A<Vr.MIN_SKIP||u)&&(A=Vr.MIN_SKIP);let D=!1;const R=new Int32Array(5);for(let W=A-1;W<w&&!D;W+=A){R[0]=0,R[1]=0,R[2]=0,R[3]=0,R[4]=0;let K=0;for(let oe=0;oe<b;oe++)if(x.get(oe,W))(K&1)===1&&K++,R[K]++;else if(K&1)R[K]++;else if(K===4)if(Vr.foundPatternCross(R)){if(this.handlePossibleCenter(R,W,oe,f)===!0)if(A=2,this.hasSkipped===!0)D=this.haveMultiplyConfirmedCenters();else{const je=this.findRowSkip();je>R[2]&&(W+=je-R[2]-A,oe=b-1)}else{R[0]=R[2],R[1]=R[3],R[2]=R[4],R[3]=1,R[4]=0,K=3;continue}K=0,R[0]=0,R[1]=0,R[2]=0,R[3]=0,R[4]=0}else R[0]=R[2],R[1]=R[3],R[2]=R[4],R[3]=1,R[4]=0,K=3;else R[++K]++;Vr.foundPatternCross(R)&&this.handlePossibleCenter(R,W,b,f)===!0&&(A=R[0],this.hasSkipped&&(D=this.haveMultiplyConfirmedCenters()))}const F=this.selectBestPatterns();return Pe.orderBestPatterns(F),new jU(F)}static centerFromEnd(l,u){return u-l[4]-l[3]-l[2]/2}static foundPatternCross(l){let u=0;for(let w=0;w<5;w++){const b=l[w];if(b===0)return!1;u+=b}if(u<7)return!1;const f=u/7,x=f/2;return Math.abs(f-l[0])<x&&Math.abs(f-l[1])<x&&Math.abs(3*f-l[2])<3*x&&Math.abs(f-l[3])<x&&Math.abs(f-l[4])<x}getCrossCheckStateCount(){const l=this.crossCheckStateCount;return l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l}crossCheckDiagonal(l,u,f,x){const w=this.getCrossCheckStateCount();let b=0;const A=this.image;for(;l>=b&&u>=b&&A.get(u-b,l-b);)w[2]++,b++;if(l<b||u<b)return!1;for(;l>=b&&u>=b&&!A.get(u-b,l-b)&&w[1]<=f;)w[1]++,b++;if(l<b||u<b||w[1]>f)return!1;for(;l>=b&&u>=b&&A.get(u-b,l-b)&&w[0]<=f;)w[0]++,b++;if(w[0]>f)return!1;const D=A.getHeight(),R=A.getWidth();for(b=1;l+b<D&&u+b<R&&A.get(u+b,l+b);)w[2]++,b++;if(l+b>=D||u+b>=R)return!1;for(;l+b<D&&u+b<R&&!A.get(u+b,l+b)&&w[3]<f;)w[3]++,b++;if(l+b>=D||u+b>=R||w[3]>=f)return!1;for(;l+b<D&&u+b<R&&A.get(u+b,l+b)&&w[4]<f;)w[4]++,b++;if(w[4]>=f)return!1;const F=w[0]+w[1]+w[2]+w[3]+w[4];return Math.abs(F-x)<2*x&&Vr.foundPatternCross(w)}crossCheckVertical(l,u,f,x){const w=this.image,b=w.getHeight(),A=this.getCrossCheckStateCount();let D=l;for(;D>=0&&w.get(u,D);)A[2]++,D--;if(D<0)return NaN;for(;D>=0&&!w.get(u,D)&&A[1]<=f;)A[1]++,D--;if(D<0||A[1]>f)return NaN;for(;D>=0&&w.get(u,D)&&A[0]<=f;)A[0]++,D--;if(A[0]>f)return NaN;for(D=l+1;D<b&&w.get(u,D);)A[2]++,D++;if(D===b)return NaN;for(;D<b&&!w.get(u,D)&&A[3]<f;)A[3]++,D++;if(D===b||A[3]>=f)return NaN;for(;D<b&&w.get(u,D)&&A[4]<f;)A[4]++,D++;if(A[4]>=f)return NaN;const R=A[0]+A[1]+A[2]+A[3]+A[4];return 5*Math.abs(R-x)>=2*x?NaN:Vr.foundPatternCross(A)?Vr.centerFromEnd(A,D):NaN}crossCheckHorizontal(l,u,f,x){const w=this.image,b=w.getWidth(),A=this.getCrossCheckStateCount();let D=l;for(;D>=0&&w.get(D,u);)A[2]++,D--;if(D<0)return NaN;for(;D>=0&&!w.get(D,u)&&A[1]<=f;)A[1]++,D--;if(D<0||A[1]>f)return NaN;for(;D>=0&&w.get(D,u)&&A[0]<=f;)A[0]++,D--;if(A[0]>f)return NaN;for(D=l+1;D<b&&w.get(D,u);)A[2]++,D++;if(D===b)return NaN;for(;D<b&&!w.get(D,u)&&A[3]<f;)A[3]++,D++;if(D===b||A[3]>=f)return NaN;for(;D<b&&w.get(D,u)&&A[4]<f;)A[4]++,D++;if(A[4]>=f)return NaN;const R=A[0]+A[1]+A[2]+A[3]+A[4];return 5*Math.abs(R-x)>=x?NaN:Vr.foundPatternCross(A)?Vr.centerFromEnd(A,D):NaN}handlePossibleCenter(l,u,f,x){const w=l[0]+l[1]+l[2]+l[3]+l[4];let b=Vr.centerFromEnd(l,f),A=this.crossCheckVertical(u,Math.floor(b),l[2],w);if(!isNaN(A)&&(b=this.crossCheckHorizontal(Math.floor(b),Math.floor(A),l[2],w),!isNaN(b)&&(!x||this.crossCheckDiagonal(Math.floor(A),Math.floor(b),l[2],w)))){const D=w/7;let R=!1;const F=this.possibleCenters;for(let W=0,K=F.length;W<K;W++){const oe=F[W];if(oe.aboutEquals(D,A,b)){F[W]=oe.combineEstimate(A,b,D),R=!0;break}}if(!R){const W=new r1(b,A,D);F.push(W),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(W)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let u=null;for(const f of this.possibleCenters)if(f.getCount()>=Vr.CENTER_QUORUM)if(u==null)u=f;else return this.hasSkipped=!0,Math.floor((Math.abs(u.getX()-f.getX())-Math.abs(u.getY()-f.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let l=0,u=0;const f=this.possibleCenters.length;for(const b of this.possibleCenters)b.getCount()>=Vr.CENTER_QUORUM&&(l++,u+=b.getEstimatedModuleSize());if(l<3)return!1;const x=u/f;let w=0;for(const b of this.possibleCenters)w+=Math.abs(b.getEstimatedModuleSize()-x);return w<=.05*u}selectBestPatterns(){const l=this.possibleCenters.length;if(l<3)throw new G;const u=this.possibleCenters;let f;if(l>3){let x=0,w=0;for(const D of this.possibleCenters){const R=D.getEstimatedModuleSize();x+=R,w+=R*R}f=x/l;let b=Math.sqrt(w/l-f*f);u.sort((D,R)=>{const F=Math.abs(R.getEstimatedModuleSize()-f),W=Math.abs(D.getEstimatedModuleSize()-f);return F<W?-1:F>W?1:0});const A=Math.max(.2*f,b);for(let D=0;D<u.length&&u.length>3;D++){const R=u[D];Math.abs(R.getEstimatedModuleSize()-f)>A&&(u.splice(D,1),D--)}}if(u.length>3){let x=0;for(const w of u)x+=w.getEstimatedModuleSize();f=x/u.length,u.sort((w,b)=>{if(b.getCount()===w.getCount()){const A=Math.abs(b.getEstimatedModuleSize()-f),D=Math.abs(w.getEstimatedModuleSize()-f);return A<D?1:A>D?-1:0}else return b.getCount()-w.getCount()}),u.splice(3)}return[u[0],u[1],u[2]]}}Vr.CENTER_QUORUM=2,Vr.MIN_SKIP=3,Vr.MAX_MODULES=57;class Om{constructor(l){this.image=l}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(l){this.resultPointCallback=l==null?null:l.get(L.NEED_RESULT_POINT_CALLBACK);const f=new Vr(this.image,this.resultPointCallback).find(l);return this.processFinderPatternInfo(f)}processFinderPatternInfo(l){const u=l.getTopLeft(),f=l.getTopRight(),x=l.getBottomLeft(),w=this.calculateModuleSize(u,f,x);if(w<1)throw new G("No pattern found in proccess finder.");const b=Om.computeDimension(u,f,x,w),A=Ft.getProvisionalVersionForDimension(b),D=A.getDimensionForVersion()-7;let R=null;if(A.getAlignmentPatternCenters().length>0){const oe=f.getX()-u.getX()+x.getX(),ge=f.getY()-u.getY()+x.getY(),je=1-3/D,Te=Math.floor(u.getX()+je*(oe-u.getX())),Oe=Math.floor(u.getY()+je*(ge-u.getY()));for(let nt=4;nt<=16;nt<<=1)try{R=this.findAlignmentInRegion(w,Te,Oe,nt);break}catch(at){if(!(at instanceof G))throw at}}const F=Om.createTransform(u,f,x,R,b),W=Om.sampleGrid(this.image,F,b);let K;return R===null?K=[x,u,f]:K=[x,u,f,R],new Je(W,K)}static createTransform(l,u,f,x,w){const b=w-3.5;let A,D,R,F;return x!==null?(A=x.getX(),D=x.getY(),R=b-3,F=R):(A=u.getX()-l.getX()+f.getX(),D=u.getY()-l.getY()+f.getY(),R=b,F=b),Dt.quadrilateralToQuadrilateral(3.5,3.5,b,3.5,R,F,3.5,b,l.getX(),l.getY(),u.getX(),u.getY(),A,D,f.getX(),f.getY())}static sampleGrid(l,u,f){return qt.getInstance().sampleGridWithTransform(l,f,f,u)}static computeDimension(l,u,f,x){const w=be.round(Pe.distance(l,u)/x),b=be.round(Pe.distance(l,f)/x);let A=Math.floor((w+b)/2)+7;switch(A&3){case 0:A++;break;case 2:A--;break;case 3:throw new G("Dimensions could be not found.")}return A}calculateModuleSize(l,u,f){return(this.calculateModuleSizeOneWay(l,u)+this.calculateModuleSizeOneWay(l,f))/2}calculateModuleSizeOneWay(l,u){const f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(u.getX()),Math.floor(u.getY())),x=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(u.getX()),Math.floor(u.getY()),Math.floor(l.getX()),Math.floor(l.getY()));return isNaN(f)?x/7:isNaN(x)?f/7:(f+x)/14}sizeOfBlackWhiteBlackRunBothWays(l,u,f,x){let w=this.sizeOfBlackWhiteBlackRun(l,u,f,x),b=1,A=l-(f-l);A<0?(b=l/(l-A),A=0):A>=this.image.getWidth()&&(b=(this.image.getWidth()-1-l)/(A-l),A=this.image.getWidth()-1);let D=Math.floor(u-(x-u)*b);return b=1,D<0?(b=u/(u-D),D=0):D>=this.image.getHeight()&&(b=(this.image.getHeight()-1-u)/(D-u),D=this.image.getHeight()-1),A=Math.floor(l+(A-l)*b),w+=this.sizeOfBlackWhiteBlackRun(l,u,A,D),w-1}sizeOfBlackWhiteBlackRun(l,u,f,x){const w=Math.abs(x-u)>Math.abs(f-l);if(w){let oe=l;l=u,u=oe,oe=f,f=x,x=oe}const b=Math.abs(f-l),A=Math.abs(x-u);let D=-b/2;const R=l<f?1:-1,F=u<x?1:-1;let W=0;const K=f+R;for(let oe=l,ge=u;oe!==K;oe+=R){const je=w?ge:oe,Te=w?oe:ge;if(W===1===this.image.get(je,Te)){if(W===2)return be.distance(oe,ge,l,u);W++}if(D+=A,D>0){if(ge===x)break;ge+=F,D-=b}}return W===2?be.distance(f+R,x,l,u):NaN}findAlignmentInRegion(l,u,f,x){const w=Math.floor(x*l),b=Math.max(0,u-w),A=Math.min(this.image.getWidth()-1,u+w);if(A-b<l*3)throw new G("Alignment top exceeds estimated module size.");const D=Math.max(0,f-w),R=Math.min(this.image.getHeight()-1,f+w);if(R-D<l*3)throw new G("Alignment bottom exceeds estimated module size.");return new Fg(this.image,b,D,A-b,R-D,l,this.resultPointCallback).find()}}class Ql{constructor(){this.decoder=new wU}getDecoder(){return this.decoder}decode(l,u){let f,x;if(u!=null&&u.get(L.PURE_BARCODE)!==void 0){const D=Ql.extractPureBits(l.getBlackMatrix());f=this.decoder.decodeBitMatrix(D,u),x=Ql.NO_POINTS}else{const D=new Om(l.getBlackMatrix()).detect(u);f=this.decoder.decodeBitMatrix(D.getBits(),u),x=D.getPoints()}f.getOther()instanceof QS&&f.getOther().applyMirroredCorrection(x);const w=new te(f.getText(),f.getRawBytes(),void 0,x,ee.QR_CODE,void 0),b=f.getByteSegments();b!==null&&w.putMetadata(pe.BYTE_SEGMENTS,b);const A=f.getECLevel();return A!==null&&w.putMetadata(pe.ERROR_CORRECTION_LEVEL,A),f.hasStructuredAppend()&&(w.putMetadata(pe.STRUCTURED_APPEND_SEQUENCE,f.getStructuredAppendSequenceNumber()),w.putMetadata(pe.STRUCTURED_APPEND_PARITY,f.getStructuredAppendParity())),w}reset(){}static extractPureBits(l){const u=l.getTopLeftOnBit(),f=l.getBottomRightOnBit();if(u===null||f===null)throw new G;const x=this.moduleSize(u,l);let w=u[1],b=f[1],A=u[0],D=f[0];if(A>=D||w>=b)throw new G;if(b-w!==D-A&&(D=A+(b-w),D>=l.getWidth()))throw new G;const R=Math.round((D-A+1)/x),F=Math.round((b-w+1)/x);if(R<=0||F<=0)throw new G;if(F!==R)throw new G;const W=Math.floor(x/2);w+=W,A+=W;const K=A+Math.floor((R-1)*x)-D;if(K>0){if(K>W)throw new G;A-=K}const oe=w+Math.floor((F-1)*x)-b;if(oe>0){if(oe>W)throw new G;w-=oe}const ge=new z(R,F);for(let je=0;je<F;je++){const Te=w+Math.floor(je*x);for(let Oe=0;Oe<R;Oe++)l.get(A+Math.floor(Oe*x),Te)&&ge.set(Oe,je)}return ge}static moduleSize(l,u){const f=u.getHeight(),x=u.getWidth();let w=l[0],b=l[1],A=!0,D=0;for(;w<x&&b<f;){if(A!==u.get(w,b)){if(++D===5)break;A=!A}w++,b++}if(w===x||b===f)throw new G;return(w-l[0])/7}}Ql.NO_POINTS=new Array;class Yt{PDF417Common(){}static getBitCountSum(l){return be.sum(l)}static toIntArray(l){if(l==null||!l.length)return Yt.EMPTY_INT_ARRAY;const u=new Int32Array(l.length);let f=0;for(const x of l)u[f++]=x;return u}static getCodeword(l){const u=S.binarySearch(Yt.SYMBOL_TABLE,l&262143);return u<0?-1:(Yt.CODEWORD_TABLE[u]-1)%Yt.NUMBER_OF_CODEWORDS}}Yt.NUMBER_OF_CODEWORDS=929,Yt.MAX_CODEWORDS_IN_BARCODE=Yt.NUMBER_OF_CODEWORDS-1,Yt.MIN_ROWS_IN_BARCODE=3,Yt.MAX_ROWS_IN_BARCODE=90,Yt.MODULES_IN_CODEWORD=17,Yt.MODULES_IN_STOP_PATTERN=18,Yt.BARS_IN_MODULE=8,Yt.EMPTY_INT_ARRAY=new Int32Array([]),Yt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Yt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class bU{constructor(l,u){this.bits=l,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class Cn{static detectMultiple(l,u,f){let x=l.getBlackMatrix(),w=Cn.detect(f,x);return w.length||(x=x.clone(),x.rotate180(),w=Cn.detect(f,x)),new bU(x,w)}static detect(l,u){const f=new Array;let x=0,w=0,b=!1;for(;x<u.getHeight();){const A=Cn.findVertices(u,x,w);if(A[0]==null&&A[3]==null){if(!b)break;b=!1,w=0;for(const D of f)D[1]!=null&&(x=Math.trunc(Math.max(x,D[1].getY()))),D[3]!=null&&(x=Math.max(x,Math.trunc(D[3].getY())));x+=Cn.ROW_STEP;continue}if(b=!0,f.push(A),!l)break;A[2]!=null?(w=Math.trunc(A[2].getX()),x=Math.trunc(A[2].getY())):(w=Math.trunc(A[4].getX()),x=Math.trunc(A[4].getY()))}return f}static findVertices(l,u,f){const x=l.getHeight(),w=l.getWidth(),b=new Array(8);return Cn.copyToResult(b,Cn.findRowsWithPattern(l,x,w,u,f,Cn.START_PATTERN),Cn.INDEXES_START_PATTERN),b[4]!=null&&(f=Math.trunc(b[4].getX()),u=Math.trunc(b[4].getY())),Cn.copyToResult(b,Cn.findRowsWithPattern(l,x,w,u,f,Cn.STOP_PATTERN),Cn.INDEXES_STOP_PATTERN),b}static copyToResult(l,u,f){for(let x=0;x<f.length;x++)l[f[x]]=u[x]}static findRowsWithPattern(l,u,f,x,w,b){const A=new Array(4);let D=!1;const R=new Int32Array(b.length);for(;x<u;x+=Cn.ROW_STEP){let W=Cn.findGuardPattern(l,w,x,f,!1,b,R);if(W!=null){for(;x>0;){const K=Cn.findGuardPattern(l,w,--x,f,!1,b,R);if(K!=null)W=K;else{x++;break}}A[0]=new Pe(W[0],x),A[1]=new Pe(W[1],x),D=!0;break}}let F=x+1;if(D){let W=0,K=Int32Array.from([Math.trunc(A[0].getX()),Math.trunc(A[1].getX())]);for(;F<u;F++){const oe=Cn.findGuardPattern(l,K[0],F,f,!1,b,R);if(oe!=null&&Math.abs(K[0]-oe[0])<Cn.MAX_PATTERN_DRIFT&&Math.abs(K[1]-oe[1])<Cn.MAX_PATTERN_DRIFT)K=oe,W=0;else{if(W>Cn.SKIPPED_ROW_COUNT_MAX)break;W++}}F-=W+1,A[2]=new Pe(K[0],F),A[3]=new Pe(K[1],F)}return F-x<Cn.BARCODE_MIN_HEIGHT&&S.fill(A,null),A}static findGuardPattern(l,u,f,x,w,b,A){S.fillWithin(A,0,A.length,0);let D=u,R=0;for(;l.get(D,f)&&D>0&&R++<Cn.MAX_PIXEL_DRIFT;)D--;let F=D,W=0,K=b.length;for(let oe=w;F<x;F++)if(l.get(F,f)!==oe)A[W]++;else{if(W===K-1){if(Cn.patternMatchVariance(A,b,Cn.MAX_INDIVIDUAL_VARIANCE)<Cn.MAX_AVG_VARIANCE)return new Int32Array([D,F]);D+=A[0]+A[1],N.arraycopy(A,2,A,0,W-1),A[W-1]=0,A[W]=0,W--}else W++;A[W]=1,oe=!oe}return W===K-1&&Cn.patternMatchVariance(A,b,Cn.MAX_INDIVIDUAL_VARIANCE)<Cn.MAX_AVG_VARIANCE?new Int32Array([D,F-1]):null}static patternMatchVariance(l,u,f){let x=l.length,w=0,b=0;for(let R=0;R<x;R++)w+=l[R],b+=u[R];if(w<b)return 1/0;let A=w/b;f*=A;let D=0;for(let R=0;R<x;R++){let F=l[R],W=u[R]*A,K=F>W?F-W:W-F;if(K>f)return 1/0;D+=K}return D/w}}Cn.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Cn.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Cn.MAX_AVG_VARIANCE=.42,Cn.MAX_INDIVIDUAL_VARIANCE=.8,Cn.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Cn.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Cn.MAX_PIXEL_DRIFT=3,Cn.MAX_PATTERN_DRIFT=5,Cn.SKIPPED_ROW_COUNT_MAX=25,Cn.ROW_STEP=5,Cn.BARCODE_MIN_HEIGHT=10;class Jr{constructor(l,u){if(u.length===0)throw new m;this.field=l;let f=u.length;if(f>1&&u[0]===0){let x=1;for(;x<f&&u[x]===0;)x++;x===f?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(f-x),N.arraycopy(u,x,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(l){return this.coefficients[this.coefficients.length-1-l]}evaluateAt(l){if(l===0)return this.getCoefficient(0);if(l===1){let x=0;for(let w of this.coefficients)x=this.field.add(x,w);return x}let u=this.coefficients[0],f=this.coefficients.length;for(let x=1;x<f;x++)u=this.field.add(this.field.multiply(l,u),this.coefficients[x]);return u}add(l){if(!this.field.equals(l.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero())return l;if(l.isZero())return this;let u=this.coefficients,f=l.coefficients;if(u.length>f.length){let b=u;u=f,f=b}let x=new Int32Array(f.length),w=f.length-u.length;N.arraycopy(f,0,x,0,w);for(let b=w;b<f.length;b++)x[b]=this.field.add(u[b-w],f[b]);return new Jr(this.field,x)}subtract(l){if(!this.field.equals(l.field))throw new m("ModulusPolys do not have same ModulusGF field");return l.isZero()?this:this.add(l.negative())}multiply(l){return l instanceof Jr?this.multiplyOther(l):this.multiplyScalar(l)}multiplyOther(l){if(!this.field.equals(l.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero()||l.isZero())return new Jr(this.field,new Int32Array([0]));let u=this.coefficients,f=u.length,x=l.coefficients,w=x.length,b=new Int32Array(f+w-1);for(let A=0;A<f;A++){let D=u[A];for(let R=0;R<w;R++)b[A+R]=this.field.add(b[A+R],this.field.multiply(D,x[R]))}return new Jr(this.field,b)}negative(){let l=this.coefficients.length,u=new Int32Array(l);for(let f=0;f<l;f++)u[f]=this.field.subtract(0,this.coefficients[f]);return new Jr(this.field,u)}multiplyScalar(l){if(l===0)return new Jr(this.field,new Int32Array([0]));if(l===1)return this;let u=this.coefficients.length,f=new Int32Array(u);for(let x=0;x<u;x++)f[x]=this.field.multiply(this.coefficients[x],l);return new Jr(this.field,f)}multiplyByMonomial(l,u){if(l<0)throw new m;if(u===0)return new Jr(this.field,new Int32Array([0]));let f=this.coefficients.length,x=new Int32Array(f+l);for(let w=0;w<f;w++)x[w]=this.field.multiply(this.coefficients[w],u);return new Jr(this.field,x)}toString(){let l=new Y;for(let u=this.getDegree();u>=0;u--){let f=this.getCoefficient(u);f!==0&&(f<0?(l.append(" - "),f=-f):l.length()>0&&l.append(" + "),(u===0||f!==1)&&l.append(f),u!==0&&(u===1?l.append("x"):(l.append("x^"),l.append(u))))}return l.toString()}}class NU{add(l,u){return(l+u)%this.modulus}subtract(l,u){return(this.modulus+l-u)%this.modulus}exp(l){return this.expTable[l]}log(l){if(l===0)throw new m;return this.logTable[l]}inverse(l){if(l===0)throw new jt;return this.expTable[this.modulus-this.logTable[l]-1]}multiply(l,u){return l===0||u===0?0:this.expTable[(this.logTable[l]+this.logTable[u])%(this.modulus-1)]}getSize(){return this.modulus}equals(l){return l===this}}class i1 extends NU{constructor(l,u){super(),this.modulus=l,this.expTable=new Int32Array(l),this.logTable=new Int32Array(l);let f=1;for(let x=0;x<l;x++)this.expTable[x]=f,f=f*u%l;for(let x=0;x<l-1;x++)this.logTable[this.expTable[x]]=x;this.zero=new Jr(this,new Int32Array([0])),this.one=new Jr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(l,u){if(l<0)throw new m;if(u===0)return this.zero;let f=new Int32Array(l+1);return f[0]=u,new Jr(this,f)}}i1.PDF417_GF=new i1(Yt.NUMBER_OF_CODEWORDS,3);class XS{constructor(){this.field=i1.PDF417_GF}decode(l,u,f){let x=new Jr(this.field,l),w=new Int32Array(u),b=!1;for(let ge=u;ge>0;ge--){let je=x.evaluateAt(this.field.exp(ge));w[u-ge]=je,je!==0&&(b=!0)}if(!b)return 0;let A=this.field.getOne();if(f!=null)for(const ge of f){let je=this.field.exp(l.length-1-ge),Te=new Jr(this.field,new Int32Array([this.field.subtract(0,je),1]));A=A.multiply(Te)}let D=new Jr(this.field,w),R=this.runEuclideanAlgorithm(this.field.buildMonomial(u,1),D,u),F=R[0],W=R[1],K=this.findErrorLocations(F),oe=this.findErrorMagnitudes(W,F,K);for(let ge=0;ge<K.length;ge++){let je=l.length-1-this.field.log(K[ge]);if(je<0)throw v.getChecksumInstance();l[je]=this.field.subtract(l[je],oe[ge])}return K.length}runEuclideanAlgorithm(l,u,f){if(l.getDegree()<u.getDegree()){let K=l;l=u,u=K}let x=l,w=u,b=this.field.getZero(),A=this.field.getOne();for(;w.getDegree()>=Math.round(f/2);){let K=x,oe=b;if(x=w,b=A,x.isZero())throw v.getChecksumInstance();w=K;let ge=this.field.getZero(),je=x.getCoefficient(x.getDegree()),Te=this.field.inverse(je);for(;w.getDegree()>=x.getDegree()&&!w.isZero();){let Oe=w.getDegree()-x.getDegree(),nt=this.field.multiply(w.getCoefficient(w.getDegree()),Te);ge=ge.add(this.field.buildMonomial(Oe,nt)),w=w.subtract(x.multiplyByMonomial(Oe,nt))}A=ge.multiply(b).subtract(oe).negative()}let D=A.getCoefficient(0);if(D===0)throw v.getChecksumInstance();let R=this.field.inverse(D),F=A.multiply(R),W=w.multiply(R);return[F,W]}findErrorLocations(l){let u=l.getDegree(),f=new Int32Array(u),x=0;for(let w=1;w<this.field.getSize()&&x<u;w++)l.evaluateAt(w)===0&&(f[x]=this.field.inverse(w),x++);if(x!==u)throw v.getChecksumInstance();return f}findErrorMagnitudes(l,u,f){let x=u.getDegree(),w=new Int32Array(x);for(let R=1;R<=x;R++)w[x-R]=this.field.multiply(R,u.getCoefficient(R));let b=new Jr(this.field,w),A=f.length,D=new Int32Array(A);for(let R=0;R<A;R++){let F=this.field.inverse(f[R]),W=this.field.subtract(0,l.evaluateAt(F)),K=this.field.inverse(b.evaluateAt(F));D[R]=this.field.multiply(W,K)}return D}}class gd{constructor(l,u,f,x,w){l instanceof gd?this.constructor_2(l):this.constructor_1(l,u,f,x,w)}constructor_1(l,u,f,x,w){const b=u==null||f==null,A=x==null||w==null;if(b&&A)throw new G;b?(u=new Pe(0,x.getY()),f=new Pe(0,w.getY())):A&&(x=new Pe(l.getWidth()-1,u.getY()),w=new Pe(l.getWidth()-1,f.getY())),this.image=l,this.topLeft=u,this.bottomLeft=f,this.topRight=x,this.bottomRight=w,this.minX=Math.trunc(Math.min(u.getX(),f.getX())),this.maxX=Math.trunc(Math.max(x.getX(),w.getX())),this.minY=Math.trunc(Math.min(u.getY(),x.getY())),this.maxY=Math.trunc(Math.max(f.getY(),w.getY()))}constructor_2(l){this.image=l.image,this.topLeft=l.getTopLeft(),this.bottomLeft=l.getBottomLeft(),this.topRight=l.getTopRight(),this.bottomRight=l.getBottomRight(),this.minX=l.getMinX(),this.maxX=l.getMaxX(),this.minY=l.getMinY(),this.maxY=l.getMaxY()}static merge(l,u){return l==null?u:u==null?l:new gd(l.image,l.topLeft,l.bottomLeft,u.topRight,u.bottomRight)}addMissingRows(l,u,f){let x=this.topLeft,w=this.bottomLeft,b=this.topRight,A=this.bottomRight;if(l>0){let D=f?this.topLeft:this.topRight,R=Math.trunc(D.getY()-l);R<0&&(R=0);let F=new Pe(D.getX(),R);f?x=F:b=F}if(u>0){let D=f?this.bottomLeft:this.bottomRight,R=Math.trunc(D.getY()+u);R>=this.image.getHeight()&&(R=this.image.getHeight()-1);let F=new Pe(D.getX(),R);f?w=F:A=F}return new gd(this.image,x,w,b,A)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class CU{constructor(l,u,f,x){this.columnCount=l,this.errorCorrectionLevel=x,this.rowCountUpperPart=u,this.rowCountLowerPart=f,this.rowCount=u+f}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Fm{constructor(){this.buffer=""}static form(l,u){let f=-1;function x(b,A,D,R,F,W){if(b==="%%")return"%";if(u[++f]===void 0)return;b=R?parseInt(R.substr(1)):void 0;let K=F?parseInt(F.substr(1)):void 0,oe;switch(W){case"s":oe=u[f];break;case"c":oe=u[f][0];break;case"f":oe=parseFloat(u[f]).toFixed(b);break;case"p":oe=parseFloat(u[f]).toPrecision(b);break;case"e":oe=parseFloat(u[f]).toExponential(b);break;case"x":oe=parseInt(u[f]).toString(K||16);break;case"d":oe=parseFloat(parseInt(u[f],K||10).toPrecision(b)).toFixed(0);break}oe=typeof oe=="object"?JSON.stringify(oe):(+oe).toString(K);let ge=parseInt(D),je=D&&D[0]+""=="0"?"0":" ";for(;oe.length<ge;)oe=A!==void 0?oe+je:je+oe;return oe}let w=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return l.replace(w,x)}format(l,...u){this.buffer+=Fm.form(l,u)}toString(){return this.buffer}}class Bm{constructor(l){this.boundingBox=new gd(l),this.codewords=new Array(l.getMaxY()-l.getMinY()+1)}getCodewordNearby(l){let u=this.getCodeword(l);if(u!=null)return u;for(let f=1;f<Bm.MAX_NEARBY_DISTANCE;f++){let x=this.imageRowToCodewordIndex(l)-f;if(x>=0&&(u=this.codewords[x],u!=null)||(x=this.imageRowToCodewordIndex(l)+f,x<this.codewords.length&&(u=this.codewords[x],u!=null)))return u}return null}imageRowToCodewordIndex(l){return l-this.boundingBox.getMinY()}setCodeword(l,u){this.codewords[this.imageRowToCodewordIndex(l)]=u}getCodeword(l){return this.codewords[this.imageRowToCodewordIndex(l)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const l=new Fm;let u=0;for(const f of this.codewords){if(f==null){l.format("%3d:    |   %n",u++);continue}l.format("%3d: %3d|%3d%n",u++,f.getRowNumber(),f.getValue())}return l.toString()}}Bm.MAX_NEARBY_DISTANCE=5;class zm{constructor(){this.values=new Map}setValue(l){l=Math.trunc(l);let u=this.values.get(l);u==null&&(u=0),u++,this.values.set(l,u)}getValue(){let l=-1,u=new Array;for(const[f,x]of this.values.entries()){const w={getKey:()=>f,getValue:()=>x};w.getValue()>l?(l=w.getValue(),u=[],u.push(w.getKey())):w.getValue()===l&&u.push(w.getKey())}return Yt.toIntArray(u)}getConfidence(l){return this.values.get(l)}}class JS extends Bm{constructor(l,u){super(l),this._isLeft=u}setRowNumbers(){for(let l of this.getCodewords())l!=null&&l.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(l){let u=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(u,l);let f=this.getBoundingBox(),x=this._isLeft?f.getTopLeft():f.getTopRight(),w=this._isLeft?f.getBottomLeft():f.getBottomRight(),b=this.imageRowToCodewordIndex(Math.trunc(x.getY())),A=this.imageRowToCodewordIndex(Math.trunc(w.getY())),D=-1,R=1,F=0;for(let W=b;W<A;W++){if(u[W]==null)continue;let K=u[W],oe=K.getRowNumber()-D;if(oe===0)F++;else if(oe===1)R=Math.max(R,F),F=1,D=K.getRowNumber();else if(oe<0||K.getRowNumber()>=l.getRowCount()||oe>W)u[W]=null;else{let ge;R>2?ge=(R-2)*oe:ge=oe;let je=ge>=W;for(let Te=1;Te<=ge&&!je;Te++)je=u[W-Te]!=null;je?u[W]=null:(D=K.getRowNumber(),F=1)}}}getRowHeights(){let l=this.getBarcodeMetadata();if(l==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(l);let u=new Int32Array(l.getRowCount());for(let f of this.getCodewords())if(f!=null){let x=f.getRowNumber();if(x>=u.length)continue;u[x]++}return u}adjustIncompleteIndicatorColumnRowNumbers(l){let u=this.getBoundingBox(),f=this._isLeft?u.getTopLeft():u.getTopRight(),x=this._isLeft?u.getBottomLeft():u.getBottomRight(),w=this.imageRowToCodewordIndex(Math.trunc(f.getY())),b=this.imageRowToCodewordIndex(Math.trunc(x.getY())),A=this.getCodewords(),D=-1;for(let R=w;R<b;R++){if(A[R]==null)continue;let F=A[R];F.setRowNumberAsRowIndicatorColumn();let W=F.getRowNumber()-D;W===0||(W===1?D=F.getRowNumber():F.getRowNumber()>=l.getRowCount()?A[R]=null:D=F.getRowNumber())}}getBarcodeMetadata(){let l=this.getCodewords(),u=new zm,f=new zm,x=new zm,w=new zm;for(let A of l){if(A==null)continue;A.setRowNumberAsRowIndicatorColumn();let D=A.getValue()%30,R=A.getRowNumber();switch(this._isLeft||(R+=2),R%3){case 0:f.setValue(D*3+1);break;case 1:w.setValue(D/3),x.setValue(D%3);break;case 2:u.setValue(D+1);break}}if(u.getValue().length===0||f.getValue().length===0||x.getValue().length===0||w.getValue().length===0||u.getValue()[0]<1||f.getValue()[0]+x.getValue()[0]<Yt.MIN_ROWS_IN_BARCODE||f.getValue()[0]+x.getValue()[0]>Yt.MAX_ROWS_IN_BARCODE)return null;let b=new CU(u.getValue()[0],f.getValue()[0],x.getValue()[0],w.getValue()[0]);return this.removeIncorrectCodewords(l,b),b}removeIncorrectCodewords(l,u){for(let f=0;f<l.length;f++){let x=l[f];if(l[f]==null)continue;let w=x.getValue()%30,b=x.getRowNumber();if(b>u.getRowCount()){l[f]=null;continue}switch(this._isLeft||(b+=2),b%3){case 0:w*3+1!==u.getRowCountUpperPart()&&(l[f]=null);break;case 1:(Math.trunc(w/3)!==u.getErrorCorrectionLevel()||w%3!==u.getRowCountLowerPart())&&(l[f]=null);break;case 2:w+1!==u.getColumnCount()&&(l[f]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Vm{constructor(l,u){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=l,this.barcodeColumnCount=l.getColumnCount(),this.boundingBox=u,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let l=Yt.MAX_CODEWORDS_IN_BARCODE,u;do u=l,l=this.adjustRowNumbersAndGetCount();while(l>0&&l<u);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(l){l!=null&&l.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let l=this.adjustRowNumbersByRow();if(l===0)return 0;for(let u=1;u<this.barcodeColumnCount+1;u++){let f=this.detectionResultColumns[u].getCodewords();for(let x=0;x<f.length;x++)f[x]!=null&&(f[x].hasValidRowNumber()||this.adjustRowNumbers(u,x,f))}return l}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let l=this.detectionResultColumns[0].getCodewords(),u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let f=0;f<l.length;f++)if(l[f]!=null&&u[f]!=null&&l[f].getRowNumber()===u[f].getRowNumber())for(let x=1;x<=this.barcodeColumnCount;x++){let w=this.detectionResultColumns[x].getCodewords()[f];w!=null&&(w.setRowNumber(l[f].getRowNumber()),w.hasValidRowNumber()||(this.detectionResultColumns[x].getCodewords()[f]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let l=0,u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let f=0;f<u.length;f++){if(u[f]==null)continue;let x=u[f].getRowNumber(),w=0;for(let b=this.barcodeColumnCount+1;b>0&&w<this.ADJUST_ROW_NUMBER_SKIP;b--){let A=this.detectionResultColumns[b].getCodewords()[f];A!=null&&(w=Vm.adjustRowNumberIfValid(x,w,A),A.hasValidRowNumber()||l++)}}return l}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let l=0,u=this.detectionResultColumns[0].getCodewords();for(let f=0;f<u.length;f++){if(u[f]==null)continue;let x=u[f].getRowNumber(),w=0;for(let b=1;b<this.barcodeColumnCount+1&&w<this.ADJUST_ROW_NUMBER_SKIP;b++){let A=this.detectionResultColumns[b].getCodewords()[f];A!=null&&(w=Vm.adjustRowNumberIfValid(x,w,A),A.hasValidRowNumber()||l++)}}return l}static adjustRowNumberIfValid(l,u,f){return f==null||f.hasValidRowNumber()||(f.isValidRowNumber(l)?(f.setRowNumber(l),u=0):++u),u}adjustRowNumbers(l,u,f){if(!this.detectionResultColumns[l-1])return;let x=f[u],w=this.detectionResultColumns[l-1].getCodewords(),b=w;this.detectionResultColumns[l+1]!=null&&(b=this.detectionResultColumns[l+1].getCodewords());let A=new Array(14);A[2]=w[u],A[3]=b[u],u>0&&(A[0]=f[u-1],A[4]=w[u-1],A[5]=b[u-1]),u>1&&(A[8]=f[u-2],A[10]=w[u-2],A[11]=b[u-2]),u<f.length-1&&(A[1]=f[u+1],A[6]=w[u+1],A[7]=b[u+1]),u<f.length-2&&(A[9]=f[u+2],A[12]=w[u+2],A[13]=b[u+2]);for(let D of A)if(Vm.adjustRowNumber(x,D))return}static adjustRowNumber(l,u){return u==null?!1:u.hasValidRowNumber()&&u.getBucket()===l.getBucket()?(l.setRowNumber(u.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(l){this.boundingBox=l}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(l,u){this.detectionResultColumns[l]=u}getDetectionResultColumn(l){return this.detectionResultColumns[l]}toString(){let l=this.detectionResultColumns[0];l==null&&(l=this.detectionResultColumns[this.barcodeColumnCount+1]);let u=new Fm;for(let f=0;f<l.getCodewords().length;f++){u.format("CW %3d:",f);for(let x=0;x<this.barcodeColumnCount+2;x++){if(this.detectionResultColumns[x]==null){u.format("    |   ");continue}let w=this.detectionResultColumns[x].getCodewords()[f];if(w==null){u.format("    |   ");continue}u.format(" %3d|%3d",w.getRowNumber(),w.getValue())}u.format("%n")}return u.toString()}}class $m{constructor(l,u,f,x){this.rowNumber=$m.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(l),this.endX=Math.trunc(u),this.bucket=Math.trunc(f),this.value=Math.trunc(x)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(l){return l!==$m.BARCODE_ROW_UNKNOWN&&this.bucket===l%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(l){this.rowNumber=l}toString(){return this.rowNumber+"|"+this.value}}$m.BARCODE_ROW_UNKNOWN=-1;class $i{static initialize(){for(let l=0;l<Yt.SYMBOL_TABLE.length;l++){let u=Yt.SYMBOL_TABLE[l],f=u&1;for(let x=0;x<Yt.BARS_IN_MODULE;x++){let w=0;for(;(u&1)===f;)w+=1,u>>=1;f=u&1,$i.RATIOS_TABLE[l]||($i.RATIOS_TABLE[l]=new Array(Yt.BARS_IN_MODULE)),$i.RATIOS_TABLE[l][Yt.BARS_IN_MODULE-x-1]=Math.fround(w/Yt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(l){let u=$i.getDecodedCodewordValue($i.sampleBitCounts(l));return u!==-1?u:$i.getClosestDecodedValue(l)}static sampleBitCounts(l){let u=be.sum(l),f=new Int32Array(Yt.BARS_IN_MODULE),x=0,w=0;for(let b=0;b<Yt.MODULES_IN_CODEWORD;b++){let A=u/(2*Yt.MODULES_IN_CODEWORD)+b*u/Yt.MODULES_IN_CODEWORD;w+l[x]<=A&&(w+=l[x],x++),f[x]++}return f}static getDecodedCodewordValue(l){let u=$i.getBitValue(l);return Yt.getCodeword(u)===-1?-1:u}static getBitValue(l){let u=0;for(let f=0;f<l.length;f++)for(let x=0;x<l[f];x++)u=u<<1|(f%2===0?1:0);return Math.trunc(u)}static getClosestDecodedValue(l){let u=be.sum(l),f=new Array(Yt.BARS_IN_MODULE);if(u>1)for(let b=0;b<f.length;b++)f[b]=Math.fround(l[b]/u);let x=ze.MAX_VALUE,w=-1;this.bSymbolTableReady||$i.initialize();for(let b=0;b<$i.RATIOS_TABLE.length;b++){let A=0,D=$i.RATIOS_TABLE[b];for(let R=0;R<Yt.BARS_IN_MODULE;R++){let F=Math.fround(D[R]-f[R]);if(A+=Math.fround(F*F),A>=x)break}A<x&&(x=A,w=Yt.SYMBOL_TABLE[b])}return w}}$i.bSymbolTableReady=!1,$i.RATIOS_TABLE=new Array(Yt.SYMBOL_TABLE.length).map(U=>new Array(Yt.BARS_IN_MODULE));class eA{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(l){this.segmentIndex=l}getFileId(){return this.fileId}setFileId(l){this.fileId=l}getOptionalData(){return this.optionalData}setOptionalData(l){this.optionalData=l}isLastSegment(){return this.lastSegment}setLastSegment(l){this.lastSegment=l}getSegmentCount(){return this.segmentCount}setSegmentCount(l){this.segmentCount=l}getSender(){return this.sender||null}setSender(l){this.sender=l}getAddressee(){return this.addressee||null}setAddressee(l){this.addressee=l}getFileName(){return this.fileName}setFileName(l){this.fileName=l}getFileSize(){return this.fileSize}setFileSize(l){this.fileSize=l}getChecksum(){return this.checksum}setChecksum(l){this.checksum=l}getTimestamp(){return this.timestamp}setTimestamp(l){this.timestamp=l}}class tA{static parseLong(l,u=void 0){return parseInt(l,u)}}class nA extends h{}nA.kind="NullPointerException";class SU{writeBytes(l){this.writeBytesOffset(l,0,l.length)}writeBytesOffset(l,u,f){if(l==null)throw new nA;if(u<0||u>l.length||f<0||u+f>l.length||u+f<0)throw new E;if(f===0)return;for(let x=0;x<f;x++)this.write(l[u+x])}flush(){}close(){}}class AU extends h{}class EU extends SU{constructor(l=32){if(super(),this.count=0,l<0)throw new m("Negative initial size: "+l);this.buf=new Uint8Array(l)}ensureCapacity(l){l-this.buf.length>0&&this.grow(l)}grow(l){let f=this.buf.length<<1;if(f-l<0&&(f=l),f<0){if(l<0)throw new AU;f=C.MAX_VALUE}this.buf=S.copyOfUint8Array(this.buf,f)}write(l){this.ensureCapacity(this.count+1),this.buf[this.count]=l,this.count+=1}writeBytesOffset(l,u,f){if(u<0||u>l.length||f<0||u+f-l.length>0)throw new E;this.ensureCapacity(this.count+f),N.arraycopy(l,u,this.buf,this.count,f),this.count+=f}writeTo(l){l.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return S.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(l){return l?typeof l=="string"?this.toString_string(l):this.toString_number(l):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(l){return new String(this.buf).toString()}toString_number(l){return new String(this.buf).toString()}close(){}}var xs;(function(U){U[U.ALPHA=0]="ALPHA",U[U.LOWER=1]="LOWER",U[U.MIXED=2]="MIXED",U[U.PUNCT=3]="PUNCT",U[U.ALPHA_SHIFT=4]="ALPHA_SHIFT",U[U.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(xs||(xs={}));function sA(){if(typeof window<"u")return window.BigInt||null;if(typeof Hm<"u")return Hm.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Bg;function Xl(U){if(typeof Bg>"u"&&(Bg=sA()),Bg===null)throw new Error("BigInt is not supported!");return Bg(U)}function _U(){let U=[];U[0]=Xl(1);let l=Xl(900);U[1]=l;for(let u=2;u<16;u++)U[u]=U[u-1]*l;return U}class Re{static decode(l,u){let f=new Y(""),x=k.ISO8859_1;f.enableDecoding(x);let w=1,b=l[w++],A=new eA;for(;w<l[0];){switch(b){case Re.TEXT_COMPACTION_MODE_LATCH:w=Re.textCompaction(l,w,f);break;case Re.BYTE_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:w=Re.byteCompaction(b,l,x,w,f);break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[w++]);break;case Re.NUMERIC_COMPACTION_MODE_LATCH:w=Re.numericCompaction(l,w,f);break;case Re.ECI_CHARSET:k.getCharacterSetECIByValue(l[w++]);break;case Re.ECI_GENERAL_PURPOSE:w+=2;break;case Re.ECI_USER_DEFINED:w++;break;case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:w=Re.decodeMacroBlock(l,w,A);break;case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:throw new T;default:w--,w=Re.textCompaction(l,w,f);break}if(w<l.length)b=l[w++];else throw T.getFormatInstance()}if(f.length()===0)throw T.getFormatInstance();let D=new Me(null,f.toString(),null,u);return D.setOther(A),D}static decodeMacroBlock(l,u,f){if(u+Re.NUMBER_OF_SEQUENCE_CODEWORDS>l[0])throw T.getFormatInstance();let x=new Int32Array(Re.NUMBER_OF_SEQUENCE_CODEWORDS);for(let A=0;A<Re.NUMBER_OF_SEQUENCE_CODEWORDS;A++,u++)x[A]=l[u];f.setSegmentIndex(C.parseInt(Re.decodeBase900toBase10(x,Re.NUMBER_OF_SEQUENCE_CODEWORDS)));let w=new Y;u=Re.textCompaction(l,u,w),f.setFileId(w.toString());let b=-1;for(l[u]===Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(b=u+1);u<l[0];)switch(l[u]){case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(u++,l[u]){case Re.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let A=new Y;u=Re.textCompaction(l,u+1,A),f.setFileName(A.toString());break;case Re.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let D=new Y;u=Re.textCompaction(l,u+1,D),f.setSender(D.toString());break;case Re.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let R=new Y;u=Re.textCompaction(l,u+1,R),f.setAddressee(R.toString());break;case Re.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let F=new Y;u=Re.numericCompaction(l,u+1,F),f.setSegmentCount(C.parseInt(F.toString()));break;case Re.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let W=new Y;u=Re.numericCompaction(l,u+1,W),f.setTimestamp(tA.parseLong(W.toString()));break;case Re.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let K=new Y;u=Re.numericCompaction(l,u+1,K),f.setChecksum(C.parseInt(K.toString()));break;case Re.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let oe=new Y;u=Re.numericCompaction(l,u+1,oe),f.setFileSize(tA.parseLong(oe.toString()));break;default:throw T.getFormatInstance()}break;case Re.MACRO_PDF417_TERMINATOR:u++,f.setLastSegment(!0);break;default:throw T.getFormatInstance()}if(b!==-1){let A=u-b;f.isLastSegment()&&A--,f.setOptionalData(S.copyOfRange(l,b,b+A))}return u}static textCompaction(l,u,f){let x=new Int32Array((l[0]-u)*2),w=new Int32Array((l[0]-u)*2),b=0,A=!1;for(;u<l[0]&&!A;){let D=l[u++];if(D<Re.TEXT_COMPACTION_MODE_LATCH)x[b]=D/30,x[b+1]=D%30,b+=2;else switch(D){case Re.TEXT_COMPACTION_MODE_LATCH:x[b++]=Re.TEXT_COMPACTION_MODE_LATCH;break;case Re.BYTE_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:case Re.NUMERIC_COMPACTION_MODE_LATCH:case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:u--,A=!0;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x[b]=Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,D=l[u++],w[b]=D,b++;break}}return Re.decodeTextCompaction(x,w,b,f),u}static decodeTextCompaction(l,u,f,x){let w=xs.ALPHA,b=xs.ALPHA,A=0;for(;A<f;){let D=l[A],R="";switch(w){case xs.ALPHA:if(D<26)R=String.fromCharCode(65+D);else switch(D){case 26:R=" ";break;case Re.LL:w=xs.LOWER;break;case Re.ML:w=xs.MIXED;break;case Re.PS:b=w,w=xs.PUNCT_SHIFT;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(u[A]);break;case Re.TEXT_COMPACTION_MODE_LATCH:w=xs.ALPHA;break}break;case xs.LOWER:if(D<26)R=String.fromCharCode(97+D);else switch(D){case 26:R=" ";break;case Re.AS:b=w,w=xs.ALPHA_SHIFT;break;case Re.ML:w=xs.MIXED;break;case Re.PS:b=w,w=xs.PUNCT_SHIFT;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(u[A]);break;case Re.TEXT_COMPACTION_MODE_LATCH:w=xs.ALPHA;break}break;case xs.MIXED:if(D<Re.PL)R=Re.MIXED_CHARS[D];else switch(D){case Re.PL:w=xs.PUNCT;break;case 26:R=" ";break;case Re.LL:w=xs.LOWER;break;case Re.AL:w=xs.ALPHA;break;case Re.PS:b=w,w=xs.PUNCT_SHIFT;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(u[A]);break;case Re.TEXT_COMPACTION_MODE_LATCH:w=xs.ALPHA;break}break;case xs.PUNCT:if(D<Re.PAL)R=Re.PUNCT_CHARS[D];else switch(D){case Re.PAL:w=xs.ALPHA;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(u[A]);break;case Re.TEXT_COMPACTION_MODE_LATCH:w=xs.ALPHA;break}break;case xs.ALPHA_SHIFT:if(w=b,D<26)R=String.fromCharCode(65+D);else switch(D){case 26:R=" ";break;case Re.TEXT_COMPACTION_MODE_LATCH:w=xs.ALPHA;break}break;case xs.PUNCT_SHIFT:if(w=b,D<Re.PAL)R=Re.PUNCT_CHARS[D];else switch(D){case Re.PAL:w=xs.ALPHA;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(u[A]);break;case Re.TEXT_COMPACTION_MODE_LATCH:w=xs.ALPHA;break}break}R!==""&&x.append(R),A++}}static byteCompaction(l,u,f,x,w){let b=new EU,A=0,D=0,R=!1;switch(l){case Re.BYTE_COMPACTION_MODE_LATCH:let F=new Int32Array(6),W=u[x++];for(;x<u[0]&&!R;)switch(F[A++]=W,D=900*D+W,W=u[x++],W){case Re.TEXT_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH:case Re.NUMERIC_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:x--,R=!0;break;default:if(A%5===0&&A>0){for(let K=0;K<6;++K)b.write(Number(Xl(D)>>Xl(8*(5-K))));D=0,A=0}break}x===u[0]&&W<Re.TEXT_COMPACTION_MODE_LATCH&&(F[A++]=W);for(let K=0;K<A;K++)b.write(F[K]);break;case Re.BYTE_COMPACTION_MODE_LATCH_6:for(;x<u[0]&&!R;){let K=u[x++];if(K<Re.TEXT_COMPACTION_MODE_LATCH)A++,D=900*D+K;else switch(K){case Re.TEXT_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH:case Re.NUMERIC_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:x--,R=!0;break}if(A%5===0&&A>0){for(let oe=0;oe<6;++oe)b.write(Number(Xl(D)>>Xl(8*(5-oe))));D=0,A=0}}break}return w.append(V.decode(b.toByteArray(),f)),x}static numericCompaction(l,u,f){let x=0,w=!1,b=new Int32Array(Re.MAX_NUMERIC_CODEWORDS);for(;u<l[0]&&!w;){let A=l[u++];if(u===l[0]&&(w=!0),A<Re.TEXT_COMPACTION_MODE_LATCH)b[x]=A,x++;else switch(A){case Re.TEXT_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:u--,w=!0;break}(x%Re.MAX_NUMERIC_CODEWORDS===0||A===Re.NUMERIC_COMPACTION_MODE_LATCH||w)&&x>0&&(f.append(Re.decodeBase900toBase10(b,x)),x=0)}return u}static decodeBase900toBase10(l,u){let f=Xl(0);for(let w=0;w<u;w++)f+=Re.EXP900[u-w-1]*Xl(l[w]);let x=f.toString();if(x.charAt(0)!=="1")throw new T;return x.substring(1)}}Re.TEXT_COMPACTION_MODE_LATCH=900,Re.BYTE_COMPACTION_MODE_LATCH=901,Re.NUMERIC_COMPACTION_MODE_LATCH=902,Re.BYTE_COMPACTION_MODE_LATCH_6=924,Re.ECI_USER_DEFINED=925,Re.ECI_GENERAL_PURPOSE=926,Re.ECI_CHARSET=927,Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Re.MACRO_PDF417_TERMINATOR=922,Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Re.MAX_NUMERIC_CODEWORDS=15,Re.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Re.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Re.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Re.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Re.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Re.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Re.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Re.PL=25,Re.LL=27,Re.AS=27,Re.ML=28,Re.AL=28,Re.PS=29,Re.PAL=29,Re.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Re.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Re.EXP900=sA()?_U():[],Re.NUMBER_OF_SEQUENCE_CODEWORDS=2;class In{constructor(){}static decode(l,u,f,x,w,b,A){let D=new gd(l,u,f,x,w),R=null,F=null,W;for(let ge=!0;;ge=!1){if(u!=null&&(R=In.getRowIndicatorColumn(l,D,u,!0,b,A)),x!=null&&(F=In.getRowIndicatorColumn(l,D,x,!1,b,A)),W=In.merge(R,F),W==null)throw G.getNotFoundInstance();let je=W.getBoundingBox();if(ge&&je!=null&&(je.getMinY()<D.getMinY()||je.getMaxY()>D.getMaxY()))D=je;else break}W.setBoundingBox(D);let K=W.getBarcodeColumnCount()+1;W.setDetectionResultColumn(0,R),W.setDetectionResultColumn(K,F);let oe=R!=null;for(let ge=1;ge<=K;ge++){let je=oe?ge:K-ge;if(W.getDetectionResultColumn(je)!==void 0)continue;let Te;je===0||je===K?Te=new JS(D,je===0):Te=new Bm(D),W.setDetectionResultColumn(je,Te);let Oe=-1,nt=Oe;for(let at=D.getMinY();at<=D.getMaxY();at++){if(Oe=In.getStartColumn(W,je,at,oe),Oe<0||Oe>D.getMaxX()){if(nt===-1)continue;Oe=nt}let et=In.detectCodeword(l,D.getMinX(),D.getMaxX(),oe,Oe,at,b,A);et!=null&&(Te.setCodeword(at,et),nt=Oe,b=Math.min(b,et.getWidth()),A=Math.max(A,et.getWidth()))}}return In.createDecoderResult(W)}static merge(l,u){if(l==null&&u==null)return null;let f=In.getBarcodeMetadata(l,u);if(f==null)return null;let x=gd.merge(In.adjustBoundingBox(l),In.adjustBoundingBox(u));return new Vm(f,x)}static adjustBoundingBox(l){if(l==null)return null;let u=l.getRowHeights();if(u==null)return null;let f=In.getMax(u),x=0;for(let A of u)if(x+=f-A,A>0)break;let w=l.getCodewords();for(let A=0;x>0&&w[A]==null;A++)x--;let b=0;for(let A=u.length-1;A>=0&&(b+=f-u[A],!(u[A]>0));A--);for(let A=w.length-1;b>0&&w[A]==null;A--)b--;return l.getBoundingBox().addMissingRows(x,b,l.isLeft())}static getMax(l){let u=-1;for(let f of l)u=Math.max(u,f);return u}static getBarcodeMetadata(l,u){let f;if(l==null||(f=l.getBarcodeMetadata())==null)return u==null?null:u.getBarcodeMetadata();let x;return u==null||(x=u.getBarcodeMetadata())==null?f:f.getColumnCount()!==x.getColumnCount()&&f.getErrorCorrectionLevel()!==x.getErrorCorrectionLevel()&&f.getRowCount()!==x.getRowCount()?null:f}static getRowIndicatorColumn(l,u,f,x,w,b){let A=new JS(u,x);for(let D=0;D<2;D++){let R=D===0?1:-1,F=Math.trunc(Math.trunc(f.getX()));for(let W=Math.trunc(Math.trunc(f.getY()));W<=u.getMaxY()&&W>=u.getMinY();W+=R){let K=In.detectCodeword(l,0,l.getWidth(),x,F,W,w,b);K!=null&&(A.setCodeword(W,K),x?F=K.getStartX():F=K.getEndX())}}return A}static adjustCodewordCount(l,u){let f=u[0][1],x=f.getValue(),w=l.getBarcodeColumnCount()*l.getBarcodeRowCount()-In.getNumberOfECCodeWords(l.getBarcodeECLevel());if(x.length===0){if(w<1||w>Yt.MAX_CODEWORDS_IN_BARCODE)throw G.getNotFoundInstance();f.setValue(w)}else x[0]!==w&&f.setValue(w)}static createDecoderResult(l){let u=In.createBarcodeMatrix(l);In.adjustCodewordCount(l,u);let f=new Array,x=new Int32Array(l.getBarcodeRowCount()*l.getBarcodeColumnCount()),w=[],b=new Array;for(let D=0;D<l.getBarcodeRowCount();D++)for(let R=0;R<l.getBarcodeColumnCount();R++){let F=u[D][R+1].getValue(),W=D*l.getBarcodeColumnCount()+R;F.length===0?f.push(W):F.length===1?x[W]=F[0]:(b.push(W),w.push(F))}let A=new Array(w.length);for(let D=0;D<A.length;D++)A[D]=w[D];return In.createDecoderResultFromAmbiguousValues(l.getBarcodeECLevel(),x,Yt.toIntArray(f),Yt.toIntArray(b),A)}static createDecoderResultFromAmbiguousValues(l,u,f,x,w){let b=new Int32Array(x.length),A=100;for(;A-- >0;){for(let D=0;D<b.length;D++)u[x[D]]=w[D][b[D]];try{return In.decodeCodewords(u,l,f)}catch(D){if(!(D instanceof v))throw D}if(b.length===0)throw v.getChecksumInstance();for(let D=0;D<b.length;D++)if(b[D]<w[D].length-1){b[D]++;break}else if(b[D]=0,D===b.length-1)throw v.getChecksumInstance()}throw v.getChecksumInstance()}static createBarcodeMatrix(l){let u=Array.from({length:l.getBarcodeRowCount()},()=>new Array(l.getBarcodeColumnCount()+2));for(let x=0;x<u.length;x++)for(let w=0;w<u[x].length;w++)u[x][w]=new zm;let f=0;for(let x of l.getDetectionResultColumns()){if(x!=null){for(let w of x.getCodewords())if(w!=null){let b=w.getRowNumber();if(b>=0){if(b>=u.length)continue;u[b][f].setValue(w.getValue())}}}f++}return u}static isValidBarcodeColumn(l,u){return u>=0&&u<=l.getBarcodeColumnCount()+1}static getStartColumn(l,u,f,x){let w=x?1:-1,b=null;if(In.isValidBarcodeColumn(l,u-w)&&(b=l.getDetectionResultColumn(u-w).getCodeword(f)),b!=null)return x?b.getEndX():b.getStartX();if(b=l.getDetectionResultColumn(u).getCodewordNearby(f),b!=null)return x?b.getStartX():b.getEndX();if(In.isValidBarcodeColumn(l,u-w)&&(b=l.getDetectionResultColumn(u-w).getCodewordNearby(f)),b!=null)return x?b.getEndX():b.getStartX();let A=0;for(;In.isValidBarcodeColumn(l,u-w);){u-=w;for(let D of l.getDetectionResultColumn(u).getCodewords())if(D!=null)return(x?D.getEndX():D.getStartX())+w*A*(D.getEndX()-D.getStartX());A++}return x?l.getBoundingBox().getMinX():l.getBoundingBox().getMaxX()}static detectCodeword(l,u,f,x,w,b,A,D){w=In.adjustCodewordStartColumn(l,u,f,x,w,b);let R=In.getModuleBitCount(l,u,f,x,w,b);if(R==null)return null;let F,W=be.sum(R);if(x)F=w+W;else{for(let ge=0;ge<R.length/2;ge++){let je=R[ge];R[ge]=R[R.length-1-ge],R[R.length-1-ge]=je}F=w,w=F-W}if(!In.checkCodewordSkew(W,A,D))return null;let K=$i.getDecodedValue(R),oe=Yt.getCodeword(K);return oe===-1?null:new $m(w,F,In.getCodewordBucketNumber(K),oe)}static getModuleBitCount(l,u,f,x,w,b){let A=w,D=new Int32Array(8),R=0,F=x?1:-1,W=x;for(;(x?A<f:A>=u)&&R<D.length;)l.get(A,b)===W?(D[R]++,A+=F):(R++,W=!W);return R===D.length||A===(x?f:u)&&R===D.length-1?D:null}static getNumberOfECCodeWords(l){return 2<<l}static adjustCodewordStartColumn(l,u,f,x,w,b){let A=w,D=x?-1:1;for(let R=0;R<2;R++){for(;(x?A>=u:A<f)&&x===l.get(A,b);){if(Math.abs(w-A)>In.CODEWORD_SKEW_SIZE)return w;A+=D}D=-D,x=!x}return A}static checkCodewordSkew(l,u,f){return u-In.CODEWORD_SKEW_SIZE<=l&&l<=f+In.CODEWORD_SKEW_SIZE}static decodeCodewords(l,u,f){if(l.length===0)throw T.getFormatInstance();let x=1<<u+1,w=In.correctErrors(l,f,x);In.verifyCodewordCount(l,x);let b=Re.decode(l,""+u);return b.setErrorsCorrected(w),b.setErasures(f.length),b}static correctErrors(l,u,f){if(u!=null&&u.length>f/2+In.MAX_ERRORS||f<0||f>In.MAX_EC_CODEWORDS)throw v.getChecksumInstance();return In.errorCorrection.decode(l,f,u)}static verifyCodewordCount(l,u){if(l.length<4)throw T.getFormatInstance();let f=l[0];if(f>l.length)throw T.getFormatInstance();if(f===0)if(u<l.length)l[0]=l.length-u;else throw T.getFormatInstance()}static getBitCountForCodeword(l){let u=new Int32Array(8),f=0,x=u.length-1;for(;!((l&1)!==f&&(f=l&1,x--,x<0));)u[x]++,l>>=1;return u}static getCodewordBucketNumber(l){return l instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(l):this.getCodewordBucketNumber_number(l)}static getCodewordBucketNumber_number(l){return In.getCodewordBucketNumber(In.getBitCountForCodeword(l))}static getCodewordBucketNumber_Int32Array(l){return(l[0]-l[2]+l[4]-l[6]+9)%9}static toString(l){let u=new Fm;for(let f=0;f<l.length;f++){u.format("Row %2d: ",f);for(let x=0;x<l[f].length;x++){let w=l[f][x];w.getValue().length===0?u.format("        ",null):u.format("%4d(%2d)",w.getValue()[0],w.getConfidence(w.getValue()[0]))}u.format("%n")}return u.toString()}}In.CODEWORD_SKEW_SIZE=2,In.MAX_ERRORS=3,In.MAX_EC_CODEWORDS=512,In.errorCorrection=new XS;class ei{decode(l,u=null){let f=ei.decode(l,u,!1);if(f==null||f.length===0||f[0]==null)throw G.getNotFoundInstance();return f[0]}decodeMultiple(l,u=null){try{return ei.decode(l,u,!0)}catch(f){throw f instanceof T||f instanceof v?G.getNotFoundInstance():f}}static decode(l,u,f){const x=new Array,w=Cn.detectMultiple(l,u,f);for(const b of w.getPoints()){const A=In.decode(w.getBits(),b[4],b[5],b[6],b[7],ei.getMinCodewordWidth(b),ei.getMaxCodewordWidth(b)),D=new te(A.getText(),A.getRawBytes(),void 0,b,ee.PDF_417);D.putMetadata(pe.ERROR_CORRECTION_LEVEL,A.getECLevel());const R=A.getOther();R!=null&&D.putMetadata(pe.PDF417_EXTRA_METADATA,R),x.push(D)}return x.map(b=>b)}static getMaxWidth(l,u){return l==null||u==null?0:Math.trunc(Math.abs(l.getX()-u.getX()))}static getMinWidth(l,u){return l==null||u==null?C.MAX_VALUE:Math.trunc(Math.abs(l.getX()-u.getX()))}static getMaxCodewordWidth(l){return Math.floor(Math.max(Math.max(ei.getMaxWidth(l[0],l[4]),ei.getMaxWidth(l[6],l[2])*Yt.MODULES_IN_CODEWORD/Yt.MODULES_IN_STOP_PATTERN),Math.max(ei.getMaxWidth(l[1],l[5]),ei.getMaxWidth(l[7],l[3])*Yt.MODULES_IN_CODEWORD/Yt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(l){return Math.floor(Math.min(Math.min(ei.getMinWidth(l[0],l[4]),ei.getMinWidth(l[6],l[2])*Yt.MODULES_IN_CODEWORD/Yt.MODULES_IN_STOP_PATTERN),Math.min(ei.getMinWidth(l[1],l[5]),ei.getMinWidth(l[7],l[3])*Yt.MODULES_IN_CODEWORD/Yt.MODULES_IN_STOP_PATTERN)))}reset(){}}class zg extends h{}zg.kind="ReaderException";class rA{constructor(l,u){this.verbose=l===!0,u&&this.setHints(u)}decode(l,u){return u&&this.setHints(u),this.decodeInternal(l)}decodeWithState(l){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(l)}setHints(l){this.hints=l;const u=!r(l)&&l.get(L.TRY_HARDER)===!0,f=r(l)?null:l.get(L.POSSIBLE_FORMATS),x=new Array;if(!r(f)){const w=f.some(b=>b===ee.UPC_A||b===ee.UPC_E||b===ee.EAN_13||b===ee.EAN_8||b===ee.CODABAR||b===ee.CODE_39||b===ee.CODE_93||b===ee.CODE_128||b===ee.ITF||b===ee.RSS_14||b===ee.RSS_EXPANDED);w&&!u&&x.push(new ml(l,this.verbose)),f.includes(ee.QR_CODE)&&x.push(new Ql),f.includes(ee.DATA_MATRIX)&&x.push(new Nn),f.includes(ee.AZTEC)&&x.push(new nn),f.includes(ee.PDF_417)&&x.push(new ei),w&&u&&x.push(new ml(l,this.verbose))}x.length===0&&(u||x.push(new ml(l,this.verbose)),x.push(new Ql),x.push(new Nn),x.push(new nn),x.push(new ei),u&&x.push(new ml(l,this.verbose))),this.readers=x}reset(){if(this.readers!==null)for(const l of this.readers)l.reset()}decodeInternal(l){if(this.readers===null)throw new zg("No readers where selected, nothing can be read.");for(const u of this.readers)try{return u.decode(l,this.hints)}catch(f){if(f instanceof zg)continue}throw new G("No MultiFormat Readers were able to detect the code.")}}class IU extends xe{constructor(l=null,u=500){const f=new rA;f.setHints(l),super(f,u)}decodeBitmap(l){return this.reader.decodeWithState(l)}}class TU extends xe{constructor(l=500){super(new ei,l)}}class MU extends xe{constructor(l=500){super(new Ql,l)}}var a1;(function(U){U[U.ERROR_CORRECTION=0]="ERROR_CORRECTION",U[U.CHARACTER_SET=1]="CHARACTER_SET",U[U.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",U[U.MIN_SIZE=3]="MIN_SIZE",U[U.MAX_SIZE=4]="MAX_SIZE",U[U.MARGIN=5]="MARGIN",U[U.PDF417_COMPACT=6]="PDF417_COMPACT",U[U.PDF417_COMPACTION=7]="PDF417_COMPACTION",U[U.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",U[U.AZTEC_LAYERS=9]="AZTEC_LAYERS",U[U.QR_VERSION=10]="QR_VERSION"})(a1||(a1={}));var _r=a1;class o1{constructor(l){this.field=l,this.cachedGenerators=[],this.cachedGenerators.push(new We(l,Int32Array.from([1])))}buildGenerator(l){const u=this.cachedGenerators;if(l>=u.length){let f=u[u.length-1];const x=this.field;for(let w=u.length;w<=l;w++){const b=f.multiply(new We(x,Int32Array.from([1,x.exp(w-1+x.getGeneratorBase())])));u.push(b),f=b}}return u[l]}encode(l,u){if(u===0)throw new m("No error correction bytes");const f=l.length-u;if(f<=0)throw new m("No data bytes provided");const x=this.buildGenerator(u),w=new Int32Array(f);N.arraycopy(l,0,w,0,f);let b=new We(this.field,w);b=b.multiplyByMonomial(u,1);const D=b.divide(x)[1].getCoefficients(),R=u-D.length;for(let F=0;F<R;F++)l[f+F]=0;N.arraycopy(D,0,l,f+R,D.length)}}class sr{constructor(){}static applyMaskPenaltyRule1(l){return sr.applyMaskPenaltyRule1Internal(l,!0)+sr.applyMaskPenaltyRule1Internal(l,!1)}static applyMaskPenaltyRule2(l){let u=0;const f=l.getArray(),x=l.getWidth(),w=l.getHeight();for(let b=0;b<w-1;b++){const A=f[b];for(let D=0;D<x-1;D++){const R=A[D];R===A[D+1]&&R===f[b+1][D]&&R===f[b+1][D+1]&&u++}}return sr.N2*u}static applyMaskPenaltyRule3(l){let u=0;const f=l.getArray(),x=l.getWidth(),w=l.getHeight();for(let b=0;b<w;b++)for(let A=0;A<x;A++){const D=f[b];A+6<x&&D[A]===1&&D[A+1]===0&&D[A+2]===1&&D[A+3]===1&&D[A+4]===1&&D[A+5]===0&&D[A+6]===1&&(sr.isWhiteHorizontal(D,A-4,A)||sr.isWhiteHorizontal(D,A+7,A+11))&&u++,b+6<w&&f[b][A]===1&&f[b+1][A]===0&&f[b+2][A]===1&&f[b+3][A]===1&&f[b+4][A]===1&&f[b+5][A]===0&&f[b+6][A]===1&&(sr.isWhiteVertical(f,A,b-4,b)||sr.isWhiteVertical(f,A,b+7,b+11))&&u++}return u*sr.N3}static isWhiteHorizontal(l,u,f){u=Math.max(u,0),f=Math.min(f,l.length);for(let x=u;x<f;x++)if(l[x]===1)return!1;return!0}static isWhiteVertical(l,u,f,x){f=Math.max(f,0),x=Math.min(x,l.length);for(let w=f;w<x;w++)if(l[w][u]===1)return!1;return!0}static applyMaskPenaltyRule4(l){let u=0;const f=l.getArray(),x=l.getWidth(),w=l.getHeight();for(let D=0;D<w;D++){const R=f[D];for(let F=0;F<x;F++)R[F]===1&&u++}const b=l.getHeight()*l.getWidth();return Math.floor(Math.abs(u*2-b)*10/b)*sr.N4}static getDataMaskBit(l,u,f){let x,w;switch(l){case 0:x=f+u&1;break;case 1:x=f&1;break;case 2:x=u%3;break;case 3:x=(f+u)%3;break;case 4:x=Math.floor(f/2)+Math.floor(u/3)&1;break;case 5:w=f*u,x=(w&1)+w%3;break;case 6:w=f*u,x=(w&1)+w%3&1;break;case 7:w=f*u,x=w%3+(f+u&1)&1;break;default:throw new m("Invalid mask pattern: "+l)}return x===0}static applyMaskPenaltyRule1Internal(l,u){let f=0;const x=u?l.getHeight():l.getWidth(),w=u?l.getWidth():l.getHeight(),b=l.getArray();for(let A=0;A<x;A++){let D=0,R=-1;for(let F=0;F<w;F++){const W=u?b[A][F]:b[F][A];W===R?D++:(D>=5&&(f+=sr.N1+(D-5)),D=1,R=W)}D>=5&&(f+=sr.N1+(D-5))}return f}}sr.N1=3,sr.N2=3,sr.N3=40,sr.N4=10;class Vg{constructor(l,u){this.width=l,this.height=u;const f=new Array(u);for(let x=0;x!==u;x++)f[x]=new Uint8Array(l);this.bytes=f}getHeight(){return this.height}getWidth(){return this.width}get(l,u){return this.bytes[u][l]}getArray(){return this.bytes}setNumber(l,u,f){this.bytes[u][l]=f}setBoolean(l,u,f){this.bytes[u][l]=f?1:0}clear(l){for(const u of this.bytes)S.fill(u,l)}equals(l){if(!(l instanceof Vg))return!1;const u=l;if(this.width!==u.width||this.height!==u.height)return!1;for(let f=0,x=this.height;f<x;++f){const w=this.bytes[f],b=u.bytes[f];for(let A=0,D=this.width;A<D;++A)if(w[A]!==b[A])return!1}return!0}toString(){const l=new Y;for(let u=0,f=this.height;u<f;++u){const x=this.bytes[u];for(let w=0,b=this.width;w<b;++w)switch(x[w]){case 0:l.append(" 0");break;case 1:l.append(" 1");break;default:l.append("  ");break}l.append(`
`)}return l.toString()}}class xd{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const l=new Y;return l.append(`<<
`),l.append(" mode: "),l.append(this.mode?this.mode.toString():"null"),l.append(`
 ecLevel: `),l.append(this.ecLevel?this.ecLevel.toString():"null"),l.append(`
 version: `),l.append(this.version?this.version.toString():"null"),l.append(`
 maskPattern: `),l.append(this.maskPattern.toString()),this.matrix?(l.append(`
 matrix:
`),l.append(this.matrix.toString())):l.append(`
 matrix: null
`),l.append(`>>
`),l.toString()}setMode(l){this.mode=l}setECLevel(l){this.ecLevel=l}setVersion(l){this.version=l}setMaskPattern(l){this.maskPattern=l}setMatrix(l){this.matrix=l}static isValidMaskPattern(l){return l>=0&&l<xd.NUM_MASK_PATTERNS}}xd.NUM_MASK_PATTERNS=8;class bs extends h{}bs.kind="WriterException";class Wt{constructor(){}static clearMatrix(l){l.clear(255)}static buildMatrix(l,u,f,x,w){Wt.clearMatrix(w),Wt.embedBasicPatterns(f,w),Wt.embedTypeInfo(u,x,w),Wt.maybeEmbedVersionInfo(f,w),Wt.embedDataBits(l,x,w)}static embedBasicPatterns(l,u){Wt.embedPositionDetectionPatternsAndSeparators(u),Wt.embedDarkDotAtLeftBottomCorner(u),Wt.maybeEmbedPositionAdjustmentPatterns(l,u),Wt.embedTimingPatterns(u)}static embedTypeInfo(l,u,f){const x=new I;Wt.makeTypeInfoBits(l,u,x);for(let w=0,b=x.getSize();w<b;++w){const A=x.get(x.getSize()-1-w),D=Wt.TYPE_INFO_COORDINATES[w],R=D[0],F=D[1];if(f.setBoolean(R,F,A),w<8){const W=f.getWidth()-w-1;f.setBoolean(W,8,A)}else{const K=f.getHeight()-7+(w-8);f.setBoolean(8,K,A)}}}static maybeEmbedVersionInfo(l,u){if(l.getVersionNumber()<7)return;const f=new I;Wt.makeVersionInfoBits(l,f);let x=6*3-1;for(let w=0;w<6;++w)for(let b=0;b<3;++b){const A=f.get(x);x--,u.setBoolean(w,u.getHeight()-11+b,A),u.setBoolean(u.getHeight()-11+b,w,A)}}static embedDataBits(l,u,f){let x=0,w=-1,b=f.getWidth()-1,A=f.getHeight()-1;for(;b>0;){for(b===6&&(b-=1);A>=0&&A<f.getHeight();){for(let D=0;D<2;++D){const R=b-D;if(!Wt.isEmpty(f.get(R,A)))continue;let F;x<l.getSize()?(F=l.get(x),++x):F=!1,u!==255&&sr.getDataMaskBit(u,R,A)&&(F=!F),f.setBoolean(R,A,F)}A+=w}w=-w,A+=w,b-=2}if(x!==l.getSize())throw new bs("Not all bits consumed: "+x+"/"+l.getSize())}static findMSBSet(l){return 32-C.numberOfLeadingZeros(l)}static calculateBCHCode(l,u){if(u===0)throw new m("0 polynomial");const f=Wt.findMSBSet(u);for(l<<=f-1;Wt.findMSBSet(l)>=f;)l^=u<<Wt.findMSBSet(l)-f;return l}static makeTypeInfoBits(l,u,f){if(!xd.isValidMaskPattern(u))throw new bs("Invalid mask pattern");const x=l.getBits()<<3|u;f.appendBits(x,5);const w=Wt.calculateBCHCode(x,Wt.TYPE_INFO_POLY);f.appendBits(w,10);const b=new I;if(b.appendBits(Wt.TYPE_INFO_MASK_PATTERN,15),f.xor(b),f.getSize()!==15)throw new bs("should not happen but we got: "+f.getSize())}static makeVersionInfoBits(l,u){u.appendBits(l.getVersionNumber(),6);const f=Wt.calculateBCHCode(l.getVersionNumber(),Wt.VERSION_INFO_POLY);if(u.appendBits(f,12),u.getSize()!==18)throw new bs("should not happen but we got: "+u.getSize())}static isEmpty(l){return l===255}static embedTimingPatterns(l){for(let u=8;u<l.getWidth()-8;++u){const f=(u+1)%2;Wt.isEmpty(l.get(u,6))&&l.setNumber(u,6,f),Wt.isEmpty(l.get(6,u))&&l.setNumber(6,u,f)}}static embedDarkDotAtLeftBottomCorner(l){if(l.get(8,l.getHeight()-8)===0)throw new bs;l.setNumber(8,l.getHeight()-8,1)}static embedHorizontalSeparationPattern(l,u,f){for(let x=0;x<8;++x){if(!Wt.isEmpty(f.get(l+x,u)))throw new bs;f.setNumber(l+x,u,0)}}static embedVerticalSeparationPattern(l,u,f){for(let x=0;x<7;++x){if(!Wt.isEmpty(f.get(l,u+x)))throw new bs;f.setNumber(l,u+x,0)}}static embedPositionAdjustmentPattern(l,u,f){for(let x=0;x<5;++x){const w=Wt.POSITION_ADJUSTMENT_PATTERN[x];for(let b=0;b<5;++b)f.setNumber(l+b,u+x,w[b])}}static embedPositionDetectionPattern(l,u,f){for(let x=0;x<7;++x){const w=Wt.POSITION_DETECTION_PATTERN[x];for(let b=0;b<7;++b)f.setNumber(l+b,u+x,w[b])}}static embedPositionDetectionPatternsAndSeparators(l){const u=Wt.POSITION_DETECTION_PATTERN[0].length;Wt.embedPositionDetectionPattern(0,0,l),Wt.embedPositionDetectionPattern(l.getWidth()-u,0,l),Wt.embedPositionDetectionPattern(0,l.getWidth()-u,l);const f=8;Wt.embedHorizontalSeparationPattern(0,f-1,l),Wt.embedHorizontalSeparationPattern(l.getWidth()-f,f-1,l),Wt.embedHorizontalSeparationPattern(0,l.getWidth()-f,l);const x=7;Wt.embedVerticalSeparationPattern(x,0,l),Wt.embedVerticalSeparationPattern(l.getHeight()-x-1,0,l),Wt.embedVerticalSeparationPattern(x,l.getHeight()-x,l)}static maybeEmbedPositionAdjustmentPatterns(l,u){if(l.getVersionNumber()<2)return;const f=l.getVersionNumber()-1,x=Wt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[f];for(let w=0,b=x.length;w!==b;w++){const A=x[w];if(A>=0)for(let D=0;D!==b;D++){const R=x[D];R>=0&&Wt.isEmpty(u.get(R,A))&&Wt.embedPositionAdjustmentPattern(R-2,A-2,u)}}}}Wt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Wt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Wt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Wt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Wt.VERSION_INFO_POLY=7973,Wt.TYPE_INFO_POLY=1335,Wt.TYPE_INFO_MASK_PATTERN=21522;class DU{constructor(l,u){this.dataBytes=l,this.errorCorrectionBytes=u}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ts{constructor(){}static calculateMaskPenalty(l){return sr.applyMaskPenaltyRule1(l)+sr.applyMaskPenaltyRule2(l)+sr.applyMaskPenaltyRule3(l)+sr.applyMaskPenaltyRule4(l)}static encode(l,u,f=null){let x=Ts.DEFAULT_BYTE_MODE_ENCODING;const w=f!==null&&f.get(_r.CHARACTER_SET)!==void 0;w&&(x=f.get(_r.CHARACTER_SET).toString());const b=this.chooseMode(l,x),A=new I;if(b===Vt.BYTE&&(w||Ts.DEFAULT_BYTE_MODE_ENCODING!==x)){const at=k.getCharacterSetECIByName(x);at!==void 0&&this.appendECI(at,A)}this.appendModeInfo(b,A);const D=new I;this.appendBytes(l,b,D,x);let R;if(f!==null&&f.get(_r.QR_VERSION)!==void 0){const at=Number.parseInt(f.get(_r.QR_VERSION).toString(),10);R=Ft.getVersionForNumber(at);const et=this.calculateBitsNeeded(b,A,D,R);if(!this.willFit(et,R,u))throw new bs("Data too big for requested version")}else R=this.recommendVersion(u,b,A,D);const F=new I;F.appendBitArray(A);const W=b===Vt.BYTE?D.getSizeInBytes():l.length;this.appendLengthInfo(W,R,b,F),F.appendBitArray(D);const K=R.getECBlocksForLevel(u),oe=R.getTotalCodewords()-K.getTotalECCodewords();this.terminateBits(oe,F);const ge=this.interleaveWithECBytes(F,R.getTotalCodewords(),oe,K.getNumBlocks()),je=new xd;je.setECLevel(u),je.setMode(b),je.setVersion(R);const Te=R.getDimensionForVersion(),Oe=new Vg(Te,Te),nt=this.chooseMaskPattern(ge,u,R,Oe);return je.setMaskPattern(nt),Wt.buildMatrix(ge,u,R,nt,Oe),je.setMatrix(Oe),je}static recommendVersion(l,u,f,x){const w=this.calculateBitsNeeded(u,f,x,Ft.getVersionForNumber(1)),b=this.chooseVersion(w,l),A=this.calculateBitsNeeded(u,f,x,b);return this.chooseVersion(A,l)}static calculateBitsNeeded(l,u,f,x){return u.getSize()+l.getCharacterCountBits(x)+f.getSize()}static getAlphanumericCode(l){return l<Ts.ALPHANUMERIC_TABLE.length?Ts.ALPHANUMERIC_TABLE[l]:-1}static chooseMode(l,u=null){if(k.SJIS.getName()===u&&this.isOnlyDoubleByteKanji(l))return Vt.KANJI;let f=!1,x=!1;for(let w=0,b=l.length;w<b;++w){const A=l.charAt(w);if(Ts.isDigit(A))f=!0;else if(this.getAlphanumericCode(A.charCodeAt(0))!==-1)x=!0;else return Vt.BYTE}return x?Vt.ALPHANUMERIC:f?Vt.NUMERIC:Vt.BYTE}static isOnlyDoubleByteKanji(l){let u;try{u=V.encode(l,k.SJIS)}catch{return!1}const f=u.length;if(f%2!==0)return!1;for(let x=0;x<f;x+=2){const w=u[x]&255;if((w<129||w>159)&&(w<224||w>235))return!1}return!0}static chooseMaskPattern(l,u,f,x){let w=Number.MAX_SAFE_INTEGER,b=-1;for(let A=0;A<xd.NUM_MASK_PATTERNS;A++){Wt.buildMatrix(l,u,f,A,x);let D=this.calculateMaskPenalty(x);D<w&&(w=D,b=A)}return b}static chooseVersion(l,u){for(let f=1;f<=40;f++){const x=Ft.getVersionForNumber(f);if(Ts.willFit(l,x,u))return x}throw new bs("Data too big")}static willFit(l,u,f){const x=u.getTotalCodewords(),b=u.getECBlocksForLevel(f).getTotalECCodewords(),A=x-b,D=(l+7)/8;return A>=D}static terminateBits(l,u){const f=l*8;if(u.getSize()>f)throw new bs("data bits cannot fit in the QR Code"+u.getSize()+" > "+f);for(let b=0;b<4&&u.getSize()<f;++b)u.appendBit(!1);const x=u.getSize()&7;if(x>0)for(let b=x;b<8;b++)u.appendBit(!1);const w=l-u.getSizeInBytes();for(let b=0;b<w;++b)u.appendBits(b&1?17:236,8);if(u.getSize()!==f)throw new bs("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(l,u,f,x,w,b){if(x>=f)throw new bs("Block ID too large");const A=l%f,D=f-A,R=Math.floor(l/f),F=R+1,W=Math.floor(u/f),K=W+1,oe=R-W,ge=F-K;if(oe!==ge)throw new bs("EC bytes mismatch");if(f!==D+A)throw new bs("RS blocks mismatch");if(l!==(W+oe)*D+(K+ge)*A)throw new bs("Total bytes mismatch");x<D?(w[0]=W,b[0]=oe):(w[0]=K,b[0]=ge)}static interleaveWithECBytes(l,u,f,x){if(l.getSizeInBytes()!==f)throw new bs("Number of bits and data bytes does not match");let w=0,b=0,A=0;const D=new Array;for(let F=0;F<x;++F){const W=new Int32Array(1),K=new Int32Array(1);Ts.getNumDataBytesAndNumECBytesForBlockID(u,f,x,F,W,K);const oe=W[0],ge=new Uint8Array(oe);l.toBytes(8*w,ge,0,oe);const je=Ts.generateECBytes(ge,K[0]);D.push(new DU(ge,je)),b=Math.max(b,oe),A=Math.max(A,je.length),w+=W[0]}if(f!==w)throw new bs("Data bytes does not match offset");const R=new I;for(let F=0;F<b;++F)for(const W of D){const K=W.getDataBytes();F<K.length&&R.appendBits(K[F],8)}for(let F=0;F<A;++F)for(const W of D){const K=W.getErrorCorrectionBytes();F<K.length&&R.appendBits(K[F],8)}if(u!==R.getSizeInBytes())throw new bs("Interleaving error: "+u+" and "+R.getSizeInBytes()+" differ.");return R}static generateECBytes(l,u){const f=l.length,x=new Int32Array(f+u);for(let b=0;b<f;b++)x[b]=l[b]&255;new o1(mt.QR_CODE_FIELD_256).encode(x,u);const w=new Uint8Array(u);for(let b=0;b<u;b++)w[b]=x[f+b];return w}static appendModeInfo(l,u){u.appendBits(l.getBits(),4)}static appendLengthInfo(l,u,f,x){const w=f.getCharacterCountBits(u);if(l>=1<<w)throw new bs(l+" is bigger than "+((1<<w)-1));x.appendBits(l,w)}static appendBytes(l,u,f,x){switch(u){case Vt.NUMERIC:Ts.appendNumericBytes(l,f);break;case Vt.ALPHANUMERIC:Ts.appendAlphanumericBytes(l,f);break;case Vt.BYTE:Ts.append8BitBytes(l,f,x);break;case Vt.KANJI:Ts.appendKanjiBytes(l,f);break;default:throw new bs("Invalid mode: "+u)}}static getDigit(l){return l.charCodeAt(0)-48}static isDigit(l){const u=Ts.getDigit(l);return u>=0&&u<=9}static appendNumericBytes(l,u){const f=l.length;let x=0;for(;x<f;){const w=Ts.getDigit(l.charAt(x));if(x+2<f){const b=Ts.getDigit(l.charAt(x+1)),A=Ts.getDigit(l.charAt(x+2));u.appendBits(w*100+b*10+A,10),x+=3}else if(x+1<f){const b=Ts.getDigit(l.charAt(x+1));u.appendBits(w*10+b,7),x+=2}else u.appendBits(w,4),x++}}static appendAlphanumericBytes(l,u){const f=l.length;let x=0;for(;x<f;){const w=Ts.getAlphanumericCode(l.charCodeAt(x));if(w===-1)throw new bs;if(x+1<f){const b=Ts.getAlphanumericCode(l.charCodeAt(x+1));if(b===-1)throw new bs;u.appendBits(w*45+b,11),x+=2}else u.appendBits(w,6),x++}}static append8BitBytes(l,u,f){let x;try{x=V.encode(l,f)}catch(w){throw new bs(w)}for(let w=0,b=x.length;w!==b;w++){const A=x[w];u.appendBits(A,8)}}static appendKanjiBytes(l,u){let f;try{f=V.encode(l,k.SJIS)}catch(w){throw new bs(w)}const x=f.length;for(let w=0;w<x;w+=2){const b=f[w]&255,A=f[w+1]&255,D=b<<8&4294967295|A;let R=-1;if(D>=33088&&D<=40956?R=D-33088:D>=57408&&D<=60351&&(R=D-49472),R===-1)throw new bs("Invalid byte sequence");const F=(R>>8)*192+(R&255);u.appendBits(F,13)}}static appendECI(l,u){u.appendBits(Vt.ECI.getBits(),4),u.appendBits(l.getValue(),8)}}Ts.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ts.DEFAULT_BYTE_MODE_ENCODING=k.UTF8.getName();class vd{write(l,u,f,x=null){if(l.length===0)throw new m("Found empty contents");if(u<0||f<0)throw new m("Requested dimensions are too small: "+u+"x"+f);let w=Gt.L,b=vd.QUIET_ZONE_SIZE;x!==null&&(x.get(_r.ERROR_CORRECTION)!==void 0&&(w=Gt.fromString(x.get(_r.ERROR_CORRECTION).toString())),x.get(_r.MARGIN)!==void 0&&(b=Number.parseInt(x.get(_r.MARGIN).toString(),10)));const A=Ts.encode(l,w,x);return this.renderResult(A,u,f,b)}writeToDom(l,u,f,x,w=null){typeof l=="string"&&(l=document.querySelector(l));const b=this.write(u,f,x,w);l&&l.appendChild(b)}renderResult(l,u,f,x){const w=l.getMatrix();if(w===null)throw new yt;const b=w.getWidth(),A=w.getHeight(),D=b+x*2,R=A+x*2,F=Math.max(u,D),W=Math.max(f,R),K=Math.min(Math.floor(F/D),Math.floor(W/R)),oe=Math.floor((F-b*K)/2),ge=Math.floor((W-A*K)/2),je=this.createSVGElement(F,W);for(let Te=0,Oe=ge;Te<A;Te++,Oe+=K)for(let nt=0,at=oe;nt<b;nt++,at+=K)if(w.get(nt,Te)===1){const et=this.createSvgRectElement(at,Oe,K,K);je.appendChild(et)}return je}createSVGElement(l,u){const f=document.createElementNS(vd.SVG_NS,"svg");return f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",u.toString()),f}createSvgRectElement(l,u,f,x){const w=document.createElementNS(vd.SVG_NS,"rect");return w.setAttributeNS(null,"x",l.toString()),w.setAttributeNS(null,"y",u.toString()),w.setAttributeNS(null,"height",f.toString()),w.setAttributeNS(null,"width",x.toString()),w.setAttributeNS(null,"fill","#000000"),w}}vd.QUIET_ZONE_SIZE=4,vd.SVG_NS="http://www.w3.org/2000/svg";class Su{encode(l,u,f,x,w){if(l.length===0)throw new m("Found empty contents");if(u!==ee.QR_CODE)throw new m("Can only encode QR_CODE, but got "+u);if(f<0||x<0)throw new m(`Requested dimensions are too small: ${f}x${x}`);let b=Gt.L,A=Su.QUIET_ZONE_SIZE;w!==null&&(w.get(_r.ERROR_CORRECTION)!==void 0&&(b=Gt.fromString(w.get(_r.ERROR_CORRECTION).toString())),w.get(_r.MARGIN)!==void 0&&(A=Number.parseInt(w.get(_r.MARGIN).toString(),10)));const D=Ts.encode(l,b,w);return Su.renderResult(D,f,x,A)}static renderResult(l,u,f,x){const w=l.getMatrix();if(w===null)throw new yt;const b=w.getWidth(),A=w.getHeight(),D=b+x*2,R=A+x*2,F=Math.max(u,D),W=Math.max(f,R),K=Math.min(Math.floor(F/D),Math.floor(W/R)),oe=Math.floor((F-b*K)/2),ge=Math.floor((W-A*K)/2),je=new z(F,W);for(let Te=0,Oe=ge;Te<A;Te++,Oe+=K)for(let nt=0,at=oe;nt<b;nt++,at+=K)w.get(nt,Te)===1&&je.setRegion(at,Oe,K,K);return je}}Su.QUIET_ZONE_SIZE=4;class kU{encode(l,u,f,x,w){let b;switch(u){case ee.QR_CODE:b=new Su;break;default:throw new m("No encoder available for format "+u)}return b.encode(l,u,f,x,w)}}class Lo extends se{constructor(l,u,f,x,w,b,A,D){if(super(b,A),this.yuvData=l,this.dataWidth=u,this.dataHeight=f,this.left=x,this.top=w,x+b>u||w+A>f)throw new m("Crop rectangle does not fit within image data.");D&&this.reverseHorizontal(b,A)}getRow(l,u){if(l<0||l>=this.getHeight())throw new m("Requested row is outside the image: "+l);const f=this.getWidth();(u==null||u.length<f)&&(u=new Uint8ClampedArray(f));const x=(l+this.top)*this.dataWidth+this.left;return N.arraycopy(this.yuvData,x,u,0,f),u}getMatrix(){const l=this.getWidth(),u=this.getHeight();if(l===this.dataWidth&&u===this.dataHeight)return this.yuvData;const f=l*u,x=new Uint8ClampedArray(f);let w=this.top*this.dataWidth+this.left;if(l===this.dataWidth)return N.arraycopy(this.yuvData,w,x,0,f),x;for(let b=0;b<u;b++){const A=b*l;N.arraycopy(this.yuvData,w,x,A,l),w+=this.dataWidth}return x}isCropSupported(){return!0}crop(l,u,f,x){return new Lo(this.yuvData,this.dataWidth,this.dataHeight,this.left+l,this.top+u,f,x,!1)}renderThumbnail(){const l=this.getWidth()/Lo.THUMBNAIL_SCALE_FACTOR,u=this.getHeight()/Lo.THUMBNAIL_SCALE_FACTOR,f=new Int32Array(l*u),x=this.yuvData;let w=this.top*this.dataWidth+this.left;for(let b=0;b<u;b++){const A=b*l;for(let D=0;D<l;D++){const R=x[w+D*Lo.THUMBNAIL_SCALE_FACTOR]&255;f[A+D]=4278190080|R*65793}w+=this.dataWidth*Lo.THUMBNAIL_SCALE_FACTOR}return f}getThumbnailWidth(){return this.getWidth()/Lo.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Lo.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(l,u){const f=this.yuvData;for(let x=0,w=this.top*this.dataWidth+this.left;x<u;x++,w+=this.dataWidth){const b=w+l/2;for(let A=w,D=w+l-1;A<b;A++,D--){const R=f[A];f[A]=f[D],f[D]=R}}}invert(){return new re(this)}}Lo.THUMBNAIL_SCALE_FACTOR=2;class l1 extends se{constructor(l,u,f,x,w,b,A){if(super(u,f),this.dataWidth=x,this.dataHeight=w,this.left=b,this.top=A,l.BYTES_PER_ELEMENT===4){const D=u*f,R=new Uint8ClampedArray(D);for(let F=0;F<D;F++){const W=l[F],K=W>>16&255,oe=W>>7&510,ge=W&255;R[F]=(K+oe+ge)/4&255}this.luminances=R}else this.luminances=l;if(x===void 0&&(this.dataWidth=u),w===void 0&&(this.dataHeight=f),b===void 0&&(this.left=0),A===void 0&&(this.top=0),this.left+u>this.dataWidth||this.top+f>this.dataHeight)throw new m("Crop rectangle does not fit within image data.")}getRow(l,u){if(l<0||l>=this.getHeight())throw new m("Requested row is outside the image: "+l);const f=this.getWidth();(u==null||u.length<f)&&(u=new Uint8ClampedArray(f));const x=(l+this.top)*this.dataWidth+this.left;return N.arraycopy(this.luminances,x,u,0,f),u}getMatrix(){const l=this.getWidth(),u=this.getHeight();if(l===this.dataWidth&&u===this.dataHeight)return this.luminances;const f=l*u,x=new Uint8ClampedArray(f);let w=this.top*this.dataWidth+this.left;if(l===this.dataWidth)return N.arraycopy(this.luminances,w,x,0,f),x;for(let b=0;b<u;b++){const A=b*l;N.arraycopy(this.luminances,w,x,A,l),w+=this.dataWidth}return x}isCropSupported(){return!0}crop(l,u,f,x){return new l1(this.luminances,f,x,this.dataWidth,this.dataHeight,this.left+l,this.top+u)}invert(){return new re(this)}}class iA extends k{static forName(l){return this.getCharacterSetECIByName(l)}}class c1{}c1.ISO_8859_1=k.ISO8859_1;class aA{isCompact(){return this.compact}setCompact(l){this.compact=l}getSize(){return this.size}setSize(l){this.size=l}getLayers(){return this.layers}setLayers(l){this.layers=l}getCodeWords(){return this.codeWords}setCodeWords(l){this.codeWords=l}getMatrix(){return this.matrix}setMatrix(l){this.matrix=l}}class oA{static singletonList(l){return[l]}static min(l,u){return l.sort(u)[0]}}class PU{constructor(l){this.previous=l}getPrevious(){return this.previous}}class Au extends PU{constructor(l,u,f){super(l),this.value=u,this.bitCount=f}appendTo(l,u){l.appendBits(this.value,this.bitCount)}add(l,u){return new Au(this,l,u)}addBinaryShift(l,u){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Au(this,l,u)}toString(){let l=this.value&(1<<this.bitCount)-1;return l|=1<<this.bitCount,"<"+C.toBinaryString(l|1<<this.bitCount).substring(1)+">"}}class d1 extends Au{constructor(l,u,f){super(l,0,0),this.binaryShiftStart=u,this.binaryShiftByteCount=f}appendTo(l,u){for(let f=0;f<this.binaryShiftByteCount;f++)(f===0||f===31&&this.binaryShiftByteCount<=62)&&(l.appendBits(31,5),this.binaryShiftByteCount>62?l.appendBits(this.binaryShiftByteCount-31,16):f===0?l.appendBits(Math.min(this.binaryShiftByteCount,31),5):l.appendBits(this.binaryShiftByteCount-31,5)),l.appendBits(u[this.binaryShiftStart+f],8)}addBinaryShift(l,u){return new d1(this,l,u)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function RU(U,l,u){return new d1(U,l,u)}function Um(U,l,u){return new Au(U,l,u)}const LU=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Jl=0,$g=1,La=2,lA=3,Oo=4,OU=new Au(null,0,0),u1=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function FU(U){for(let l of U)S.fill(l,-1);return U[Jl][Oo]=0,U[$g][Oo]=0,U[$g][Jl]=28,U[lA][Oo]=0,U[La][Oo]=0,U[La][Jl]=15,U}const cA=FU(S.createInt32Array(6,6));class Fo{constructor(l,u,f,x){this.token=l,this.mode=u,this.binaryShiftByteCount=f,this.bitCount=x}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(l,u){let f=this.bitCount,x=this.token;if(l!==this.mode){let b=u1[this.mode][l];x=Um(x,b&65535,b>>16),f+=b>>16}let w=l===La?4:5;return x=Um(x,u,w),new Fo(x,l,0,f+w)}shiftAndAppend(l,u){let f=this.token,x=this.mode===La?4:5;return f=Um(f,cA[this.mode][l],x),f=Um(f,u,5),new Fo(f,this.mode,0,this.bitCount+x+5)}addBinaryShiftChar(l){let u=this.token,f=this.mode,x=this.bitCount;if(this.mode===Oo||this.mode===La){let A=u1[f][Jl];u=Um(u,A&65535,A>>16),x+=A>>16,f=Jl}let w=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,b=new Fo(u,f,this.binaryShiftByteCount+1,x+w);return b.binaryShiftByteCount===2078&&(b=b.endBinaryShift(l+1)),b}endBinaryShift(l){if(this.binaryShiftByteCount===0)return this;let u=this.token;return u=RU(u,l-this.binaryShiftByteCount,this.binaryShiftByteCount),new Fo(u,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(l){let u=this.bitCount+(u1[this.mode][l.mode]>>16);return this.binaryShiftByteCount<l.binaryShiftByteCount?u+=Fo.calculateBinaryShiftCost(l)-Fo.calculateBinaryShiftCost(this):this.binaryShiftByteCount>l.binaryShiftByteCount&&l.binaryShiftByteCount>0&&(u+=10),u<=l.bitCount}toBitArray(l){let u=[];for(let x=this.endBinaryShift(l.length).token;x!==null;x=x.getPrevious())u.unshift(x);let f=new I;for(const x of u)x.appendTo(f,l);return f}toString(){return B.format("%s bits=%d bytes=%d",LU[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(l){return l.binaryShiftByteCount>62?21:l.binaryShiftByteCount>31?20:l.binaryShiftByteCount>0?10:0}}Fo.INITIAL_STATE=new Fo(OU,Jl,0,0);function BU(U){const l=B.getCharCode(" "),u=B.getCharCode("."),f=B.getCharCode(",");U[Jl][l]=1;const x=B.getCharCode("Z"),w=B.getCharCode("A");for(let K=w;K<=x;K++)U[Jl][K]=K-w+2;U[$g][l]=1;const b=B.getCharCode("z"),A=B.getCharCode("a");for(let K=A;K<=b;K++)U[$g][K]=K-A+2;U[La][l]=1;const D=B.getCharCode("9"),R=B.getCharCode("0");for(let K=R;K<=D;K++)U[La][K]=K-R+2;U[La][f]=12,U[La][u]=13;const F=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let K=0;K<F.length;K++)U[lA][B.getCharCode(F[K])]=K;const W=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let K=0;K<W.length;K++)B.getCharCode(W[K])>0&&(U[Oo][B.getCharCode(W[K])]=K);return U}const h1=BU(S.createInt32Array(5,256));class Wm{constructor(l){this.text=l}encode(){const l=B.getCharCode(" "),u=B.getCharCode(`
`);let f=oA.singletonList(Fo.INITIAL_STATE);for(let w=0;w<this.text.length;w++){let b,A=w+1<this.text.length?this.text[w+1]:0;switch(this.text[w]){case B.getCharCode("\r"):b=A===u?2:0;break;case B.getCharCode("."):b=A===l?3:0;break;case B.getCharCode(","):b=A===l?4:0;break;case B.getCharCode(":"):b=A===l?5:0;break;default:b=0}b>0?(f=Wm.updateStateListForPair(f,w,b),w++):f=this.updateStateListForChar(f,w)}return oA.min(f,(w,b)=>w.getBitCount()-b.getBitCount()).toBitArray(this.text)}updateStateListForChar(l,u){const f=[];for(let x of l)this.updateStateForChar(x,u,f);return Wm.simplifyStates(f)}updateStateForChar(l,u,f){let x=this.text[u]&255,w=h1[l.getMode()][x]>0,b=null;for(let A=0;A<=Oo;A++){let D=h1[A][x];if(D>0){if(b==null&&(b=l.endBinaryShift(u)),!w||A===l.getMode()||A===La){const R=b.latchAndAppend(A,D);f.push(R)}if(!w&&cA[l.getMode()][A]>=0){const R=b.shiftAndAppend(A,D);f.push(R)}}}if(l.getBinaryShiftByteCount()>0||h1[l.getMode()][x]===0){let A=l.addBinaryShiftChar(u);f.push(A)}}static updateStateListForPair(l,u,f){const x=[];for(let w of l)this.updateStateForPair(w,u,f,x);return this.simplifyStates(x)}static updateStateForPair(l,u,f,x){let w=l.endBinaryShift(u);if(x.push(w.latchAndAppend(Oo,f)),l.getMode()!==Oo&&x.push(w.shiftAndAppend(Oo,f)),f===3||f===4){let b=w.latchAndAppend(La,16-f).latchAndAppend(La,1);x.push(b)}if(l.getBinaryShiftByteCount()>0){let b=l.addBinaryShiftChar(u).addBinaryShiftChar(u+1);x.push(b)}}static simplifyStates(l){let u=[];for(const f of l){let x=!0;for(const w of u){if(w.isBetterThanOrEqualTo(f)){x=!1;break}f.isBetterThanOrEqualTo(w)&&(u=u.filter(b=>b!==w))}x&&u.push(f)}return u}}class Qn{constructor(){}static encodeBytes(l){return Qn.encode(l,Qn.DEFAULT_EC_PERCENT,Qn.DEFAULT_AZTEC_LAYERS)}static encode(l,u,f){let x=new Wm(l).encode(),w=C.truncDivision(x.getSize()*u,100)+11,b=x.getSize()+w,A,D,R,F,W;if(f!==Qn.DEFAULT_AZTEC_LAYERS){if(A=f<0,D=Math.abs(f),D>(A?Qn.MAX_NB_BITS_COMPACT:Qn.MAX_NB_BITS))throw new m(B.format("Illegal value %s for layers",f));R=Qn.totalBitsInLayer(D,A),F=Qn.WORD_SIZE[D];let et=R-R%F;if(W=Qn.stuffBits(x,F),W.getSize()+w>et)throw new m("Data to large for user specified layer");if(A&&W.getSize()>F*64)throw new m("Data to large for user specified layer")}else{F=0,W=null;for(let et=0;;et++){if(et>Qn.MAX_NB_BITS)throw new m("Data too large for an Aztec code");if(A=et<=3,D=A?et+1:et,R=Qn.totalBitsInLayer(D,A),b>R)continue;(W==null||F!==Qn.WORD_SIZE[D])&&(F=Qn.WORD_SIZE[D],W=Qn.stuffBits(x,F));let Bn=R-R%F;if(!(A&&W.getSize()>F*64)&&W.getSize()+w<=Bn)break}}let K=Qn.generateCheckWords(W,R,F),oe=W.getSize()/F,ge=Qn.generateModeMessage(A,D,oe),je=(A?11:14)+D*4,Te=new Int32Array(je),Oe;if(A){Oe=je;for(let et=0;et<Te.length;et++)Te[et]=et}else{Oe=je+1+2*C.truncDivision(C.truncDivision(je,2)-1,15);let et=C.truncDivision(je,2),Bn=C.truncDivision(Oe,2);for(let un=0;un<et;un++){let Ui=un+C.truncDivision(un,15);Te[et-un-1]=Bn-Ui-1,Te[et+un]=Bn+Ui+1}}let nt=new z(Oe);for(let et=0,Bn=0;et<D;et++){let un=(D-et)*4+(A?9:12);for(let Ui=0;Ui<un;Ui++){let lo=Ui*2;for(let Wi=0;Wi<2;Wi++)K.get(Bn+lo+Wi)&&nt.set(Te[et*2+Wi],Te[et*2+Ui]),K.get(Bn+un*2+lo+Wi)&&nt.set(Te[et*2+Ui],Te[je-1-et*2-Wi]),K.get(Bn+un*4+lo+Wi)&&nt.set(Te[je-1-et*2-Wi],Te[je-1-et*2-Ui]),K.get(Bn+un*6+lo+Wi)&&nt.set(Te[je-1-et*2-Ui],Te[et*2+Wi])}Bn+=un*8}if(Qn.drawModeMessage(nt,A,Oe,ge),A)Qn.drawBullsEye(nt,C.truncDivision(Oe,2),5);else{Qn.drawBullsEye(nt,C.truncDivision(Oe,2),7);for(let et=0,Bn=0;et<C.truncDivision(je,2)-1;et+=15,Bn+=16)for(let un=C.truncDivision(Oe,2)&1;un<Oe;un+=2)nt.set(C.truncDivision(Oe,2)-Bn,un),nt.set(C.truncDivision(Oe,2)+Bn,un),nt.set(un,C.truncDivision(Oe,2)-Bn),nt.set(un,C.truncDivision(Oe,2)+Bn)}let at=new aA;return at.setCompact(A),at.setSize(Oe),at.setLayers(D),at.setCodeWords(oe),at.setMatrix(nt),at}static drawBullsEye(l,u,f){for(let x=0;x<f;x+=2)for(let w=u-x;w<=u+x;w++)l.set(w,u-x),l.set(w,u+x),l.set(u-x,w),l.set(u+x,w);l.set(u-f,u-f),l.set(u-f+1,u-f),l.set(u-f,u-f+1),l.set(u+f,u-f),l.set(u+f,u-f+1),l.set(u+f,u+f-1)}static generateModeMessage(l,u,f){let x=new I;return l?(x.appendBits(u-1,2),x.appendBits(f-1,6),x=Qn.generateCheckWords(x,28,4)):(x.appendBits(u-1,5),x.appendBits(f-1,11),x=Qn.generateCheckWords(x,40,4)),x}static drawModeMessage(l,u,f,x){let w=C.truncDivision(f,2);if(u)for(let b=0;b<7;b++){let A=w-3+b;x.get(b)&&l.set(A,w-5),x.get(b+7)&&l.set(w+5,A),x.get(20-b)&&l.set(A,w+5),x.get(27-b)&&l.set(w-5,A)}else for(let b=0;b<10;b++){let A=w-5+b+C.truncDivision(b,5);x.get(b)&&l.set(A,w-7),x.get(b+10)&&l.set(w+7,A),x.get(29-b)&&l.set(A,w+7),x.get(39-b)&&l.set(w-7,A)}}static generateCheckWords(l,u,f){let x=l.getSize()/f,w=new o1(Qn.getGF(f)),b=C.truncDivision(u,f),A=Qn.bitsToWords(l,f,b);w.encode(A,b-x);let D=u%f,R=new I;R.appendBits(0,D);for(const F of Array.from(A))R.appendBits(F,f);return R}static bitsToWords(l,u,f){let x=new Int32Array(f),w,b;for(w=0,b=l.getSize()/u;w<b;w++){let A=0;for(let D=0;D<u;D++)A|=l.get(w*u+D)?1<<u-D-1:0;x[w]=A}return x}static getGF(l){switch(l){case 4:return mt.AZTEC_PARAM;case 6:return mt.AZTEC_DATA_6;case 8:return mt.AZTEC_DATA_8;case 10:return mt.AZTEC_DATA_10;case 12:return mt.AZTEC_DATA_12;default:throw new m("Unsupported word size "+l)}}static stuffBits(l,u){let f=new I,x=l.getSize(),w=(1<<u)-2;for(let b=0;b<x;b+=u){let A=0;for(let D=0;D<u;D++)(b+D>=x||l.get(b+D))&&(A|=1<<u-1-D);(A&w)===w?(f.appendBits(A&w,u),b--):A&w?f.appendBits(A,u):(f.appendBits(A|1,u),b--)}return f}static totalBitsInLayer(l,u){return((u?88:112)+16*l)*l}}Qn.DEFAULT_EC_PERCENT=33,Qn.DEFAULT_AZTEC_LAYERS=0,Qn.MAX_NB_BITS=32,Qn.MAX_NB_BITS_COMPACT=4,Qn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ug{encode(l,u,f,x){return this.encodeWithHints(l,u,f,x,null)}encodeWithHints(l,u,f,x,w){let b=c1.ISO_8859_1,A=Qn.DEFAULT_EC_PERCENT,D=Qn.DEFAULT_AZTEC_LAYERS;return w!=null&&(w.has(_r.CHARACTER_SET)&&(b=iA.forName(w.get(_r.CHARACTER_SET).toString())),w.has(_r.ERROR_CORRECTION)&&(A=C.parseInt(w.get(_r.ERROR_CORRECTION).toString())),w.has(_r.AZTEC_LAYERS)&&(D=C.parseInt(w.get(_r.AZTEC_LAYERS).toString()))),Ug.encodeLayers(l,u,f,x,b,A,D)}static encodeLayers(l,u,f,x,w,b,A){if(u!==ee.AZTEC)throw new m("Can only encode AZTEC, but got "+u);let D=Qn.encode(B.getBytes(l,w),b,A);return Ug.renderResult(D,f,x)}static renderResult(l,u,f){let x=l.getMatrix();if(x==null)throw new yt;let w=x.getWidth(),b=x.getHeight(),A=Math.max(u,w),D=Math.max(f,b),R=Math.min(A/w,D/b),F=(A-w*R)/2,W=(D-b*R)/2,K=new z(A,D);for(let oe=0,ge=W;oe<b;oe++,ge+=R)for(let je=0,Te=F;je<w;je++,Te+=R)x.get(je,oe)&&K.setRegion(Te,ge,R,R);return K}}s.AbstractExpandedDecoder=wu,s.ArgumentException=g,s.ArithmeticException=jt,s.AztecCode=aA,s.AztecCodeReader=nn,s.AztecCodeWriter=Ug,s.AztecDecoder=ce,s.AztecDetector=er,s.AztecDetectorResult=Ke,s.AztecEncoder=Qn,s.AztecHighLevelEncoder=Wm,s.AztecPoint=Hn,s.BarcodeFormat=ee,s.Binarizer=j,s.BinaryBitmap=p,s.BitArray=I,s.BitMatrix=z,s.BitSource=Lm,s.BrowserAztecCodeReader=Bt,s.BrowserBarcodeReader=Zl,s.BrowserCodeReader=xe,s.BrowserDatamatrixCodeReader=cs,s.BrowserMultiFormatReader=IU,s.BrowserPDF417Reader=TU,s.BrowserQRCodeReader=MU,s.BrowserQRCodeSvgWriter=vd,s.CharacterSetECI=k,s.ChecksumException=v,s.Code128Reader=rt,s.Code39Reader=qn,s.DataMatrixDecodedBitStreamParser=Ro,s.DataMatrixReader=Nn,s.DecodeHintType=L,s.DecoderResult=Me,s.DefaultGridSampler=At,s.DetectorResult=Je,s.EAN13Reader=oa,s.EncodeHintType=_r,s.Exception=h,s.FormatException=T,s.GenericGF=mt,s.GenericGFPoly=We,s.GlobalHistogramBinarizer=he,s.GridSampler=dt,s.GridSamplerInstance=qt,s.HTMLCanvasElementLuminanceSource=me,s.HybridBinarizer=le,s.ITFReader=Vn,s.IllegalArgumentException=m,s.IllegalStateException=yt,s.InvertedLuminanceSource=re,s.LuminanceSource=se,s.MathUtils=be,s.MultiFormatOneDReader=ml,s.MultiFormatReader=rA,s.MultiFormatWriter=kU,s.NotFoundException=G,s.OneDReader=bn,s.PDF417DecodedBitStreamParser=Re,s.PDF417DecoderErrorCorrection=XS,s.PDF417Reader=ei,s.PDF417ResultMetadata=eA,s.PerspectiveTransform=Dt,s.PlanarYUVLuminanceSource=Lo,s.QRCodeByteMatrix=Vg,s.QRCodeDataMask=Pa,s.QRCodeDecodedBitStreamParser=qs,s.QRCodeDecoderErrorCorrectionLevel=Gt,s.QRCodeDecoderFormatInformation=nr,s.QRCodeEncoder=Ts,s.QRCodeEncoderQRCode=xd,s.QRCodeMaskUtil=sr,s.QRCodeMatrixUtil=Wt,s.QRCodeMode=Vt,s.QRCodeReader=Ql,s.QRCodeVersion=Ft,s.QRCodeWriter=Su,s.RGBLuminanceSource=l1,s.RSS14Reader=Is,s.RSSExpandedReader=He,s.ReaderException=zg,s.ReedSolomonDecoder=On,s.ReedSolomonEncoder=o1,s.ReedSolomonException=ke,s.Result=te,s.ResultMetadataType=pe,s.ResultPoint=Pe,s.StringUtils=B,s.UnsupportedOperationException=O,s.VideoInputDevice=Ce,s.WhiteRectangleDetector=Nt,s.WriterException=bs,s.ZXingArrays=S,s.ZXingCharset=iA,s.ZXingInteger=C,s.ZXingStandardCharsets=c1,s.ZXingStringBuilder=Y,s.ZXingStringEncoding=V,s.ZXingSystem=N,s.createAbstractExpandedDecoder=Da,Object.defineProperty(s,"__esModule",{value:!0})})})(NN,NN.exports);var ks=NN.exports;const Cpe=td(ks),Spe=yk({__proto__:null,default:Cpe},[ks]);var sT=function(){function t(e,s,r){if(this.formatMap=new Map([[Mt.QR_CODE,ks.BarcodeFormat.QR_CODE],[Mt.AZTEC,ks.BarcodeFormat.AZTEC],[Mt.CODABAR,ks.BarcodeFormat.CODABAR],[Mt.CODE_39,ks.BarcodeFormat.CODE_39],[Mt.CODE_93,ks.BarcodeFormat.CODE_93],[Mt.CODE_128,ks.BarcodeFormat.CODE_128],[Mt.DATA_MATRIX,ks.BarcodeFormat.DATA_MATRIX],[Mt.MAXICODE,ks.BarcodeFormat.MAXICODE],[Mt.ITF,ks.BarcodeFormat.ITF],[Mt.EAN_13,ks.BarcodeFormat.EAN_13],[Mt.EAN_8,ks.BarcodeFormat.EAN_8],[Mt.PDF_417,ks.BarcodeFormat.PDF_417],[Mt.RSS_14,ks.BarcodeFormat.RSS_14],[Mt.RSS_EXPANDED,ks.BarcodeFormat.RSS_EXPANDED],[Mt.UPC_A,ks.BarcodeFormat.UPC_A],[Mt.UPC_E,ks.BarcodeFormat.UPC_E],[Mt.UPC_EAN_EXTENSION,ks.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Spe)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=s,this.logger=r;var i=this.createZXingFormats(e),a=new Map;a.set(ks.DecodeHintType.POSSIBLE_FORMATS,i),a.set(ks.DecodeHintType.TRY_HARDER,!1),this.hints=a}return t.prototype.decodeAsync=function(e){var s=this;return new Promise(function(r,i){try{r(s.decode(e))}catch(a){i(a)}})},t.prototype.decode=function(e){var s=new ks.MultiFormatReader(this.verbose,this.hints),r=new ks.HTMLCanvasElementLuminanceSource(e),i=new ks.BinaryBitmap(new ks.HybridBinarizer(r)),a=s.decode(i);return{text:a.text,format:Kz.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(s,r,i){e.set(s,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var s=[],r=0,i=e;r<i.length;r++){var a=i[r];this.formatMap.has(a)?s.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return s},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),Ape=function(t,e,s,r){function i(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function c(g){try{h(r.next(g))}catch(m){o(m)}}function d(g){try{h(r.throw(g))}catch(m){o(m)}}function h(g){g.done?a(g.value):i(g.value).then(c,d)}h((r=r.apply(t,e||[])).next())})},Epe=function(t,e){var s={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(g){return d([h,g])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,h[0]&&(s=0)),s;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return s.label++,{value:h[1],done:!1};case 5:s.label++,i=h[1],h=[0];continue;case 7:h=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){s=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){s.label=h[1];break}if(h[0]===6&&s.label<a[1]){s.label=a[1],a=h;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(h);break}a[2]&&s.ops.pop(),s.trys.pop();continue}h=e.call(t,s)}catch(g){h=[6,g],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},rT=function(){function t(e,s,r){if(this.formatMap=new Map([[Mt.QR_CODE,"qr_code"],[Mt.AZTEC,"aztec"],[Mt.CODABAR,"codabar"],[Mt.CODE_39,"code_39"],[Mt.CODE_93,"code_93"],[Mt.CODE_128,"code_128"],[Mt.DATA_MATRIX,"data_matrix"],[Mt.ITF,"itf"],[Mt.EAN_13,"ean_13"],[Mt.EAN_8,"ean_8"],[Mt.PDF_417,"pdf417"],[Mt.UPC_A,"upc_a"],[Mt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=s,this.logger=r;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return Ape(this,void 0,void 0,function(){var s,r;return Epe(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(s=i.sent(),!s||s.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(s),[2,{text:r.rawValue,format:Kz.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var s=null,r=0,i=0,a=e;i<a.length;i++){var o=a[i],c=o.boundingBox.width*o.boundingBox.height;c>r&&(r=c,s=o)}if(!s)throw"No largest barcode found";return s},t.prototype.createBarcodeDetectorFormats=function(e){for(var s=[],r=0,i=e;r<i.length;r++){var a=i[r];this.formatMap.has(a)?s.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:s}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(s,r,i){e.set(s,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),iT=function(t,e,s,r){function i(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function c(g){try{h(r.next(g))}catch(m){o(m)}}function d(g){try{h(r.throw(g))}catch(m){o(m)}}function h(g){g.done?a(g.value):i(g.value).then(c,d)}h((r=r.apply(t,e||[])).next())})},aT=function(t,e){var s={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(g){return d([h,g])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,h[0]&&(s=0)),s;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return s.label++,{value:h[1],done:!1};case 5:s.label++,i=h[1],h=[0];continue;case 7:h=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){s=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){s.label=h[1];break}if(h[0]===6&&s.label<a[1]){s.label=a[1],a=h;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(h);break}a[2]&&s.ops.pop(),s.trys.pop();continue}h=e.call(t,s)}catch(g){h=[6,g],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},_pe=function(){function t(e,s,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,s&&rT.isSupported()?(this.primaryDecoder=new rT(e,r,i),this.secondaryDecoder=new sT(e,r,i)):this.primaryDecoder=new sT(e,r,i)}return t.prototype.decodeAsync=function(e){return iT(this,void 0,void 0,function(){var s;return aT(this,function(r){switch(r.label){case 0:s=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(s),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return iT(this,void 0,void 0,function(){var s,r;return aT(this,function(i){switch(i.label){case 0:s=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(s),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var s=performance.now()-e;this.executionResults.push(s),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,s=0,r=this.executionResults;s<r.length;s++){var i=r[s];e+=i}var a=e/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),OS=function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,s)};return function(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(e,s);function r(){this.constructor=e}e.prototype=s===null?Object.create(s):(r.prototype=s.prototype,new r)}}(),qv=function(t,e,s,r){function i(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function c(g){try{h(r.next(g))}catch(m){o(m)}}function d(g){try{h(r.throw(g))}catch(m){o(m)}}function h(g){g.done?a(g.value):i(g.value).then(c,d)}h((r=r.apply(t,e||[])).next())})},Gv=function(t,e){var s={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(g){return d([h,g])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,h[0]&&(s=0)),s;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return s.label++,{value:h[1],done:!1};case 5:s.label++,i=h[1],h=[0];continue;case 7:h=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){s=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){s.label=h[1];break}if(h[0]===6&&s.label<a[1]){s.label=a[1],a=h;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(h);break}a[2]&&s.ops.pop(),s.trys.pop();continue}h=e.call(t,s)}catch(g){h=[6,g],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Qz=function(){function t(e,s){this.name=e,this.track=s}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var s={};s[this.name]=e;var r={advanced:[s]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var s=e[this.name];return s}return null},t}(),Ipe=function(t){OS(e,t);function e(s,r){return t.call(this,s,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(s){var r={};r[this.name]=s;var i={advanced:[r]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var s=this.track.getCapabilities(),r=s[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(Qz),Tpe=function(t){OS(e,t);function e(s){return t.call(this,"zoom",s)||this}return e}(Ipe),Mpe=function(t){OS(e,t);function e(s){return t.call(this,"torch",s)||this}return e}(Qz),Dpe=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new Tpe(this.track)},t.prototype.torchFeature=function(){return new Mpe(this.track)},t}(),kpe=function(){function t(e,s,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=s,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var s=document.createElement("video");return s.style.width="".concat(e,"px"),s.style.display="block",s.muted=!0,s.setAttribute("muted","true"),s.playsInline=!0,s},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var s=function(){var r=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,i),e.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,s,r,i){return qv(this,void 0,void 0,function(){var a,o;return Gv(this,function(c){switch(c.label){case 0:return a=new t(e,s,i),r.aspectRatio?(o={aspectRatio:r.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:c.sent(),c.label=2;case 2:return a.setupSurface(),[2,a]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var s=this,r=function(){setTimeout(e,200),s.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return qv(this,void 0,void 0,function(){return Gv(this,function(s){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(s,r){var i=e.mediaStream.getVideoTracks(),a=i.length,o=0;e.mediaStream.getVideoTracks().forEach(function(c){e.mediaStream.removeTrack(c),c.stop(),++o,o>=a&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),s())})})},t.prototype.getCapabilities=function(){return new Dpe(this.getFirstTrackOrFail())},t}(),Ppe=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,s,r){return qv(this,void 0,void 0,function(){return Gv(this,function(i){return[2,kpe.create(e,this.mediaStream,s,r)]})})},t.create=function(e){return qv(this,void 0,void 0,function(){var s,r;return Gv(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return s={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(s)];case 1:return r=i.sent(),[2,new t(r)]}})})},t}(),oT=function(t,e,s,r){function i(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function c(g){try{h(r.next(g))}catch(m){o(m)}}function d(g){try{h(r.throw(g))}catch(m){o(m)}}function h(g){g.done?a(g.value):i(g.value).then(c,d)}h((r=r.apply(t,e||[])).next())})},lT=function(t,e){var s={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(g){return d([h,g])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,h[0]&&(s=0)),s;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return s.label++,{value:h[1],done:!1};case 5:s.label++,i=h[1],h=[0];continue;case 7:h=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){s=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){s.label=h[1];break}if(h[0]===6&&s.label<a[1]){s.label=a[1],a=h;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(h);break}a[2]&&s.ops.pop(),s.trys.pop();continue}h=e.call(t,s)}catch(g){h=[6,g],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Rpe=function(){function t(){}return t.failIfNotSupported=function(){return oT(this,void 0,void 0,function(){return lT(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return oT(this,void 0,void 0,function(){return lT(this,function(s){return[2,Ppe.create(e)]})})},t}(),Lpe=function(t,e,s,r){function i(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function c(g){try{h(r.next(g))}catch(m){o(m)}}function d(g){try{h(r.throw(g))}catch(m){o(m)}}function h(g){g.done?a(g.value):i(g.value).then(c,d)}h((r=r.apply(t,e||[])).next())})},Ope=function(t,e){var s={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(g){return d([h,g])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,h[0]&&(s=0)),s;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return s.label++,{value:h[1],done:!1};case 5:s.label++,i=h[1],h=[0];continue;case 7:h=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){s=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){s.label=h[1];break}if(h[0]===6&&s.label<a[1]){s.label=a[1],a=h;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(h);break}a[2]&&s.ops.pop(),s.trys.pop();continue}h=e.call(t,s)}catch(g){h=[6,g],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Fpe=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=oh.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=oh.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return Lpe(this,void 0,void 0,function(){var e,s,r,i,a,o,c;return Ope(this,function(d){switch(d.label){case 0:return e=function(h){for(var g=h.getVideoTracks(),m=0,p=g;m<p.length;m++){var v=p[m];v.enabled=!1,v.stop(),h.removeTrack(v)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return s=d.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=d.sent(),i=[],a=0,o=r;a<o.length;a++)c=o[a],c.kind==="videoinput"&&i.push({id:c.deviceId,label:c.label});return e(s),[2,i]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,s){var r=function(a){for(var o=[],c=0,d=a;c<d.length;c++){var h=d[c];h.kind==="video"&&o.push({id:h.id,label:h.label})}e(o)},i=MediaStreamTrack;i.getSources(r)})},t}(),or;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(or||(or={}));var Bpe=function(){function t(){this.state=or.NOT_STARTED,this.onGoingTransactionNewState=or.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===or.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=or.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===or.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=or.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==or.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case or.UNKNOWN:throw"Transition from unknown is not allowed";case or.NOT_STARTED:this.failIfNewStateIs(e,[or.PAUSED]);break;case or.SCANNING:break;case or.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,s){for(var r=0,i=s;r<i.length;r++){var a=i[r];if(e===a)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),zpe=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===or.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==or.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===or.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===or.PAUSED},t}(),Vpe=function(){function t(){}return t.create=function(){return new zpe(new Bpe)},t}(),$pe=function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,s)};return function(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(e,s);function r(){this.constructor=e}e.prototype=s===null?Object.create(s):(r.prototype=s.prototype,new r)}}(),ma=function(t){$pe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(jpe),Upe=function(){function t(e,s){this.logger=s,this.fps=ma.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=ma.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Zz.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!bl(this.qrbox)},t.create=function(e,s){return new t(e,s)},t}(),Yv=function(){function t(e,s){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof s=="boolean"?this.verbose=s===!0:s&&(r=s,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new Npe(this.verbose),this.qrcode=new _pe(this.getSupportedFormats(s),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Vpe.create()}return t.prototype.start=function(e,s,r,i){var a=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var o;i?o=i:o=this.verbose?this.logger.log:function(){};var c=Upe.create(s,this.logger);this.clearElement();var d=!1;c.videoConstraints&&(c.isMediaStreamConstraintsValid()?d=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var h=d,g=document.getElementById(this.elementId);g.clientWidth?g.clientWidth:ma.DEFAULT_WIDTH,g.style.position="relative",this.shouldScan=!0,this.element=g;var m=this,p=this.stateManagerProxy.startTransition(or.SCANNING);return new Promise(function(v,j){var N=h?c.videoConstraints:m.createVideoConstraints(e);if(!N){p.cancel(),j("videoConstraints should be defined");return}var E={};(!h||c.aspectRatio)&&(E.aspectRatio=c.aspectRatio);var _={onRenderSurfaceReady:function(S,C){m.setupUi(S,C,c),m.isScanning=!0,m.foreverScan(c,r,o)}};Rpe.failIfNotSupported().then(function(S){S.create(N).then(function(C){return C.render(a.element,E,_).then(function(I){m.renderedCamera=I,p.execute(),v(null)}).catch(function(I){p.cancel(),j(I)})}).catch(function(C){p.cancel(),j(oh.errorGettingUserMedia(C))})}).catch(function(S){p.cancel(),j(oh.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(or.PAUSED),this.showPausedState(),(bl(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,s=function(){e.stateManagerProxy.directTransition(or.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){s();return}this.renderedCamera.resume(function(){s()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var s=this.stateManagerProxy.startTransition(or.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var a=document.getElementById(ma.SHADED_REGION_ELEMENT_ID);a&&e.element.removeChild(a)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),s.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,s){return this.scanFileV2(e,s).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,s){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(bl(s)&&(s=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,a){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var o=new Image;o.onload=function(){var c=o.width,d=o.height,h=document.getElementById(r.elementId),g=h.clientWidth?h.clientWidth:ma.DEFAULT_WIDTH,m=Math.max(h.clientHeight?h.clientHeight:d,ma.FILE_SCAN_MIN_HEIGHT),p=r.computeCanvasDrawConfig(c,d,g,m);if(s){var v=r.createCanvasElement(g,m,"qr-canvas-visible");v.style.display="inline-block",h.appendChild(v);var j=v.getContext("2d");if(!j)throw"Unable to get 2d context from canvas";j.canvas.width=g,j.canvas.height=m,j.drawImage(o,0,0,c,d,p.x,p.y,p.width,p.height)}var N=ma.FILE_SCAN_HIDDEN_CANVAS_PADDING,E=Math.max(o.width,p.width),_=Math.max(o.height,p.height),S=E+2*N,C=_+2*N,I=r.createCanvasElement(S,C);h.appendChild(I);var P=I.getContext("2d");if(!P)throw"Unable to get 2d context from canvas";P.canvas.width=S,P.canvas.height=C,P.drawImage(o,0,0,c,d,N,N,E,_);try{r.qrcode.decodeRobustlyAsync(I).then(function(L){i(nT.createFromQrcodeResult(L))}).catch(a)}catch(L){a("QR code parse error, error = ".concat(L))}},o.onerror=a,o.onabort=a,o.onstalled=a,o.onsuspend=a,o.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return Fpe.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!Zz.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var s=[Mt.QR_CODE,Mt.AZTEC,Mt.CODABAR,Mt.CODE_39,Mt.CODE_93,Mt.CODE_128,Mt.DATA_MATRIX,Mt.MAXICODE,Mt.ITF,Mt.EAN_13,Mt.EAN_8,Mt.PDF_417,Mt.RSS_14,Mt.RSS_EXPANDED,Mt.UPC_A,Mt.UPC_E,Mt.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return s;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,a=e.formatsToSupport;i<a.length;i++){var o=a[i];wpe(o)?r.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(bl(e))return!0;if(!bl(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(bl(e.experimentalFeatures))return!0;var s=e.experimentalFeatures;return bl(s.useBarCodeDetectorIfSupported)?!0:s.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,s,r){var i=this,a=r.qrbox;this.validateQrboxConfig(a);var o=this.toQrdimensions(e,s,a),c=function(h){if(h<ma.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ma.MIN_QR_BOX_SIZE,"px.")},d=function(h){return h>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),h=e),h};c(o.width),c(o.height),o.width=d(o.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,s,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,s)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},t.prototype.setupUi=function(e,s,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,s,r);var i=bl(r.qrbox)?{width:e,height:s}:r.qrbox;this.validateQrboxConfig(i);var a=this.toQrdimensions(e,s,i);a.height>s&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=r.isShadedBoxEnabled()&&a.height<=s,c={x:0,y:0,width:e,height:s},d=o?this.getShadedRegionBounds(e,s,a):c,h=this.createCanvasElement(d.width,d.height),g={willReadFrequently:!0},m=h.getContext("2d",g);m.canvas.width=d.width,m.canvas.height=d.height,this.element.append(h),o&&this.possiblyInsertShadingElement(this.element,e,s,a),this.createScannerPausedUiElement(this.element),this.qrRegion=d,this.context=m,this.canvasElement=h},t.prototype.createScannerPausedUiElement=function(e){var s=document.createElement("div");s.innerText=oh.scannerPaused(),s.style.display="none",s.style.position="absolute",s.style.top="0px",s.style.zIndex="1",s.style.background="rgba(9, 9, 9, 0.46)",s.style.color="#FFECEC",s.style.textAlign="center",s.style.width="100%",e.appendChild(s),this.scannerPausedUiElement=s},t.prototype.scanContext=function(e,s){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,nT.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var a=oh.codeParseError(i);return s(a,bpe.createFrom(a)),!1})},t.prototype.foreverScan=function(e,s,r){var i=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),o=a.videoWidth/a.clientWidth,c=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var d=this.qrRegion.width*o,h=this.qrRegion.height*c,g=this.qrRegion.x*o,m=this.qrRegion.y*c;this.context.drawImage(a,g,m,d,h,0,0,this.qrRegion.width,this.qrRegion.height);var p=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,s,r)},i.getTimeoutFps(e.fps))};this.scanContext(s,r).then(function(v){!v&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(s,r).finally(function(){p()})):p()}).catch(function(v){i.logger.logError("Error happend while scanning context",v),p()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var s="facingMode",r="deviceId",i={user:!0,environment:!0},a="exact",o=function(j){if(j in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(j,"'")},c=Object.keys(e);if(c.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(c.length," keys");var d=Object.keys(e)[0];if(d!==s&&d!==r)throw"Only '".concat(s,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(d===s){var h=e.facingMode;if(typeof h=="string"){if(o(h))return{facingMode:h}}else if(typeof h=="object")if(a in h){if(o(h["".concat(a)]))return{facingMode:{exact:h["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var g=typeof h;throw"Invalid type of 'facingMode' = ".concat(g)}}else{var m=e.deviceId;if(typeof m=="string")return{deviceId:m};if(typeof m=="object"){if(a in m)return{deviceId:{exact:m["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var p=typeof m;throw"Invalid type of 'deviceId' = ".concat(p)}}}var v=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(v)},t.prototype.computeCanvasDrawConfig=function(e,s,r,i){if(e<=r&&s<=i){var a=(r-e)/2,o=(i-s)/2;return{x:a,y:o,width:e,height:s}}else{var c=e,d=s;return e>r&&(s=r/e*s,e=r),s>i&&(e=i/s*e,s=i),this.logger.log("Image downsampled from "+"".concat(c,"X").concat(d)+" to ".concat(e,"X").concat(s,".")),this.computeCanvasDrawConfig(e,s,r,i)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(s){s.style.backgroundColor=e?ma.BORDER_SHADER_MATCH_COLOR:ma.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,s,r){var i=e,a=s,o=document.createElement("canvas");return o.style.width="".concat(i,"px"),o.style.height="".concat(a,"px"),o.style.display="none",o.id=bl(r)?"qr-canvas":r,o},t.prototype.getShadedRegionBounds=function(e,s,r){if(r.width>e||r.height>s)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(s-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,s,r,i){if(!(s-i.width<1||r-i.height<1)){var a=document.createElement("div");a.style.position="absolute";var o=(s-i.width)/2,c=(r-i.height)/2;if(a.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(ma.SHADED_REGION_ELEMENT_ID),s-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var d=5,h=40;this.insertShaderBorders(a,h,d,-d,null,0,!0),this.insertShaderBorders(a,h,d,-d,null,0,!1),this.insertShaderBorders(a,h,d,null,-d,0,!0),this.insertShaderBorders(a,h,d,null,-d,0,!1),this.insertShaderBorders(a,d,h+d,-d,null,-d,!0),this.insertShaderBorders(a,d,h+d,null,-d,-d,!0),this.insertShaderBorders(a,d,h+d,-d,null,-d,!1),this.insertShaderBorders(a,d,h+d,null,-d,-d,!1),this.hasBorderShaders=!0}e.append(a)}},t.prototype.insertShaderBorders=function(e,s,r,i,a,o,c){var d=document.createElement("div");d.style.position="absolute",d.style.backgroundColor=ma.BORDER_SHADER_DEFAULT_COLOR,d.style.width="".concat(s,"px"),d.style.height="".concat(r,"px"),i!==null&&(d.style.top="".concat(i,"px")),a!==null&&(d.style.bottom="".concat(a,"px")),c?d.style.left="".concat(o,"px"):d.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(d),e.appendChild(d)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),cT;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(cT||(cT={}));function Xz({onScan:t,onError:e,onClose:s,title:r="Scan Inventory Barcode",description:i="Position the barcode within the scanning area",cameraId:a,fps:o=10,showClose:c=!0}){var M;const[d,h]=y.useState(!1),[g,m]=y.useState([]),[p,v]=y.useState(a),[j,N]=y.useState(null),[E,_]=y.useState(null),S=y.useRef(null),C="barcode-scanner",I=["code_128","code_39","ean_13","ean_8","upc_a","upc_e","codabar"],P=()=>{if(!p||!S.current)return;N(null),h(!0);const k={fps:o,formatsToSupport:I,experimentalFeatures:{useBarCodeDetectorIfSupported:!0}};S.current.start({deviceId:p},k,O=>{_(O),t(O)},O=>{console.debug("Barcode scan error:",O)}).catch(O=>{h(!1),N("Failed to start scanner: "+O.message),e&&e(O.message)})},L=()=>{S.current&&S.current.isScanning&&S.current.stop().then(()=>{h(!1)}).catch(k=>{console.error("Error stopping scanner:",k),h(!1)})},T=()=>{if(d&&L(),g.length>1){const O=(g.findIndex(V=>V.id===p)+1)%g.length;v(g[O].id)}};return y.useEffect(()=>(S.current=new Yv(C),Yv.getCameras().then(k=>{if(k&&k.length>0){m(k);const O=a||k[0].id;if(v(O),S.current){const V={fps:o,formatsToSupport:I,experimentalFeatures:{useBarCodeDetectorIfSupported:!0}};S.current.start({deviceId:O},V,B=>{_(B),t(B)},B=>{console.debug("Barcode scan error:",B)}).then(()=>{h(!0)}).catch(B=>{console.error("Failed to start scanner:",B.message),N("Camera error: "+B.message),e&&e(B.message)})}}}).catch(k=>{N("Camera access error: "+k.message),e&&e(k.message)}),()=>{S.current&&S.current.isScanning&&S.current.stop().catch(k=>console.error("Error stopping scanner:",k))}),[]),y.useEffect(()=>{!p||!S.current||d&&S.current.stop().then(()=>{P()}).catch(k=>{console.error("Error stopping scanner:",k),h(!1)})},[p]),n.jsxs(Ae,{className:"w-full max-w-md mx-auto",children:[n.jsx(Be,{className:"pb-2",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs(Ve,{className:"flex items-center",children:[n.jsx(ki,{className:"h-5 w-5 mr-2 text-primary"}),r]}),n.jsx(ct,{children:i})]}),c&&s&&n.jsx(H,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8",children:n.jsx(ys,{className:"h-4 w-4"})})]})}),n.jsx(Ee,{children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("div",{id:C,className:"w-full h-64 bg-muted rounded-md overflow-hidden relative flex items-center justify-center",children:!d&&n.jsxs("div",{className:"text-center p-4",children:[n.jsx(ki,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"Camera preview will appear here"})]})}),j&&n.jsx(Cr,{variant:"destructive",children:n.jsx(Sr,{children:j})}),E&&n.jsx(Cr,{children:n.jsxs(Sr,{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium",children:"Last scanned:"}),n.jsx("span",{className:"font-mono text-sm",children:E})]})}),g.length>0&&n.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[n.jsx(JC,{className:"h-4 w-4"}),n.jsxs("span",{children:["Using camera: ",((M=g.find(k=>k.id===p))==null?void 0:M.label)||"Unknown"]})]})]})}),n.jsxs(Pn,{className:"flex gap-2 pt-0",children:[d?n.jsxs(H,{onClick:()=>L(),variant:"outline",className:"flex-1 gap-1",children:[n.jsx(ys,{className:"h-4 w-4"}),"Stop Scanning"]}):n.jsxs(H,{onClick:()=>P(),className:"flex-1 gap-1",disabled:!p,children:[n.jsx(em,{className:"h-4 w-4"}),"Start Scanning"]}),g.length>1&&n.jsx(H,{onClick:()=>T(),variant:"outline",className:"gap-1",title:"Switch camera",children:n.jsx(Ed,{className:"h-4 w-4"})})]})]})}const Wpe=q.object({name:q.string().min(3,{message:"Name must be at least 3 characters."}),type:q.string({required_error:"Please select a report type."}),startDate:q.date({required_error:"Start date is required."}),endDate:q.date({required_error:"End date is required."}).refine((t,e)=>{const{startDate:s}=e.parent;return s?t>s:!0},{message:"End date must be after start date."}),scheduleFrequency:q.string().default("on-demand"),isPublic:q.boolean().default(!1),notes:q.string().optional()});function Hpe({reportToEdit:t,onClose:e}){const{toast:s}=Lt(),r=jn(),[i,a]=y.useState(!0),[o,c]=y.useState(!!(t!=null&&t.scheduleFrequency)||(t==null?void 0:t.isPublic)),d=zse||["income_statement","balance_sheet","cash_flow","profit_loss","expense_summary","revenue_by_service","technician_productivity","chemical_usage","route_profitability","custom"],h={name:(t==null?void 0:t.name)||"",type:(t==null?void 0:t.type)||"",startDate:t!=null&&t.startDate?new Date(t.startDate):new Date(new Date().getFullYear(),new Date().getMonth(),1),endDate:t!=null&&t.endDate?new Date(t.endDate):new Date,scheduleFrequency:(t==null?void 0:t.scheduleFrequency)||"on-demand",isPublic:(t==null?void 0:t.isPublic)||!1,notes:(t==null?void 0:t.notes)||""},g=mn({resolver:pn(Wpe),defaultValues:h}),m=Pt({mutationFn:async N=>{const E={...N,createdBy:1};return t!=null&&t.id?pt(`/api/business/reports/${t.id}`,{method:"PATCH",body:JSON.stringify(E)}):pt("/api/business/reports",{method:"POST",body:JSON.stringify(E)})},onSuccess:()=>{s({title:t!=null&&t.id?"Report updated":"Report created",description:t!=null&&t.id?"The financial report has been updated successfully.":"A new financial report has been created successfully."}),r.invalidateQueries({queryKey:["/api/business/reports"]}),v()},onError:N=>{s({title:"Error",description:`Failed to ${t!=null&&t.id?"update":"create"} report. ${N.message}`,variant:"destructive"})}});function p(N){m.mutate(N)}function v(){a(!1),e()}const j=N=>N.split("_").map(E=>E.charAt(0).toUpperCase()+E.slice(1)).join(" ");return n.jsx(An,{open:i,onOpenChange:a,children:n.jsxs(wn,{className:"sm:max-w-[600px]",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:t!=null&&t.id?"Edit Financial Report":"Create Financial Report"}),n.jsx(ws,{children:t!=null&&t.id?"Update the details of this financial report.":"Define a new financial report to analyze your business data."})]}),n.jsx(fn,{...g,children:n.jsxs("form",{onSubmit:g.handleSubmit(p),className:"space-y-4",children:[n.jsx(J,{control:g.control,name:"name",render:({field:N})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Report Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter report name",...N})}),n.jsx(ne,{})]})}),n.jsx(J,{control:g.control,name:"type",render:({field:N})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Report Type"}),n.jsxs(gt,{onValueChange:N.onChange,value:N.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select report type"})})}),n.jsx(ht,{children:d.map(E=>n.jsx(ue,{value:E,children:j(E)},E))})]}),n.jsx(ot,{children:"Select the type of financial report you want to generate."}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:g.control,name:"startDate",render:({field:N})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Start Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:we("w-full pl-3 text-left font-normal",!N.value&&"text-muted-foreground"),children:[N.value?ft(N.value,"PPP"):n.jsx("span",{children:"Pick a date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:N.value,onSelect:N.onChange,initialFocus:!0})})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:g.control,name:"endDate",render:({field:N})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"End Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:we("w-full pl-3 text-left font-normal",!N.value&&"text-muted-foreground"),children:[N.value?ft(N.value,"PPP"):n.jsx("span",{children:"Pick a date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:N.value,onSelect:N.onChange,initialFocus:!0})})]}),n.jsx(ne,{})]})})]}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs(H,{type:"button",variant:"outline",onClick:()=>c(!o),className:"gap-1",children:[n.jsx(Hs,{className:"h-4 w-4"}),o?"Hide Advanced Settings":"Show Advanced Settings"]})}),o&&n.jsxs(n.Fragment,{children:[n.jsx(J,{control:g.control,name:"scheduleFrequency",render:({field:N})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Schedule Frequency (Optional)"}),n.jsxs(gt,{onValueChange:N.onChange,value:N.value||"on-demand",children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Run on-demand only"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"on-demand",children:"On-demand only"}),n.jsx(ue,{value:"daily",children:"Daily"}),n.jsx(ue,{value:"weekly",children:"Weekly"}),n.jsx(ue,{value:"monthly",children:"Monthly"}),n.jsx(ue,{value:"quarterly",children:"Quarterly"}),n.jsx(ue,{value:"yearly",children:"Yearly"})]})]}),n.jsx(ot,{children:"How often should this report be automatically generated?"}),n.jsx(ne,{})]})}),n.jsx(J,{control:g.control,name:"isPublic",render:({field:N})=>n.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[n.jsx(Q,{children:n.jsx(Ri,{checked:N.value,onCheckedChange:N.onChange})}),n.jsxs("div",{className:"space-y-1 leading-none",children:[n.jsx(X,{children:"Make report public"}),n.jsx(ot,{children:"Public reports are accessible to all team members. Private reports are only visible to you and administrators."})]})]})}),n.jsx(J,{control:g.control,name:"notes",render:({field:N})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Notes (Optional)"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter any additional details about this report",...N,value:N.value||"",rows:3})}),n.jsx(ne,{})]})})]}),n.jsxs(hs,{children:[n.jsxs(H,{type:"button",variant:"outline",onClick:v,className:"gap-1",children:[n.jsx(ys,{className:"h-4 w-4"})," Cancel"]}),n.jsxs(H,{type:"submit",disabled:m.isPending,className:"gap-1",children:[m.isPending&&n.jsx(Kt,{className:"h-4 w-4 animate-spin"}),t!=null&&t.id?"Update Report":"Create Report"]})]})]})})]})})}const qpe=q.object({name:q.string({required_error:"Vendor name is required"}).min(2,"Vendor name must be at least 2 characters"),category:q.string({required_error:"Category is required"}),contactName:q.string().optional(),email:q.string().email("Invalid email address").optional().or(q.literal("")),phone:q.string().optional(),address:q.string().optional(),website:q.string().url("Invalid website URL").optional().or(q.literal("")),notes:q.string().optional(),isActive:q.boolean().default(!0)});function Gpe({vendorCategories:t,vendorToEdit:e,onClose:s}){const{toast:r}=Lt(),i=jn(),[a,o]=y.useState(!0),c=t||["chemical supplier","equipment","parts","service","tools","office","utilities","marketing","other"],d={name:(e==null?void 0:e.name)||"",category:(e==null?void 0:e.category)||"",contactName:(e==null?void 0:e.contactName)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||"",website:(e==null?void 0:e.website)||"",notes:(e==null?void 0:e.notes)||"",isActive:(e==null?void 0:e.isActive)??!0},h=mn({resolver:pn(qpe),defaultValues:d}),g=Pt({mutationFn:async j=>e!=null&&e.id?pt(`/api/business/vendors/${e.id}`,{method:"PATCH",body:JSON.stringify(j)}):pt("/api/business/vendors",{method:"POST",body:JSON.stringify(j)}),onSuccess:()=>{r({title:e!=null&&e.id?"Vendor updated":"Vendor created",description:e!=null&&e.id?"The vendor has been updated successfully.":"A new vendor has been created successfully."}),i.invalidateQueries({queryKey:["/api/business/vendors"]}),p()},onError:j=>{r({title:"Error",description:`Failed to ${e!=null&&e.id?"update":"create"} vendor. ${j.message}`,variant:"destructive"})}});function m(j){g.mutate(j)}function p(){o(!1),s()}const v=j=>j.split("_").map(N=>N.charAt(0).toUpperCase()+N.slice(1)).join(" ");return n.jsx(An,{open:a,onOpenChange:o,children:n.jsxs(wn,{className:"w-[calc(100%-2rem)] max-w-[95vw] sm:max-w-[600px] md:w-full overflow-y-auto max-h-[85vh]",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:e!=null&&e.id?"Edit Vendor":"Add New Vendor"}),n.jsx(ws,{children:e!=null&&e.id?"Update the details of this vendor.":"Enter the details of the new vendor."})]}),n.jsx(fn,{...h,children:n.jsxs("form",{onSubmit:h.handleSubmit(m),className:"space-y-4",children:[n.jsx(J,{control:h.control,name:"name",render:({field:j})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Vendor Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter vendor name",...j,className:"w-full"})}),n.jsx(ne,{})]})}),n.jsx(J,{control:h.control,name:"category",render:({field:j})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Category"}),n.jsxs(gt,{onValueChange:j.onChange,defaultValue:j.value,children:[n.jsx(Q,{children:n.jsx(ut,{className:"w-full",children:n.jsx(xt,{placeholder:"Select a category"})})}),n.jsx(ht,{children:c.map(N=>n.jsx(ue,{value:N,children:v(N)},N))})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:h.control,name:"contactName",render:({field:j})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Contact Name (Optional)"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Primary contact person",...j,value:j.value||"",className:"w-full"})}),n.jsx(ne,{})]})}),n.jsx(J,{control:h.control,name:"email",render:({field:j})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Email (Optional)"}),n.jsx(Q,{children:n.jsx(ve,{type:"email",placeholder:"contact@vendor.com",...j,value:j.value||"",className:"w-full"})}),n.jsx(ne,{})]})}),n.jsx(J,{control:h.control,name:"phone",render:({field:j})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Phone (Optional)"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"555-123-4567",...j,value:j.value||"",className:"w-full"})}),n.jsx(ne,{})]})}),n.jsx(J,{control:h.control,name:"website",render:({field:j})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Website (Optional)"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"https://www.vendor.com",...j,value:j.value||"",className:"w-full"})}),n.jsx(ne,{})]})}),n.jsx(J,{control:h.control,name:"address",render:({field:j})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Address (Optional)"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Vendor address",...j,value:j.value||"",className:"w-full"})}),n.jsx(ne,{})]})}),n.jsx(J,{control:h.control,name:"isActive",render:({field:j})=>n.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[n.jsx(Q,{children:n.jsx(Ri,{checked:j.value,onCheckedChange:j.onChange})}),n.jsxs("div",{className:"space-y-1 leading-none",children:[n.jsx(X,{children:"Active Vendor"}),n.jsx(ot,{className:"text-xs sm:text-sm",children:"Inactive vendors will not appear in select dropdowns for new orders."})]})]})}),n.jsx(J,{control:h.control,name:"notes",render:({field:j})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Notes (Optional)"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter any additional notes about this vendor",...j,value:j.value||"",className:"w-full min-h-[80px]"})}),n.jsx(ne,{})]})}),n.jsxs(hs,{className:"flex flex-col sm:flex-row gap-2 sm:gap-0 pt-2",children:[n.jsxs(H,{type:"button",variant:"outline",onClick:p,className:"gap-1 w-full sm:w-auto",children:[n.jsx(ys,{className:"h-4 w-4"})," Cancel"]}),n.jsxs(H,{type:"submit",disabled:g.isPending,className:"gap-1 w-full sm:w-auto",children:[g.isPending&&n.jsx(Kt,{className:"h-4 w-4 animate-spin"}),e!=null&&e.id?"Update Vendor":"Create Vendor"]})]})]})})]})})}const Ype=q.object({itemId:q.coerce.number().optional(),description:q.string().min(2,"Description is required"),quantity:q.coerce.number().min(1,"Quantity must be at least 1"),unitPrice:q.coerce.number().min(.01,"Price must be greater than 0"),total:q.coerce.number().optional()}),Kpe=q.object({vendorId:q.coerce.number({required_error:"Vendor is required"}),orderDate:q.date({required_error:"Order date is required"}),expectedDeliveryDate:q.date().optional(),status:q.string({required_error:"Status is required"}).default("draft"),paymentStatus:q.string({required_error:"Payment status is required"}).default("unpaid"),shippingAddress:q.string().optional(),notes:q.string().optional(),items:q.array(Ype).min(1,"At least one item is required")});function Zpe({orderToEdit:t,onClose:e}){var L;const{toast:s}=Lt(),r=jn(),[i,a]=y.useState(!0),{data:o,isLoading:c}=wt({queryKey:["/api/business/vendors"]});wt({queryKey:["/api/business/inventory"]});const d=T=>T.reduce((M,k)=>M+k.quantity*k.unitPrice,0),h={vendorId:t==null?void 0:t.vendorId,orderDate:t!=null&&t.orderDate?new Date(t.orderDate):new Date,expectedDeliveryDate:t!=null&&t.expectedDeliveryDate?new Date(t.expectedDeliveryDate):void 0,status:(t==null?void 0:t.status)||"draft",paymentStatus:(t==null?void 0:t.paymentStatus)||"unpaid",shippingAddress:(t==null?void 0:t.shippingAddress)||"",notes:(t==null?void 0:t.notes)||"",items:(L=t==null?void 0:t.items)!=null&&L.length?t.items.map(T=>({itemId:T.itemId,description:T.description,quantity:T.quantity,unitPrice:T.unitPrice,total:T.quantity*T.unitPrice})):[{description:"",quantity:1,unitPrice:0,total:0}]},g=mn({resolver:pn(Kpe),defaultValues:h}),{fields:m,append:p,remove:v}=ste({control:g.control,name:"items"}),j=g.watch("items"),N=d(j||[]),E=T=>{const k=g.getValues("items")[T],O=k.quantity*k.unitPrice;g.setValue(`items.${T}.total`,O)},_=Pt({mutationFn:async T=>{const M=T.items.map(V=>({...V,total:V.quantity*V.unitPrice})),k=M.reduce((V,B)=>V+(B.total||0),0),O={...T,items:M,totalAmount:k};return t!=null&&t.id?pt(`/api/business/purchase-orders/${t.id}`,{method:"PATCH",body:JSON.stringify(O)}):pt("/api/business/purchase-orders",{method:"POST",body:JSON.stringify(O)})},onSuccess:()=>{s({title:t!=null&&t.id?"Purchase order updated":"Purchase order created",description:t!=null&&t.id?"The purchase order has been updated successfully.":"A new purchase order has been created successfully."}),r.invalidateQueries({queryKey:["/api/business/purchase-orders"]}),r.invalidateQueries({queryKey:["/api/business/dashboard"]}),C()},onError:T=>{s({title:"Error",description:`Failed to ${t!=null&&t.id?"update":"create"} purchase order. ${T.message}`,variant:"destructive"})}});function S(T){_.mutate(T)}function C(){a(!1),e()}const I=()=>{p({description:"",quantity:1,unitPrice:0,total:0})},P=T=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(T);return n.jsx(An,{open:i,onOpenChange:a,children:n.jsxs(wn,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:t!=null&&t.id?`Edit Purchase Order ${t.orderNumber||"#"+t.id}`:"Create Purchase Order"}),n.jsx(ws,{children:t!=null&&t.id?`Update details for this purchase order to ${t.vendorName||"vendor"}.`:"Fill out the details to create a new vendor purchase order."})]}),n.jsx(fn,{...g,children:n.jsxs("form",{onSubmit:g.handleSubmit(S),className:"space-y-4",children:[n.jsx(J,{control:g.control,name:"vendorId",render:({field:T})=>{var M;return n.jsxs(Z,{children:[n.jsx(X,{children:"Vendor"}),n.jsxs(gt,{onValueChange:k=>T.onChange(parseInt(k)),value:(M=T.value)==null?void 0:M.toString(),disabled:c,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a vendor"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"1",children:"Pool Supply Warehouse"}),n.jsx(ue,{value:"2",children:"Equipment Pros"}),n.jsx(ue,{value:"3",children:"Pool Parts Direct"}),n.jsx(ue,{value:"4",children:"Office Supplies Inc"})]})]}),n.jsx(ne,{})]})}}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:g.control,name:"orderDate",render:({field:T})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Order Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:we("w-full pl-3 text-left font-normal",!T.value&&"text-muted-foreground"),children:[T.value?ft(T.value,"PPP"):n.jsx("span",{children:"Pick a date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:T.value,onSelect:T.onChange,initialFocus:!0})})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:g.control,name:"expectedDeliveryDate",render:({field:T})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Expected Delivery Date (Optional)"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:we("w-full pl-3 text-left font-normal",!T.value&&"text-muted-foreground"),children:[T.value?ft(T.value,"PPP"):n.jsx("span",{children:"Pick a date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:T.value||void 0,onSelect:T.onChange,disabled:M=>M<new Date,initialFocus:!0})})]}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:g.control,name:"status",render:({field:T})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Order Status"}),n.jsxs(gt,{onValueChange:T.onChange,value:T.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select order status"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"draft",children:"Draft"}),n.jsx(ue,{value:"pending",children:"Pending"}),n.jsx(ue,{value:"approved",children:"Approved"}),n.jsx(ue,{value:"shipped",children:"Shipped"}),n.jsx(ue,{value:"received",children:"Received"}),n.jsx(ue,{value:"cancelled",children:"Cancelled"})]})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:g.control,name:"paymentStatus",render:({field:T})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Payment Status"}),n.jsxs(gt,{onValueChange:T.onChange,value:T.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select payment status"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"unpaid",children:"Unpaid"}),n.jsx(ue,{value:"partial",children:"Partial"}),n.jsx(ue,{value:"paid",children:"Paid"})]})]}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:g.control,name:"shippingAddress",render:({field:T})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Shipping Address (Optional)"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter shipping address",...T,value:T.value||""})}),n.jsx(ne,{})]})}),n.jsx(J,{control:g.control,name:"notes",render:({field:T})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Notes (Optional)"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter any additional notes for this order",...T,value:T.value||"",rows:2})}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(X,{className:"text-base",children:"Order Items"}),n.jsxs(H,{type:"button",variant:"outline",size:"sm",onClick:I,className:"gap-1",children:[n.jsx(os,{className:"h-4 w-4"})," Add Item"]})]}),n.jsx(Ae,{children:n.jsxs(Ee,{className:"p-4",children:[m.map((T,M)=>{var k,O;return n.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center mb-4",children:[n.jsx("div",{className:"col-span-5",children:n.jsx(J,{control:g.control,name:`items.${M}.description`,render:({field:V})=>n.jsxs(Z,{children:[n.jsx(Q,{children:n.jsx(ve,{placeholder:"Item description",...V})}),n.jsx(ne,{})]})})}),n.jsx("div",{className:"col-span-2",children:n.jsx(J,{control:g.control,name:`items.${M}.quantity`,render:({field:V})=>n.jsxs(Z,{children:[n.jsx(Q,{children:n.jsx(ve,{type:"number",min:"1",placeholder:"Qty",...V,onChange:B=>{V.onChange(parseInt(B.target.value)),E(M)}})}),n.jsx(ne,{})]})})}),n.jsx("div",{className:"col-span-2",children:n.jsx(J,{control:g.control,name:`items.${M}.unitPrice`,render:({field:V})=>n.jsxs(Z,{children:[n.jsx(Q,{children:n.jsx(ve,{type:"number",step:"0.01",min:"0",placeholder:"Price",...V,onChange:B=>{V.onChange(parseFloat(B.target.value)),E(M)}})}),n.jsx(ne,{})]})})}),n.jsx("div",{className:"col-span-2 text-right font-medium",children:P((((k=j[M])==null?void 0:k.quantity)||0)*(((O=j[M])==null?void 0:O.unitPrice)||0))}),n.jsx("div",{className:"col-span-1",children:n.jsx(H,{type:"button",variant:"ghost",size:"icon",onClick:()=>m.length>1&&v(M),disabled:m.length<=1,children:n.jsx(Ni,{className:"h-4 w-4"})})})]},T.id)}),n.jsx("div",{className:"border-t pt-4 flex justify-end",children:n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Order Total"}),n.jsx("p",{className:"text-lg font-bold",children:P(N)})]})})]})})]}),n.jsxs(hs,{children:[n.jsxs(H,{type:"button",variant:"outline",onClick:C,className:"gap-1",children:[n.jsx(ys,{className:"h-4 w-4"})," Cancel"]}),n.jsxs(H,{type:"submit",disabled:_.isPending,className:"gap-1",children:[_.isPending&&n.jsx(Kt,{className:"h-4 w-4 animate-spin"}),t!=null&&t.id?"Update Order":"Create Order"]})]})]})})]})})}const Qpe=q.object({name:q.string({required_error:"Item name is required"}).min(2,"Item name must be at least 2 characters"),sku:q.string({required_error:"SKU is required"}).min(2,"SKU must be at least 2 characters"),category:q.string({required_error:"Category is required"}),description:q.string().optional(),quantity:q.coerce.number({required_error:"Quantity is required",invalid_type_error:"Quantity must be a number"}).min(0,"Quantity cannot be negative"),minQuantity:q.coerce.number({required_error:"Minimum quantity is required",invalid_type_error:"Minimum quantity must be a number"}).min(0,"Minimum quantity cannot be negative"),unitPrice:q.coerce.number({required_error:"Unit price is required",invalid_type_error:"Unit price must be a number"}).min(0,"Unit price cannot be negative"),location:q.string().optional(),lastRestockDate:q.date().optional(),notes:q.string().optional()});function Xpe({itemCategories:t,itemToEdit:e,onClose:s}){const{toast:r}=Lt(),i=jn(),[a,o]=y.useState(!0),c=t||["chemicals","equipment","parts","tools","office","safety","other"],d={name:(e==null?void 0:e.name)||"",sku:(e==null?void 0:e.sku)||"",category:(e==null?void 0:e.category)||"",description:(e==null?void 0:e.description)||"",quantity:(e==null?void 0:e.quantity)||0,minQuantity:(e==null?void 0:e.minQuantity)||0,unitPrice:e!=null&&e.unitPrice?e.unitPrice/100:void 0,location:(e==null?void 0:e.location)||"",lastRestockDate:e!=null&&e.lastRestockDate?new Date(e.lastRestockDate):void 0,notes:(e==null?void 0:e.notes)||""},h=mn({resolver:pn(Qpe),defaultValues:d}),g=Pt({mutationFn:async j=>{const N={...j,unitPrice:Math.round(j.unitPrice*100)};return e!=null&&e.id?pt(`/api/business/inventory/${e.id}`,{method:"PATCH",body:JSON.stringify(N)}):pt("/api/business/inventory",{method:"POST",body:JSON.stringify(N)})},onSuccess:()=>{r({title:e!=null&&e.id?"Inventory item updated":"Inventory item created",description:e!=null&&e.id?"The inventory item has been updated successfully.":"A new inventory item has been created successfully."}),i.invalidateQueries({queryKey:["/api/business/inventory"]}),p()},onError:j=>{r({title:"Error",description:`Failed to ${e!=null&&e.id?"update":"create"} inventory item. ${j.message}`,variant:"destructive"})}});function m(j){g.mutate(j)}function p(){o(!1),s()}const v=j=>j.charAt(0).toUpperCase()+j.slice(1);return n.jsx(An,{open:a,onOpenChange:o,children:n.jsxs(wn,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto w-[95vw]",children:[n.jsxs(Tn,{className:"px-2 sm:px-4",children:[n.jsx(Mn,{children:e!=null&&e.id?"Edit Inventory Item":"Add Inventory Item"}),n.jsx(ws,{children:e!=null&&e.id?"Update the details of this inventory item.":"Enter the details of the new inventory item."})]}),n.jsx(fn,{...h,children:n.jsxs("form",{onSubmit:h.handleSubmit(m),className:"space-y-3 px-1 sm:px-3",children:[n.jsx(J,{control:h.control,name:"name",render:({field:j})=>n.jsxs(Z,{className:"space-y-1",children:[n.jsx(X,{className:"text-sm font-medium",children:"Item Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter item name",...j,className:"text-base"})}),n.jsx(ne,{className:"text-xs"})]})}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsx(J,{control:h.control,name:"sku",render:({field:j})=>n.jsxs(Z,{className:"space-y-1",children:[n.jsx(X,{className:"text-sm font-medium",children:"SKU"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter SKU",...j,className:"text-base"})}),n.jsx(ne,{className:"text-xs"})]})}),n.jsx(J,{control:h.control,name:"category",render:({field:j})=>n.jsxs(Z,{className:"space-y-1",children:[n.jsx(X,{className:"text-sm font-medium",children:"Category"}),n.jsxs(gt,{onValueChange:j.onChange,defaultValue:j.value,children:[n.jsx(Q,{children:n.jsx(ut,{className:"text-base",children:n.jsx(xt,{placeholder:"Select a category"})})}),n.jsx(ht,{children:c.map(N=>n.jsx(ue,{value:N,children:v(N)},N))})]}),n.jsx(ne,{className:"text-xs"})]})})]}),n.jsx(J,{control:h.control,name:"description",render:({field:j})=>n.jsxs(Z,{className:"space-y-1",children:[n.jsx(X,{className:"text-sm font-medium",children:"Description (Optional)"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter item description",...j,value:j.value||"",className:"text-base resize-none min-h-[60px]"})}),n.jsx(ne,{className:"text-xs"})]})}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsx(J,{control:h.control,name:"quantity",render:({field:j})=>n.jsxs(Z,{className:"space-y-1",children:[n.jsx(X,{className:"text-sm font-medium",children:"Current Quantity"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",min:"0",inputMode:"numeric",pattern:"[0-9]*",...j,className:"text-base"})}),n.jsx(ne,{className:"text-xs"})]})}),n.jsx(J,{control:h.control,name:"minQuantity",render:({field:j})=>n.jsxs(Z,{className:"space-y-1",children:[n.jsx(X,{className:"text-sm font-medium",children:"Minimum Quantity"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",min:"0",inputMode:"numeric",pattern:"[0-9]*",...j,className:"text-base"})}),n.jsx(ot,{className:"text-xs",children:"Alert when below this level"}),n.jsx(ne,{className:"text-xs"})]})})]}),n.jsx(J,{control:h.control,name:"unitPrice",render:({field:j})=>n.jsxs(Z,{className:"space-y-1",children:[n.jsx(X,{className:"text-sm font-medium",children:"Unit Price ($)"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",step:"0.01",min:"0",inputMode:"decimal",placeholder:"0.00",...j,className:"text-base"})}),n.jsx(ne,{className:"text-xs"})]})}),n.jsx(J,{control:h.control,name:"location",render:({field:j})=>n.jsxs(Z,{className:"space-y-1",children:[n.jsx(X,{className:"text-sm font-medium",children:"Storage Location (Optional)"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Where is this item stored?",...j,value:j.value||"",className:"text-base"})}),n.jsx(ne,{className:"text-xs"})]})}),n.jsx(J,{control:h.control,name:"lastRestockDate",render:({field:j})=>n.jsxs(Z,{className:"space-y-1",children:[n.jsx(X,{className:"text-sm font-medium",children:"Last Restock Date (Optional)"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:we("w-full px-3 h-10 text-left font-normal text-base",!j.value&&"text-muted-foreground"),children:[j.value?ft(j.value,"PPP"):n.jsx("span",{children:"Pick a date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:j.value||void 0,onSelect:j.onChange,initialFocus:!0,className:"rounded-md border"})})]}),n.jsx(ne,{className:"text-xs"})]})}),n.jsx(J,{control:h.control,name:"notes",render:({field:j})=>n.jsxs(Z,{className:"space-y-1",children:[n.jsx(X,{className:"text-sm font-medium",children:"Notes (Optional)"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Enter any additional notes about this item",...j,value:j.value||"",className:"text-base resize-none min-h-[60px]"})}),n.jsx(ne,{className:"text-xs"})]})}),n.jsxs(hs,{className:"pt-2 sm:pt-4 flex flex-col sm:flex-row gap-2 sm:gap-2",children:[n.jsxs(H,{type:"button",variant:"outline",onClick:p,className:"w-full sm:w-auto gap-1 text-sm",children:[n.jsx(ys,{className:"h-4 w-4"})," Cancel"]}),n.jsxs(H,{type:"submit",disabled:g.isPending,className:"w-full sm:w-auto gap-1 text-sm",children:[g.isPending&&n.jsx(Kt,{className:"h-4 w-4 animate-spin"}),e!=null&&e.id?"Update Item":"Create Item"]})]})]})})]})})}const Jpe=q.object({name:q.string().min(2,{message:"License name must be at least 2 characters."}),licenseNumber:q.string().min(1,{message:"License number is required."}),issuingAuthority:q.string().min(1,{message:"Issuing authority is required."}),issueDate:q.date({required_error:"Issue date is required."}),expiryDate:q.date({required_error:"Expiry date is required."}),status:q.string().default("active"),documentUrl:q.string().optional(),notes:q.string().optional(),reminderDate:q.date().optional(),isSubcontractor:q.boolean().default(!1),subcontractorName:q.string().optional(),subcontractorContact:q.string().optional(),subcontractorCompany:q.string().optional(),subcontractorEmail:q.string().email({message:"Invalid email format"}).optional(),subcontractorPhone:q.string().optional(),verificationStatus:q.enum(["verified","pending","rejected","expired"]).default("pending").optional(),verificationDate:q.date().optional()});function ege({onClose:t,initialData:e,isEditing:s=!1}){const r=jn(),i={name:"",licenseNumber:"",issuingAuthority:"",issueDate:new Date,expiryDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)),status:"active",documentUrl:"",notes:"",reminderDate:new Date(new Date().setMonth(new Date().getMonth()+11)),isSubcontractor:!1,subcontractorName:"",subcontractorContact:"",subcontractorCompany:"",subcontractorEmail:"",subcontractorPhone:"",verificationStatus:"pending",...e},a=mn({resolver:pn(Jpe),defaultValues:i}),o=Pt({mutationFn:async d=>s&&(e!=null&&e.id)?pt(`/api/business/licenses/${e.id}`,{method:"PATCH",body:JSON.stringify(d)}):pt("/api/business/licenses",{method:"POST",body:JSON.stringify(d)}),onSuccess:()=>{Mi({title:s?"License updated":"License created",description:s?"The license has been successfully updated.":"The license has been successfully created."}),r.invalidateQueries({queryKey:["/api/business/licenses"]}),t()},onError:d=>{console.error("Error saving license:",d),Mi({title:"Error",description:"There was an error saving the license. Please try again.",variant:"destructive"})}});function c(d){o.mutate(d)}return n.jsxs(Ae,{className:"w-full",children:[n.jsxs(Be,{className:"flex flex-row items-start justify-between space-y-0",children:[n.jsxs("div",{children:[n.jsx(Ve,{children:s?"Edit License":"Add New License"}),n.jsx(ct,{children:s?"Update the license information below.":"Fill in the details to add a new license."})]}),n.jsx(H,{variant:"ghost",size:"icon",onClick:t,children:n.jsx(ys,{className:"h-4 w-4"})})]}),n.jsx(fn,{...a,children:n.jsxs("form",{onSubmit:a.handleSubmit(c),children:[n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:a.control,name:"name",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"License Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Contractor's License",...d})}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"licenseNumber",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"License Number"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"ABC-12345",...d})}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:a.control,name:"issuingAuthority",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Issuing Authority"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"State Contractor's Board",...d})}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:a.control,name:"issueDate",render:({field:d})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Issue Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:we("pl-3 text-left font-normal",!d.value&&"text-muted-foreground"),children:[d.value?ft(d.value,"PPP"):n.jsx("span",{children:"Pick a date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:d.value,onSelect:d.onChange,disabled:h=>h>new Date,initialFocus:!0})})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"expiryDate",render:({field:d})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Expiry Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:we("pl-3 text-left font-normal",!d.value&&"text-muted-foreground"),children:[d.value?ft(d.value,"PPP"):n.jsx("span",{children:"Pick a date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:d.value,onSelect:d.onChange,disabled:h=>h<new Date,initialFocus:!0})})]}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:a.control,name:"status",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Status"}),n.jsxs(gt,{onValueChange:d.onChange,defaultValue:d.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a status"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"active",children:"Active"}),n.jsx(ue,{value:"pending",children:"Pending"}),n.jsx(ue,{value:"expired",children:"Expired"}),n.jsx(ue,{value:"renewal",children:"Pending Renewal"})]})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"documentUrl",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Document URL"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"https://example.com/document.pdf",...d})}),n.jsx(ot,{children:"Link to the license document (optional)"}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"reminderDate",render:({field:d})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Reminder Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:we("pl-3 text-left font-normal",!d.value&&"text-muted-foreground"),children:[d.value?ft(d.value,"PPP"):n.jsx("span",{children:"Pick a reminder date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:d.value,onSelect:d.onChange,initialFocus:!0})})]}),n.jsx(ot,{children:"When to be reminded about this license (optional)"}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"isSubcontractor",render:({field:d})=>n.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[n.jsx(Q,{children:n.jsx(Ri,{checked:d.value,onCheckedChange:d.onChange})}),n.jsxs("div",{className:"space-y-1 leading-none",children:[n.jsx(X,{children:"Is Subcontractor License"}),n.jsx(ot,{children:"Check if this license belongs to a subcontractor"})]})]})}),a.watch("isSubcontractor")&&n.jsxs("div",{className:"space-y-4 border rounded-md p-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Subcontractor Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:a.control,name:"subcontractorName",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Subcontractor Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"John Smith",...d,value:d.value||""})}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"subcontractorCompany",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Company"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"ABC Contractors",...d,value:d.value||""})}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"subcontractorContact",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Contact Title/Position"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Project Manager",...d,value:d.value||""})}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"subcontractorPhone",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Phone Number"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"(555) 123-4567",...d,value:d.value||""})}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"subcontractorEmail",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Email"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"john@example.com",...d,value:d.value||""})}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"verificationStatus",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Verification Status"}),n.jsxs(gt,{onValueChange:d.onChange,defaultValue:d.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select status"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"pending",children:"Pending"}),n.jsx(ue,{value:"verified",children:"Verified"}),n.jsx(ue,{value:"rejected",children:"Rejected"}),n.jsx(ue,{value:"expired",children:"Expired"})]})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"verificationDate",render:({field:d})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Verification Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:we("pl-3 text-left font-normal",!d.value&&"text-muted-foreground"),children:[d.value?ft(d.value,"PPP"):n.jsx("span",{children:"Select date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:d.value,onSelect:d.onChange,initialFocus:!0})})]}),n.jsx(ne,{})]})})]})]}),n.jsx(J,{control:a.control,name:"notes",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Notes"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Additional notes about this license",className:"resize-none",...d})}),n.jsx(ne,{})]})})]}),n.jsxs(Pn,{className:"flex justify-between",children:[n.jsx(H,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),n.jsx(H,{type:"submit",disabled:o.isPending,children:o.isPending?"Saving...":s?"Update License":"Save License"})]})]})})]})}const tge=q.object({name:q.string().min(2,{message:"Policy name must be at least 2 characters."}),policyNumber:q.string().min(1,{message:"Policy number is required."}),provider:q.string().min(1,{message:"Insurance provider is required."}),startDate:q.date({required_error:"Start date is required."}),endDate:q.date({required_error:"End date is required."}),coverageAmount:q.coerce.number().min(1,{message:"Coverage amount is required."}),premium:q.coerce.number().min(0,{message:"Premium amount is required."}),paymentFrequency:q.string().default("monthly"),status:q.string().default("active"),documentUrl:q.string().optional(),notes:q.string().optional(),reminderDate:q.date().optional(),isSubcontractor:q.boolean().default(!1),subcontractorName:q.string().optional(),subcontractorContact:q.string().optional(),subcontractorCompany:q.string().optional(),subcontractorEmail:q.string().email({message:"Invalid email format"}).optional(),subcontractorPhone:q.string().optional(),verificationStatus:q.enum(["verified","pending","rejected","expired"]).default("pending").optional(),verificationDate:q.date().optional()});function nge({onClose:t,initialData:e,isEditing:s=!1}){const r=jn(),i={name:"",policyNumber:"",provider:"",startDate:new Date,endDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)),coverageAmount:1e6,premium:0,paymentFrequency:"monthly",status:"active",documentUrl:"",notes:"",reminderDate:new Date(new Date().setMonth(new Date().getMonth()+11)),isSubcontractor:!1,subcontractorName:"",subcontractorContact:"",subcontractorCompany:"",subcontractorEmail:"",subcontractorPhone:"",verificationStatus:"pending",...e},a=mn({resolver:pn(tge),defaultValues:i}),o=Pt({mutationFn:async d=>s&&(e!=null&&e.id)?pt(`/api/business/insurance/${e.id}`,{method:"PATCH",body:JSON.stringify(d)}):pt("/api/business/insurance",{method:"POST",body:JSON.stringify(d)}),onSuccess:()=>{Mi({title:s?"Insurance policy updated":"Insurance policy created",description:s?"The insurance policy has been successfully updated.":"The insurance policy has been successfully created."}),r.invalidateQueries({queryKey:["/api/business/insurance"]}),t()},onError:d=>{console.error("Error saving insurance policy:",d),Mi({title:"Error",description:"There was an error saving the insurance policy. Please try again.",variant:"destructive"})}});function c(d){o.mutate(d)}return n.jsxs(Ae,{className:"w-full",children:[n.jsxs(Be,{className:"flex flex-row items-start justify-between space-y-0",children:[n.jsxs("div",{children:[n.jsx(Ve,{children:s?"Edit Insurance Policy":"Add New Insurance Policy"}),n.jsx(ct,{children:s?"Update the insurance policy information below.":"Fill in the details to add a new insurance policy."})]}),n.jsx(H,{variant:"ghost",size:"icon",onClick:t,children:n.jsx(ys,{className:"h-4 w-4"})})]}),n.jsx(fn,{...a,children:n.jsxs("form",{onSubmit:a.handleSubmit(c),children:[n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:a.control,name:"name",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Policy Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"General Liability Insurance",...d})}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"policyNumber",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Policy Number"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"POL-12345678",...d})}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:a.control,name:"provider",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Insurance Provider"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Nationwide Insurance",...d})}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:a.control,name:"coverageAmount",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Coverage Amount ($)"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",placeholder:"1000000",...d,onChange:h=>d.onChange(parseFloat(h.target.value))})}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"premium",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Premium Amount ($)"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",placeholder:"2500",...d,onChange:h=>d.onChange(parseFloat(h.target.value))})}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:a.control,name:"startDate",render:({field:d})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Start Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:we("pl-3 text-left font-normal",!d.value&&"text-muted-foreground"),children:[d.value?ft(d.value,"PPP"):n.jsx("span",{children:"Pick a date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:d.value,onSelect:d.onChange,initialFocus:!0})})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"endDate",render:({field:d})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"End Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:we("pl-3 text-left font-normal",!d.value&&"text-muted-foreground"),children:[d.value?ft(d.value,"PPP"):n.jsx("span",{children:"Pick a date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:d.value,onSelect:d.onChange,disabled:h=>h<a.getValues("startDate"),initialFocus:!0})})]}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:a.control,name:"status",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Status"}),n.jsxs(gt,{onValueChange:d.onChange,defaultValue:d.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a status"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"active",children:"Active"}),n.jsx(ue,{value:"pending",children:"Pending"}),n.jsx(ue,{value:"expired",children:"Expired"}),n.jsx(ue,{value:"renewal",children:"Pending Renewal"})]})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"paymentFrequency",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Payment Frequency"}),n.jsxs(gt,{onValueChange:d.onChange,defaultValue:d.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select payment frequency"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"monthly",children:"Monthly"}),n.jsx(ue,{value:"quarterly",children:"Quarterly"}),n.jsx(ue,{value:"biannual",children:"Bi-Annual"}),n.jsx(ue,{value:"annual",children:"Annual"})]})]}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:a.control,name:"documentUrl",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Document URL"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"https://example.com/policy.pdf",...d})}),n.jsx(ot,{children:"Link to the insurance policy document (optional)"}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"reminderDate",render:({field:d})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Reminder Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:we("pl-3 text-left font-normal",!d.value&&"text-muted-foreground"),children:[d.value?ft(d.value,"PPP"):n.jsx("span",{children:"Pick a reminder date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:d.value,onSelect:d.onChange,initialFocus:!0})})]}),n.jsx(ot,{children:"When to be reminded about this policy renewal (optional)"}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"notes",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Notes"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Additional notes about this insurance policy",className:"resize-none",...d})}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"border-t pt-4 mt-6",children:[n.jsx("h3",{className:"text-lg font-medium mb-4",children:"Subcontractor Information"}),n.jsx(J,{control:a.control,name:"isSubcontractor",render:({field:d})=>n.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4 mb-4",children:[n.jsx(Q,{children:n.jsx(Ri,{checked:d.value,onCheckedChange:d.onChange})}),n.jsxs("div",{className:"space-y-1 leading-none",children:[n.jsx(X,{children:"This insurance policy belongs to a subcontractor"}),n.jsx(ot,{children:"Enable this option if this policy is for a subcontractor who works with your company"})]})]})}),a.watch("isSubcontractor")&&n.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-muted/20",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:a.control,name:"subcontractorName",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Subcontractor Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"John Smith",...d,value:d.value||""})}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"subcontractorCompany",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Company Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Smith Pools LLC",...d,value:d.value||""})}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:a.control,name:"subcontractorPhone",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Phone Number"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"(555) 123-4567",...d,value:d.value||""})}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"subcontractorEmail",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Email Address"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"john@smithpools.com",...d,value:d.value||""})}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:a.control,name:"subcontractorContact",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Contact Person"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Office Manager Name",...d,value:d.value||""})}),n.jsx(ot,{children:"Alternative contact person if different from the primary subcontractor"}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:a.control,name:"verificationStatus",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Verification Status"}),n.jsxs(gt,{onValueChange:d.onChange,defaultValue:d.value||"pending",children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select status"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"verified",children:"Verified"}),n.jsx(ue,{value:"pending",children:"Pending"}),n.jsx(ue,{value:"rejected",children:"Rejected"}),n.jsx(ue,{value:"expired",children:"Expired"})]})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"verificationDate",render:({field:d})=>n.jsxs(Z,{className:"flex flex-col",children:[n.jsx(X,{children:"Verification Date"}),n.jsxs(Ls,{children:[n.jsx(Os,{asChild:!0,children:n.jsx(Q,{children:n.jsxs(H,{variant:"outline",className:we("pl-3 text-left font-normal",!d.value&&"text-muted-foreground"),children:[d.value?ft(d.value,"PPP"):n.jsx("span",{children:"Select date"}),n.jsx(tn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),n.jsx(Es,{className:"w-auto p-0",align:"start",children:n.jsx(Rs,{mode:"single",selected:d.value||void 0,onSelect:d.onChange,initialFocus:!0})})]}),n.jsx(ot,{children:"When was this policy verified?"}),n.jsx(ne,{})]})})]})]})]})]}),n.jsxs(Pn,{className:"flex justify-between",children:[n.jsx(H,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),n.jsx(H,{type:"submit",disabled:o.isPending,children:o.isPending?"Saving...":s?"Update Policy":"Save Policy"})]})]})})]})}function sge(){const[t,e]=y.useState("dashboard"),[s,r]=_n(),[i,a]=y.useState(!1),[o,c]=y.useState(!1),[d,h]=y.useState(!1),[g,m]=y.useState(!1),[p,v]=y.useState(!1),[j,N]=y.useState(!1),[E,_]=y.useState(!1),[S,C]=y.useState(!1),[I,P]=y.useState(!1),{data:L,isLoading:T}=wt({queryKey:["/api/business/dashboard"],enabled:t==="dashboard"}),{data:M,isLoading:k}=wt({queryKey:["/api/business/expenses"],enabled:t==="expenses"}),{data:O,isLoading:V}=wt({queryKey:["/api/business/time-entries"],enabled:t==="time-tracking"}),{data:B,isLoading:Y}=wt({queryKey:["/api/business/reports"],enabled:t==="reports"}),{data:z,isLoading:G}=wt({queryKey:["/api/business/vendors"],enabled:t==="vendors"}),{data:he,isLoading:le}=wt({queryKey:["/api/business/purchase-orders"],enabled:t==="purchase-orders"}),{data:se,isLoading:re}=wt({queryKey:["/api/business/inventory"],enabled:t==="inventory"}),{data:me,isLoading:Ce}=wt({queryKey:["/api/business/licenses"],enabled:t==="licenses"}),{data:$,isLoading:xe}=wt({queryKey:["/api/business/insurance"],enabled:t==="insurance"}),{data:te,isLoading:ae}=wt({queryKey:["/api/business/pool-reports"],enabled:t==="pool-reports"}),ee={totalRevenue:"$45,231.89",expenses:"$12,756.42",profit:"$32,475.47",profitMargin:"71.8%",inventoryValue:"$32,156.90",lowStockItems:7,outstandingInvoices:12};return n.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold tracking-tight",children:"Business Management"}),n.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Manage your business finances, inventory, and operations."})]})}),n.jsxs(ps,{defaultValue:"dashboard",value:t,onValueChange:e,className:"space-y-4",children:[n.jsx("div",{className:"overflow-x-auto pb-2",children:n.jsxs(gs,{className:"inline-flex w-auto min-w-full",children:[n.jsxs(Ge,{value:"dashboard",className:"flex items-center gap-1",children:[n.jsx(Nb,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Dashboard"})]}),n.jsxs(Ge,{value:"expenses",className:"flex items-center gap-1",children:[n.jsx(Gx,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Expenses"})]}),n.jsxs(Ge,{value:"time-tracking",className:"flex items-center gap-1",children:[n.jsx(Ur,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Time"})]}),n.jsxs(Ge,{value:"reports",className:"flex items-center gap-1",children:[n.jsx(fr,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Financial"})]}),n.jsxs(Ge,{value:"pool-reports",className:"flex items-center gap-1",children:[n.jsx(Ga,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Pool Reports"})]}),n.jsxs(Ge,{value:"vendors",className:"flex items-center gap-1",children:[n.jsx(XC,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Vendors"})]}),n.jsxs(Ge,{value:"purchase-orders",className:"flex items-center gap-1",children:[n.jsx(dL,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Orders"})]}),n.jsxs(Ge,{value:"inventory",className:"flex items-center gap-1",children:[n.jsx(_p,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Inventory"})]}),n.jsxs(Ge,{value:"licenses",className:"flex items-center gap-1",children:[n.jsx(FG,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Licenses"})]}),n.jsxs(Ge,{value:"insurance",className:"flex items-center gap-1",children:[n.jsx(wm,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Insurance"})]}),n.jsxs(Ge,{value:"vehicle-tracking",className:"flex items-center gap-1",children:[n.jsx(gh,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Vehicle Tracking"})]}),n.jsxs(Ge,{value:"vehicle-mapping",className:"flex items-center gap-1",children:[n.jsx(Xa,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Vehicle Mapping"})]}),n.jsxs(Ge,{value:"fleetmatics-settings",className:"flex items-center gap-1",children:[n.jsx(Hs,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Fleet Settings"})]}),n.jsxs(Ge,{value:"barcode-scanner",className:"flex items-center gap-1",children:[n.jsx(ki,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Barcode Scanner"})]})]})}),n.jsxs(Qe,{value:"dashboard",className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs(Ae,{children:[n.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 p-3 pb-1 sm:p-6 sm:pb-2",children:[n.jsx(Ve,{className:"text-xs sm:text-sm font-medium",children:"Total Revenue"}),n.jsx(nY,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),n.jsxs(Ee,{className:"p-3 pt-1 sm:p-6 sm:pt-2",children:[n.jsx("div",{className:"text-base sm:text-2xl font-bold",children:ee.totalRevenue}),n.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"+20.1% from last month"})]})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 p-3 pb-1 sm:p-6 sm:pb-2",children:[n.jsx(Ve,{className:"text-xs sm:text-sm font-medium",children:"Expenses"}),n.jsx(Gx,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),n.jsxs(Ee,{className:"p-3 pt-1 sm:p-6 sm:pt-2",children:[n.jsx("div",{className:"text-base sm:text-2xl font-bold",children:ee.expenses}),n.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"-4.5% from last month"})]})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 p-3 pb-1 sm:p-6 sm:pb-2",children:[n.jsx(Ve,{className:"text-xs sm:text-sm font-medium",children:"Net Profit"}),n.jsx(Gx,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),n.jsxs(Ee,{className:"p-3 pt-1 sm:p-6 sm:pt-2",children:[n.jsx("div",{className:"text-base sm:text-2xl font-bold",children:ee.profit}),n.jsxs("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:["Profit Margin: ",ee.profitMargin]})]})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 p-3 pb-1 sm:p-6 sm:pb-2",children:[n.jsx(Ve,{className:"text-xs sm:text-sm font-medium",children:"Inventory Value"}),n.jsx(_p,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),n.jsxs(Ee,{className:"p-3 pt-1 sm:p-6 sm:pt-2",children:[n.jsx("div",{className:"text-base sm:text-2xl font-bold",children:ee.inventoryValue}),n.jsxs("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:[ee.lowStockItems," items low in stock"]})]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 sm:gap-4",children:n.jsxs(Ae,{className:"col-span-1",children:[n.jsxs(Be,{className:"p-4 pb-2 sm:p-6 sm:pb-2",children:[n.jsx(Ve,{className:"text-base sm:text-lg",children:"Recent Expenses"}),n.jsx(ct,{className:"text-xs sm:text-sm",children:"Your most recent business expenses"})]}),n.jsx(Ee,{className:"p-4 pt-2 sm:p-6 sm:pt-4",children:T?n.jsx("p",{className:"text-sm",children:"Loading expenses..."}):n.jsx("div",{className:"space-y-2 sm:space-y-4",children:n.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"No recent expenses to display."})})})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 sm:gap-4",children:[n.jsxs(Ae,{className:"col-span-1",children:[n.jsxs(Be,{className:"p-4 pb-2 sm:p-6 sm:pb-2",children:[n.jsx(Ve,{className:"text-base sm:text-lg",children:"Vendor Orders"}),n.jsx(ct,{className:"text-xs sm:text-sm",children:"Recent purchase orders"})]}),n.jsx(Ee,{className:"p-4 pt-2 sm:p-6 sm:pt-4",children:T?n.jsx("p",{className:"text-sm",children:"Loading purchase orders..."}):n.jsx("div",{className:"space-y-2 sm:space-y-4",children:n.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"No recent purchase orders to display."})})})]}),n.jsxs(Ae,{className:"col-span-1",children:[n.jsxs(Be,{className:"p-4 pb-2 sm:p-6 sm:pb-2",children:[n.jsx(Ve,{className:"text-base sm:text-lg",children:"Low Stock"}),n.jsx(ct,{className:"text-xs sm:text-sm",children:"Items below minimum stock level"})]}),n.jsx(Ee,{className:"p-4 pt-2 sm:p-6 sm:pt-4",children:T?n.jsx("p",{className:"text-sm",children:"Loading inventory data..."}):n.jsx("div",{className:"space-y-2 sm:space-y-4",children:n.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"No low stock items to display."})})})]}),n.jsxs(Ae,{className:"col-span-1",children:[n.jsxs(Be,{className:"p-4 pb-2 sm:p-6 sm:pb-2",children:[n.jsx(Ve,{className:"text-base sm:text-lg",children:"Outstanding Invoices"}),n.jsx(ct,{className:"text-xs sm:text-sm",children:"Unpaid client invoices"})]}),n.jsx(Ee,{className:"p-4 pt-2 sm:p-6 sm:pt-4",children:T?n.jsx("p",{className:"text-sm",children:"Loading invoice data..."}):n.jsx("div",{className:"space-y-2 sm:space-y-4",children:n.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"No outstanding invoices to display."})})})]})]})]}),n.jsxs(Qe,{value:"expenses",className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Expenses"}),n.jsxs(H,{onClick:()=>a(!0),className:"flex items-center gap-1 text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[n.jsx(os,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden xs:inline",children:"Add"})," Expense"]})]}),i&&n.jsx(xpe,{categories:Ose,onClose:()=>a(!1)}),n.jsx(rpe,{data:M||[],isLoading:k})]}),n.jsxs(Qe,{value:"time-tracking",className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Time Tracking"}),n.jsxs(H,{onClick:()=>c(!0),className:"flex items-center gap-1 text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[n.jsx(os,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden xs:inline",children:"Add"})," Time"]})]}),o&&n.jsx(ype,{onClose:()=>c(!1)}),n.jsx(ipe,{data:O||[],isLoading:V})]}),n.jsxs(Qe,{value:"reports",className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Financial Reports"}),n.jsxs(H,{onClick:()=>h(!0),className:"flex items-center gap-1 text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[n.jsx(os,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden xs:inline",children:"Create"})," Report"]})]}),d&&n.jsx(Hpe,{onClose:()=>h(!1)}),n.jsx(ape,{data:B||[],isLoading:Y})]}),n.jsxs(Qe,{value:"vendors",className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Vendors"}),n.jsxs(H,{onClick:()=>v(!0),className:"flex items-center gap-1 text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[n.jsx(os,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden xs:inline",children:"Add"})," Vendor"]})]}),p&&n.jsx(Gpe,{onClose:()=>v(!1)}),n.jsx(upe,{data:z||[],isLoading:G})]}),n.jsxs(Qe,{value:"purchase-orders",className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Purchase Orders"}),n.jsxs(H,{onClick:()=>N(!0),className:"flex items-center gap-1 text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[n.jsx(os,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden xs:inline",children:"Create"})," Order"]})]}),j&&n.jsx(Zpe,{onClose:()=>N(!1)}),n.jsx(hpe,{data:he||[],isLoading:le})]}),n.jsxs(Qe,{value:"inventory",className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Inventory"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(H,{variant:"outline",className:"flex items-center gap-1 text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",onClick:()=>{const de=new CustomEvent("addTab",{detail:{path:"/inventory/transfers",title:"Inventory Transfers",icon:"transfer"}});window.dispatchEvent(de)},children:[n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-3 w-3 sm:h-4 sm:w-4",children:n.jsx("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"})}),n.jsx("span",{className:"hidden xs:inline",children:"Inventory"})," Transfers"]}),n.jsxs(H,{onClick:()=>_(!0),className:"flex items-center gap-1 text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[n.jsx(os,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden xs:inline",children:"Add"})," Item"]})]})]}),E&&n.jsx(Xpe,{onClose:()=>_(!1)}),n.jsx(mpe,{data:se||[],isLoading:re})]}),n.jsxs(Qe,{value:"licenses",className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Licenses & Certifications"}),n.jsxs(H,{onClick:()=>C(!0),className:"flex items-center gap-1 text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[n.jsx(os,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden xs:inline",children:"Add"})," License"]})]}),S&&n.jsx(ege,{onClose:()=>C(!1)}),n.jsx(fpe,{data:me||[],isLoading:Ce})]}),n.jsxs(Qe,{value:"insurance",className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Insurance Policies"}),n.jsxs(H,{onClick:()=>P(!0),className:"flex items-center gap-1 text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[n.jsx(os,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden xs:inline",children:"Add"})," Policy"]})]}),I&&n.jsx(nge,{onClose:()=>P(!1)}),n.jsx(ppe,{data:$||[],isLoading:xe})]}),n.jsxs(Qe,{value:"pool-reports",className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Pool Reports"}),n.jsxs(H,{onClick:()=>m(!0),className:"flex items-center gap-1 text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[n.jsx(os,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden xs:inline",children:"Create"})," Report"]})]}),g&&n.jsx(Yz,{open:g,onOpenChange:m}),n.jsx(dpe,{reports:te||[],isLoading:ae,onCreateReport:()=>m(!0)})]}),n.jsxs(Qe,{value:"vehicle-tracking",className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Vehicle Tracking"}),n.jsxs(H,{variant:"outline",className:"flex items-center gap-1 text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",onClick:()=>{const de=new CustomEvent("addTab",{detail:{path:"/fleetmatics/vehicle-tracking",title:"Vehicle Tracking Map",icon:"map"}});window.dispatchEvent(de)},children:[n.jsx(gh,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden xs:inline",children:"Open"})," Full Map"]})]}),n.jsxs(Ae,{className:"col-span-1",children:[n.jsxs(Be,{className:"p-4 pb-2 sm:p-6 sm:pb-2",children:[n.jsx(Ve,{className:"text-base sm:text-lg",children:"GPS Vehicle Tracking"}),n.jsx(ct,{className:"text-xs sm:text-sm",children:"Track your technician vehicles in real-time with Fleetmatics GPS"})]}),n.jsx(Ee,{className:"p-4 pt-0 sm:p-6 sm:pt-2",children:n.jsxs("div",{className:"text-center py-8",children:[n.jsx(gh,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),n.jsx("p",{className:"text-sm mb-4",children:"View your technician vehicles on a real-time tracking map"}),n.jsx(H,{onClick:()=>{r("/fleetmatics/vehicle-tracking")},children:"Open Vehicle Tracking"})]})})]})]}),n.jsxs(Qe,{value:"vehicle-mapping",className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Vehicle Mapping"}),n.jsxs(H,{variant:"outline",className:"flex items-center gap-1 text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",onClick:()=>{const de=new CustomEvent("addTab",{detail:{path:"/fleetmatics/vehicle-mapping",title:"Vehicle Mapping",icon:"truck"}});window.dispatchEvent(de)},children:[n.jsx(Xa,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden xs:inline",children:"Open"})," Vehicle Mapping"]})]}),n.jsxs(Ae,{className:"col-span-1",children:[n.jsxs(Be,{className:"p-4 pb-2 sm:p-6 sm:pb-2",children:[n.jsx(Ve,{className:"text-base sm:text-lg",children:"Vehicle Mapping"}),n.jsx(ct,{className:"text-xs sm:text-sm",children:"Map your technician vehicles to Fleetmatics GPS devices"})]}),n.jsx(Ee,{className:"p-4 pt-0 sm:p-6 sm:pt-2",children:n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Xa,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),n.jsx("p",{className:"text-sm mb-4",children:"Connect your technician vehicles to Fleetmatics for GPS tracking"}),n.jsx(H,{onClick:()=>{r("/fleetmatics/vehicle-mapping")},children:"Configure Vehicle Mapping"})]})})]})]}),n.jsxs(Qe,{value:"fleetmatics-settings",className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Fleetmatics Settings"}),n.jsxs(H,{variant:"outline",className:"flex items-center gap-1 text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",onClick:()=>{const de=new CustomEvent("addTab",{detail:{path:"/fleetmatics/settings",title:"Fleetmatics Settings",icon:"settings"}});window.dispatchEvent(de)},children:[n.jsx(Hs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden xs:inline",children:"Open"})," Settings"]})]}),n.jsxs(Ae,{className:"col-span-1",children:[n.jsxs(Be,{className:"p-4 pb-2 sm:p-6 sm:pb-2",children:[n.jsx(Ve,{className:"text-base sm:text-lg",children:"Fleetmatics Integration"}),n.jsx(ct,{className:"text-xs sm:text-sm",children:"Configure your Fleetmatics GPS integration settings"})]}),n.jsx(Ee,{className:"p-4 pt-0 sm:p-6 sm:pt-2",children:n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Hs,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),n.jsx("p",{className:"text-sm mb-4",children:"Set up your API keys and synchronization settings for Fleetmatics"}),n.jsx(H,{onClick:()=>{r("/fleetmatics/settings")},children:"Configure Fleetmatics"})]})})]})]}),n.jsxs(Qe,{value:"barcode-scanner",className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Barcode Scanner"}),n.jsxs(H,{variant:"outline",className:"flex items-center gap-1 text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",onClick:()=>{const de=new CustomEvent("addTab",{detail:{path:"/inventory/barcode-scanner",title:"Barcode Scanner",icon:"barcode"}});window.dispatchEvent(de)},children:[n.jsx(ki,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden xs:inline",children:"Open"})," Scanner"]})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{className:"p-4 pb-2 sm:p-6 sm:pb-2",children:[n.jsx(Ve,{className:"text-base sm:text-lg",children:"Scan Equipment and Inventory"}),n.jsx(ct,{className:"text-xs sm:text-sm",children:"Use the barcode scanner to quickly identify and track inventory items"})]}),n.jsx(Ee,{className:"p-4 pt-0 sm:p-6 sm:pt-2",children:n.jsx(Xz,{onScan:de=>{console.log("Barcode scanned:",de)}})})]})]})]})]})}const Jz=y.forwardRef(({...t},e)=>n.jsx("nav",{ref:e,"aria-label":"breadcrumb",...t}));Jz.displayName="Breadcrumb";const eV=y.forwardRef(({className:t,...e},s)=>n.jsx("ol",{ref:s,className:we("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground",t),...e}));eV.displayName="BreadcrumbList";const c0=y.forwardRef(({className:t,...e},s)=>n.jsx("li",{ref:s,className:we("inline-flex items-center gap-1.5",t),...e}));c0.displayName="BreadcrumbItem";const CN=y.forwardRef(({className:t,asChild:e=!1,...s},r)=>{const i=e?Eo:"a";return n.jsx(i,{ref:r,className:we("transition-colors hover:text-foreground",t),...s})});CN.displayName="BreadcrumbLink";const tV=y.forwardRef(({className:t,...e},s)=>n.jsx("span",{ref:s,role:"link","aria-current":"page","aria-disabled":"true",className:we("font-medium text-foreground",t),...e}));tV.displayName="BreadcrumbPage";const SN=({children:t,className:e,...s})=>n.jsx("li",{role:"presentation","aria-hidden":"true",className:we("text-muted-foreground",e),...s,children:t||n.jsx(ad,{className:"h-4 w-4"})});SN.displayName="BreadcrumbSeparator";function rge({className:t,children:e,...s}){return n.jsx("section",{className:we("grid gap-1",t),...s,children:e})}function ige({className:t,...e}){return n.jsx("h1",{className:we("text-3xl font-bold tracking-tight md:text-4xl",t),...e})}function age({className:t,...e}){return n.jsx("p",{className:we("text-muted-foreground text-lg",t),...e})}const oge={warehouse_to_warehouse:"Warehouse to Warehouse",warehouse_to_vehicle:"Warehouse to Vehicle",vehicle_to_warehouse:"Vehicle to Warehouse",vehicle_to_vehicle:"Vehicle to Vehicle",warehouse_to_client:"Warehouse to Client",vehicle_to_client:"Vehicle to Client"};function lge(){var S,C;const{toast:t}=Lt(),e=jn(),[s,r]=y.useState(!1),[i,a]=y.useState({transferType:"warehouse_to_vehicle",status:"pending",sourceType:"warehouse",destinationType:"vehicle",sourceId:null,destinationId:null,notes:"",items:[]}),{data:o=[]}=wt({queryKey:["/api/inventory/warehouses/active"],staleTime:6e4}),{data:c=[]}=wt({queryKey:["/api/inventory/vehicles"],staleTime:6e4}),{data:d=[]}=wt({queryKey:["/api/inventory/items"],staleTime:6e4}),{data:h=[]}=wt({queryKey:[i.sourceType==="warehouse"?`/api/inventory/warehouses/${i.sourceId}/inventory`:`/api/inventory/vehicles/${i.sourceId}/inventory`],enabled:!!i.sourceId,staleTime:3e4}),g=Pt({mutationFn:async I=>{const P=await fetch("/api/inventory/transfers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)});if(!P.ok){const L=await P.json();throw new Error(L.message||"Failed to create transfer")}return await P.json()},onSuccess:()=>{t({title:"Transfer Created",description:"Inventory transfer has been successfully created."}),a({transferType:"warehouse_to_vehicle",status:"pending",sourceType:"warehouse",destinationType:"vehicle",sourceId:null,destinationId:null,notes:"",items:[]}),e.invalidateQueries({queryKey:["/api/inventory/transfers"]}),i.sourceType==="warehouse"?e.invalidateQueries({queryKey:[`/api/inventory/warehouses/${i.sourceId}/inventory`]}):e.invalidateQueries({queryKey:[`/api/inventory/vehicles/${i.sourceId}/inventory`]})},onError:I=>{t({title:"Error",description:I.message,variant:"destructive"})}}),m=(I,P)=>{a(L=>{const T={...L,[I]:P};if(I==="transferType"){const[M,k]=P.split("_to_");T.sourceType=M,T.destinationType=k,T.sourceId=null,T.destinationId=null}return T})},p=(I,P=1)=>{const L=i.items.findIndex(T=>T.inventoryItemId===I.id);a(T=>{const M=[...T.items];return L>=0?M[L]={...M[L],quantity:M[L].quantity+P}:M.push({inventoryItemId:I.id,quantity:P,name:I.name,barcode:I.barcode}),{...T,items:M}})},v=I=>{a(P=>({...P,items:P.items.filter((L,T)=>T!==I)}))},j=(I,P)=>{a(L=>{const T=[...L.items];return T[I]={...T[I],quantity:P},{...L,items:T}})},N=I=>{const P=d.find(L=>L.barcode===I);P?(p(P),t({title:"Item Added",description:`${P.name} added to transfer.`})):t({title:"Item Not Found",description:`No item found with barcode ${I}.`,variant:"destructive"})},E=()=>{if(!i.sourceId||!i.destinationId){t({title:"Validation Error",description:"Please select source and destination.",variant:"destructive"});return}if(i.items.length===0){t({title:"Validation Error",description:"Please add at least one item to transfer.",variant:"destructive"});return}const I={transferType:i.transferType,status:i.status,notes:i.notes,sourceId:i.sourceId,destinationId:i.destinationId,transferItems:i.items.map(P=>({inventoryItemId:P.inventoryItemId,quantity:P.quantity}))};g.mutate(I)},_=I=>I==="warehouse"?o.map(P=>n.jsx(ue,{value:P.id.toString(),children:P.name},P.id)):I==="vehicle"?c.map(P=>n.jsxs(ue,{value:P.id.toString(),children:[P.name," (",P.licensePlate,")"]},P.id)):null;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsxs(Ve,{className:"flex items-center gap-2",children:[n.jsx(Ed,{className:"h-5 w-5"}),"Create Inventory Transfer"]}),n.jsx(ct,{children:"Transfer inventory items between warehouses, vehicles, and client sites"})]}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(Wr,{htmlFor:"transferType",children:"Transfer Type"}),n.jsxs(gt,{value:i.transferType,onValueChange:I=>m("transferType",I),children:[n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select transfer type"})}),n.jsx(ht,{children:Hse.map(I=>n.jsx(ue,{value:I,children:oge[I]},I))})]})]}),n.jsxs("div",{children:[n.jsx(Wr,{htmlFor:"status",children:"Status"}),n.jsxs(gt,{value:i.status,onValueChange:I=>m("status",I),children:[n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select status"})}),n.jsx(ht,{children:qse.map(I=>n.jsx(ue,{value:I,children:I.replace("_"," ").replace(/\b\w/g,P=>P.toUpperCase())},I))})]})]})]}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-end",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(Wr,{htmlFor:"source",children:i.sourceType==="warehouse"?n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(H0,{className:"h-4 w-4"})," Source Warehouse"]}):n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Xa,{className:"h-4 w-4"})," Source Vehicle"]})}),n.jsxs(gt,{value:((S=i.sourceId)==null?void 0:S.toString())||"",onValueChange:I=>m("sourceId",parseInt(I)),children:[n.jsx(ut,{children:n.jsx(xt,{placeholder:`Select ${i.sourceType}`})}),n.jsx(ht,{children:_(i.sourceType)})]})]}),n.jsx("div",{className:"self-center",children:n.jsx(ph,{className:"h-6 w-6 text-muted-foreground"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx(Wr,{htmlFor:"destination",children:i.destinationType==="warehouse"?n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(H0,{className:"h-4 w-4"})," Destination Warehouse"]}):i.destinationType==="vehicle"?n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Xa,{className:"h-4 w-4"})," Destination Vehicle"]}):n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(_p,{className:"h-4 w-4"})," Client Site"]})}),n.jsxs(gt,{value:((C=i.destinationId)==null?void 0:C.toString())||"",onValueChange:I=>m("destinationId",parseInt(I)),children:[n.jsx(ut,{children:n.jsx(xt,{placeholder:`Select ${i.destinationType}`})}),n.jsx(ht,{children:_(i.destinationType)})]})]})]}),n.jsxs("div",{children:[n.jsx(Wr,{htmlFor:"notes",children:"Notes"}),n.jsx(ve,{id:"notes",value:i.notes,onChange:I=>m("notes",I.target.value),placeholder:"Add any notes about this transfer"})]})]})})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs(Ve,{className:"flex items-center gap-2",children:[n.jsx(_p,{className:"h-5 w-5"}),"Transfer Items"]}),n.jsxs(An,{open:s,onOpenChange:r,children:[n.jsx(ll,{asChild:!0,children:n.jsxs(H,{variant:"outline",className:"gap-1",children:[n.jsx(ki,{className:"h-4 w-4"}),"Scan Barcode"]})}),n.jsxs(wn,{className:"sm:max-w-md",children:[n.jsx(Tn,{children:n.jsx(Mn,{children:"Scan Inventory Barcode"})}),n.jsx(Xz,{onScan:I=>{N(I)},onClose:()=>r(!1)})]})]})]}),n.jsx(ct,{children:"Add items to be transferred. Items can be added by scanning barcodes or selecting from inventory."})]}),n.jsx(Ee,{children:n.jsxs(ps,{defaultValue:"source",className:"w-full",children:[n.jsxs(gs,{className:"mb-4",children:[n.jsx(Ge,{value:"source",children:"Source Inventory"}),n.jsx(Ge,{value:"all",children:"All Items"}),n.jsxs(Ge,{value:"selected",children:["Selected Items (",i.items.length,")"]})]}),n.jsx(Qe,{value:"source",className:"min-h-[200px]",children:i.sourceId?h.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No inventory items found in the selected source"}):n.jsxs("div",{className:"rounded-md border",children:[n.jsxs("div",{className:"grid grid-cols-12 bg-muted p-2 rounded-t-md",children:[n.jsx("div",{className:"col-span-5 font-medium",children:"Item"}),n.jsx("div",{className:"col-span-3 font-medium",children:"Category"}),n.jsx("div",{className:"col-span-2 font-medium text-center",children:"Available"}),n.jsx("div",{className:"col-span-2 font-medium text-right",children:"Action"})]}),n.jsx("div",{className:"divide-y max-h-[400px] overflow-y-auto",children:h.map(I=>{var P,L;return n.jsxs("div",{className:"grid grid-cols-12 p-2 items-center",children:[n.jsx("div",{className:"col-span-5 truncate",children:(P=I.item)==null?void 0:P.name}),n.jsx("div",{className:"col-span-3 text-muted-foreground capitalize",children:(L=I.item)==null?void 0:L.category}),n.jsx("div",{className:"col-span-2 text-center",children:I.quantity}),n.jsx("div",{className:"col-span-2 text-right",children:n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>I.item&&p(I.item),disabled:I.quantity<=0,children:"Add"})})]},I.id)})})]}):n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Please select a source warehouse or vehicle"})}),n.jsx(Qe,{value:"all",className:"min-h-[200px]",children:d.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No inventory items found"}):n.jsxs("div",{className:"rounded-md border",children:[n.jsxs("div",{className:"grid grid-cols-12 bg-muted p-2 rounded-t-md",children:[n.jsx("div",{className:"col-span-5 font-medium",children:"Item"}),n.jsx("div",{className:"col-span-3 font-medium",children:"Category"}),n.jsx("div",{className:"col-span-2 font-medium",children:"SKU/Barcode"}),n.jsx("div",{className:"col-span-2 font-medium text-right",children:"Action"})]}),n.jsx("div",{className:"divide-y max-h-[400px] overflow-y-auto",children:d.map(I=>n.jsxs("div",{className:"grid grid-cols-12 p-2 items-center",children:[n.jsx("div",{className:"col-span-5 truncate",children:I.name}),n.jsx("div",{className:"col-span-3 text-muted-foreground capitalize",children:I.category}),n.jsx("div",{className:"col-span-2 text-sm text-muted-foreground truncate",children:I.barcode||I.sku||"-"}),n.jsx("div",{className:"col-span-2 text-right",children:n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>p(I),children:"Add"})})]},I.id))})]})}),n.jsx(Qe,{value:"selected",className:"min-h-[200px]",children:i.items.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No items added to transfer yet"}):n.jsxs("div",{className:"rounded-md border",children:[n.jsxs("div",{className:"grid grid-cols-12 bg-muted p-2 rounded-t-md",children:[n.jsx("div",{className:"col-span-5 font-medium",children:"Item"}),n.jsx("div",{className:"col-span-3 font-medium",children:"Quantity"}),n.jsx("div",{className:"col-span-4 font-medium text-right",children:"Actions"})]}),n.jsx("div",{className:"divide-y",children:i.items.map((I,P)=>n.jsxs("div",{className:"grid grid-cols-12 p-2 items-center",children:[n.jsx("div",{className:"col-span-5 truncate",children:I.name}),n.jsx("div",{className:"col-span-3",children:n.jsx(ve,{type:"number",min:"1",value:I.quantity,onChange:L=>j(P,parseInt(L.target.value)||1),className:"h-8 w-24"})}),n.jsx("div",{className:"col-span-4 text-right",children:n.jsx(H,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>v(P),children:"Remove"})})]},P))})]})})]})}),n.jsx(Pn,{children:n.jsxs(H,{onClick:E,disabled:!i.sourceId||!i.destinationId||i.items.length===0||g.isPending,className:"ml-auto gap-1",children:[n.jsx(ZC,{className:"h-4 w-4"}),g.isPending?"Creating Transfer...":"Create Transfer"]})})]})]})}const cge=({status:t})=>{switch(t){case"pending":return n.jsx(Ze,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:"Pending"});case"in_transit":return n.jsx(Ze,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"In Transit"});case"completed":return n.jsx(Ze,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Completed"});case"cancelled":return n.jsx(Ze,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"Cancelled"});default:return n.jsx(Ze,{variant:"outline",children:t})}},Ix=t=>{const[e,s]=t.split("_to_");return n.jsxs("div",{className:"flex items-center gap-1.5",children:[e==="warehouse"?n.jsx(H0,{className:"h-4 w-4"}):n.jsx(Xa,{className:"h-4 w-4"}),n.jsx("span",{className:"capitalize",children:e}),n.jsx("span",{className:"mx-1",children:""}),s==="warehouse"?n.jsx(H0,{className:"h-4 w-4"}):n.jsx(Xa,{className:"h-4 w-4"}),n.jsx("span",{className:"capitalize",children:s})]})};function dge(){const[t,e]=y.useState("all"),{data:s=[],isLoading:r,error:i}=wt({queryKey:["/api/inventory/transfers"],staleTime:3e4}),a=s.filter(o=>t==="all"?!0:t==="pending"?o.status==="pending":t==="in_transit"?o.status==="in_transit":t==="completed"?o.status==="completed":!0);return y.useEffect(()=>{document.title="Inventory Transfers | Pool Service Management"},[]),n.jsx(n.Fragment,{children:n.jsxs("div",{className:"flex flex-col gap-6",children:[n.jsxs(rge,{children:[n.jsx(Jz,{className:"mb-4",children:n.jsxs(eV,{children:[n.jsx(c0,{children:n.jsx(CN,{href:"/dashboard",children:"Dashboard"})}),n.jsx(SN,{}),n.jsx(c0,{children:n.jsx(CN,{href:"/business",children:"Business"})}),n.jsx(SN,{}),n.jsx(c0,{children:n.jsx(tV,{children:"Inventory Transfers"})})]})}),n.jsx(ige,{children:"Inventory Transfers"}),n.jsx(age,{children:"Manage inventory transfers between warehouses, vehicles, and client sites"})]}),n.jsxs(ps,{value:t,onValueChange:e,className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs(gs,{children:[n.jsx(Ge,{value:"all",children:"All Transfers"}),n.jsx(Ge,{value:"pending",children:"Pending"}),n.jsx(Ge,{value:"in_transit",children:"In Transit"}),n.jsx(Ge,{value:"completed",children:"Completed"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(H,{variant:"outline",size:"sm",className:"gap-1",children:[n.jsx(Cp,{className:"h-4 w-4"}),"Filter"]}),n.jsxs(H,{variant:"outline",size:"sm",className:"gap-1",children:[n.jsx(Ed,{className:"h-4 w-4"}),"Refresh"]})]})]}),n.jsxs(Qe,{value:"all",className:"space-y-4",children:[n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Create New Transfer"}),n.jsx(ct,{children:"Transfer inventory between locations"})]}),n.jsx(Ee,{children:n.jsx(lge,{})})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Recent Transfers"}),n.jsx(ct,{children:"View and manage inventory transfers"})]}),n.jsx(Ee,{children:r?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx(Ed,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):i?n.jsx("div",{className:"text-center py-8 text-destructive",children:"Failed to load transfers"}):a.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No transfers found"}):n.jsx("div",{className:"rounded-md border",children:n.jsxs(jr,{children:[n.jsx(br,{children:n.jsxs(yn,{children:[n.jsx(Ye,{children:"ID"}),n.jsx(Ye,{children:"Date"}),n.jsx(Ye,{children:"Type"}),n.jsx(Ye,{children:"Items"}),n.jsx(Ye,{children:"Status"}),n.jsx(Ye,{className:"text-right",children:"Actions"})]})}),n.jsx(Nr,{children:a.map(o=>{var c;return n.jsxs(yn,{children:[n.jsxs(qe,{className:"font-medium",children:["#",o.id]}),n.jsx(qe,{children:ft(new Date(o.createdAt),"MMM d, yyyy")}),n.jsx(qe,{children:Ix(o.transferType)}),n.jsxs(qe,{children:[((c=o.items)==null?void 0:c.length)||0," items"]}),n.jsx(qe,{children:n.jsx(cge,{status:o.status})}),n.jsx(qe,{className:"text-right",children:n.jsxs(H,{variant:"ghost",size:"sm",className:"gap-1",children:[n.jsx(xo,{className:"h-4 w-4"}),"Details"]})})]},o.id)})})]})})})]})]}),n.jsx(Qe,{value:"pending",className:"space-y-4",children:n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Pending Transfers"}),n.jsx(ct,{children:"Transfers that are pending approval or pickup"})]}),n.jsx(Ee,{children:r?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx(Ed,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):a.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No pending transfers found"}):n.jsx("div",{className:"rounded-md border",children:n.jsxs(jr,{children:[n.jsx(br,{children:n.jsxs(yn,{children:[n.jsx(Ye,{children:"ID"}),n.jsx(Ye,{children:"Date"}),n.jsx(Ye,{children:"Type"}),n.jsx(Ye,{children:"Items"}),n.jsx(Ye,{className:"text-right",children:"Actions"})]})}),n.jsx(Nr,{children:a.map(o=>{var c;return n.jsxs(yn,{children:[n.jsxs(qe,{className:"font-medium",children:["#",o.id]}),n.jsx(qe,{children:ft(new Date(o.createdAt),"MMM d, yyyy")}),n.jsx(qe,{children:Ix(o.transferType)}),n.jsxs(qe,{children:[((c=o.items)==null?void 0:c.length)||0," items"]}),n.jsx(qe,{className:"text-right",children:n.jsxs(H,{variant:"ghost",size:"sm",className:"gap-1",children:[n.jsx(xo,{className:"h-4 w-4"}),"Details"]})})]},o.id)})})]})})})]})}),n.jsx(Qe,{value:"in_transit",className:"space-y-4",children:n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"In Transit Transfers"}),n.jsx(ct,{children:"Transfers that are currently in transit"})]}),n.jsx(Ee,{children:r?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx(Ed,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):a.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No transfers in transit"}):n.jsx("div",{className:"rounded-md border",children:n.jsxs(jr,{children:[n.jsx(br,{children:n.jsxs(yn,{children:[n.jsx(Ye,{children:"ID"}),n.jsx(Ye,{children:"Date"}),n.jsx(Ye,{children:"Type"}),n.jsx(Ye,{children:"Items"}),n.jsx(Ye,{className:"text-right",children:"Actions"})]})}),n.jsx(Nr,{children:a.map(o=>{var c;return n.jsxs(yn,{children:[n.jsxs(qe,{className:"font-medium",children:["#",o.id]}),n.jsx(qe,{children:ft(new Date(o.createdAt),"MMM d, yyyy")}),n.jsx(qe,{children:Ix(o.transferType)}),n.jsxs(qe,{children:[((c=o.items)==null?void 0:c.length)||0," items"]}),n.jsx(qe,{className:"text-right",children:n.jsxs(H,{variant:"ghost",size:"sm",className:"gap-1",children:[n.jsx(xo,{className:"h-4 w-4"}),"Details"]})})]},o.id)})})]})})})]})}),n.jsx(Qe,{value:"completed",className:"space-y-4",children:n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Completed Transfers"}),n.jsx(ct,{children:"Transfers that have been completed"})]}),n.jsx(Ee,{children:r?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx(Ed,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):a.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No completed transfers found"}):n.jsx("div",{className:"rounded-md border",children:n.jsxs(jr,{children:[n.jsx(br,{children:n.jsxs(yn,{children:[n.jsx(Ye,{children:"ID"}),n.jsx(Ye,{children:"Date"}),n.jsx(Ye,{children:"Type"}),n.jsx(Ye,{children:"Items"}),n.jsx(Ye,{children:"Completed Date"}),n.jsx(Ye,{className:"text-right",children:"Actions"})]})}),n.jsx(Nr,{children:a.map(o=>{var c;return n.jsxs(yn,{children:[n.jsxs(qe,{className:"font-medium",children:["#",o.id]}),n.jsx(qe,{children:ft(new Date(o.createdAt),"MMM d, yyyy")}),n.jsx(qe,{children:Ix(o.transferType)}),n.jsxs(qe,{children:[((c=o.items)==null?void 0:c.length)||0," items"]}),n.jsx(qe,{children:o.completedAt?ft(new Date(o.completedAt),"MMM d, yyyy"):"-"}),n.jsx(qe,{className:"text-right",children:n.jsxs(H,{variant:"ghost",size:"sm",className:"gap-1",children:[n.jsx(xo,{className:"h-4 w-4"}),"Details"]})})]},o.id)})})]})})})]})})]})]})})}function uge(){return n.jsxs("div",{className:"flex flex-col items-center justify-center h-64 bg-muted/30 rounded-lg p-8",children:[n.jsx(fs,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-center",children:"Inventory Items Feature Coming Soon"}),n.jsx("p",{className:"text-muted-foreground text-center mt-2",children:"This functionality is currently under development and will be available soon."})]})}function hge(){return n.jsxs("div",{className:"flex flex-col items-center justify-center h-64 bg-muted/30 rounded-lg p-8",children:[n.jsx(fs,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-center",children:"Warehouses Feature Coming Soon"}),n.jsx("p",{className:"text-muted-foreground text-center mt-2",children:"This functionality is currently under development and will be available soon."})]})}function mge(){return n.jsxs("div",{className:"flex flex-col items-center justify-center h-64 bg-muted/30 rounded-lg p-8",children:[n.jsx(fs,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-center",children:"Technician Vehicles Feature Coming Soon"}),n.jsx("p",{className:"text-muted-foreground text-center mt-2",children:"This functionality is currently under development and will be available soon."})]})}function fge(){return n.jsxs("div",{className:"flex flex-col items-center justify-center h-64 bg-muted/30 rounded-lg p-8",children:[n.jsx(fs,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-center",children:"Inventory Transfers Feature Coming Soon"}),n.jsx("p",{className:"text-muted-foreground text-center mt-2",children:"This functionality is currently under development and will be available soon."})]})}function pge(){return n.jsxs("div",{className:"flex flex-col items-center justify-center h-64 bg-muted/30 rounded-lg p-8",children:[n.jsx(fs,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-center",children:"Inventory Reports Feature Coming Soon"}),n.jsx("p",{className:"text-muted-foreground text-center mt-2",children:"This functionality is currently under development and will be available soon."})]})}function gge(){const[t,e]=y.useState("items");Lt();const{data:s,isLoading:r}=wt({queryKey:["/api/inventory/summary"],retry:1,enabled:!0});return n.jsxs("div",{className:"container py-4 space-y-6",children:[n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Inventory Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage your inventory items, warehouses, vehicles, and transfers."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[n.jsxs(Ae,{children:[n.jsxs(Be,{className:"flex flex-row items-center justify-between pb-2",children:[n.jsx(Ve,{className:"text-sm font-medium",children:"Total Items"}),n.jsx(BE,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ee,{children:[n.jsx("div",{className:"text-2xl font-bold",children:r?n.jsx(Kt,{className:"h-4 w-4 animate-spin"}):(s==null?void 0:s.totalItems)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique inventory items"})]})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{className:"flex flex-row items-center justify-between pb-2",children:[n.jsx(Ve,{className:"text-sm font-medium",children:"Warehouses"}),n.jsx($E,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ee,{children:[n.jsx("div",{className:"text-2xl font-bold",children:r?n.jsx(Kt,{className:"h-4 w-4 animate-spin"}):(s==null?void 0:s.totalWarehouses)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Storage locations"})]})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{className:"flex flex-row items-center justify-between pb-2",children:[n.jsx(Ve,{className:"text-sm font-medium",children:"Vehicles"}),n.jsx(Xa,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ee,{children:[n.jsx("div",{className:"text-2xl font-bold",children:r?n.jsx(Kt,{className:"h-4 w-4 animate-spin"}):(s==null?void 0:s.totalVehicles)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Technician vehicles"})]})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{className:"flex flex-row items-center justify-between pb-2",children:[n.jsx(Ve,{className:"text-sm font-medium",children:"Pending Transfers"}),n.jsx(RE,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ee,{children:[n.jsx("div",{className:"text-2xl font-bold",children:r?n.jsx(Kt,{className:"h-4 w-4 animate-spin"}):(s==null?void 0:s.pendingTransfers)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting action"})]})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{className:"flex flex-row items-center justify-between pb-2",children:[n.jsx(Ve,{className:"text-sm font-medium",children:"Low Stock"}),n.jsx(fs,{className:"h-4 w-4 text-orange-500"})]}),n.jsxs(Ee,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-500",children:r?n.jsx(Kt,{className:"h-4 w-4 animate-spin"}):(s==null?void 0:s.lowStockItems)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Items to reorder"})]})]})]}),n.jsxs(ps,{defaultValue:"items",value:t,onValueChange:e,className:"w-full",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs(gs,{children:[n.jsxs(Ge,{value:"items",className:"flex items-center gap-2",children:[n.jsx(BE,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Items"})]}),n.jsxs(Ge,{value:"warehouses",className:"flex items-center gap-2",children:[n.jsx($E,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Warehouses"})]}),n.jsxs(Ge,{value:"vehicles",className:"flex items-center gap-2",children:[n.jsx(Xa,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Vehicles"})]}),n.jsxs(Ge,{value:"transfers",className:"flex items-center gap-2",children:[n.jsx(RE,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Transfers"})]}),n.jsxs(Ge,{value:"reports",className:"flex items-center gap-2",children:[n.jsx(oL,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Reports"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[t==="items"&&n.jsxs(H,{size:"sm",className:"flex items-center gap-2",children:[n.jsx(gi,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"New Item"})]}),t==="warehouses"&&n.jsxs(H,{size:"sm",className:"flex items-center gap-2",children:[n.jsx(gi,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"New Warehouse"})]}),t==="vehicles"&&n.jsxs(H,{size:"sm",className:"flex items-center gap-2",children:[n.jsx(gi,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"New Vehicle"})]}),t==="transfers"&&n.jsxs(n.Fragment,{children:[n.jsxs(H,{size:"sm",className:"flex items-center gap-2",children:[n.jsx(gi,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"New Transfer"})]}),n.jsxs(H,{size:"sm",variant:"outline",className:"flex items-center gap-2",children:[n.jsx(kG,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Approve"})]})]}),t==="reports"&&n.jsxs(H,{size:"sm",variant:"outline",className:"flex items-center gap-2",children:[n.jsx(uL,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Export"})]})]})]}),n.jsx(Qe,{value:"items",className:"p-0 mt-4",children:n.jsx(uge,{})}),n.jsx(Qe,{value:"warehouses",className:"p-0 mt-4",children:n.jsx(hge,{})}),n.jsx(Qe,{value:"vehicles",className:"p-0 mt-4",children:n.jsx(mge,{})}),n.jsx(Qe,{value:"transfers",className:"p-0 mt-4",children:n.jsx(fge,{})}),n.jsx(Qe,{value:"reports",className:"p-0 mt-4",children:n.jsx(pge,{})})]})]})}const xge=q.object({apiKey:q.string().min(1,{message:"API key is required"}),apiSecret:q.string().min(1,{message:"API secret is required"}),baseUrl:q.string().url({message:"Please enter a valid URL"}).default("https://fim.us.fleetmatics.com/api"),accountId:q.string().optional().nullable(),syncFrequencyMinutes:q.coerce.number().int().min(5).max(1440).default(15),isActive:q.boolean().default(!0)});function vge(){const{toast:t}=Lt(),e=jn(),[,s]=_n(),[r,i]=y.useState(!1),[a,o]=y.useState(null),{data:c,isLoading:d,error:h}=wt({queryKey:["/api/fleetmatics/config"]}),{mutate:g,isPending:m}=Pt({mutationFn:async S=>c&&"id"in c?pt(`/api/fleetmatics/config/${c.id}`,"PATCH"):pt("/api/fleetmatics/config","POST",{...S,organizationId:1}),onSuccess:()=>{t({title:"Configuration saved",description:"Fleetmatics integration settings have been updated successfully."}),e.invalidateQueries({queryKey:["/api/fleetmatics/config"]})},onError:S=>{t({title:"Error saving configuration",description:S.message||"An error occurred while saving the configuration.",variant:"destructive"})}}),{mutate:p,isPending:v}=Pt({mutationFn:async()=>{i(!0);try{return await pt("/api/fleetmatics/test-connection","GET")}finally{setTimeout(()=>{i(!1)},500)}},onSuccess:S=>{o({success:!0,message:"Successfully connected to Fleetmatics API!"}),t({title:"Connection successful",description:"Successfully connected to Fleetmatics API."})},onError:S=>{o({success:!1,message:S.message||"Failed to connect to Fleetmatics API."}),t({title:"Connection failed",description:S.message||"Failed to connect to Fleetmatics API.",variant:"destructive"})}}),{mutate:j,isPending:N}=Pt({mutationFn:async()=>pt("/api/fleetmatics/sync","POST"),onSuccess:S=>{t({title:"Synchronization complete",description:`Synced ${S.syncedVehicles} vehicles and ${S.syncedLocations} location records.`})},onError:S=>{t({title:"Synchronization failed",description:S.message||"An error occurred during synchronization.",variant:"destructive"})}}),E=mn({resolver:pn(xge),defaultValues:{apiKey:"",apiSecret:"",baseUrl:"https://fim.us.fleetmatics.com/api",accountId:null,syncFrequencyMinutes:15,isActive:!0}});y.useEffect(()=>{if(c&&!E.formState.isDirty){const S=c;E.reset({apiKey:S.apiKey,apiSecret:S.apiSecret||"",baseUrl:S.baseUrl,accountId:S.accountId,syncFrequencyMinutes:S.syncFrequencyMinutes,isActive:S.isActive})}},[c,E]);const _=S=>{g(S)};return n.jsxs("div",{className:"container mx-auto py-6",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Fleetmatics Integration Settings"}),d?n.jsx("div",{className:"flex justify-center p-8",children:n.jsx(Kt,{className:"h-8 w-8 animate-spin"})}):h?n.jsx(Ae,{children:n.jsx(Ee,{className:"pt-6",children:n.jsx("p",{className:"text-red-500",children:"Error loading configuration. Please try again."})})}):n.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"API Configuration"}),n.jsx(ct,{children:"Configure your Fleetmatics API credentials to enable integration"})]}),n.jsx(Ee,{children:n.jsx(fn,{...E,children:n.jsxs("form",{onSubmit:E.handleSubmit(_),className:"space-y-4",children:[n.jsx(J,{control:E.control,name:"apiKey",render:({field:S})=>n.jsxs(Z,{children:[n.jsx(X,{children:"API Key"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter your Fleetmatics API key",...S})}),n.jsx(ot,{children:"The API key for authentication with Fleetmatics"}),n.jsx(ne,{})]})}),n.jsx(J,{control:E.control,name:"apiSecret",render:({field:S})=>n.jsxs(Z,{children:[n.jsx(X,{children:"API Secret"}),n.jsx(Q,{children:n.jsx(ve,{type:"password",placeholder:"Enter your Fleetmatics API secret",...S})}),n.jsx(ot,{children:"The secret key required for API authentication"}),n.jsx(ne,{})]})}),n.jsx(J,{control:E.control,name:"baseUrl",render:({field:S})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Base URL"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"https://fim.us.fleetmatics.com/api",...S})}),n.jsx(ot,{children:"The base URL for the Fleetmatics API"}),n.jsx(ne,{})]})}),n.jsx(J,{control:E.control,name:"accountId",render:({field:S})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Account ID (Optional)"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter your Fleetmatics account ID if needed",...S,value:S.value||"",onChange:C=>S.onChange(C.target.value||null)})}),n.jsx(ot,{children:"Only required for specific account configurations"}),n.jsx(ne,{})]})}),n.jsx(pr,{className:"my-4"}),n.jsx(J,{control:E.control,name:"syncFrequencyMinutes",render:({field:S})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Sync Frequency (minutes)"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",min:5,max:1440,...S})}),n.jsx(ot,{children:"How often to sync vehicle locations (minimum 5 minutes)"}),n.jsx(ne,{})]})}),n.jsx(J,{control:E.control,name:"isActive",render:({field:S})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(X,{className:"text-base",children:"Active Status"}),n.jsx(ot,{children:"Enable or disable the Fleetmatics integration"})]}),n.jsx(Q,{children:n.jsx(is,{checked:S.value,onCheckedChange:S.onChange})})]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-4",children:[n.jsxs(H,{type:"submit",disabled:m||!E.formState.isDirty,className:"flex items-center",children:[m?n.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}):n.jsx(ZC,{className:"mr-2 h-4 w-4"}),"Save Configuration"]}),n.jsxs(H,{type:"button",variant:"outline",onClick:()=>p(),disabled:v||r,className:"flex items-center",children:[v||r?n.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}):a!=null&&a.success?n.jsx(zc,{className:"mr-2 h-4 w-4 text-green-500"}):(a==null?void 0:a.success)===!1?n.jsx(fs,{className:"mr-2 h-4 w-4 text-red-500"}):null,"Test Connection"]}),n.jsxs(H,{type:"button",variant:"outline",onClick:()=>j(),disabled:N||!(c&&c.isActive),className:"flex items-center",children:[N?n.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}):n.jsx(Qa,{className:"mr-2 h-4 w-4"}),"Sync Now"]})]}),a&&n.jsx("div",{className:`mt-4 p-4 rounded-md ${a.success?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:n.jsxs("p",{className:"flex items-center",children:[a.success?n.jsx(zc,{className:"mr-2 h-4 w-4"}):n.jsx(fs,{className:"mr-2 h-4 w-4"}),a.message]})})]})})})]}),c&&n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Integration Status"}),n.jsx(ct,{children:"Current status of your Fleetmatics integration"})]}),n.jsx(Ee,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Status"}),n.jsx("p",{className:"mt-1",children:c.isActive?n.jsxs("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800",children:[n.jsx(zc,{className:"mr-1 h-3 w-3"}),"Active"]}):n.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-800",children:"Inactive"})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Last Sync"}),n.jsx("p",{className:"mt-1",children:c.lastSyncTime?new Date(c.lastSyncTime).toLocaleString():"Never"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Sync Frequency"}),n.jsxs("p",{className:"mt-1",children:[c.syncFrequencyMinutes," minutes"]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Created"}),n.jsx("p",{className:"mt-1",children:new Date(c.createdAt).toLocaleDateString()})]})]})}),n.jsxs(Pn,{className:"text-sm text-gray-500",children:["Last updated: ",new Date(c.updatedAt).toLocaleString()]})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Vehicle Mapping"}),n.jsx(ct,{children:"Map your technician vehicles to Fleetmatics vehicles"})]}),n.jsxs(Ee,{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"This functionality allows you to map each of your technician vehicles to the corresponding vehicle in your Fleetmatics account. This mapping enables accurate tracking and history recording."}),n.jsx(H,{onClick:()=>s("/fleetmatics/vehicle-mapping"),className:"flex items-center",children:"Manage Vehicle Mapping"})]})]})]})]})}function yge(){const{toast:t}=Lt(),e=jn(),[s,r]=y.useState(null),[i,a]=y.useState(null),{data:o,isLoading:c,error:d}=wt({queryKey:["/api/technician-vehicles"]}),{data:h,isLoading:g,error:m,refetch:p}=wt({queryKey:["/api/fleetmatics/vehicles"]}),{mutate:v,isPending:j}=Pt({mutationFn:async()=>{if(!s||!i)throw new Error("Please select both a technician vehicle and a Fleetmatics vehicle");return pt("/api/fleetmatics/map-vehicle","POST")},onSuccess:()=>{t({title:"Vehicles mapped successfully",description:"The technician vehicle has been mapped to the Fleetmatics vehicle."}),e.invalidateQueries({queryKey:["/api/technician-vehicles"]}),r(null),a(null)},onError:S=>{t({title:"Error mapping vehicles",description:S.message||"An error occurred while mapping the vehicles.",variant:"destructive"})}}),{mutate:N,isPending:E}=Pt({mutationFn:async S=>pt(`/api/fleetmatics/unmap-vehicle/${S}`,"POST"),onSuccess:()=>{t({title:"Vehicle unmapped",description:"The vehicle mapping has been removed."}),e.invalidateQueries({queryKey:["/api/technician-vehicles"]})},onError:S=>{t({title:"Error unmapping vehicle",description:S.message||"An error occurred while unmapping the vehicle.",variant:"destructive"})}}),_=S=>{if(!h)return"Unknown";const C=h.find(I=>I.vehicleId===S);return C?C.name:"Unknown"};return n.jsxs("div",{className:"container mx-auto py-6",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Vehicle Mapping"}),n.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Map Vehicles"}),n.jsx(ct,{children:"Connect your technician vehicles with Fleetmatics GPS tracking"})]}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex justify-end",children:n.jsxs(H,{variant:"outline",className:"flex items-center",onClick:()=>p(),children:[n.jsx(Bi,{className:"mr-2 h-4 w-4"}),"Refresh Fleetmatics Vehicles"]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Technician Vehicle"}),n.jsxs(gt,{value:s==null?void 0:s.toString(),onValueChange:S=>r(Number(S)),children:[n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a technician vehicle"})}),n.jsx(ht,{children:c?n.jsx("div",{className:"flex justify-center p-2",children:n.jsx(Kt,{className:"h-4 w-4 animate-spin"})}):d?n.jsx("div",{className:"p-2 text-red-500",children:"Error loading vehicles"}):o&&o.length>0?o.map(S=>n.jsxs(ue,{value:S.id.toString(),children:[S.name," - ",S.make," ",S.model]},S.id)):n.jsx("div",{className:"p-2 text-gray-500",children:"No vehicles found"})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fleetmatics Vehicle"}),n.jsxs(gt,{value:i||"",onValueChange:a,children:[n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a Fleetmatics vehicle"})}),n.jsx(ht,{children:g?n.jsx("div",{className:"flex justify-center p-2",children:n.jsx(Kt,{className:"h-4 w-4 animate-spin"})}):m?n.jsx("div",{className:"p-2 text-red-500",children:"Error loading Fleetmatics vehicles"}):h&&h.length>0?h.map(S=>n.jsxs(ue,{value:S.vehicleId,children:[S.name," ",S.registration?`(${S.registration})`:""]},S.vehicleId)):n.jsx("div",{className:"p-2 text-gray-500",children:"No Fleetmatics vehicles found"})})]})]})]}),n.jsx("div",{className:"flex justify-center mt-6",children:n.jsxs(H,{onClick:()=>v(),disabled:j||!s||!i,className:"flex items-center",children:[j?n.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}):n.jsx(HG,{className:"mr-2 h-4 w-4"}),"Map Vehicles"]})})]})})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Current Vehicle Mappings"}),n.jsx(ct,{children:"Manage your existing vehicle mappings"})]}),n.jsx(Ee,{children:c?n.jsx("div",{className:"flex justify-center p-8",children:n.jsx(Kt,{className:"h-8 w-8 animate-spin"})}):d?n.jsxs("div",{className:"p-4 bg-red-50 text-red-700 rounded-md flex items-center",children:[n.jsx(fs,{className:"h-5 w-5 mr-2"}),"Error loading vehicle data"]}):n.jsx("div",{className:"rounded-md border",children:n.jsxs(jr,{children:[n.jsx(br,{children:n.jsxs(yn,{children:[n.jsx(Ye,{children:"Technician Vehicle"}),n.jsx(Ye,{children:"Make/Model"}),n.jsx(Ye,{children:"Fleetmatics Vehicle"}),n.jsx(Ye,{children:"GPS Device ID"}),n.jsx(Ye,{children:"Last Update"}),n.jsx(Ye,{className:"text-right",children:"Actions"})]})}),n.jsx(Nr,{children:o&&o.length>0?o.map(S=>n.jsxs(yn,{children:[n.jsx(qe,{className:"font-medium",children:S.name}),n.jsxs(qe,{children:[S.make," ",S.model]}),n.jsx(qe,{children:S.fleetmaticsVehicleId?_(S.fleetmaticsVehicleId):n.jsx("span",{className:"text-gray-400",children:"Not mapped"})}),n.jsx(qe,{children:S.gpsDeviceId||n.jsx("span",{className:"text-gray-400",children:"N/A"})}),n.jsx(qe,{children:S.lastLocationUpdate?new Date(S.lastLocationUpdate).toLocaleString():n.jsx("span",{className:"text-gray-400",children:"Never"})}),n.jsx(qe,{className:"text-right",children:S.fleetmaticsVehicleId?n.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>N(S.id),disabled:E,className:"flex items-center",children:[n.jsx(sY,{className:"h-4 w-4 mr-1"}),"Unmap"]}):n.jsx("span",{className:"text-gray-400",children:"No action"})})]},`row-${S.id}`)):n.jsx(yn,{children:n.jsx(qe,{colSpan:6,className:"text-center py-4 text-gray-500",children:"No vehicles found"})})})]})})})]})]})]})}function wge(){var mt;const{toast:t}=Lt(),{isLoaded:e,GoogleMap:s,Marker:r,InfoWindow:i,Circle:a,Polyline:o}=mJ(),[c,d]=y.useState({lat:28,lng:-82}),[h,g]=y.useState(10),[m,p]=y.useState(null),[v,j]=y.useState(null),[N,E]=y.useState(!1),[_,S]=y.useState(60),[C,I]=y.useState(10),[P,L]=y.useState(""),[T,M]=y.useState(""),[k,O]=y.useState(!1),[V,B]=y.useState({start:new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),[Y,z]=y.useState(!1),[G,he]=y.useState([]),{data:le,isLoading:se,error:re,refetch:me}=wt({queryKey:["/api/fleetmatics/locations"],refetchInterval:N?_*1e3:!1}),{mutate:Ce,isPending:$,data:xe}=Pt({mutationFn:async()=>{const ke=parseFloat(P),yt=parseFloat(T);if(isNaN(ke)||isNaN(yt)||C<=0)throw new Error("Please enter valid coordinates and search radius");return fetch(`/api/fleetmatics/vehicles-in-area?latitude=${ke}&longitude=${yt}&radius=${C}`).then(On=>On.json())},onSuccess:ke=>{ke.vehicles&&ke.vehicles.length>0?(d({lat:ke.center.latitude,lng:ke.center.longitude}),O(!0),t({title:"Search complete",description:`Found ${ke.vehicles.length} vehicles in the area.`})):t({title:"No vehicles found",description:"No vehicles were found in the specified area."})},onError:ke=>{t({title:"Search failed",description:ke.message||"An error occurred while searching for vehicles.",variant:"destructive"})}}),{mutate:te,isPending:ae}=Pt({mutationFn:async ke=>fetch(`/api/fleetmatics/history/${ke.vehicleId}?startDate=${ke.startDate}&endDate=${ke.endDate}`).then(yt=>yt.json()),onSuccess:ke=>{if(ke&&ke.length>0){const yt=ke.map(On=>({lat:On.latitude,lng:On.longitude}));he(yt),z(!0),yt.length>0&&d(yt[0]),t({title:"History loaded",description:`Loaded ${ke.length} location points.`})}else t({title:"No history found",description:"No location history found for the selected period."})},onError:ke=>{t({title:"History load failed",description:ke.message||"An error occurred while loading vehicle history.",variant:"destructive"})}}),ee=ke=>le?le.find(yt=>yt.id===ke):null;y.useEffect(()=>{let ke=null;return N&&(ke=setInterval(()=>{me()},_*1e3)),()=>{ke&&clearInterval(ke)}},[N,_,me]),y.useEffect(()=>{if(m){const ke=ee(m);ke&&ke.lastKnownLatitude&&ke.lastKnownLongitude&&(d({lat:ke.lastKnownLatitude,lng:ke.lastKnownLongitude}),g(14))}},[m,le]);const de=()=>{if(!m){t({title:"No vehicle selected",description:"Please select a vehicle to view its history.",variant:"destructive"});return}const ke={vehicleId:m,startDate:V.start,endDate:V.end};te(ke)},pe=()=>{z(!1),he([])},Me=ke=>{p(ke),j(ke)},Le=ke=>{if(!ke)return"Never";const yt=new Date(ke),zt=Math.floor((new Date().getTime()-yt.getTime())/(1e3*60));if(zt<1)return"Just now";if(zt<60)return`${zt} minute${zt===1?"":"s"} ago`;const ce=Math.floor(zt/60);if(ce<24)return`${ce} hour${ce===1?"":"s"} ago`;const be=Math.floor(ce/24);return be<30?`${be} day${be===1?"":"s"} ago`:yt.toLocaleDateString()},We=()=>e?n.jsx("div",{className:"h-[400px] rounded-md overflow-hidden",children:s&&n.jsxs(s,{center:c,zoom:h,mapContainerStyle:{width:"100%",height:"100%"},options:{streetViewControl:!1,mapTypeControl:!0,fullscreenControl:!0},children:[k&&xe&&a&&n.jsx(a,{center:{lat:xe.center.latitude,lng:xe.center.longitude},radius:xe.radiusMiles*1609.34,options:{fillColor:"rgba(66, 133, 244, 0.2)",fillOpacity:.3,strokeColor:"#4285F4",strokeOpacity:.8,strokeWeight:2}}),le&&le.map(ke=>n.jsx("div",{children:r&&ke.lastKnownLatitude&&ke.lastKnownLongitude&&n.jsx(r,{position:{lat:ke.lastKnownLatitude,lng:ke.lastKnownLongitude},onClick:()=>Me(ke.id),icon:{url:m===ke.id?"https://maps.google.com/mapfiles/ms/icons/blue-dot.png":"https://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:{width:32,height:32}},children:i&&v===ke.id&&n.jsx(i,{position:{lat:ke.lastKnownLatitude,lng:ke.lastKnownLongitude},onCloseClick:()=>j(null),children:n.jsxs("div",{className:"p-2 min-w-[200px]",children:[n.jsx("h3",{className:"font-bold text-sm",children:ke.name}),n.jsxs("p",{className:"text-xs",children:[ke.make," ",ke.model]}),ke.address&&n.jsx("p",{className:"text-xs mt-1",children:ke.address}),n.jsxs("p",{className:"text-xs mt-1",children:["Updated: ",Le(ke.lastLocationUpdate)]}),n.jsx("div",{className:"mt-2",children:n.jsxs(H,{variant:"outline",size:"sm",className:"text-xs h-7 w-full",onClick:yt=>{yt.stopPropagation(),B({start:new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),de()},children:[n.jsx(Sp,{className:"h-3 w-3 mr-1"}),"View 24h History"]})})]})})})},`marker-${ke.id}`)),Y&&G.length>0&&o&&n.jsx(o,{path:G,options:{strokeColor:"#4285F4",strokeOpacity:.8,strokeWeight:3}})]})}):n.jsx("div",{className:"h-[400px] flex items-center justify-center bg-slate-100 rounded-md",children:n.jsx(Kt,{className:"h-8 w-8 animate-spin text-primary"})}),jt=()=>se?n.jsx("div",{className:"py-8 flex justify-center",children:n.jsx(Kt,{className:"h-8 w-8 animate-spin text-primary"})}):re?n.jsx("div",{className:"py-4 text-center",children:n.jsx("p",{className:"text-red-500",children:"Error loading vehicles"})}):!le||le.length===0?n.jsx("div",{className:"py-4 text-center",children:n.jsx("p",{className:"text-gray-500",children:"No vehicles found with location data"})}):n.jsx("div",{className:"rounded-md border overflow-hidden",children:n.jsxs(jr,{children:[n.jsx(br,{children:n.jsxs(yn,{children:[n.jsx(Ye,{children:"Vehicle"}),n.jsx(Ye,{children:"Last Known Location"}),n.jsx(Ye,{children:"Last Update"}),n.jsx(Ye,{className:"text-right",children:"Actions"})]})}),n.jsx(Nr,{children:le.map(ke=>n.jsxs(yn,{className:m===ke.id?"bg-blue-50":"",children:[n.jsxs(qe,{className:"font-medium",children:[n.jsx("div",{children:ke.name}),n.jsxs("div",{className:"text-xs text-gray-500",children:[ke.make," ",ke.model]})]}),n.jsx(qe,{children:ke.lastKnownLatitude&&ke.lastKnownLongitude?n.jsxs("div",{children:[n.jsx("div",{className:"text-xs",children:ke.address||"Address unavailable"}),n.jsxs("div",{className:"text-[10px] text-gray-500",children:[ke.lastKnownLatitude.toFixed(6),", ",ke.lastKnownLongitude.toFixed(6)]})]}):n.jsx("span",{className:"text-gray-400",children:"No location data"})}),n.jsx(qe,{children:ke.lastLocationUpdate?Le(ke.lastLocationUpdate):n.jsx("span",{className:"text-gray-400",children:"Never"})}),n.jsx(qe,{className:"text-right",children:n.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>Me(ke.id),className:"h-8 px-2",children:[n.jsx(bi,{className:"h-4 w-4 mr-1"}),n.jsx("span",{className:"sr-only md:not-sr-only",children:"Locate"})]})})]},`table-${ke.id}`))})]})});return n.jsxs("div",{className:"container mx-auto py-6",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Vehicle Tracking"}),n.jsx("div",{className:"grid grid-cols-1 gap-6",children:n.jsxs(Ae,{children:[n.jsx(Be,{className:"pb-3",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx(Ve,{children:"Live Vehicle Map"}),n.jsx(ct,{children:"Track the real-time location of your service vehicles"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(H,{variant:"outline",size:"sm",onClick:()=>me(),disabled:se,className:"flex items-center",children:[se?n.jsx(Kt,{className:"h-4 w-4 animate-spin mr-1"}):n.jsx(Qa,{className:"h-4 w-4 mr-1"}),"Refresh"]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(is,{id:"auto-refresh",checked:N,onCheckedChange:E}),n.jsx("label",{htmlFor:"auto-refresh",className:"text-sm font-medium cursor-pointer",children:"Auto-refresh"})]})]})]})}),n.jsx(Ee,{children:n.jsx("div",{className:"mb-4",children:n.jsxs(ps,{defaultValue:"map",className:"w-full",children:[n.jsxs(gs,{children:[n.jsx(Ge,{value:"map",children:"Map View"}),n.jsx(Ge,{value:"search",children:"Search Area"}),n.jsx(Ge,{value:"history",children:"Vehicle History"})]}),n.jsxs(Qe,{value:"map",className:"space-y-4",children:[We(),n.jsx("div",{className:"mt-4",children:jt()})]}),n.jsxs(Qe,{value:"search",className:"space-y-4",children:[n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Search Vehicles in Area"}),n.jsx(ct,{children:"Find vehicles within a specified radius of a location"})]}),n.jsxs(Ee,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Latitude"}),n.jsx(ve,{type:"text",value:P,onChange:ke=>L(ke.target.value),placeholder:"e.g. 28.0395"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Longitude"}),n.jsx(ve,{type:"text",value:T,onChange:ke=>M(ke.target.value),placeholder:"e.g. -82.5146"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Radius (miles)"}),n.jsx(ve,{type:"number",value:C,onChange:ke=>I(parseInt(ke.target.value)||0),min:1,max:100})]})]}),n.jsx("div",{className:"mt-4 flex justify-end",children:n.jsxs(H,{onClick:()=>Ce(),disabled:$||!P||!T||C<=0,className:"flex items-center",children:[$?n.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}):n.jsx(Bi,{className:"mr-2 h-4 w-4"}),"Search"]})})]})]}),xe&&xe.vehicles&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-2",children:"Search Results"}),We(),n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:"rounded-md border overflow-hidden",children:n.jsxs(jr,{children:[n.jsx(br,{children:n.jsxs(yn,{children:[n.jsx(Ye,{children:"Vehicle"}),n.jsx(Ye,{children:"Distance"}),n.jsx(Ye,{children:"Last Update"}),n.jsx(Ye,{className:"text-right",children:"Actions"})]})}),n.jsx(Nr,{children:xe.vehicles.map(ke=>n.jsxs(yn,{children:[n.jsxs(qe,{className:"font-medium",children:[n.jsx("div",{children:ke.name}),n.jsxs("div",{className:"text-xs text-gray-500",children:[ke.make," ",ke.model]})]}),n.jsx(qe,{children:n.jsxs("span",{className:"text-sm",children:["Within ",C," miles"]})}),n.jsx(qe,{children:ke.lastLocationUpdate?Le(ke.lastLocationUpdate):n.jsx("span",{className:"text-gray-400",children:"Never"})}),n.jsx(qe,{className:"text-right",children:n.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>Me(ke.id),className:"h-8 px-2",children:[n.jsx(bi,{className:"h-4 w-4 mr-1"}),n.jsx("span",{className:"sr-only md:not-sr-only",children:"Locate"})]})})]},`search-${ke.id}`))})]})})})]})]}),n.jsxs(Qe,{value:"history",className:"space-y-4",children:[n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Vehicle Location History"}),n.jsx(ct,{children:"View the movement history of a selected vehicle"})]}),n.jsxs(Ee,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Vehicle"}),n.jsxs(gt,{value:(m==null?void 0:m.toString())||"",onValueChange:ke=>p(Number(ke)),children:[n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a vehicle"})}),n.jsx(ht,{children:le&&le.map(ke=>n.jsxs(ue,{value:ke.id.toString(),children:[ke.name," - ",ke.make," ",ke.model]},`select-${ke.id}`))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start Date"}),n.jsx(ve,{type:"date",value:V.start,onChange:ke=>B({...V,start:ke.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"End Date"}),n.jsx(ve,{type:"date",value:V.end,onChange:ke=>B({...V,end:ke.target.value})})]})]}),n.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[Y&&n.jsx(H,{variant:"outline",onClick:pe,className:"flex items-center",children:"Clear Path"}),n.jsxs(H,{onClick:de,disabled:ae||!m,className:"flex items-center",children:[ae?n.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}):n.jsx(Sp,{className:"mr-2 h-4 w-4"}),"Load History"]})]})]})]}),Y&&G.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-2",children:"Location History"}),We(),n.jsx("div",{className:"mt-4",children:n.jsxs(Ae,{children:[n.jsx(Be,{children:n.jsx(Ve,{children:"History Summary"})}),n.jsx(Ee,{children:n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Points:"}),n.jsx("span",{className:"text-sm ml-2",children:G.length})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Period:"}),n.jsxs("span",{className:"text-sm ml-2",children:[new Date(V.start).toLocaleDateString()," - ",new Date(V.end).toLocaleDateString()]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Vehicle:"}),n.jsx("span",{className:"text-sm ml-2",children:m?(mt=ee(m))==null?void 0:mt.name:"None selected"})]})]})})})]})})]})]})]})})})]})})]})}const jge=q.object({id:q.string(),text:q.string().min(1,"Checklist item cannot be empty"),required:q.boolean().default(!0)}),bge=q.object({name:q.string().min(1,"Template name is required"),type:q.string().min(1,"Template type is required"),description:q.string().optional(),isDefault:q.boolean().default(!1),checklistItems:q.array(jge).min(1,"At least one checklist item is required")});function Nge(){var _;const[t,e]=y.useState(!1),[s,r]=y.useState(null),{toast:i}=Lt(),a=jn(),{data:o=[],isLoading:c,error:d}=wt({queryKey:["/api/service-templates"],select:S=>S}),h=Pt({mutationFn:async S=>s?await pt(`/api/service-templates/${s.id}`,"PATCH"):await pt("/api/service-templates","POST"),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/service-templates"]}),e(!1),i({title:s?"Template updated":"Template created",description:s?"Service template has been updated successfully":"New service template has been created"}),r(null)}}),g=Pt({mutationFn:async S=>await pt(`/api/service-templates/${S}`,"DELETE"),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/service-templates"]}),i({title:"Template deleted",description:"Service template has been deleted successfully"})}}),m=mn({resolver:pn(bge),defaultValues:{name:"",type:"pool_service",description:"",isDefault:!1,checklistItems:[{id:crypto.randomUUID(),text:"Check water chemistry",required:!0},{id:crypto.randomUUID(),text:"Clean skimmer basket",required:!0},{id:crypto.randomUUID(),text:"Clean pump basket",required:!0}]}}),p=S=>{S||(m.reset(),r(null)),e(S)},v=S=>{const I=(S.checklistItems||[]).map((P,L)=>({id:`item-${L}`,text:P,required:!0}));r(S),m.reset({name:S.name,type:S.type,description:S.description||"",isDefault:S.isDefault===null?!1:S.isDefault,checklistItems:I}),e(!0)},j=()=>{const S=m.getValues("checklistItems")||[];m.setValue("checklistItems",[...S,{id:crypto.randomUUID(),text:"",required:!0}])},N=S=>{const C=m.getValues("checklistItems");if(C.length<=1){i({title:"Cannot remove item",description:"You must have at least one checklist item",variant:"destructive"});return}m.setValue("checklistItems",C.filter((I,P)=>P!==S))},E=S=>{const C={...S,checklistItems:S.checklistItems.map(I=>I.text)};h.mutate(C)};return n.jsxs(Ae,{className:"mb-6",children:[n.jsx(Be,{children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx(Ve,{children:"Service Templates"}),n.jsx(ct,{className:"mt-1",children:"Configure default service templates for different pool types and maintenance services. These templates will be available in service reports and can be customized for each client."})]}),n.jsxs(An,{open:t,onOpenChange:p,children:[n.jsx(ll,{asChild:!0,children:n.jsxs(H,{size:"default",className:"w-full sm:w-auto",children:[n.jsx(os,{className:"mr-2 h-4 w-4"}),"Add Template"]})}),n.jsxs(wn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:s?"Edit Template":"Create Template"}),n.jsx(ws,{children:s?"Update an existing service template":"Create a new service template for technicians to use during maintenance visits"})]}),n.jsx(fn,{...m,children:n.jsxs("form",{onSubmit:m.handleSubmit(E),className:"space-y-4",children:[n.jsx(J,{control:m.control,name:"name",render:({field:S})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Template Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Weekly Pool Service",...S})}),n.jsx(ot,{children:"A descriptive name for this service template"}),n.jsx(ne,{})]})}),n.jsx(J,{control:m.control,name:"type",render:({field:S})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Template Type"}),n.jsxs(gt,{onValueChange:S.onChange,defaultValue:S.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a type"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"pool_service",children:"Pool Service"}),n.jsx(ue,{value:"hot_tub_service",children:"Hot Tub Service"}),n.jsx(ue,{value:"combined_service",children:"Combined Service"}),n.jsx(ue,{value:"startup_service",children:"Startup Service"}),n.jsx(ue,{value:"closing_service",children:"Closing Service"})]})]}),n.jsx(ot,{children:"The type of service this template is for"}),n.jsx(ne,{})]})}),n.jsx(J,{control:m.control,name:"description",render:({field:S})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Description"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:"Standard weekly pool maintenance service including chemistry checks and cleaning",className:"min-h-20",...S})}),n.jsx(ot,{children:"A detailed description of what this service template is used for"}),n.jsx(ne,{})]})}),n.jsx(J,{control:m.control,name:"isDefault",render:({field:S})=>n.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[n.jsx(Q,{children:n.jsx("input",{type:"checkbox",className:"h-4 w-4 mt-1",checked:S.value,onChange:S.onChange})}),n.jsxs("div",{className:"space-y-1 leading-none",children:[n.jsx(X,{children:"Default Template"}),n.jsx(ot,{children:"Make this the default template for this service type"})]})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx(X,{children:"Checklist Items"}),n.jsxs(H,{type:"button",variant:"outline",size:"sm",onClick:j,children:[n.jsx(os,{className:"h-4 w-4 mr-1"})," Add Item"]})]}),(_=m.watch("checklistItems"))==null?void 0:_.map((S,C)=>n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(J,{control:m.control,name:`checklistItems.${C}.text`,render:({field:I})=>n.jsxs(Z,{className:"flex-1",children:[n.jsx(Q,{children:n.jsx(ve,{placeholder:"Checklist item",...I})}),n.jsx(ne,{})]})}),n.jsx(J,{control:m.control,name:`checklistItems.${C}.required`,render:({field:I})=>n.jsxs(Z,{className:"flex items-center space-x-1 mt-2",children:[n.jsx(Q,{children:n.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:I.value,onChange:I.onChange})}),n.jsx(X,{className:"text-xs font-normal",children:"Required"})]})}),n.jsx(H,{type:"button",variant:"ghost",size:"icon",onClick:()=>N(C),children:n.jsx(tm,{className:"h-4 w-4 text-red-500"})})]},S.id))]}),n.jsx(hs,{children:n.jsx(H,{type:"submit",disabled:h.isPending,children:h.isPending?"Saving...":"Save Template"})})]})})]})]})]})}),n.jsx(Ee,{children:c?n.jsx("div",{className:"flex justify-center p-8",children:n.jsx("div",{className:"animate-pulse",children:"Loading templates..."})}):d?n.jsx("div",{className:"bg-red-50 text-red-800 p-4 rounded-md",children:"Error loading templates. Please try again."}):o.length===0?n.jsxs("div",{className:"p-8 flex flex-col items-center justify-center text-center",children:[n.jsx("div",{className:"text-gray-500 mb-4",children:"No service templates created yet"}),n.jsxs(H,{onClick:()=>e(!0),children:[n.jsx(os,{className:"mr-2 h-4 w-4"}),"Create Your First Template"]})]}):n.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:o.map(S=>n.jsxs(Ae,{className:"overflow-hidden",children:[n.jsx(Be,{className:"pb-2",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx(Ve,{children:S.name}),n.jsx(ct,{className:"mt-1",children:S.type.replace("_"," ")})]}),S.isDefault&&n.jsx(Ze,{variant:"default",className:"ml-2",children:"Default"})]})}),n.jsxs(Ee,{className:"text-sm",children:[n.jsx("p",{className:"text-gray-500 mb-4",children:S.description||"No description"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-medium text-sm",children:"Checklist Items:"}),n.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[(S.checklistItems||[]).slice(0,3).map((C,I)=>n.jsx("li",{className:"text-sm text-gray-700",children:C},I)),(S.checklistItems||[]).length>3&&n.jsxs("li",{className:"text-sm text-gray-500 italic",children:["+",(S.checklistItems||[]).length-3," more items"]})]})]})]}),n.jsxs(Pn,{className:"flex justify-end gap-2 pt-2",children:[n.jsxs(H,{variant:"outline",size:"sm",onClick:()=>v(S),children:[n.jsx(Gr,{className:"h-4 w-4 mr-1"})," Edit"]}),n.jsxs(H,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>{window.confirm("Are you sure you want to delete this template?")&&g.mutate(S.id)},children:[n.jsx(tm,{className:"h-4 w-4 mr-1"})," Delete"]})]})]},S.id))})})]})}var FS="Avatar",[Cge,Fye]=Or(FS),[Sge,nV]=Cge(FS),sV=y.forwardRef((t,e)=>{const{__scopeAvatar:s,...r}=t,[i,a]=y.useState("idle");return n.jsx(Sge,{scope:s,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:n.jsx(St.span,{...r,ref:e})})});sV.displayName=FS;var rV="AvatarImage",iV=y.forwardRef((t,e)=>{const{__scopeAvatar:s,src:r,onLoadingStatusChange:i=()=>{},...a}=t,o=nV(rV,s),c=Age(r,a.referrerPolicy),d=vs(h=>{i(h),o.onImageLoadingStatusChange(h)});return Bs(()=>{c!=="idle"&&d(c)},[c,d]),c==="loaded"?n.jsx(St.img,{...a,ref:e,src:r}):null});iV.displayName=rV;var aV="AvatarFallback",oV=y.forwardRef((t,e)=>{const{__scopeAvatar:s,delayMs:r,...i}=t,a=nV(aV,s),[o,c]=y.useState(r===void 0);return y.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(d)}},[r]),o&&a.imageLoadingStatus!=="loaded"?n.jsx(St.span,{...i,ref:e}):null});oV.displayName=aV;function Age(t,e){const[s,r]=y.useState("idle");return Bs(()=>{if(!t){r("error");return}let i=!0;const a=new window.Image,o=c=>()=>{i&&r(c)};return r("loading"),a.onload=o("loaded"),a.onerror=o("error"),a.src=t,e&&(a.referrerPolicy=e),()=>{i=!1}},[t,e]),s}var lV=sV,cV=iV,dV=oV;const BS=y.forwardRef(({className:t,...e},s)=>n.jsx(lV,{ref:s,className:we("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));BS.displayName=lV.displayName;const Ege=y.forwardRef(({className:t,...e},s)=>n.jsx(cV,{ref:s,className:we("aspect-square h-full w-full",t),...e}));Ege.displayName=cV.displayName;const zS=y.forwardRef(({className:t,...e},s)=>n.jsx(dV,{ref:s,className:we("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));zS.displayName=dV.displayName;const _ge=q.object({username:q.string().min(3,"Username must be at least 3 characters"),name:q.string().min(2,"Name is required"),email:q.string().email("Invalid email address"),role:q.enum(["system_admin","org_admin","manager","technician","client","office_staff"]),active:q.boolean().default(!0),organizationId:q.number().min(1,"Organization is required"),password:q.string().min(6,"Password must be at least 6 characters").optional(),confirmPassword:q.string().optional()}).refine(t=>!t.password||t.password===t.confirmPassword,{message:"Passwords must match",path:["confirmPassword"]});function uV(){const[t,e]=y.useState(!1),[s,r]=y.useState(null),[i,a]=y.useState(""),{toast:o}=Lt(),c=jn(),{data:d=[],isLoading:h,error:g}=wt({queryKey:["/api/users"],select:T=>T}),{data:m=[],isLoading:p,error:v}=wt({queryKey:["/api/organizations"],queryFn:async()=>{try{const T=await pt("/api/organizations","GET");return console.log("Organizations API response:",T),T&&Array.isArray(T)?T:(console.log("No organizations found or empty array returned"),[])}catch(T){throw console.error("Error fetching organizations:",T),T}},retry:1,staleTime:5*60*1e3}),j=Pt({mutationFn:async T=>s?await pt(`/api/users/${s.id}`,"PATCH"):await pt("/api/users","POST"),onSuccess:()=>{c.invalidateQueries({queryKey:["/api/users"]}),e(!1),o({title:s?"User updated":"User created",description:s?"User has been updated successfully":"New user has been created"}),r(null)}}),N=Pt({mutationFn:async({userId:T,permanent:M})=>(console.log(`Calling DELETE API for user ID: ${T}, permanent: ${M}`),await pt(`/api/users/${T}${M?"?permanent=true":""}`,"DELETE")),onSuccess:T=>{console.log("Delete user response:",T),c.invalidateQueries({queryKey:["/api/users"]});const M=T.permanent?"deleted":"deactivated";o({title:`User ${M}`,description:T.message||`User has been ${M} successfully`})},onError:T=>{console.error("Error modifying user:",T),o({title:"Error",description:T.message||"Failed to modify user",variant:"destructive"})}}),E=T=>{confirm(`What would you like to do with ${T.name}?

- Click OK to permanently DELETE this user
- Click Cancel to just DEACTIVATE (user will be set to inactive status)`)?(console.log(`Permanently deleting user with ID: ${T.id}`),N.mutate({userId:T.id,permanent:!0})):confirm(`Are you sure you want to deactivate ${T.name}? (They can be reactivated later)`)&&(console.log(`Deactivating user with ID: ${T.id}`),N.mutate({userId:T.id,permanent:!1}))},_=mn({resolver:pn(_ge),defaultValues:{username:"",name:"",email:"",role:"technician",active:!0,organizationId:m.length>0?m[0].id:1,password:"",confirmPassword:""}}),S=T=>{T||(_.reset(),r(null)),e(T)},C=T=>{r(T),_.reset({username:T.username,name:T.name,email:T.email||"",role:T.role,active:T.active,organizationId:T.organizationId||(m.length>0?m[0].id:1)}),e(!0)},I=T=>{if(s&&(!T.password||T.password.length===0)){const{password:M,confirmPassword:k,...O}=T;j.mutate(O)}else j.mutate(T)},P=d.filter(T=>{var O,V,B,Y,z;const M=i.toLowerCase(),k=((O=m.find(G=>G.id===T.organizationId))==null?void 0:O.name)||"";return((V=T.name)==null?void 0:V.toLowerCase().includes(M))||((B=T.username)==null?void 0:B.toLowerCase().includes(M))||((Y=T.email)==null?void 0:Y.toLowerCase().includes(M))||((z=T.role)==null?void 0:z.toLowerCase().includes(M))||k.toLowerCase().includes(M)}),L=T=>{switch(T){case"system_admin":return"bg-red-100 text-red-800";case"org_admin":return"bg-orange-100 text-orange-800";case"manager":return"bg-purple-100 text-purple-800";case"office_staff":return"bg-amber-100 text-amber-800";case"technician":return"bg-blue-100 text-blue-800";case"client":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return n.jsxs(Ae,{children:[n.jsx(Be,{children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx(Ve,{children:"User Management"}),n.jsx(ct,{className:"mt-1",children:"Manage system users, assign roles, and control access permissions."})]}),n.jsxs(An,{open:t,onOpenChange:S,children:[n.jsx(ll,{asChild:!0,children:n.jsxs(H,{size:"default",className:"w-full sm:w-auto",children:[n.jsx(os,{className:"mr-2 h-4 w-4"}),"Add User"]})}),n.jsxs(wn,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:s?"Edit User":"Create User"}),n.jsx(ws,{children:s?"Update existing user details and permissions":"Add a new user to the system"})]}),n.jsx(fn,{..._,children:n.jsxs("form",{onSubmit:_.handleSubmit(I),className:"space-y-4",children:[n.jsx(J,{control:_.control,name:"username",render:({field:T})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Username"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"johndoe",...T})}),n.jsx(ot,{children:"Unique username for login"}),n.jsx(ne,{})]})}),n.jsx(J,{control:_.control,name:"name",render:({field:T})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Full Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"John Doe",...T})}),n.jsx(ne,{})]})}),n.jsx(J,{control:_.control,name:"email",render:({field:T})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Email"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"john.doe@example.com",type:"email",...T})}),n.jsx(ne,{})]})}),n.jsx(J,{control:_.control,name:"role",render:({field:T})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Role"}),n.jsxs(gt,{onValueChange:T.onChange,defaultValue:T.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a role"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"system_admin",children:"System Admin"}),n.jsx(ue,{value:"org_admin",children:"Organization Admin"}),n.jsx(ue,{value:"manager",children:"Manager"}),n.jsx(ue,{value:"office_staff",children:"Office Staff"}),n.jsx(ue,{value:"technician",children:"Technician"}),n.jsx(ue,{value:"client",children:"Client"})]})]}),n.jsx(ot,{children:"User's role determines their permissions"}),n.jsx(ne,{})]})}),n.jsx(J,{control:_.control,name:"organizationId",render:({field:T})=>{var M;return n.jsxs(Z,{children:[n.jsx(X,{children:"Organization"}),n.jsxs(gt,{onValueChange:k=>T.onChange(parseInt(k)),value:(M=T.value)==null?void 0:M.toString(),children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select an organization"})})}),n.jsx(ht,{children:m.length===0?n.jsx(ue,{value:"1",children:"Loading organizations..."}):m.map(k=>n.jsx(ue,{value:k.id.toString(),children:k.name},k.id))})]}),n.jsx(ot,{children:"Organization the user belongs to"}),n.jsx(ne,{})]})}}),n.jsx(J,{control:_.control,name:"active",render:({field:T})=>n.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[n.jsx(Q,{children:n.jsx("input",{type:"checkbox",className:"h-4 w-4 mt-1",checked:T.value,onChange:T.onChange})}),n.jsxs("div",{className:"space-y-1 leading-none",children:[n.jsx(X,{children:"Active"}),n.jsx(ot,{children:"Inactive users cannot log in to the system"})]})]})}),n.jsx(J,{control:_.control,name:"password",render:({field:T})=>n.jsxs(Z,{children:[n.jsx(X,{children:s?"New Password (leave blank to keep current)":"Password"}),n.jsx(Q,{children:n.jsx(ve,{type:"password",...T})}),n.jsx(ne,{})]})}),n.jsx(J,{control:_.control,name:"confirmPassword",render:({field:T})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Confirm Password"}),n.jsx(Q,{children:n.jsx(ve,{type:"password",...T})}),n.jsx(ne,{})]})}),n.jsx(hs,{children:n.jsx(H,{type:"submit",disabled:j.isPending,children:j.isPending?"Saving...":"Save User"})})]})})]})]})]})}),n.jsxs(Ee,{children:[n.jsxs("div",{className:"mb-4 relative",children:[n.jsx(Bi,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),n.jsx(ve,{className:"pl-9",placeholder:"Search users by name, email, role, or organization...",value:i,onChange:T=>a(T.target.value)})]}),h?n.jsx("div",{className:"flex justify-center p-8",children:n.jsx("div",{className:"animate-pulse",children:"Loading users..."})}):g?n.jsx("div",{className:"bg-red-50 text-red-800 p-4 rounded-md",children:"Error loading users. Please try again."}):P.length===0?n.jsxs("div",{className:"p-8 flex flex-col items-center justify-center text-center",children:[n.jsx("div",{className:"text-gray-500 mb-4",children:"No users found"}),n.jsxs(H,{onClick:()=>e(!0),children:[n.jsx(os,{className:"mr-2 h-4 w-4"}),"Add User"]})]}):n.jsx("div",{className:"rounded-md border",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b bg-muted/50",children:[n.jsx("th",{className:"h-10 px-4 text-left font-medium",children:"User"}),n.jsx("th",{className:"h-10 px-4 text-left font-medium",children:"Username"}),n.jsx("th",{className:"h-10 px-4 text-left font-medium",children:"Organization"}),n.jsx("th",{className:"h-10 px-4 text-left font-medium",children:"Role"}),n.jsx("th",{className:"h-10 px-4 text-left font-medium",children:"Status"}),n.jsx("th",{className:"h-10 px-4 text-right font-medium",children:"Actions"})]})}),n.jsx("tbody",{children:P.map(T=>{var M,k;return n.jsxs("tr",{className:"border-b",children:[n.jsxs("td",{className:"p-4 align-middle flex items-center gap-3",children:[n.jsx(BS,{className:"h-8 w-8",children:n.jsx(zS,{className:"bg-primary/10",children:(M=T.name)==null?void 0:M.substring(0,2).toUpperCase()})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:T.name}),n.jsx("div",{className:"text-xs text-gray-500",children:T.email})]})]}),n.jsx("td",{className:"p-4 align-middle",children:T.username}),n.jsx("td",{className:"p-4 align-middle",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zl,{className:"h-4 w-4 text-gray-400"}),T.organization?T.organization.name:T.organizationId?p?"Loading...":((k=m.find(O=>O.id===T.organizationId))==null?void 0:k.name)||`Organization ID: ${T.organizationId}`:"No Organization"]})}),n.jsx("td",{className:"p-4 align-middle",children:n.jsx(Ze,{className:L(T.role),children:T.role.charAt(0).toUpperCase()+T.role.slice(1)})}),n.jsx("td",{className:"p-4 align-middle",children:n.jsx(Ze,{variant:T.active?"outline":"secondary",children:T.active?"Active":"Inactive"})}),n.jsx("td",{className:"p-4 align-middle text-right",children:n.jsxs("div",{className:"flex justify-end space-x-1",children:[n.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>C(T),children:[n.jsx(Gr,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Edit"})]}),T.role!=="system_admin"&&n.jsxs(H,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>E(T),disabled:N.isPending,children:[n.jsx(tm,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Delete"})]})]})})]},T.id)})})]})})})]})]})}const Ige=q.object({name:q.string().min(2,"Name must be at least 2 characters"),email:q.string().email("Invalid email address"),role:q.string().min(1,"Role is required"),organizationId:q.number().optional()});function dT({onSuccess:t}){const{toast:e}=Lt(),{user:s}=Kr(),[r,i]=Ne.useState(!1),[a,o]=Ne.useState(!1),c=mn({resolver:pn(Ige),defaultValues:{name:"",email:"",role:"admin",organizationId:s==null?void 0:s.organizationId}}),d=async h=>{if(!(s!=null&&s.organizationId)){e({title:"Error",description:"You must be associated with an organization to invite users",variant:"destructive"});return}try{o(!0);const g={...h,organizationId:s.organizationId};console.log("Sending invitation with payload:",g);const m=await pt("/api/invitations","POST",g);m.success?(e({title:"Invitation sent!",description:`An invitation email has been sent to ${h.email}`}),c.reset(),i(!1),t&&t()):e({title:"Failed to send invitation",description:m.message||"An error occurred while sending the invitation",variant:"destructive"})}catch(g){e({title:"Error",description:g.message||"Failed to send invitation",variant:"destructive"})}finally{o(!1)}};return n.jsxs(An,{open:r,onOpenChange:i,children:[n.jsx(ll,{asChild:!0,children:n.jsxs(H,{children:[n.jsx(e2,{className:"mr-2 h-4 w-4"}),"Invite User"]})}),n.jsxs(wn,{className:"sm:max-w-[425px]",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:"Invite a new user"}),n.jsx(ws,{children:"Send an invitation for a new user to join your organization. They'll receive an email with instructions to complete their registration."})]}),n.jsx(fn,{...c,children:n.jsxs("form",{onSubmit:c.handleSubmit(d),className:"space-y-4",children:[n.jsx(J,{control:c.control,name:"name",render:({field:h})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Name"}),n.jsx(Q,{children:n.jsx(ve,{...h})}),n.jsx(ot,{children:"The full name of the person you're inviting"}),n.jsx(ne,{})]})}),n.jsx(J,{control:c.control,name:"email",render:({field:h})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Email"}),n.jsx(Q,{children:n.jsx(ve,{...h,type:"email"})}),n.jsx(ot,{children:"The invitation will be sent to this email address"}),n.jsx(ne,{})]})}),n.jsx(J,{control:c.control,name:"role",render:({field:h})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Role"}),n.jsxs(gt,{onValueChange:h.onChange,defaultValue:h.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a role"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"admin",children:"Administrator"}),n.jsx(ue,{value:"technician",children:"Technician"}),n.jsx(ue,{value:"client",children:"Client"}),(s==null?void 0:s.role)==="system_admin"&&n.jsx(ue,{value:"org_admin",children:"Organization Admin"})]})]}),n.jsx(ot,{children:"The role determines what permissions the user will have"}),n.jsx(ne,{})]})}),n.jsx(hs,{children:n.jsx(H,{type:"submit",disabled:a,className:"w-full",children:a?n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending invitation..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Qs,{className:"mr-2 h-4 w-4"}),"Send Invitation"]})})})]})})]})]})}function Tge(){const[t,e]=y.useState(""),{toast:s}=Lt(),r=jn(),{data:i=[],isLoading:a,error:o,refetch:c}=wt({queryKey:["/api/invitations"],select:N=>N.invitations||[]}),d=Pt({mutationFn:async N=>await pt(`/api/invitations/${N}`,{method:"DELETE"}),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/invitations"]}),s({title:"Invitation cancelled",description:"The invitation has been cancelled successfully"})},onError:N=>{s({title:"Error",description:N.message||"Failed to cancel invitation",variant:"destructive"})}}),h=N=>{window.confirm(`Are you sure you want to cancel the invitation to ${N.email}?`)&&d.mutate(N.id)},g=()=>{c()},m=i.filter(N=>{var _,S,C,I;const E=t.toLowerCase();return((_=N.name)==null?void 0:_.toLowerCase().includes(E))||((S=N.email)==null?void 0:S.toLowerCase().includes(E))||((C=N.role)==null?void 0:C.toLowerCase().includes(E))||((I=N.status)==null?void 0:I.toLowerCase().includes(E))}),p=N=>{switch(N){case"pending":return"bg-blue-100 text-blue-800";case"accepted":return"bg-green-100 text-green-800";case"expired":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},v=N=>{switch(N){case"system_admin":return"bg-red-100 text-red-800";case"org_admin":return"bg-orange-100 text-orange-800";case"admin":return"bg-purple-100 text-purple-800";case"technician":return"bg-blue-100 text-blue-800";case"client":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},j=N=>{try{return ft(new Date(N),"MMM d, yyyy h:mm a")}catch{return"Invalid date"}};return n.jsxs(Ae,{children:[n.jsx(Be,{children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx(Ve,{children:"User Invitations"}),n.jsx(ct,{className:"mt-1",children:"Manage pending invitations and invite new users to join"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(H,{variant:"outline",size:"sm",onClick:()=>c(),className:"whitespace-nowrap",children:[n.jsx(XG,{className:"mr-2 h-4 w-4"}),"Refresh"]}),n.jsx(dT,{onSuccess:g})]})]})}),n.jsxs(Ee,{children:[n.jsxs("div",{className:"mb-4 relative",children:[n.jsx(Bi,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),n.jsx(ve,{className:"pl-9",placeholder:"Search invitations by name, email, or role...",value:t,onChange:N=>e(N.target.value)})]}),a?n.jsx("div",{className:"flex justify-center p-8",children:n.jsx("div",{className:"animate-pulse",children:"Loading invitations..."})}):o?n.jsx("div",{className:"bg-red-50 text-red-800 p-4 rounded-md",children:"Error loading invitations. Please try again."}):m.length===0?n.jsxs("div",{className:"p-8 flex flex-col items-center justify-center text-center border rounded-md",children:[n.jsx(Qs,{className:"h-12 w-12 text-gray-400 mb-4"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"No invitations found"}),n.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't sent any invitations yet or they don't match your search."}),n.jsx(dT,{onSuccess:g})]}):n.jsx("div",{className:"rounded-md border",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b bg-muted/50",children:[n.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Recipient"}),n.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Role"}),n.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Status"}),n.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Sent"}),n.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Expires"}),n.jsx("th",{className:"h-12 px-4 text-right align-middle font-medium",children:"Actions"})]})}),n.jsx("tbody",{children:m.map(N=>n.jsxs("tr",{className:"border-b hover:bg-muted/50 transition-colors",children:[n.jsx("td",{className:"p-4 align-middle",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("div",{className:"font-medium",children:N.name}),n.jsx("div",{className:"text-xs text-gray-500",children:N.email})]})}),n.jsx("td",{className:"p-4 align-middle",children:n.jsx(Ze,{className:v(N.role),children:N.role.charAt(0).toUpperCase()+N.role.slice(1)})}),n.jsx("td",{className:"p-4 align-middle",children:n.jsxs("div",{className:"flex items-center",children:[N.status==="pending"?n.jsx(Ur,{className:"h-4 w-4 mr-2 text-blue-500"}):N.status==="accepted"?n.jsx(mu,{className:"h-4 w-4 mr-2 text-green-500"}):n.jsx(Np,{className:"h-4 w-4 mr-2 text-gray-500"}),n.jsx(Ze,{className:p(N.status),children:N.status.charAt(0).toUpperCase()+N.status.slice(1)})]})}),n.jsx("td",{className:"p-4 align-middle text-sm text-gray-600",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(tn,{className:"h-4 w-4 mr-2 text-gray-400"}),j(N.createdAt)]})}),n.jsx("td",{className:"p-4 align-middle text-sm text-gray-600",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(tn,{className:"h-4 w-4 mr-2 text-gray-400"}),j(N.expiresAt)]})}),n.jsx("td",{className:"p-4 align-middle text-right",children:n.jsx("div",{className:"flex justify-end space-x-1",children:N.status==="pending"&&n.jsxs(H,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>h(N),disabled:d.isPending,children:[n.jsx(Np,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Cancel"})]})})})]},N.id))})]})})})]})]})}const Mge=q.object({name:q.string().min(2,"Name must be at least 2 characters").max(50),email:q.string().email("Please enter a valid email address"),phone:q.string().optional(),address:q.string().optional()}),Dge=q.object({currentPassword:q.string().min(1,"Current password is required"),newPassword:q.string().min(8,"Password must be at least 8 characters"),confirmPassword:q.string().min(8,"Password must be at least 8 characters")}).refine(t=>t.newPassword===t.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});function kge(){var p;const{user:t,setUser:e}=Kr(),{toast:s}=Lt(),r=jn(),[i,a]=y.useState(!1),o=mn({resolver:pn(Mge),defaultValues:{name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",phone:(t==null?void 0:t.phone)||"",address:(t==null?void 0:t.address)||""}}),c=mn({resolver:pn(Dge),defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}}),d=Pt({mutationFn:async v=>{if(!(t!=null&&t.id))throw new Error("User not found");return await pt(`/api/users/${t.id}`,"PATCH")},onSuccess:v=>{e({...t,...v}),r.invalidateQueries({queryKey:["/api/users",t==null?void 0:t.id]}),s({title:"Profile updated",description:"Your profile has been updated successfully."})},onError:v=>{s({title:"Error",description:v.message||"Failed to update profile",variant:"destructive"})}}),h=Pt({mutationFn:async v=>{if(!(t!=null&&t.id))throw new Error("User not found");return await pt(`/api/users/${t.id}/password`,"PATCH",{currentPassword:v.currentPassword,newPassword:v.newPassword})},onSuccess:()=>{a(!1),c.reset(),s({title:"Password updated",description:"Your password has been updated successfully."})},onError:v=>{s({title:"Error",description:v.message||"Failed to update password. Check if your current password is correct.",variant:"destructive"})}}),g=v=>{d.mutate(v)},m=v=>{h.mutate(v)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsxs(Ve,{className:"text-xl flex items-center",children:[n.jsx(xi,{className:"mr-2 h-5 w-5"}),"My Profile"]}),n.jsx(ct,{children:"Manage your personal information and credentials"})]}),n.jsx(Ee,{children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[n.jsxs("div",{className:"flex flex-col items-center md:w-1/4 space-y-4",children:[n.jsx(BS,{className:"h-24 w-24",children:n.jsx(zS,{className:"text-xl bg-primary/10 font-semibold",children:((p=t==null?void 0:t.name)==null?void 0:p.substring(0,2).toUpperCase())||"U"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"font-medium",children:t==null?void 0:t.name}),n.jsx("p",{className:"text-sm text-gray-500",children:t==null?void 0:t.role})]}),n.jsx("div",{className:"flex gap-2 w-full",children:n.jsx(H,{variant:"outline",className:"w-full",children:"Change Photo"})})]}),n.jsx("div",{className:"md:w-3/4",children:n.jsx(fn,{...o,children:n.jsxs("form",{onSubmit:o.handleSubmit(g),className:"space-y-4",children:[n.jsx(J,{control:o.control,name:"name",render:({field:v})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Full Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"John Doe",...v})}),n.jsx(ne,{})]})}),n.jsx(J,{control:o.control,name:"email",render:({field:v})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Email"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"john.doe@example.com",type:"email",...v})}),n.jsx(ne,{})]})}),n.jsx(J,{control:o.control,name:"phone",render:({field:v})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Phone Number"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"(555) 123-4567",...v})}),n.jsx(ne,{})]})}),n.jsx(J,{control:o.control,name:"address",render:({field:v})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Address"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"123 Main St, City, State, ZIP",...v})}),n.jsx(ne,{})]})}),n.jsx("div",{className:"pt-4 flex justify-end",children:n.jsx(H,{type:"submit",disabled:d.isPending||!o.formState.isDirty,children:d.isPending?"Saving...":"Save Changes"})})]})})})]})})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsxs(Ve,{className:"text-xl flex items-center",children:[n.jsx(qG,{className:"mr-2 h-5 w-5"}),"Security"]}),n.jsx(ct,{children:"Manage your password and security settings"})]}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium",children:"Password"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Update your password to keep your account secure"})]}),n.jsxs(An,{open:i,onOpenChange:a,children:[n.jsx(ll,{asChild:!0,children:n.jsxs(H,{variant:"outline",children:[n.jsx(fL,{className:"mr-2 h-4 w-4"}),"Change Password"]})}),n.jsxs(wn,{className:"sm:max-w-[425px]",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:"Change Password"}),n.jsx(ws,{children:"Enter your current password and a new password to update your credentials."})]}),n.jsx(fn,{...c,children:n.jsxs("form",{onSubmit:c.handleSubmit(m),className:"space-y-4",children:[n.jsx(J,{control:c.control,name:"currentPassword",render:({field:v})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Current Password"}),n.jsx(Q,{children:n.jsx(ve,{type:"password",placeholder:"",...v})}),n.jsx(ne,{})]})}),n.jsx(J,{control:c.control,name:"newPassword",render:({field:v})=>n.jsxs(Z,{children:[n.jsx(X,{children:"New Password"}),n.jsx(Q,{children:n.jsx(ve,{type:"password",placeholder:"",...v})}),n.jsx(ot,{children:"Password must be at least 8 characters long"}),n.jsx(ne,{})]})}),n.jsx(J,{control:c.control,name:"confirmPassword",render:({field:v})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Confirm New Password"}),n.jsx(Q,{children:n.jsx(ve,{type:"password",placeholder:"",...v})}),n.jsx(ne,{})]})}),n.jsxs(hs,{children:[n.jsxs(H,{type:"button",variant:"outline",onClick:()=>a(!1),children:[n.jsx(ys,{className:"mr-2 h-4 w-4"}),"Cancel"]}),n.jsx(H,{type:"submit",disabled:h.isPending,children:h.isPending?"Updating...":"Update Password"})]})]})})]})]})]}),n.jsx(pr,{}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium",children:"Login Sessions"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Manage your active sessions and devices"})]}),n.jsx(H,{variant:"outline",children:"View Sessions"})]})]})})]})]})}const Pge=q.object({emailNotifications:q.boolean().default(!0),smsNotifications:q.boolean().default(!1),appNotifications:q.boolean().default(!0),clientReminders:q.object({enabled:q.boolean().default(!0),daysInAdvance:q.coerce.number().min(1).max(14).default(3),method:q.enum(["email","sms","both"]).default("email")}),maintenanceAlerts:q.object({enabled:q.boolean().default(!0),frequency:q.enum(["daily","real-time"]).default("real-time")}),serviceReports:q.object({sendToClient:q.boolean().default(!0),ccOwner:q.boolean().default(!0)}),teamUpdates:q.boolean().default(!0),systemAlerts:q.boolean().default(!0)});function Rge(){const[t,e]=y.useState(!1),{toast:s}=Lt(),r=mn({resolver:pn(Pge),defaultValues:{emailNotifications:!0,smsNotifications:!1,appNotifications:!0,clientReminders:{enabled:!0,daysInAdvance:3,method:"email"},maintenanceAlerts:{enabled:!0,frequency:"real-time"},serviceReports:{sendToClient:!0,ccOwner:!0},teamUpdates:!0,systemAlerts:!0}}),i=Pt({mutationFn:async o=>(e(!0),await new Promise(c=>setTimeout(c,1e3)),o),onSuccess:()=>{e(!1),s({title:"Settings updated",description:"Your notification settings have been saved"})},onError:()=>{e(!1),s({title:"Error",description:"Failed to update notification settings",variant:"destructive"})}});function a(o){i.mutate(o)}return n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Notification Settings"}),n.jsx(ct,{children:"Configure how and when you receive notifications from the system."})]}),n.jsx(Ee,{children:n.jsx(fn,{...r,children:n.jsxs("form",{onSubmit:r.handleSubmit(a),className:"space-y-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Notification Channels"}),n.jsxs("div",{className:"grid gap-6 sm:grid-cols-3",children:[n.jsx(Ae,{className:"p-4 border border-muted",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:n.jsx(Qs,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{className:"flex-1 space-y-1",children:[n.jsx("p",{className:"font-medium",children:"Email"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),n.jsx(J,{control:r.control,name:"emailNotifications",render:({field:o})=>n.jsx(Z,{children:n.jsx(Q,{children:n.jsx(is,{checked:o.value,onCheckedChange:o.onChange})})})})]})}),n.jsx(Ae,{className:"p-4 border border-muted",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:n.jsx(ja,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{className:"flex-1 space-y-1",children:[n.jsx("p",{className:"font-medium",children:"SMS"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via text message"})]}),n.jsx(J,{control:r.control,name:"smsNotifications",render:({field:o})=>n.jsx(Z,{children:n.jsx(Q,{children:n.jsx(is,{checked:o.value,onCheckedChange:o.onChange})})})})]})}),n.jsx(Ae,{className:"p-4 border border-muted",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:n.jsx(HC,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{className:"flex-1 space-y-1",children:[n.jsx("p",{className:"font-medium",children:"In-App"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications in the application"})]}),n.jsx(J,{control:r.control,name:"appNotifications",render:({field:o})=>n.jsx(Z,{children:n.jsx(Q,{children:n.jsx(is,{checked:o.value,onCheckedChange:o.onChange})})})})]})})]})]}),n.jsx(pr,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Client Reminders"}),n.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[n.jsx(J,{control:r.control,name:"clientReminders.enabled",render:({field:o})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(X,{className:"text-base",children:"Appointment Reminders"}),n.jsx(ot,{children:"Send reminders to clients about upcoming appointments"})]}),n.jsx(Q,{children:n.jsx(is,{checked:o.value,onCheckedChange:o.onChange})})]})}),r.watch("clientReminders.enabled")&&n.jsxs(n.Fragment,{children:[n.jsx(J,{control:r.control,name:"clientReminders.daysInAdvance",render:({field:o})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Days in Advance"}),n.jsx(Q,{children:n.jsx(ve,{type:"number",min:1,max:14,...o})}),n.jsx(ot,{children:"How many days before the appointment to send the reminder"}),n.jsx(ne,{})]})}),n.jsx(J,{control:r.control,name:"clientReminders.method",render:({field:o})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Notification Method"}),n.jsxs(gt,{onValueChange:o.onChange,defaultValue:o.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select method"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"email",children:"Email Only"}),n.jsx(ue,{value:"sms",children:"SMS Only"}),n.jsx(ue,{value:"both",children:"Both Email & SMS"})]})]}),n.jsx(ot,{children:"How to send appointment reminders"}),n.jsx(ne,{})]})})]})]})]}),n.jsx(pr,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Maintenance Alerts"}),n.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[n.jsx(J,{control:r.control,name:"maintenanceAlerts.enabled",render:({field:o})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(X,{className:"text-base",children:"Maintenance Updates"}),n.jsx(ot,{children:"Receive alerts about maintenance schedule and status changes"})]}),n.jsx(Q,{children:n.jsx(is,{checked:o.value,onCheckedChange:o.onChange})})]})}),r.watch("maintenanceAlerts.enabled")&&n.jsx(J,{control:r.control,name:"maintenanceAlerts.frequency",render:({field:o})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Alert Frequency"}),n.jsxs(gt,{onValueChange:o.onChange,defaultValue:o.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select frequency"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"real-time",children:"Real-time"}),n.jsx(ue,{value:"daily",children:"Daily Digest"})]})]}),n.jsx(ot,{children:"How often you want to receive maintenance alerts"}),n.jsx(ne,{})]})})]})]}),n.jsx(pr,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Service Reports"}),n.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[n.jsx(J,{control:r.control,name:"serviceReports.sendToClient",render:({field:o})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(X,{className:"text-base",children:"Send to Client"}),n.jsx(ot,{children:"Automatically send service reports to clients"})]}),n.jsx(Q,{children:n.jsx(is,{checked:o.value,onCheckedChange:o.onChange})})]})}),n.jsx(J,{control:r.control,name:"serviceReports.ccOwner",render:({field:o})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(X,{className:"text-base",children:"CC Business Owner"}),n.jsx(ot,{children:"Include business owner in service report emails"})]}),n.jsx(Q,{children:n.jsx(is,{checked:o.value,onCheckedChange:o.onChange})})]})})]})]}),n.jsx(pr,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Other Notifications"}),n.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[n.jsx(J,{control:r.control,name:"teamUpdates",render:({field:o})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(X,{className:"text-base",children:"Team Updates"}),n.jsx(ot,{children:"Receive notifications about team activities and updates"})]}),n.jsx(Q,{children:n.jsx(is,{checked:o.value,onCheckedChange:o.onChange})})]})}),n.jsx(J,{control:r.control,name:"systemAlerts",render:({field:o})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(X,{className:"text-base",children:"System Alerts"}),n.jsx(ot,{children:"Receive important system alerts and notifications"})]}),n.jsx(Q,{children:n.jsx(is,{checked:o.value,onCheckedChange:o.onChange})})]})})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(H,{type:"submit",disabled:t,children:t?"Saving...":"Save Settings"})})]})})})]})}const es=q.object({view:q.boolean(),create:q.boolean(),edit:q.boolean(),delete:q.boolean()}),Lge=q.object({admin:q.object({clients:es,technicians:es,projects:es,maintenance:es,repairs:es,invoices:es,reports:es,settings:es}),manager:q.object({clients:es,technicians:es,projects:es,maintenance:es,repairs:es,invoices:es,reports:es,settings:es}),technician:q.object({clients:es,technicians:es,projects:es,maintenance:es,repairs:es,invoices:es,reports:es,settings:es}),client:q.object({clients:es,technicians:es,projects:es,maintenance:es,repairs:es,invoices:es,reports:es,settings:es})}),Oge={clients:n.jsx(xi,{className:"h-5 w-5"}),technicians:n.jsx(qC,{className:"h-5 w-5"}),projects:n.jsx(tu,{className:"h-5 w-5"}),maintenance:n.jsx(tn,{className:"h-5 w-5"}),repairs:n.jsx(so,{className:"h-5 w-5"}),invoices:n.jsx(hL,{className:"h-5 w-5"}),reports:n.jsx(zG,{className:"h-5 w-5"}),settings:n.jsx(Hs,{className:"h-5 w-5"})};function Fge(){const[t,e]=y.useState("admin"),[s,r]=y.useState(!1),{toast:i}=Lt(),a=p=>{const v={view:!0,create:!0,edit:!0,delete:!0},j={view:!1,create:!1,edit:!1,delete:!1},N={view:!0,create:!1,edit:!1,delete:!1},E={view:!0,create:!1,edit:!1,delete:!1};return{admin:{clients:v,technicians:v,projects:v,maintenance:v,repairs:v,invoices:v,reports:v,settings:v},manager:{clients:v,technicians:v,projects:v,maintenance:v,repairs:v,invoices:v,reports:v,settings:{...v,delete:!1}},technician:{clients:{...N,view:!0},technicians:{...j,view:!0},projects:{...N,edit:!0},maintenance:{...N,create:!0,edit:!0},repairs:{...N,create:!0,edit:!0},invoices:{...j,view:!0},reports:{...N,create:!0,edit:!0},settings:j},client:{clients:{...E,edit:!0},technicians:{...j,view:!0},projects:{...j,view:!0},maintenance:{...j,view:!0},repairs:{...j,view:!0,create:!0},invoices:{...j,view:!0},reports:{...j,view:!0},settings:j}}},o=mn({resolver:pn(Lge),defaultValues:a()}),c=Pt({mutationFn:async p=>(r(!0),await new Promise(v=>setTimeout(v,1e3)),p),onSuccess:()=>{r(!1),i({title:"Permissions updated",description:"Role permissions have been successfully updated"})},onError:()=>{r(!1),i({title:"Error",description:"Failed to update role permissions",variant:"destructive"})}});function d(p){c.mutate(p)}const h={admin:n.jsx(yi,{className:"h-4 w-4"}),manager:n.jsx(qC,{className:"h-4 w-4"}),technician:n.jsx(so,{className:"h-4 w-4"}),client:n.jsx(xi,{className:"h-4 w-4"})},g={admin:"Administrator",manager:"Manager",technician:"Technician",client:"Client"},m={clients:"Client Management",technicians:"Technician Management",projects:"Projects",maintenance:"Maintenance",repairs:"Repairs",invoices:"Invoices & Billing",reports:"Reports",settings:"System Settings"};return n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Role Permissions"}),n.jsx(ct,{children:"Define access levels for each role in the system. Configure what users can view, create, edit, and delete."})]}),n.jsx(Ee,{children:n.jsx(fn,{...o,children:n.jsxs("form",{onSubmit:o.handleSubmit(d),children:[n.jsxs(ps,{defaultValue:"admin",value:t,onValueChange:e,className:"space-y-4",children:[n.jsxs(gs,{className:"grid grid-cols-4 mb-6",children:[n.jsxs(Ge,{value:"admin",className:"flex items-center gap-2",children:[h.admin,g.admin]}),n.jsxs(Ge,{value:"manager",className:"flex items-center gap-2",children:[h.manager,g.manager]}),n.jsxs(Ge,{value:"technician",className:"flex items-center gap-2",children:[h.technician,g.technician]}),n.jsxs(Ge,{value:"client",className:"flex items-center gap-2",children:[h.client,g.client]})]}),["admin","manager","technician","client"].map(p=>n.jsx(Qe,{value:p,className:"space-y-6",children:n.jsx("div",{className:"rounded-lg border",children:n.jsx("div",{className:"grid divide-y",children:Object.keys(m).map(v=>n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:Oge[v]}),n.jsx("h3",{className:"text-lg font-medium",children:m[v]})]}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[n.jsx(J,{control:o.control,name:`${p}.${v}.view`,render:({field:j})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between space-x-2 rounded-md border p-3",children:[n.jsx("div",{className:"space-y-0.5",children:n.jsx(X,{className:"text-sm",children:"View"})}),n.jsx(Q,{children:n.jsx(is,{checked:j.value,onCheckedChange:j.onChange})})]})}),n.jsx(J,{control:o.control,name:`${p}.${v}.create`,render:({field:j})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between space-x-2 rounded-md border p-3",children:[n.jsx("div",{className:"space-y-0.5",children:n.jsx(X,{className:"text-sm",children:"Create"})}),n.jsx(Q,{children:n.jsx(is,{checked:j.value,onCheckedChange:j.onChange})})]})}),n.jsx(J,{control:o.control,name:`${p}.${v}.edit`,render:({field:j})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between space-x-2 rounded-md border p-3",children:[n.jsx("div",{className:"space-y-0.5",children:n.jsx(X,{className:"text-sm",children:"Edit"})}),n.jsx(Q,{children:n.jsx(is,{checked:j.value,onCheckedChange:j.onChange})})]})}),n.jsx(J,{control:o.control,name:`${p}.${v}.delete`,render:({field:j})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between space-x-2 rounded-md border p-3",children:[n.jsx("div",{className:"space-y-0.5",children:n.jsx(X,{className:"text-sm",children:"Delete"})}),n.jsx(Q,{children:n.jsx(is,{checked:j.value,onCheckedChange:j.onChange})})]})})]})]},v))})})},p))]}),n.jsx("div",{className:"flex justify-end mt-6",children:n.jsx(H,{type:"submit",disabled:s,children:s?"Saving...":"Save Permissions"})})]})})})]})}var hV=["PageUp","PageDown"],mV=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],fV={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},km="Slider",[AN,Bge,zge]=fg(km),[pV,Bye]=Or(km,[zge]),[Vge,Jy]=pV(km),gV=y.forwardRef((t,e)=>{const{name:s,min:r=0,max:i=100,step:a=1,orientation:o="horizontal",disabled:c=!1,minStepsBetweenThumbs:d=0,defaultValue:h=[r],value:g,onValueChange:m=()=>{},onValueCommit:p=()=>{},inverted:v=!1,form:j,...N}=t,E=y.useRef(new Set),_=y.useRef(0),C=o==="horizontal"?$ge:Uge,[I=[],P]=ta({prop:g,defaultProp:h,onChange:V=>{var Y;(Y=[...E.current][_.current])==null||Y.focus(),m(V)}}),L=y.useRef(I);function T(V){const B=Yge(I,V);O(V,B)}function M(V){O(V,_.current)}function k(){const V=L.current[_.current];I[_.current]!==V&&p(I)}function O(V,B,{commit:Y}={commit:!1}){const z=Xge(a),G=Jge(Math.round((V-r)/a)*a+r,z),he=Qp(G,[r,i]);P((le=[])=>{const se=qge(le,he,B);if(Qge(se,d*a)){_.current=se.indexOf(he);const re=String(se)!==String(le);return re&&Y&&p(se),re?se:le}else return le})}return n.jsx(Vge,{scope:t.__scopeSlider,name:s,disabled:c,min:r,max:i,valueIndexToChangeRef:_,thumbs:E.current,values:I,orientation:o,form:j,children:n.jsx(AN.Provider,{scope:t.__scopeSlider,children:n.jsx(AN.Slot,{scope:t.__scopeSlider,children:n.jsx(C,{"aria-disabled":c,"data-disabled":c?"":void 0,...N,ref:e,onPointerDown:it(N.onPointerDown,()=>{c||(L.current=I)}),min:r,max:i,inverted:v,onSlideStart:c?void 0:T,onSlideMove:c?void 0:M,onSlideEnd:c?void 0:k,onHomeKeyDown:()=>!c&&O(r,0,{commit:!0}),onEndKeyDown:()=>!c&&O(i,I.length-1,{commit:!0}),onStepKeyDown:({event:V,direction:B})=>{if(!c){const G=hV.includes(V.key)||V.shiftKey&&mV.includes(V.key)?10:1,he=_.current,le=I[he],se=a*G*B;O(le+se,he,{commit:!0})}}})})})})});gV.displayName=km;var[xV,vV]=pV(km,{startEdge:"left",endEdge:"right",size:"width",direction:1}),$ge=y.forwardRef((t,e)=>{const{min:s,max:r,dir:i,inverted:a,onSlideStart:o,onSlideMove:c,onSlideEnd:d,onStepKeyDown:h,...g}=t,[m,p]=y.useState(null),v=Jt(e,C=>p(C)),j=y.useRef(),N=od(i),E=N==="ltr",_=E&&!a||!E&&a;function S(C){const I=j.current||m.getBoundingClientRect(),P=[0,I.width],T=VS(P,_?[s,r]:[r,s]);return j.current=I,T(C-I.left)}return n.jsx(xV,{scope:t.__scopeSlider,startEdge:_?"left":"right",endEdge:_?"right":"left",direction:_?1:-1,size:"width",children:n.jsx(yV,{dir:N,"data-orientation":"horizontal",...g,ref:v,style:{...g.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:C=>{const I=S(C.clientX);o==null||o(I)},onSlideMove:C=>{const I=S(C.clientX);c==null||c(I)},onSlideEnd:()=>{j.current=void 0,d==null||d()},onStepKeyDown:C=>{const P=fV[_?"from-left":"from-right"].includes(C.key);h==null||h({event:C,direction:P?-1:1})}})})}),Uge=y.forwardRef((t,e)=>{const{min:s,max:r,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:c,onStepKeyDown:d,...h}=t,g=y.useRef(null),m=Jt(e,g),p=y.useRef(),v=!i;function j(N){const E=p.current||g.current.getBoundingClientRect(),_=[0,E.height],C=VS(_,v?[r,s]:[s,r]);return p.current=E,C(N-E.top)}return n.jsx(xV,{scope:t.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:n.jsx(yV,{"data-orientation":"vertical",...h,ref:m,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:N=>{const E=j(N.clientY);a==null||a(E)},onSlideMove:N=>{const E=j(N.clientY);o==null||o(E)},onSlideEnd:()=>{p.current=void 0,c==null||c()},onStepKeyDown:N=>{const _=fV[v?"from-bottom":"from-top"].includes(N.key);d==null||d({event:N,direction:_?-1:1})}})})}),yV=y.forwardRef((t,e)=>{const{__scopeSlider:s,onSlideStart:r,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:c,onStepKeyDown:d,...h}=t,g=Jy(km,s);return n.jsx(St.span,{...h,ref:e,onKeyDown:it(t.onKeyDown,m=>{m.key==="Home"?(o(m),m.preventDefault()):m.key==="End"?(c(m),m.preventDefault()):hV.concat(mV).includes(m.key)&&(d(m),m.preventDefault())}),onPointerDown:it(t.onPointerDown,m=>{const p=m.target;p.setPointerCapture(m.pointerId),m.preventDefault(),g.thumbs.has(p)?p.focus():r(m)}),onPointerMove:it(t.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&i(m)}),onPointerUp:it(t.onPointerUp,m=>{const p=m.target;p.hasPointerCapture(m.pointerId)&&(p.releasePointerCapture(m.pointerId),a(m))})})}),wV="SliderTrack",jV=y.forwardRef((t,e)=>{const{__scopeSlider:s,...r}=t,i=Jy(wV,s);return n.jsx(St.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});jV.displayName=wV;var EN="SliderRange",bV=y.forwardRef((t,e)=>{const{__scopeSlider:s,...r}=t,i=Jy(EN,s),a=vV(EN,s),o=y.useRef(null),c=Jt(e,o),d=i.values.length,h=i.values.map(p=>CV(p,i.min,i.max)),g=d>1?Math.min(...h):0,m=100-Math.max(...h);return n.jsx(St.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:c,style:{...t.style,[a.startEdge]:g+"%",[a.endEdge]:m+"%"}})});bV.displayName=EN;var _N="SliderThumb",NV=y.forwardRef((t,e)=>{const s=Bge(t.__scopeSlider),[r,i]=y.useState(null),a=Jt(e,c=>i(c)),o=y.useMemo(()=>r?s().findIndex(c=>c.ref.current===r):-1,[s,r]);return n.jsx(Wge,{...t,ref:a,index:o})}),Wge=y.forwardRef((t,e)=>{const{__scopeSlider:s,index:r,name:i,...a}=t,o=Jy(_N,s),c=vV(_N,s),[d,h]=y.useState(null),g=Jt(e,S=>h(S)),m=d?o.form||!!d.closest("form"):!0,p=Sm(d),v=o.values[r],j=v===void 0?0:CV(v,o.min,o.max),N=Gge(r,o.values.length),E=p==null?void 0:p[c.size],_=E?Kge(E,j,c.direction):0;return y.useEffect(()=>{if(d)return o.thumbs.add(d),()=>{o.thumbs.delete(d)}},[d,o.thumbs]),n.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${j}% + ${_}px)`},children:[n.jsx(AN.ItemSlot,{scope:t.__scopeSlider,children:n.jsx(St.span,{role:"slider","aria-label":t["aria-label"]||N,"aria-valuemin":o.min,"aria-valuenow":v,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:g,style:v===void 0?{display:"none"}:t.style,onFocus:it(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),m&&n.jsx(Hge,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:v},r)]})});NV.displayName=_N;var Hge=t=>{const{value:e,...s}=t,r=y.useRef(null),i=Ig(e);return y.useEffect(()=>{const a=r.current,o=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==e&&d){const h=new Event("input",{bubbles:!0});d.call(a,e),a.dispatchEvent(h)}},[i,e]),n.jsx("input",{style:{display:"none"},...s,ref:r,defaultValue:e})};function qge(t=[],e,s){const r=[...t];return r[s]=e,r.sort((i,a)=>i-a)}function CV(t,e,s){const a=100/(s-e)*(t-e);return Qp(a,[0,100])}function Gge(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Yge(t,e){if(t.length===1)return 0;const s=t.map(i=>Math.abs(i-e)),r=Math.min(...s);return s.indexOf(r)}function Kge(t,e,s){const r=t/2,a=VS([0,50],[0,r]);return(r-a(e)*s)*s}function Zge(t){return t.slice(0,-1).map((e,s)=>t[s+1]-e)}function Qge(t,e){if(e>0){const s=Zge(t);return Math.min(...s)>=e}return!0}function VS(t,e){return s=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(s-t[0])}}function Xge(t){return(String(t).split(".")[1]||"").length}function Jge(t,e){const s=Math.pow(10,e);return Math.round(t*s)/s}var SV=gV,exe=jV,txe=bV,nxe=NV;const AV=y.forwardRef(({className:t,...e},s)=>n.jsxs(SV,{ref:s,className:we("relative flex w-full touch-none select-none items-center",t),...e,children:[n.jsx(exe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:n.jsx(txe,{className:"absolute h-full bg-primary"})}),n.jsx(nxe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));AV.displayName=SV.displayName;var $S="Radio",[sxe,EV]=Or($S),[rxe,ixe]=sxe($S),_V=y.forwardRef((t,e)=>{const{__scopeRadio:s,name:r,checked:i=!1,required:a,disabled:o,value:c="on",onCheck:d,form:h,...g}=t,[m,p]=y.useState(null),v=Jt(e,E=>p(E)),j=y.useRef(!1),N=m?h||!!m.closest("form"):!0;return n.jsxs(rxe,{scope:s,checked:i,disabled:o,children:[n.jsx(St.button,{type:"button",role:"radio","aria-checked":i,"data-state":MV(i),"data-disabled":o?"":void 0,disabled:o,value:c,...g,ref:v,onClick:it(t.onClick,E=>{i||d==null||d(),N&&(j.current=E.isPropagationStopped(),j.current||E.stopPropagation())})}),N&&n.jsx(axe,{control:m,bubbles:!j.current,name:r,value:c,checked:i,required:a,disabled:o,form:h,style:{transform:"translateX(-100%)"}})]})});_V.displayName=$S;var IV="RadioIndicator",TV=y.forwardRef((t,e)=>{const{__scopeRadio:s,forceMount:r,...i}=t,a=ixe(IV,s);return n.jsx(ci,{present:r||a.checked,children:n.jsx(St.span,{"data-state":MV(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:e})})});TV.displayName=IV;var axe=t=>{const{control:e,checked:s,bubbles:r=!0,...i}=t,a=y.useRef(null),o=Ig(s),c=Sm(e);return y.useEffect(()=>{const d=a.current,h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(o!==s&&m){const p=new Event("click",{bubbles:r});m.call(d,s),d.dispatchEvent(p)}},[o,s,r]),n.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:a,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function MV(t){return t?"checked":"unchecked"}var oxe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],US="RadioGroup",[lxe,zye]=Or(US,[Cy,EV]),DV=Cy(),kV=EV(),[cxe,dxe]=lxe(US),PV=y.forwardRef((t,e)=>{const{__scopeRadioGroup:s,name:r,defaultValue:i,value:a,required:o=!1,disabled:c=!1,orientation:d,dir:h,loop:g=!0,onValueChange:m,...p}=t,v=DV(s),j=od(h),[N,E]=ta({prop:a,defaultProp:i,onChange:m});return n.jsx(cxe,{scope:s,name:r,required:o,disabled:c,value:N,onValueChange:E,children:n.jsx(pO,{asChild:!0,...v,orientation:d,dir:j,loop:g,children:n.jsx(St.div,{role:"radiogroup","aria-required":o,"aria-orientation":d,"data-disabled":c?"":void 0,dir:j,...p,ref:e})})})});PV.displayName=US;var RV="RadioGroupItem",LV=y.forwardRef((t,e)=>{const{__scopeRadioGroup:s,disabled:r,...i}=t,a=dxe(RV,s),o=a.disabled||r,c=DV(s),d=kV(s),h=y.useRef(null),g=Jt(e,h),m=a.value===i.value,p=y.useRef(!1);return y.useEffect(()=>{const v=N=>{oxe.includes(N.key)&&(p.current=!0)},j=()=>p.current=!1;return document.addEventListener("keydown",v),document.addEventListener("keyup",j),()=>{document.removeEventListener("keydown",v),document.removeEventListener("keyup",j)}},[]),n.jsx(gO,{asChild:!0,...c,focusable:!o,active:m,children:n.jsx(_V,{disabled:o,required:a.required,checked:m,...d,...i,name:a.name,ref:g,onCheck:()=>a.onValueChange(i.value),onKeyDown:it(v=>{v.key==="Enter"&&v.preventDefault()}),onFocus:it(i.onFocus,()=>{var v;p.current&&((v=h.current)==null||v.click())})})})});LV.displayName=RV;var uxe="RadioGroupIndicator",OV=y.forwardRef((t,e)=>{const{__scopeRadioGroup:s,...r}=t,i=kV(s);return n.jsx(TV,{...i,...r,ref:e})});OV.displayName=uxe;var FV=PV,BV=LV,hxe=OV;const WS=y.forwardRef(({className:t,...e},s)=>n.jsx(FV,{className:we("grid gap-2",t),...e,ref:s}));WS.displayName=FV.displayName;const Ih=y.forwardRef(({className:t,...e},s)=>n.jsx(BV,{ref:s,className:we("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:n.jsx(hxe,{className:"flex items-center justify-center",children:n.jsx(cL,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Ih.displayName=BV.displayName;const mxe=q.object({theme:q.enum(["light","dark","system"]).default("system"),accentColor:q.string().min(4).default("#0284c7"),colorVariant:q.enum(["professional","tint","vibrant"]).default("tint"),borderRadius:q.number().min(0).max(20).default(8),compactMode:q.boolean().default(!1),sidebarCollapsed:q.boolean().default(!1),customLogo:q.boolean().default(!1),logoUrl:q.string().optional(),brandName:q.string().min(1).default("Pool Service Pro"),customFontSize:q.enum(["small","medium","large"]).default("medium")});function fxe(){const[t,e]=y.useState(!1),{toast:s}=Lt(),r=mn({resolver:pn(mxe),defaultValues:{theme:"system",accentColor:"#0284c7",colorVariant:"tint",borderRadius:8,compactMode:!1,sidebarCollapsed:!1,customLogo:!1,brandName:"Pool Service Pro",customFontSize:"medium"}}),i=Pt({mutationFn:async c=>(e(!0),await new Promise(d=>setTimeout(d,1e3)),c),onSuccess:c=>{e(!1),s({title:"Settings updated",description:"Your appearance settings have been saved"})},onError:()=>{e(!1),s({title:"Error",description:"Failed to update appearance settings",variant:"destructive"})}});function a(c){i.mutate(c)}const o=({theme:c})=>{const d=()=>{switch(c){case"light":return"bg-white border-gray-200";case"dark":return"bg-gray-900 border-gray-700";case"system":return"bg-gradient-to-br from-white to-gray-900 border-gray-400";default:return"bg-white border-gray-200"}},h=()=>{switch(c){case"light":return"text-gray-900";case"dark":return"text-white";case"system":return"text-gray-600";default:return"text-gray-900"}};return n.jsx("div",{className:`h-20 rounded-md p-2 border ${d()} flex items-center justify-center`,children:n.jsxs("span",{className:`text-sm font-medium ${h()}`,children:[c.charAt(0).toUpperCase()+c.slice(1)," Theme"]})})};return n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Appearance Settings"}),n.jsx(ct,{children:"Customize the look and feel of your application. Changes will apply to all users."})]}),n.jsx(Ee,{children:n.jsx(fn,{...r,children:n.jsxs("form",{onSubmit:r.handleSubmit(a),className:"space-y-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Theme"}),n.jsx(J,{control:r.control,name:"theme",render:({field:c})=>n.jsxs(Z,{className:"space-y-4",children:[n.jsx(X,{children:"Choose a theme preference"}),n.jsx(Q,{children:n.jsxs(WS,{onValueChange:c.onChange,defaultValue:c.value,className:"grid grid-cols-3 gap-4",children:[n.jsxs(Z,{className:"flex flex-col space-y-3",children:[n.jsx(Q,{children:n.jsx(Ih,{value:"light",className:"sr-only"})}),n.jsx("div",{className:`cursor-pointer border-2 rounded-md overflow-hidden ${c.value==="light"?"border-primary":"border-transparent"}`,onClick:()=>c.onChange("light"),children:n.jsx(o,{theme:"light"})}),n.jsx(X,{className:"text-center cursor-pointer",onClick:()=>c.onChange("light"),children:n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsx(tY,{className:"h-4 w-4 mr-1"}),"Light"]})})]}),n.jsxs(Z,{className:"flex flex-col space-y-3",children:[n.jsx(Q,{children:n.jsx(Ih,{value:"dark",className:"sr-only"})}),n.jsx("div",{className:`cursor-pointer border-2 rounded-md overflow-hidden ${c.value==="dark"?"border-primary":"border-transparent"}`,onClick:()=>c.onChange("dark"),children:n.jsx(o,{theme:"dark"})}),n.jsx(X,{className:"text-center cursor-pointer",onClick:()=>c.onChange("dark"),children:n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsx(KG,{className:"h-4 w-4 mr-1"}),"Dark"]})})]}),n.jsxs(Z,{className:"flex flex-col space-y-3",children:[n.jsx(Q,{children:n.jsx(Ih,{value:"system",className:"sr-only"})}),n.jsx("div",{className:`cursor-pointer border-2 rounded-md overflow-hidden ${c.value==="system"?"border-primary":"border-transparent"}`,onClick:()=>c.onChange("system"),children:n.jsx(o,{theme:"system"})}),n.jsx(X,{className:"text-center cursor-pointer",onClick:()=>c.onChange("system"),children:n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsx(UG,{className:"h-4 w-4 mr-1"}),"System"]})})]})]})}),n.jsx(ot,{children:"Select a light or dark theme, or let the system decide based on user preferences"})]})})]}),n.jsx(pr,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Colors"}),n.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[n.jsx(J,{control:r.control,name:"accentColor",render:({field:c})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Accent Color"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"h-10 w-10 rounded-md border flex-shrink-0",style:{backgroundColor:c.value}}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"#0284c7",...c,type:"text"})})]}),n.jsx(ot,{children:"The primary brand color used throughout the application"}),n.jsx(ne,{})]})}),n.jsx(J,{control:r.control,name:"colorVariant",render:({field:c})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Color Variant"}),n.jsxs(gt,{onValueChange:c.onChange,defaultValue:c.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select variant"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"professional",children:"Professional"}),n.jsx(ue,{value:"tint",children:"Tint"}),n.jsx(ue,{value:"vibrant",children:"Vibrant"})]})]}),n.jsx(ot,{children:"How strongly the accent color is used in the UI"}),n.jsx(ne,{})]})})]})]}),n.jsx(pr,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Interface"}),n.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[n.jsx(J,{control:r.control,name:"borderRadius",render:({field:c})=>n.jsxs(Z,{children:[n.jsxs(X,{children:["Border Radius: ",c.value,"px"]}),n.jsx(Q,{children:n.jsx(AV,{min:0,max:20,step:1,defaultValue:[c.value],onValueChange:d=>c.onChange(d[0]),className:"py-4"})}),n.jsx(ot,{children:"Adjust the roundness of UI elements"}),n.jsx(ne,{})]})}),n.jsx(J,{control:r.control,name:"customFontSize",render:({field:c})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Font Size"}),n.jsxs(gt,{onValueChange:c.onChange,defaultValue:c.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select size"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"small",children:"Small"}),n.jsx(ue,{value:"medium",children:"Medium (Default)"}),n.jsx(ue,{value:"large",children:"Large"})]})]}),n.jsx(ot,{children:"Adjust text size throughout the application"}),n.jsx(ne,{})]})}),n.jsx(J,{control:r.control,name:"compactMode",render:({field:c})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(CG,{className:"h-4 w-4 mr-2"}),n.jsx(X,{className:"text-base",children:"Compact Mode"})]}),n.jsx(ot,{children:"Reduce spacing and padding in the UI"})]}),n.jsx(Q,{children:n.jsx(is,{checked:c.value,onCheckedChange:c.onChange})})]})}),n.jsx(J,{control:r.control,name:"sidebarCollapsed",render:({field:c})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(ZG,{className:"h-4 w-4 mr-2"}),n.jsx(X,{className:"text-base",children:"Default Sidebar State"})]}),n.jsx(ot,{children:"Start with sidebar collapsed for more content space"})]}),n.jsx(Q,{children:n.jsx(is,{checked:c.value,onCheckedChange:c.onChange})})]})})]})]}),n.jsx(pr,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Branding"}),n.jsx(J,{control:r.control,name:"brandName",render:({field:c})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Company Name"}),n.jsx(Q,{children:n.jsx(ve,{...c})}),n.jsx(ot,{children:"Your company name displayed in the application"}),n.jsx(ne,{})]})}),n.jsx(J,{control:r.control,name:"customLogo",render:({field:c})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ap,{className:"h-4 w-4 mr-2"}),n.jsx(X,{className:"text-base",children:"Custom Logo"})]}),n.jsx(ot,{children:"Use your own company logo instead of the default"})]}),n.jsx(Q,{children:n.jsx(is,{checked:c.value,onCheckedChange:c.onChange})})]})}),r.watch("customLogo")&&n.jsx("div",{className:"rounded-lg border p-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[n.jsx("div",{className:"h-16 w-16 flex-shrink-0 rounded-md border flex items-center justify-center bg-gray-100",children:n.jsx(Ap,{className:"h-8 w-8 text-gray-400"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium",children:"Upload your logo"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Recommended size: 512x512px. PNG or SVG format."})]}),n.jsxs(H,{variant:"outline",disabled:!0,className:"flex-shrink-0",children:[n.jsx(nm,{className:"h-4 w-4 mr-2"}),"Upload"]})]})})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs(H,{type:"button",variant:"outline",disabled:!0,children:[n.jsx(Qa,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]}),n.jsx(H,{type:"submit",disabled:t,children:t?"Saving...":"Save Settings"})]})]})})})]})}var zV="AlertDialog",[pxe,Vye]=Or(zV,[H7]),Gl=H7(),VV=t=>{const{__scopeAlertDialog:e,...s}=t,r=Gl(e);return n.jsx(iS,{...r,...s,modal:!0})};VV.displayName=zV;var gxe="AlertDialogTrigger",$V=y.forwardRef((t,e)=>{const{__scopeAlertDialog:s,...r}=t,i=Gl(s);return n.jsx(o9,{...i,...r,ref:e})});$V.displayName=gxe;var xxe="AlertDialogPortal",UV=t=>{const{__scopeAlertDialog:e,...s}=t,r=Gl(e);return n.jsx(aS,{...r,...s})};UV.displayName=xxe;var vxe="AlertDialogOverlay",WV=y.forwardRef((t,e)=>{const{__scopeAlertDialog:s,...r}=t,i=Gl(s);return n.jsx(Vy,{...i,...r,ref:e})});WV.displayName=vxe;var Th="AlertDialogContent",[yxe,wxe]=pxe(Th),HV=y.forwardRef((t,e)=>{const{__scopeAlertDialog:s,children:r,...i}=t,a=Gl(s),o=y.useRef(null),c=Jt(e,o),d=y.useRef(null);return n.jsx(Wae,{contentName:Th,titleName:qV,docsSlug:"alert-dialog",children:n.jsx(yxe,{scope:s,cancelRef:d,children:n.jsxs($y,{role:"alertdialog",...a,...i,ref:c,onOpenAutoFocus:it(i.onOpenAutoFocus,h=>{var g;h.preventDefault(),(g=d.current)==null||g.focus({preventScroll:!0})}),onPointerDownOutside:h=>h.preventDefault(),onInteractOutside:h=>h.preventDefault(),children:[n.jsx(EL,{children:r}),n.jsx(bxe,{contentRef:o})]})})})});HV.displayName=Th;var qV="AlertDialogTitle",GV=y.forwardRef((t,e)=>{const{__scopeAlertDialog:s,...r}=t,i=Gl(s);return n.jsx(oS,{...i,...r,ref:e})});GV.displayName=qV;var YV="AlertDialogDescription",KV=y.forwardRef((t,e)=>{const{__scopeAlertDialog:s,...r}=t,i=Gl(s);return n.jsx(lS,{...i,...r,ref:e})});KV.displayName=YV;var jxe="AlertDialogAction",ZV=y.forwardRef((t,e)=>{const{__scopeAlertDialog:s,...r}=t,i=Gl(s);return n.jsx(cS,{...i,...r,ref:e})});ZV.displayName=jxe;var QV="AlertDialogCancel",XV=y.forwardRef((t,e)=>{const{__scopeAlertDialog:s,...r}=t,{cancelRef:i}=wxe(QV,s),a=Gl(s),o=Jt(e,i);return n.jsx(cS,{...a,...r,ref:o})});XV.displayName=QV;var bxe=({contentRef:t})=>{const e=`\`${Th}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Th}\` by passing a \`${YV}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Th}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return y.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},Nxe=VV,Cxe=$V,Sxe=UV,JV=WV,e$=HV,t$=ZV,n$=XV,s$=GV,r$=KV;const Axe=Nxe,Exe=Cxe,_xe=Sxe,i$=y.forwardRef(({className:t,...e},s)=>n.jsx(JV,{className:we("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:s}));i$.displayName=JV.displayName;const a$=y.forwardRef(({className:t,...e},s)=>n.jsxs(_xe,{children:[n.jsx(i$,{}),n.jsx(e$,{ref:s,className:we("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));a$.displayName=e$.displayName;const o$=({className:t,...e})=>n.jsx("div",{className:we("flex flex-col space-y-2 text-center sm:text-left",t),...e});o$.displayName="AlertDialogHeader";const l$=({className:t,...e})=>n.jsx("div",{className:we("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});l$.displayName="AlertDialogFooter";const c$=y.forwardRef(({className:t,...e},s)=>n.jsx(s$,{ref:s,className:we("text-lg font-semibold",t),...e}));c$.displayName=s$.displayName;const d$=y.forwardRef(({className:t,...e},s)=>n.jsx(r$,{ref:s,className:we("text-sm text-muted-foreground",t),...e}));d$.displayName=r$.displayName;const u$=y.forwardRef(({className:t,...e},s)=>n.jsx(t$,{ref:s,className:we(Ip(),t),...e}));u$.displayName=t$.displayName;const h$=y.forwardRef(({className:t,...e},s)=>n.jsx(n$,{ref:s,className:we(Ip({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));h$.displayName=n$.displayName;const IN=["gmail","outlook","ringcentral","twilio"],uT=q.object({type:q.enum(IN),name:q.string().min(1,"Name is required"),isDefault:q.boolean().default(!1),isActive:q.boolean().default(!0),clientId:q.string().nullable().optional(),clientSecret:q.string().nullable().optional(),apiKey:q.string().nullable().optional(),accountSid:q.string().nullable().optional(),authToken:q.string().nullable().optional(),email:q.string().nullable().optional(),phoneNumber:q.string().nullable().optional(),settings:q.string().nullable().optional()});function Ixe(){const[t,e]=y.useState("gmail"),[s,r]=y.useState(!1),[i,a]=y.useState(!1),[o,c]=y.useState(null),{toast:d}=Lt(),h=jn(),{data:g=[],isLoading:m}=wt({queryKey:["/api/communication-providers"],meta:{errors:{401:"You must be logged in to view communication providers",403:"You don't have permission to view communication providers"}}}),p=Pt({mutationFn:async M=>pt("/api/communication-providers","POST"),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/communication-providers"]}),r(!1),d({title:"Provider Created",description:"The communication provider has been created successfully."})},onError:M=>{d({title:"Error",description:`Failed to create provider: ${M instanceof Error?M.message:"Unknown error"}`,variant:"destructive"})}}),v=Pt({mutationFn:async({id:M,data:k})=>pt(`/api/communication-providers/${M}`,"PATCH"),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/communication-providers"]}),a(!1),c(null),d({title:"Provider Updated",description:"The communication provider has been updated successfully."})},onError:M=>{d({title:"Error",description:`Failed to update provider: ${M instanceof Error?M.message:"Unknown error"}`,variant:"destructive"})}}),j=Pt({mutationFn:async M=>pt(`/api/communication-providers/${M}`,"DELETE"),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/communication-providers"]}),d({title:"Provider Deleted",description:"The communication provider has been deleted successfully."})},onError:M=>{d({title:"Error",description:`Failed to delete provider: ${M instanceof Error?M.message:"Unknown error"}`,variant:"destructive"})}}),N=mn({resolver:pn(uT),defaultValues:{type:t,name:"",isDefault:!1,isActive:!0,clientId:null,clientSecret:null,apiKey:null,accountSid:null,authToken:null,email:null,phoneNumber:null,settings:null}}),E=mn({resolver:pn(uT),defaultValues:{type:t,name:"",isDefault:!1,isActive:!0,clientId:null,clientSecret:null,apiKey:null,accountSid:null,authToken:null,email:null,phoneNumber:null,settings:null}}),_=g.filter(M=>M.type===t);function S(M){p.mutate(M)}function C(M){o&&v.mutate({id:o.id,data:M})}function I(M){j.mutate(M)}function P(M){c(M),E.reset({type:M.type,name:M.name,isDefault:M.isDefault,isActive:M.isActive,clientId:M.clientId,clientSecret:M.clientSecret,apiKey:M.apiKey,accountSid:M.accountSid,authToken:M.authToken,email:M.email,phoneNumber:M.phoneNumber,settings:M.settings}),a(!0)}function L(M){v.mutate({id:M.id,data:{isDefault:!0}})}function T(M){v.mutate({id:M.id,data:{isActive:!M.isActive}})}return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium",children:"Communication Providers"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage external communication services for email, SMS, and calls"})]}),n.jsxs(H,{onClick:()=>{N.reset({type:t,name:"",isDefault:_.length===0,isActive:!0,clientId:null,clientSecret:null,apiKey:null,accountSid:null,authToken:null,email:null,phoneNumber:null,settings:null}),r(!0)},className:"flex items-center gap-2",children:[n.jsx(os,{className:"h-4 w-4"}),n.jsx("span",{children:"Add Provider"})]})]}),n.jsxs(ps,{defaultValue:"gmail",value:t,onValueChange:M=>e(M),className:"w-full",children:[n.jsxs(gs,{className:"mb-4",children:[n.jsxs(Ge,{value:"gmail",className:"flex items-center gap-2",children:[n.jsx(Qs,{className:"h-4 w-4"}),n.jsx("span",{children:"Gmail"})]}),n.jsxs(Ge,{value:"outlook",className:"flex items-center gap-2",children:[n.jsx(Qs,{className:"h-4 w-4"}),n.jsx("span",{children:"Outlook"})]}),n.jsxs(Ge,{value:"ringcentral",className:"flex items-center gap-2",children:[n.jsx(qr,{className:"h-4 w-4"}),n.jsx("span",{children:"RingCentral"})]}),n.jsxs(Ge,{value:"twilio",className:"flex items-center gap-2",children:[n.jsx(ja,{className:"h-4 w-4"}),n.jsx("span",{children:"Twilio"})]})]}),IN.map(M=>n.jsx(Qe,{value:M,children:n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsxs(Ve,{className:"flex items-center gap-2",children:[M==="gmail"&&n.jsx(Qs,{className:"h-5 w-5"}),M==="outlook"&&n.jsx(Qs,{className:"h-5 w-5"}),M==="ringcentral"&&n.jsx(qr,{className:"h-5 w-5"}),M==="twilio"&&n.jsx(ja,{className:"h-5 w-5"}),M.charAt(0).toUpperCase()+M.slice(1)," Integration"]}),n.jsxs(ct,{children:[M==="gmail"&&"Configure Gmail for sending email communications",M==="outlook"&&"Configure Outlook/Microsoft 365 for sending email communications",M==="ringcentral"&&"Configure RingCentral for voice and SMS communications",M==="twilio"&&"Configure Twilio for SMS and voice communications"]})]}),n.jsx(Ee,{children:m?n.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Loading providers..."}):_.length===0?n.jsxs("div",{className:"py-8 text-center border rounded-md",children:[n.jsxs("p",{className:"text-muted-foreground mb-4",children:["No ",M," providers configured"]}),n.jsxs(H,{variant:"outline",onClick:()=>{N.reset({type:M,name:"",isDefault:!0,isActive:!0,clientId:null,clientSecret:null,apiKey:null,accountSid:null,authToken:null,email:null,phoneNumber:null,settings:null}),r(!0)},className:"flex items-center gap-2",children:[n.jsx(os,{className:"h-4 w-4"}),n.jsxs("span",{children:["Add ",M," Provider"]})]})]}):n.jsxs(jr,{children:[n.jsx(br,{children:n.jsxs(yn,{children:[n.jsx(Ye,{children:"Name"}),n.jsx(Ye,{children:"Status"}),n.jsx(Ye,{children:"Default"}),n.jsx(Ye,{children:"Credentials"}),n.jsx(Ye,{className:"text-right",children:"Actions"})]})}),n.jsx(Nr,{children:_.map(k=>n.jsxs(yn,{children:[n.jsx(qe,{className:"font-medium",children:k.name}),n.jsx(qe,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(is,{checked:k.isActive,onCheckedChange:()=>T(k)}),n.jsx("span",{children:k.isActive?"Active":"Inactive"})]})}),n.jsx(qe,{children:k.isDefault?n.jsxs(Ze,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 flex items-center gap-1",children:[n.jsx(Ao,{className:"h-3 w-3"}),"Default"]}):n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>L(k),className:"text-xs h-7",children:"Set as default"})}),n.jsxs(qe,{children:[M==="gmail"&&n.jsx("span",{children:k.clientId?"Configured":"Not configured"}),M==="outlook"&&n.jsx("span",{children:k.clientId?"Configured":"Not configured"}),M==="ringcentral"&&n.jsx("span",{children:k.clientId?"Configured":"Not configured"}),M==="twilio"&&n.jsx("span",{children:k.accountSid?"Configured":"Not configured"})]}),n.jsx(qe,{className:"text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsxs(H,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>P(k),children:[n.jsx("span",{className:"sr-only",children:"Edit"}),n.jsx(JG,{className:"h-4 w-4"})]}),n.jsxs(Axe,{children:[n.jsx(Exe,{asChild:!0,children:n.jsxs(H,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-destructive",children:[n.jsx("span",{className:"sr-only",children:"Delete"}),n.jsx(tm,{className:"h-4 w-4"})]})}),n.jsxs(a$,{className:"w-[95%] max-w-[500px] p-4 md:p-6",children:[n.jsxs(o$,{children:[n.jsxs(c$,{children:["Delete ",k.name,"?"]}),n.jsx(d$,{children:"This will permanently remove this provider. This action cannot be undone."})]}),n.jsxs(l$,{className:"flex-col sm:flex-row gap-2",children:[n.jsx(h$,{className:"mt-0",children:"Cancel"}),n.jsx(u$,{onClick:()=>I(k.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]})})]},k.id))})]})}),n.jsxs(Pn,{className:"border-t p-4 flex justify-between items-center",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:_.length>0?`${_.length} ${_.length===1?"provider":"providers"} configured`:"No providers configured"}),n.jsxs(H,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(OG,{className:"h-3 w-3"}),n.jsx("span",{children:"Documentation"})]})]})]})},M))]}),n.jsx(An,{open:s,onOpenChange:r,children:n.jsxs(wn,{className:"w-[95%] max-w-[500px] p-4 md:p-6 overflow-y-auto max-h-[90vh]",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:"Add New Provider"}),n.jsx(ws,{children:"Configure a new communication provider for the system."})]}),n.jsx(fn,{...N,children:n.jsxs("form",{onSubmit:N.handleSubmit(S),className:"space-y-4",children:[n.jsx(J,{control:N.control,name:"type",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Provider Type"}),n.jsxs(gt,{defaultValue:M.value,onValueChange:k=>{M.onChange(k),e(k)},children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select provider type"})})}),n.jsx(ht,{children:IN.map(k=>n.jsx(ue,{value:k,children:k.charAt(0).toUpperCase()+k.slice(1)},k))})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:N.control,name:"name",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Company Gmail",...M})}),n.jsx(ot,{children:"A name to identify this provider configuration"}),n.jsx(ne,{})]})}),n.jsx(J,{control:N.control,name:"isDefault",render:({field:M})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(X,{children:"Default Provider"}),n.jsx(ot,{children:"Make this the default provider for this type"})]}),n.jsx(Q,{children:n.jsx(is,{checked:M.value,onCheckedChange:M.onChange})})]})}),n.jsx(J,{control:N.control,name:"isActive",render:({field:M})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(X,{children:"Active"}),n.jsx(ot,{children:"Enable or disable this provider"})]}),n.jsx(Q,{children:n.jsx(is,{checked:M.value,onCheckedChange:M.onChange})})]})}),N.watch("type")==="gmail"&&n.jsxs(n.Fragment,{children:[n.jsx(J,{control:N.control,name:"clientId",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Client ID"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"OAuth 2.0 Client ID",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:N.control,name:"clientSecret",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Client Secret"}),n.jsx(Q,{children:n.jsx(ve,{type:"password",placeholder:"OAuth 2.0 Client Secret",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:N.control,name:"email",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Email Address"}),n.jsx(Q,{children:n.jsx(ve,{type:"email",placeholder:"sender@yourdomain.com",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ot,{children:"The email address that will be used to send emails"}),n.jsx(ne,{})]})})]}),N.watch("type")==="outlook"&&n.jsxs(n.Fragment,{children:[n.jsx(J,{control:N.control,name:"clientId",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Client ID"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Microsoft Application Client ID",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:N.control,name:"clientSecret",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Client Secret"}),n.jsx(Q,{children:n.jsx(ve,{type:"password",placeholder:"Microsoft Application Secret",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:N.control,name:"email",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Email Address"}),n.jsx(Q,{children:n.jsx(ve,{type:"email",placeholder:"sender@yourdomain.com",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ot,{children:"The Microsoft 365 email address that will be used to send emails"}),n.jsx(ne,{})]})})]}),N.watch("type")==="ringcentral"&&n.jsxs(n.Fragment,{children:[n.jsx(J,{control:N.control,name:"clientId",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Client ID"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"RingCentral Client ID",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:N.control,name:"clientSecret",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Client Secret"}),n.jsx(Q,{children:n.jsx(ve,{type:"password",placeholder:"RingCentral Client Secret",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:N.control,name:"phoneNumber",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Phone Number"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"+15551234567",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ot,{children:"The RingCentral phone number to use for SMS and calls"}),n.jsx(ne,{})]})})]}),N.watch("type")==="twilio"&&n.jsxs(n.Fragment,{children:[n.jsx(J,{control:N.control,name:"accountSid",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Account SID"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Twilio Account SID",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:N.control,name:"authToken",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Auth Token"}),n.jsx(Q,{children:n.jsx(ve,{type:"password",placeholder:"Twilio Auth Token",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:N.control,name:"phoneNumber",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Phone Number"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"+15551234567",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ot,{children:"The Twilio phone number to use for SMS"}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:N.control,name:"settings",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Additional Settings (JSON)"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:'{"key": "value"}',className:"font-mono",rows:3,...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ot,{children:"Optional JSON configuration for provider-specific settings"}),n.jsx(ne,{})]})}),n.jsxs(hs,{children:[n.jsx(H,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),n.jsx(H,{type:"submit",disabled:p.isPending,children:p.isPending?"Creating...":"Create Provider"})]})]})})]})}),n.jsx(An,{open:i,onOpenChange:a,children:n.jsxs(wn,{className:"w-[95%] max-w-[500px] p-4 md:p-6 overflow-y-auto max-h-[90vh]",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:"Edit Provider"}),n.jsx(ws,{children:"Update the communication provider configuration."})]}),n.jsx(fn,{...E,children:n.jsxs("form",{onSubmit:E.handleSubmit(C),className:"space-y-4",children:[n.jsx(J,{control:E.control,name:"type",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Provider Type"}),n.jsx(Q,{children:n.jsx(ve,{disabled:!0,value:M.value.charAt(0).toUpperCase()+M.value.slice(1)})}),n.jsx(ot,{children:"Provider type cannot be changed"}),n.jsx(ne,{})]})}),n.jsx(J,{control:E.control,name:"name",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Company Gmail",...M})}),n.jsx(ot,{children:"A name to identify this provider configuration"}),n.jsx(ne,{})]})}),n.jsx(J,{control:E.control,name:"isDefault",render:({field:M})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(X,{children:"Default Provider"}),n.jsx(ot,{children:"Make this the default provider for this type"})]}),n.jsx(Q,{children:n.jsx(is,{checked:M.value,onCheckedChange:M.onChange,disabled:M.value})})]})}),n.jsx(J,{control:E.control,name:"isActive",render:({field:M})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(X,{children:"Active"}),n.jsx(ot,{children:"Enable or disable this provider"})]}),n.jsx(Q,{children:n.jsx(is,{checked:M.value,onCheckedChange:M.onChange})})]})}),E.watch("type")==="gmail"&&n.jsxs(n.Fragment,{children:[n.jsx(J,{control:E.control,name:"clientId",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Client ID"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"OAuth 2.0 Client ID",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:E.control,name:"clientSecret",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Client Secret"}),n.jsx(Q,{children:n.jsx(ve,{type:"password",placeholder:"OAuth 2.0 Client Secret",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:E.control,name:"email",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Email Address"}),n.jsx(Q,{children:n.jsx(ve,{type:"email",placeholder:"sender@yourdomain.com",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ot,{children:"The email address that will be used to send emails"}),n.jsx(ne,{})]})})]}),E.watch("type")==="outlook"&&n.jsxs(n.Fragment,{children:[n.jsx(J,{control:E.control,name:"clientId",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Client ID"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Microsoft Application Client ID",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:E.control,name:"clientSecret",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Client Secret"}),n.jsx(Q,{children:n.jsx(ve,{type:"password",placeholder:"Microsoft Application Secret",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:E.control,name:"email",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Email Address"}),n.jsx(Q,{children:n.jsx(ve,{type:"email",placeholder:"sender@yourdomain.com",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ot,{children:"The Microsoft 365 email address that will be used to send emails"}),n.jsx(ne,{})]})})]}),E.watch("type")==="ringcentral"&&n.jsxs(n.Fragment,{children:[n.jsx(J,{control:E.control,name:"clientId",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Client ID"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"RingCentral Client ID",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:E.control,name:"clientSecret",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Client Secret"}),n.jsx(Q,{children:n.jsx(ve,{type:"password",placeholder:"RingCentral Client Secret",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:E.control,name:"phoneNumber",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Phone Number"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"+15551234567",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ot,{children:"The RingCentral phone number to use for SMS and calls"}),n.jsx(ne,{})]})})]}),E.watch("type")==="twilio"&&n.jsxs(n.Fragment,{children:[n.jsx(J,{control:E.control,name:"accountSid",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Account SID"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Twilio Account SID",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:E.control,name:"authToken",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Auth Token"}),n.jsx(Q,{children:n.jsx(ve,{type:"password",placeholder:"Twilio Auth Token",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ne,{})]})}),n.jsx(J,{control:E.control,name:"phoneNumber",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Phone Number"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"+15551234567",...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ot,{children:"The Twilio phone number to use for SMS"}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:E.control,name:"settings",render:({field:M})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Additional Settings (JSON)"}),n.jsx(Q,{children:n.jsx(Wn,{placeholder:'{"key": "value"}',className:"font-mono",rows:3,...M,value:M.value||"",onChange:k=>M.onChange(k.target.value||null)})}),n.jsx(ot,{children:"Optional JSON configuration for provider-specific settings"}),n.jsx(ne,{})]})}),n.jsxs(hs,{children:[n.jsx(H,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),n.jsx(H,{type:"submit",disabled:v.isPending,children:v.isPending?"Updating...":"Update Provider"})]})]})})]})})]})}function Txe(){const[,t]=_n(),e=new URLSearchParams(t).get("tab"),[s,r]=y.useState(e||"profile");return n.jsxs("div",{className:"container mx-auto py-6",children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Settings"}),n.jsx("p",{className:"text-muted-foreground",children:"Configure system-wide settings and templates"})]})}),n.jsxs(ps,{defaultValue:"service-templates",value:s,onValueChange:r,className:"space-y-4",children:[n.jsx("div",{className:"mb-6 overflow-x-auto pb-2",children:n.jsxs(gs,{className:"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground w-auto",children:[n.jsxs(Ge,{value:"profile",className:"flex gap-2 items-center px-4 py-2",children:[n.jsx(xi,{className:"h-4 w-4"}),n.jsx("span",{className:"whitespace-nowrap",children:"My Profile"})]}),n.jsxs(Ge,{value:"service-templates",className:"flex gap-2 items-center px-4 py-2",children:[n.jsx(fr,{className:"h-4 w-4"}),n.jsx("span",{className:"whitespace-nowrap",children:"Service Templates"})]}),n.jsxs(Ge,{value:"communication-providers",className:"flex gap-2 items-center px-4 py-2",children:[n.jsx(Qs,{className:"h-4 w-4"}),n.jsx("span",{className:"whitespace-nowrap",children:"Communication"})]}),n.jsxs(Ge,{value:"user-management",className:"flex gap-2 items-center px-4 py-2",children:[n.jsx(yi,{className:"h-4 w-4"}),n.jsx("span",{className:"whitespace-nowrap",children:"User Management"})]}),n.jsxs(Ge,{value:"invitations",className:"flex gap-2 items-center px-4 py-2",children:[n.jsx(e2,{className:"h-4 w-4"}),n.jsx("span",{className:"whitespace-nowrap",children:"Invitations"})]}),n.jsxs(Ge,{value:"notifications",className:"flex gap-2 items-center px-4 py-2",children:[n.jsx(HC,{className:"h-4 w-4"}),n.jsx("span",{className:"whitespace-nowrap",children:"Notifications"})]}),n.jsxs(Ge,{value:"permissions",className:"flex gap-2 items-center px-4 py-2",children:[n.jsx(wm,{className:"h-4 w-4"}),n.jsx("span",{className:"whitespace-nowrap",children:"Permissions"})]}),n.jsxs(Ge,{value:"appearance",className:"flex gap-2 items-center px-4 py-2",children:[n.jsx(WG,{className:"h-4 w-4"}),n.jsx("span",{className:"whitespace-nowrap",children:"Appearance"})]}),n.jsxs(Ge,{value:"advanced",className:"flex gap-2 items-center px-4 py-2",children:[n.jsx(Hs,{className:"h-4 w-4"}),n.jsx("span",{className:"whitespace-nowrap",children:"Advanced"})]})]})}),n.jsx(Qe,{value:"profile",className:"space-y-4",children:n.jsx(kge,{})}),n.jsx(Qe,{value:"service-templates",className:"space-y-4",children:n.jsx(Nge,{})}),n.jsx(Qe,{value:"communication-providers",className:"space-y-4",children:n.jsx(Ixe,{})}),n.jsx(Qe,{value:"user-management",className:"space-y-4",children:n.jsx(uV,{})}),n.jsx(Qe,{value:"invitations",className:"space-y-4",children:n.jsx(Tge,{})}),n.jsx(Qe,{value:"notifications",className:"space-y-4",children:n.jsx(Rge,{})}),n.jsx(Qe,{value:"permissions",className:"space-y-4",children:n.jsx(Fge,{})}),n.jsx(Qe,{value:"appearance",className:"space-y-4",children:n.jsx(fxe,{})}),n.jsx(Qe,{value:"advanced",className:"space-y-4",children:n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsxs(Ve,{className:"flex items-center",children:[n.jsx(zE,{className:"mr-2 h-5 w-5"}),"System Diagnostics"]}),n.jsx(ct,{children:"Advanced diagnostics tools for administrators"})]}),n.jsxs(Ee,{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Access system diagnostic tools for troubleshooting connectivity and server issues. This should only be used by system administrators."}),n.jsxs("div",{className:"mb-4 p-3 rounded-lg border border-yellow-200 bg-yellow-50 text-yellow-800",children:[n.jsx("h4",{className:"font-semibold mb-1",children:"Administrator access only"}),n.jsx("p",{className:"text-sm",children:"These tools are intended for system administrators and may affect system performance."})]})]}),n.jsx(Pn,{children:n.jsx(rs,{href:"/connection-test",children:n.jsxs(H,{variant:"outline",className:"w-full",children:[n.jsx(zE,{className:"mr-2 h-4 w-4"}),"Open Connection Diagnostics"]})})})]})})})]})]})}const Mxe=q.object({name:q.string().min(1,"Name is required"),slug:q.string().min(1,"Slug is required").regex(/^[a-z0-9-]+$/,"Slug must contain only lowercase letters, numbers, and hyphens"),address:q.string().optional(),city:q.string().optional(),state:q.string().optional(),zipCode:q.string().optional(),phone:q.string().optional(),email:q.string().email("Invalid email").or(q.literal("")),website:q.string().url("Invalid URL").or(q.literal("")),active:q.boolean().default(!0),isSystemAdmin:q.boolean().default(!1)});function m$({organization:t,onSuccess:e,onCancel:s}){const{toast:r}=Lt(),i=jn(),a=mn({resolver:pn(Mxe),defaultValues:t?{name:t.name,slug:t.slug,address:t.address||"",city:t.city||"",state:t.state||"",zipCode:t.zipCode||"",phone:t.phone||"",email:t.email||"",website:t.website||"",active:t.active,isSystemAdmin:t.isSystemAdmin}:{name:"",slug:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",website:"",active:!0,isSystemAdmin:!1}}),o=Pt({mutationFn:async d=>t?pt(`/api/organizations/${t.id}`,{method:"PATCH",body:JSON.stringify(d)}):pt("/api/organizations",{method:"POST",body:JSON.stringify(d)}),onSuccess:()=>{r({title:t?"Organization Updated":"Organization Created",description:t?`${a.getValues().name} was updated successfully.`:`${a.getValues().name} was created successfully.`}),i.invalidateQueries({queryKey:["/api/organizations"]}),e()},onError:d=>{console.error("Organization mutation error:",d),r({title:"Error",description:"There was an error processing your request. Please try again.",variant:"destructive"})}}),c=d=>{o.mutate(d)};return n.jsx(fn,{...a,children:n.jsxs("form",{onSubmit:a.handleSubmit(c),className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:a.control,name:"name",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Organization Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter organization name",...d})}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"slug",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Organization Slug"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"organization-slug",...d})}),n.jsx(ot,{children:"Used in URLs. Only lowercase letters, numbers, and hyphens."}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:a.control,name:"address",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Address"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter address",...d})}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(J,{control:a.control,name:"city",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"City"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"City",...d})}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"state",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"State"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"State",...d})}),n.jsx(ne,{})]})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:a.control,name:"zipCode",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Zip Code"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Zip code",...d})}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"phone",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Phone"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Phone number",...d})}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(J,{control:a.control,name:"email",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Email"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Organization email",type:"email",...d})}),n.jsx(ne,{})]})}),n.jsx(J,{control:a.control,name:"website",render:({field:d})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Website"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"https://example.com",...d})}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"flex flex-col space-y-4",children:[n.jsx(J,{control:a.control,name:"active",render:({field:d})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(X,{className:"text-base",children:"Active Organization"}),n.jsx(ot,{children:"Inactive organizations cannot access the system."})]}),n.jsx(Q,{children:n.jsx(is,{checked:d.value,onCheckedChange:d.onChange})})]})}),n.jsx(J,{control:a.control,name:"isSystemAdmin",render:({field:d})=>n.jsxs(Z,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(X,{className:"text-base",children:"System Administrator Access"}),n.jsx(ot,{children:"Organizations with system admin access can manage all organizations."})]}),n.jsx(Q,{children:n.jsx(is,{checked:d.value,onCheckedChange:d.onChange})})]})})]}),n.jsxs(hs,{children:[n.jsx(H,{variant:"outline",type:"button",onClick:s,children:"Cancel"}),n.jsx(H,{type:"submit",disabled:o.isPending,children:o.isPending?"Saving...":t?"Update Organization":"Create Organization"})]})]})})}function Dxe({organization:t}){const[e,s]=y.useState(!1);return n.jsxs(Ae,{children:[n.jsx(Be,{children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsxs(Ve,{className:"flex items-center gap-2",children:[n.jsx(zl,{className:"h-5 w-5"}),t.name]}),n.jsxs(ct,{children:[t.city,", ",t.state]})]}),n.jsxs("div",{className:"flex gap-1",children:[t.isSystemAdmin&&n.jsx(Ze,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"System Admin"}),t.active?n.jsx(Ze,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Active"}):n.jsx(Ze,{variant:"outline",className:"bg-gray-50 text-gray-700 border-gray-200",children:"Inactive"})]})]})}),n.jsx(Ee,{children:n.jsxs("div",{className:"text-sm space-y-2",children:[t.address&&n.jsx("p",{className:"text-gray-600",children:t.address}),t.email&&n.jsxs("p",{className:"text-gray-600",children:[n.jsx("span",{className:"font-medium",children:"Email:"})," ",t.email]}),t.phone&&n.jsxs("p",{className:"text-gray-600",children:[n.jsx("span",{className:"font-medium",children:"Phone:"})," ",t.phone]}),t.website&&n.jsxs("p",{className:"text-gray-600",children:[n.jsx("span",{className:"font-medium",children:"Website:"})," ",n.jsx("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:t.website})]})]})}),n.jsxs(Pn,{className:"flex justify-between border-t pt-4",children:[n.jsxs(H,{variant:"outline",size:"sm",children:[n.jsx(e2,{className:"h-4 w-4 mr-2"}),"Manage Users"]}),n.jsxs(H,{size:"sm",variant:"ghost",onClick:()=>s(!0),children:[n.jsx(Gr,{className:"h-4 w-4 mr-2"}),"Edit"]}),n.jsx(An,{open:e,onOpenChange:s,children:n.jsxs(wn,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:"Edit Organization"}),n.jsx(ws,{children:"Update the organization details."})]}),n.jsx(m$,{organization:t,onSuccess:()=>s(!1),onCancel:()=>s(!1)})]})})]})]})}function kxe(){const{user:t}=Kr(),[e,s]=y.useState(!1),{toast:r}=Lt(),{data:i,isLoading:a,error:o}=wt({queryKey:["/api/organizations"],queryFn:async()=>await pt("/api/organizations")});o&&(console.error("Error fetching organizations:",o),i||r({title:"Error Loading Organizations",description:"There was a problem loading the organizations. Please try again.",variant:"destructive"}));const c=(t==null?void 0:t.role)==="system_admin";return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Organizations"}),c&&n.jsxs(An,{open:e,onOpenChange:s,children:[n.jsx(ll,{asChild:!0,children:n.jsxs(H,{children:[n.jsx(os,{className:"h-4 w-4 mr-2"}),"Add Organization"]})}),n.jsxs(wn,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[n.jsxs(Tn,{children:[n.jsx(Mn,{children:"Add New Organization"}),n.jsx(ws,{children:"Create a new organization in the system."})]}),n.jsx(m$,{onSuccess:()=>s(!1),onCancel:()=>s(!1)})]})]})]}),a?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:3}).map((d,h)=>n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(_e,{className:"h-6 w-2/3"}),n.jsx(_e,{className:"h-4 w-1/2 mt-2"})]}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(_e,{className:"h-4 w-full"}),n.jsx(_e,{className:"h-4 w-full"}),n.jsx(_e,{className:"h-4 w-2/3"})]})}),n.jsx(Pn,{children:n.jsx(_e,{className:"h-9 w-full"})})]},h))}):i&&i.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(d=>n.jsx(Dxe,{organization:d},d.id))}):n.jsxs("div",{className:"rounded-lg border border-dashed p-8 text-center",children:[n.jsx(zl,{className:"h-10 w-10 mx-auto text-gray-400"}),n.jsx("h3",{className:"mt-4 text-lg font-medium",children:"No Organizations Found"}),n.jsx("p",{className:"mt-2 text-sm text-gray-500",children:c?"Get started by creating your first organization.":"No organizations available in the system."}),c&&n.jsxs(H,{onClick:()=>s(!0),className:"mt-4",variant:"outline",children:[n.jsx(os,{className:"h-4 w-4 mr-2"}),"Add Organization"]})]})]})}function Pxe(){const[,t]=_n(),{user:e,isAuthenticated:s,isLoading:r}=Kr(),[i,a]=y.useState(!1),[o,c]=y.useState(!0);return y.useEffect(()=>{if(c(!0),!r){if(console.log("Admin page: Auth check complete",{isAuthenticated:s,user:e}),!s){console.log("Admin page: Not authenticated, redirecting to login"),t("/login?redirect=/admin");return}if(e&&!["admin","system_admin","org_admin"].includes(e.role)){console.log("Admin page: Unauthorized role, redirecting"),t("/unauthorized");return}s&&e&&["admin","system_admin","org_admin"].includes(e.role)&&(console.log("Admin page: Access verified"),setTimeout(()=>{a(!0),c(!1)},100))}},[r,s,e,t]),r||o||!i||!e?n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx(Kt,{className:"h-12 w-12 animate-spin text-primary"})}):n.jsxs("div",{className:"container mx-auto py-6",children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Admin Dashboard"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage system users, organizations, and permissions"})]})}),n.jsxs(ps,{defaultValue:"users",className:"space-y-4",children:[n.jsxs(gs,{children:[n.jsxs(Ge,{value:"users",className:"flex items-center gap-2",children:[n.jsx(yi,{className:"h-4 w-4"}),"Users"]}),n.jsxs(Ge,{value:"organizations",className:"flex items-center gap-2",children:[n.jsx(zl,{className:"h-4 w-4"}),"Organizations"]}),n.jsxs(Ge,{value:"permissions",className:"flex items-center gap-2",children:[n.jsx(wm,{className:"h-4 w-4"}),"Permissions"]})]}),n.jsx(Qe,{value:"users",className:"space-y-4",children:n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"User Management"}),n.jsx(ct,{children:"Add, edit, and manage user accounts"})]}),n.jsx(Ee,{children:n.jsx(uV,{})})]})}),n.jsx(Qe,{value:"organizations",className:"space-y-4",children:n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Organization Management"}),n.jsx(ct,{children:"Manage organizations and their settings"})]}),n.jsx(Ee,{children:n.jsx(kxe,{})})]})}),n.jsx(Qe,{value:"permissions",className:"space-y-4",children:n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Permissions"}),n.jsx(ct,{children:"Configure role-based permissions"})]}),n.jsx(Ee,{children:n.jsx("p",{children:"Permission management will be implemented here."})})]})})]})]})}function Rxe({onScan:t,onError:e,onClose:s,showClose:r=!1,title:i="HTML5 QR Code Scanner",description:a="Scan barcodes and QR codes using the built-in camera"}){const o=y.useRef(null),c=y.useRef(null),[d,h]=y.useState(!1),[g,m]=y.useState(null),[p,v]=y.useState(null),[j,N]=y.useState("No camera detected"),E=y.useRef(`html5-qrcode-scanner-${Math.random().toString(36).substring(2,9)}`),_=async()=>{if(c.current)try{if(o.current){try{await o.current.stop()}catch(P){console.log("Ignoring stop error:",P)}o.current=null}if(!document.getElementById(E.current)){const P=document.createElement("div");P.id=E.current,P.style.width="100%",P.style.height="100%",c.current.innerHTML="",c.current.appendChild(P)}o.current=new Yv(E.current);const I=await Yv.getCameras();if(I&&I.length>0){const P=I[0];N(P.label||"Default camera"),m(null)}else m("No camera found"),e&&e("No camera found")}catch(I){console.error("Error initializing HTML5 QR scanner:",I),I?I.message&&I.message.includes("not allowed")?(m("Camera access denied. Please allow camera access in your browser settings and try again."),e&&e("Camera access denied. Please allow camera access in your browser settings and try again.")):I.name==="NotFoundError"||I.message&&I.message.includes("not found")?(m("Camera not found. Please make sure your device has a working camera."),e&&e("Camera not found. Please make sure your device has a working camera.")):I.name==="NotReadableError"||I.message&&I.message.includes("not readable")?(m("Camera is busy or not available. Please close other apps that might be using your camera."),e&&e("Camera is busy or not available. Please close other apps that might be using your camera.")):(m(`Scanner initialization failed: ${I.message||"Unknown error"}`),e&&e(I.message||"Unknown error")):(m("Scanner initialization failed. Please try again later."),e&&e("Scanner initialization failed. Please try again later."))}},S=async()=>{if(!o.current){m("Scanner not initialized");return}try{const I=T=>{v(T),t(T)},P=T=>{console.debug("QR scan error:",T)},L={fps:10,qrbox:{width:250,height:250},aspectRatio:1};await o.current.start({facingMode:"environment"},L,I,P),h(!0),m(null)}catch(I){console.error("Error starting scanner:",I),I?I.message&&(I.message.includes("not allowed")||I.message.includes("permission"))?(m("Camera access denied. Please grant camera permission in your browser settings and try again."),e&&e("Camera access denied. Please grant camera permission in your browser settings and try again.")):I.name==="NotFoundError"||I.message&&I.message.includes("not found")?(m("Camera not found. Please make sure your device has a working camera."),e&&e("Camera not found. Please make sure your device has a working camera.")):I.name==="NotReadableError"||I.message&&I.message.includes("not readable")?(m("Camera is busy or not available. Please close other apps that might be using your camera."),e&&e("Camera is busy or not available. Please close other apps that might be using your camera.")):I.name==="AbortError"||I.message&&I.message.includes("abort")?(m("Camera access was interrupted. Please try again."),e&&e("Camera access was interrupted. Please try again.")):(m(`Failed to start scanner: ${I.message||"Unknown error"}`),e&&e(I.message||"Unknown error")):(m("Failed to start scanner. Please try again."),e&&e("Failed to start scanner. Please try again."))}},C=async()=>{if(o.current)try{await o.current.stop(),h(!1)}catch(I){console.error("Error stopping scanner:",I)}h(!1)};return y.useEffect(()=>(_(),()=>{if(o.current)try{d&&o.current.stop().catch(I=>{var P;(P=I.message)!=null&&P.includes("not running")||console.error("Error stopping scanner during cleanup:",I)})}catch(I){console.error("Error in cleanup:",I)}}),[]),n.jsxs(Ae,{className:"w-full max-w-md mx-auto",children:[n.jsx(Be,{className:"pb-2",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs(Ve,{className:"flex items-center",children:[n.jsx(ki,{className:"h-5 w-5 mr-2 text-primary"}),i]}),n.jsx(ct,{children:a})]}),r&&s&&n.jsx(H,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8",children:n.jsx(ys,{className:"h-4 w-4"})})]})}),n.jsx(Ee,{children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("div",{ref:c,className:"w-full h-64 bg-muted rounded-md overflow-hidden relative flex items-center justify-center",children:!d&&n.jsxs("div",{className:"text-center p-4",children:[n.jsx(ki,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"Camera preview will appear here"})]})}),g&&n.jsxs(Cr,{variant:"destructive",className:"relative",children:[n.jsx(Sr,{children:g}),n.jsxs(H,{onClick:()=>{m(null),setTimeout(()=>_(),500)},size:"sm",className:"mt-2",variant:"outline",children:[n.jsx(Qa,{className:"h-4 w-4 mr-2"}),g.includes("camera access")?"Retry Camera Access":"Retry Scanner Initialization"]})]}),p&&n.jsx(Cr,{children:n.jsxs(Sr,{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium",children:"Last scanned:"}),n.jsx("span",{className:"font-mono text-sm",children:p})]})}),n.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[n.jsx(JC,{className:"h-4 w-4"}),n.jsx("span",{children:j})]})]})}),n.jsx(Pn,{className:"flex gap-2 pt-0",children:d?n.jsxs(H,{onClick:C,variant:"outline",className:"flex-1 gap-1",children:[n.jsx(ys,{className:"h-4 w-4"}),"Stop Scanning"]}):n.jsxs(H,{onClick:S,className:"flex-1 gap-1",disabled:!!g,children:[n.jsx(em,{className:"h-4 w-4"}),"Start Scanning"]})})]})}const TN="AcGjfGbhMH7qIy2ow3Onur8BLe9KCcC8ks2NXcPekrlHdI7ULG++Q2Rw8q8xN1B3M9GxsUm+7eSMdLAmEOkl97s+AAAAAYmHzhQAAABqpbz4Pk4h7rIKTb+UbKGH8iWxVEuqYbYnRxlMwLHg5DFg/RZq5GdnAWCYAF/j+TLYo2LoE8Fmg3aWwCmkPZz3wl98D5qWyOzIQgLCPf6o8xdpbNpXyMntaAh+kHkGdPSa9AZXVg+0";var Fe;(t=>{(h=>(h.Debug="debug",h.Info="info",h.Warn="warn",h.Error="error",h.Quiet="quiet"))(t.Level||(t.Level={}));let e=new Map([["debug",1],["info",2],["warn",3],["error",4],["quiet",5]]),s="debug";function r(h){s=h}t.setLevel=r;function i(h,...g){if(!(e.get(s)>e.get(h)))switch(h){case"debug":{console.debug(...g);break}case"info":{console.log(...g);break}case"warn":{console.warn(...g);break}case"error":{console.error(...g);break}}}t.log=i;function a(...h){i("warn",...h)}t.warn=a;function o(...h){i("debug",...h)}t.debug=o;function c(...h){i("info",...h)}t.info=c;function d(...h){i("error",...h)}t.error=d})(Fe||(Fe={}));var hc=class f$ extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,f$.prototype),this.name=e.name}toString(){return`${this.name}: ${this.message}`}},Lxe=Object.create,p$=Object.defineProperty,Oxe=Object.getOwnPropertyDescriptor,Fxe=Object.getOwnPropertyNames,Bxe=Object.getPrototypeOf,zxe=Object.prototype.hasOwnProperty,HS=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Vxe=(t,e,s,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Fxe(e))!zxe.call(t,i)&&i!==s&&p$(t,i,{get:()=>e[i],enumerable:!(r=Oxe(e,i))||r.enumerable});return t},qS=(t,e,s)=>(s=t!=null?Lxe(Bxe(t)):{},Vxe(p$(s,"default",{value:t,enumerable:!0}),t)),$xe=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),Uxe=()=>(async t=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(t)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]));function g$(){return typeof crossOriginIsolated>"u"?!1:crossOriginIsolated}function x$(){try{return new WebAssembly.Memory({initial:1,maximum:1,shared:!0}).buffer.constructor.name==="SharedArrayBuffer"}catch{return!1}}async function Wxe(){return $xe()}async function v$(){if(!await Uxe())return!1;let t=null;try{t=new Worker(URL.createObjectURL(new Blob(['postMessage("Worker" in self);'],{type:"text/javascript"})),{name:"nestedWorkerTest"})}catch{return!1}return new Promise(e=>{if(t==null){e(!1);return}t.onmessage=s=>{t==null||t.terminate(),e(s.data)}})}async function Hxe(){let t=await v$();return g$()&&x$()&&t}function qxe(t){return typeof t=="object"&&t!=null}function y$(t){console.warn("Reached unexpected case",t)}var Gxe="PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNTQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTU4IDEwSDI4LjZMMjIuOS41QTEgMSAwIDAgMCAyMiAwSDJhMiAyIDAgMCAwLTIgMnY0NmE2IDYgMCAwIDAgNiA2aDQ4YTYgNiAwIDAgMCA2LTZWMTJhMiAyIDAgMCAwLTItMlptLTM3LjUgOGE0LjUgNC41IDAgMSAxIDAgOSA0LjUgNC41IDAgMCAxIDAtOVptMjcuNCAyNy41YTEgMSAwIDAgMS0uOS41SDEzYTEgMSAwIDAgMS0uOC0xLjVsNy0xMWExIDEgMCAwIDEgMS42LS4xbDUgNiA5LjQtMTVhMSAxIDAgMCAxIDEuMy0uM2wuNC40IDExIDIwYTEgMSAwIDAgMSAwIDFaIi8+PC9zdmc+",Yxe=(t=>(t.Rounded="rounded",t.Square="square",t))(Yxe||{}),Kxe=(t=>(t.Light="light",t.Bold="bold",t))(Kxe||{}),Zxe=class w${constructor(e){this._isLooping=!1,this._isLooping=e}get isLooping(){return this._isLooping}static fromJSON(e){return e===null?null:new w$(e.looping)}toJSONObject(){return{looping:this.isLooping}}},Qxe=(t=>(t.Minimal="minimal",t.Extended="extended",t))(Qxe||{}),Xxe=class{constructor(){this.type="tapToFocus"}toJSONObject(){return{type:this.type}}},Jxe=class{constructor(){this.type="swipeToZoom"}toJSONObject(){return{type:this.type}}},ds=class MN{constructor(e,s){this._x=e,this._y=s}get x(){return this._x}get y(){return this._y}static mirrorX(e,s){let r=e.x-s.width;return r*=-1,new MN(r,e.y)}static fromJSON(e){return new MN(e.x,e.y)}toJSONObject(){return{x:this.x,y:this.y}}equals(e){return this.x===e.x&&this.y===e.y}},e1=class j${constructor(e,s,r,i){this._topLeft=e,this._topRight=s,this._bottomRight=r,this._bottomLeft=i}get topLeft(){return this._topLeft}get topRight(){return this._topRight}get bottomRight(){return this._bottomRight}get bottomLeft(){return this._bottomLeft}static fromJSON(e){return new j$(ds.fromJSON(e.topLeft),ds.fromJSON(e.topRight),ds.fromJSON(e.bottomRight),ds.fromJSON(e.bottomLeft))}toJSONObject(){return{topLeft:this.topLeft.toJSONObject(),topRight:this.topRight.toJSONObject(),bottomLeft:this.bottomLeft.toJSONObject(),bottomRight:this.bottomRight.toJSONObject()}}},DN=(t=>(t.Pixel="pixel",t.Fraction="fraction",t))(DN||{}),hr=class b${constructor(e,s){this._value=e,this._unit=s}get value(){return this._value}get unit(){return this._unit}static fromJSON(e){return new b$(e.value,e.unit)}toJSONObject(){return{unit:this.unit,value:this.value}}},hT=class kN{constructor(e,s){this._x=e,this._y=s}static get zero(){return new kN(new hr(0,"pixel"),new hr(0,"pixel"))}get x(){return this._x}get y(){return this._y}static fromJSON(e){return new kN(hr.fromJSON(e.x),hr.fromJSON(e.y))}toJSONObject(){return{x:this.x.toJSONObject(),y:this.y.toJSONObject()}}},e0e=class{constructor(e,s){this._origin=e,this._size=s}get origin(){return this._origin}get size(){return this._size}toJSONObject(){return{origin:this.origin.toJSONObject(),size:this.size.toJSONObject()}}},N$=class C${constructor(e,s){this._width=e,this._height=s}get width(){return this._width}get height(){return this._height}static fromJSON(e){return new C$(hr.fromJSON(e.width),hr.fromJSON(e.height))}isSameAs(e){return JSON.stringify(this.toJSONObject())===JSON.stringify(e.toJSONObject())}toJSONObject(){return{width:this.width.toJSONObject(),height:this.height.toJSONObject()}}},sp=class S${constructor(e,s){this._width=e,this._height=s}get width(){return this._width}get height(){return this._height}static fromJSON(e){return new S$(e.width,e.height)}toJSONObject(){return{height:this.height,width:this.width}}},rj=class{constructor(e,s){this._size=e,this._aspect=s}get size(){return this._size}get aspect(){return this._aspect}},t0e=(t=>(t.WidthAndHeight="widthAndHeight",t.WidthAndAspectRatio="widthAndAspectRatio",t.HeightAndAspectRatio="heightAndAspectRatio",t.ShorterDimensionAndAspectRatio="shorterDimensionAndAspectRatio",t))(t0e||{}),n0e=class Df{constructor(){this._shorterDimensionAndAspectRatio=null}get widthAndHeight(){return this._widthAndHeight}get widthAndAspectRatio(){return this._widthAndAspectRatio}get heightAndAspectRatio(){return this._heightAndAspectRatio}get shorterDimensionAndAspectRatio(){return this._shorterDimensionAndAspectRatio}get sizingMode(){return this.widthAndAspectRatio?"widthAndAspectRatio":this.heightAndAspectRatio?"heightAndAspectRatio":this.shorterDimensionAndAspectRatio?"shorterDimensionAndAspectRatio":"widthAndHeight"}static sizeWithWidthAndHeight(e){let s=new Df;return s._widthAndHeight=e,s}static sizeWithWidthAndAspectRatio(e,s){let r=new Df;return r._widthAndAspectRatio=new rj(e,s),r}static sizeWithHeightAndAspectRatio(e,s){let r=new Df;return r._heightAndAspectRatio=new rj(e,s),r}static sizeWithShorterDimensionAndAspectRatio(e,s){let r=new Df;return r._shorterDimensionAndAspectRatio=new rj(e,s),r}static fromJSON(e){if(e.width&&e.height)return this.sizeWithWidthAndHeight(new N$(hr.fromJSON(e.width),hr.fromJSON(e.height)));if(e.width&&typeof e.aspect=="number")return this.sizeWithWidthAndAspectRatio(hr.fromJSON(e.width),e.aspect);if(e.height&&typeof e.aspect=="number")return this.sizeWithHeightAndAspectRatio(hr.fromJSON(e.height),e.aspect);if(e.shorterDimension&&typeof e.aspect=="number")return this.sizeWithShorterDimensionAndAspectRatio(hr.fromJSON(e.shorterDimension),e.aspect);throw new Error(`SizeWithUnitAndAspectJSON is malformed: ${JSON.stringify(e)}`)}toJSONObject(){var e,s,r,i,a,o,c,d;switch(this.sizingMode){case"widthAndAspectRatio":return{width:(e=this.widthAndAspectRatio)==null?void 0:e.size.toJSONObject(),aspect:(s=this.widthAndAspectRatio)==null?void 0:s.aspect};case"heightAndAspectRatio":return{height:(r=this.heightAndAspectRatio)==null?void 0:r.size.toJSONObject(),aspect:(i=this.heightAndAspectRatio)==null?void 0:i.aspect};case"shorterDimensionAndAspectRatio":return{shorterDimension:(a=this.shorterDimensionAndAspectRatio)==null?void 0:a.size.toJSONObject(),aspect:(o=this.shorterDimensionAndAspectRatio)==null?void 0:o.aspect};default:return{width:(c=this.widthAndHeight)==null?void 0:c.width.toJSONObject(),height:(d=this.widthAndHeight)==null?void 0:d.height.toJSONObject()}}}},s0e=class PN{constructor(e,s,r,i){this._left=e,this._top=s,this._right=r,this._bottom=i}static get zero(){return new PN(new hr(0,"pixel"),new hr(0,"pixel"),new hr(0,"pixel"),new hr(0,"pixel"))}get left(){return this._left}get right(){return this._right}get top(){return this._top}get bottom(){return this._bottom}static fromJSON(e){return new PN(hr.fromJSON(e.left),hr.fromJSON(e.top),hr.fromJSON(e.right),hr.fromJSON(e.bottom))}toJSONObject(){return{left:this.left.toJSONObject(),right:this.right.toJSONObject(),top:this.top.toJSONObject(),bottom:this.bottom.toJSONObject()}}},cn=class Fa{constructor(e){this.hexadecimalString=e}get redComponent(){return this.hexadecimalString.slice(0,2)}get greenComponent(){return this.hexadecimalString.slice(2,4)}get blueComponent(){return this.hexadecimalString.slice(4,6)}get alphaComponent(){return this.hexadecimalString.slice(6,8)}get red(){return Fa.hexToNumber(this.redComponent)}get green(){return Fa.hexToNumber(this.greenComponent)}get blue(){return Fa.hexToNumber(this.blueComponent)}get alpha(){return Fa.hexToNumber(this.alphaComponent)}static fromHex(e){return new Fa(Fa.normalizeHex(e))}static fromRGBA(e,s,r,i=1){let a=[e,s,r,this.normalizeAlpha(i)].reduce((o,c)=>o+this.numberToHex(c),"");return new Fa(a)}static areEquals(e,s){return e==null||s==null?!1:e.hexadecimalString===s.hexadecimalString}static hexToNumber(e){return Number.parseInt(e,16)}static fromJSON(e){return Fa.fromHex(e)}static numberToHex(e){let s=Math.round(e).toString(16);return s.length===1&&(s=`0${s}`),s.toUpperCase()}static normalizeHex(e){let s=e;return s.startsWith("#")&&(s=s.slice(1)),s.length<6&&(s=[...s].map(r=>r+r).join("")),s.length===6&&(s+="FF"),s.toUpperCase()}static normalizeAlpha(e){return e>0&&e<=1?255*e:e}withAlpha(e){let s=this.hexadecimalString.slice(0,6)+Fa.numberToHex(Fa.normalizeAlpha(e));return Fa.fromHex(s)}toJSON(){return this.hexadecimalString}},r0e=(t=>(t.Unknown="unknown",t.Portrait="portrait",t.PortraitUpsideDown="portraitUpsideDown",t.LandscapeRight="landscapeRight",t.LandscapeLeft="landscapeLeft",t))(r0e||{}),i0e=(t=>(t.None="none",t.Horizontal="horizontal",t.LeftToRight="leftToRight",t.RightToLeft="rightToLeft",t.Vertical="vertical",t.TopToBottom="topToBottom",t.BottomToTop="bottomToTop",t))(i0e||{}),a0e=(t=>(t.TopLeft="topLeft",t.TopCenter="topCenter",t.TopRight="topRight",t.CenterLeft="centerLeft",t.Center="center",t.CenterRight="centerRight",t.BottomLeft="bottomLeft",t.BottomCenter="bottomCenter",t.BottomRight="bottomRight",t))(a0e||{}),o0e=class{static fromJSON(e){return(e==null?void 0:e.type)==="tapToFocus"?new Xxe:null}},l0e=class{static fromJSON(e){return(e==null?void 0:e.type)==="swipeToZoom"?new Jxe:null}};function ij(t){let e="document"in globalThis?globalThis.document:void 0,s=e==null?void 0:e.createRange().createContextualFragment(t);if(s)return s.firstElementChild}function c0e(t){var e;return{Camera:{Settings:{preferredResolution:t.Camera.Settings.preferredResolution,zoomFactor:t.Camera.Settings.zoomFactor,zoomGestureZoomFactor:t.Camera.Settings.zoomGestureZoomFactor,focusGestureStrategy:t.Camera.Settings.focusGestureStrategy},defaultPosition:(e=t.Camera.defaultPosition)!=null?e:null,availablePositions:t.Camera.availablePositions},SingleImageUploader:{Settings:{iconElement:ij(t.SingleImageUploader.Settings.iconElement),informationElement:ij(t.SingleImageUploader.Settings.informationElement),buttonElement:ij(t.SingleImageUploader.Settings.buttonElement),containerStyle:t.SingleImageUploader.Settings.containerStyle,iconStyle:t.SingleImageUploader.Settings.iconStyle,informationStyle:t.SingleImageUploader.Settings.informationStyle,buttonStyle:t.SingleImageUploader.Settings.buttonStyle,onlyCameraCapture:t.SingleImageUploader.Settings.onlyCameraCapture}},DataCaptureView:{scanAreaMargins:s0e.fromJSON(JSON.parse(t.DataCaptureView.scanAreaMargins)),pointOfInterest:hT.fromJSON(JSON.parse(t.DataCaptureView.pointOfInterest)),logoStyle:t.DataCaptureView.logoStyle,logoAnchor:t.DataCaptureView.logoAnchor,logoOffset:hT.fromJSON(JSON.parse(t.DataCaptureView.logoOffset)),focusGesture:o0e.fromJSON(JSON.parse(t.DataCaptureView.focusGesture)),zoomGesture:l0e.fromJSON(JSON.parse(t.DataCaptureView.zoomGesture)),cameraRecoveryText:t.DataCaptureView.cameraRecoveryText},RectangularViewfinder:Object.keys(t.RectangularViewfinder.styles).reduce((s,r)=>{let i=t.RectangularViewfinder.styles[r];return s.styles[r]={size:n0e.fromJSON(JSON.parse(i.size)),color:cn.fromJSON(i.color),style:i.style,lineStyle:i.lineStyle,dimming:Number.parseFloat(i.dimming.toString()),animation:Zxe.fromJSON(JSON.parse(i.animation))},s},{defaultStyle:t.RectangularViewfinder.defaultStyle,styles:{}}),AimerViewfinder:{frameColor:cn.fromJSON(t.AimerViewfinder.frameColor),dotColor:cn.fromJSON(t.AimerViewfinder.dotColor)},Brush:{fillColor:cn.fromJSON(t.Brush.fillColor),strokeColor:cn.fromJSON(t.Brush.strokeColor),strokeWidth:t.Brush.strokeWidth},Feedback:{defaultVibrationPattern:t.Feedback.defaultVibrationPattern}}}var fi=c0e({DataCaptureView:{focusGesture:"null",zoomGesture:"null",logoAnchor:"bottomRight",logoStyle:"extended",logoOffset:JSON.stringify({x:{value:0,unit:"fraction"},y:{value:0,unit:"fraction"}}),pointOfInterest:JSON.stringify({x:{value:.5,unit:"fraction"},y:{value:.5,unit:"fraction"}}),scanAreaMargins:JSON.stringify({left:{value:0,unit:"fraction"},right:{value:0,unit:"fraction"},top:{value:0,unit:"fraction"},bottom:{value:0,unit:"fraction"}}),cameraRecoveryText:"(This text is updated from translations)"},Camera:{Settings:{preferredResolution:"auto",zoomFactor:1,focusGestureStrategy:"manualUntilCapture",zoomGestureZoomFactor:2},defaultPosition:"worldFacing",availablePositions:["worldFacing","userFacing"]},SingleImageUploader:{Settings:{iconElement:atob(Gxe),informationElement:"<p data-scandit-default>(This text is updated from translations)</p>",buttonElement:"<div data-scandit-default>(This text is updated from translations)</div>",containerStyle:{backgroundColor:"#FFFFFF"},iconStyle:{fill:"#121619"},informationStyle:{color:"#121619",marginBottom:"2em"},buttonStyle:{color:"#FFFFFF",backgroundColor:"#121619",fontWeight:"bold",padding:"1.25em",width:"12em",textAlign:"center",textTransform:"uppercase"},onlyCameraCapture:!1}},AimerViewfinder:{frameColor:"#FFFFFFFF",dotColor:"#FFFFFFCC"},RectangularViewfinder:{defaultStyle:"rounded",styles:{rounded:{size:JSON.stringify({aspect:1,shorterDimension:{unit:"fraction",value:.75}}),color:"#FFFFFFFF",style:"rounded",lineStyle:"light",dimming:0,animation:JSON.stringify({looping:!0})},square:{size:JSON.stringify({aspect:1,shorterDimension:{unit:"fraction",value:.75}}),color:"#FFFFFFFF",style:"square",lineStyle:"light",dimming:0,animation:JSON.stringify({looping:!0})}}},Brush:{fillColor:"#00000000",strokeColor:"#00000000",strokeWidth:0},Feedback:{defaultVibrationPattern:[300]}}),Ir={CONTAINER_CLASS_NAME:"scandit-container",PAINTBOARDS_CONTAINER_CLASS_NAME:"scandit-paintboards",PAINTBOARD_CLASS_NAME:"scandit-paintboard",PAINTBOARD_CLASS_NAME_STATE_ON:"scandit-paintboard--camera-on",CONTROLS_CLASS_NAME:"scandit-controls",CONTROL_WIDGET_CLASS_NAME:"scandit-control-widget",MIRRORED_CLASS_NAME:"scandit-mirrored",CAMERA_RECOVERY_CLASS_NAME:"scandit-camera-recovery",ERROR_CLASS_NAME:"scandit-error",HINT_CONTAINER_CLASS_NAME:"scandit-hint-container",HINT_CLASS_NAME:"scandit-hint",SINGLE_IMAGE_UPLOADER_CONTAINER_CLASS_NAME:"scandit-single-image-uploader-container",CANVAS_VIDEO_PREVIEW_CLASS_NAME:"scandit-canvas-video-preview",TORCH_SWITCH_CONTROL_CLASS_NAME:"torch",CAMERA_SWITCH_CONTROL_CLASS_NAME:"camera",CAMERA_FOV_SWITCH_CONTROL_CLASS_NAME:"camera-fov",SHUTTER_BUTTON_CONTROL_CLASS_NAME:"shutter",FROZEN_FRAME:"frozen-frame"},Tt={CONTAINER_CLASS_NAME:Ir.CONTAINER_CLASS_NAME,PAINTBOARD_CLASS_NAME:Ir.PAINTBOARD_CLASS_NAME,PAINTBOARD_CLASS_NAME_STATE_ON:Ir.PAINTBOARD_CLASS_NAME_STATE_ON,CONTROLS_CLASS_NAME:Ir.CONTROLS_CLASS_NAME,CONTROL_WIDGET_CLASS_NAME:Ir.CONTROL_WIDGET_CLASS_NAME,MIRRORED_CLASS_NAME:Ir.MIRRORED_CLASS_NAME,CAMERA_RECOVERY_CLASS_NAME:Ir.CAMERA_RECOVERY_CLASS_NAME,ERROR_CLASS_NAME:Ir.ERROR_CLASS_NAME,HINT_CONTAINER_CLASS_NAME:Ir.HINT_CONTAINER_CLASS_NAME,HINT_CLASS_NAME:Ir.HINT_CLASS_NAME,PAINTBOARDS_CONTAINER_CLASS_NAME:Ir.PAINTBOARDS_CONTAINER_CLASS_NAME,SINGLE_IMAGE_UPLOADER_CONTAINER_CLASS_NAME:Ir.SINGLE_IMAGE_UPLOADER_CONTAINER_CLASS_NAME,CANVAS_VIDEO_PREVIEW_CLASS_NAME:Ir.CANVAS_VIDEO_PREVIEW_CLASS_NAME,TORCH_SWITCH_CONTROL_CLASS_NAME:Ir.TORCH_SWITCH_CONTROL_CLASS_NAME,CAMERA_SWITCH_CONTROL_CLASS_NAME:Ir.CAMERA_SWITCH_CONTROL_CLASS_NAME,CAMERA_FOV_SWITCH_CONTROL_CLASS_NAME:Ir.CAMERA_FOV_SWITCH_CONTROL_CLASS_NAME,SHUTTER_BUTTON_CONTROL_CLASS_NAME:Ir.SHUTTER_BUTTON_CONTROL_CLASS_NAME,FROZEN_FRAME:Ir.FROZEN_FRAME},d0e=class{constructor(){this.type="none"}toJSONObject(){return{type:this.type}}},u0e=new d0e;async function h0e(t,e){let s=document.createElement("canvas");s.width=this.width,s.height=this.height;let r=s.getContext("2d");if(!r)throw new Error("Could not get 2d context from an HTMLCanvasElement");let i=await this.getData();return i==null?null:(r.putImageData(new ImageData(i,this.width,this.height),0,0),new Promise((a,o)=>{s.toBlob(c=>{if(s=null,r=null,c===null){o(new Error("Could not create Blob object from canvas"));return}a(c)},t,e)}))}function m0e(t,e){let s={width:t.width,height:t.height,isFrameSourceMirrored:t.isFrameSourceMirrored,getData:async()=>(await e.requestFrameData(t.frameId)).data};return s.toBlob=h0e.bind(s),s}var f0e={type:"none"},p0e=cn.fromRGBA(46,193,206,1),g0e=cn.fromRGBA(98,209,218,1),x0e=cn.fromRGBA(151,224,230,1);cn.fromRGBA(203,240,243,1);var v0e=cn.fromRGBA(18,22,25,1),y0e=cn.fromRGBA(218,225,231,1);cn.fromRGBA(40,211,128,1);cn.fromRGBA(83,220,153,1);cn.fromRGBA(126,229,179,1);cn.fromRGBA(169,237,204,1);cn.fromRGBA(212,246,230,1);cn.fromRGBA(251,192,44,1);cn.fromRGBA(252,205,86,1);cn.fromRGBA(253,217,128,1);cn.fromRGBA(254,230,171,1);cn.fromRGBA(254,242,213,1);cn.fromRGBA(250,68,70,1);cn.fromRGBA(251,105,107,1);cn.fromRGBA(252,143,144,1);cn.fromRGBA(253,180,181,1);cn.fromRGBA(254,218,218,1);cn.fromRGBA(10,51,144,1);var w0e="HTMLElement"in globalThis?globalThis.HTMLElement:class{constructor(){}},Pm=class extends w0e{};function md(t){if("customElements"in globalThis)for(let[e,s]of Object.entries(t))customElements.get(e)||customElements.define(e,s)}function fd(t,...e){return t.reduce((s,r,i)=>{var a;let o=(a=e.at(i))!=null?a:"";return s+r+String(o)},"")}function Go(t,...e){let s=document.createElement("style");return s.innerHTML=t.reduce((r,i,a)=>{var o;let c=(o=e.at(a))!=null?o:"";return r+i+String(c)},""),s}var xf="inline-style",RN=class d0 extends Pm{get fill(){var e;return(e=this.getAttribute("fill"))!=null?e:"black"}set fill(e){this.setAttribute("fill",e)}get size(){var e;return Number((e=this.getAttribute("size"))!=null?e:"32")}set size(e){this.setAttribute("size",e.toString())}get[xf](){return this.getAttribute(xf)}set[xf](e){e==null?this.removeAttribute(xf):this.setAttribute(xf,e)}static create(){return md({[d0.tag]:d0}),document.createElement(d0.tag)}render(){return fd`<div></div>`}heightForViewbox(e,s){return this.size*this.aspectRatioForViewbox(e,s)}aspectRatioForViewbox(e,s){return s/e}connectedCallback(){this.innerHTML=this.render()}attributeChangedCallback(e,s,r){r!==s&&(this.innerHTML=this.render())}};RN.tag="scandit-svg-icon",RN.observedAttributes=["fill","size"];var A$=RN,E$=class kf extends A${static create(){return document.createElement(kf.tag)}static register(){md({[kf.tag]:kf})}render(){return fd`
      <style>
        ${kf.tag} {
          display: flex;
        }
      </style>
      <svg width="${this.size}" height="${this.heightForViewbox(24,24)}" viewBox="0 0 24 24" fill="none">
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12ZM22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM16.7337 10.4937C17.0888 10.152 17.0888 9.59799 16.7337 9.25628C16.3787 8.91457 15.8031 8.91457 15.4481 9.25628L10.6364 13.8876L8.55192 11.8813C8.19689 11.5396 7.62129 11.5396 7.26627 11.8813C6.91124 12.223 6.91124 12.777 7.26627 13.1187L9.99354 15.7437C10.3486 16.0854 10.9242 16.0854 11.2792 15.7437L16.7337 10.4937Z"
          fill="${this.fill}"
        />
      </svg>
    `}};E$.tag="scandit-rounded-check-icon";var _$=E$;_$.register();var I$=class Pf extends A${static create(){return document.createElement(Pf.tag)}static register(){md({[Pf.tag]:Pf})}render(){return fd`
      <style>
        ${Pf.tag} {
          display: flex;
        }
      </style>
      <svg width="${this.size}" height="${this.heightForViewbox(24,24)}" viewBox="0 0 24 24" fill="none">
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12ZM22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM12 7C11.4477 7 11 7.44772 11 8V13C11 13.5523 11.4477 14 12 14C12.5523 14 13 13.5523 13 13V8C13 7.44772 12.5523 7 12 7ZM12 17C12.5523 17 13 16.5523 13 16C13 15.4477 12.5523 15 12 15C11.4477 15 11 15.4477 11 16C11 16.5523 11.4477 17 12 17Z"
          fill="${this.fill}"
        />
      </svg>
    `}};I$.tag="scandit-rounded-exclamation-mark-icon";var T$=I$;T$.register();var j0e=(t=>(t.DidShow="didshow",t.DidHide="didhide",t.WillShow="willshow",t))(j0e||{}),aj="--text-size",oj="--text-color",vf="--text-alignment",lj="--text-weight",cj="--line-height",dj="--background-color",uj="--corner-radius",hj="--max-lines",mT="ease-in-out",M$=class Rf extends Pm{constructor(){super(),this.toast=null,this._hintStyle=null,this.currentAnimation=null,this.animationDuration=250;let e=this.attachShadow({mode:"open"});this._exclamationIcon=T$.create(),this._checkIcon=_$.create(),this._exclamationIcon.size=24,this._checkIcon.size=24,e.innerHTML=fd`
      <div class="toast">
        <slot name="first-child"></slot>
        <div class="left">
          <slot name="icon"></slot>
        </div>
        <p class="middle">
          <slot></slot>
        </p>
      </div>
    `,e.append(Rf.createStyleElement().cloneNode(!0)),this.toast=e.querySelector(".toast")}static createStyleElement(){return Go`:host{display:inline-block;font-family:SF Pro Display,sans-serif}:host([hidden]){display:none}.toast{${aj}:1rem;${oj}:#000;${lj}:400;${vf}:${"center"};${cj}:1.5rem;${dj}:#fff;${uj}:.25rem;${hj}:2;align-items:flex-start;background-color:var(${dj});border-radius:var(${uj});color:var(${oj});display:flex;flex-direction:row;font-size:var(${aj});font-weight:var(${lj});gap:.625rem;justify-content:var(${vf});line-height:var(${cj});padding:1rem}:host([direction=column]) .toast{align-items:center;flex-direction:column}:host([direction=row]) .toast{align-items:center;flex-direction:row}.toast .left{align-self:flex-start;display:flex}.toast.icon-${"none"} .left{display:none}.toast p.middle{display:inline-block;display:-webkit-box;margin:0;padding:0;text-align:var(${vf});-webkit-line-clamp:var(${hj});-webkit-box-orient:vertical;align-self:center;overflow:hidden;text-shadow:0 1px 2px #${v0e.withAlpha(.3).toJSON()}}p.middle{text-align:var(${vf})}`}get hintStyle(){return this._hintStyle}set hintStyle(e){this._hintStyle=e,this.render()}get showAnimation(){return new Animation(new KeyframeEffect(this,[{opacity:0},{opacity:1}],{duration:this.animationDuration,fill:"both",easing:mT}))}get hideAnimation(){return new Animation(new KeyframeEffect(this,[{opacity:1},{opacity:0}],{duration:this.animationDuration,fill:"both",easing:mT}))}static create(){return document.createElement(Rf.tag)}static register(){md({[Rf.tag]:Rf})}async show(){return this.toggle(!0)}async hide(){return this.toggle(!1)}connectedCallback(){this.render()}async toggle(e){var s,r;if(this.currentAnimation==null){this.animationDuration=(r=(s=this.hintStyle)==null?void 0:s.isAnimatedToView)==null||r?250:0,this.currentAnimation=e?this.showAnimation:this.hideAnimation,e&&this.dispatchEvent(new CustomEvent("willshow",{bubbles:!0})),this.currentAnimation.play();try{await this.currentAnimation.finished,this.dispatchEvent(new CustomEvent(e?"didshow":"didhide",{bubbles:!0,detail:{target:this}}))}catch{}finally{this.currentAnimation=null}}}render(){var e;!this.toast||!this.hintStyle||(this.toast.className="toast",this.toast.style.setProperty(aj,`${this.hintStyle.textSize}px`),this.toast.style.setProperty(oj,`#${this.hintStyle.textColor}`),this.toast.style.setProperty(lj,this.hintStyle.textWeight.toString()),this.toast.style.setProperty(vf,this.hintStyle.textAlignment),this.toast.style.setProperty(cj,`${this.hintStyle.lineHeight/14}`),this.toast.style.setProperty(dj,`#${this.hintStyle.backgroundColor}`),this.toast.style.setProperty(uj,`${this.hintStyle.cornerRadius/10}rem`),this.toast.style.setProperty(hj,this.hintStyle.maxLines.toString()),this.toast.classList.toggle("icon-none",this.hintStyle.hintIcon==="none"),this.hintStyle.hintIcon==="check"?(this._checkIcon.setAttribute("slot","icon"),this.append(this._checkIcon)):this.hintStyle.hintIcon==="exclamationMark"&&(this._exclamationIcon.setAttribute("slot","icon"),this.append(this._exclamationIcon)),(e=this.querySelector("[slot=icon]"))==null||e.setAttribute("fill",`#${this.hintStyle.iconColor}`))}};M$.tag="scandit-toast-hint";var Sd=M$;Sd.register();var b0e="scandit-arrows-up",D$=class Ad extends Pm{constructor(){super();let e=this.attachShadow({mode:"open"});e.innerHTML=this.render(),e.prepend(Ad.createStyleElement().cloneNode(!0))}static createStyleElement(){return Go`${Ad.tag}{display:flex}${Ad.tag}[hidden]{display:none}.arrow{animation:blink 1.5s infinite;animation-duration:2s}.arrow-1{animation-delay:0s}.arrow-2{animation-delay:.5s}.arrow-3{animation-delay:1s}@keyframes blink{0%,to{opacity:0}50%{opacity:1}}`}static create(){return document.createElement(Ad.tag)}static register(){md({[Ad.tag]:Ad})}render(){return fd`
      <svg width="120" height="45" viewBox="0 0 120 45" fill="none">
        <path
          class="arrow arrow-1"
          opacity="0.8"
          d="M105.561 45C108.718 45 109.586 40.6607 106.672 39.4467L61.1539 20.4808C60.4154 20.1731 59.5846 20.1731 58.8462 20.4808L13.328 39.4467C10.4143 40.6607 11.2822 45 14.4387 45C14.8094 45 15.1767 44.9286 15.5205 44.7897L58.8762 27.2723C59.5971 26.981 60.4029 26.981 61.1239 27.2723L104.48 44.7897C104.823 44.9286 105.191 45 105.561 45Z"
          fill="white"
        ></path>
        <path
          class="arrow arrow-2"
          opacity="0.6"
          d="M94.6148 26C96.8169 26 97.4022 22.9609 95.3576 22.143L60.7428 8.29711C60.266 8.10638 59.734 8.10638 59.2572 8.29711L24.6424 22.143C22.5978 22.9609 23.1831 26 25.3852 26H25.6254C25.873 26 26.1184 25.954 26.3492 25.8644L59.2762 13.081C59.7418 12.9002 60.2582 12.9002 60.7238 13.081L93.6508 25.8644C93.8816 25.954 94.127 26 94.3746 26H94.6148Z"
          fill="white"
        ></path>
        <path
          class="arrow arrow-3"
          opacity="0.4"
          d="M81.2078 10C82.8264 10 83.1945 7.7315 81.659 7.21967L60.6325 0.210819C60.2219 0.073974 59.7781 0.0739735 59.3675 0.210818L38.341 7.21967C36.8055 7.73149 37.1736 10 38.7922 10C38.93 10 39.0671 9.98003 39.1992 9.94072L59.4295 3.91979C59.8018 3.809 60.1982 3.809 60.5705 3.91979L80.8008 9.94072C80.9329 9.98003 81.07 10 81.2078 10Z"
          fill="white"
        ></path>
      </svg>
    `}};D$.tag=b0e;var k$=D$;k$.register();var Kv="orientationchange",mj={"portrait-primary":{type:"portrait-primary",angle:0,value:"portrait"},"portrait-secondary":{type:"portrait-secondary",angle:180,value:"portraitUpsideDown"},"landscape-primary":{type:"landscape-primary",angle:90,value:"landscapeLeft"},"landscape-secondary":{type:"landscape-secondary",angle:270,value:"landscapeRight"}},P$=class extends EventTarget{constructor(){super(...arguments),this.orientation={value:"portrait",type:"portrait-primary",angle:0},this.landscapeOrientationMediaQuery=matchMedia("(orientation: landscape)"),this.screenOrientationChangeListener=this.onScreenOrientationChange.bind(this),this.landscapeOrientationMediaQueryChangeListener=this.onLandscapeOrientationMediaQueryChange.bind(this)}register(){this.isScreenOrientationApiSupported()?(screen.orientation.addEventListener("change",this.screenOrientationChangeListener),this.onScreenOrientationChange()):(this.landscapeOrientationMediaQuery.addEventListener("change",this.landscapeOrientationMediaQueryChangeListener),this.onLandscapeOrientationMediaQueryChange(new MediaQueryListEvent("change",{matches:this.landscapeOrientationMediaQuery.matches})))}unregister(){this.isScreenOrientationApiSupported()?screen.orientation.removeEventListener("change",this.screenOrientationChangeListener):this.landscapeOrientationMediaQuery.removeEventListener("change",this.landscapeOrientationMediaQueryChangeListener)}isScreenOrientationApiSupported(){return"screen"in window&&"orientation"in screen&&typeof screen.orientation.addEventListener=="function"}dispatchOrientationChangeEvent(e){this.dispatchEvent(new CustomEvent(Kv,{detail:e}))}onScreenOrientationChange(){this.orientation=mj[screen.orientation.type],this.dispatchOrientationChangeEvent(this.orientation)}onLandscapeOrientationMediaQueryChange(e){let s=e;this.orientation=s.matches?mj["landscape-primary"]:mj["portrait-primary"],this.dispatchOrientationChangeEvent(this.orientation)}};function R$(t,e=300){let s=null;return function(...r){s!=null&&clearTimeout(s),s=setTimeout(()=>{t.apply(this,r),s=null},e)}}var Ou="--view-finder-top",Fu="--view-finder-bottom",Tx="--hint-anchor-offset",fT="--max-width-fraction",pT="--horizontal-margin",fj="--max-width-ratio-adjust",N0e=(t=>(t.Update="hintpresenterupdate",t))(N0e||{});function yf(t,e=100){return typeof t=="string"?t.slice(0,e):""}var L$=class Lf extends Pm{constructor(){super(),this.onDidToastHideHandler=this.onDidToastHide.bind(this),this.orientationObserver=new P$,this.onOrientationChangeHandler=R$(this.onOrientationChange.bind(this),200);let e=this.attachShadow({mode:"open"});e.innerHTML=fd`
      <div id="root">
        <slot></slot>
      </div>
    `,e.append(Lf.createStyleElement().cloneNode(!0)),this.root=e.querySelector("#root")}static createStyleElement(){return Go`:host{pointer-events:none}:host #root{inset:0;position:absolute;width:100%;${Ou}:0;${Fu}:0;${fj}:1;z-index:1}::slotted(${Sd.tag}){left:50%;max-width:calc(var(${fT})*var(${fj})*100% - var(${pT}));position:absolute;transform:translate3d(-50%,0,0);width:100%}::slotted(${Sd.tag}.${"aboveViewFinder"}){transform:translate3d(-50%,calc(-100% + var(${Ou}) - var(${Tx})),0)}::slotted(${Sd.tag}.${"belowViewFinder"}){transform:translate3d(-50%,calc(var(${Fu}) + var(${Tx})),0)}::slotted(${Sd.tag}.${"top"}){top:calc(var(${Tx}))}::slotted(${Sd.tag}.fitToText){width:fit-content}`}static register(){md({[Lf.tag]:Lf})}static create(){return document.createElement(Lf.tag)}connectedCallback(){this.orientationObserver.addEventListener(Kv,this.onOrientationChangeHandler),this.orientationObserver.register(),this.addEventListener("didhide",this.onDidToastHideHandler),this._viewFinderRect==null&&(this.root.style.setProperty(Ou,`${this.root.clientHeight/2}px`),this.root.style.setProperty(Fu,`${this.root.clientHeight/2+1}px`))}disconnectedCallback(){this.removeEventListener("didhide",this.onDidToastHideHandler)}setViewFinderRect(e){if(e===null){this.root.style.removeProperty(Ou),this.root.style.removeProperty(Fu);return}this._viewFinderRect=e;let{origin:{y:s},size:{height:r}}=this._viewFinderRect;this.root.style.setProperty(Ou,`${s}px`),this.root.style.setProperty(Fu,`${s+r}px`)}handleMessage(e){let{type:s}=e;switch(s){case"showToast":{this.showToast(e.payload);break}case"hideToast":{this.hideToast(e.payload);break}case"showGuidance":{this.showGuidance(e.payload);break}case"hideGuidance":{this.hideGuidance(e.payload);break}case"startUpdateTimer":{this.startUpdateTimer(e.payload.duration.value);break}case"stopUpdateTimer":{this.stopUpdateTimer();break}}}onDidToastHide(e){e.stopPropagation(),e.detail.target.remove()}async showToast(e){let s=this.idFromHint(e),r=this.querySelector(`#${s}`);if(r||(r=Sd.create(),r.id=s,this.append(r)),r.textContent=e.text,r.hintStyle=e.hintStyle,r.className="",r.style.setProperty(Tx,`${r.hintStyle.hintAnchorOffset/16}rem`),r.style.setProperty(fT,e.hintStyle.maxWidthFraction.toString()),r.style.setProperty(pT,`${e.hintStyle.horizontalMargin/16}rem`),r.classList.add(e.hintStyle.hintAnchor),r.classList.toggle("fitToText",e.hintStyle.fitToText),e.tag==="MoveCloserGuidance"){let i=k$.create();i.setAttribute("slot","first-child"),r.append(i),r.setAttribute("direction","column")}return r.show()}async hideToast(e){let s=this.querySelector(`#${this.idFromHint(e)}`);if(s!=null)return s.hide()}async showGuidance(e){return this.showToast(e)}async hideGuidance(e){return this.hideToast(e)}startUpdateTimer(e){this.intervalId=setInterval(()=>{this.dispatchEvent(new CustomEvent("hintpresenterupdate"))},e)}stopUpdateTimer(){clearInterval(this.intervalId)}idFromHint(e){var s;return btoa([yf(e.hintStyle.textColor),yf(e.hintStyle.backgroundColor),yf(e.hintStyle.hintAnchor),yf((s=e.tag)!=null?s:""),yf(e.hintStyle.textAlignment)].join("-")).split("+").join("-").split("/").join("_").replace(/=+$/,"")}onOrientationChange(e){let s=1;s=e.detail.value==="landscapeLeft"||e.detail.value==="landscapeRight"?window.innerHeight/window.innerWidth:1,this.root.style.setProperty(fj,s.toString()),this._viewFinderRect==null&&(this.root.style.setProperty(Ou,`${this.root.clientHeight/2}px`),this.root.style.setProperty(Fu,`${this.root.clientHeight/2+1}px`))}};L$.tag="scandit-hints";var Of=L$;Of.register();var O$="scandit-progress-bar",pj="aria-valuenow",C0e="aria-valuemin",S0e="aria-valuemax",F$=class u0 extends Pm{constructor(){super();let e=this.attachShadow({mode:"open"});e.innerHTML=fd`
      <div id="scandit-progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" />
    `,e.append(u0.createStyleElement().cloneNode(!0)),this.progress=e.querySelector("#scandit-progress")}static get observedAttributes(){return["value","min","max"]}static createStyleElement(){return Go`:host{display:inline-block;--indeterminate-bubble-width:35%;--accent-color:#${g0e.toJSON()};--start-gradient-color:#${p0e.toJSON()};--end-gradient-color:#${x0e.toJSON()};--secondary-color:#${y0e.toJSON()};width:100%}:host [role=progressbar]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:.5rem;overflow:hidden;position:relative}:host [role=progressbar]:after,:host [role=progressbar]:before{background:var(--accent-color);border-radius:.5rem;content:" ";height:.5rem;left:0;position:absolute;top:0}:host([variant=gradient]) [role=progressbar]:after,:host([variant=gradient]) [role=progressbar]:before{background:linear-gradient(90deg,var(--start-gradient-color) 0,var(--end-gradient-color) 100%)}:host(:focus-visible){border-radius:.5rem;outline-color:var(--accent-color);outline-offset:5px}:host [role=progressbar]:not([aria-valuenow]):after{animation:indeterminate-progress-bar 2.5s ease infinite;width:var(--indeterminate-bubble-width);z-index:1}:host [role=progressbar][aria-valuenow]:after{animation:none;width:0}:host [role=progressbar][aria-valuenow]:before{background-color:var(--accent-color);border-radius:.5rem;transition:width .3s linear;width:calc(var(--aria-valuenow)*1%)}:host [role=progressbar]{background-color:var(--secondary-color);border-radius:.5rem}@keyframes indeterminate-progress-bar{0%{left:0}50%{left:calc(100% - var(--indeterminate-bubble-width))}}`}get min(){var e;let s=(e=this.getAttribute("min"))!=null?e:0;return Number(s)}get max(){var e;let s=(e=this.getAttribute("max"))!=null?e:1;return Number(s)}set max(e){e!==null&&this.setAttribute("max",String(e))}get value(){let e=this.getAttribute("value");return e==null||e===""?null:Number(e)}set value(e){if(e==null){this.removeAttribute("value");return}e>=this.min&&e<=this.max&&this.setAttribute("value",String(e))}static create(){return document.createElement(O$)}static register(){md({[u0.tag]:u0})}attributeChangedCallback(){this.update()}connectedCallback(){this.update()}update(){let{min:e,max:s,value:r,progress:i}=this;if(i==null||i.setAttribute(C0e,e.toString()),i==null||i.setAttribute(S0e,s.toString()),r==null){i==null||i.removeAttribute(pj),i==null||i.removeAttribute("style");return}if(r>=e&&r<=s){let a=(r-e)/(s-e)*100,o=String(a);i==null||i.setAttribute(pj,o),i==null||i.setAttribute("style",`--${pj}: ${o}`)}}};F$.tag=O$;var LN=F$;LN.register();var Mh=class Ff{constructor(){this.translations=new Map,this.subscribers=new Set}static getInstance(){return Ff.instance==null&&(Ff.instance=new Ff),Ff.instance}get(e){var s;return(s=this.translations.get(e))!=null?s:""}getAll(){return Object.fromEntries(this.translations.entries())}update(e){this.translations=new Map(Object.entries({...Object.fromEntries(this.translations),...e}));let s=this.getAll();for(let r of this.subscribers)r(s)}updateIfMissing(e){for(let[r,i]of Object.entries(e))this.translations.has(r)||this.translations.set(r,i);let s=this.getAll();for(let r of this.subscribers)r(s)}subscribe(e){return this.subscribers.add(e),e(this.getAll()),{cancel:()=>this.subscribers.delete(e)}}},B$="scandit-loading-overlay",z$=class h0 extends Pm{constructor(){super(),this._progressBar=null,this._label=null;let e=this.attachShadow({mode:"open"});e.innerHTML=fd`
      <div class="loading-overlay">
        <label for="scandit-progress" class="message">Loading...</label>
        <scandit-progress-bar id="scandit-progress" min="0" max="100"></scandit-progress-bar>
      </div>
    `,e.append(h0.createStyleElement().cloneNode(!0))}set progress(e){this._progressBar&&(this._progressBar.value=e)}set message(e){this._label&&(this._label.textContent=e)}get message(){var e,s;return(s=(e=this._label)==null?void 0:e.textContent)!=null?s:""}static create(){return document.createElement(h0.tag)}static register(){md({[B$]:h0})}static createStyleElement(){return Go`@media (prefers-color-scheme:dark){.loading-overlay{--foreground-color:#fff;--background-color:#000}}@media (prefers-color-scheme:light){.loading-overlay{--foreground-color:#000;--background-color:#fff}}${LN.tag}{max-width:15rem}.loading-overlay{align-items:center;background-color:var(--background-color);display:flex;flex-direction:column;height:100%;justify-content:center;position:absolute;width:100%;z-index:1}:host([hidden]){display:none}.loading-overlay .message{color:var(--foreground-color);font-family:Open Sans,sans-serif;margin-bottom:1rem;text-align:center}`}connectedCallback(){var e,s;this._progressBar=(e=this.shadowRoot)==null?void 0:e.querySelector(LN.tag),this._label=(s=this.shadowRoot)==null?void 0:s.querySelector("label"),this.message=Mh.getInstance().get("core.view.loading")}show(){this.removeAttribute("hidden")}hide(){this.setAttribute("hidden","")}};z$.tag=B$;var V$=z$;V$.register();var Vu={SINGLE_IMAGE_UPLOADER_CONTAINER:"scandit-single-image-uploader-container"},Mx={SINGLE_IMAGE_UPLOADER_CONTAINER_STYLE:{backgroundColor:"#FFFFFF"},SINGLE_IMAGE_UPLOADER_ICON_STYLE:{fill:"#121619"},SINGLE_IMAGE_UPLOADER_INFORMATION_STYLE:{color:"#121619",marginBottom:"2em"},SINGLE_IMAGE_UPLOADER_BUTTON_STYLE:{color:"#FFFFFF",backgroundColor:"#121619",fontWeight:"bold",padding:"1.25em",width:"12em",textAlign:"center",textTransform:"uppercase"}},A0e=`
  .${Vu.SINGLE_IMAGE_UPLOADER_CONTAINER} {
    -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
  }

  .${Vu.SINGLE_IMAGE_UPLOADER_CONTAINER} label {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  .${Vu.SINGLE_IMAGE_UPLOADER_CONTAINER} label input[type="file"] {
    position: absolute;
    top: -9999px;
  }

  .${Vu.SINGLE_IMAGE_UPLOADER_CONTAINER} label div {
    user-select: none;
  }

  .${Vu.SINGLE_IMAGE_UPLOADER_CONTAINER} label input[type="file"]:disabled + div {
    opacity: 0.5;
  }
`,E0e="PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNjQuNjIgMTIuMjIiPjxwYXRoIGQ9Ik0xMDEuNTUuOTFhMi4yOCAyLjI4IDAgMCAwLTEuOTcgMS43MSAyLjcyIDIuNzIgMCAwIDAgMCAxLjExIDIuNDIgMi40MiAwIDAgMCAxLjI0IDEuNTRjLjQ2LjIzLjUuMjQgMS43OS4yNmwxLjE1LjAyLjIyLjFhMS41MSAxLjUxIDAgMCAxIC44IDEuNyAxLjQxIDEuNDEgMCAwIDEtMS4wNiAxLjA4Yy0uMTIuMDMtLjguMDQtMi4wOS4wNGE3Ljc0IDcuNzQgMCAwIDAtMS45My4wNSAzLjE5IDMuMTkgMCAwIDAgLjAxLjc3IDE0LjY5IDE0LjY5IDAgMCAwIDIuMS4wM2wyLjA4LS4wMS4yNi0uMWEyLjI3IDIuMjcgMCAwIDAgMS41LTEuNzQgMi41NSAyLjU1IDAgMCAwLS4wOC0xLjIgMi40IDIuNCAwIDAgMC0xLjE0LTEuMzZjLS40Ni0uMjItLjU1LS4yMy0xLjY1LS4yMy0xLjMyIDAtMS41My0uMDYtMS45NS0uNDdhMS40OCAxLjQ4IDAgMCAxLS40NS0uOTQgMS40MyAxLjQzIDAgMCAxIC45NC0xLjRjLjItLjA4LjItLjA4IDIuMDktLjFsMS45LS4wMXYtLjQxYy4wMi0uMzEgMC0uNDItLjAyLS40NC0uMDYtLjA0LTMuNDMtLjAzLTMuNzQgMFptMjAuMDIuMTFjLS4zNCAxLjI0LTIuMiA4LjI3LTIuMTkgOC4yOGExLjg2IDEuODYgMCAwIDAgLjQ0LjAzYy4zOCAwIC40MyAwIC40NC0uMDZsMS0zLjcyLjk4LTMuNyAxIDMuNjcgMSAzLjc1YzAgLjAzLjA2LjA2LjQ1LjA2aC40NWwtLjAyLS4xYy0uMDQtLjE1LTIuMTMtOC0yLjE5LTguMThsLS4wNS0uMTdoLTEuMjdsLS4wNC4xNFptOC4yMyA0LjA4VjkuM2guODNsLjAyLTMuNzcuMDEtMy43NyAyLjIgMy43NyAyLjIgMy43Ny41Mi4wMS41Mi4wMVY1LjEyTDEzNi4wOS45aC0uODZsLS4wMiAzLjQzLS4wMiAzLjQ0LTIuMDItMy40NEwxMzEuMTYuOWwtLjY5LS4wMWgtLjY4Wk0xNTIuNzkuOTNjLS4wMy4wNy0uMDMgOC4yOCAwIDguMzUuMDEuMDQuMDguMDUuNDMuMDVoLjRWLjg4aC0uNGMtLjM1IDAtLjQyLjAxLS40My4wNVptNS4yMi4zNnYuNDJoMi44NHYzLjhsLjAyIDMuOGguMzhhMS4wNSAxLjA1IDAgMCAwIC40Mi0uMDJjLjA0LS4wNC4wNC0uNjMuMDQtMy44MVYxLjdoMi44Vi44OGgtNi41Wk0xMTEuODUuOTZhMy4yNyAzLjI3IDAgMCAwLTIuMDQgMS42NCA0Ljk4IDQuOTggMCAwIDAtLjU1IDEuNzkgOC4yNCA4LjI0IDAgMCAwIC4wOCAyLjA2IDMuMzUgMy4zNSAwIDAgMCAyLjI4IDIuNzkgNy44NSA3Ljg1IDAgMCAwIDIuMS4wN2gxLjgzbC4wMS0uNDIuMDEtLjQyaC0xLjcxYy0xLjkgMC0xLjk0IDAtMi4zNS0uMjFhMi44NSAyLjg1IDAgMCAxLTEuMzUtMi4xIDcuMTcgNy4xNyAwIDAgMS0uMDMtMS43NyAzLjA4IDMuMDggMCAwIDEgMS43LTIuNTNjLjE4LS4wNy4yMS0uMDcgMS45NC0uMWgxLjc1Vi45MmgtMS43NGExNS45NyAxNS45NyAwIDAgMC0xLjkzLjA0Wm0yOS41NyA0LjE1djQuMmwxLjguMDFhOS41NiA5LjU2IDAgMCAwIDIuNjQtLjEzYzEuNTgtLjQ1IDIuNDktMi4xIDIuNDEtNC4zOGE0LjMxIDQuMzEgMCAwIDAtLjQzLTEuODYgMy43NiAzLjc2IDAgMCAwLTEuODctMS44NGMtLjUtLjE5LS41OC0uMi0yLjY2LS4yaC0xLjl2NC4yWm0zLjc5LTMuM2EyLjgxIDIuODEgMCAwIDEgMi4wNCAyLjA1IDMuNDkgMy40OSAwIDAgMSAuMTYgMS4zNkE0LjQ4IDQuNDggMCAwIDEgMTQ3IDcuMWEyLjIzIDIuMjMgMCAwIDEtMS4wNSAxLjEzYy0uNDUuMjItLjQ2LjIyLTIuMTUuMjRoLTEuNTN2LTYuN2gxLjM2Yy44IDAgMS40NS4wMiAxLjU4LjA0WiIgZmlsbD0iIzEyMTYxOSIgc3Ryb2tlPSIjMTIxNjE5IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iLjIiLz48cGF0aCBkPSJNNS45IDIuOTRoMS4xN2EzLjI3IDMuMjcgMCAwIDAtLjI5LTEuMzJBMi41NyAyLjU3IDAgMCAwIDYuMDUuNyAzIDMgMCAwIDAgNC45OC4xNyA0Ljk2IDQuOTYgMCAwIDAgMy42NSAwYTQuNzYgNC43NiAwIDAgMC0xLjI0LjE3IDMuNDEgMy40MSAwIDAgMC0xLjA4LjQ5IDIuNSAyLjUgMCAwIDAtLjc2Ljg0QTIuNDYgMi40NiAwIDAgMCAuMyAyLjcyYTIuMDMgMi4wMyAwIDAgMCAuMjUgMS4wNiAyLjA2IDIuMDYgMCAwIDAgLjY4LjY5IDMuOTMgMy45MyAwIDAgMCAuOTUuNDNxLjUzLjE2IDEuMDkuMjhsMS4wOC4yNGE0Ljk1IDQuOTUgMCAwIDEgLjk2LjMgMS44NiAxLjg2IDAgMCAxIC42OC41IDEuMTcgMS4xNyAwIDAgMSAuMjUuNzcgMS41MiAxLjUyIDAgMCAxLS4yMS44NCAxLjUxIDEuNTEgMCAwIDEtLjU1LjUgMi40NyAyLjQ3IDAgMCAxLS43Ni4yOCA0LjYxIDQuNjEgMCAwIDEtLjgzLjA3IDMuOTcgMy45NyAwIDAgMS0xLjAyLS4xMyAyLjUyIDIuNTIgMCAwIDEtLjg2LS40IDIuMDcgMi4wNyAwIDAgMS0uNi0uNyAyLjEgMi4xIDAgMCAxLS4yMy0xSDBBMy4yNiAzLjI2IDAgMCAwIC4zIDcuOWEyLjggMi44IDAgMCAwIC44NCAxLjAxIDMuNjQgMy42NCAwIDAgMCAxLjIyLjYgNS40NCA1LjQ0IDAgMCAwIDEuNDguMiA1LjY0IDUuNjQgMCAwIDAgMS4yOC0uMTYgMy43IDMuNyAwIDAgMCAxLjE2LS40OCAyLjczIDIuNzMgMCAwIDAgLjg1LS44NiAyLjMzIDIuMzMgMCAwIDAgLjMzLTEuMjYgMi4zMyAyLjMzIDAgMCAwLS4yNS0xLjE1IDIuMjYgMi4yNiAwIDAgMC0uNjgtLjc1IDMuNTggMy41OCAwIDAgMC0uOTUtLjQ4cS0uNTQtLjE4LTEuMDktLjN0LTEuMDgtLjI0YTUuNjggNS42OCAwIDAgMS0uOTYtLjI4IDEuODggMS44OCAwIDAgMS0uNjgtLjQ0Ljk3Ljk3IDAgMCAxLS4yNS0uNyAxLjUgMS41IDAgMCAxIC4xNy0uNzUgMS4zNiAxLjM2IDAgMCAxIC40Ny0uNSAyLjA0IDIuMDQgMCAwIDEgLjY3LS4yNSAzLjc4IDMuNzggMCAwIDEgLjc3LS4wOCAyLjYyIDIuNjIgMCAwIDEgMS41OC40NSAxLjkzIDEuOTMgMCAwIDEgLjcyIDEuNDVabTkuMzkgMmgxLjE0YTIuNjYgMi42NiAwIDAgMC0uMzEtMS4wNCAyLjMgMi4zIDAgMCAwLS42My0uNzIgMi42MSAyLjYxIDAgMCAwLS44OS0uNDIgNC4wNiA0LjA2IDAgMCAwLTEuMDctLjE0IDMuMjUgMy4yNSAwIDAgMC0xLjM5LjI4IDIuNzggMi43OCAwIDAgMC0xIC43NyAzLjI2IDMuMjYgMCAwIDAtLjU5IDEuMTQgNC45MyA0LjkzIDAgMCAwLS4yIDEuNDIgNC41MyA0LjUzIDAgMCAwIC4yIDEuMzggMy4wNCAzLjA0IDAgMCAwIC42IDEuMDkgMi42MyAyLjYzIDAgMCAwIDEgLjcgMy41IDMuNSAwIDAgMCAxLjM1LjI0IDIuOTIgMi45MiAwIDAgMCAyLjA0LS42NyAzLjEgMy4xIDAgMCAwIC45My0xLjkzaC0xLjEzYTEuOTQgMS45NCAwIDAgMS0uNTcgMS4yMSAxLjggMS44IDAgMCAxLTEuMjguNDMgMS44MyAxLjgzIDAgMCAxLS45LS4yIDEuNzUgMS43NSAwIDAgMS0uNi0uNTYgMi40NCAyLjQ0IDAgMCAxLS4zNS0uNzggMy43NCAzLjc0IDAgMCAxLS4xMS0uOTEgNC41NyA0LjU3IDAgMCAxIC4xLS45OSAyLjQ2IDIuNDYgMCAwIDEgLjM1LS44NCAxLjc4IDEuNzggMCAwIDEgLjY0LS41OCAyLjA2IDIuMDYgMCAwIDEgMS0uMjIgMS42OCAxLjY4IDAgMCAxIDEuMTIuMzUgMS42OCAxLjY4IDAgMCAxIC41NS45OVpNMjUuNiA5LjQ4YTEuNTYgMS41NiAwIDAgMS0uOC4xNy45NS45NSAwIDAgMS0uNjgtLjI1IDEuMDQgMS4wNCAwIDAgMS0uMjUtLjc4IDIuNjQgMi42NCAwIDAgMS0xLjA2Ljc4IDMuNSAzLjUgMCAwIDEtMS4zLjI1IDMuNSAzLjUgMCAwIDEtLjg3LS4xIDIuMDEgMi4wMSAwIDAgMS0uNy0uMzMgMS41NiAxLjU2IDAgMCAxLS40OC0uNTggMS45NSAxLjk1IDAgMCAxLS4xNy0uODYgMS45NyAxLjk3IDAgMCAxIC4yLS45NCAxLjcgMS43IDAgMCAxIC41LS41OSAyLjM1IDIuMzUgMCAwIDEgLjczLS4zNXEuNC0uMTEuODQtLjIuNDUtLjA4Ljg2LS4xM2E0LjgyIDQuODIgMCAwIDAgLjcyLS4xMyAxLjIgMS4yIDAgMCAwIC41LS4yNS42LjYgMCAwIDAgLjE4LS40NyAxLjEgMS4xIDAgMCAwLS4xNC0uNTkuOTQuOTQgMCAwIDAtLjM1LS4zMyAxLjQzIDEuNDMgMCAwIDAtLjQ4LS4xNiAzLjYzIDMuNjMgMCAwIDAtLjUzLS4wNCAyLjM0IDIuMzQgMCAwIDAtMS4xNy4yNyAxLjEzIDEuMTMgMCAwIDAtLjUgMWgtMS4xYTIuMzkgMi4zOSAwIDAgMSAuMjYtMS4wNSAxLjk3IDEuOTcgMCAwIDEgLjYyLS43IDIuNjIgMi42MiAwIDAgMSAuOS0uMzggNC43IDQuNyAwIDAgMSAxLjA3LS4xMiA2LjMgNi4zIDAgMCAxIC45LjA3IDIuMzYgMi4zNiAwIDAgMSAuOC4yNiAxLjU2IDEuNTYgMCAwIDEgLjYuNTcgMS44MSAxLjgxIDAgMCAxIC4yMS45NXYzLjQ1YTIuNTkgMi41OSAwIDAgMCAuMDUuNThxLjA0LjE5LjMuMTlhMS4xIDEuMSAwIDAgMCAuMzQtLjA3Wm0tMS44LTMuNDVhMS4zOCAxLjM4IDAgMCAxLS41NC4yM3EtLjMzLjA3LS43LjEydC0uNzUuMWEyLjc1IDIuNzUgMCAwIDAtLjY4LjE4IDEuMjMgMS4yMyAwIDAgMC0uNDguMzcgMS4wNCAxLjA0IDAgMCAwLS4yLjY2LjkuOSAwIDAgMCAuMTIuNDYuOTIuOTIgMCAwIDAgLjI4LjMgMS4yIDEuMiAwIDAgMCAuNDEuMTggMi4yNyAyLjI3IDAgMCAwIC41LjA1IDIuNjIgMi42MiAwIDAgMCAuOTMtLjE1IDEuOTcgMS45NyAwIDAgMCAuNjQtLjM4IDEuNDkgMS40OSAwIDAgMCAuMzctLjUgMS4yNSAxLjI1IDAgMCAwIC4xMS0uNVptNC43OC0zLjI1VjkuNWgxLjFWNS43YTIuNzIgMi43MiAwIDAgMSAuMTItLjg0IDEuOSAxLjkgMCAwIDEgLjM3LS42NiAxLjY1IDEuNjUgMCAwIDEgLjYyLS40NSAyLjI1IDIuMjUgMCAwIDEgLjg4LS4xNSAxLjM1IDEuMzUgMCAwIDEgMSAuMzYgMS4zMyAxLjMzIDAgMCAxIC4zNi45OVY5LjVoMS4xVjUuMDhhNC4xNiA0LjE2IDAgMCAwLS4xLTEgMS44OCAxLjg4IDAgMCAwLS40LS43NyAxLjgyIDEuODIgMCAwIDAtLjctLjUgMi45MiAyLjkyIDAgMCAwLTEuMS0uMTggMi4zMyAyLjMzIDAgMCAwLTIuMTkgMS4yMmgtLjAzVjIuNzhabTkuMTggMFY5LjVoMS4xVjUuN2EyLjcyIDIuNzIgMCAwIDEgLjEyLS44NCAxLjkgMS45IDAgMCAxIC4zNy0uNjYgMS42NSAxLjY1IDAgMCAxIC42Mi0uNDUgMi4yNSAyLjI1IDAgMCAxIC44OC0uMTUgMS4zNSAxLjM1IDAgMCAxIDEgLjM3IDEuMzMgMS4zMyAwIDAgMSAuMzYuOThWOS41aDEuMVY1LjA4YTQuMTYgNC4xNiAwIDAgMC0uMS0xIDEuODggMS44OCAwIDAgMC0uNC0uNzcgMS44MiAxLjgyIDAgMCAwLS43LS41IDIuOTIgMi45MiAwIDAgMC0xLjEtLjE4IDIuMzMgMi4zMyAwIDAgMC0yLjE5IDEuMjJoLS4wM1YyLjc4Wm0xMC4zNC0xLjJWLjIxaC0xLjF2MS4zNVptLTEuMSAxLjJWOS41aDEuMVYyLjc4Wm00Ljc3IDBWOS41aDEuMVY1LjdhMi43MiAyLjcyIDAgMCAxIC4xMy0uODQgMS45IDEuOSAwIDAgMSAuMzctLjY2IDEuNjUgMS42NSAwIDAgMSAuNjItLjQ1IDIuMjUgMi4yNSAwIDAgMSAuODctLjE1IDEuMzUgMS4zNSAwIDAgMSAxIC4zNiAxLjMzIDEuMzMgMCAwIDEgLjM3Ljk5VjkuNWgxLjFWNS4wOGE0LjE2IDQuMTYgMCAwIDAtLjExLTEgMS44OCAxLjg4IDAgMCAwLS4zOS0uNzcgMS44MiAxLjgyIDAgMCAwLS43MS0uNSAyLjkyIDIuOTIgMCAwIDAtMS4xLS4xOCAyLjMzIDIuMzMgMCAwIDAtMi4xOSAxLjIyaC0uMDJWMi43OFptMTQuOTggNi4xNVYyLjc4aC0xLjA0di45NmgtLjAxYTEuOTcgMS45NyAwIDAgMC0uODQtLjg0IDIuNDggMi40OCAwIDAgMC0xLjE3LS4yOCAzIDMgMCAwIDAtMS40Ni4zNCAyLjg1IDIuODUgMCAwIDAtLjk3Ljg0IDMuMzUgMy4zNSAwIDAgMC0uNTIgMS4xNSA1LjEgNS4xIDAgMCAwLS4xNSAxLjIyIDQuNDUgNC40NSAwIDAgMCAuMTkgMS4zMSAzLjEzIDMuMTMgMCAwIDAgLjU2IDEuMDggMi43NSAyLjc1IDAgMCAwIC45NC43MyAyLjk2IDIuOTYgMCAwIDAgMS4zMS4yOCAyLjY5IDIuNjkgMCAwIDAgMS4yMy0uMyAxLjg2IDEuODYgMCAwIDAgLjg2LS45MWguMDN2LjQ0YTQuNDcgNC40NyAwIDAgMS0uMTIgMS4wMyAyLjE1IDIuMTUgMCAwIDEtLjM1LjggMS43MyAxLjczIDAgMCAxLS42My41MiAyLjA1IDIuMDUgMCAwIDEtLjkyLjE5IDIuOTggMi45OCAwIDAgMS0uNTctLjA2IDIuMDggMi4wOCAwIDAgMS0uNTUtLjIgMS4zOCAxLjM4IDAgMCAxLS40My0uMzMuODIuODIgMCAwIDEtLjItLjVoLTEuMWExLjc0IDEuNzQgMCAwIDAgLjMuOTIgMi4wNiAyLjA2IDAgMCAwIC42NS42IDIuOTMgMi45MyAwIDAgMCAuODkuMzUgNC41NyA0LjU3IDAgMCAwIC45NS4xQTMuMDcgMy4wNyAwIDAgMCA2NiAxMS40YTMuNTQgMy41NCAwIDAgMCAuNzYtMi40N1ptLTMuMS0uMzNhMS42OSAxLjY5IDAgMCAxLS45LS4yMiAxLjc2IDEuNzYgMCAwIDEtLjYtLjYgMi41OSAyLjU5IDAgMCAxLS4zLS44MyA0LjYzIDQuNjMgMCAwIDEtLjEtLjkxIDMuOCAzLjggMCAwIDEgLjExLS45MiAyLjI5IDIuMjkgMCAwIDEgLjM1LS43OCAxLjc3IDEuNzcgMCAwIDEgLjYyLS41NCAxLjkgMS45IDAgMCAxIC45MS0uMiAxLjc1IDEuNzUgMCAwIDEgLjg5LjIgMS43MiAxLjcyIDAgMCAxIC41OS41NiAyLjQzIDIuNDMgMCAwIDEgLjMzLjc3IDMuNjggMy42OCAwIDAgMSAuMS44NyA0LjA2IDQuMDYgMCAwIDEtLjExLjk0IDIuNzMgMi43MyAwIDAgMS0uMzUuODQgMS44MSAxLjgxIDAgMCAxLS42MS42IDEuOCAxLjggMCAwIDEtLjkzLjIyWk03NS45Ny4yMlY5LjVoMS4xdi0uOWguMDNhMS43OCAxLjc4IDAgMCAwIC40NS41IDIuMzYgMi4zNiAwIDAgMCAuNTYuMzIgMy4wNyAzLjA3IDAgMCAwIC42LjE3IDMuMzIgMy4zMiAwIDAgMCAuNTUuMDUgMy4xMiAzLjEyIDAgMCAwIDEuMzYtLjI3IDIuNyAyLjcgMCAwIDAgLjk2LS43NCAzLjE4IDMuMTggMCAwIDAgLjU3LTEuMTIgNC43NCA0Ljc0IDAgMCAwIC4yLTEuMzUgNC42IDQuNiAwIDAgMC0uMi0xLjM1IDMuNDIgMy40MiAwIDAgMC0uNTgtMS4xMyAyLjc2IDIuNzYgMCAwIDAtLjk2LS43NyAzLjAzIDMuMDMgMCAwIDAtMS4zNi0uMjkgMy4yIDMuMiAwIDAgMC0xLjI5LjI2IDEuNjUgMS42NSAwIDAgMC0uODYuODFoLS4wMlYuMjJabTUuMiA1Ljg2YTQuNDIgNC40MiAwIDAgMS0uMS45NyAyLjU0IDIuNTQgMCAwIDEtLjM0LjgzIDEuNzggMS43OCAwIDAgMS0uNjEuNTggMS44OSAxLjg5IDAgMCAxLS45Ni4yMiAyLjA1IDIuMDUgMCAwIDEtLjk3LS4yMSAxLjkgMS45IDAgMCAxLS42Ni0uNTcgMi4zNyAyLjM3IDAgMCAxLS4zNy0uOCAzLjg3IDMuODcgMCAwIDEtLjEyLS45NiAzLjkgMy45IDAgMCAxIC4xMS0uOTMgMi40MiAyLjQyIDAgMCAxIC4zNi0uOCAxLjkgMS45IDAgMCAxIC42NC0uNTkgMS45IDEuOSAwIDAgMSAuOTUtLjIyIDEuOTcgMS45NyAwIDAgMSAuOTMuMiAxLjg1IDEuODUgMCAwIDEgLjY1LjU3IDIuNDcgMi40NyAwIDAgMSAuMzcuOCAzLjQ0IDMuNDQgMCAwIDEgLjEyLjkxWm03LjA2IDQuMzJhNy4wMyA3LjAzIDAgMCAxLS4zOC44NCAyLjI3IDIuMjcgMCAwIDEtLjQyLjU1IDEuNDEgMS40MSAwIDAgMS0uNS4zMSAxLjk1IDEuOTUgMCAwIDEtLjY1LjEgMi45NSAyLjk1IDAgMCAxLS4zOS0uMDMgMS44NCAxLjg0IDAgMCAxLS4zNy0uMDl2LTEuMDJhMS44NiAxLjg2IDAgMCAwIC4zMy4xMSAxLjQgMS40IDAgMCAwIC4zMi4wNS45NS45NSAwIDAgMCAuNTYtLjE2IDEgMSAwIDAgMCAuMzQtLjQ2bC40Ni0xLjE0LTIuNjctNi42OGgxLjI1bDEuOTcgNS41aC4wMkw5MCAyLjc4aDEuMTdaIiBmaWxsPSIjMTIxNjE5Ii8+PC9zdmc+",ON=class $u{constructor(e){this.canUploadFile=!1,this._mounted=!1,this._loading=!1,this._htmlRoot=void 0,this._canvas=void 0,this._onInputCheck=void 0,this._onBeforeFileRead=void 0,this._onImageLoadError=void 0,this._onFileReaderError=void 0,this._onCaptureReady=void 0,this._resizedImageSizeLimit=1440,this._inputElement=void 0,this._buttonElement=void 0,this._chooseImageText="",this._settings=e}get canvas(){return this._canvas||(this._canvas=document.createElement("canvas")),this._canvas}get canvasContext(){return this._canvasContext||(this._canvasContext=this.canvas.getContext("2d",{willReadFrequently:!0})),this._canvasContext}mount(e){var s;if(this._mounted)return;if(!document.head.querySelector(`[data-component=${$u.componentName}]`)){let j=document.createElement("style");j.dataset.component=$u.componentName,j.textContent=A0e,document.head.append(j)}let r=document.createElement("div");r.className=Vu.SINGLE_IMAGE_UPLOADER_CONTAINER,Object.assign(r.style,Mx.SINGLE_IMAGE_UPLOADER_CONTAINER_STYLE,this._settings.containerStyle),e.append(r);let{iconElement:i,iconStyle:a,informationElement:o,informationStyle:c,buttonElement:d,buttonStyle:h,onlyCameraCapture:g}=this._settings;Object.assign(i.style,Mx.SINGLE_IMAGE_UPLOADER_ICON_STYLE,a,{maxWidth:"100px",maxHeight:"100px"}),r.append(i),o.hasAttribute($u.DEFAULT_DOM_ATTRIBUTE)&&(Object.assign(o.style,Mx.SINGLE_IMAGE_UPLOADER_INFORMATION_STYLE,c),o.textContent=Mh.getInstance().get("core.singleImageUploader.title")),r.append(o);let m=document.createElement("input");m.type="file",m.accept="image/*",g&&(m.capture="environment",m.dataset.onlyCaptureOnMobile="environment"),m.addEventListener("change",j=>{this.onFileUpload(j)}),m.addEventListener("click",j=>{var N;(N=this._onInputCheck)==null||N.call(this,j)}),m.addEventListener("keydown",j=>{var N;(N=this._onInputCheck)==null||N.call(this,j)});let p=document.createElement("label");p.append(m),d.hasAttribute($u.DEFAULT_DOM_ATTRIBUTE)&&(Object.assign(d.style,Mx.SINGLE_IMAGE_UPLOADER_BUTTON_STYLE,h),d.textContent=Mh.getInstance().get("core.singleImageUploader.button")),p.append(d),r.append(p);let v=document.createRange().createContextualFragment(atob(E0e)).firstElementChild;Object.assign(v.style,{position:"absolute",bottom:"1em",right:"1em",width:"10em"}),r.append(v),this._htmlRoot=r,this._mounted=!0,this._inputElement=m,this._buttonElement=d,this._chooseImageText=(s=d.textContent)!=null?s:""}unmount(){var e,s;this._mounted&&((e=this._htmlRoot)==null||e.remove(),(s=document.head.querySelector(`[data-component=${$u.componentName}]`))==null||s.remove(),this._mounted=!1)}setButtonState(e){this._inputElement&&(this._inputElement.disabled=e==="disabled")}getButtonState(){return this._inputElement?this._inputElement.disabled?"disabled":"enabled":"disabled"}onInputCheck(e){this._onInputCheck=e}onBeforeFileRead(e){this._onBeforeFileRead=e}onImageLoadError(e){this._onImageLoadError=e}onFileReaderError(e){this._onFileReaderError=e}onCaptureReady(e){this._onCaptureReady=e}onAfterImageProcessed(){this.setLoading(!1)}setLoading(e){this._buttonElement&&(this.setButtonState(e?"disabled":"enabled"),this._buttonElement.textContent=e?"...":this._chooseImageText,this._loading=e)}getResizedImageDimensions(e,s){return e<=this._resizedImageSizeLimit&&s<=this._resizedImageSizeLimit?{width:e,height:s}:e>s?{width:this._resizedImageSizeLimit,height:Math.round(s/e*this._resizedImageSizeLimit)}:{width:Math.round(e/s*this._resizedImageSizeLimit),height:this._resizedImageSizeLimit}}onImageLoad(e){var s;let{height:r,width:i}=this.getResizedImageDimensions(e.naturalWidth,e.naturalHeight);this.canvasContext.canvas.width=i,this.canvasContext.canvas.height=r,this.canvasContext.drawImage(e,0,0,i,r);let a={data:this.canvasContext.getImageData(0,0,i,r).data,width:i,height:r};(s=this._onCaptureReady)==null||s.call(this,a)}onFileReaderLoad(e,s,r){e.value="",s.result!=null&&(r.addEventListener("load",()=>{this.onImageLoad(r)},{once:!0}),r.addEventListener("error",i=>{var a;(a=this._onImageLoadError)==null||a.call(this,i),this.setLoading(!1)},{once:!0}),r.src=s.result)}onFileUpload(e){var s;this.setLoading(!0);let r=e.currentTarget,{files:i}=r;if(i==null||i.length===0){this.setLoading(!1);return}if((s=this._onBeforeFileRead)==null||s.call(this,e),!this.canUploadFile){r.value="",Fe.log(Fe.Level.Warn,"Can't upload file, no capture mode enabled."),this.setLoading(!1);return}let a=new Image,o=new FileReader;o.addEventListener("load",()=>{this.onFileReaderLoad(r,o,a)}),o.addEventListener("error",c=>{var d;(d=this._onFileReaderError)==null||d.call(this,c),this.setLoading(!1)}),o.readAsDataURL(i[0])}};ON.componentName="SingleImageUploaderView",ON.DEFAULT_DOM_ATTRIBUTE="data-scandit-default";var _0e=ON,gT=class extends hc{constructor(e){super({name:"UnsupportedBrowserError",message:`This OS / browser has one or more missing features preventing it from working correctly (${e.missingFeatures.join(", ")})`}),this.data=e}},I0e=HS((t,e)=>{(function(s){var r;if(typeof define=="function"&&define.amd&&(define(s),r=!0),typeof t=="object"&&(e.exports=s(),r=!0),!r){var i=window.Cookies,a=window.Cookies=s();a.noConflict=function(){return window.Cookies=i,a}}})(function(){function s(){for(var a=0,o={};a<arguments.length;a++){var c=arguments[a];for(var d in c)o[d]=c[d]}return o}function r(a){return a.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function i(a){function o(){}function c(h,g,m){if(!(typeof document>"u")){m=s({path:"/"},o.defaults,m),typeof m.expires=="number"&&(m.expires=new Date(new Date*1+m.expires*864e5)),m.expires=m.expires?m.expires.toUTCString():"";try{var p=JSON.stringify(g);/^[\{\[]/.test(p)&&(g=p)}catch{}g=a.write?a.write(g,h):encodeURIComponent(String(g)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),h=encodeURIComponent(String(h)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var v="";for(var j in m)m[j]&&(v+="; "+j,m[j]!==!0&&(v+="="+m[j].split(";")[0]));return document.cookie=h+"="+g+v}}function d(h,g){if(!(typeof document>"u")){for(var m={},p=document.cookie?document.cookie.split("; "):[],v=0;v<p.length;v++){var j=p[v].split("="),N=j.slice(1).join("=");!g&&N.charAt(0)==='"'&&(N=N.slice(1,-1));try{var E=r(j[0]);if(N=(a.read||a)(N,E)||r(N),g)try{N=JSON.parse(N)}catch{}if(m[E]=N,h===E)break}catch{}}return h?m[h]:m}}return o.set=c,o.get=function(h){return d(h,!1)},o.getJSON=function(h){return d(h,!0)},o.remove=function(h,g){c(h,"",s(g,{expires:-1}))},o.defaults={},o.withConverter=i,o}return i(function(){})})}),T0e=HS((t,e)=>{(function(s,r){var i="1.0.38",a="",o="?",c="function",d="undefined",h="object",g="string",m="major",p="model",v="name",j="type",N="vendor",E="version",_="architecture",S="console",C="mobile",I="tablet",P="smarttv",L="wearable",T="embedded",M=500,k="Amazon",O="Apple",V="ASUS",B="BlackBerry",Y="Browser",z="Chrome",G="Edge",he="Firefox",le="Google",se="Huawei",re="LG",me="Microsoft",Ce="Motorola",$="Opera",xe="Samsung",te="Sharp",ae="Sony",ee="Xiaomi",de="Zebra",pe="Facebook",Me="Chromium OS",Le="Mac OS",We=function(dt,Dt){var At={};for(var qt in dt)Dt[qt]&&Dt[qt].length%2===0?At[qt]=Dt[qt].concat(dt[qt]):At[qt]=dt[qt];return At},jt=function(dt){for(var Dt={},At=0;At<dt.length;At++)Dt[dt[At].toUpperCase()]=dt[At];return Dt},mt=function(dt,Dt){return typeof dt===g?ke(Dt).indexOf(ke(dt))!==-1:!1},ke=function(dt){return dt.toLowerCase()},yt=function(dt){return typeof dt===g?dt.replace(/[^\d\.]/g,a).split(".")[0]:r},On=function(dt,Dt){if(typeof dt===g)return dt=dt.replace(/^\s\s*/,a),typeof Dt===d?dt:dt.substring(0,M)},zt=function(dt,Dt){for(var At=0,qt,Hn,er,nn,Bt,bn;At<Dt.length&&!Bt;){var rt=Dt[At],qn=Dt[At+1];for(qt=Hn=0;qt<rt.length&&!Bt&&rt[qt];)if(Bt=rt[qt++].exec(dt),Bt)for(er=0;er<qn.length;er++)bn=Bt[++Hn],nn=qn[er],typeof nn===h&&nn.length>0?nn.length===2?typeof nn[1]==c?this[nn[0]]=nn[1].call(this,bn):this[nn[0]]=nn[1]:nn.length===3?typeof nn[1]===c&&!(nn[1].exec&&nn[1].test)?this[nn[0]]=bn?nn[1].call(this,bn,nn[2]):r:this[nn[0]]=bn?bn.replace(nn[1],nn[2]):r:nn.length===4&&(this[nn[0]]=bn?nn[3].call(this,bn.replace(nn[1],nn[2])):r):this[nn]=bn||r;At+=2}},ce=function(dt,Dt){for(var At in Dt)if(typeof Dt[At]===h&&Dt[At].length>0){for(var qt=0;qt<Dt[At].length;qt++)if(mt(Dt[At][qt],dt))return At===o?r:At}else if(mt(Dt[At],dt))return At===o?r:At;return dt},be={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},ze={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Pe={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[E,[v,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[E,[v,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[v,E],[/opios[\/ ]+([\w\.]+)/i],[E,[v,$+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[E,[v,$+" GX"]],[/\bopr\/([\w\.]+)/i],[E,[v,$]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[E,[v,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[v,E],[/\bddg\/([\w\.]+)/i],[E,[v,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[E,[v,"UC"+Y]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[E,[v,"WeChat"]],[/konqueror\/([\w\.]+)/i],[E,[v,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[E,[v,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[E,[v,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[E,[v,"Smart Lenovo "+Y]],[/(avast|avg)\/([\w\.]+)/i],[[v,/(.+)/,"$1 Secure "+Y],E],[/\bfocus\/([\w\.]+)/i],[E,[v,he+" Focus"]],[/\bopt\/([\w\.]+)/i],[E,[v,$+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[E,[v,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[E,[v,"Dolphin"]],[/coast\/([\w\.]+)/i],[E,[v,$+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[E,[v,"MIUI "+Y]],[/fxios\/([-\w\.]+)/i],[E,[v,he]],[/\bqihu|(qi?ho?o?|360)browser/i],[[v,"360 "+Y]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[v,/(.+)/,"$1 "+Y],E],[/samsungbrowser\/([\w\.]+)/i],[E,[v,xe+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[v,/_/g," "],E],[/metasr[\/ ]?([\d\.]+)/i],[E,[v,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[v,"Sogou Mobile"],E],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[v,E],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[v],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[v,pe],E],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[v,E],[/\bgsa\/([\w\.]+) .*safari\//i],[E,[v,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[E,[v,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[E,[v,z+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[v,z+" WebView"],E],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[E,[v,"Android "+Y]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[v,E],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[E,[v,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[E,v],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[v,[E,ce,be]],[/(webkit|khtml)\/([\w\.]+)/i],[v,E],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[v,"Netscape"],E],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[E,[v,he+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[v,E],[/(cobalt)\/([\w\.]+)/i],[v,[E,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[_,"amd64"]],[/(ia32(?=;))/i],[[_,ke]],[/((?:i[346]|x)86)[;\)]/i],[[_,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[_,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[_,"armhf"]],[/windows (ce|mobile); ppc;/i],[[_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[_,/ower/,a,ke]],[/(sun4\w)[;\)]/i],[[_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[_,ke]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[N,xe],[j,I]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[p,[N,xe],[j,C]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[p,[N,O],[j,C]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[N,O],[j,I]],[/(macintosh);/i],[p,[N,O]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[N,te],[j,C]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[p,[N,se],[j,I]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[p,[N,se],[j,C]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[p,/_/g," "],[N,ee],[j,C]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[p,/_/g," "],[N,ee],[j,I]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[N,"OPPO"],[j,C]],[/\b(opd2\d{3}a?) bui/i],[p,[N,"OPPO"],[j,I]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[N,"Vivo"],[j,C]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[p,[N,"Realme"],[j,C]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[N,Ce],[j,C]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[N,Ce],[j,I]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[N,re],[j,I]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[N,re],[j,C]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[p,[N,"Lenovo"],[j,I]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[p,/_/g," "],[N,"Nokia"],[j,C]],[/(pixel c)\b/i],[p,[N,le],[j,I]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[N,le],[j,C]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[N,ae],[j,C]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[N,ae],[j,I]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[N,"OnePlus"],[j,C]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[N,k],[j,I]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[N,k],[j,C]],[/(playbook);[-\w\),; ]+(rim)/i],[p,N,[j,I]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[N,B],[j,C]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[N,V],[j,I]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[N,V],[j,C]],[/(nexus 9)/i],[p,[N,"HTC"],[j,I]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[N,[p,/_/g," "],[j,C]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[N,"Acer"],[j,I]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[N,"Meizu"],[j,C]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[p,[N,"Ulefone"],[j,C]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[N,p,[j,C]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[N,p,[j,I]],[/(surface duo)/i],[p,[N,me],[j,I]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[N,"Fairphone"],[j,C]],[/(u304aa)/i],[p,[N,"AT&T"],[j,C]],[/\bsie-(\w*)/i],[p,[N,"Siemens"],[j,C]],[/\b(rct\w+) b/i],[p,[N,"RCA"],[j,I]],[/\b(venue[\d ]{2,7}) b/i],[p,[N,"Dell"],[j,I]],[/\b(q(?:mv|ta)\w+) b/i],[p,[N,"Verizon"],[j,I]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[p,[N,"Barnes & Noble"],[j,I]],[/\b(tm\d{3}\w+) b/i],[p,[N,"NuVision"],[j,I]],[/\b(k88) b/i],[p,[N,"ZTE"],[j,I]],[/\b(nx\d{3}j) b/i],[p,[N,"ZTE"],[j,C]],[/\b(gen\d{3}) b.+49h/i],[p,[N,"Swiss"],[j,C]],[/\b(zur\d{3}) b/i],[p,[N,"Swiss"],[j,I]],[/\b((zeki)?tb.*\b) b/i],[p,[N,"Zeki"],[j,I]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[N,"Dragon Touch"],p,[j,I]],[/\b(ns-?\w{0,9}) b/i],[p,[N,"Insignia"],[j,I]],[/\b((nxa|next)-?\w{0,9}) b/i],[p,[N,"NextBook"],[j,I]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[N,"Voice"],p,[j,C]],[/\b(lvtel\-)?(v1[12]) b/i],[[N,"LvTel"],p,[j,C]],[/\b(ph-1) /i],[p,[N,"Essential"],[j,C]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[p,[N,"Envizen"],[j,I]],[/\b(trio[-\w\. ]+) b/i],[p,[N,"MachSpeed"],[j,I]],[/\btu_(1491) b/i],[p,[N,"Rotor"],[j,I]],[/(shield[\w ]+) b/i],[p,[N,"Nvidia"],[j,I]],[/(sprint) (\w+)/i],[N,p,[j,C]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[N,me],[j,C]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[N,de],[j,I]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[N,de],[j,C]],[/smart-tv.+(samsung)/i],[N,[j,P]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[N,xe],[j,P]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[N,re],[j,P]],[/(apple) ?tv/i],[N,[p,O+" TV"],[j,P]],[/crkey/i],[[p,z+"cast"],[N,le],[j,P]],[/droid.+aft(\w+)( bui|\))/i],[p,[N,k],[j,P]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[p,[N,te],[j,P]],[/(bravia[\w ]+)( bui|\))/i],[p,[N,ae],[j,P]],[/(mitv-\w{5}) bui/i],[p,[N,ee],[j,P]],[/Hbbtv.*(technisat) (.*);/i],[N,p,[j,P]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[N,On],[p,On],[j,P]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[j,P]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[N,p,[j,S]],[/droid.+; (shield) bui/i],[p,[N,"Nvidia"],[j,S]],[/(playstation [345portablevi]+)/i],[p,[N,ae],[j,S]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[N,me],[j,S]],[/((pebble))app/i],[N,p,[j,L]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[p,[N,O],[j,L]],[/droid.+; (glass) \d/i],[p,[N,le],[j,L]],[/droid.+; (wt63?0{2,3})\)/i],[p,[N,de],[j,L]],[/(quest( \d| pro)?)/i],[p,[N,pe],[j,L]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[N,[j,T]],[/(aeobc)\b/i],[p,[N,k],[j,T]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[p,[j,C]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[p,[j,I]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[j,I]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[j,C]],[/(android[-\w\. ]{0,9});.+buil/i],[p,[N,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[E,[v,G+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[E,[v,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[v,E],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[E,v]],os:[[/microsoft (windows) (vista|xp)/i],[v,E],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[v,[E,ce,ze]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[E,ce,ze],[v,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[E,/_/g,"."],[v,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[v,Le],[E,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[E,v],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[v,E],[/\(bb(10);/i],[E,[v,B]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[E,[v,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[E,[v,he+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[E,[v,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[E,[v,"watchOS"]],[/crkey\/([\d\.]+)/i],[E,[v,z+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[v,Me],E],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[v,E],[/(sunos) ?([\w\.\d]*)/i],[[v,"Solaris"],E],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[v,E]]},Je=function(dt,Dt){if(typeof dt===h&&(Dt=dt,dt=r),!(this instanceof Je))return new Je(dt,Dt).getResult();var At=typeof s!==d&&s.navigator?s.navigator:r,qt=dt||(At&&At.userAgent?At.userAgent:a),Hn=At&&At.userAgentData?At.userAgentData:r,er=Dt?We(Pe,Dt):Pe,nn=At&&At.userAgent==qt;return this.getBrowser=function(){var Bt={};return Bt[v]=r,Bt[E]=r,zt.call(Bt,qt,er.browser),Bt[m]=yt(Bt[E]),nn&&At&&At.brave&&typeof At.brave.isBrave==c&&(Bt[v]="Brave"),Bt},this.getCPU=function(){var Bt={};return Bt[_]=r,zt.call(Bt,qt,er.cpu),Bt},this.getDevice=function(){var Bt={};return Bt[N]=r,Bt[p]=r,Bt[j]=r,zt.call(Bt,qt,er.device),nn&&!Bt[j]&&Hn&&Hn.mobile&&(Bt[j]=C),nn&&Bt[p]=="Macintosh"&&At&&typeof At.standalone!==d&&At.maxTouchPoints&&At.maxTouchPoints>2&&(Bt[p]="iPad",Bt[j]=I),Bt},this.getEngine=function(){var Bt={};return Bt[v]=r,Bt[E]=r,zt.call(Bt,qt,er.engine),Bt},this.getOS=function(){var Bt={};return Bt[v]=r,Bt[E]=r,zt.call(Bt,qt,er.os),nn&&!Bt[v]&&Hn&&Hn.platform&&Hn.platform!="Unknown"&&(Bt[v]=Hn.platform.replace(/chrome os/i,Me).replace(/macos/i,Le)),Bt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return qt},this.setUA=function(Bt){return qt=typeof Bt===g&&Bt.length>M?On(Bt,M):Bt,this},this.setUA(qt),this};Je.VERSION=i,Je.BROWSER=jt([v,E,m]),Je.CPU=jt([_]),Je.DEVICE=jt([p,N,j,S,C,P,I,L,T]),Je.ENGINE=Je.OS=jt([v,E]),typeof t!==d?(typeof e!==d&&e.exports&&(t=e.exports=Je),t.UAParser=Je):typeof define===c&&define.amd?define(function(){return Je}):typeof s!==d&&(s.UAParser=Je);var Ke=typeof s!==d&&(s.jQuery||s.Zepto);if(Ke&&!Ke.ua){var Nt=new Je;Ke.ua=Nt.getResult(),Ke.ua.get=function(){return Nt.getUA()},Ke.ua.set=function(dt){Nt.setUA(dt);var Dt=Nt.getResult();for(var At in Dt)Ke.ua[At]=Dt[At]}}})(typeof window=="object"?window:t)}),M0e=qS(I0e()),D0e=qS(T0e()),Zs;(t=>{let e;function s(){return e==null&&(e=new D0e.default(navigator.userAgent)),e}t.getUserAgentInfo=s;function r(){var k;if("orientation"in window)return!1;let O="(any-pointer: coarse)",V=(k=window.matchMedia)==null?void 0:k.call(window,O);return navigator.maxTouchPoints===0||(V==null?void 0:V.media)===O&&!(V!=null&&V.matches)}t.isDesktopDevice=r;function i(){return s().getDevice().model==="iPhone"}t.isIPhone=i;function a(){let k=s().getOS();return k.name==="iOS"&&k.version!=null&&k.version.localeCompare("16.3",void 0,{numeric:!0})>=0}t.isIOSDeviceWithExtendedCameraAccess=a;function o(){return"document"in window?window.document.createElement("canvas"):null}t.getCanvas=o;function c(k){return k.name==="iOS"&&k.version!=null&&["11.2.2","11.2.5","11.2.6"].includes(k.version)}async function d(){return Wxe()}t.hasSIMDSupport=d;async function h(){return v$()}t.hasThreadsSupport=h;function g(k,O,V){let B=k[O[0]];return B==null?!1:O.length===1?typeof B===V:(typeof B=="function"||typeof B=="object")&&g(B,O.slice(1),V)}function m(){var k;let O=!0,V=null,B=null,Y=null,z=null;try{if(V=t.getCanvas(),B=t.getCanvas(),Y=V==null?void 0:V.getContext("webgl"),z=B==null?void 0:B.getContext("experimental-webgl"),!g(window,["WebGLRenderingContext"],"function")||Y==null&&z==null)throw new Error("WebGLRenderingContext is not supported")}catch{O=!1}finally{for(let G of[Y,z])typeof(G==null?void 0:G.getExtension)=="function"&&((k=G.getExtension("WEBGL_lose_context"))==null||k.loseContext());Y=null,z=null,V=null,B=null}return O}function p(){let k=!0,O=!0,V=new Set;location.protocol.startsWith("http")||V.add("httpProtocol"),g(window,["isSecureContext"],"boolean")&&!window.isSecureContext&&V.add("secureContext"),!g(navigator,["mediaDevices","getUserMedia"],"function")&&!g(navigator,["enumerateDevices"],"function")&&!g(window,["MediaStreamTrack","getSources"],"function")&&(V.add("mediaDevices"),k=!1),g(window,["Worker"],"function")||(V.add("webWorkers"),k=!1,O=!1),g(window,["WebAssembly"],"object")||(V.add("webAssembly"),k=!1,O=!1),g(window,["Blob"],"function")||(V.add("blob"),k=!1,O=!1),g(window,["URL","createObjectURL"],"function")||(V.add("urlObject"),k=!1,O=!1),g(window,["OffscreenCanvas"],"function")||V.add("offscreenCanvas"),m()||V.add("webGL");let B=s().getOS();return c(B)&&(V.add("webAssemblyErrorFree"),k=!1,O=!1),x$()||V.add("sharedArrayBuffer"),g$()||V.add("crossOriginIsolated"),{fullSupport:k,scannerSupport:O,missingFeatures:[...V]}}t.checkBrowserCompatibility=p;async function v(){return Hxe()}t.checkMultithreadingSupport=v;function j(){let k="scandit-device-id",O="localStorage"in globalThis?globalThis.localStorage:void 0;if(!O)return"";let V=O.getItem(k);if(V!=null&&V!=="")return V;if(V=(0,M0e.get)(k),V!=null&&V!=="")return O.setItem(k,V),V;let B=new Uint8Array(20);return crypto.getRandomValues(B),V=[...B].map(Y=>{let z=Y.toString(16);return z.length===1?`0${z}`:z}).join(""),O.setItem(k,V),V}t.getDeviceId=j;function N(k){return k instanceof HTMLElement||k!=null&&typeof k=="object"&&typeof k.tagName=="string"}t.isValidHTMLElement=N;function E(){var k,O;let V=s().getOS();if(V.name!=="iOS")return!0;let[B,Y]=(O=(k=V.version)==null?void 0:k.split(".").map(Number))!=null?O:[];return B>14||B===14&&Y>=6}t.isSupportedIOSVersion=E;function _(){var k,O;return(O=(k=s().getBrowser().name)==null?void 0:k.toLowerCase().includes("safari"))!=null?O:!1}t.isSafari=_;function S(){var k,O;return/iphone|ipod|ipad/.test((O=(k=s().getDevice().model)==null?void 0:k.toLowerCase())!=null?O:"")&&!_()}t.isIosWebView=S;async function C(){var k;return((k=s().getOS().name)==null?void 0:k.toLowerCase())!=="android"?!1:s().getUA().includes("wv")?!0:[...(await fetch(document.location.toString(),{method:"HEAD"})).headers].some(([O])=>O.toLowerCase()==="x-requested-with")}t.isAndroidWebView=C;function I(){return s().getOS().name==="Windows"}t.isWindows=I;function P(){return s().getBrowser().name==="Firefox"}t.isFirefox=P;function L(){if("navigator"in globalThis){for(let k of["vibrate","webkitVibrate","msVibrate","mozVibrate"])if(typeof navigator[k]=="function")return navigator[k]}}t.getSupportedVibrationMethod=L;function T(){return L()!=null&&!r()&&!I()&&!P()}t.isVibrationAvailable=T;function M(){return s().getOS().name==="iOS"}t.isIOS=M})(Zs||(Zs={}));var k0e=(t=>(t.WorldFacing="worldFacing",t.UserFacing="userFacing",t))(k0e||{}),P0e=(t=>(t[t.ULTRA_HD=0]="ULTRA_HD",t[t.FULL_HD=1]="FULL_HD",t[t.HD=2]="HD",t[t.SD=3]="SD",t[t.NONE=4]="NONE",t))(P0e||{}),R0e=(t=>(t.AUTO="auto",t.FOUR_TO_THREE="fourToThree",t.SIXTEEN_TO_NINE="sixteenToNine",t))(R0e||{}),Cs;(t=>{let e=new Map([["DeviceCaptureError","AbortError"],["NotSupportedError","AbortError"],["ScreenCaptureError","AbortError"],["TabCaptureError","AbortError"],["TypeError","AbortError"],["InvalidStateError","NotAllowedError"],["MediaDeviceFailedDueToShutdown","NotAllowedError"],["MediaDeviceKillSwitchOn","NotAllowedError"],["PermissionDeniedError","NotAllowedError"],["PermissionDismissedError","NotAllowedError"],["DevicesNotFoundError","NotFoundError"],["SourceUnavailableError","NotReadableError"],["TrackStartError","NotReadableError"],["ConstraintNotSatisfiedError","OverconstrainedError"]]),s=["rear","back","rck","arrire","trasera","trs","traseira","posteriore","","","","","","","","","","arka","achterzijde","","baksidan","bagside","sau","bak","tylny","takakamera","belakang","","","spate","hts","zadn","darrere","posterior","zadn","","stranja","belakang",""],r=new Set(["Desk View Camera","Schreibtischansicht-Kamera","Camra DeskView","Cmara de Vista Cenital","Cmara da Vista de Secretria","Fotocamera di Panoramica Scrivania","","","  ","Masa Grnts Kameras","Bureauweergave-camera","  ","","Bordsvisningskamera","Kamera til Visning af skrivebord","Camera Desk View","Bordvisning-kamera","Kamera waplikacji Widok blatu","Typytnkymn kamera","Kamera Tampilan Meja","  ","   ","Camer Vizualizare birou","rasztal nzet kamerja","Stoln kamera","Cmera de lapp Vista de lEscriptori"]),i=new Set(["Front Camera","Frontkamera","Appareil photo avant","Cmara frontal","Cmera Frontal","Cmara frontal","Fotocamera (anteriore)","","","","   ","n Kamera","Camera aan voorzijde"," ","","Kamera p framsidan","Forsidekamera","Camera mt trc","Kamera foran","Przedni aparat","Etukamera","Kamera Depan"," "," ","Camer fa","Ells kamera","Pedn fotoapart","Cmera frontal","Predn kamera"," ","Prednja kamera","Kamera Depan"," "]),a=new Set(["Back Camera","Rckkamera","Camra arrire","Cmara trasera","Cmera Traseira","Cmara traseira","Fotocamera (posteriore)","","","","   ","Arka Kamera","Camera aan achterzijde"," ","","Kamera p baksidan","Bagsidekamera","Camera mt sau","Kamera bak","Tylny aparat","Takakamera","Kamera Belakang"," "," ","Camer spate","Hts kamera","Zadn fotoapart","Cmera posterior","Zadn kamera"," ","Stranja kamera","Kamera Belakang"," "]),o=new Set(["Back Dual Wide Camera","Rckseitige Dual-Weitwinkelkamera","Double appareil photo grand angle arrire","Cmara trasera dual con gran angular","Cmera Dupla Grande-Angular Traseira","Cmara grande angular dupla traseira","Fotocamera doppia con grandangolo (posteriore)","","","","   ","ift Geni Kamera Arka Yz","   ","","Dubbel vidvinkelkamera p baksidan","Camera kp rng mt sau","Dobbelt vidvinkelkamera bak","Tylny dwuobiektywowy aparat szerokoktny","Laajakulmainen kaksoistakakamera","Kamera Lebar Belakang Ganda","   ","   ","Camer dubl cu obiectiv superangular spate","Hts, ketts, szles ltszg kamera","Zadn duln irokohl fotoapart","Cmera dual posterior amb gran angular","Zadn dulna irokouhl kamera","   ","Stranja dvostruka iroka kamera","Dwikamera Lebar Belakang","   "]),c=new Set(["Back Ultra Wide Camera","Rckseitige Ultra-Weitwinkelkamera","Appareil photo ultra grand angle arrire","Cmara trasera con ultra gran angular","Cmera Ultra-Angular Traseira","Cmara ultra grande angular traseira","Fotocamera con ultra-grandangolo (posteriore)","","","","  ","Ultra Geni Kamera Arka Yz","Ultrabrede camera aan achterzijde","   ","","Ultravidvinkelkamera p baksidan","Ultravidvinkelkameraet p bagsiden","Camera cc rng mt sau","Ultravidvinkelkamera bak","Tylny aparat ultraszerokoktny","Ultralaajakulmainen takakamera","Kamera Ultra Lebar Belakang","   ","  ","Camer cu obiectiv ultrasuperangular spate","Hts, ultraszles ltszg kamera","Zadn ultra irokohl fotoapart","Cmera posterior amb ultra gran angular","Zadn ultrairokouhl kamera","  ","Stranja ultra iroka kamera","Kamera Ultralebar Belakang","   "]),d,h=!1;t.mainCameraForPositionOverridesOnDesktop=new Map,t.deviceIdToCameraObjects=new Map,t.inaccessibleDeviceIds=new Set;function g(te,ae){t.mainCameraForPositionOverridesOnDesktop.set(te,ae)}t.setMainCameraForPositionOverridesOnDesktop=g;function m(){t.mainCameraForPositionOverridesOnDesktop.clear()}t.clearMainCameraForPositionOverridesOnDesktop=m;function p(){return navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices)}function v(){if(typeof navigator.enumerateDevices=="function")return navigator.enumerateDevices.bind(navigator);if(typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.enumerateDevices=="function")return navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices)}function j(){h=!0}function N(te){let ae=te.toLowerCase();return s.some(ee=>ae.includes(ee))}function E(te){return i.has(te)}t.isIOSFrontCameraLabel=E;function _(te){return a.has(te)}t.isIOSBackCameraLabel=_;function S(te){return o.has(te)}t.isIOSBackDualWideCameraLabel=S;function C(te){return c.has(te)}t.isIOSUltraWideBackCameraLabel=C;function I(te){var ae;let ee=te.message==="Invalid constraint"?"OverconstrainedError":(ae=e.get(te.name))!=null?ae:te.name;Object.defineProperty(te,"name",{value:ee})}function P(te){if(te.length===0)return{areSomeCameraLabelsFilled:!1,areAllCameraLabelsFilled:!1,areAllCameraLabelsUnfilled:!1};let ae=te.every(de=>de.label!==""),ee=te.every(de=>de.label==="");return{areSomeCameraLabelsFilled:!ee&&!ae,areAllCameraLabelsFilled:ae,areAllCameraLabelsUnfilled:ee}}function L(te,ae){var ee;return(ee=t.mainCameraForPositionOverridesOnDesktop.get(ae))!=null?ee:te.find(de=>de.position===ae)}function T(te,ae){if(ae==="worldFacing"){let ee=te.find(pe=>S(pe.label));if(ee!=null)return ee;let de=te.find(pe=>_(pe.label));if(de!=null)return de}else{let ee=te.find(de=>E(de.label));if(ee!=null)return ee}}function M(te,ae){let{areSomeCameraLabelsFilled:ee,areAllCameraLabelsUnfilled:de}=P(te);if(de)return te[ae==="userFacing"?0:te.length-1];if(ee){let pe=te.filter(Me=>Me.position===ae);return pe.length===1?pe[0]:pe[ae==="userFacing"?0:pe.length-1]}if(Zs.getUserAgentInfo().getOS().name==="iOS"){let pe=T(te,ae);if(pe)return pe}return te.filter(pe=>pe.position===ae).sort((pe,Me)=>pe.label.localeCompare(Me.label))[0]}function k(te,ae){return Zs.isDesktopDevice()?L(te,ae):M(te,ae)}t.getMainCameraForPosition=k;function O(te,ae){return te.unshift(te.splice(ae,1)[0])}function V(te,ae){function ee(Me,Le){let We=t.mainCameraForPositionOverridesOnDesktop.get(Le);return We!=null&&Me.includes(We)&&(Me=Me.filter(jt=>jt!==We),Me.unshift(We)),Me}let de=te.filter(Me=>Me.position==="userFacing"),pe=te.filter(Me=>Me.position==="worldFacing");return Zs.isDesktopDevice()?(de=ee(de,"userFacing"),pe=ee(pe,"worldFacing")):te.every(Me=>Me.label==="")?pe.reverse():(de.sort((Me,Le)=>Me.label.localeCompare(Le.label)),pe.sort((Me,Le)=>Me.label.localeCompare(Le.label)),Zs.getUserAgentInfo().getOS().name==="iOS"&&(de.some((Me,Le)=>E(Me.label)&&O(de,Le)>=0),pe.some((Me,Le)=>C(Me.label)&&O(pe,Le)>=0),pe.some((Me,Le)=>S(Me.label)&&O(pe,Le)>=0)||pe.some((Me,Le)=>_(Me.label)&&O(pe,Le)>=0))),ae==="userFacing"?[...de,...pe]:[...pe,...de]}t.sortCamerasForCameraPosition=V;function B(te,ae){let ee=te.getVideoTracks();if(ee.length>0){let de=ee[0],pe;typeof de.getSettings=="function"&&(pe=de.getSettings(),pe.facingMode!=null&&pe.facingMode.length>0&&(ae.position=pe.facingMode==="environment"?"worldFacing":"userFacing"));let{label:Me=""}=de;Me.length>0&&(ae.label=Me)}}t.adjustCameraFromMediaStream=B;function Y(te,ae,ee){if(t.deviceIdToCameraObjects.has(te.deviceId))return t.deviceIdToCameraObjects.get(te.deviceId);let{label:de="",deviceId:pe}=te,Me;return!Zs.isDesktopDevice()&&ee.every(Le=>Le.label===""&&!t.deviceIdToCameraObjects.has(Le.deviceId))?Me=ee.length===1||ae+1<=Math.floor(ee.length/2)?"userFacing":"worldFacing":Me=N(de)?"worldFacing":"userFacing",{position:Me,label:de,deviceId:pe}}function z(te){let ae=te.map((ee,de,pe)=>Y(ee,de,pe)).map(ee=>(ee.deviceId!==""&&t.deviceIdToCameraObjects.set(ee.deviceId,ee),ee)).filter(ee=>!/\b(?:ir|infrared)\b/i.test(ee.label)).filter(ee=>!r.has(ee.label)).filter(ee=>!t.inaccessibleDeviceIds.has(ee.deviceId));if(!Zs.isDesktopDevice()&&ae.length>1&&!ae.some(ee=>ee.position==="worldFacing")){let ee=ae.length-1,de=ae.map(pe=>{let Me=/\b(\d+)mp?\b/i.exec(pe.label);return Me!=null?Number.parseInt(Me[1],10):Number.NaN});de.some(pe=>Number.isNaN(pe))||(ee=de.lastIndexOf(Math.max(...de))),ae[ee].position="worldFacing"}return ae}async function G(){if(d!=null&&d.length>0&&d.every(te=>te.label===""&&!t.deviceIdToCameraObjects.has(te.deviceId)))try{return await p()({video:!0,audio:!1})}catch{}}function he(te,ae){var ee,de;if(ae.length>0&&te.length===ae.length&&!ae.every((pe,Me)=>te[Me].deviceId===pe.deviceId)){let pe={};for(let[Me,Le]of te.entries()){let We=t.deviceIdToCameraObjects.get(Le.deviceId);if(We==null||We.label!==((de=(ee=ae[Me])==null?void 0:ee.label)!=null?de:""))continue;let jt=ae[Me].deviceId;pe[We.deviceId]=jt,t.inaccessibleDeviceIds.has(We.deviceId)&&t.inaccessibleDeviceIds.add(jt),We.deviceId=jt,t.deviceIdToCameraObjects.set(jt,We)}Fe.log(Fe.Level.Debug,"Detected updated camera deviceId information and updated it accordingly",pe)}}function le(){typeof navigator.mediaDevices.addEventListener=="function"?navigator.mediaDevices.addEventListener("devicechange",j):navigator.mediaDevices.ondevicechange=j}async function se(){let te,ae=v();if(ae)te=await ae();else throw new gT({fullSupport:!1,scannerSupport:!0,missingFeatures:["mediaDevices"]});return te.filter(ee=>ee.kind==="videoinput")}async function re(te=!1,ae=!1){var ee;let de=Zs.checkBrowserCompatibility();if(!de.fullSupport)throw new gT(de);if(le(),d==null||te||h){h=!1;let Me,Le=d??[];d=[];try{d=await se(),ae||(Me=await G(),Me!=null&&(d=await se())),Fe.log(Fe.Level.Debug,"Camera list (devices):",...d),d.length>0&&d.every(We=>We.deviceId==="")&&Fe.log(Fe.Level.Debug,"Incomplete camera information listed due to user permission denial, cameras will not be accessible"),he(Le,d)}catch(We){throw I(We),We}finally{for(let We of(ee=Me==null?void 0:Me.getVideoTracks())!=null?ee:[])We.stop()}}let pe=z(d);return Fe.log(Fe.Level.Debug,"Camera list (cameras): ",...pe),[...pe]}t.getCameras=re;async function me(te){return Fe.log(Fe.Level.Debug,"Attempt to access camera (parameters):",te.video),new Promise((ae,ee)=>{window.setTimeout(()=>{let de=p()(te);if(de==null){ee(new hc({name:"AbortError",message:"Cannot get stream from getUserMedia function."}));return}ae(de)},0)})}function Ce(te,ae){let ee={resizeMode:"none"};switch(te){case 0:return{...ee,width:{min:2880,ideal:ae==="fourToThree"?2880:3840,max:4096},height:{min:1800,ideal:2160,max:2400}};case 1:return{...ee,width:{min:1440,ideal:ae==="fourToThree"?1440:1920,max:2160},height:{min:900,ideal:1080,max:1440}};case 2:return{...ee,width:{min:960,ideal:ae==="fourToThree"?960:1280,max:1440},height:{min:480,ideal:720,max:960}};case 3:return{...ee,width:{min:640,ideal:640,max:800},height:{min:360,ideal:ae==="fourToThree"?480:360,max:640}};default:return{}}}t.getUserMediaVideoParameters=Ce;function $(te){te.deviceId!==""&&(Fe.log(Fe.Level.Debug,"Camera marked to be inaccessible:",te),t.inaccessibleDeviceIds.add(te.deviceId))}t.markCameraAsInaccessible=$;async function xe(te,ae,ee){Fe.log(Fe.Level.Debug,"Attempt to access camera (camera):",te);let de={audio:!1,video:Ce(ae,ee)};te.deviceId===""?de.video.facingMode={ideal:te.position==="worldFacing"?"environment":"user"}:de.video.deviceId={exact:te.deviceId};try{let pe=await me(de);return B(pe,te),pe}catch(pe){throw I(pe),["OverconstrainedError","NotReadableError","NotAllowedError"].includes(pe.name)||$(te),pe}}t.accessCameraStream=xe})(Cs||(Cs={}));var FN;(t=>{async function e(s,r){return Cs.getCameras(s??!1,r??!1)}t.getCameras=e})(FN||(FN={}));function L0e(t,e,s){let r=t.createProgram();if(!r)throw new Error("Cannot create webgl program");return t.attachShader(r,e),t.attachShader(r,s),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(Fe.log(Fe.Level.Error,"Program linking error:",t.getProgramInfoLog(r)),t.deleteProgram(r),null)}function xT(t,e,s){let r=t.createShader(e);if(!r)throw new Error("Cannot create a shader");return t.shaderSource(r,s),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(Fe.log(Fe.Level.Error,"Shader compilation error:",t.getShaderInfoLog(r)),t.deleteShader(r),null)}var $$=class{constructor(e){if(this.items=[],e.lowWaterMark>=e.capacity)throw new Error("Invalid Watermark options: lowWaterMark must be less than capacity");this.capacity=e.capacity,this.lowWaterMark=e.lowWaterMark,this.createItem=e.createItem;for(let s=0;s<this.capacity;s++)this.items.push(this.createItem())}get length(){return this.items.length}pop(){for(;this.isBelowOrEqualWaterMark();)this.items.unshift(this.createItem());return this.items.pop()}push(e){if(this.items.length<this.capacity)return this.items.push(e)}empty(){this.items.length=0}isBelowOrEqualWaterMark(){return this.items.length<=this.lowWaterMark}},U$=class{constructor(e,s){var r,i;this._contextWebGL=e,this._maxPoolCapacity=(r=s==null?void 0:s.maxPoolCapacity)!=null?r:2,this._minPoolCapacity=(i=s==null?void 0:s.minPoolCapacity)!=null?i:1}recycle(e){var s;(s=this._framePool)==null||s.push(e)}},O0e=`
attribute vec2 a_position;
varying vec2 v_texcoord;

void main() {
  gl_Position = vec4(a_position, 0, 1);
  v_texcoord = a_position * 0.5 + 0.5;
}
`,F0e=`
precision mediump float;
varying vec2 v_texcoord;
uniform sampler2D u_texture;
uniform float x_spacing; // Uniform for x-spacing between pixels

// Function to calculate grayscale
float toGray(vec4 color) {
  return dot(color.rgb, vec3(0.299, 0.587, 0.114));
}

void main() {
  // Sample adjacent pixels with spacing of 1/width
  vec4 a = texture2D(u_texture, v_texcoord + vec2(0.0 * x_spacing, 0.0));
  vec4 b = texture2D(u_texture, v_texcoord + vec2(1.0 * x_spacing, 0.0));
  vec4 c = texture2D(u_texture, v_texcoord + vec2(2.0 * x_spacing, 0.0));
  vec4 d = texture2D(u_texture, v_texcoord + vec2(3.0 * x_spacing, 0.0));

  // Calculate grayscale values
  float grayscaleA = toGray(a);
  float grayscaleB = toGray(b);
  float grayscaleC = toGray(c);
  float grayscaleD = toGray(d);

  // Set the final color with grayscale values
  gl_FragColor = vec4(grayscaleA, grayscaleB, grayscaleC, grayscaleD);
}`,B0e=class extends U${constructor(e,s){super(e,s),this.colorType="GRAYSCALE",this._positions=new Float32Array([-1,-1,-1,1,1,-1,1,-1,-1,1,1,1]),this._canvas=document.createElement("canvas")}get _webglContext(){var e;if(!this._ctx){if(this._ctx=(e=this._canvas)==null?void 0:e.getContext("webgl",{antialias:!1}),!this._ctx)throw new Error("Cannot get WebGL context");this.setup()}return this._ctx}readFromSource(e){var s,r;this.updateCanvasSizeIfNeeded(),this.updateFrameSizeIfNeeded();let i=(s=e==null?void 0:e.videoWidth)!=null?s:this._contextWebGL.drawingBufferWidth,{drawingBufferWidth:a,drawingBufferHeight:o,TEXTURE_2D:c,RGBA:d,UNSIGNED_BYTE:h,TRIANGLES:g}=this._webglContext;this._webglContext.viewport(0,0,a,o);let m=this._webglContext.getUniformLocation(this._shaderProgram,"x_spacing"),p=1/i;this._webglContext.uniform1f(m,p),this._webglContext.texImage2D(c,0,d,d,h,e),this._webglContext.drawArrays(g,0,6);let v=(r=this._framePool)==null?void 0:r.pop();if(!v)throw new Error("Frame pool found empty!");this._webglContext.readPixels(0,0,a,o,d,h,v);let j=new Uint8ClampedArray(v.buffer,0,i*o);return{width:i,height:o,data:j,colorType:"GRAYSCALE"}}setup(){this.initShaderProgram(),this.initBuffers(),this.initTexture()}dispose(){var e;this._shaderProgram&&(this._webglContext.deleteProgram(this._shaderProgram),this._shaderProgram=null),this._positionBuffer&&(this._webglContext.deleteBuffer(this._positionBuffer),this._positionBuffer=null),this._texture&&(this._webglContext.deleteTexture(this._texture),this._texture=null),this._ctx=null,(e=this._framePool)==null||e.empty(),this._canvas=void 0}updateCanvasSizeIfNeeded(){this._canvas&&(this._canvas.width!==this._contextWebGL.drawingBufferWidth/4||this._canvas.height!==this._contextWebGL.drawingBufferHeight)&&(this._canvas.width=this._contextWebGL.drawingBufferWidth/4,this._canvas.height=this._contextWebGL.drawingBufferHeight)}updateFrameSizeIfNeeded(){var e;let{drawingBufferWidth:s,drawingBufferHeight:r}=this._webglContext,i=s*r*4;this._frameSize!==i&&(this._frameSize=s*r*4,(e=this._framePool)==null||e.empty(),this._framePool=new $$({capacity:this._maxPoolCapacity,lowWaterMark:this._minPoolCapacity,createItem:()=>new Uint8ClampedArray(this._frameSize)}))}initShaderProgram(){let e=xT(this._webglContext,this._webglContext.VERTEX_SHADER,O0e),s=xT(this._webglContext,this._webglContext.FRAGMENT_SHADER,F0e);if(!e||!s)throw new Error("Shaders cannot be created");this._shaderProgram=L0e(this._webglContext,e,s),this._webglContext.useProgram(this._shaderProgram)}initBuffers(){this._positionBuffer=this._webglContext.createBuffer(),this._webglContext.bindBuffer(this._webglContext.ARRAY_BUFFER,this._positionBuffer),this._webglContext.bufferData(this._webglContext.ARRAY_BUFFER,this._positions,this._webglContext.STATIC_DRAW);let e=this._webglContext.getAttribLocation(this._shaderProgram,"a_position");this._webglContext.enableVertexAttribArray(e),this._webglContext.bindBuffer(this._webglContext.ARRAY_BUFFER,this._positionBuffer),this._webglContext.vertexAttribPointer(e,2,this._webglContext.FLOAT,!1,0,0)}initTexture(){this._texture=this._webglContext.createTexture(),this._webglContext.bindTexture(this._webglContext.TEXTURE_2D,this._texture),this._webglContext.texParameteri(this._webglContext.TEXTURE_2D,this._webglContext.TEXTURE_WRAP_S,this._webglContext.CLAMP_TO_EDGE),this._webglContext.texParameteri(this._webglContext.TEXTURE_2D,this._webglContext.TEXTURE_WRAP_T,this._webglContext.CLAMP_TO_EDGE),this._webglContext.texParameteri(this._webglContext.TEXTURE_2D,this._webglContext.TEXTURE_MIN_FILTER,this._webglContext.LINEAR),this._webglContext.texParameteri(this._webglContext.TEXTURE_2D,this._webglContext.TEXTURE_MAG_FILTER,this._webglContext.LINEAR);let e=this._webglContext.getUniformLocation(this._shaderProgram,"u_texture");this._webglContext.uniform1i(e,0)}},z0e=(t=>(t.RGBA="RGBA",t.GRAYSCALE="GRAYSCALE",t))(z0e||{}),vT=class extends U${constructor(){super(...arguments),this.colorType="RGBA"}get _initialized(){return this._texture!=null&&this._framebuffer!=null}readFromSource(e){this._initialized||this.setup(),this.updateFrameSizeIfNeeded();let s=this._framePool.pop();return this._contextWebGL.texImage2D(this._contextWebGL.TEXTURE_2D,0,this._contextWebGL.RGBA,this._contextWebGL.RGBA,this._contextWebGL.UNSIGNED_BYTE,e),this._contextWebGL.readPixels(0,0,this._contextWebGL.drawingBufferWidth,this._contextWebGL.drawingBufferHeight,this._contextWebGL.RGBA,this._contextWebGL.UNSIGNED_BYTE,s),{width:this._contextWebGL.drawingBufferWidth,height:this._contextWebGL.drawingBufferHeight,data:s,colorType:this.colorType}}setup(){this._texture=this._contextWebGL.createTexture(),this._texture==null&&Fe.log(Fe.Level.Warn,"Could not create texture from WebGLRenderingContext"),this._contextWebGL.bindTexture(this._contextWebGL.TEXTURE_2D,this._texture),this._framebuffer=this._contextWebGL.createFramebuffer(),this._framebuffer==null&&Fe.log(Fe.Level.Warn,"Could not create frameBuffer from WebGLRenderingContext"),this._contextWebGL.bindFramebuffer(this._contextWebGL.FRAMEBUFFER,this._framebuffer),this._contextWebGL.framebufferTexture2D(this._contextWebGL.FRAMEBUFFER,this._contextWebGL.COLOR_ATTACHMENT0,this._contextWebGL.TEXTURE_2D,this._texture,0),this._contextWebGL.texParameteri(this._contextWebGL.TEXTURE_2D,this._contextWebGL.TEXTURE_WRAP_S,this._contextWebGL.CLAMP_TO_EDGE),this._contextWebGL.texParameteri(this._contextWebGL.TEXTURE_2D,this._contextWebGL.TEXTURE_WRAP_T,this._contextWebGL.CLAMP_TO_EDGE),this._contextWebGL.texParameteri(this._contextWebGL.TEXTURE_2D,this._contextWebGL.TEXTURE_MIN_FILTER,this._contextWebGL.NEAREST),this._contextWebGL.texParameteri(this._contextWebGL.TEXTURE_2D,this._contextWebGL.TEXTURE_MAG_FILTER,this._contextWebGL.NEAREST)}dispose(){var e;this._texture!=null&&(this._contextWebGL.deleteTexture(this._texture),this._texture=null),this._framebuffer!=null&&(this._contextWebGL.deleteFramebuffer(this._framebuffer),this._framebuffer=null),(e=this._framePool)==null||e.empty()}updateFrameSizeIfNeeded(){var e;let{drawingBufferWidth:s,drawingBufferHeight:r}=this._contextWebGL,i=s*r*4;this._frameSize!==i&&(this._frameSize=i,(e=this._framePool)==null||e.empty(),this._framePool=new $$({capacity:this._maxPoolCapacity,lowWaterMark:this._minPoolCapacity,createItem:()=>new Uint8ClampedArray(this._frameSize)}))}},V0e=(t=>(t.CONTINUOUS="continuous",t.MANUAL="manual",t.NONE="none",t.SINGLE_SHOT="single-shot",t))(V0e||{}),$0e=(t=>(t[t.ULTRA_HD=0]="ULTRA_HD",t[t.FULL_HD=1]="FULL_HD",t[t.HD=2]="HD",t[t.SD=3]="SD",t[t.NONE=4]="NONE",t))($0e||{}),U0e=(t=>(t.CAMERA_PROPERTIES="cameraProperties",t.CAMERA_ACCESS_ERROR="cameraAccessError",t))(U0e||{}),Ba=class $s{constructor(){this.checkCameraVideoStreamAccessIfVisibleListener=this.checkCameraVideoStreamAccessIfVisible.bind(this),this.handleWebGLContextLostListener=this.handleWebGLContextLost.bind(this),this.listeners=new Map,this.mirrorImageOverrides=new Map,this.postStreamInitializationListener=this.postStreamInitialization.bind(this),this.triggerManualFocusListener=this.triggerManualFocus.bind(this),this.triggerZoomMoveListener=this.triggerZoomMove.bind(this),this.triggerZoomStartListener=this.triggerZoomStart.bind(this),this.videoResizeListener=R$(this.handleVideoResize.bind(this),500),this.videoTrackEndedListener=this.videoTrackEndedRecovery.bind(this),this.videoTrackMuteListener=this.videoTrackMuteRecovery.bind(this),this._synchronousFrameHandling=!1,this._glFrameReaders={GRAYSCALE:null,RGBA:null},this._frameReaderType="RGBA",this.cameraPosition="worldFacing",this.gui={isCameraRecoveryVisible:()=>!1,setCameraRecoveryVisible:()=>{}},this.isWebGLSupported=!Zs.checkBrowserCompatibility().missingFeatures.includes("webGL"),this.videoElement=document.createElement("video"),this.canvas=document.createElement("canvas"),this.canvas.addEventListener("webglcontextlost",this.handleWebGLContextLostListener)}get mediaStream(){return this._mediaStream}set mediaStream(e){this._mediaStream=e,e&&(this.mediaTrackCapabilitiesPromise=new Promise(s=>{this.mediaTrackCapabilitiesPromiseResolver=s}))}get synchronousFrameHandling(){return this._synchronousFrameHandling}get canvas2dContext(){return this._canvas2dContext||(this._canvas2dContext=this.canvas.getContext("2d",{willReadFrequently:!0}),this._canvas2dContext==null&&Fe.log(Fe.Level.Warn,"Unable to get 2d canvas context"),this.handleVideoResize()),this._canvas2dContext}get canvasWebGLContext(){var e;if(!this._canvas2dContext&&!this._canvasWebGLContext){if(!this.isWebGLSupported){Fe.log(Fe.Level.Warn,"WebGL context not supported, falling back to 2d canvas context. This may impact the scanning performance.");return}let s=(e=this.canvas.getContext("webgl",{alpha:!1,antialias:!1}))!=null?e:this.canvas.getContext("experimental-webgl",{alpha:!1,antialias:!1});s!=null&&(this._canvasWebGLContext=s,this.handleVideoResize())}return this._canvasWebGLContext}static instance(){return $s._instance==null&&($s._instance=new $s),$s._instance}recycle(e){var s;(s=this.getFrameReader())==null||s.recycle(e)}getCurrentFrame(){var e;return(e=this._glFrameReaders.RGBA)==null?void 0:e.readFromSource(this.videoElement)}requestVideoFrame(e){return"requestVideoFrameCallback"in HTMLVideoElement.prototype?this.videoElement.requestVideoFrameCallback(e):requestAnimationFrame(e)}cancelVideoFrame(e){if("cancelVideoFrameCallback"in HTMLVideoElement.prototype){this.videoElement.cancelVideoFrameCallback(e);return}cancelAnimationFrame(e)}addListener(e,s){var r;let i=(r=this.listeners.get(e))!=null?r:[];i.includes(s)||this.listeners.set(e,[...i,s])}async applyCameraSettings(e){if(this.selectedCameraSettings=e,this.activeCamera==null)throw new hc($s.noCameraErrorParameters);return this.initializeCameraWithSettings(this.activeCamera,e)}captureImage(){var e;if(((e=this.mediaStream)==null?void 0:e.active)!=null){if(this.canvasWebGLContext!=null)return this.captureImageForWebGLContext();if(this.canvas2dContext!=null)return this.captureImageFor2dContext()}return null}async initializeCameraWithSettings(e,s){if(this.cameraInitializationPromise&&await this.cameraInitializationPromise,e==null)throw new hc($s.noCameraErrorParameters);return this.setSelectedCamera(e),this.selectedCameraSettings=s,this.activeCameraSettings=s,this.cameraInitializationPromise=this.initializeCameraAndCheckUpdatedSettings(e),this.cameraInitializationPromise}isMirrorImageEnabled(){if(this.selectedCamera&&this.activeCamera){let e=this.mirrorImageOverrides.get(this.activeCamera);return e??this.activeCamera.position==="userFacing"}return!1}isPinchToZoomEnabled(){return this.pinchToZoomEnabled}isTapToFocusEnabled(){return this.tapToFocusEnabled}async isTorchAvailable(){var e;return this.mediaStream?(await this.waitForCapabilities(),((e=this.mediaTrackCapabilities)==null?void 0:e.torch)===!0):!1}async playVideo(){return new Promise(e=>{this._canvas2dContext&&this._canvas2dContext.clearRect(0,0,this.canvas.width,this.canvas.height);let s=this.videoElement.play();s==null?e():s.then(e).catch(()=>{e()})})}async reinitializeCamera(){if(this.activeCamera==null)Fe.log(Fe.Level.Debug,"Camera reinitialization delayed");else{Fe.log(Fe.Level.Debug,"Reinitialize camera:",this.activeCamera);try{let e=this.activeCamera;await this.stopStream(),await this.initializeCameraWithSettings(e,this.activeCameraSettings)}catch(e){throw Fe.log(Fe.Level.Warn,"Couldn't access camera:",this.activeCamera,e),this.emit("cameraAccessError",e),e}}}removeListener(e,s){var r;let i=((r=this.listeners.get(e))!=null?r:[]).filter(a=>a!==s);this.listeners.set(e,i)}async setCameraPosition(e){var s;this.setInitialCameraPosition(e);let r=Cs.getMainCameraForPosition(await Cs.getCameras(),e);if(r&&r.deviceId!==((s=this.selectedCamera)==null?void 0:s.deviceId))return this.initializeCameraWithSettings(r,this.selectedCameraSettings)}async setExposure(e){var s,r,i,a,o,c,d,h;let g=(r=(s=this.mediaStream)==null?void 0:s.getVideoTracks())!=null?r:[];if(g.length===0||typeof g[0].applyConstraints!="function")return;await this.waitForCapabilities();let m=e.time!=null&&e.time>0?"manual":"continuous";if(((a=(i=this.mediaTrackCapabilities)==null?void 0:i.exposureMode)==null?void 0:a.includes(m))===!0){if(await g[0].applyConstraints({advanced:[{exposureMode:m}]}),e.time!=null&&e.time>0&&this.mediaTrackCapabilities.exposureTime){let p=Math.max((o=this.mediaTrackCapabilities.exposureTime.min)!=null?o:.01,Math.min(e.time,(c=this.mediaTrackCapabilities.exposureTime.max)!=null?c:1e5));await g[0].applyConstraints({advanced:[{exposureTime:p}]})}else if(e.compensation!=null&&m==="continuous"&&this.mediaTrackCapabilities.exposureCompensation){let p=Math.max((d=this.mediaTrackCapabilities.exposureCompensation.min)!=null?d:-10,Math.min(e.compensation,(h=this.mediaTrackCapabilities.exposureCompensation.max)!=null?h:10));await g[0].applyConstraints({advanced:[{exposureCompensation:p}]})}}}async setFocus(e){var s,r,i,a,o;if(!this.mediaStream)return;let c=this.mediaStream.getVideoTracks();if(c.length>0&&typeof c[0].applyConstraints=="function"){await this.waitForCapabilities();let d=e>=0?"manual":"continuous";if(((r=(s=this.mediaTrackCapabilities)==null?void 0:s.focusMode)==null?void 0:r.includes(d))===!0&&(await c[0].applyConstraints({advanced:[{focusMode:d}]}),d==="manual"&&this.mediaTrackCapabilities.focusDistance)){let h=Math.max(0,Math.min(e,1))*(((i=this.mediaTrackCapabilities.focusDistance.max)!=null?i:1e3)-((a=this.mediaTrackCapabilities.focusDistance.min)!=null?a:.01))+((o=this.mediaTrackCapabilities.focusDistance.min)!=null?o:.01);await c[0].applyConstraints({advanced:[{focusDistance:h}]})}}}async setFrameRate(e){var s,r,i;if(this.mediaStream&&(await this.waitForCapabilities(),(s=this.mediaTrackCapabilities)!=null&&s.frameRate)){let a=this.mediaStream.getVideoTracks();if(a.length>0&&typeof a[0].applyConstraints=="function"){let o=Math.min((r=this.mediaTrackCapabilities.frameRate.max)!=null?r:240,(i=e.max)!=null?i:240);await a[0].applyConstraints({advanced:[{frameRate:o}]})}}}setInitialCameraPosition(e){this.cameraPosition=e}setInteractionOptions(e,s,r){this.torchToggleEnabled=e,this.tapToFocusEnabled=s,this.pinchToZoomEnabled=r}setMirrorImageEnabled(e,s){this.selectedCamera&&(e?(this.videoElement.classList.add($s.MIRRORED_CLASS_NAME),this.canvas.classList.add($s.MIRRORED_CLASS_NAME)):(this.videoElement.classList.remove($s.MIRRORED_CLASS_NAME),this.canvas.classList.remove($s.MIRRORED_CLASS_NAME)),s&&this.mirrorImageOverrides.set(this.selectedCamera,e))}setPinchToZoomEnabled(e){this.pinchToZoomEnabled=e,this.mediaStream&&(this.pinchToZoomEnabled?this.enablePinchToZoomListeners():this.disablePinchToZoomListeners())}setSelectedCamera(e){this.selectedCamera=e}setSelectedCameraSettings(e){this.selectedCameraSettings=e}setTapToFocusEnabled(e){this.tapToFocusEnabled=e,this.mediaStream&&(this.tapToFocusEnabled?this.enableTapToFocusListeners():this.disableTapToFocusListeners())}async setTorchEnabled(e){var s;if(this.mediaStream&&((s=this.mediaTrackCapabilities)==null?void 0:s.torch)===!0){this.torchEnabled=e;let r=this.mediaStream.getVideoTracks();r.length>0&&typeof r[0].applyConstraints=="function"&&await r[0].applyConstraints({advanced:[{torch:e}]})}}async setZoom(e){var s,r,i;if(this.mediaStream&&(await this.waitForCapabilities(),(s=this.mediaTrackCapabilities)!=null&&s.zoom)){let a=this.mediaStream.getVideoTracks();if(a.length>0&&typeof a[0].applyConstraints=="function"){let o=Math.max((r=this.mediaTrackCapabilities.zoom.min)!=null?r:1,Math.min(e,(i=this.mediaTrackCapabilities.zoom.max)!=null?i:16));await a[0].applyConstraints({advanced:[{zoom:o}]})}}}async setupCameras(){return this.cameraSetupPromise?this.cameraSetupPromise:(this.cameraSetupPromise=this.setupCamerasAndStream(),this.cameraSetupPromise)}pauseStream(){if(!this.mediaStream)return;let e=this.mediaStream.getVideoTracks()[0];e.enabled=!1,Fe.log(Fe.Level.Debug,"Pause camera video stream",this.mediaStream)}resumeStream(){if(!this.mediaStream)return;let e=this.mediaStream.getVideoTracks()[0];e.enabled=!0,Fe.log(Fe.Level.Debug,"Resume camera video stream",this.mediaStream)}async stopStream(e=!1){this.activeCamera&&(this.activeCamera.currentResolution=void 0),this.activeCamera=void 0,this.torchEnabled=!1,this.mediaStream&&(Fe.log(Fe.Level.Debug,`Stop camera video stream access${e?" (abort access detection)":""}:`,this.mediaStream),document.removeEventListener("visibilitychange",this.checkCameraVideoStreamAccessIfVisibleListener),window.clearTimeout(this.cameraAccessTimeout),window.clearInterval(this.videoMetadataCheckInterval),window.clearTimeout(this.getCapabilitiesTimeout),window.clearTimeout(this.manualFocusWaitTimeout),window.clearTimeout(this.manualToAutofocusResumeTimeout),window.clearInterval(this.autofocusInterval),this.videoElement.pause(),await new Promise(s=>{setTimeout(()=>{var r,i,a;for(let o of(i=(r=this.mediaStream)==null?void 0:r.getVideoTracks())!=null?i:[])o.removeEventListener("ended",this.videoTrackEndedListener),o.stop();this.videoElement.srcObject=null,this._canvas2dContext&&this._canvas2dContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.mediaStream=void 0,this.mediaTrackCapabilities=void 0,this.mediaTrackCapabilitiesPromise=void 0,this.mediaTrackCapabilitiesPromiseResolver=void 0,e||(a=this.abortedCameraInitializationResolveCallback)==null||a.call(this),s()},0)}))}stopVideoTracks(){if(this.mediaStream!=null)for(let e of this.mediaStream.getVideoTracks())e.stop()}async toggleTorch(){this.torchEnabled=!this.torchEnabled,await this.setTorchEnabled(this.torchEnabled)}updateCanvasVideoImage(){this.canvas2dContext.drawImage(this.videoElement,0,0)}async waitForCapabilities(){var e;return(e=this.mediaTrackCapabilitiesPromise)!=null?e:Promise.resolve()}setFrameReaderType(e){e!==this._frameReaderType&&(this._frameReaderType=e,Fe.log(Fe.Level.Debug,`Change frame reader type to ${this._frameReaderType} mode`))}async allowPictureInPicture(e){e?(this.videoElement.disablePictureInPicture=!1,this.videoElement.removeAttribute("controlslist"),this.videoElement.removeAttribute("disablepictureinpicture")):(this.videoElement.disablePictureInPicture=!0,this.videoElement.setAttribute("controlslist","nodownload"),this.videoElement.setAttribute("disablepictureinpicture","true")),await this.reinitializeCamera()}setFrameHandling(e){var s;this._synchronousFrameHandling=e,this._frameReaderOptions=this.getFrameReaderOptions(e),(s=this._glFrameReaders[this._frameReaderType])==null||s.dispose(),delete this._glFrameReaders[this._frameReaderType]}async accessAutoselectedCamera(e){let s=Cs.sortCamerasForCameraPosition(e,this.cameraPosition),r=s.shift();for(;r;)try{await this.initializeCameraWithSettings(r,this.selectedCameraSettings);return}catch(i){if(this.setSelectedCamera(),s.length>0){Fe.log(Fe.Level.Warn,"Couldn't access camera:",r,i),r=s.shift();continue}throw i}throw new hc($s.noCameraErrorParameters)}getFrameReaderOptions(e){return e?{minPoolCapacity:0,maxPoolCapacity:1}:Zs.isDesktopDevice()?{maxPoolCapacity:2,minPoolCapacity:1}:{maxPoolCapacity:10,minPoolCapacity:3}}getFrameReader(){var e;if(this._glFrameReaders[this._frameReaderType])return this._glFrameReaders[this._frameReaderType];if(!this._canvasWebGLContext)return null;let s=(e=this._frameReaderOptions)!=null?e:this.getFrameReaderOptions(this._synchronousFrameHandling);switch(this._frameReaderType){case"GRAYSCALE":{this._glFrameReaders.GRAYSCALE=new B0e(this._canvasWebGLContext,s),this._glFrameReaders.RGBA=new vT(this._canvasWebGLContext,{minPoolCapacity:1,maxPoolCapacity:2});break}case"RGBA":{this._glFrameReaders.RGBA=new vT(this._canvasWebGLContext,s);break}default:y$(this._frameReaderType)}return Fe.debug(`Created frame reader ${this._frameReaderType}`,s),this._glFrameReaders[this._frameReaderType]}async accessInitialCamera(){let e={position:this.cameraPosition,deviceId:"",label:""};try{await this.initializeCameraWithSettings(e,this.selectedCameraSettings)}catch{}finally{this.setSelectedCamera()}return e}recreateCanvas(){this.canvas.removeEventListener("webglcontextlost",this.handleWebGLContextLostListener),this._canvasWebGLContext=void 0,this._canvas2dContext=void 0;for(let s of Object.values(this._glFrameReaders))s==null||s.dispose();let e=document.createElement("canvas");e.addEventListener("webglcontextlost",this.handleWebGLContextLostListener),e.width=this.canvas.width,e.height=this.canvas.height,e.className=this.canvas.className,this.canvas=e}captureImageFor2dContext(){if(!this.isVideoAndContextStateValid())return null;let{width:e,height:s}=this.canvas;return{colorType:"RGBA",data:this.canvas2dContext.getImageData(0,0,e,s).data,width:e,height:s}}areVideoAndWebGLSizeMismatching(){return this.canvasWebGLContext?this.canvasWebGLContext.drawingBufferWidth!==this.videoElement.videoWidth||this.canvasWebGLContext.drawingBufferHeight!==this.videoElement.videoHeight:!0}captureImageForWebGLContext(){if(!this.isVideoAndContextStateValid()||!this.canvasWebGLContext||this.canvasWebGLContext.drawingBufferWidth<=2||this.canvasWebGLContext.drawingBufferHeight<=2||this.areVideoAndWebGLSizeMismatching()||this.getFrameReader()==null)return null;let e=this.getFrameReader().readFromSource(this.videoElement);if(e.data[3]!==255&&e.colorType==="RGBA"){if(Fe.log(Fe.Level.Warn,"Detected incorrect GPU accelerated WebGL image processing, switching to canvas mode"),this.recreateCanvas(),this.canvas2dContext==null)throw new Error("Unable to get 2d canvas context");return this.captureImage()}return e}async checkCameraAccess(e){return new Promise((s,r)=>{this.cameraAccessRejectCallback=i=>{Fe.log(Fe.Level.Debug,"Camera video stream access failure (video data load timeout):",e),this.gui.setCameraRecoveryVisible(!0),r(i)},this.setCameraAccessTimeout()})}checkCameraVideoStreamAccessIfVisible(){document.visibilityState==="visible"&&(Fe.log(Fe.Level.Debug,"Page is visible again, waiting for camera video stream start..."),document.removeEventListener("visibilitychange",this.checkCameraVideoStreamAccessIfVisibleListener),this.setCameraAccessTimeout())}async checkVideoMetadata(e){return new Promise((s,r)=>{this.videoElement.onloadeddata=()=>{if(this.videoElement.onloadeddata=null,window.clearTimeout(this.cameraAccessTimeout),this.videoElement.videoWidth>2&&this.videoElement.videoHeight>2&&this.videoElement.currentTime>0){this.updateActiveCameraCurrentResolution(e),Fe.log(Fe.Level.Debug,"Camera video stream access success:",e),s();return}let i=performance.now();window.clearInterval(this.videoMetadataCheckInterval),this.videoMetadataCheckInterval=window.setInterval(async()=>{if(this.videoElement.videoWidth<=2||this.videoElement.videoHeight<=2||this.videoElement.currentTime===0){if(performance.now()-i>$s.videoMetadataCheckTimeoutMs){Fe.log(Fe.Level.Warn,"Camera video stream access failure (valid video metadata timeout):",e),window.clearInterval(this.videoMetadataCheckInterval),await this.stopStream(!0),r(new hc($s.notReadableErrorParameters));return}return}window.clearInterval(this.videoMetadataCheckInterval),this.updateActiveCameraCurrentResolution(e),Fe.log(Fe.Level.Debug,"Camera video stream access success:",e),s()},$s.videoMetadataCheckIntervalMs)}})}disablePinchToZoomListeners(){this.videoElement.removeEventListener("touchstart",this.triggerZoomStartListener),this.videoElement.removeEventListener("touchmove",this.triggerZoomMoveListener)}disableTapToFocusListeners(){for(let e of["touchend","mousedown"])this.videoElement.removeEventListener(e,this.triggerManualFocusListener)}emit(e,s){var r;let i=(r=this.listeners.get(e))!=null?r:[];for(let a of i)a(s)}enablePinchToZoomListeners(){this.videoElement.addEventListener("touchstart",this.triggerZoomStartListener),this.videoElement.addEventListener("touchmove",this.triggerZoomMoveListener)}enableTapToFocusListeners(){for(let e of["touchend","mousedown"])this.videoElement.addEventListener(e,this.triggerManualFocusListener)}getActiveCamera(e,s,r){return e.length===1?e[0]:e.find(i=>i.deviceId===r||i.label!==""&&i.label===s)}getInitialCameraResolutionConstraint(e){var s;let r;switch((s=this.activeCameraSettings)==null?void 0:s.preferredResolution){case"uhd4k":{r=0;break}case"fullHd":{r=1;break}case"hd":default:{r=2;break}}return r}async handleCameraInitializationError(e,s,r){if(!["OverconstrainedError","NotReadableError"].includes(r.name)||r.name==="NotReadableError"&&s===4)throw Fe.log(Fe.Level.Debug,"Camera video stream access failure (unrecoverable error)",e,r),r.name!=="NotAllowedError"&&Cs.markCameraAsInaccessible(e),r;if(r.name==="OverconstrainedError"&&s===4){if(e.deviceId==="")throw Fe.log(Fe.Level.Warn,"Camera video stream access failure (no camera with such type error)",e,r),r;Fe.log(Fe.Level.Warn,"Detected non-existent deviceId error, attempt to find and reaccess updated camera",e,r);let i=e.deviceId;if(await Cs.getCameras(!0),i===e.deviceId)throw Fe.log(Fe.Level.Warn,"Camera video stream access failure (updated camera not found after non-existent deviceId error)",e,r),Cs.markCameraAsInaccessible(e),r;return Fe.log(Fe.Level.Warn,"Updated camera found (recovered from non-existent deviceId error), attempt to access it",e),this.initializeCameraForResolution(e)}return this.initializeCameraForResolution(e,s+1)}handleVideoResize(){if(!(this.videoElement.videoWidth<=2||this.videoElement.videoHeight<=2)){if(this.activeCamera&&this.updateActiveCameraCurrentResolution(this.activeCamera),this.canvasWebGLContext!=null){if(this.canvas.width===this.videoElement.videoWidth&&this.canvas.height===this.videoElement.videoHeight)return;this.canvas.width=this.videoElement.videoWidth,this.canvas.height=this.videoElement.videoHeight,this.canvasWebGLContext.viewport(0,0,this.canvasWebGLContext.drawingBufferWidth,this.canvasWebGLContext.drawingBufferHeight)}else if(this.canvas2dContext!=null){if(this.canvas.width===this.videoElement.videoWidth&&this.canvas.height===this.videoElement.videoHeight)return;this.canvas.width=this.videoElement.videoWidth,this.canvas.height=this.videoElement.videoHeight}}}handleWebGLContextLost(){Fe.log(Fe.Level.Warn,"WebGL context has been lost, restoring..."),this._canvasWebGLContext=void 0,this.canvasWebGLContext?(this.handleVideoResize(),Fe.log(Fe.Level.Warn,"WebGL context restored")):Fe.log(Fe.Level.Error,"WebGL context restore failed")}async initializeCameraAndCheckUpdatedSettings(e){var s,r,i,a,o;try{if(await this.initializeCameraForResolution(e),this.selectedCameraSettings!==this.activeCameraSettings&&(this.selectedCameraSettings==null||this.activeCameraSettings==null||Object.keys(this.selectedCameraSettings).some(p=>{var v,j;return((v=this.selectedCameraSettings)==null?void 0:v[p])!==((j=this.activeCameraSettings)==null?void 0:j[p])}))){this.activeCameraSettings=this.selectedCameraSettings,await this.initializeCameraAndCheckUpdatedSettings(e);return}this.activeCameraSettings&&this.activeCameraSettings.zoomFactor>1&&await this.setZoom(this.activeCameraSettings.zoomFactor);let c=(s=this.activeCameraSettings)==null?void 0:s.getProperty("minFrameRate"),d=(r=this.activeCameraSettings)==null?void 0:r.getProperty("maxFrameRate");(c!=null||d!=null)&&await this.setFrameRate({min:c,max:d});let h=(i=this.activeCameraSettings)==null?void 0:i.getProperty("manualLensPosition");h!=null&&await this.setFocus(h);let g=(a=this.activeCameraSettings)==null?void 0:a.getProperty("exposureTargetBias"),m=(o=this.activeCameraSettings)==null?void 0:o.getProperty("exposureDuration");(g!=null||m!=null)&&await this.setExposure({compensation:g,time:m})}finally{this.cameraInitializationPromise=void 0}}async initializeCameraForResolution(e,s){var r;this.gui.setCameraRecoveryVisible(!1);let i=s??this.getInitialCameraResolutionConstraint(e);this.mediaStream!=null&&e.deviceId!==""&&((r=this.activeCamera)==null?void 0:r.deviceId)===e.deviceId?await(Zs.isIPhone()?this.initializeStreamForResolution(e,i):this.updateStreamForResolution(e,i)):await this.initializeStreamForResolution(e,i)}async initializeStreamForResolution(e,s){var r;await this.stopStream();try{let i=(r=this.activeCameraSettings)==null?void 0:r.getProperty("preferredAspectRatio"),a=await Cs.accessCameraStream(e,s,i);if(Fe.log(Fe.Level.Debug,"Camera accessed, waiting for camera video stream start..."),typeof a.getVideoTracks()[0].getSettings=="function"){let o=a.getVideoTracks()[0].getSettings();if(o.width!=null&&o.height!=null&&(o.width===2||o.height===2)){if(Fe.log(Fe.Level.Debug,"Camera video stream access failure (invalid video metadata):",e),s===4)throw new hc($s.notReadableErrorParameters);return await this.stopStream(),this.initializeStreamForResolution(e,s+1)}}this.mediaStream=a;for(let o of this.mediaStream.getVideoTracks())o.addEventListener("ended",this.videoTrackEndedListener),o.addEventListener("mute",this.videoTrackMuteListener),o.addEventListener("unmute",this.videoTrackMuteListener);try{await this.setupCameraStreamVideo(e,a)}catch(o){if(s===4)throw o;return this.initializeStreamForResolution(e,s+1)}}catch(i){return this.handleCameraInitializationError(e,s,i)}}isVideoAndContextStateValid(){return this.videoElement.readyState===4&&this.videoElement.videoWidth>2&&this.videoElement.videoHeight>2&&this.canvas.width>2&&this.canvas.height>2}postStreamInitialization(){window.clearTimeout(this.getCapabilitiesTimeout),this.getCapabilitiesTimeout=window.setTimeout(()=>{this.storeStreamCapabilities(),this.setupAutofocus()},$s.getCapabilitiesTimeoutMs)}async recoverStreamIfNeeded(){var e,s;let r=(e=this.mediaStream)==null?void 0:e.getVideoTracks();((s=r==null?void 0:r[0])==null?void 0:s.readyState)==="ended"&&await this.reinitializeCamera()}reportCameraProperties(e,s,r=!0){this.emit("cameraProperties",{deviceId:e,isFrontFacing:s==="userFacing",hasAutofocus:r})}setCameraAccessTimeout(){window.clearTimeout(this.cameraAccessTimeout),this.cameraAccessTimeout=window.setTimeout(async()=>{var e;document.visibilityState==="visible"?(await this.stopStream(!0),(e=this.cameraAccessRejectCallback)==null||e.call(this,new hc($s.notReadableErrorParameters))):(Fe.log(Fe.Level.Debug,"Page is currently not visible, delay camera video stream access detection"),document.addEventListener("visibilitychange",this.checkCameraVideoStreamAccessIfVisibleListener))},$s.cameraAccessTimeoutMs)}setupAutofocus(){if(window.clearTimeout(this.manualFocusWaitTimeout),window.clearTimeout(this.manualToAutofocusResumeTimeout),this.mediaStream&&this.mediaTrackCapabilities){let e=this.mediaTrackCapabilities.focusMode;Array.isArray(e)&&!e.includes("continuous")&&e.includes("single-shot")&&(window.clearInterval(this.autofocusInterval),this.autofocusInterval=window.setInterval(this.triggerAutoFocus.bind(this),$s.autofocusIntervalMs))}}async setupCameraStreamVideo(e,s){this.videoElement.addEventListener("loadedmetadata",this.postStreamInitializationListener),this.videoElement.addEventListener("resize",this.videoResizeListener),this.tapToFocusEnabled&&this.enableTapToFocusListeners(),this.pinchToZoomEnabled&&this.enablePinchToZoomListeners();let r=Promise.race([this.checkCameraAccess(e),this.checkVideoMetadata(e),new Promise(i=>{this.abortedCameraInitializationResolveCallback=i})]);return this.videoElement.srcObject=s,this.videoElement.load(),await this.playVideo(),this.handleVideoResize(),this.reportCameraProperties(e.deviceId,e.position),r}async setupCamerasAndStream(){var e,s;try{let r;this.selectedCamera==null&&(r=await this.accessInitialCamera());let i=await Cs.getCameras(!1,!0),a=(s=(e=this.mediaStream)==null?void 0:e.getVideoTracks()[0])==null?void 0:s.getSettings().deviceId;if(this.mediaStream&&r){let o=this.getActiveCamera(i,r.label,a);if(o){if(Cs.adjustCameraFromMediaStream(this.mediaStream,o),Zs.isDesktopDevice()&&(Cs.setMainCameraForPositionOverridesOnDesktop(this.cameraPosition,o),Cs.setMainCameraForPositionOverridesOnDesktop(o.position,o)),i.length===1||Cs.getMainCameraForPosition(i,this.cameraPosition)===o){Fe.log(Fe.Level.Debug,"Initial camera access was correct (main camera), keep camera:",o),this.setSelectedCamera(o),this.updateActiveCameraCurrentResolution(o),await this.recoverStreamIfNeeded();return}Fe.log(Fe.Level.Debug,"Initial camera access was incorrect (not main camera), change camera",{...r,deviceId:a})}else Fe.log(Fe.Level.Debug,"Initial camera access was incorrect (unknown camera), change camera",{...r,deviceId:a})}if(this.selectedCamera==null){await this.accessAutoselectedCamera(i);return}await this.initializeCameraWithSettings(this.selectedCamera,this.selectedCameraSettings)}finally{this.cameraSetupPromise=void 0}}storeStreamCapabilities(){var e;if(this.mediaStream){let s=this.mediaStream.getVideoTracks();s.length>0&&typeof s[0].getCapabilities=="function"&&(this.mediaTrackCapabilities=s[0].getCapabilities()),this.mediaTrackCapabilitiesPromiseResolver&&this.mediaTrackCapabilitiesPromiseResolver()}this.activeCamera&&this.reportCameraProperties(this.activeCamera.deviceId,this.activeCamera.position,((e=this.mediaTrackCapabilities)==null?void 0:e.focusMode)==null||this.mediaTrackCapabilities.focusMode.includes("continuous"))}async triggerAutoFocus(){await this.triggerFocusMode("single-shot")}async triggerFocusMode(e){if(this.mediaStream){let s=this.mediaStream.getVideoTracks();if(s.length>0&&typeof s[0].applyConstraints=="function")try{await s[0].applyConstraints({advanced:[{focusMode:e}]})}catch{}}}async triggerManualFocus(e){if(e){if(e.preventDefault(),e.type==="touchend"&&e.touches.length>0)return;if(this.pinchToZoomDistance!=null){this.pinchToZoomDistance=void 0;return}}if(window.clearTimeout(this.manualFocusWaitTimeout),window.clearTimeout(this.manualToAutofocusResumeTimeout),!this.mediaStream||!this.mediaTrackCapabilities)return;let s=this.mediaTrackCapabilities.focusMode;Array.isArray(s)&&s.includes("single-shot")&&(s.includes("continuous")&&s.includes("manual")?await this.triggerManualFocusForContinuous():s.includes("continuous")||await this.triggerManualFocusForSingleShot())}async triggerManualFocusForContinuous(){var e;if(!this.mediaStream)return;this.manualToAutofocusResumeTimeout=window.setTimeout(async()=>{await this.triggerFocusMode("continuous")},$s.manualToAutofocusResumeTimeoutMs);let s=!0,r=this.mediaStream.getVideoTracks();r.length>0&&typeof r[0].getConstraints=="function"&&(s=((e=r[0].getConstraints().advanced)==null?void 0:e.some(i=>i.focusMode==="manual"))===!0),s?(await this.triggerFocusMode("continuous"),this.manualFocusWaitTimeout=window.setTimeout(async()=>{await this.triggerFocusMode("manual")},$s.manualFocusWaitTimeoutMs)):await this.triggerFocusMode("manual")}async triggerManualFocusForSingleShot(){window.clearInterval(this.autofocusInterval),this.manualToAutofocusResumeTimeout=window.setTimeout(()=>{this.autofocusInterval=window.setInterval(this.triggerAutoFocus.bind(this),$s.autofocusIntervalMs)},$s.manualToAutofocusResumeTimeoutMs);try{await this.triggerFocusMode("single-shot")}catch{}}async triggerZoomMove(e){this.pinchToZoomDistance==null||(e==null?void 0:e.touches.length)!==2||e.preventDefault()}triggerZoomStart(e){var s,r,i,a;if((e==null?void 0:e.touches.length)!==2||(e.preventDefault(),this.pinchToZoomDistance=Math.hypot((e.touches[1].screenX-e.touches[0].screenX)/screen.width,(e.touches[1].screenY-e.touches[0].screenY)/screen.height),!this.mediaStream||!((s=this.mediaTrackCapabilities)!=null&&s.zoom)))return;let o=this.mediaStream.getVideoTracks();if(o.length===0||typeof o[0].getConstraints!="function")return;this.pinchToZoomInitialZoom=(r=this.mediaTrackCapabilities.zoom.min)!=null?r:1;let c=o[0].getConstraints();if(c.advanced){let d=(i=c.advanced.find(h=>"zoom"in h))==null?void 0:i.zoom;d!=null&&(this.pinchToZoomInitialZoom=typeof d=="number"?d:(a=d.ideal)!=null?a:1)}}updateActiveCameraCurrentResolution(e){this.videoElement.videoWidth>2&&this.videoElement.videoHeight>2&&(e.currentResolution={width:this.videoElement.videoWidth,height:this.videoElement.videoHeight}),e.deviceId!==""&&(this.activeCamera=e,this.setMirrorImageEnabled(this.isMirrorImageEnabled(),!1))}async updateStreamForResolution(e,s){var r;if(this.mediaStream==null)await this.initializeCameraForResolution(e,s);else try{let i=(r=this.activeCameraSettings)==null?void 0:r.getProperty("preferredAspectRatio");Fe.log(Fe.Level.Debug,"Setting new resolution for active camera video stream..."),await this.mediaStream.getVideoTracks()[0].applyConstraints(Cs.getUserMediaVideoParameters(s,i)),await new Promise(o=>{this.videoElement.addEventListener("timeupdate",()=>{o()},{once:!0})});let a=this.mediaStream.getVideoTracks()[0].getSettings();Fe.log(Fe.Level.Debug,"New active camera video stream resolution set",{width:a.width,height:a.height})}catch(i){if(s===4)throw i;await this.updateStreamForResolution(e,s+1)}}async videoTrackEndedRecovery(){if(document.visibilityState==="visible")try{Fe.log(Fe.Level.Debug,'Detected video track "ended" event, try to reinitialize camera'),await this.reinitializeCamera()}catch{}else Fe.log(Fe.Level.Debug,"Page is currently not visible, delay camera reinitialization until visible"),document.addEventListener("visibilitychange",this.checkCameraVideoStreamAccessIfVisibleListener)}videoTrackMuteRecovery(e){if(this.videoElement.onloadeddata!=null){Fe.log(Fe.Level.Debug,`Detected video track "${e.type}" event, delay camera video stream access detection`),this.setCameraAccessTimeout();return}let s=e.type==="mute";s!==this.gui.isCameraRecoveryVisible()&&(Fe.log(Fe.Level.Debug,`Detected video track "${e.type}" event, ${s?"enable":"disable"} camera recovery`),this.gui.setCameraRecoveryVisible(s))}};Ba.autofocusIntervalMs=1500,Ba.cameraAccessTimeoutMs=4e3,Ba.getCapabilitiesTimeoutMs=500,Ba.manualFocusWaitTimeoutMs=400,Ba.manualToAutofocusResumeTimeoutMs=5e3,Ba.noCameraErrorParameters={name:"NoCameraAvailableError",message:"No camera available"},Ba.notReadableErrorParameters={name:"NotReadableError",message:"Could not initialize camera correctly"},Ba.videoMetadataCheckIntervalMs=50,Ba.videoMetadataCheckTimeoutMs=4e3,Ba.MIRRORED_CLASS_NAME=Ir.MIRRORED_CLASS_NAME,Ba._instance=null;var ir=Ba,Bf=(t=>(t.On="on",t.Off="off",t.Standby="standby",t.Starting="starting",t.Stopping="stopping",t.BootingUp="bootingUp",t.WakingUp="wakingUp",t.GoingToSleep="goingToSleep",t.ShuttingDown="shuttingDown",t))(Bf||{}),W$=(t=>(t.On="on",t.Off="off",t))(W$||{}),H$=(t=>(t.WorldFacing="worldFacing",t.UserFacing="userFacing",t))(H$||{}),GS=(t=>(t.Auto="auto",t.HD="hd",t.FullHD="fullHd",t.UHD4K="uhd4k",t))(GS||{}),q$=(t=>(t.None="none",t.Manual="manual",t.ManualUntilCapture="manualUntilCapture",t.AutoOnLocation="autoOnLocation",t))(q$||{});function mm(t){var e;return((e=t==null?void 0:t.toJSONObject())==null?void 0:e.type)==="camera"}var Qo=class G${constructor(e){if(this.preferredResolution=fi.Camera.Settings.preferredResolution,this.zoomFactor=fi.Camera.Settings.zoomFactor,this.zoomGestureZoomFactor=fi.Camera.Settings.zoomGestureZoomFactor,this.focus={focusGestureStrategy:fi.Camera.Settings.focusGestureStrategy},e!=null)for(let s of Object.getOwnPropertyNames(e))this[s]=e[s]}get focusGestureStrategy(){return this.focus.focusGestureStrategy}set focusGestureStrategy(e){this.focus.focusGestureStrategy=e}static fromJSON(e){let s=new G$;return s.preferredResolution=e.preferredResolution,s.zoomFactor=e.zoomFactor,s.zoomGestureZoomFactor=e.zoomGestureZoomFactor,s.focusGestureStrategy=e.focusGestureStrategy,s}setProperty(e,s){this[e]=s}getProperty(e){return this[e]}toJSONObject(){let e={preferredResolution:this.preferredResolution,zoomFactor:this.zoomFactor,zoomGestureZoomFactor:this.zoomGestureZoomFactor,focus:{focusGestureStrategy:this.focus.focusGestureStrategy}},s={};for(let r of Object.keys(this))[...Object.keys(e),"focusGestureStrategy"].includes(r)||(s[r]=this[r]);return{...e,...s}}},YS=class m0{constructor(e){this.deviceId="",this.type="camera",this._currentState="off",this._settings=new Qo,this._desiredTorchState="off",this._desiredState="off",this.listeners=[],this._context=null,this.stateTransitionStrategyMap={off:{on:this.transitionFromStateOffToOn.bind(this),standby:this.transitionFromStateOffToStandby.bind(this)},on:{off:this.transitionFromStateOnToOff.bind(this),standby:this.transitionFromStateOnToStandby.bind(this)},standby:{off:this.transitionFromStateStandbyToOff.bind(this),on:this.transitionFromStateStandbyToOn.bind(this)}},this.cameraManager=e??ir.instance(),this.updateCanvasVideoImage=this.updateCanvasVideoImage.bind(this),this.captureAndSend=this.captureAndSend.bind(this)}static get default(){let e=new m0;return e.position="worldFacing",e}get desiredState(){return this._desiredState}get settings(){return this._settings}get currentResolution(){var e;return(e=this._currentResolution)!=null?e:null}get context(){return this._context}set context(e){this._context=e,this._context&&this.currentState==="on"&&this.startSendingCapturesToWorker()}get currentState(){return this._currentState}static atPosition(e){if(fi.Camera.availablePositions.includes(e)){let s=new m0;return s.position=e,s}return Fe.log(Fe.Level.Warn,`invalid CameraPosition: "${e}"`),null}static fromDeviceCamera(e){let s=m0.atPosition(e.position);return s.deviceId=e.deviceId,s.label=e.label,s}async switchToDesiredState(e){var s,r;return this.currentTransitionStrategyPromise&&await this.currentTransitionStrategyPromise,this.currentTransitionStrategyPromise=(r=(s=this.stateTransitionStrategyMap[this.currentState])==null?void 0:s[e])==null?void 0:r.call(s).catch(i=>{if(i instanceof DOMException&&i.message==="The associated Track is in an invalid state"){Fe.log(Fe.Level.Warn,i);return}throw i}),this.currentTransitionStrategyPromise}getDesiredTorchState(){return this._desiredTorchState}async setDesiredTorchState(e){this._desiredTorchState=e,await this.cameraManager.setTorchEnabled(this._desiredTorchState==="on"),await this.notifyContext({type:"torchState",newValue:this._desiredTorchState})}async isTorchAvailable(){return this.cameraManager.isTorchAvailable()}addListener(e){e!=null&&(this.listeners.includes(e)||this.listeners.push(e))}removeListener(e){e!=null&&this.listeners.includes(e)&&this.listeners.splice(this.listeners.indexOf(e),1)}async applySettings(e){var s;this._settings=new Qo(e);let r=this.settings.getProperty("grayScaleFrameReader");if(this.cameraManager.setFrameReaderType(r===!0?"GRAYSCALE":"RGBA"),this.currentState==="on"||this.currentState==="standby"){let i=this.cameraManager.activeCameraSettings;(i==null?void 0:i.preferredResolution)!==this.settings.preferredResolution&&(await this.cameraManager.applyCameraSettings(this.settings),(s=this.cameraManager.activeCamera)!=null&&s.currentResolution&&(this._currentResolution={width:this.cameraManager.activeCamera.currentResolution.width,height:this.cameraManager.activeCamera.currentResolution.height})),await this.cameraManager.setZoom(this.settings.zoomFactor);let a=this.settings.getProperty("minFrameRate"),o=this.settings.getProperty("maxFrameRate");(a!=null||o!=null)&&await this.cameraManager.setFrameRate({min:a,max:o});let c=this.settings.getProperty("manualLensPosition");c!=null&&await this.cameraManager.setFocus(c);let d=this.settings.getProperty("exposureTargetBias"),h=this.settings.getProperty("exposureDuration");(d!=null||h!=null)&&await this.cameraManager.setExposure({compensation:d,time:h})}return this.notifyContext({type:"cameraSettings",newValue:this.settings})}toJSONObject(){return{type:this.type,position:this.position,settings:this.settings.toJSONObject(),desiredState:this.desiredState,desiredTorchState:this._desiredTorchState}}getMirrorImageEnabled(){var e;return(e=this._desiredMirrorImageEnabled)!=null?e:this.cameraManager.isMirrorImageEnabled()}async setMirrorImageEnabled(e){this._desiredMirrorImageEnabled=e,this.cameraManager.setMirrorImageEnabled(e,!0),this.context&&await this.context.setFrameSource(this)}getCurrentState(){return this._currentState}async setCurrentState(e){if(e!==this._currentState){this._currentState=e,this.notifyListeners();try{await this.notifyContext({type:"frameSourceState",newValue:e}),e==="on"&&this.startSendingCapturesToWorker()}catch{Fe.log(Fe.Level.Warn,"Error while notifying context about new state of Camera")}}}async setupCamera(){if(this.cameraManager.setSelectedCameraSettings(this.settings),this.deviceId==="")this.cameraManager.setSelectedCamera(),this.cameraManager.setInitialCameraPosition(this.position);else{let e=(await FN.getCameras()).find(s=>s.deviceId===this.deviceId);e&&(this.cameraManager.setInitialCameraPosition(e.position),this.cameraManager.setSelectedCamera(e))}await this.cameraManager.setupCameras(),typeof this._desiredMirrorImageEnabled=="boolean"?this.cameraManager.setMirrorImageEnabled(this._desiredMirrorImageEnabled,!0):this.cameraManager.setMirrorImageEnabled(this.cameraManager.isMirrorImageEnabled(),!1),this.context&&await this.context.setFrameSource(this),this.cameraManager.activeCamera&&(this.label=this.cameraManager.activeCamera.label,this.position=this.cameraManager.activeCamera.position,this.deviceId=this.cameraManager.activeCamera.deviceId,this._currentResolution=this.cameraManager.activeCamera.currentResolution)}async notifyContext(e){if(this.context)return this.context.update([e])}notifyListeners(){for(let e of this.listeners)e.didChangeState&&e.didChangeState(this,this.currentState)}updateCanvasVideoImage(){this.currentState==="on"&&this.context&&(this.cameraManager.updateCanvasVideoImage(),this._lastCanvasVideoPreviewAnimationFrame=this.cameraManager.requestVideoFrame(this.updateCanvasVideoImage))}async captureAndSend(){if(this.currentState!=="on"||!this.context)return;if(!this.context.hasEnabledMode()){this._lastCaptureRequestAnimationFrame=this.cameraManager.requestVideoFrame(this.captureAndSend);return}let e=null;try{e=this.cameraManager.captureImage()}catch(s){Fe.log(Fe.Level.Warn,s.message)}finally{if(e!=null)if(this.cameraManager.synchronousFrameHandling){let s=await this.context.sendFrameToProcessor(e);this.cameraManager.recycle(s.data)}else this.context.sendFrameToProcessor(e).then(s=>(this.cameraManager.recycle(s.data),null)).catch(s=>{Fe.warn("error while recycling uint8array",s)});this._lastCaptureRequestAnimationFrame=this.cameraManager.requestVideoFrame(this.captureAndSend)}}startSendingCapturesToWorker(){this.stopSendingCapturesToWorker(),this.captureAndSend()}stopSendingCapturesToWorker(){this._lastCanvasVideoPreviewAnimationFrame!=null&&this.cameraManager.cancelVideoFrame(this._lastCanvasVideoPreviewAnimationFrame),this._lastCaptureRequestAnimationFrame!=null&&this.cameraManager.cancelVideoFrame(this._lastCaptureRequestAnimationFrame)}async transitionFromStateOffToOn(){if(!(this.currentState==="on"||this.currentState==="starting"||this.currentState==="wakingUp")){this._desiredState="on",await this.setCurrentState("starting");try{await this.setupCamera(),await this.setCurrentState("on")}catch(e){throw Fe.log(Fe.Level.Error,e),await this.setCurrentState("off"),e}}}async transitionFromStateOffToStandby(){if(!(this.currentState==="standby"||this.currentState==="bootingUp"||this.currentState==="goingToSleep")){if(await this.isAndroidWebView()){Fe.log(Fe.Level.Warn,'Warning: "Standby" state does not work inside web views. Falling back to state "On".'),await this.transitionFromStateOffToOn();return}this._desiredState="standby",await this.setCurrentState("bootingUp");try{await this.setupCamera(),this.cameraManager.pauseStream(),await this.setCurrentState("standby")}catch(e){throw Fe.log(Fe.Level.Error,e),await this.setCurrentState("off"),e}await this.setCurrentState("standby"),await this.setDesiredTorchState("off")}}async transitionFromStateOnToOff(){this.currentState==="off"||this.currentState==="stopping"||(this._desiredState="off",await this.setCurrentState("stopping"),await this.cameraManager.stopStream(),await this.setCurrentState("off"),await this.setDesiredTorchState("off"))}async transitionFromStateOnToStandby(){if(!(this.currentState==="standby"||this.currentState==="bootingUp"||this.currentState==="goingToSleep")){if(await this.isAndroidWebView()){Fe.log(Fe.Level.Warn,'Warning: "Standby" state does not work inside web views. Falling back to state "Off".'),await this.transitionFromStateOnToOff();return}this._desiredState="standby",await this.setCurrentState("goingToSleep"),this.cameraManager.pauseStream(),await this.setCurrentState("standby"),await this.setDesiredTorchState("off")}}async transitionFromStateStandbyToOff(){this.currentState==="off"||this.currentState==="stopping"||(this._desiredState="off",await this.setCurrentState("shuttingDown"),await this.cameraManager.stopStream(),await this.setCurrentState("off"),await this.setDesiredTorchState("off"))}async transitionFromStateStandbyToOn(){this.currentState==="on"||this.currentState==="starting"||this.currentState==="wakingUp"||(this._desiredState="on",await this.setCurrentState("wakingUp"),this.cameraManager.resumeStream(),await this.setCurrentState("on"))}async isAndroidWebView(){return this._isAndroidWebView==null&&(this._isAndroidWebView=await Zs.isAndroidWebView()),this._isAndroidWebView}isZoomAvailable(){var e;return((e=this.cameraManager.mediaTrackCapabilities)==null?void 0:e.zoom)!=null}},W0e=(t=>(t.Idle="idle",t.Pressed="pressed",t))(W0e||{}),KS=class{constructor(e,s){this.state="idle",this.isHover=!1,this.control=e,this.domHost=s,this.onTouchStartListener=this.onTouchStart.bind(this),this.onMouseEnterListener=this.onMouseEnter.bind(this),this.onMouseLeaveListener=this.onMouseLeave.bind(this),this.onClickListener=this.onClick.bind(this),this.setup()}get frameSource(){var e,s;return(s=(e=this.control.view)==null?void 0:e.getContext())==null?void 0:s.frameSource}get context(){var e;return(e=this.control.view)==null?void 0:e.getContext()}async install(){this.button||this.setup();let e=await this.canShow();return e?(this.updateButtonBackground(this.button,this.getImageFromState()),this.show()):this.hide(),e}remove(e=!1){e&&this.button?(this.button.removeEventListener("mouseenter",this.onMouseEnterListener),this.button.removeEventListener("mouseleave",this.onMouseLeaveListener),this.button.removeEventListener("touchstart",this.onTouchStartListener),this.button.removeEventListener("click",this.onClickListener),this.button.remove(),this.isHover=!1,this.button=void 0):this.hide()}hide(){this.button&&(this.button.style.display="none")}show(){this.button&&(this.button.style.display="block")}setupButton(){let e=document.createElement("button");return e.type="button",e.style.display="none",e.className=`scandit-control-widget scandit-control-widget-${this.control.type}`,this.updateButtonBackground(e,this.getImageFromState()),this.domHost.append(e),e.addEventListener("mouseenter",this.onMouseEnterListener),e.addEventListener("mouseleave",this.onMouseLeaveListener),Zs.isDesktopDevice()||e.addEventListener("touchstart",this.onTouchStartListener),e.addEventListener("click",this.onClickListener),e.setAttribute("aria-pressed",String(this.state==="pressed")),this.button=e,this.button}setup(){this.setupButton()}onTouchStart(){var e,s;(e=this.button)==null||e.removeEventListener("mouseenter",this.onMouseEnterListener),(s=this.button)==null||s.removeEventListener("mouseleave",this.onMouseLeaveListener)}onMouseEnter(){this.isHover=!0,this.updateButtonBackground(this.button,this.getImageFromState())}onMouseLeave(){this.isHover=!1,this.updateButtonBackground(this.button,this.getImageFromState())}onClick(){var e;this.state=this.state==="pressed"?"idle":"pressed",this.buttonClicked(),this.updateButtonBackground(this.button,this.getImageFromState()),(e=this.button)==null||e.setAttribute("aria-pressed",String(this.state==="pressed"))}updateButtonBackground(e,s){s!=null&&e!=null&&(e.style.backgroundImage=`url(${JSON.stringify(s)})`)}},H0e=class extends KS{constructor(t,e){super(t,e)}async buttonClicked(){await this.frameSource.setDesiredTorchState(this.retrieveTorchState()==="on"?"off":"on")}async canShow(){return this.isTorchAvailable()}getImageFromState(){return this.retrieveTorchState()==="on"?this.isHover?this.control.torchOnPressedImage:this.control.torchOnImage:this.isHover?this.control.torchOffPressedImage:this.control.torchOffImage}setup(){if(this.control.torchOffImage==null||this.control.torchOnImage==null){Fe.log(Fe.Level.Warn,"TorchSwitchControl icon is not set or is empty, the control will not be rendered.");return}super.setup()}async isTorchAvailable(){return mm(this.frameSource)?this.frameSource.isTorchAvailable():!1}retrieveTorchState(){return mm(this.frameSource)?this.frameSource.getDesiredTorchState():"off"}},q0e=class f0 extends KS{constructor(e,s){super(e,s)}static get CameraAccess(){return Cs}static get Camera(){return YS}async canShow(){return(await f0.CameraAccess.getCameras()).length>1}getImageFromState(){return this.isHover?this.control.pressedImage:this.control.idleImage}async buttonClicked(){if(this.isTransitioning)return;let e=await this.getNextDeviceCamera();e&&await this.switchCameras(e)}setup(){if(this.control.idleImage==null){Fe.log(Fe.Level.Warn,"CameraSwitchControl idle icon is not set or is empty, the control will not be rendered.");return}super.setup()}async getNextDeviceCamera(){var e,s;let r=await f0.CameraAccess.getCameras(),i=this.frameSource?this.frameSource:null,a=(e=i==null?void 0:i.cameraManager.activeCamera)==null?void 0:e.deviceId,o=r.findIndex(c=>c.deviceId===a);return o>-1?(s=r[o+1])!=null?s:r[0]:r.length>0?r[0]:null}async switchCameras(e){var s,r,i;this.isTransitioning=!0;let a=(s=this.context)==null?void 0:s.frameSource,o,c;a!=null&&(o=new Qo(a.settings),c=a.desiredState),await(a==null?void 0:a.switchToDesiredState("off"));let d=f0.Camera.fromDeviceCamera(e);o!=null&&await d.applySettings(o),await((r=this.context)==null?void 0:r.setFrameSource(d)),await((i=this.context)==null?void 0:i.frameSource).switchToDesiredState(c??"on"),this.isTransitioning=!1}},G0e=class p0 extends KS{constructor(e,s){super(e,s)}static get Camera(){return YS}static get CameraAccess(){return Cs}async install(){let e=await super.install();return e&&await this.setInitialCamera(),e}async canShow(){return!Zs.isIOSDeviceWithExtendedCameraAccess()||!mm(this.frameSource)?!1:Cs.isIOSBackDualWideCameraLabel(this.frameSource.label)||Cs.isIOSBackCameraLabel(this.frameSource.label)||Cs.isIOSUltraWideBackCameraLabel(this.frameSource.label)}getImageFromState(){return this.isUltraWideBackCamera()?this.isHover?this.control.cameraFOVUltraWidePressedImage:this.control.cameraFOVUltraWideImage:this.isHover?this.control.cameraFOVWidePressedImage:this.control.cameraFOVWideImage}async buttonClicked(){if(this.isTransitioning)return;let e=await this.getAlternativeDeviceCamera();e&&await this.switchCameras(e)}setup(){if(this.control.cameraFOVUltraWideImage==null||this.control.cameraFOVWideImage==null){Fe.log(Fe.Level.Warn,"CameraFOVSwitchControl icon is not set or is empty, the control will not be rendered.");return}super.setup()}async setInitialCamera(){var e,s;if(!this.isTransitioning&&!Cs.isIOSBackCameraLabel((s=(e=this.frameSource)==null?void 0:e.label)!=null?s:"")){let r=(await p0.CameraAccess.getCameras()).find(i=>Cs.isIOSBackCameraLabel(i.label));r&&await this.switchCameras(r)}}isUltraWideBackCamera(){return mm(this.frameSource)?Cs.isIOSUltraWideBackCameraLabel(this.frameSource.label):!1}async getAlternativeDeviceCamera(){return(await p0.CameraAccess.getCameras()).find(e=>this.isUltraWideBackCamera()?Cs.isIOSBackCameraLabel(e.label):Cs.isIOSUltraWideBackCameraLabel(e.label))}async switchCameras(e){var s,r,i;this.isTransitioning=!0;let a=(s=this.context)==null?void 0:s.frameSource,o,c;a!=null&&(o=new Qo(a.settings),c=a.desiredState),await(a==null?void 0:a.switchToDesiredState("off"));let d=p0.Camera.fromDeviceCamera(e);o!=null&&await d.applySettings(o),await((r=this.context)==null?void 0:r.setFrameSource(d)),await((i=this.context)==null?void 0:i.frameSource).switchToDesiredState(c??"on"),this.isTransitioning=!1}};function Y0e(){let t=Go`@keyframes scandit-rotation{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.${Tt.CONTAINER_CLASS_NAME}{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;overflow:hidden;position:relative;width:100%}.${Tt.CONTAINER_CLASS_NAME}:before{animation:scandit-rotation 1s linear infinite;background-color:#fff;content:" ";height:1px;left:0;opacity:0;pointer-events:none;position:absolute;top:0;width:1px}`,e=Go`.${Tt.PAINTBOARDS_CONTAINER_CLASS_NAME}{height:inherit;position:relative;width:100%}.${Tt.PAINTBOARD_CLASS_NAME}{aspect-ratio:16/9;background-color:#000;height:100%;min-height:1px;min-width:1px;position:relative;width:100%}.${Tt.PAINTBOARD_CLASS_NAME}.${Tt.PAINTBOARD_CLASS_NAME_STATE_ON}{aspect-ratio:auto}.${Tt.PAINTBOARD_CLASS_NAME} video{display:block;height:100%;object-fit:cover;transition:opacity .3s;width:100%}.${Tt.PAINTBOARD_CLASS_NAME} .${Tt.MIRRORED_CLASS_NAME}{transform:scaleX(-1)}.${Tt.PAINTBOARD_CLASS_NAME} .${Tt.CAMERA_RECOVERY_CLASS_NAME}{background-color:#000;cursor:pointer;z-index:5}.${Tt.PAINTBOARD_CLASS_NAME} .${Tt.CAMERA_RECOVERY_CLASS_NAME},.${Tt.PAINTBOARD_CLASS_NAME} .${Tt.ERROR_CLASS_NAME}{align-items:center;color:#fff;display:flex;height:100%;justify-content:center;left:0;position:absolute;top:0;width:100%}.${Tt.PAINTBOARD_CLASS_NAME} .${Tt.ERROR_CLASS_NAME}{background-color:rgba(0,0,0,.5);text-align:center;z-index:6}.${Tt.PAINTBOARD_CLASS_NAME} .${Tt.HINT_CONTAINER_CLASS_NAME}{bottom:5vh;display:grid;pointer-events:none;position:absolute;top:5vh;width:100%}.${Tt.PAINTBOARD_CLASS_NAME} .${Tt.HINT_CLASS_NAME}{background-color:#fff;color:#000;padding:10px;width:fit-content}.${Tt.CAMERA_RECOVERY_CLASS_NAME}[hidden],.${Tt.ERROR_CLASS_NAME}[hidden],.${Tt.HINT_CLASS_NAME}[hidden]{display:none}.${Tt.PAINTBOARD_CLASS_NAME} canvas{height:100%;left:0;object-fit:cover;pointer-events:none;position:absolute;top:0;transition:opacity .3s;width:100%}`,s=Go`.${Tt.PAINTBOARD_CLASS_NAME} .${Tt.SINGLE_IMAGE_UPLOADER_CONTAINER_CLASS_NAME}{-webkit-tap-highlight-color:rgba(255,255,255,0);align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;width:100%}.${Tt.PAINTBOARD_CLASS_NAME} .${Tt.SINGLE_IMAGE_UPLOADER_CONTAINER_CLASS_NAME} label{align-items:center;cursor:pointer;display:flex;flex-direction:column;justify-content:center}.${Tt.PAINTBOARD_CLASS_NAME} .${Tt.SINGLE_IMAGE_UPLOADER_CONTAINER_CLASS_NAME} label input[type=file]{position:absolute;top:-9999px}.${Tt.PAINTBOARD_CLASS_NAME}.${Tt.SINGLE_IMAGE_UPLOADER_CONTAINER_CLASS_NAME} label button{pointer-events:none}`,r=Go`.${Tt.PAINTBOARD_CLASS_NAME} .${Tt.CONTROLS_CLASS_NAME}{display:flex;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.${Tt.PAINTBOARD_CLASS_NAME} .${Tt.CONTROL_WIDGET_CLASS_NAME}-${Tt.TORCH_SWITCH_CONTROL_CLASS_NAME}{left:16px;top:24px}.${Tt.PAINTBOARD_CLASS_NAME} .${Tt.CONTROL_WIDGET_CLASS_NAME}-${Tt.CAMERA_SWITCH_CONTROL_CLASS_NAME}{right:16px;top:24px}.${Tt.PAINTBOARD_CLASS_NAME} .${Tt.CONTROL_WIDGET_CLASS_NAME}-${Tt.CAMERA_FOV_SWITCH_CONTROL_CLASS_NAME}{bottom:24px;right:24px}.${Tt.CONTROL_WIDGET_CLASS_NAME}{background-color:transparent;background-repeat:no-repeat;border:none;cursor:pointer;height:32px;pointer-events:all;position:absolute;width:32px}.${Tt.CONTROL_WIDGET_CLASS_NAME}+.${Tt.CONTROL_WIDGET_CLASS_NAME}{margin-left:16px}`,i=Go`.${Tt.FROZEN_FRAME}{height:100%;left:0;object-fit:cover;opacity:1;position:absolute;top:0;width:100%}.${Tt.FROZEN_FRAME}[hidden]{opacity:0;pointer-events:none;visibility:hidden}`;return[t,e,r,s,i]}var K0e=new Set,yT=K0e,wT=class Y${constructor(e){this.element=e,this.setupListeners(),this.cacheDOMRect()}get width(){return this.cachedDOMRect.width}get height(){return this.cachedDOMRect.height}static areEquivalentJSONStates(e,s){return!e||!s?!1:e.size.isSameAs(s.size)&&e.visible===s.visible}onStateChanged(e){this.onStateChangedListener=e}onDisconnected(e){this.onDisconnectedListener=e}toJSONObject(){return{size:new N$(new hr(this.width,"pixel"),new hr(this.height,"pixel")),visible:this.isVisible()}}isSameAs(e){return Y$.areEquivalentJSONStates(this.toJSONObject(),e.toJSONObject())}removeListeners(){this.resizeObserver.disconnect(),this.mutationObserver.disconnect()}isVisible(){return this.width>0&&this.height>0||this.element.getClientRects().length>0}setupListeners(){this.resizeObserver=new ResizeObserver(this.onSizeChange.bind(this)),this.resizeObserver.observe(this.element),this.mutationObserver=new MutationObserver(this.onMutation.bind(this)),this.element.parentElement&&this.mutationObserver.observe(this.element.parentElement,{childList:!0})}onSizeChange(e){var s;this.cacheDOMRect(e),document.contains(this.element)&&((s=this.onStateChangedListener)==null||s.call(this))}onMutation(e){var s;let r=e.find(({type:i})=>i==="childList");if(r){for(let i of r.removedNodes)if(i===this.element&&!document.contains(this.element)){(s=this.onDisconnectedListener)==null||s.call(this);return}}}cacheDOMRect(e){let s;Array.isArray(e)&&e.length>0&&(s=e[0].contentRect),s==null&&(s=this.element.getBoundingClientRect()),this.cachedDOMRect=s}},Z0e=(t=>(t.Nonzero="nonzero",t.Evenodd="evenodd",t))(Z0e||{}),Q0e=class{constructor(){this.pathWinding="nonzero"}drawSingleCommand(e,s){switch(e){case 0:{this.addLine(s);break}case 1:{this.addArc(s);break}case 2:{this.addCircle(s);break}case 3:{this.addRectangle(s);break}case 4:{this.addRoundedRectangle(s);break}case 5:{this.beginPath(s);break}case 6:{this.closePath(s);break}case 7:{this.fill(s);break}case 8:{this.stroke(s);break}case 10:{this.setStrokeWidth(s);break}case 11:{this.setFillColor(s);break}case 12:{this.setStrokeColor(s);break}case 13:{this.moveTo(s);break}case 14:{this.lineTo(s);break}case 15:{this.saveState(s);break}case 16:{this.restoreState(s);break}case 17:{this.translate(s);break}case 19:{this.bezierTo(s);break}case 20:{this.transform(s);break}case 21:{this.scale(s);break}case 22:{this.addPathWinding(s);break}case 9:case 18:break;default:{y$(e);break}}}beginPath(e){this.context.beginPath()}closePath(e){this.context.closePath()}setStrokeColor(e){let s=e.extractColor();this.context.strokeStyle=this.colorToRgbaString(s)}setFillColor(e){let s=e.extractColor();this.context.fillStyle=this.colorToRgbaString(s)}fill(e){this.context.fill(this.pathWinding)}stroke(e){this.context.stroke()}addLine(e){let s=e.extractFloat(),r=e.extractFloat();this.context.moveTo(s,r);let i=e.extractFloat(),a=e.extractFloat();this.context.lineTo(i,a)}lineTo(e){let s=e.extractFloat(),r=e.extractFloat();this.context.lineTo(s,r)}moveTo(e){let s=e.extractFloat(),r=e.extractFloat();this.context.moveTo(s,r)}addRectangle(e){let s=e.extractFloat(),r=e.extractFloat(),i=e.extractFloat(),a=e.extractFloat();this.context.rect(s,r,i,a)}addRoundedRectangle(e){let s=e.extractFloat(),r=e.extractFloat(),i=e.extractFloat(),a=e.extractFloat(),o=e.extractFloat();this.context.moveTo(s+o,r),this.context.lineTo(s+i-o,r),this.context.quadraticCurveTo(s+i,r,s+i,r+o),this.context.lineTo(s+i,r+a-o),this.context.quadraticCurveTo(s+i,r+a,s+i-o,r+a),this.context.lineTo(s+o,r+a),this.context.quadraticCurveTo(s,r+a,s,r+a-o),this.context.lineTo(s,r+o),this.context.quadraticCurveTo(s,r,s+o,r),this.context.closePath()}setStrokeWidth(e){this.context.lineWidth=e.extractFloat()}addArc(e){let s=e.extractFloat(),r=e.extractFloat(),i=e.extractFloat(),a=e.extractFloat(),o=e.extractFloat(),c=e.extractBoolean();this.context.arc(s,r,i,a,o,c)}addCircle(e){let s=e.extractFloat(),r=e.extractFloat(),i=e.extractFloat();this.context.arc(s,r,i,0,Math.PI*2)}bezierTo(e){let s=e.extractFloat(),r=e.extractFloat(),i=e.extractFloat(),a=e.extractFloat(),o=e.extractFloat(),c=e.extractFloat();this.context.bezierCurveTo(s,r,i,a,o,c)}saveState(e){this.context.save()}restoreState(e){this.context.restore()}translate(e){let s=e.extractFloat(),r=e.extractFloat();this.context.translate(s,r)}transform(e){let s=e.extractFloat(),r=e.extractFloat(),i=e.extractFloat(),a=e.extractFloat(),o=e.extractFloat(),c=e.extractFloat();this.context.transform(s,r,i,a,o,c)}scale(e){let s=e.extractFloat();this.context.scale(s,s)}addPathWinding(e){let s=e.extractBoolean();this.pathWinding=s?"nonzero":"evenodd"}colorToRgbaString(e){return`rgba(${e.r},${e.g},${e.b},${e.a})`}},X0e=(t=>(t[t.AddLine=0]="AddLine",t[t.AddArc=1]="AddArc",t[t.AddCircle=2]="AddCircle",t[t.AddRect=3]="AddRect",t[t.AddRoundedRect=4]="AddRoundedRect",t[t.BeginPath=5]="BeginPath",t[t.ClosePath=6]="ClosePath",t[t.Fill=7]="Fill",t[t.Stroke=8]="Stroke",t[t.Clear=9]="Clear",t[t.SetStrokeWidth=10]="SetStrokeWidth",t[t.SetFillColor=11]="SetFillColor",t[t.SetStrokeColor=12]="SetStrokeColor",t[t.MoveTo=13]="MoveTo",t[t.LineTo=14]="LineTo",t[t.SaveState=15]="SaveState",t[t.RestoreState=16]="RestoreState",t[t.Translate=17]="Translate",t[t.ScaleAroundPoint=18]="ScaleAroundPoint",t[t.BezierTo=19]="BezierTo",t[t.Transform=20]="Transform",t[t.Scale=21]="Scale",t[t.AddPathWinding=22]="AddPathWinding",t))(X0e||{}),J0e=class{constructor(e){this._index=0,this._view=new DataView(e.buffer),this._index=0}extractCommandType(){let e=this._view.getUint8(this._index);return this._index+=1,e}extractFloat(){let e=this._view.getFloat32(this._index,!0);return this._index+=4,e}extractBoolean(){let e=this._view.getUint8(this._index);return this._index+=1,e!==0}extractColor(){let e=this._view.getUint8(this._index),s=this._view.getUint8(this._index+1),r=this._view.getUint8(this._index+2),i=this._view.getUint8(this._index+3)/256;return this._index+=4,{r:e,g:s,b:r,a:i}}isConsumed(){return this._index>=this._view.byteLength}},eve=(t=>(t.Nonzero="nonzero",t.Evenodd="evenodd",t))(eve||{}),K$=class BN extends Q0e{constructor(e){super(),this._context=null,this.isNextDrawPending=!1,this.latestCommands=new Uint8Array([]),this.canvas=e,this.doDrawLoop=this.doDraw.bind(this)}get context(){if(!this._context&&(this._context=this.canvas.getContext("2d"),!this._context))throw new TypeError("CanvasRenderingContext cannot be retrieved.");return this._context}draw(e){if(this.latestCommands=e,!this.isCanvasReady()){this.postponeDraw();return}this.isNextDrawPending||(this.isNextDrawPending=!0,requestAnimationFrame(this.doDrawLoop))}updateCanvasSizeAttributes(e,s,r=window.devicePixelRatio){let i=Math.round(e*r),a=Math.round(s*r);(i!==this.canvas.width||a!==this.canvas.height)&&(this.canvas.width=i,this.canvas.height=a,this.context.scale(r,r))}startObservingCanvasResize(){if(!this.resizeObserver){if(!BN.ResizeObserver)throw new Error("PrivateCanvasDrawer.ResizeObserver is not set");this.resizeObserver=new BN.ResizeObserver(e=>{var s;let[r]=e,{width:i,height:a}=(s=r.contentRect)!=null?s:this.canvas;i===0||a===0||(this.updateCanvasSizeAttributes(i,a),this.latestCommands.length!==0&&(this.draw(this.latestCommands),this.latestCommands=new Uint8Array([])))}),this.resizeObserver.observe(this.canvas)}}endObservingCanvasResize(){this.resizeObserver&&this.resizeObserver.unobserve(this.canvas)}doDraw(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);let e=new J0e(this.latestCommands);for(;!e.isConsumed();){let s=e.extractCommandType();this.drawSingleCommand(s,e)}this.isNextDrawPending=!1}postponeDraw(){this.startObservingCanvasResize()}isCanvasReady(){return this.canvas.width>0&&this.canvas.height>0}};K$.ResizeObserver="ResizeObserver"in globalThis?globalThis.ResizeObserver:void 0;var Z$=K$,tve={processedFramesCount:{text:"Frames processed by engine",valueSuffix:"/sec"},frameDataPoolSize:{text:"Frame data pool size",valueSuffix:""},redrawRequestsCount:{text:"Engine redraw requests",valueSuffix:"/sec"},actualRedrawsCount:{text:"Actual redraws",valueSuffix:"/sec"},FPS:{text:"Overlay FPS ",valueSuffix:"/sec"}},nve=class extends Z${constructor(e){var s;super(e),this.drawPerformanceTimer=null,this.drawPerformanceFPSCounter=0,this.lastDrawPerformanceFPSCounter=0,this.performanceCanvasLayer=document.createElement("canvas"),(s=e.parentElement)==null||s.insertBefore(this.performanceCanvasLayer,e)}get performanceLayerContext(){if(!this._performanceLayerContext&&(this._performanceLayerContext=this.performanceCanvasLayer.getContext("2d"),!this._performanceLayerContext))throw new TypeError("CanvasRenderingContext cannot be retrieved.");return this._performanceLayerContext}setupPerformanceLayer(){}setPerformanceMetrics(e){this.performanceMetrics=e,this.drawPerformanceMetrics()}updateCanvasSizeAttributes(e,s,r=window.devicePixelRatio){super.updateCanvasSizeAttributes(e,s,r),this.performanceCanvasLayer.width=this.canvas.width,this.performanceCanvasLayer.height=this.canvas.height,this.performanceLayerContext.scale(r,r)}doDraw(){super.doDraw()}drawPerformanceMetrics(){this.drawPerformanceTimer==null&&(Fe.log(Fe.Level.Debug,"Drawing performance monitoring enabled, FPS will be drawn into canvas"),this.drawPerformanceTimer=setInterval(()=>{this.lastDrawPerformanceFPSCounter=this.drawPerformanceFPSCounter,this.drawPerformanceFPSCounter=0},1e3)),this.drawPerformanceFPSCounter++,this.drawFullPerformanceMetrics()}drawFullPerformanceMetrics(){let e={...this.performanceMetrics,FPS:this.lastDrawPerformanceFPSCounter};this.performanceLayerContext.lineWidth=1,this.performanceLayerContext.fillStyle="white",this.performanceLayerContext.strokeStyle="black";let s=Math.min(Math.max(window.innerWidth/35,13),20),r=1.5*s,i=1.5;this.performanceLayerContext.font=`bold ${s}px sans-serif`;let a=0,o=0,c=[];for(let[d,h]of Object.entries(e)){let g=tve[d],m=`${g.text}: ${h}${g.valueSuffix}`;o=Math.max(this.performanceLayerContext.measureText(m).width,o),c.push([m,r,r+s*i*a++])}this.performanceLayerContext.clearRect(r,r-s,o,Object.values(e).length*s*i);for(let d of c)this.performanceLayerContext.fillText(...d),this.performanceLayerContext.strokeText(...d)}},Q$=class X${constructor(){this.hasApi=!1,this.hasTouch=!1,this.requiresPrefix=!1}detect(){var e;try{"PointerEvent"in window?this.hasApi=!0:"msPointerEnabled"in navigator&&(this.hasApi=!0,this.requiresPrefix=!0);let s=(e=navigator.msMaxTouchPoints)!=null?e:navigator.maxTouchPoints;this.hasTouch=s>0}catch{}}prefixIfNeeded(e){return this.requiresPrefix?X$.prefixEventMap[e]:e}};Q$.prefixEventMap={pointerdown:"MSPointerDown",pointerup:"MSPointerUp",pointercancel:"MSPointerCancel",pointermove:"MSPointerMove",pointerover:"MSPointerOver",pointerout:"MSPointerOut",pointerenter:"MSPointerEnter",pointerleave:"MSPointerLeave",gotpointercapture:"MSGotPointerCapture",lostpointercapture:"MSLostPointerCapture"};var sve=Q$,Dx=new sve,rve=class{constructor(){this._listeners=new Set}get listeners(){return[...this._listeners]}addListener(e){this._listeners.add(e)}removeListener(e){this._listeners.delete(e)}},J$=class extends rve{constructor(t){super(),this._onTouchStart=this.onTouchStart.bind(this),this._onPointerDown=this.onPointerDown.bind(this),Dx.detect(),this.element=t,this.addPointerDownListener()}removeAllListeners(){this.element.removeEventListener("touchend",this._onTouchStart),this.element.removeEventListener("mousedown",this._onPointerDown),this.element.removeEventListener("pointerdown",this._onPointerDown)}addPointerDownListener(){Dx.hasApi?this.element.addEventListener(Dx.prefixIfNeeded("pointerdown"),this._onPointerDown):Dx.hasTouch?this.element.addEventListener("touchstart",this._onTouchStart):this.element.addEventListener("mousedown",this._onPointerDown)}onPointerDown(t){let{clientX:e,clientY:s,button:r,currentTarget:i=this.element}=t;r===0&&this.onTap(this.pointRelativeToElement({clientX:e,clientY:s,rect:i.getBoundingClientRect()}),t)}onTouchStart(t){let[e]=t.touches,{clientX:s,clientY:r}=e;this.onTap(this.pointRelativeToElement({clientX:s,clientY:r,rect:this.element.getBoundingClientRect()}),t)}pointRelativeToElement({clientX:t,clientY:e,rect:s}){return new ds(t-s.left,e-s.top)}onTap(t,e){var s;for(let r of this.listeners)(s=r.onTap)==null||s.call(r,t,e)}},ng={CUSTOM_VIEW_CONTAINER:"scandit-custom-views"},ive=`
  .${ng.CUSTOM_VIEW_CONTAINER} {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
  }
  .${ng.CUSTOM_VIEW_CONTAINER} img {
    position: absolute;
    -webkit-tap-highlight-color: transparent;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
`,ave=ive,ove={bottomLeft:"bottomRight",bottomRight:"bottomLeft",topLeft:"topRight",topRight:"topLeft",centerLeft:"centerRight",centerRight:"centerLeft",center:"center",topCenter:"topCenter",bottomCenter:"bottomCenter"},zN=class Uu{constructor(){this.listener=null,this._mounted=!1,this._mirrored=!1,this._cachedSize=new sp(0,0),this.resizeObserver=null,this.mapViewAnchorPositionsForFramePoint=e=>e}get size(){return this._cachedSize}setMirrored(e){this._mounted&&(this._mirrored=e)}mount(e){var s;if(this._mounted)return;if(!document.head.querySelector(`[data-component=${Uu.componentName}]`)){let i=document.createElement("style");i.dataset.component=Uu.componentName,i.append(document.createTextNode(ave)),document.head.append(i)}let r=document.createElement("div");r.classList.add(ng.CUSTOM_VIEW_CONTAINER),(s=e.parentNode)==null||s.replaceChild(r,e),this._htmlRoot=r,this.gestureRecognizer=new J$(this._htmlRoot),this.gestureRecognizer.addListener({onTap:(i,a)=>{var o,c;let d=(o=a.target.dataset.identifier)!=null?o:"";d!==""&&((c=this.listener)==null||c.didTapView(Number.parseInt(d,10)))}}),this.resizeObserver=new ResizeObserver(([i])=>{this._cachedSize=new sp(i.contentRect.width,i.contentRect.height)}),this.resizeObserver.observe(this._htmlRoot),this._cachedSize=new sp(this._htmlRoot.clientWidth,this._htmlRoot.clientHeight),this._mounted=!0}unmount(){var e,s,r,i;this._mounted&&(this.removeChildren(),(e=this.gestureRecognizer)==null||e.removeAllListeners(),(s=this.resizeObserver)==null||s.disconnect(),(r=this._htmlRoot)==null||r.remove(),this._htmlRoot=null,this.gestureRecognizer=null,(i=document.head.querySelector(`[data-component=${Uu.componentName}]`))==null||i.remove(),this.listener=null,this._mounted=!1)}render(e){var s,r,i,a,o;if(e.elements.length===0){this.removeChildren();return}for(let d of e.removedIds)(r=(s=this._htmlRoot)==null?void 0:s.querySelector(`#${Uu.elementSelectorPrefix}${d}`))==null||r.remove();let c=document.createDocumentFragment();for(let d of e.elements){let h=`${Uu.elementSelectorPrefix}${d.identifier}`,g=(i=this._htmlRoot)==null?void 0:i.querySelector(`#${h}`),m=g;if(g==null&&(m=new Image(d.view.options.size.width,d.view.options.size.height),m.id=h,m.dataset.identifier=String(d.identifier),c.append(m)),m){m.src=d.view.data;let p=this.mapViewAnchorPositionsForFramePoint(d.anchorPositions)[this._mirrored?ove[d.anchor]:d.anchor];this._mirrored&&(p=ds.mirrorX(p,this.size));let{x:v,y:j}=this.adjustCoordinatesWithOffset(p,{elementSize:d.view.options.size,offset:d.offset}),N=(a=d.view.options.scale)!=null?a:1;m.style.scale=`${N}`,m.style.transform=`translate3d(${v/N}px, ${j/N}px, 0px)`}}(o=this._htmlRoot)==null||o.append(c)}removeChildren(){for(var e;(e=this._htmlRoot)!=null&&e.firstChild;)this._htmlRoot.firstChild.remove()}adjustCoordinatesWithOffset(e,s){let r=e,{elementSize:i,offset:a}=s,o=e.x-i.width/2,c=e.y-i.height/2;return a.x.unit==="pixel"&&(r=new ds(o+a.x.value,c+a.y.value)),a.x.unit==="fraction"&&(r=new ds(o+i.width*a.x.value,c+i.height*a.y.value)),r}};zN.componentName="CustomLocationsView",zN.elementSelectorPrefix="scandit-view-";var lve=zN,cve="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",dve=class g0 extends e1{constructor(e,s,r,i,a,o,c,d,h){super(e,s,r,i),this._centerLeft=a,this._topCenter=o,this._centerRight=c,this._bottomCenter=d,this._center=h}get centerRight(){return this._centerRight}get center(){return this._center}get centerLeft(){return this._centerLeft}get topCenter(){return this._topCenter}get bottomCenter(){return this._bottomCenter}static fromJSON(e){let{topLeft:s,topRight:r,bottomRight:i,bottomLeft:a,centerLeft:o,topCenter:c,centerRight:d,bottomCenter:h,center:g}=e,m=ds.fromJSON(s),p=ds.fromJSON(r),v=ds.fromJSON(i),j=ds.fromJSON(a),N=ds.fromJSON(o),E=ds.fromJSON(c),_=ds.fromJSON(d),S=ds.fromJSON(h),C=ds.fromJSON(g);return new g0(m,p,v,j,N,E,_,S,C)}toJSONObject(){return{...super.toJSONObject(),center:this._center.toJSONObject(),bottomCenter:this._bottomCenter.toJSONObject(),topCenter:this._topCenter.toJSONObject(),centerLeft:this._centerLeft.toJSONObject(),centerRight:this._centerRight.toJSONObject()}}orderVerticesByPosition(){let e=[[this.topLeft,this.topRight],[this.topRight,this.bottomRight],[this.bottomRight,this.bottomLeft],[this.bottomLeft,this.topLeft]],s=e.reduce((d,h)=>{let g=new ds((d[0].x+d[1].x)/2,(d[0].y+d[1].y)/2),m=new ds((h[0].x+h[1].x)/2,(h[0].y+h[1].y)/2);return g.y<m.y?d:h},e[0]),r=s[0].x<=s[1].x?s[0]:s[1],i=s[0].x>s[1].x?s[0]:s[1],a=[this.topLeft,this.topRight,this.bottomLeft,this.bottomRight].filter(d=>!d.equals(r)&&!d.equals(i)),o=new g0(r,i,a[0],a[1],new ds((r.x+a[1].x)/2,(r.y+a[1].y)/2),new ds((r.x+i.x)/2,(r.y+i.y)/2),new ds((i.x+a[0].x)/2,(i.y+a[0].y)/2),new ds((a[1].x+a[0].x)/2,(a[1].y+a[0].y)/2),this.center),c=new g0(r,i,a[1],a[0],new ds((r.x+a[0].x)/2,(r.y+a[0].y)/2),new ds((r.x+i.x)/2,(r.y+i.y)/2),new ds((i.x+a[1].x)/2,(i.y+a[1].y)/2),new ds((a[0].x+a[1].x)/2,(a[0].y+a[1].y)/2),this.center);return this.getArea(o)>=this.getArea(c)?o:c}getArea(e){let s=[e.topLeft,e.topRight,e.bottomRight,e.bottomLeft,e.topLeft],r=0;for(let i=0;i<s.length-1;i++)r+=s[i].x*s[i+1].y-s[i+1].x*s[i].y;return Math.abs(r)/2}},uve={"core.view.loading":"Loading the Scandit SDK...","core.singleImageUploader.title":"Analyze an image from your device.","core.singleImageUploader.button":"Choose an Image","core.camera.recovery":"Tap/click to resume scanning","barcode.find.view.textForCollapseCardsButton":"Collapse Cards"},VN=class eU{static fromJSON(e){let s=new eU;return s._code=e.code,s._message=e.message,s._isValid=e.isValid,s}get message(){return this._message}get code(){return this._code}get isValid(){return this._isValid}},hve=(t=>(t.None="None",t.X="X",t.Y="Y",t))(hve||{}),gj="core.camera.recovery",mve=class tU{constructor(){this.focusGesture=fi.DataCaptureView.focusGesture,this.zoomGesture=fi.DataCaptureView.zoomGesture,this._scanAreaMargins=fi.DataCaptureView.scanAreaMargins,this._pointOfInterest=fi.DataCaptureView.pointOfInterest,this._logoStyle=fi.DataCaptureView.logoStyle,this._logoAnchor=fi.DataCaptureView.logoAnchor,this._logoOffset=fi.DataCaptureView.logoOffset,this._context=null,this.overlays=[],this.controls=[],this.controlWidgets=new WeakMap,this.frozenFrameCanvas=document.createElement("canvas"),this.listeners=[],this.isVideoElementDetached=!1,this.orientation="portrait",this.hiddenProperties={stopVideoTracksOnVisibilityChange:!0,freezeFrameWhenStoppingFrameSource:!0},this.orientationObserver=new P$,this.onOrientationChangeListener=this.onOrientationChange.bind(this),this.onHintPresenterUpdateHandler=this.onHintPresenterUpdate.bind(this),this.onBeforeShowToastsHandler=this.onBeforeShowToasts.bind(this),this.onWorkerMessageHandler=this.onWorkerMessage.bind(this),this.visibilityListener=this.onVisibilityChange.bind(this),this.cameraRecoveryListener=this.cameraRecovery.bind(this),Mh.getInstance().updateIfMissing(uve)}get scanAreaMargins(){return this._scanAreaMargins}set scanAreaMargins(e){var s;this._scanAreaMargins=e,(s=this.privateContext)==null||s.update()}get pointOfInterest(){return this._pointOfInterest}set pointOfInterest(e){var s;this._pointOfInterest=e,(s=this.privateContext)==null||s.update()}get logoStyle(){return this._logoStyle}set logoStyle(e){var s;this._logoStyle=e,(s=this.privateContext)==null||s.update()}get logoAnchor(){return this._logoAnchor}set logoAnchor(e){var s;this._logoAnchor=e,(s=this.privateContext)==null||s.update()}get logoOffset(){return this._logoOffset}set logoOffset(e){var s;this._logoOffset=e,(s=this.privateContext)==null||s.update()}get cameraRecoveryText(){return Mh.getInstance().get(gj)}get width(){var e,s;return Math.round((s=(e=this.htmlElementState)==null?void 0:e.width)!=null?s:0)}get height(){var e,s;return Math.round((s=(e=this.htmlElementState)==null?void 0:e.height)!=null?s:0)}get canvasDrawer(){return!this._canvasDrawer&&this.canvasElement!=null&&(this._canvasDrawer=new Z$(this.canvasElement),this._canvasDrawer.startObservingCanvasResize()),this._canvasDrawer}get privateContext(){return this._context}static async forContext(e){let s=new tU;return await s.setContext(e),s}showProgressBar(){var e;(e=this.loadingOverlay)==null||e.show()}hideProgressBar(){var e;(e=this.loadingOverlay)==null||e.hide()}setProgressBarPercentage(e){this.loadingOverlay&&(this.loadingOverlay.progress=e)}setProgressBarMessage(e){this.loadingOverlay&&(this.loadingOverlay.message=e)}getContext(){return this._context}async setContext(e){var s,r,i;if(this._context=e,e){if(this.overlays.length>0&&((s=this.privateContext)==null?void 0:s.modes.size)===0)throw new Error(["Cannot assign this view to this context. This view has overlays but the context does not have any mode attached matching these overlays.","Remove the overlays first before attaching the view to the context, or add the corresponding mode to the context before attaching this view."].join(" "));await e.setView(this),(r=this.privateContext)==null||r.subscribeToWorkerMessages(this.onWorkerMessageHandler),(i=this._context)!=null&&i.frameSource&&await this.onFrameSourceChange(this._context.frameSource)}}connectToElement(e){var s,r,i;this.orientationObserver.register(),this.setupHtmlElement(e),(s=this.canvasDrawer)==null||s.startObservingCanvasResize(),this.htmlElementDidChange(),yT.add(this),this.orientation=this.orientationObserver.orientation.value,this.orientationObserver.addEventListener(Kv,this.onOrientationChangeListener),(r=this.hintPresenter)==null||r.addEventListener("hintpresenterupdate",this.onHintPresenterUpdateHandler),(i=this.hintPresenter)==null||i.addEventListener("willshow",this.onBeforeShowToastsHandler),this.localizationSubscription=Mh.getInstance().subscribe(a=>{a[gj]!=null&&(this.cameraRecoveryElement.textContent=a[gj])})}detachFromElement(){var e,s,r,i,a,o,c,d;(e=this.htmlElementState)==null||e.removeListeners(),this.removeStyles(),(s=this.canvasDrawer)==null||s.endObservingCanvasResize(),document.removeEventListener("visibilitychange",this.visibilityListener);for(let h of["touchend","mousedown"])this.cameraRecoveryElement.removeEventListener(h,this.cameraRecoveryListener);(r=this.loadingOverlay)==null||r.remove(),(i=this.customLocationsView)==null||i.unmount(),this.htmlElementDidChange(),(a=this.gestureRecognizer)==null||a.removeAllListeners(),this.clearHtmlElementContent(),yT.delete(this),this.orientationObserver.unregister(),this.orientationObserver.removeEventListener(Kv,this.onOrientationChangeListener),(o=this.hintPresenter)==null||o.removeEventListener("hintpresenterupdate",this.onHintPresenterUpdateHandler),(c=this.hintPresenter)==null||c.removeEventListener("willshow",this.onBeforeShowToastsHandler),(d=this.localizationSubscription)==null||d.cancel()}async addOverlay(e){var s;this.overlays.includes(e)||(this.overlays.push(e),await((s=this.privateContext)==null?void 0:s.update([{type:"addOverlay",newValue:e}])))}async removeOverlay(e){var s;this.overlays.includes(e)&&(this.overlays.splice(this.overlays.indexOf(e),1),await((s=this.privateContext)==null?void 0:s.update([{type:"removeOverlay",newValue:e}])))}addListener(e){this.listeners.includes(e)||this.listeners.push(e)}removeListener(e){this.listeners.includes(e)&&this.listeners.splice(this.listeners.indexOf(e),1)}viewPointForFramePoint(e){var s,r,i,a,o,c,d,h;let g={width:(r=(s=this.htmlElementState)==null?void 0:s.width)!=null?r:0,height:(a=(i=this.htmlElementState)==null?void 0:i.height)!=null?a:0},m={width:(c=(o=this.videoElement)==null?void 0:o.videoWidth)!=null?c:0,height:(h=(d=this.videoElement)==null?void 0:d.videoHeight)!=null?h:0},p=g.width/g.height,v=m.width/m.height,j=p>v?g.width/m.width:g.height/m.height,N={x:e.x*j,y:e.y*j},E=(m.width*j-g.width)/2,_=(m.height*j-g.height)/2;return new ds(N.x-E,N.y-_)}viewQuadrilateralForFrameQuadrilateral(e){let s=this.viewPointForFramePoint(e.topLeft),r=this.viewPointForFramePoint(e.topRight),i=this.viewPointForFramePoint(e.bottomLeft),a=this.viewPointForFramePoint(e.bottomRight);return new e1(s,r,a,i)}addControl(e){var s;this.controls.includes(e)||(e.view=this,this.controls.push(e),this.controlsUpdated(),(s=this.privateContext)==null||s.update([{type:"addControl",newValue:e}]))}removeControl(e){var s;if(this.controls.includes(e)){e.view=null;let r=this.controls.splice(this.controls.indexOf(e),1);this.getControlWidget(r[0]).remove(!0),this.controlsUpdated(),(s=this.privateContext)==null||s.update([{type:"removeControl",newValue:e}])}}toJSONObject(){var e;return{scanAreaMargins:this.scanAreaMargins.toJSONObject(),pointOfInterest:this.pointOfInterest.toJSONObject(),logoAnchor:this.logoAnchor,logoOffset:this.logoOffset.toJSONObject(),logoHidden:(e=this.logoHidden)!=null?e:!1,logoStyle:this.logoStyle,overlays:this.overlays.map(s=>s.toJSONObject()),controls:this.controls.map(s=>s.toJSONObject()),focusGesture:this.focusGesture?this.focusGesture.toJSONObject():null,zoomGesture:this.zoomGesture?this.zoomGesture.toJSONObject():null}}isCameraRecoveryVisible(){return!this.cameraRecoveryElement.hidden}setCameraRecoveryVisible(e){this.cameraRecoveryElement.hidden=!e}async allowPictureInPicture(e){await ir.instance().allowPictureInPicture(e)}viewAnchorPositionsForFrameAnchorPositions(e){let s=this.viewPointForFramePoint(e.topLeft),r=this.viewPointForFramePoint(e.topRight),i=this.viewPointForFramePoint(e.bottomLeft),a=this.viewPointForFramePoint(e.bottomRight),o=this.viewPointForFramePoint(e.centerLeft),c=this.viewPointForFramePoint(e.centerRight),d=this.viewPointForFramePoint(e.topCenter),h=this.viewPointForFramePoint(e.bottomCenter),g=this.viewPointForFramePoint(e.center);return new dve(s,r,a,i,o,d,c,h,g)}setDidTapCustomLocationsViewListener(e){this.customLocationsView&&this.customLocationsView.listener===null&&(this.customLocationsView.listener=e)}renderCustomLocationsView(e){this.customLocationsView!=null&&(this.customLocationsView.setMirrored(ir.instance().isMirrorImageEnabled()),this.customLocationsView.render(e))}removeStyles(){for(let e of document.querySelectorAll("style[scandit]"))e.remove()}onHintPresenterUpdate(e){var s;(s=this.privateContext)==null||s.workerCommand("hintPresenterV2update",{})}clearHtmlElementContent(){var e;this.htmlElement&&((e=this.canvasDrawer)==null||e.endObservingCanvasResize(),this.htmlElement.innerHTML="",this.cameraPaintboardElement=void 0,this.singleImageUploaderPaintboardElement=void 0,this.htmlElement=void 0)}setupHtmlElement(e){var s,r,i;this.createStyles(),this.htmlElement=e,Of.register();let a=`
      <div class="${Tt.CONTAINER_CLASS_NAME}">
        <div class="${Tt.PAINTBOARDS_CONTAINER_CLASS_NAME}">
          <div data-js-id="loading-overlay"></div>
          <div class="${Tt.PAINTBOARD_CLASS_NAME}" data-js-id="camera-paintboard">
            <video autoplay="autoplay" playsinline="true" muted="muted" poster="${cve}" style="opacity: 0;"></video>
            <img class="${Tt.FROZEN_FRAME}" data-js-id="frozen-frame" alt="frozen-frame" hidden />
            <canvas></canvas>
            <div data-js-id="${ng.CUSTOM_VIEW_CONTAINER}"></div>
            <div class="${Tt.HINT_CONTAINER_CLASS_NAME}">
              <div class="${Tt.HINT_CLASS_NAME}" hidden></div>
            </div>
            <${Of.tag}></${Of.tag}>
            <div class="${Tt.CONTROLS_CLASS_NAME}"></div>
            <div class="${Tt.CAMERA_RECOVERY_CLASS_NAME}" hidden>${this.cameraRecoveryText}</div>
            <div class="${Tt.ERROR_CLASS_NAME}" hidden></div>
          </div>
          <div class="${Tt.PAINTBOARD_CLASS_NAME}" data-js-id="singleimage-paintboard"></div>
        </div>
      </div>
    `;this.htmlElement.innerHTML=a,this.hintPresenter=this.htmlElement.querySelector(Of.tag),this.loadingOverlay&&this.loadingOverlay.remove(),this.loadingOverlay=V$.create(),this.loadingOverlay.hide(),(s=this.htmlElement.querySelector('[data-js-id="loading-overlay"]'))==null||s.replaceWith(this.loadingOverlay),this.customLocationsView&&this.customLocationsView.unmount(),this.customLocationsView=new lve,this.customLocationsView.mount(this.htmlElement.querySelector(`[data-js-id="${ng.CUSTOM_VIEW_CONTAINER}"]`)),this.customLocationsView.mapViewAnchorPositionsForFramePoint=h=>this.viewAnchorPositionsForFrameAnchorPositions(h),this.containerElement=this.htmlElement.querySelector(`.${Tt.CONTAINER_CLASS_NAME}`),this.cameraPaintboardElement=this.containerElement.querySelector('[data-js-id="camera-paintboard"]'),this.singleImageUploaderPaintboardElement=this.containerElement.querySelector('[data-js-id="singleimage-paintboard"]');let o=this.cameraPaintboardElement.querySelector("canvas");this.canvasElement==null?this.canvasElement=o:o.replaceWith(this.canvasElement);let c=this.cameraPaintboardElement.querySelector('[data-js-id="frozen-frame"]');this.frozenFrame==null?this.frozenFrame=c:c.replaceWith(this.frozenFrame),this.controlsElement=this.cameraPaintboardElement.querySelector(`.${Tt.CONTROLS_CLASS_NAME}`),this.cameraRecoveryElement=this.cameraPaintboardElement.querySelector(`.${Tt.CAMERA_RECOVERY_CLASS_NAME}`),this.errorElement=this.cameraPaintboardElement.querySelector(`.${Tt.ERROR_CLASS_NAME}`),this.hintContainerElement=this.cameraPaintboardElement.querySelector(`.${Tt.HINT_CONTAINER_CLASS_NAME}`),this.hintElement=this.cameraPaintboardElement.querySelector(`.${Tt.HINT_CLASS_NAME}`);let d=this.cameraPaintboardElement.querySelector("video");this.videoElement?d.replaceWith(this.videoElement):(this.videoElement=d,this.videoPauseListener=this.handleVideoPause.bind(this),this.videoElement.addEventListener("pause",this.videoPauseListener)),this.lastFrameSourceState!=null&&((i=(r=this._context)==null?void 0:r.frameSource)==null||i.switchToDesiredState(this.lastFrameSourceState)),document.addEventListener("visibilitychange",this.visibilityListener);for(let h of["touchend","mousedown"])this.cameraRecoveryElement.addEventListener(h,this.cameraRecoveryListener);this.htmlElementState&&this.htmlElementState.removeListeners(),this.htmlElementState=new wT(this.htmlElement),this.htmlElementState.onStateChanged(this.htmlElementDidChange.bind(this)),this.htmlElementState.onDisconnected(this.htmlElementDisconnected.bind(this)),this.gestureRecognizer=new J$(this.htmlElement),this.gestureRecognizer.addListener({onTap:async h=>{var g;(g=this.privateContext)==null||g.workerCommand("onTap",{point:h.toJSONObject()})}})}setupHtmlElementSingleImageUploader(e){var s;if(this.singleImageUploaderPaintboardElement==null)return;this.singleImageUploaderView&&this.singleImageUploaderView.unmount(),this.singleImageUploaderView=new _0e(e),this.singleImageUploaderView.mount(this.containerElement.querySelector('[data-js-id="singleimage-paintboard"]'));let r=(s=this._context)==null?void 0:s.frameSource;this.singleImageUploaderView.onInputCheck(i=>{r.getCurrentState()!=="starting"&&i.preventDefault()}),this.singleImageUploaderView.onBeforeFileRead(()=>{r._context&&this.singleImageUploaderView&&(this.singleImageUploaderView.canUploadFile=r._context.hasEnabledMode())}),this.singleImageUploaderView.onImageLoadError(()=>{r.currentState="starting",Fe.log(Fe.Level.Error,"Could not load image from selected file")}),this.singleImageUploaderView.onFileReaderError(i=>{var a,o;let c=i.target;r.currentState="starting",Fe.log(Fe.Level.Error,`Error while reading the file: ${(o=(a=c.error)==null?void 0:a.toString())!=null?o:""}`)}),this.singleImageUploaderView.onCaptureReady(async i=>{await r.processUploadedFileCapture(i)}),this.singleImageUploaderView.setButtonState(r.getCurrentState()==="starting"?"enabled":"disabled"),r.addView(this.singleImageUploaderView)}setupHtmlElementVisibility(e){this.cameraPaintboardElement!=null&&(this.cameraPaintboardElement.hidden=e!=="camera"),this.singleImageUploaderPaintboardElement!=null&&(this.singleImageUploaderPaintboardElement.hidden=e!=="singleImageUploader")}createStyles(){if(document.querySelector("style[scandit]")===null){let e=Y0e();for(let[s,r]of Object.entries(e))r.setAttribute("scandit",`data-capture-sdk-${s}`),document.head.append(r)}}async onOrientationChange(e){var s,r;this.orientation=e.detail.value,await((r=this.privateContext)==null?void 0:r.update([{type:"viewChange",newValue:{...(s=this.htmlElementState)==null?void 0:s.toJSONObject(),orientation:this.orientation}}]))}htmlElementDidChange(){var e,s;if(!this.htmlElementState)return;let r=this.htmlElementState,i=r.toJSONObject();if(!wT.areEquivalentJSONStates(this.lastHtmlElementState,i)){this.orientation=this.orientationObserver.orientation.value,(e=this.privateContext)==null||e.update([{type:"viewChange",newValue:{...r.toJSONObject(),orientation:this.orientation}}]),this.lastHtmlElementState=i,(s=this.canvasDrawer)==null||s.updateCanvasSizeAttributes(this.width,this.height),this.handleVideoDisplay(i.visible);for(let a of this.listeners)typeof a.didChangeSize=="function"&&a.didChangeSize(this,new sp(i.size.width.value,i.size.height.value),this.orientation)}}async htmlElementDisconnected(){var e,s,r,i,a,o,c;this.isVideoElementDetached=!1,(e=this.videoElement)==null||e.remove(),this.lastFrameSourceState=(r=(s=this._context)==null?void 0:s.frameSource)==null?void 0:r.getCurrentState(),await((a=(i=this._context)==null?void 0:i.frameSource)==null?void 0:a.switchToDesiredState("off")),await((c=this.privateContext)==null?void 0:c.update([{type:"viewChange",newValue:{...(o=this.htmlElementState)==null?void 0:o.toJSONObject(),orientation:this.orientation}}]))}handleVideoDisplay(e){this.videoElement==null||this.cameraPaintboardElement==null||(!e&&!this.isVideoElementDetached?(this.videoElement.width=0,this.videoElement.height=0,this.videoElement.style.opacity="0",this.videoElement.style.visibility="hidden",document.body.append(this.videoElement),this.isVideoElementDetached=!0):e&&this.isVideoElementDetached&&(this.cameraPaintboardElement.insertAdjacentElement("afterbegin",this.videoElement),this.isVideoElementDetached=!1,this.videoElement.style.removeProperty("visibility"),this.videoElement.removeAttribute("width"),this.videoElement.removeAttribute("height"),this.videoElement.style.removeProperty("opacity")))}isCanvasDrawerWithMetrics(e){return e instanceof nve}onWorkerMessage(e){var s,r;switch(e.type){case"draw":{this.drawEngineCommands(e.payload);break}case"performanceMetricsReport":{let i=this._canvasDrawer;i!=null&&this.isCanvasDrawerWithMetrics(i)&&i.setPerformanceMetrics(e.payload);break}case"contextDidChangeStatus":{let i=VN.fromJSON(e.payload);(s=this.loadingOverlay)==null||s.hide(),i.isValid?this.clearError():this.displayError(i);break}case"showHint":{this.displayHint(e.payload.text,e.payload.style);break}case"updateHint":{this.updateHint(e.payload.style);break}case"hideHint":{this.hideHint();break}default:{(r=this.hintPresenter)==null||r.handleMessage(e);break}}}async onBeforeShowToasts(){var e,s;let r=await((e=this._context)==null?void 0:e.workerCommand("getViewfinderInfo",{}));if((r==null?void 0:r.rect)!=null){if(r.rect.origin.x===0&&r.rect.origin.y===0&&r.rect.size.width===0&&r.rect.size.height===0)return;(s=this.hintPresenter)==null||s.setViewFinderRect(new e0e(new ds(r.rect.origin.x,r.rect.origin.y),new sp(r.rect.size.width,r.rect.size.height)))}}drawEngineCommands(e){var s;(s=this.canvasDrawer)==null||s.draw(e)}displayError(e){this.errorElement.textContent=`Error ${e.code}: ${e.message}`,this.errorElement.hidden=!1}clearError(){this.errorElement.textContent="",this.errorElement.hidden=!0}displayHint(e,s){this.hintElement.textContent=e,this.hintElement.hidden=!1,this.updateHint(s)}hideHint(){this.hintElement.textContent="",this.hintElement.hidden=!0}updateHint(e){this.hintElement.style.background=e.backgroundColor,this.hintElement.style.color=e.textColor,this.hintElement.style.fontSize=e.font==="body"?"1.25rem":"1rem",this.hintElement.style.borderRadius=e.hintCornerStyle==="rounded"?"5px":"0px",e.hintHeight==="taller"&&(this.hintElement.style.paddingTop="1.25em",this.hintElement.style.paddingBottom="1.25em"),e.hintWidth==="wider"&&(this.hintElement.style.paddingLeft="1.25em",this.hintElement.style.paddingRight="1.25em"),this.updateAnchor(e)}updateAnchor(e){let s=`${e.verticalOffsetRatio*100}vh`;switch(e.anchor){case"topLeft":{this.hintContainerElement.style.placeContent="start left",this.hintElement.style.transform=`translateY(${s})`;break}case"topCenter":{this.hintContainerElement.style.placeContent="start center",this.hintElement.style.transform=`translateY(${s})`;break}case"topRight":{this.hintContainerElement.style.placeContent="start right",this.hintElement.style.transform=`translateY(${s})`;break}case"centerLeft":{this.hintContainerElement.style.placeContent="center start";break}case"center":{this.hintContainerElement.style.placeContent="center";break}case"centerRight":{this.hintContainerElement.style.placeContent="center end";break}case"bottomLeft":{this.hintContainerElement.style.placeContent="end left";break}case"bottomCenter":{this.hintContainerElement.style.placeContent="end center";break}case"bottomRight":{this.hintContainerElement.style.placeContent="end right";break}}}controlsUpdated(){var e;this.redrawControls(),(e=this.privateContext)==null||e.update()}redrawControls(){var e;let s=(e=this._context)==null?void 0:e.frameSource;for(let r of this.controls){let i=this.getControlWidget(r);s==null||s.desiredState==="off"||s.desiredState==="standby"||s.desiredState==="stopping"?i.remove():i.install()}}registerControlWidget(e,s){let r=new s(e,this.controlsElement);return this.controlWidgets.set(e,r),r}getControlWidget(e){let s=this.controlWidgets.get(e);if(s)return s;let{type:r}=e,i;switch(r){case"torch":{i=new H0e(e,this.controlsElement),this.controlWidgets.set(e,i);break}case"camera":{i=new q0e(e,this.controlsElement),this.controlWidgets.set(e,i);break}case"camera-fov":{i=new G0e(e,this.controlsElement),this.controlWidgets.set(e,i);break}}return i}async onFrameSourceChange(e){let s=e==null?void 0:e.type;if(this.setupHtmlElementVisibility(s),s==="camera"){let r=e==null?void 0:e.getCurrentState();r!=null&&await this.onCameraStateChanged(r)}else s==="singleImageUploader"&&this.setupHtmlElementSingleImageUploader(e.settings)}async onCameraStateChanged(e){var s;switch((s=this.cameraPaintboardElement)==null||s.classList.toggle(Tt.PAINTBOARD_CLASS_NAME_STATE_ON,e==="on"),e){case"stopping":{this.hiddenProperties.freezeFrameWhenStoppingFrameSource&&this.freezeFrame(),this.setVideoElementOpacity("0");return}case"starting":case"bootingUp":case"wakingUp":{if(!this.htmlElement){Fe.log(Fe.Level.Error,"cannot set frame source stream before connecting view to an HTML element");return}this.videoElement&&(ir.instance().videoElement=this.videoElement,ir.instance().gui.isCameraRecoveryVisible=this.isCameraRecoveryVisible.bind(this),ir.instance().gui.setCameraRecoveryVisible=this.setCameraRecoveryVisible.bind(this),this.setVideoElementOpacity("0"));return}case"off":{this.setVideoElementOpacity("0"),this.redrawControls();return}case"on":{await ir.instance().waitForCapabilities(),this.redrawControls(),this.unfreezeFrame(),this.setVideoElementOpacity("1");break}case"goingToSleep":{this.freezeFrame();break}}}setVideoElementOpacity(e){this.videoElement&&(this.videoElement.style.opacity=e),this.canvasElement&&(this.canvasElement.style.opacity=e)}onSingleImageUploaderSettingsChange(e){this.setupHtmlElementSingleImageUploader(e)}handleVideoPause(){ir.instance().playVideo()}setHiddenProperty(e,s){this.hiddenProperties[e]=s}async onVisibilityChange(){var e,s;let r=(e=this.videoElement)==null?void 0:e.srcObject;if(this.hiddenProperties.stopVideoTracksOnVisibilityChange&&(document.visibilityState==="hidden"&&ir.instance().stopVideoTracks(),document.visibilityState==="visible"&&ir.instance().activeCamera!=null&&r!=null))if(!r.active||(s=r.getVideoTracks()[0])!=null&&s.muted)try{Fe.log(Fe.Level.Debug,'Detected visibility change ("visible") event with inactive video source, try to reinitialize camera'),await ir.instance().reinitializeCamera()}catch{}else Fe.log(Fe.Level.Debug,'Detected visibility change ("visible") event with active video source, replay video'),ir.instance().playVideo()}async cameraRecovery(e){e.preventDefault(),ir.instance().activeCamera=ir.instance().selectedCamera,await ir.instance().reinitializeCamera()}freezeFrame(){var e;if(!this.frozenFrame)return;let s=ir.instance().getCurrentFrame();if(!s)return;let r=new ImageData(s.data,s.width,s.height);this.frozenFrameCanvas.width=r.width,this.frozenFrameCanvas.height=r.height,this.frozenFrame.width=r.width,this.frozenFrame.height=r.height,(e=this.frozenFrameCanvas.getContext("2d"))==null||e.putImageData(r,0,0),this.frozenFrame.src=this.frozenFrameCanvas.toDataURL("image/jpeg",.4),this.frozenFrame.classList.toggle(Tt.MIRRORED_CLASS_NAME,ir.instance().isMirrorImageEnabled()),this.frozenFrame.hidden=!1}unfreezeFrame(){this.frozenFrame&&(this.frozenFrame.src="",this.frozenFrame.hidden=!0)}},fve="data:audio/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQRChYECGFOAZwEAAAAAAAOWEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHWTbuMU6uEElTDZ1OsggFATbuMU6uEHFO7a1OsggOA7AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmsCrXsYMPQkBNgIxMYXZmNjEuMS4xMDBXQYxMYXZmNjEuMS4xMDBEiYhAd+AAAAAAABZUrmvlrgEAAAAAAABc14EBc8WIg08ub3qWhnCcgQAitZyDdW5kiIEAhoZBX09QVVNWqoNjLqBWu4QExLQAg4EC4ZGfgQK1iEDHcAAAAAAAYmSBIGOik09wdXNIZWFkAQI4AeAuAAAAAAASVMNn+3Nzn2PAgGfImUWjh0VOQ09ERVJEh4xMYXZmNjEuMS4xMDBzc9ZjwItjxYiDTy5vepaGcGfIoUWjh0VOQ09ERVJEh5RMYXZjNjEuMy4xMDAgbGlib3B1c2fIoUWjiERVUkFUSU9ORIeTMDA6MDA6MDAuMzgyMDAwMDAwAB9DtnVBuueBAKOugQAAgCiDbjuDzUwipkvAAbsncWC64YXA60en1ZoN8Z+MzFsMrkjZdE9+kzThwKOugQAVgCikmlGjqD/BMTx8UMHQQIkyzNa4+i/GF8qWxMmwp9/b52ziROwy8+vlu6OogQApgCif9PJP2TVhRpk9OiIKqY7SgqYyraCgntSwzRFSNDAu39ER0KO0gQA9gCi+D4hgiPOvYBIzXCNWGWyjS2R2d67BIFy+lpuz8g8lJ9B/wNMBXD6sTtm6R2FKYKObgQBRgCgjswJcBYTX6v+tXBR9jGkdsn9jRx/Io4uBAGWAKAfGs+Mf06OMgQB5gCgHxrMPn6Jko4yBAI2AKAfGsw+fomSjjIEAoYAoB8azD5+iZKOMgQC1gCgHxrMPn6Jko4yBAMmAKAfGsw+fomSjjIEA3YAoB8azD5+iZKOMgQDxgCgHxrMPn6Jko4yBAQWAKAfGsw+fomSjjIEBGYAoB8azD5+iZKOMgQEtgCgHxrMPn6Jko4yBAUGAKAfGsw+fomSjjIEBVYAoB8azD5+iZKOMgQFpgCgHxrMPn6JkoJWhjIEBfQAoB8azD5+iZHWihAEgpTscU7trkbuPs4EAt4r3gQHxggHA8IED",pve=HS(t=>{(function(){var e=function(){this.init()};e.prototype={init:function(){var m=this||s;return m._counter=1e3,m._html5AudioPool=[],m.html5PoolSize=10,m._codecs={},m._howls=[],m._muted=!1,m._volume=1,m._canPlayEvent="canplaythrough",m._navigator=typeof window<"u"&&window.navigator?window.navigator:null,m.masterGain=null,m.noAudio=!1,m.usingWebAudio=!0,m.autoSuspend=!0,m.ctx=null,m.autoUnlock=!0,m._setup(),m},volume:function(m){var p=this||s;if(m=parseFloat(m),p.ctx||g(),typeof m<"u"&&m>=0&&m<=1){if(p._volume=m,p._muted)return p;p.usingWebAudio&&p.masterGain.gain.setValueAtTime(m,s.ctx.currentTime);for(var v=0;v<p._howls.length;v++)if(!p._howls[v]._webAudio)for(var j=p._howls[v]._getSoundIds(),N=0;N<j.length;N++){var E=p._howls[v]._soundById(j[N]);E&&E._node&&(E._node.volume=E._volume*m)}return p}return p._volume},mute:function(m){var p=this||s;p.ctx||g(),p._muted=m,p.usingWebAudio&&p.masterGain.gain.setValueAtTime(m?0:p._volume,s.ctx.currentTime);for(var v=0;v<p._howls.length;v++)if(!p._howls[v]._webAudio)for(var j=p._howls[v]._getSoundIds(),N=0;N<j.length;N++){var E=p._howls[v]._soundById(j[N]);E&&E._node&&(E._node.muted=m?!0:E._muted)}return p},stop:function(){for(var m=this||s,p=0;p<m._howls.length;p++)m._howls[p].stop();return m},unload:function(){for(var m=this||s,p=m._howls.length-1;p>=0;p--)m._howls[p].unload();return m.usingWebAudio&&m.ctx&&typeof m.ctx.close<"u"&&(m.ctx.close(),m.ctx=null,g()),m},codecs:function(m){return(this||s)._codecs[m.replace(/^x-/,"")]},_setup:function(){var m=this||s;if(m.state=m.ctx&&m.ctx.state||"suspended",m._autoSuspend(),!m.usingWebAudio)if(typeof Audio<"u")try{var p=new Audio;typeof p.oncanplaythrough>"u"&&(m._canPlayEvent="canplay")}catch{m.noAudio=!0}else m.noAudio=!0;try{var p=new Audio;p.muted&&(m.noAudio=!0)}catch{}return m.noAudio||m._setupCodecs(),m},_setupCodecs:function(){var m=this||s,p=null;try{p=typeof Audio<"u"?new Audio:null}catch{return m}if(!p||typeof p.canPlayType!="function")return m;var v=p.canPlayType("audio/mpeg;").replace(/^no$/,""),j=m._navigator?m._navigator.userAgent:"",N=j.match(/OPR\/(\d+)/g),E=N&&parseInt(N[0].split("/")[1],10)<33,_=j.indexOf("Safari")!==-1&&j.indexOf("Chrome")===-1,S=j.match(/Version\/(.*?) /),C=_&&S&&parseInt(S[1],10)<15;return m._codecs={mp3:!!(!E&&(v||p.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!v,opus:!!p.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!p.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!p.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(p.canPlayType('audio/wav; codecs="1"')||p.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!p.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!p.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(p.canPlayType("audio/x-m4a;")||p.canPlayType("audio/m4a;")||p.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(p.canPlayType("audio/x-m4b;")||p.canPlayType("audio/m4b;")||p.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(p.canPlayType("audio/x-mp4;")||p.canPlayType("audio/mp4;")||p.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!C&&p.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!C&&p.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!p.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(p.canPlayType("audio/x-flac;")||p.canPlayType("audio/flac;")).replace(/^no$/,"")},m},_unlockAudio:function(){var m=this||s;if(!(m._audioUnlocked||!m.ctx)){m._audioUnlocked=!1,m.autoUnlock=!1,!m._mobileUnloaded&&m.ctx.sampleRate!==44100&&(m._mobileUnloaded=!0,m.unload()),m._scratchBuffer=m.ctx.createBuffer(1,1,22050);var p=function(v){for(;m._html5AudioPool.length<m.html5PoolSize;)try{var j=new Audio;j._unlocked=!0,m._releaseHtml5Audio(j)}catch{m.noAudio=!0;break}for(var N=0;N<m._howls.length;N++)if(!m._howls[N]._webAudio)for(var E=m._howls[N]._getSoundIds(),_=0;_<E.length;_++){var S=m._howls[N]._soundById(E[_]);S&&S._node&&!S._node._unlocked&&(S._node._unlocked=!0,S._node.load())}m._autoResume();var C=m.ctx.createBufferSource();C.buffer=m._scratchBuffer,C.connect(m.ctx.destination),typeof C.start>"u"?C.noteOn(0):C.start(0),typeof m.ctx.resume=="function"&&m.ctx.resume(),C.onended=function(){C.disconnect(0),m._audioUnlocked=!0,document.removeEventListener("touchstart",p,!0),document.removeEventListener("touchend",p,!0),document.removeEventListener("click",p,!0),document.removeEventListener("keydown",p,!0);for(var I=0;I<m._howls.length;I++)m._howls[I]._emit("unlock")}};return document.addEventListener("touchstart",p,!0),document.addEventListener("touchend",p,!0),document.addEventListener("click",p,!0),document.addEventListener("keydown",p,!0),m}},_obtainHtml5Audio:function(){var m=this||s;if(m._html5AudioPool.length)return m._html5AudioPool.pop();var p=new Audio().play();return p&&typeof Promise<"u"&&(p instanceof Promise||typeof p.then=="function")&&p.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(m){var p=this||s;return m._unlocked&&p._html5AudioPool.push(m),p},_autoSuspend:function(){var m=this;if(!(!m.autoSuspend||!m.ctx||typeof m.ctx.suspend>"u"||!s.usingWebAudio)){for(var p=0;p<m._howls.length;p++)if(m._howls[p]._webAudio){for(var v=0;v<m._howls[p]._sounds.length;v++)if(!m._howls[p]._sounds[v]._paused)return m}return m._suspendTimer&&clearTimeout(m._suspendTimer),m._suspendTimer=setTimeout(function(){if(m.autoSuspend){m._suspendTimer=null,m.state="suspending";var j=function(){m.state="suspended",m._resumeAfterSuspend&&(delete m._resumeAfterSuspend,m._autoResume())};m.ctx.suspend().then(j,j)}},3e4),m}},_autoResume:function(){var m=this;if(!(!m.ctx||typeof m.ctx.resume>"u"||!s.usingWebAudio))return m.state==="running"&&m.ctx.state!=="interrupted"&&m._suspendTimer?(clearTimeout(m._suspendTimer),m._suspendTimer=null):m.state==="suspended"||m.state==="running"&&m.ctx.state==="interrupted"?(m.ctx.resume().then(function(){m.state="running";for(var p=0;p<m._howls.length;p++)m._howls[p]._emit("resume")}),m._suspendTimer&&(clearTimeout(m._suspendTimer),m._suspendTimer=null)):m.state==="suspending"&&(m._resumeAfterSuspend=!0),m}};var s=new e,r=function(m){var p=this;if(!m.src||m.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}p.init(m)};r.prototype={init:function(m){var p=this;return s.ctx||g(),p._autoplay=m.autoplay||!1,p._format=typeof m.format!="string"?m.format:[m.format],p._html5=m.html5||!1,p._muted=m.mute||!1,p._loop=m.loop||!1,p._pool=m.pool||5,p._preload=typeof m.preload=="boolean"||m.preload==="metadata"?m.preload:!0,p._rate=m.rate||1,p._sprite=m.sprite||{},p._src=typeof m.src!="string"?m.src:[m.src],p._volume=m.volume!==void 0?m.volume:1,p._xhr={method:m.xhr&&m.xhr.method?m.xhr.method:"GET",headers:m.xhr&&m.xhr.headers?m.xhr.headers:null,withCredentials:m.xhr&&m.xhr.withCredentials?m.xhr.withCredentials:!1},p._duration=0,p._state="unloaded",p._sounds=[],p._endTimers={},p._queue=[],p._playLock=!1,p._onend=m.onend?[{fn:m.onend}]:[],p._onfade=m.onfade?[{fn:m.onfade}]:[],p._onload=m.onload?[{fn:m.onload}]:[],p._onloaderror=m.onloaderror?[{fn:m.onloaderror}]:[],p._onplayerror=m.onplayerror?[{fn:m.onplayerror}]:[],p._onpause=m.onpause?[{fn:m.onpause}]:[],p._onplay=m.onplay?[{fn:m.onplay}]:[],p._onstop=m.onstop?[{fn:m.onstop}]:[],p._onmute=m.onmute?[{fn:m.onmute}]:[],p._onvolume=m.onvolume?[{fn:m.onvolume}]:[],p._onrate=m.onrate?[{fn:m.onrate}]:[],p._onseek=m.onseek?[{fn:m.onseek}]:[],p._onunlock=m.onunlock?[{fn:m.onunlock}]:[],p._onresume=[],p._webAudio=s.usingWebAudio&&!p._html5,typeof s.ctx<"u"&&s.ctx&&s.autoUnlock&&s._unlockAudio(),s._howls.push(p),p._autoplay&&p._queue.push({event:"play",action:function(){p.play()}}),p._preload&&p._preload!=="none"&&p.load(),p},load:function(){var m=this,p=null;if(s.noAudio){m._emit("loaderror",null,"No audio support.");return}typeof m._src=="string"&&(m._src=[m._src]);for(var v=0;v<m._src.length;v++){var j,N;if(m._format&&m._format[v])j=m._format[v];else{if(N=m._src[v],typeof N!="string"){m._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}j=/^data:audio\/([^;,]+);/i.exec(N),j||(j=/\.([^.]+)$/.exec(N.split("?",1)[0])),j&&(j=j[1].toLowerCase())}if(j||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),j&&s.codecs(j)){p=m._src[v];break}}if(!p){m._emit("loaderror",null,"No codec support for selected audio sources.");return}return m._src=p,m._state="loading",window.location.protocol==="https:"&&p.slice(0,5)==="http:"&&(m._html5=!0,m._webAudio=!1),new i(m),m._webAudio&&o(m),m},play:function(m,p){var v=this,j=null;if(typeof m=="number")j=m,m=null;else{if(typeof m=="string"&&v._state==="loaded"&&!v._sprite[m])return null;if(typeof m>"u"&&(m="__default",!v._playLock)){for(var N=0,E=0;E<v._sounds.length;E++)v._sounds[E]._paused&&!v._sounds[E]._ended&&(N++,j=v._sounds[E]._id);N===1?m=null:j=null}}var _=j?v._soundById(j):v._inactiveSound();if(!_)return null;if(j&&!m&&(m=_._sprite||"__default"),v._state!=="loaded"){_._sprite=m,_._ended=!1;var S=_._id;return v._queue.push({event:"play",action:function(){v.play(S)}}),S}if(j&&!_._paused)return p||v._loadQueue("play"),_._id;v._webAudio&&s._autoResume();var C=Math.max(0,_._seek>0?_._seek:v._sprite[m][0]/1e3),I=Math.max(0,(v._sprite[m][0]+v._sprite[m][1])/1e3-C),P=I*1e3/Math.abs(_._rate),L=v._sprite[m][0]/1e3,T=(v._sprite[m][0]+v._sprite[m][1])/1e3;_._sprite=m,_._ended=!1;var M=function(){_._paused=!1,_._seek=C,_._start=L,_._stop=T,_._loop=!!(_._loop||v._sprite[m][2])};if(C>=T){v._ended(_);return}var k=_._node;if(v._webAudio){var O=function(){v._playLock=!1,M(),v._refreshBuffer(_);var z=_._muted||v._muted?0:_._volume;k.gain.setValueAtTime(z,s.ctx.currentTime),_._playStart=s.ctx.currentTime,typeof k.bufferSource.start>"u"?_._loop?k.bufferSource.noteGrainOn(0,C,86400):k.bufferSource.noteGrainOn(0,C,I):_._loop?k.bufferSource.start(0,C,86400):k.bufferSource.start(0,C,I),P!==1/0&&(v._endTimers[_._id]=setTimeout(v._ended.bind(v,_),P)),p||setTimeout(function(){v._emit("play",_._id),v._loadQueue()},0)};s.state==="running"&&s.ctx.state!=="interrupted"?O():(v._playLock=!0,v.once("resume",O),v._clearTimer(_._id))}else{var V=function(){k.currentTime=C,k.muted=_._muted||v._muted||s._muted||k.muted,k.volume=_._volume*s.volume(),k.playbackRate=_._rate;try{var z=k.play();if(z&&typeof Promise<"u"&&(z instanceof Promise||typeof z.then=="function")?(v._playLock=!0,M(),z.then(function(){v._playLock=!1,k._unlocked=!0,p?v._loadQueue():v._emit("play",_._id)}).catch(function(){v._playLock=!1,v._emit("playerror",_._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),_._ended=!0,_._paused=!0})):p||(v._playLock=!1,M(),v._emit("play",_._id)),k.playbackRate=_._rate,k.paused){v._emit("playerror",_._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}m!=="__default"||_._loop?v._endTimers[_._id]=setTimeout(v._ended.bind(v,_),P):(v._endTimers[_._id]=function(){v._ended(_),k.removeEventListener("ended",v._endTimers[_._id],!1)},k.addEventListener("ended",v._endTimers[_._id],!1))}catch(G){v._emit("playerror",_._id,G)}};k.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(k.src=v._src,k.load());var B=window&&window.ejecta||!k.readyState&&s._navigator.isCocoonJS;if(k.readyState>=3||B)V();else{v._playLock=!0,v._state="loading";var Y=function(){v._state="loaded",V(),k.removeEventListener(s._canPlayEvent,Y,!1)};k.addEventListener(s._canPlayEvent,Y,!1),v._clearTimer(_._id)}}return _._id},pause:function(m){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"pause",action:function(){p.pause(m)}}),p;for(var v=p._getSoundIds(m),j=0;j<v.length;j++){p._clearTimer(v[j]);var N=p._soundById(v[j]);if(N&&!N._paused&&(N._seek=p.seek(v[j]),N._rateSeek=0,N._paused=!0,p._stopFade(v[j]),N._node))if(p._webAudio){if(!N._node.bufferSource)continue;typeof N._node.bufferSource.stop>"u"?N._node.bufferSource.noteOff(0):N._node.bufferSource.stop(0),p._cleanBuffer(N._node)}else(!isNaN(N._node.duration)||N._node.duration===1/0)&&N._node.pause();arguments[1]||p._emit("pause",N?N._id:null)}return p},stop:function(m,p){var v=this;if(v._state!=="loaded"||v._playLock)return v._queue.push({event:"stop",action:function(){v.stop(m)}}),v;for(var j=v._getSoundIds(m),N=0;N<j.length;N++){v._clearTimer(j[N]);var E=v._soundById(j[N]);E&&(E._seek=E._start||0,E._rateSeek=0,E._paused=!0,E._ended=!0,v._stopFade(j[N]),E._node&&(v._webAudio?E._node.bufferSource&&(typeof E._node.bufferSource.stop>"u"?E._node.bufferSource.noteOff(0):E._node.bufferSource.stop(0),v._cleanBuffer(E._node)):(!isNaN(E._node.duration)||E._node.duration===1/0)&&(E._node.currentTime=E._start||0,E._node.pause(),E._node.duration===1/0&&v._clearSound(E._node))),p||v._emit("stop",E._id))}return v},mute:function(m,p){var v=this;if(v._state!=="loaded"||v._playLock)return v._queue.push({event:"mute",action:function(){v.mute(m,p)}}),v;if(typeof p>"u")if(typeof m=="boolean")v._muted=m;else return v._muted;for(var j=v._getSoundIds(p),N=0;N<j.length;N++){var E=v._soundById(j[N]);E&&(E._muted=m,E._interval&&v._stopFade(E._id),v._webAudio&&E._node?E._node.gain.setValueAtTime(m?0:E._volume,s.ctx.currentTime):E._node&&(E._node.muted=s._muted?!0:m),v._emit("mute",E._id))}return v},volume:function(){var m=this,p=arguments,v,j;if(p.length===0)return m._volume;if(p.length===1||p.length===2&&typeof p[1]>"u"){var N=m._getSoundIds(),E=N.indexOf(p[0]);E>=0?j=parseInt(p[0],10):v=parseFloat(p[0])}else p.length>=2&&(v=parseFloat(p[0]),j=parseInt(p[1],10));var _;if(typeof v<"u"&&v>=0&&v<=1){if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"volume",action:function(){m.volume.apply(m,p)}}),m;typeof j>"u"&&(m._volume=v),j=m._getSoundIds(j);for(var S=0;S<j.length;S++)_=m._soundById(j[S]),_&&(_._volume=v,p[2]||m._stopFade(j[S]),m._webAudio&&_._node&&!_._muted?_._node.gain.setValueAtTime(v,s.ctx.currentTime):_._node&&!_._muted&&(_._node.volume=v*s.volume()),m._emit("volume",_._id))}else return _=j?m._soundById(j):m._sounds[0],_?_._volume:0;return m},fade:function(m,p,v,j){var N=this;if(N._state!=="loaded"||N._playLock)return N._queue.push({event:"fade",action:function(){N.fade(m,p,v,j)}}),N;m=Math.min(Math.max(0,parseFloat(m)),1),p=Math.min(Math.max(0,parseFloat(p)),1),v=parseFloat(v),N.volume(m,j);for(var E=N._getSoundIds(j),_=0;_<E.length;_++){var S=N._soundById(E[_]);if(S){if(j||N._stopFade(E[_]),N._webAudio&&!S._muted){var C=s.ctx.currentTime,I=C+v/1e3;S._volume=m,S._node.gain.setValueAtTime(m,C),S._node.gain.linearRampToValueAtTime(p,I)}N._startFadeInterval(S,m,p,v,E[_],typeof j>"u")}}return N},_startFadeInterval:function(m,p,v,j,N,E){var _=this,S=p,C=v-p,I=Math.abs(C/.01),P=Math.max(4,I>0?j/I:j),L=Date.now();m._fadeTo=v,m._interval=setInterval(function(){var T=(Date.now()-L)/j;L=Date.now(),S+=C*T,S=Math.round(S*100)/100,C<0?S=Math.max(v,S):S=Math.min(v,S),_._webAudio?m._volume=S:_.volume(S,m._id,!0),E&&(_._volume=S),(v<p&&S<=v||v>p&&S>=v)&&(clearInterval(m._interval),m._interval=null,m._fadeTo=null,_.volume(v,m._id),_._emit("fade",m._id))},P)},_stopFade:function(m){var p=this,v=p._soundById(m);return v&&v._interval&&(p._webAudio&&v._node.gain.cancelScheduledValues(s.ctx.currentTime),clearInterval(v._interval),v._interval=null,p.volume(v._fadeTo,m),v._fadeTo=null,p._emit("fade",m)),p},loop:function(){var m=this,p=arguments,v,j,N;if(p.length===0)return m._loop;if(p.length===1)if(typeof p[0]=="boolean")v=p[0],m._loop=v;else return N=m._soundById(parseInt(p[0],10)),N?N._loop:!1;else p.length===2&&(v=p[0],j=parseInt(p[1],10));for(var E=m._getSoundIds(j),_=0;_<E.length;_++)N=m._soundById(E[_]),N&&(N._loop=v,m._webAudio&&N._node&&N._node.bufferSource&&(N._node.bufferSource.loop=v,v&&(N._node.bufferSource.loopStart=N._start||0,N._node.bufferSource.loopEnd=N._stop,m.playing(E[_])&&(m.pause(E[_],!0),m.play(E[_],!0)))));return m},rate:function(){var m=this,p=arguments,v,j;if(p.length===0)j=m._sounds[0]._id;else if(p.length===1){var N=m._getSoundIds(),E=N.indexOf(p[0]);E>=0?j=parseInt(p[0],10):v=parseFloat(p[0])}else p.length===2&&(v=parseFloat(p[0]),j=parseInt(p[1],10));var _;if(typeof v=="number"){if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"rate",action:function(){m.rate.apply(m,p)}}),m;typeof j>"u"&&(m._rate=v),j=m._getSoundIds(j);for(var S=0;S<j.length;S++)if(_=m._soundById(j[S]),_){m.playing(j[S])&&(_._rateSeek=m.seek(j[S]),_._playStart=m._webAudio?s.ctx.currentTime:_._playStart),_._rate=v,m._webAudio&&_._node&&_._node.bufferSource?_._node.bufferSource.playbackRate.setValueAtTime(v,s.ctx.currentTime):_._node&&(_._node.playbackRate=v);var C=m.seek(j[S]),I=(m._sprite[_._sprite][0]+m._sprite[_._sprite][1])/1e3-C,P=I*1e3/Math.abs(_._rate);(m._endTimers[j[S]]||!_._paused)&&(m._clearTimer(j[S]),m._endTimers[j[S]]=setTimeout(m._ended.bind(m,_),P)),m._emit("rate",_._id)}}else return _=m._soundById(j),_?_._rate:m._rate;return m},seek:function(){var m=this,p=arguments,v,j;if(p.length===0)m._sounds.length&&(j=m._sounds[0]._id);else if(p.length===1){var N=m._getSoundIds(),E=N.indexOf(p[0]);E>=0?j=parseInt(p[0],10):m._sounds.length&&(j=m._sounds[0]._id,v=parseFloat(p[0]))}else p.length===2&&(v=parseFloat(p[0]),j=parseInt(p[1],10));if(typeof j>"u")return 0;if(typeof v=="number"&&(m._state!=="loaded"||m._playLock))return m._queue.push({event:"seek",action:function(){m.seek.apply(m,p)}}),m;var _=m._soundById(j);if(_)if(typeof v=="number"&&v>=0){var S=m.playing(j);S&&m.pause(j,!0),_._seek=v,_._ended=!1,m._clearTimer(j),!m._webAudio&&_._node&&!isNaN(_._node.duration)&&(_._node.currentTime=v);var C=function(){S&&m.play(j,!0),m._emit("seek",j)};if(S&&!m._webAudio){var I=function(){m._playLock?setTimeout(I,0):C()};setTimeout(I,0)}else C()}else if(m._webAudio){var P=m.playing(j)?s.ctx.currentTime-_._playStart:0,L=_._rateSeek?_._rateSeek-_._seek:0;return _._seek+(L+P*Math.abs(_._rate))}else return _._node.currentTime;return m},playing:function(m){var p=this;if(typeof m=="number"){var v=p._soundById(m);return v?!v._paused:!1}for(var j=0;j<p._sounds.length;j++)if(!p._sounds[j]._paused)return!0;return!1},duration:function(m){var p=this,v=p._duration,j=p._soundById(m);return j&&(v=p._sprite[j._sprite][1]/1e3),v},state:function(){return this._state},unload:function(){for(var m=this,p=m._sounds,v=0;v<p.length;v++)p[v]._paused||m.stop(p[v]._id),m._webAudio||(m._clearSound(p[v]._node),p[v]._node.removeEventListener("error",p[v]._errorFn,!1),p[v]._node.removeEventListener(s._canPlayEvent,p[v]._loadFn,!1),p[v]._node.removeEventListener("ended",p[v]._endFn,!1),s._releaseHtml5Audio(p[v]._node)),delete p[v]._node,m._clearTimer(p[v]._id);var j=s._howls.indexOf(m);j>=0&&s._howls.splice(j,1);var N=!0;for(v=0;v<s._howls.length;v++)if(s._howls[v]._src===m._src||m._src.indexOf(s._howls[v]._src)>=0){N=!1;break}return a&&N&&delete a[m._src],s.noAudio=!1,m._state="unloaded",m._sounds=[],m=null,null},on:function(m,p,v,j){var N=this,E=N["_on"+m];return typeof p=="function"&&E.push(j?{id:v,fn:p,once:j}:{id:v,fn:p}),N},off:function(m,p,v){var j=this,N=j["_on"+m],E=0;if(typeof p=="number"&&(v=p,p=null),p||v)for(E=0;E<N.length;E++){var _=v===N[E].id;if(p===N[E].fn&&_||!p&&_){N.splice(E,1);break}}else if(m)j["_on"+m]=[];else{var S=Object.keys(j);for(E=0;E<S.length;E++)S[E].indexOf("_on")===0&&Array.isArray(j[S[E]])&&(j[S[E]]=[])}return j},once:function(m,p,v){var j=this;return j.on(m,p,v,1),j},_emit:function(m,p,v){for(var j=this,N=j["_on"+m],E=N.length-1;E>=0;E--)(!N[E].id||N[E].id===p||m==="load")&&(setTimeout((function(_){_.call(this,p,v)}).bind(j,N[E].fn),0),N[E].once&&j.off(m,N[E].fn,N[E].id));return j._loadQueue(m),j},_loadQueue:function(m){var p=this;if(p._queue.length>0){var v=p._queue[0];v.event===m&&(p._queue.shift(),p._loadQueue()),m||v.action()}return p},_ended:function(m){var p=this,v=m._sprite;if(!p._webAudio&&m._node&&!m._node.paused&&!m._node.ended&&m._node.currentTime<m._stop)return setTimeout(p._ended.bind(p,m),100),p;var j=!!(m._loop||p._sprite[v][2]);if(p._emit("end",m._id),!p._webAudio&&j&&p.stop(m._id,!0).play(m._id),p._webAudio&&j){p._emit("play",m._id),m._seek=m._start||0,m._rateSeek=0,m._playStart=s.ctx.currentTime;var N=(m._stop-m._start)*1e3/Math.abs(m._rate);p._endTimers[m._id]=setTimeout(p._ended.bind(p,m),N)}return p._webAudio&&!j&&(m._paused=!0,m._ended=!0,m._seek=m._start||0,m._rateSeek=0,p._clearTimer(m._id),p._cleanBuffer(m._node),s._autoSuspend()),!p._webAudio&&!j&&p.stop(m._id,!0),p},_clearTimer:function(m){var p=this;if(p._endTimers[m]){if(typeof p._endTimers[m]!="function")clearTimeout(p._endTimers[m]);else{var v=p._soundById(m);v&&v._node&&v._node.removeEventListener("ended",p._endTimers[m],!1)}delete p._endTimers[m]}return p},_soundById:function(m){for(var p=this,v=0;v<p._sounds.length;v++)if(m===p._sounds[v]._id)return p._sounds[v];return null},_inactiveSound:function(){var m=this;m._drain();for(var p=0;p<m._sounds.length;p++)if(m._sounds[p]._ended)return m._sounds[p].reset();return new i(m)},_drain:function(){var m=this,p=m._pool,v=0,j=0;if(!(m._sounds.length<p)){for(j=0;j<m._sounds.length;j++)m._sounds[j]._ended&&v++;for(j=m._sounds.length-1;j>=0;j--){if(v<=p)return;m._sounds[j]._ended&&(m._webAudio&&m._sounds[j]._node&&m._sounds[j]._node.disconnect(0),m._sounds.splice(j,1),v--)}}},_getSoundIds:function(m){var p=this;if(typeof m>"u"){for(var v=[],j=0;j<p._sounds.length;j++)v.push(p._sounds[j]._id);return v}else return[m]},_refreshBuffer:function(m){var p=this;return m._node.bufferSource=s.ctx.createBufferSource(),m._node.bufferSource.buffer=a[p._src],m._panner?m._node.bufferSource.connect(m._panner):m._node.bufferSource.connect(m._node),m._node.bufferSource.loop=m._loop,m._loop&&(m._node.bufferSource.loopStart=m._start||0,m._node.bufferSource.loopEnd=m._stop||0),m._node.bufferSource.playbackRate.setValueAtTime(m._rate,s.ctx.currentTime),p},_cleanBuffer:function(m){var p=this,v=s._navigator&&s._navigator.vendor.indexOf("Apple")>=0;if(!m.bufferSource)return p;if(s._scratchBuffer&&m.bufferSource&&(m.bufferSource.onended=null,m.bufferSource.disconnect(0),v))try{m.bufferSource.buffer=s._scratchBuffer}catch{}return m.bufferSource=null,p},_clearSound:function(m){var p=/MSIE |Trident\//.test(s._navigator&&s._navigator.userAgent);p||(m.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(m){this._parent=m,this.init()};i.prototype={init:function(){var m=this,p=m._parent;return m._muted=p._muted,m._loop=p._loop,m._volume=p._volume,m._rate=p._rate,m._seek=0,m._paused=!0,m._ended=!0,m._sprite="__default",m._id=++s._counter,p._sounds.push(m),m.create(),m},create:function(){var m=this,p=m._parent,v=s._muted||m._muted||m._parent._muted?0:m._volume;return p._webAudio?(m._node=typeof s.ctx.createGain>"u"?s.ctx.createGainNode():s.ctx.createGain(),m._node.gain.setValueAtTime(v,s.ctx.currentTime),m._node.paused=!0,m._node.connect(s.masterGain)):s.noAudio||(m._node=s._obtainHtml5Audio(),m._errorFn=m._errorListener.bind(m),m._node.addEventListener("error",m._errorFn,!1),m._loadFn=m._loadListener.bind(m),m._node.addEventListener(s._canPlayEvent,m._loadFn,!1),m._endFn=m._endListener.bind(m),m._node.addEventListener("ended",m._endFn,!1),m._node.src=p._src,m._node.preload=p._preload===!0?"auto":p._preload,m._node.volume=v*s.volume(),m._node.load()),m},reset:function(){var m=this,p=m._parent;return m._muted=p._muted,m._loop=p._loop,m._volume=p._volume,m._rate=p._rate,m._seek=0,m._rateSeek=0,m._paused=!0,m._ended=!0,m._sprite="__default",m._id=++s._counter,m},_errorListener:function(){var m=this;m._parent._emit("loaderror",m._id,m._node.error?m._node.error.code:0),m._node.removeEventListener("error",m._errorFn,!1)},_loadListener:function(){var m=this,p=m._parent;p._duration=Math.ceil(m._node.duration*10)/10,Object.keys(p._sprite).length===0&&(p._sprite={__default:[0,p._duration*1e3]}),p._state!=="loaded"&&(p._state="loaded",p._emit("load"),p._loadQueue()),m._node.removeEventListener(s._canPlayEvent,m._loadFn,!1)},_endListener:function(){var m=this,p=m._parent;p._duration===1/0&&(p._duration=Math.ceil(m._node.duration*10)/10,p._sprite.__default[1]===1/0&&(p._sprite.__default[1]=p._duration*1e3),p._ended(m)),m._node.removeEventListener("ended",m._endFn,!1)}};var a={},o=function(m){var p=m._src;if(a[p]){m._duration=a[p].duration,h(m);return}if(/^data:[^;]+;base64,/.test(p)){for(var v=atob(p.split(",")[1]),j=new Uint8Array(v.length),N=0;N<v.length;++N)j[N]=v.charCodeAt(N);d(j.buffer,m)}else{var E=new XMLHttpRequest;E.open(m._xhr.method,p,!0),E.withCredentials=m._xhr.withCredentials,E.responseType="arraybuffer",m._xhr.headers&&Object.keys(m._xhr.headers).forEach(function(_){E.setRequestHeader(_,m._xhr.headers[_])}),E.onload=function(){var _=(E.status+"")[0];if(_!=="0"&&_!=="2"&&_!=="3"){m._emit("loaderror",null,"Failed loading audio file with status: "+E.status+".");return}d(E.response,m)},E.onerror=function(){m._webAudio&&(m._html5=!0,m._webAudio=!1,m._sounds=[],delete a[p],m.load())},c(E)}},c=function(m){try{m.send()}catch{m.onerror()}},d=function(m,p){var v=function(){p._emit("loaderror",null,"Decoding audio data failed.")},j=function(N){N&&p._sounds.length>0?(a[p._src]=N,h(p,N)):v()};typeof Promise<"u"&&s.ctx.decodeAudioData.length===1?s.ctx.decodeAudioData(m).then(j).catch(v):s.ctx.decodeAudioData(m,j,v)},h=function(m,p){p&&!m._duration&&(m._duration=p.duration),Object.keys(m._sprite).length===0&&(m._sprite={__default:[0,m._duration*1e3]}),m._state!=="loaded"&&(m._state="loaded",m._emit("load"),m._loadQueue())},g=function(){if(s.usingWebAudio){try{typeof AudioContext<"u"?s.ctx=new AudioContext:typeof webkitAudioContext<"u"?s.ctx=new webkitAudioContext:s.usingWebAudio=!1}catch{s.usingWebAudio=!1}s.ctx||(s.usingWebAudio=!1);var m=/iP(hone|od|ad)/.test(s._navigator&&s._navigator.platform),p=s._navigator&&s._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),v=p?parseInt(p[1],10):null;if(m&&v&&v<9){var j=/safari/.test(s._navigator&&s._navigator.userAgent.toLowerCase());s._navigator&&!j&&(s.usingWebAudio=!1)}s.usingWebAudio&&(s.masterGain=typeof s.ctx.createGain>"u"?s.ctx.createGainNode():s.ctx.createGain(),s.masterGain.gain.setValueAtTime(s._muted?0:s._volume,s.ctx.currentTime),s.masterGain.connect(s.ctx.destination)),s._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:s,Howl:r}}),typeof t<"u"&&(t.Howler=s,t.Howl=r),typeof global<"u"?(global.HowlerGlobal=e,global.Howler=s,global.Howl=r,global.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=s,window.Howl=r,window.Sound=i)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(s){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var i=r._howls.length-1;i>=0;i--)r._howls[i].stereo(s);return r},HowlerGlobal.prototype.pos=function(s,r,i){var a=this;if(!a.ctx||!a.ctx.listener)return a;if(r=typeof r!="number"?a._pos[1]:r,i=typeof i!="number"?a._pos[2]:i,typeof s=="number")a._pos=[s,r,i],typeof a.ctx.listener.positionX<"u"?(a.ctx.listener.positionX.setTargetAtTime(a._pos[0],Howler.ctx.currentTime,.1),a.ctx.listener.positionY.setTargetAtTime(a._pos[1],Howler.ctx.currentTime,.1),a.ctx.listener.positionZ.setTargetAtTime(a._pos[2],Howler.ctx.currentTime,.1)):a.ctx.listener.setPosition(a._pos[0],a._pos[1],a._pos[2]);else return a._pos;return a},HowlerGlobal.prototype.orientation=function(s,r,i,a,o,c){var d=this;if(!d.ctx||!d.ctx.listener)return d;var h=d._orientation;if(r=typeof r!="number"?h[1]:r,i=typeof i!="number"?h[2]:i,a=typeof a!="number"?h[3]:a,o=typeof o!="number"?h[4]:o,c=typeof c!="number"?h[5]:c,typeof s=="number")d._orientation=[s,r,i,a,o,c],typeof d.ctx.listener.forwardX<"u"?(d.ctx.listener.forwardX.setTargetAtTime(s,Howler.ctx.currentTime,.1),d.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),d.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),d.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1),d.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),d.ctx.listener.upZ.setTargetAtTime(c,Howler.ctx.currentTime,.1)):d.ctx.listener.setOrientation(s,r,i,a,o,c);else return h;return d},Howl.prototype.init=function(s){return function(r){var i=this;return i._orientation=r.orientation||[1,0,0],i._stereo=r.stereo||null,i._pos=r.pos||null,i._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},i._onstereo=r.onstereo?[{fn:r.onstereo}]:[],i._onpos=r.onpos?[{fn:r.onpos}]:[],i._onorientation=r.onorientation?[{fn:r.onorientation}]:[],s.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(s,r){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(s,r)}}),i;var a=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof s=="number")i._stereo=s,i._pos=[s,0,0];else return i._stereo;for(var o=i._getSoundIds(r),c=0;c<o.length;c++){var d=i._soundById(o[c]);if(d)if(typeof s=="number")d._stereo=s,d._pos=[s,0,0],d._node&&(d._pannerAttr.panningModel="equalpower",(!d._panner||!d._panner.pan)&&e(d,a),a==="spatial"?typeof d._panner.positionX<"u"?(d._panner.positionX.setValueAtTime(s,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):d._panner.setPosition(s,0,0):d._panner.pan.setValueAtTime(s,Howler.ctx.currentTime)),i._emit("stereo",d._id);else return d._stereo}return i},Howl.prototype.pos=function(s,r,i,a){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(s,r,i,a)}}),o;if(r=typeof r!="number"?0:r,i=typeof i!="number"?-.5:i,typeof a>"u")if(typeof s=="number")o._pos=[s,r,i];else return o._pos;for(var c=o._getSoundIds(a),d=0;d<c.length;d++){var h=o._soundById(c[d]);if(h)if(typeof s=="number")h._pos=[s,r,i],h._node&&((!h._panner||h._panner.pan)&&e(h,"spatial"),typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(s,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):h._panner.setPosition(s,r,i)),o._emit("pos",h._id);else return h._pos}return o},Howl.prototype.orientation=function(s,r,i,a){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(s,r,i,a)}}),o;if(r=typeof r!="number"?o._orientation[1]:r,i=typeof i!="number"?o._orientation[2]:i,typeof a>"u")if(typeof s=="number")o._orientation=[s,r,i];else return o._orientation;for(var c=o._getSoundIds(a),d=0;d<c.length;d++){var h=o._soundById(c[d]);if(h)if(typeof s=="number")h._orientation=[s,r,i],h._node&&(h._panner||(h._pos||(h._pos=o._pos||[0,0,-.5]),e(h,"spatial")),typeof h._panner.orientationX<"u"?(h._panner.orientationX.setValueAtTime(s,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):h._panner.setOrientation(s,r,i)),o._emit("orientation",h._id);else return h._orientation}return o},Howl.prototype.pannerAttr=function(){var s=this,r=arguments,i,a,o;if(!s._webAudio)return s;if(r.length===0)return s._pannerAttr;if(r.length===1)if(typeof r[0]=="object")i=r[0],typeof a>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),s._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:s._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:s._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:s._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:s._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:s._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:s._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:s._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:s._panningModel});else return o=s._soundById(parseInt(r[0],10)),o?o._pannerAttr:s._pannerAttr;else r.length===2&&(i=r[0],a=parseInt(r[1],10));for(var c=s._getSoundIds(a),d=0;d<c.length;d++)if(o=s._soundById(c[d]),o){var h=o._pannerAttr;h={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:h.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:h.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:h.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:h.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:h.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:h.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:h.panningModel};var g=o._panner;g||(o._pos||(o._pos=s._pos||[0,0,-.5]),e(o,"spatial"),g=o._panner),g.coneInnerAngle=h.coneInnerAngle,g.coneOuterAngle=h.coneOuterAngle,g.coneOuterGain=h.coneOuterGain,g.distanceModel=h.distanceModel,g.maxDistance=h.maxDistance,g.refDistance=h.refDistance,g.rolloffFactor=h.rolloffFactor,g.panningModel=h.panningModel}return s},Sound.prototype.init=function(s){return function(){var r=this,i=r._parent;r._orientation=i._orientation,r._stereo=i._stereo,r._pos=i._pos,r._pannerAttr=i._pannerAttr,s.call(this),r._stereo?i.stereo(r._stereo):r._pos&&i.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(s){return function(){var r=this,i=r._parent;return r._orientation=i._orientation,r._stereo=i._stereo,r._pos=i._pos,r._pannerAttr=i._pannerAttr,r._stereo?i.stereo(r._stereo):r._pos?i.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,i._refreshBuffer(r)),s.call(this)}}(Sound.prototype.reset);var e=function(s,r){r=r||"spatial",r==="spatial"?(s._panner=Howler.ctx.createPanner(),s._panner.coneInnerAngle=s._pannerAttr.coneInnerAngle,s._panner.coneOuterAngle=s._pannerAttr.coneOuterAngle,s._panner.coneOuterGain=s._pannerAttr.coneOuterGain,s._panner.distanceModel=s._pannerAttr.distanceModel,s._panner.maxDistance=s._pannerAttr.maxDistance,s._panner.refDistance=s._pannerAttr.refDistance,s._panner.rolloffFactor=s._pannerAttr.rolloffFactor,s._panner.panningModel=s._pannerAttr.panningModel,typeof s._panner.positionX<"u"?(s._panner.positionX.setValueAtTime(s._pos[0],Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(s._pos[1],Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(s._pos[2],Howler.ctx.currentTime)):s._panner.setPosition(s._pos[0],s._pos[1],s._pos[2]),typeof s._panner.orientationX<"u"?(s._panner.orientationX.setValueAtTime(s._orientation[0],Howler.ctx.currentTime),s._panner.orientationY.setValueAtTime(s._orientation[1],Howler.ctx.currentTime),s._panner.orientationZ.setValueAtTime(s._orientation[2],Howler.ctx.currentTime)):s._panner.setOrientation(s._orientation[0],s._orientation[1],s._orientation[2])):(s._panner=Howler.ctx.createStereoPanner(),s._panner.pan.setValueAtTime(s._stereo,Howler.ctx.currentTime)),s._panner.connect(s._node),s._paused||s._parent.pause(s._id,!0).play(s._id,!0)}}()}),gve=qS(pve()),nU=class Wu{constructor(e){this.resource=null,this.resource=e}static get defaultSound(){return Wu._defaultSound instanceof Wu||(Wu._defaultSound=new Wu(fve)),Wu._defaultSound}toJSONObject(){return this.resource!==null?{resource:this.resource}:{}}play(){this.audio==null&&this.resource!=null&&(this.audio=new gve.Howl({src:this.resource,html5:!0})),this.audio!=null&&this.audio.play()}};nU._defaultSound=null;var xve=nU,vve=class $N{constructor(e,s=fi.Feedback.defaultVibrationPattern){this.type=e,this.pattern=s;let r=Zs.getSupportedVibrationMethod();r&&(this._vibrate=r.bind(navigator))}static get defaultVibration(){return new $N("default")}static withPattern(e){return new $N("default",e)}toJSONObject(){return{type:this.type}}vibrate(){var e;return(e=this._vibrate)==null?void 0:e.call(this,this.pattern)}},yve=class sU{constructor(e,s){this._vibration=null,this._sound=null,this._vibration=e,this._sound=s}static get defaultFeedback(){return new sU(vve.defaultVibration,xve.defaultSound)}get vibration(){return this._vibration}get sound(){return this._sound}emit(){this.sound&&this.sound.play(),this.vibration&&this.vibration.vibrate()}toJSONObject(){let e={};return this.sound!==null&&(e.sound=this.sound.toJSONObject()),this.vibration!==null&&(e.vibration=this.vibration.toJSONObject()),e}},wve=class rU{constructor(e=fi.Brush.fillColor,s=fi.Brush.strokeColor,r=fi.Brush.strokeWidth){this.fill={color:e},this.stroke={color:s,width:r}}static get transparent(){let e=cn.fromRGBA(255,255,255,0);return new rU(e,e,0)}get fillColor(){return this.fill.color}get strokeColor(){return this.stroke.color}get strokeWidth(){return this.stroke.width}static areEquals(e,s){return e==null||s==null?!1:cn.areEquals(e.fill.color,s.fill.color)&&cn.areEquals(e.stroke.color,s.stroke.color)&&e.stroke.width===s.stroke.width}toJSONObject(){return{fill:{color:this.fillColor.toJSON()},stroke:{width:this.strokeWidth,color:this.strokeColor.toJSON()}}}},jve=[119,101,98,107,105,116,84,114,97,110,115,112,111,114,116,68,117,112,108,101,120,67,104,97,110,110,101,108],bve=[53,65,41,124,75,47,108,120,50,48,115,62,66,60,107,57],Nve=[111,74,88,52,51,101,51,112,66,79,38,88,40,65,36,94],ZS=String.fromCodePoint,iU=ZS.apply(String,jve);ZS.apply(String,bve);ZS.apply(String,Nve);function Cve(){return globalThis.location.hostname==="localhost"||globalThis.location.hostname==="127.0.0.1"||globalThis.location.hostname===""}function aU(t){let e=t;if(e!=null&&typeof e.getAppInfo=="function"&&typeof e.getKey=="function")return e}function Sve(){let{name:t=""}=Zs.getUserAgentInfo().getBrowser();return t==="Electron"&&typeof aU(window[iU])=="object"&&Cve()}async function Ave(){var t;return(t=aU(window[iU]))==null?void 0:t.getAppInfo()}var Eve=class{constructor(){this.subscribers=new Set}subscribe(e){this.subscribers.add(e)}unsubscribe(e){this.subscribers.has(e)&&this.subscribers.delete(e)}notify(e){for(let s of this.subscribers)s(e)}},_ve=new Eve,Ive=_ve,x0={configurePhase:"unconfigured",configurePromise:void 0,userLicenseKey:void 0,mainDataCaptureLoader:void 0,dataCaptureLoaders:void 0,loadingStatus:Ive,libraryLocation:void 0},Tve=class{constructor(e=x0,s=Fe,r=globalThis.fetch.bind(globalThis)){this.sdk=e,this.logger=s,this.fetch=r}get workerCommand(){var e;return(e=this.sdk.mainDataCaptureLoader)==null?void 0:e.workerCommand.bind(this.sdk.mainDataCaptureLoader)}async getLicenseText(){var e,s;if(this.sdk.configurePhase!=="done")return this.logger.warn('You must call "configure" before retrieving open source license text info.'),"";let r=new URL(`${((e=this.sdk.libraryLocation)!=null?e:"").replace(/\/$/,"")}/license/web-core-license.txt`),[i,a]=await Promise.all([(s=this.workerCommand)==null?void 0:s.call(this,"getOpenSourceSoftwareLicenseInfo",{}),this.fetchWebLicenseText(r.toString())]);return[i==null?void 0:i.licenseText,a].filter(o=>o!=null).join(`
`)}async fetchWebLicenseText(e){return this.fetch(e,{mode:"cors",credentials:"include",headers:{"Content-Type":"text/plain"}}).then(async s=>{if(!s.ok)throw new Error(`${s.status} ${s.statusText}`);return s.text()}).catch(s=>(this.logger.warn(`Failed to fetch license from ${e}: ${s.toString()}`),null))}},Mve=class{constructor(t){this._licenseText=t}get licenseText(){return this._licenseText}},Dve=class{constructor(){}setProperty(e,s){this[e]=s}getProperty(e){return this[e]}toJSONObject(){return Object.keys(this).reduce((e,s)=>(e[s]=this.getProperty(s),e),{})}},jT,bT,NT,UN=class zf{constructor(e,s){this.framework="web",this.runtimeEnvironment={deviceOS:(jT=Zs.getUserAgentInfo().getOS().name)!=null?jT:"",browser:(bT=Zs.getUserAgentInfo().getBrowser().name)!=null?bT:"",browserVersion:(NT=Zs.getUserAgentInfo().getBrowser().version)!=null?NT:"",get deviceModelName(){let{model:h,vendor:g}=Zs.getUserAgentInfo().getDevice();return(g==null||g==="")&&(g="Unknown"),(h==null||h==="")&&(h="Unknown"),[g,h].join(" ")}},this.settings=new Dve,this._frameSource=null,this._view=null,this.modes=new Set,this.components=[],this.listeners=[],this.updateListeners=new Set,this.cameraPropertiesReportListener=this.reportCameraProperties.bind(this),this.cameraAccessErrorListener=this.onCameraAccessError.bind(this),this.onWorkerMessageListener=this.onWorkerMessage.bind(this),this.onVisibilityChangeListener=this.onVisibilityChange.bind(this),this._frameHandlers=[],this._useSynchronousFrameFlow=!1;var r,i,a,o,c,d;this.licenseKey=e,this.deviceName=(r=s.deviceName)!=null?r:"",this.dataCaptureInstance=(i=s.dataCaptureInstance)!=null?i:x0.mainDataCaptureLoader,this.delayedRegistration=(a=s.delayedRegistration)!=null?a:!1,this.highEndBlurryRecognition=(d=(c=(o=s.dataCaptureInstance)==null?void 0:o.highEndBlurryRecognition)!=null?c:x0.mainDataCaptureLoader.highEndBlurryRecognition)!=null?d:!1}get frameSource(){return this._frameSource}get workerCommand(){return this.dataCaptureInstance.workerCommand.bind(this.dataCaptureInstance)}static async create(){return zf.createWithOptions({})}static async createWithOptions(e){var s;let r=new zf((s=e.licenseKey)!=null?s:x0.userLicenseKey,{deviceName:e.deviceName});return e.settings!=null&&await r.applySettings(e.settings),await r.initialize(),r}static async getOpenSourceSoftwareLicenseInfo(){let e=[];for(let r of zf.moduleLicenseTextProviders){let i=await r.getLicenseText();e.push(i)}let s=e.join(`

`);return new Mve(s)}async setFrameSource(e){let s=e!==this._frameSource;if(this._frameSource!==null&&(this._frameSource.context=null),this._frameSource=e??null,e&&(e.context=this,await this.workerCommand("setFrameSource",{mirrorAxis:this.getMirrorAxisForFrameSource(e),isCameraFrameSource:mm(e)})),await this.update([{type:"frameSourceState",newValue:this.frameSource}]),s)for(let r of this.listeners)r.didChangeFrameSource&&r.didChangeFrameSource(this,this._frameSource)}addListener(e){this.listeners.includes(e)||this.listeners.push(e)}async flushAnalytics(){await this.workerCommand("flushAnalytics",{})}removeListener(e){this.listeners.includes(e)&&this.listeners.splice(this.listeners.indexOf(e),1)}async addMode(e){this.modes.add(e),await e.attachedToContext(this),this.updateCameraFrameFlow(),await this.update()}async removeMode(e){this.modes.delete(e),await e.detachedFromContext(),this.updateCameraFrameFlow(),await this.update()}async removeAllModes(){for(let e of this.modes)await this.removeMode(e)}async dispose(){ir.instance().removeListener("cameraProperties",this.cameraPropertiesReportListener),ir.instance().removeListener("cameraAccessError",this.cameraAccessErrorListener),this.unsubscribeToVisibilityChange(this.onVisibilityChangeListener),await this.workerCommand("dispose",{})}async applySettings(e){this.settings=e,await this.update()}toJSONObject(){var e,s;return{licenseKey:this.licenseKey,framework:this.framework,deviceName:this.deviceName,...this.runtimeEnvironment,modes:[...this.modes].filter(r=>!r.skipSerialization).map(r=>r.toJSONObject()),components:this.components.map(r=>r.toJSONObject()),frameSource:this.frameSource?this.frameSource.toJSONObject():null,settings:this.settings.toJSONObject(),view:(s=(e=this._view)==null?void 0:e.toJSONObject())!=null?s:null}}getView(){return this._view}async setView(e){return this._view=e,this.update([{type:"viewSet",newValue:e}])}async getAppName(){let e=null;if(Sve()){let s=await Ave();if((s==null?void 0:s.appName)==null||s.appName==="")throw new Error("Cannot retrieve electron appName. Did you set it up in package.json? https://www.electronjs.org/docs/latest/api/app#appgetname");e=s.appName}return e}urlToHostname(e){try{return new URL(e??"").hostname}catch{return""}}getParentDomain(){var e;let s="";return parent!==window&&(s||(s=this.urlToHostname((e=location.ancestorOrigins)==null?void 0:e[0])),s||(s=this.urlToHostname(document.referrer)),s||(s="")),s.startsWith("[")&&s.at(-1)==="]"&&(s=s.slice(1,-1)),s}async initialize(e=!0){await this.workerCommand("createContext",{context:this.toJSONObject(),deviceId:zf.deviceID,delayedRegistration:this.delayedRegistration,highEndBlurryRecognition:this.highEndBlurryRecognition,appName:await this.getAppName(),parentDomain:this.getParentDomain()}),this.subscribeToWorkerMessages(this.onWorkerMessageListener),e&&(this.subscribeToCameraManagerEvents(),this.subscribeToVisibilityChange(this.onVisibilityChangeListener))}subscribeToVisibilityChange(e){document.addEventListener("visibilitychange",e)}unsubscribeToVisibilityChange(e){document.removeEventListener("visibilitychange",e)}async requestFrameData(e){return this.workerCommand("requestFrameData",{frameId:e})}performanceMark(e){qxe(globalThis.performance)&&typeof globalThis.performance.mark=="function"&&performance.mark(e)}async sendFrameToProcessor(e){let s=e instanceof ImageData?{data:e.data,width:e.width,height:e.height}:e;return await this.sendFrameToHandlers(s)?(this.performanceMark("processFrameBeforeSDC"),this.sendFrameToSDC(s)):e}async sendFrameToHandlers(e){for(let s of this._frameHandlers)if(await s(e)==="skip")return!1;return!0}async sendFrameToSDC(e){return this.workerCommand("processFrame",e,[e.data.buffer])}registerFrameHandler(e){this._frameHandlers.includes(e)||this._frameHandlers.push(e)}unregisterFrameHandler(e){this._frameHandlers.includes(e)&&this._frameHandlers.splice(this._frameHandlers.indexOf(e),1)}onVisibilityChange(){this.workerCommand("documentVisibility",{state:document.visibilityState})}onWorkerMessage(e){if(e.type==="contextDidChangeStatus"){e.payload.isValid||Fe.log(Fe.Level.Error,e.payload);for(let s of this.listeners)s.didChangeStatus&&s.didChangeStatus(this,VN.fromJSON(e.payload))}if(e.type==="didStartObservingContext")for(let s of this.listeners)s.didStartObservingContext&&s.didStartObservingContext(this);e.type==="onFrameProcessingFinished"&&this.performanceMark("processFrameAfterSDC")}subscribeToCameraManagerEvents(){ir.instance().addListener("cameraProperties",this.cameraPropertiesReportListener),ir.instance().addListener("cameraAccessError",this.cameraAccessErrorListener)}async reportCameraProperties(e){return this.workerCommand("reportCameraProperties",e)}onCameraAccessError(e){for(let s of this.listeners)s.didChangeStatus&&s.didChangeStatus(this,VN.fromJSON({code:33794,isValid:!0,message:e.toString()}))}async update(e=[]){var s,r;await this.updateContext();for(let i of e){switch(i.type){case"frameSourceState":{await((s=this._view)==null?void 0:s.onFrameSourceChange(this.frameSource));break}case"singleImageModeUploaderSettings":{(r=this._view)==null||r.onSingleImageUploaderSettingsChange(i.newValue);break}}for(let a of this.updateListeners)a(i)}}async updateContext(){await this.workerCommand("updateContext",{context:this.toJSONObject(),...this.getViewInfo()}).catch(e=>{Fe.log(Fe.Level.Warn,"Error while updating context:",e)})}getViewInfo(){return this._view!=null?{view:{width:this._view.width,height:this._view.height,visible:this._view.width>0&&this._view.height>0,orientation:this._view.orientation}}:{view:null}}getMirrorAxisForFrameSource(e){let s="None";return mm(e)&&e.getMirrorImageEnabled()&&(s="Y"),s}async addComponent(e){if(!this.components.includes(e))return this.components.push(e),e._context=this,this.update()}subscribeToWorkerMessages(e){this.dataCaptureInstance.addWorkerListener(e)}unsubscribeToWorkerMessages(e){this.dataCaptureInstance.removeWorkerListener(e)}hasEnabledMode(){return[...this.modes].some(e=>e.isEnabled())}updateCameraFrameFlow(){let e=[...this.modes].some(s=>s._synchronousFrameFlow===!0);ir.instance().setFrameHandling(e)}async isFeatureSupported(e){return(await this.workerCommand("isFeatureSupported",{feature:e})).supported}};UN.deviceID=Zs.getDeviceId(),UN.moduleLicenseTextProviders=[new Tve];var wf=UN,kve=class oU{constructor(e,s,r,i){this.inListItemColor=e,this.notInListItemColor=s,this.hapticEnabled=i,this.soundEnabled=r}static fromJSON(e){return new oU(cn.fromJSON(e.inListItemColor),cn.fromJSON(e.notInListItemColor),e.soundEnabled,e.hapticEnabled)}toJSONObject(){return{inListItemColor:this.inListItemColor.toJSON(),notInListItemColor:this.notInListItemColor.toJSON(),soundEnabled:this.soundEnabled,hapticEnabled:this.hapticEnabled}}},CT=class lU{get isFixed(){return this.minimum===this.maximum||this.step<=0}get maximum(){return this._maximum}get minimum(){return this._minimum}get step(){return this._step}static fromJSON(e){let s=new lU;return s._minimum=e.minimum,s._maximum=e.maximum,s._step=e.step,s}toJSONObject(){return{maximum:this.maximum,minimum:this.minimum,step:this.step}}},cU=class Hu{constructor(e){if(e!=null)return Hu.all[Hu.all.findIndex(s=>s.identifier===e)]}static get all(){return this.defaults().SymbologyDescriptions}get activeSymbolCountRange(){return this._activeSymbolCountRange}get defaultSymbolCountRange(){return this._defaultSymbolCountRange}get identifier(){return this._identifier}get isAvailable(){return this._isAvailable}get isColorInvertible(){return this._isColorInvertible}get readableName(){return this._readableName}get supportedExtensions(){return[...this._supportedExtensions]}get symbology(){return this.identifier}static forIdentifier(e){return Hu.all.findIndex(s=>s.identifier===e)===-1?null:new Hu(e)}static fromJSON(e){let s=new Hu;return s._identifier=e.identifier,s._readableName=e.readableName,s._isAvailable=e.isAvailable,s._isColorInvertible=e.isColorInvertible,s._activeSymbolCountRange=CT.fromJSON(e.activeSymbolCountRange),s._defaultSymbolCountRange=CT.fromJSON(e.defaultSymbolCountRange),s._supportedExtensions=new Set(e.supportedExtensions),s}},Pve=class dU{get enabledExtensions(){return[...this.extensions]}get symbology(){return this._symbology}static fromJSON(e){let s=new dU;return s.extensions=new Set(e.extensions),s.isEnabled=e.enabled,s.isColorInvertedEnabled=e.colorInvertedEnabled,s.checksums=new Set(e.checksums),s.activeSymbolCounts=e.activeSymbolCounts,s}setExtensionEnabled(e,s){s?this.extensions.add(e):this.extensions.delete(e)}toJSONObject(){return{activeSymbolCounts:[...this.activeSymbolCounts],checksums:[...this.checksums],colorInvertedEnabled:this.isColorInvertedEnabled,enabled:this.isEnabled,extensions:[...this.extensions]}}},Rve=t=>({SymbologySettings:Object.keys(t.SymbologySettings).reduce((e,s)=>(e[s]=Pve.fromJSON(JSON.parse(t.SymbologySettings[s])),e),{}),SymbologyDescriptions:t.SymbologyDescriptions.map(e=>cU.fromJSON(JSON.parse(e))),CompositeTypeDescriptions:t.CompositeTypeDescriptions.map(e=>JSON.parse(e)),BarcodeCapture:{BarcodeCaptureOverlay:{defaultStyle:t.BarcodeCapture.BarcodeCaptureOverlay.defaultStyle,DefaultBrush:{fillColor:cn.fromJSON(t.BarcodeCapture.BarcodeCaptureOverlay.DefaultBrush.fillColor),strokeColor:cn.fromJSON(t.BarcodeCapture.BarcodeCaptureOverlay.DefaultBrush.strokeColor),strokeWidth:t.BarcodeCapture.BarcodeCaptureOverlay.DefaultBrush.strokeWidth},styles:Object.fromEntries(Object.keys(t.BarcodeCapture.BarcodeCaptureOverlay.styles).map(e=>[e,{DefaultBrush:{fillColor:cn.fromJSON(t.BarcodeCapture.BarcodeCaptureOverlay.styles[e].DefaultBrush.fillColor),strokeColor:cn.fromJSON(t.BarcodeCapture.BarcodeCaptureOverlay.styles[e].DefaultBrush.strokeColor),strokeWidth:t.BarcodeCapture.BarcodeCaptureOverlay.styles[e].DefaultBrush.strokeWidth}}]))},BarcodeCaptureSettings:{codeDuplicateFilter:t.BarcodeCapture.BarcodeCaptureSettings.codeDuplicateFilter},RecommendedCameraSettings:Qo.fromJSON(t.BarcodeCapture.RecommendedCameraSettings)},BarcodeBatch:{BarcodeBatchBasicOverlay:{defaultStyle:t.BarcodeBatch.BarcodeBatchBasicOverlay.defaultStyle,DefaultBrush:{fillColor:cn.fromJSON(t.BarcodeBatch.BarcodeBatchBasicOverlay.DefaultBrush.fillColor),strokeColor:cn.fromJSON(t.BarcodeBatch.BarcodeBatchBasicOverlay.DefaultBrush.strokeColor),strokeWidth:t.BarcodeBatch.BarcodeBatchBasicOverlay.DefaultBrush.strokeWidth},styles:Object.fromEntries(Object.keys(t.BarcodeBatch.BarcodeBatchBasicOverlay.styles).map(e=>[e,{DefaultBrush:{fillColor:cn.fromJSON(t.BarcodeBatch.BarcodeBatchBasicOverlay.styles[e].DefaultBrush.fillColor),strokeColor:cn.fromJSON(t.BarcodeBatch.BarcodeBatchBasicOverlay.styles[e].DefaultBrush.strokeColor),strokeWidth:t.BarcodeBatch.BarcodeBatchBasicOverlay.styles[e].DefaultBrush.strokeWidth}}]))},RecommendedCameraSettings:Qo.fromJSON(t.BarcodeBatch.RecommendedCameraSettings)},BarcodeFind:{CameraSettings:{hiddenProperties:{exposureTargetBias:t.BarcodeFind.CameraSettings.hiddenProperties.exposureTargetBias,grayScaleFrameReader:t.BarcodeFind.CameraSettings.hiddenProperties.grayScaleFrameReader},settings:Qo.fromJSON(t.BarcodeFind.CameraSettings.settings)},BarcodeFindViewSettings:{settings:kve.fromJSON(t.BarcodeFind.BarcodeFindViewSettings.settings)}},SparkScan:{SparkScanFeedback:{errorVibrationPattern:t.SparkScan.SparkScanFeedback.errorVibrationPattern},SparkScanSettings:{codeDuplicateFilter:t.SparkScan.SparkScanSettings.codeDuplicateFilter,locationSelection:{radius:t.SparkScan.SparkScanSettings.locationSelection.radius,unit:t.SparkScan.SparkScanSettings.locationSelection.unit},targetModeLocationSelection:{radius:t.SparkScan.SparkScanSettings.targetModeLocationSelection.radius,unit:t.SparkScan.SparkScanSettings.targetModeLocationSelection.unit},hiddenProperties:{zoom1x:{motion_scan_suppression_mode:t.SparkScan.SparkScanSettings.hiddenProperties.zoom1x.motion_scan_suppression_mode},zoom2x:{motion_scan_suppression_mode:t.SparkScan.SparkScanSettings.hiddenProperties.zoom2x.motion_scan_suppression_mode}}},SparkScanOverlay:{DefaultBrush:{fillColor:cn.fromJSON(t.SparkScan.SparkScanOverlay.DefaultBrush.fillColor),strokeColor:cn.fromJSON(t.SparkScan.SparkScanOverlay.DefaultBrush.strokeColor),strokeWidth:t.SparkScan.SparkScanOverlay.DefaultBrush.strokeWidth},defaultStyle:"frame"},CameraSettings:{hiddenProperties:{exposureTargetBias:t.SparkScan.CameraSettings.hiddenProperties.exposureTargetBias,grayScaleFrameReader:t.SparkScan.CameraSettings.hiddenProperties.grayScaleFrameReader,repeatedTriggerInterval:t.SparkScan.CameraSettings.hiddenProperties.repeatedTriggerInterval},settings:Qo.fromJSON(t.SparkScan.CameraSettings.settings)},SparkScanViewSettings:{triggerButtonCollapseTimeout:t.SparkScan.SparkScanViewSettings.triggerButtonCollapseTimeout,defaultHandMode:t.SparkScan.SparkScanViewSettings.defaultHandMode,defaultTorchState:t.SparkScan.SparkScanViewSettings.defaultTorchState,defaultMiniPreviewSize:t.SparkScan.SparkScanViewSettings.defaultMiniPreviewSize,defaultCameraPosition:t.SparkScan.SparkScanViewSettings.defaultCameraPosition,soundEnabled:t.SparkScan.SparkScanViewSettings.soundEnabled,hapticEnabled:t.SparkScan.SparkScanViewSettings.hapticEnabled,holdToScanEnabled:t.SparkScan.SparkScanViewSettings.holdToScanEnabled,visualFeedbackEnabled:t.SparkScan.SparkScanViewSettings.visualFeedbackEnabled,inactiveStateTimeout:t.SparkScan.SparkScanViewSettings.inactiveStateTimeout,zoomFactorOut:t.SparkScan.SparkScanViewSettings.zoomFactorOut,zoomFactorIn:t.SparkScan.SparkScanViewSettings.zoomFactorIn}},SparkCapture:{SparkCaptureSettings:{codeDuplicateFilter:t.SparkCapture.SparkCaptureSettings.codeDuplicateFilter}}}),Yo=Rve({BarcodeCapture:{BarcodeCaptureSettings:{codeDuplicateFilter:-2},BarcodeCaptureOverlay:{defaultStyle:"frame",DefaultBrush:{fillColor:"#00000000",strokeColor:"#FFFFFFFF",strokeWidth:3},styles:{frame:{DefaultBrush:{fillColor:"#00000000",strokeColor:"#FFFFFFFF",strokeWidth:3}}}},RecommendedCameraSettings:{zoomFactor:1,zoomGestureZoomFactor:2,focusGestureStrategy:"manualUntilCapture",preferredResolution:"auto"}},SymbologySettings:{ean13Upca:JSON.stringify({activeSymbolCounts:[12],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),ean8:JSON.stringify({activeSymbolCounts:[8],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),upce:JSON.stringify({activeSymbolCounts:[6],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),code128:JSON.stringify({activeSymbolCounts:[40,39,38,37,36,35,34,33,32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:["strip_leading_fnc1"]}),code39:JSON.stringify({activeSymbolCounts:[40,39,38,37,36,35,34,33,32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),code93:JSON.stringify({activeSymbolCounts:[40,39,38,37,36,35,34,33,32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),interleavedTwoOfFive:JSON.stringify({activeSymbolCounts:[40,38,36,34,32,30,28,26,24,22,20,18,16,14,12,10,8,6],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),qr:JSON.stringify({activeSymbolCounts:[],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),dataMatrix:JSON.stringify({activeSymbolCounts:[],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:["strip_leading_fnc1"]}),pdf417:JSON.stringify({activeSymbolCounts:[],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),msiPlessey:JSON.stringify({activeSymbolCounts:[32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),databar:JSON.stringify({activeSymbolCounts:[2],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),databarExpanded:JSON.stringify({activeSymbolCounts:[],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),codabar:JSON.stringify({activeSymbolCounts:[20,19,18,17,16,15,14,13,12,11,10,9,8,7],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),aztec:JSON.stringify({activeSymbolCounts:[],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),maxicode:JSON.stringify({activeSymbolCounts:[],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),code11:JSON.stringify({activeSymbolCounts:[20,19,18,17,16,15,14,13,12,11,10,9,8,7],checksums:["mod11"],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),databarLimited:JSON.stringify({activeSymbolCounts:[1],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),code25:JSON.stringify({activeSymbolCounts:[20,19,18,17,16,15,14,13,12,11,10,9,8,7],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),microPdf417:JSON.stringify({activeSymbolCounts:[],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),rm4scc:JSON.stringify({activeSymbolCounts:[24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),kix:JSON.stringify({activeSymbolCounts:[24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),dotcode:JSON.stringify({activeSymbolCounts:[],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),microQr:JSON.stringify({activeSymbolCounts:[],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),code32:JSON.stringify({activeSymbolCounts:[8],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),lapa4sc:JSON.stringify({activeSymbolCounts:[16],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),iata2of5:JSON.stringify({activeSymbolCounts:[20,19,18,17,16,15,14,13,12,11,10,9,8,7],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),matrix2of5:JSON.stringify({activeSymbolCounts:[20,19,18,17,16,15,14,13,12,11,10,9,8,7],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),uspsIntelligentMail:JSON.stringify({activeSymbolCounts:[65],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]})},BarcodeBatch:{BarcodeBatchBasicOverlay:{defaultStyle:"frame",DefaultBrush:{fillColor:"#00000000",strokeColor:"#FFFFFFFF",strokeWidth:3},styles:{frame:{DefaultBrush:{fillColor:"#00000000",strokeColor:"#FFFFFFFF",strokeWidth:3}},dot:{DefaultBrush:{fillColor:"#FFFFFFFF",strokeColor:"#FFFFFFFF",strokeWidth:1}},legacy:{DefaultBrush:{fillColor:"#00000000",strokeColor:"#FFFFFFFF",strokeWidth:1}}}},RecommendedCameraSettings:{zoomFactor:1,zoomGestureZoomFactor:2,focusGestureStrategy:"manualUntilCapture",preferredResolution:"fullHd"}},BarcodeFind:{CameraSettings:{hiddenProperties:{exposureTargetBias:-1,grayScaleFrameReader:!0},settings:{zoomFactor:1,zoomGestureZoomFactor:1,focusGestureStrategy:"manualUntilCapture",preferredResolution:"fullHd"}},BarcodeFindViewSettings:{settings:{inListItemColor:cn.fromHex("#2EC1CE").toJSON(),notInListItemColor:cn.fromHex("#FFFFFF").toJSON(),hapticEnabled:!0,soundEnabled:!0}}},SparkScan:{SparkScanFeedback:{errorVibrationPattern:[600]},SparkScanSettings:{codeDuplicateFilter:-2,locationSelection:{radius:.5,unit:DN.Fraction},targetModeLocationSelection:{radius:.07,unit:DN.Fraction},hiddenProperties:{zoom1x:{motion_scan_suppression_mode:1},zoom2x:{motion_scan_suppression_mode:2}}},SparkScanOverlay:{DefaultBrush:{fillColor:"#00000000",strokeColor:"#FFFFFFFF",strokeWidth:3},defaultStyle:"frame"},CameraSettings:{hiddenProperties:{exposureTargetBias:-1,grayScaleFrameReader:!0,repeatedTriggerInterval:1},settings:{focus:{focusGestureStrategy:q$.None},preferredResolution:GS.FullHD,zoomFactor:1,zoomGestureZoomFactor:2}},SparkScanViewSettings:{defaultHandMode:"right",defaultTorchState:W$.Off,defaultMiniPreviewSize:"regular",defaultCameraPosition:H$.WorldFacing,hapticEnabled:!0,holdToScanEnabled:!0,soundEnabled:!0,triggerButtonCollapseTimeout:5e3,visualFeedbackEnabled:!0,inactiveStateTimeout:1e4,zoomFactorOut:1,zoomFactorIn:2}},CompositeTypeDescriptions:[JSON.stringify({symbologies:["ean8","ean13Upca","microPdf417","databarLimited","upce","databar","databarExpanded"],types:["A"]}),JSON.stringify({symbologies:["ean8","ean13Upca","microPdf417","databarLimited","upce","databar","databarExpanded"],types:["B"]}),JSON.stringify({symbologies:["code128","pdf417"],types:["C"]})],SparkCapture:{SparkCaptureSettings:{codeDuplicateFilter:1e3}},SymbologyDescriptions:[JSON.stringify({activeSymbolCountRange:{maximum:12,minimum:12,step:1},defaultSymbolCountRange:{maximum:12,minimum:12,step:1},identifier:"ean13Upca",isAvailable:!0,isColorInvertible:!0,readableName:"EAN-13/UPC-A",supportedChecksums:[],supportedExtensions:["two_digit_add_on","strict","remove_leading_upca_zero","relaxed_sharp_quiet_zone_check","five_digit_add_on"]}),JSON.stringify({activeSymbolCountRange:{maximum:8,minimum:8,step:1},defaultSymbolCountRange:{maximum:8,minimum:8,step:1},identifier:"ean8",isAvailable:!0,isColorInvertible:!0,readableName:"EAN-8",supportedChecksums:[],supportedExtensions:["two_digit_add_on","strict","relaxed_sharp_quiet_zone_check","five_digit_add_on"]}),JSON.stringify({activeSymbolCountRange:{maximum:6,minimum:6,step:1},defaultSymbolCountRange:{maximum:6,minimum:6,step:1},identifier:"upce",isAvailable:!0,isColorInvertible:!0,readableName:"UPC-E",supportedChecksums:[],supportedExtensions:["two_digit_add_on","strict","return_as_upca","remove_leading_upca_zero","five_digit_add_on"]}),JSON.stringify({activeSymbolCountRange:{maximum:50,minimum:4,step:1},defaultSymbolCountRange:{maximum:40,minimum:6,step:1},identifier:"code128",isAvailable:!0,isColorInvertible:!0,readableName:"Code 128",supportedChecksums:[],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:50,minimum:3,step:1},defaultSymbolCountRange:{maximum:40,minimum:6,step:1},identifier:"code39",isAvailable:!0,isColorInvertible:!0,readableName:"Code 39",supportedChecksums:["mod43"],supportedExtensions:["strict","relaxed_sharp_quiet_zone_check","full_ascii"]}),JSON.stringify({activeSymbolCountRange:{maximum:60,minimum:5,step:1},defaultSymbolCountRange:{maximum:40,minimum:6,step:1},identifier:"code93",isAvailable:!0,isColorInvertible:!1,readableName:"Code 93",supportedChecksums:[],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:50,minimum:4,step:2},defaultSymbolCountRange:{maximum:40,minimum:6,step:2},identifier:"interleavedTwoOfFive",isAvailable:!0,isColorInvertible:!1,readableName:"Interleaved Two of Five",supportedChecksums:[],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:0,minimum:0,step:0},defaultSymbolCountRange:{maximum:0,minimum:0,step:0},identifier:"qr",isAvailable:!0,isColorInvertible:!0,readableName:"QR Code",supportedChecksums:[],supportedExtensions:["guess_encoding"]}),JSON.stringify({activeSymbolCountRange:{maximum:0,minimum:0,step:0},defaultSymbolCountRange:{maximum:0,minimum:0,step:0},identifier:"dataMatrix",isAvailable:!0,isColorInvertible:!0,readableName:"Data Matrix",supportedChecksums:[],supportedExtensions:["direct_part_marking_mode"]}),JSON.stringify({activeSymbolCountRange:{maximum:0,minimum:0,step:0},defaultSymbolCountRange:{maximum:0,minimum:0,step:0},identifier:"pdf417",isAvailable:!0,isColorInvertible:!1,readableName:"PDF417",supportedChecksums:[],supportedExtensions:[]}),JSON.stringify({activeSymbolCountRange:{maximum:32,minimum:3,step:1},defaultSymbolCountRange:{maximum:32,minimum:6,step:1},identifier:"msiPlessey",isAvailable:!0,isColorInvertible:!1,readableName:"MSI Plessey",supportedChecksums:["mod11","mod1010","mod1110"],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:2,minimum:2,step:1},defaultSymbolCountRange:{maximum:2,minimum:2,step:1},identifier:"databar",isAvailable:!0,isColorInvertible:!1,readableName:"GS1 DataBar 14",supportedChecksums:[],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:0,minimum:0,step:0},defaultSymbolCountRange:{maximum:0,minimum:0,step:0},identifier:"databarExpanded",isAvailable:!0,isColorInvertible:!1,readableName:"GS1 DataBar Expanded",supportedChecksums:[],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:34,minimum:3,step:1},defaultSymbolCountRange:{maximum:20,minimum:7,step:1},identifier:"codabar",isAvailable:!0,isColorInvertible:!1,readableName:"Codabar",supportedChecksums:["mod11","mod16"],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:0,minimum:0,step:0},defaultSymbolCountRange:{maximum:0,minimum:0,step:0},identifier:"aztec",isAvailable:!0,isColorInvertible:!1,readableName:"Aztec",supportedChecksums:[],supportedExtensions:[]}),JSON.stringify({activeSymbolCountRange:{maximum:0,minimum:0,step:0},defaultSymbolCountRange:{maximum:0,minimum:0,step:0},identifier:"maxicode",isAvailable:!0,isColorInvertible:!1,readableName:"MaxiCode",supportedChecksums:[],supportedExtensions:[]}),JSON.stringify({activeSymbolCountRange:{maximum:34,minimum:5,step:1},defaultSymbolCountRange:{maximum:20,minimum:7,step:1},identifier:"code11",isAvailable:!0,isColorInvertible:!1,readableName:"Code 11",supportedChecksums:["mod11"],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:1,minimum:1,step:1},defaultSymbolCountRange:{maximum:1,minimum:1,step:1},identifier:"databarLimited",isAvailable:!0,isColorInvertible:!1,readableName:"GS1 DataBar Limited",supportedChecksums:[],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:32,minimum:3,step:1},defaultSymbolCountRange:{maximum:20,minimum:7,step:1},identifier:"code25",isAvailable:!0,isColorInvertible:!1,readableName:"Code 25",supportedChecksums:[],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:0,minimum:0,step:0},defaultSymbolCountRange:{maximum:0,minimum:0,step:0},identifier:"microPdf417",isAvailable:!0,isColorInvertible:!1,readableName:"MicroPDF417",supportedChecksums:[],supportedExtensions:[]}),JSON.stringify({activeSymbolCountRange:{maximum:50,minimum:4,step:1},defaultSymbolCountRange:{maximum:24,minimum:7,step:1},identifier:"rm4scc",isAvailable:!0,isColorInvertible:!1,readableName:"RM4SCC",supportedChecksums:[],supportedExtensions:[]}),JSON.stringify({activeSymbolCountRange:{maximum:50,minimum:4,step:1},defaultSymbolCountRange:{maximum:24,minimum:7,step:1},identifier:"kix",isAvailable:!0,isColorInvertible:!1,readableName:"KIX",supportedChecksums:[],supportedExtensions:[]}),JSON.stringify({activeSymbolCountRange:{maximum:0,minimum:0,step:0},defaultSymbolCountRange:{maximum:0,minimum:0,step:0},identifier:"dotcode",isAvailable:!0,isColorInvertible:!0,readableName:"DotCode",supportedChecksums:[],supportedExtensions:[]}),JSON.stringify({activeSymbolCountRange:{maximum:0,minimum:0,step:0},defaultSymbolCountRange:{maximum:0,minimum:0,step:0},identifier:"microQr",isAvailable:!0,isColorInvertible:!0,readableName:"Micro QR",supportedChecksums:[],supportedExtensions:[]}),JSON.stringify({activeSymbolCountRange:{maximum:8,minimum:8,step:1},defaultSymbolCountRange:{maximum:8,minimum:8,step:1},identifier:"code32",isAvailable:!0,isColorInvertible:!1,readableName:"Code 32",supportedChecksums:[],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:16,minimum:16,step:1},defaultSymbolCountRange:{maximum:16,minimum:16,step:1},identifier:"lapa4sc",isAvailable:!0,isColorInvertible:!1,readableName:"LAPA4SC",supportedChecksums:[],supportedExtensions:[]}),JSON.stringify({activeSymbolCountRange:{maximum:32,minimum:3,step:1},defaultSymbolCountRange:{maximum:20,minimum:7,step:1},identifier:"iata2of5",isAvailable:!0,isColorInvertible:!1,readableName:"IATA 2 of 5",supportedChecksums:["mod1010"],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:32,minimum:3,step:1},defaultSymbolCountRange:{maximum:20,minimum:7,step:1},identifier:"matrix2of5",isAvailable:!0,isColorInvertible:!1,readableName:"Matrix 2 of 5",supportedChecksums:[],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:65,minimum:65,step:1},defaultSymbolCountRange:{maximum:65,minimum:65,step:1},identifier:"uspsIntelligentMail",isAvailable:!0,isColorInvertible:!1,readableName:"USPS Intelligent Mail",supportedChecksums:[],supportedExtensions:[]})]});cU.defaults=()=>({SymbologyDescriptions:Yo.SymbologyDescriptions});var uU=class hU{get endIndex(){return this._endIndex}get ianaName(){return this._ianaName}get startIndex(){return this._startIndex}static fromJSON(e){let s=new hU;return s._ianaName=e.ianaName,s._startIndex=e.startIndex,s._endIndex=e.endIndex,s}toJSONObject(){return{endIndex:this.endIndex,ianaName:this.ianaName,startIndex:this.startIndex}}},Lve=class mU{get barcodeSetId(){return this._barcodeSetId}get completeData(){return this._completeData}get encodingRanges(){return this._encodingRanges}get isComplete(){return this._complete}get rawCompleteData(){return this._rawCompleteData}get scannedSegmentCount(){return this._scannedSegmentCount}get totalSegmentCount(){return this._totalSegmentCount}static fromJSON(e){if(e==null)return null;let s=new mU;return s._complete=e.complete,s._barcodeSetId=e.barcodeSetId,s._scannedSegmentCount=e.scannedSegmentCount,s._totalSegmentCount=e.totalSegmentCount,s._encodingRanges=e.completeDataEncodings.map(r=>uU.fromJSON(r)),s._completeData=e.completeDataUtf8String,s._rawCompleteData=e.completeDataRaw,s}toJSONObject(){return{complete:this._complete,barcodeSetId:this.barcodeSetId,scannedSegmentCount:this.scannedSegmentCount,totalSegmentCount:this.totalSegmentCount,completeDataEncodings:this._encodingRanges.map(e=>e.toJSONObject()),completeDataUtf8String:this.completeData,completeDataRaw:this.rawCompleteData}}},dr=(t=>(t.EAN13UPCA="ean13Upca",t.UPCE="upce",t.EAN8="ean8",t.Code39="code39",t.Code93="code93",t.Code128="code128",t.Code11="code11",t.Code25="code25",t.Codabar="codabar",t.InterleavedTwoOfFive="interleavedTwoOfFive",t.MSIPlessey="msiPlessey",t.QR="qr",t.DataMatrix="dataMatrix",t.Aztec="aztec",t.MaxiCode="maxicode",t.DotCode="dotcode",t.KIX="kix",t.RM4SCC="rm4scc",t.GS1Databar="databar",t.GS1DatabarExpanded="databarExpanded",t.GS1DatabarLimited="databarLimited",t.PDF417="pdf417",t.MicroPDF417="microPdf417",t.MicroQR="microQr",t.Code32="code32",t.Lapa4SC="lapa4sc",t.IATATwoOfFive="iata2of5",t.MatrixTwoOfFive="matrix2of5",t.USPSIntelligentMail="uspsIntelligentMail",t))(dr||{}),Ove=(t=>(t.A="A",t.B="B",t.C="C",t))(Ove||{}),Fve=(t=>(t.Mod10="mod10",t.Mod11="mod11",t.Mod16="mod16",t.Mod43="mod43",t.Mod47="mod47",t.Mod103="mod103",t.Mod10AndMod11="mod1110",t.Mod10AndMod10="mod1010",t))(Fve||{}),Bve=(t=>(t.None="none",t.Unknown="unknown",t.Linked="linked",t.GS1TypeA="gs1TypeA",t.GS1TypeB="gs1TypeB",t.GS1TypeC="gs1TypeC",t))(Bve||{}),zve=class fU{get isStructuredAppend(){return this._structuredAppendData!=null}get structuredAppendData(){return this._structuredAppendData}get addOnData(){return this._addOnData}get compositeData(){return this._compositeData}get compositeFlag(){return this._compositeFlag}get compositeRawData(){return this._compositeRawData}get data(){return this._data}get encodingRanges(){return this._encodingRanges}get frameID(){return this._frameID}get isColorInverted(){return this._isColorInverted}get isGS1DataCarrier(){return this._isGS1DataCarrier}get location(){return this._location}get rawData(){return this._rawData}get symbolCount(){return this._symbolCount}get symbology(){return this._symbology}static fromJSON(e){var s;let r=new fU;return r._symbology=e.symbology,r._data=e.data,r._rawData=e.rawData,r._compositeData=e.compositeData,r._compositeRawData=e.compositeRawData,r._addOnData=(s=e.addOnData)!=null?s:null,r._isGS1DataCarrier=e.isGS1DataCarrier,r._compositeFlag=e.compositeFlag,r._isColorInverted=e.isColorInverted,r._symbolCount=e.symbolCount,r._frameID=e.frameId,r._encodingRanges=e.encodingRanges.map(i=>uU.fromJSON(i)),r._location=e1.fromJSON(e.location),r._structuredAppendData=Lve.fromJSON(e.structuredAppendData),r}toJSONObject(){var e,s,r;return{symbology:this.symbology.toString(),data:this.data,rawData:this.rawData,compositeData:this.compositeData,compositeRawData:this.compositeRawData,addOnData:(e=this.addOnData)!=null?e:null,isGS1DataCarrier:this.isGS1DataCarrier,compositeFlag:this.compositeFlag.toString(),isColorInverted:this.isColorInverted,symbolCount:this.symbolCount,frameId:this.frameID,encodingRanges:this.encodingRanges.map(i=>i.toJSONObject()),location:this.location.toJSONObject(),structuredAppendData:(r=(s=this.structuredAppendData)==null?void 0:s.toJSONObject())!=null?r:null}}},Vve=(t=>(t.Frame="frame",t))(Vve||{}),$ve=class v0{constructor(){this.type="barcodeCapture",this._shouldShowScanAreaGuides=!1,this._shouldRemoveLocationsAfterScan=!0,this._style=Yo.BarcodeCapture.BarcodeCaptureOverlay.defaultStyle,this._viewfinder=null}get style(){return this._style}static async withBarcodeCapture(e){return v0.withBarcodeCaptureForView(e,null)}static async withBarcodeCaptureForView(e,s){return v0.withBarcodeCaptureForViewWithStyle(e,s,Yo.BarcodeCapture.BarcodeCaptureOverlay.defaultStyle)}static async withBarcodeCaptureForViewWithStyle(e,s,r){let i=new v0;return i.barcodeCapture=e,i._style=r,await i.setBrush(new wve(Yo.BarcodeCapture.BarcodeCaptureOverlay.styles[i.style].DefaultBrush.fillColor,Yo.BarcodeCapture.BarcodeCaptureOverlay.styles[i.style].DefaultBrush.strokeColor,Yo.BarcodeCapture.BarcodeCaptureOverlay.styles[i.style].DefaultBrush.strokeWidth)),s&&await s.addOverlay(i),i}getBrush(){return this._brush}getViewfinder(){return this._viewfinder}async setBrush(e){this._brush=e,await this.barcodeCapture.notifyContext()}async setShouldShowScanAreaGuides(e){this._shouldShowScanAreaGuides=e,await this.barcodeCapture.notifyContext()}async setShouldRemoveLocationsAfterScan(e){this._shouldRemoveLocationsAfterScan=e,await this.barcodeCapture.notifyContext()}async setViewfinder(e){this._viewfinder=e,await this.barcodeCapture.notifyContext()}shouldShowScanAreaGuides(){return this._shouldShowScanAreaGuides}shouldRemoveLocationsAfterScan(){return this._shouldRemoveLocationsAfterScan}toJSONObject(){var e,s;return{type:this.type,brush:this._brush.toJSONObject(),drawLocalizedOnlyBarcodes:!1,shouldShowScanAreaGuides:this._shouldShowScanAreaGuides,shouldRemoveLocationsAfterScan:this._shouldRemoveLocationsAfterScan,viewfinder:(s=(e=this._viewfinder)==null?void 0:e.toJSONObject())!=null?s:u0e.toJSONObject(),style:this.style}}},Uve=class{constructor(){this.codeDuplicateFilter=Yo.BarcodeCapture.BarcodeCaptureSettings.codeDuplicateFilter,this.locationSelection=null,this.enabledCompositeTypes=[],this.scanIntention="manual",this.properties={},this.symbologies={}}get enabledSymbologies(){return Object.keys(this.symbologies).filter(e=>{var s;return(s=this.symbologies[e])==null?void 0:s.isEnabled})}get compositeTypeDescriptions(){return Yo.CompositeTypeDescriptions.reduce((e,s)=>(e[s.types[0]]=s,e),{})}settingsForSymbology(e){if(!this.symbologies[e]){let s=Yo.SymbologySettings[e];s._symbology=e,this.symbologies[e]=s}return this.symbologies[e]}setProperty(e,s){this.properties[e]=s}getProperty(e){return this.properties[e]}enableSymbologies(e){for(let s of e)this.enableSymbology(s,!0)}enableSymbology(e,s){this.settingsForSymbology(e).isEnabled=s}enableSymbologiesForCompositeTypes(e){for(let s of e)this.enableSymbologies(this.compositeTypeDescriptions[s].symbologies)}toJSONObject(){var e,s,r;let i={};return{codeDuplicateFilter:this.codeDuplicateFilter,enabledCompositeTypes:[...this.enabledCompositeTypes],locationSelection:(s=(e=this.locationSelection)==null?void 0:e.toJSONObject())!=null?s:f0e,properties:{...this.properties},symbologies:Object.keys(this.symbologies).reduce((a,o)=>{var c;let d=(c=this.symbologies[o])==null?void 0:c.toJSONObject();return d&&(a[o]=d),a},i),scanIntention:(r=this.scanIntention)!=null?r:null}}},Wve=class pU{get frameID(){return this._frameID}get location(){return this._location}static fromJSON(e){let s=new pU;return s._location=e1.fromJSON(e.location),s._frameID=e.frameId,s}toJSONObject(){return{frameId:this.frameID,location:this.location.toJSONObject()}}},ST=class gU{get newlyRecognizedBarcode(){return this._newlyRecognizedBarcode}get newlyLocalizedBarcodes(){return this._newlyLocalizedBarcodes}get frameSequenceID(){return this._frameSequenceID}static fromJSON(e){let s=new gU;return e.newlyRecognizedBarcode&&(s._newlyRecognizedBarcode=zve.fromJSON(e.newlyRecognizedBarcode)),s._newlyLocalizedBarcodes=e.newlyLocalizedBarcodes.map(r=>Wve.fromJSON(r)),s._frameSequenceID=e.frameSequenceId,s}toJSON(){var e,s;return JSON.stringify({newlyLocalizedBarcodes:this.newlyLocalizedBarcodes.map(r=>r.toJSONObject()),newlyRecognizedBarcode:(s=(e=this.newlyRecognizedBarcode)==null?void 0:e.toJSONObject())!=null?s:null,frameSequenceId:this.frameSequenceID})}},Hve=class xU{constructor(){this.success=yve.defaultFeedback}static get default(){return new xU}toJSONObject(){return{success:this.success.toJSONObject()}}},qve=class vU{constructor(){this.type="barcodeCapture",this._isEnabled=!0,this._feedback=Hve.default,this._context=null,this.listeners=new Set,this.allowedRemainingWorkerMessages=new Set,this.workerMessageListener=this.onWorkerMessage.bind(this)}static get recommendedCameraSettings(){return new Qo(Yo.BarcodeCapture.RecommendedCameraSettings)}get context(){return this._context}get feedback(){return this._feedback}static async forContext(e,s){let r=new vU;return r.settings=s,e&&await e.addMode(r),r}async setFeedback(e){return this._feedback=e,this.notifyContext()}isEnabled(){return this._isEnabled}async setEnabled(e){this._isEnabled=e,await this.notifyContext()}async applySettings(e){return this.settings=e,this.notifyContext()}addListener(e){this.listeners.has(e)||this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}toJSONObject(){return{type:this.type,enabled:this._isEnabled,feedback:this.feedback.toJSONObject(),settings:this.settings.toJSONObject()}}attachedToContext(e){this._context=e,this._context.subscribeToWorkerMessages(this.workerMessageListener)}async detachedFromContext(){var e;(e=this._context)==null||e.unsubscribeToWorkerMessages(this.workerMessageListener),this._context=null}sendClearFrameDataRequest(e){setTimeout(()=>{var s;(s=this.context)==null||s.workerCommand("deleteFrameData",{frameId:e})},0)}async onDidScan(e){if(this.context==null)return;let s=ST.fromJSON(e.payload.session),{frameData:r}=e.payload;if(!this._isEnabled){this.sendClearFrameDataRequest(r.frameId),this.allowedRemainingWorkerMessages.clear();return}this.allowedRemainingWorkerMessages.add("successFeedback");let i=[];for(let a of this.listeners)if(a.didScan)try{let o=a.didScan(this,s,m0e(r,this.context));o instanceof Promise&&await o}catch(o){i.push(o)}this.sendClearFrameDataRequest(r.frameId),this.allowedRemainingWorkerMessages.add("barcodeCaptureDidUpdateSession");for(let a of i)Fe.log(Fe.Level.Error,a)}onDidUpdateSession(e){let s=ST.fromJSON(e.payload);if(!(!this._isEnabled&&!this.allowedRemainingWorkerMessages.has(e.type))){this.allowedRemainingWorkerMessages.delete(e.type);for(let r of this.listeners)r.didUpdateSession&&r.didUpdateSession(this,s)}}onSuccessFeedback(e){!this._isEnabled&&!this.allowedRemainingWorkerMessages.has(e.type)||(this.allowedRemainingWorkerMessages.delete(e.type),this.feedback.success.emit())}async onWorkerMessage(e){switch(e.type){case"barcodeCaptureDidScan":{this.onDidScan(e);break}case"barcodeCaptureDidUpdateSession":{this.onDidUpdateSession(e);break}case"successFeedback":{this.onSuccessFeedback(e);break}}}async notifyContext(){this.context!=null&&await this.context.update()}};function Gve({onScan:t,onError:e,onClose:s,title:r="Scan Inventory Barcode",description:i="Position the barcode within the scanning area",licenseKey:a=TN,showClose:o=!0}){const c=y.useRef(null),[d,h]=y.useState(!1),[g,m]=y.useState(null),[p,v]=y.useState(null),[j,N]=y.useState("No camera selected"),E=y.useRef(null),_=y.useRef(null),S=y.useRef(null),C=async()=>{if(console.log("Environment check:",{hasScanditKey:!!a,keyLength:(a==null?void 0:a.length)||0,envKeyExists:!1,isBrowser:typeof window<"u",userAgent:typeof navigator<"u"?navigator.userAgent:"unknown"}),!a){const T="Missing Scandit license key. Please check environment variables.";m(T),e&&e(T);return}try{console.log("Initializing Scandit with license key:",a.substring(0,10)+"...");try{E.current=new wf(a),console.log("Successfully initialized DataCaptureContext with constructor")}catch(O){if(console.log("Direct constructor failed, trying alternative methods:",O),typeof wf.create=="function")E.current=wf.create(a),console.log("Successfully initialized DataCaptureContext with create() method");else if(typeof wf.forLicenseKey=="function")E.current=wf.forLicenseKey(a),console.log("Successfully initialized DataCaptureContext with forLicenseKey() method");else throw new Error("Unable to initialize Scandit DataCaptureContext with any known method")}const T=new Uve;try{try{T.enableSymbology(dr.EAN13UPCA,!0)}catch{console.log("EAN13UPCA not available")}try{T.enableSymbology(dr.EAN8,!0)}catch{console.log("EAN8 not available")}try{T.enableSymbology(dr.UPCE,!0)}catch{console.log("UPCE not available")}try{T.enableSymbology(dr.Code128,!0)}catch{console.log("Code128 not available")}try{T.enableSymbology(dr.Code39,!0)}catch{console.log("Code39 not available")}try{T.enableSymbology(dr.DataMatrix,!0)}catch{console.log("DataMatrix not available")}try{T.enableSymbology(dr.QR,!0)}catch{console.log("QR not available")}if(dr.hasOwnProperty("PDF417")||typeof dr.PDF417<"u")try{T.enableSymbology(dr.PDF417,!0)}catch{console.log("PDF417 not available")}if(dr.hasOwnProperty("Interleaved2of5")||typeof dr.Interleaved2of5<"u")try{T.enableSymbology(dr.Interleaved2of5,!0)}catch{console.log("Interleaved2of5 not available")}else if(dr.hasOwnProperty("ITF")||typeof dr.ITF<"u")try{T.enableSymbology(dr.ITF,!0)}catch{console.log("ITF not available")}if(dr.hasOwnProperty("Code93")||typeof dr.Code93<"u")try{T.enableSymbology(dr.Code93,!0)}catch{console.log("Code93 not available")}}catch(O){console.error("Error while enabling symbologies:",O);try{T.enableSymbologies(Object.values(dr).filter(V=>typeof V=="number"))}catch(V){console.error("Failed to enable all symbologies:",V)}}_.current=qve.forContext(E.current,T),_.current.addListener({didScan:(O,V)=>{var Y;const B=((Y=V.newlyRecognizedBarcodes)==null?void 0:Y[0])||V.newlyRecognizedBarcode;if(B){const z=B.data||"";v(z),t(z)}}});const M=new Qo;M.preferredResolution=GS.FullHD;const k=YS.default;if(k){k.applySettings(M),E.current.setFrameSource(k),Promise.resolve(k.getCurrentState()).then(V=>{V===Bf.On&&N(k.position||"Default camera")}),S.current=mve.forContext(E.current),S.current.connectToElement(c.current);const O=$ve.withBarcodeCaptureForView(_.current,S.current);Promise.resolve(O).then(V=>{V.viewfinder=null}).catch(V=>console.error("Error setting viewfinder:",V)),h(!1),m(null)}else m("No camera available"),e&&e("No camera available")}catch(T){console.error("Error initializing Scandit scanner:",T);let M;T?T.message&&(T.message.includes("undefined is not an object")||T.message.includes("symbology"))?(M="Scandit barcode configuration issue. Using HTML5 scanner as fallback.",s&&setTimeout(s,3e3)):T.message&&T.message.includes("license")?M="Scandit license key issue. Please verify your license key.":T.message&&T.message.includes("camera")?M="Camera access failed. Please check your camera permissions.":M=`Scandit initialization failed: ${T.message||"Unknown error"}`:M="Scandit initialization failed. Please try again later.",m(M),e&&e(M)}},I=async()=>{try{if(console.log("Starting Scandit scanner..."),!await P()){const k="Camera permission denied. Please grant access in your browser settings.";console.error(k),m(k),e&&e(k);return}if((!_.current||!E.current)&&(console.error("Scanner not properly initialized, attempting re-initialization"),await C(),!_.current||!E.current)){const k="Scanner failed to initialize. Please try switching to HTML5 scanner.";m(k),e&&e(k);return}console.log("Enabling barcode capture..."),_.current.setEnabled(!0);const M=E.current.getFrameSource();if(!M){const k="No camera available from Scandit";console.error(k),m(k),e&&e(k);return}try{console.log("Starting camera...");const k=M.switchToDesiredState(Bf.On),O=new Promise((B,Y)=>setTimeout(()=>Y(new Error("Camera initialization timed out after 6 seconds")),6e3)),V=k.then(()=>(console.log("Camera activated successfully!"),k));await Promise.race([V,O]),console.log("Camera started successfully"),h(!0),m(null);try{N(M.position||"Active camera")}catch(B){console.log("Unable to get camera position info:",B),N("Camera active")}}catch(k){console.error("Camera activation error:",k);let O="Failed to start camera";k.message&&(k.message.includes("timed out")?O="Camera initialization timed out. Please try the HTML5 scanner instead.":k.message.includes("permission")?O="Camera permission denied. Please check your browser settings.":k.message.includes("not found")||k.message.includes("not available")?O="Camera not found or not available on this device.":O=`Failed to start camera: ${k.message}`),m(O),e&&e(O)}}catch(T){console.error("Critical error in startScanning:",T);const M=`Camera error: ${T.message||"Unknown error"}`;m(M),e&&e(M)}},P=async()=>{try{if(navigator.permissions&&navigator.permissions.query){const T=await navigator.permissions.query({name:"camera"});if(T.state==="granted")return!0;if(T.state==="prompt")try{return(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(k=>k.stop()),!0}catch{return!1}else return!1}else try{return(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(M=>M.stop()),!0}catch{return!1}}catch(T){return console.error("Error checking camera permission:",T),!1}},L=()=>{if(_.current&&E.current){_.current.setEnabled(!1);const T=E.current.getFrameSource();T&&T.switchToDesiredState(Bf.Off).then(()=>{h(!1)}).catch(M=>{console.error("Error stopping camera:",M),h(!1)})}h(!1)};return y.useEffect(()=>(console.log("ScanditBarcodeScanner component mounted"),C(),()=>{console.log("ScanditBarcodeScanner component unmounting - cleaning up resources");try{if(_.current){console.log("Disabling barcode capture"),_.current.setEnabled(!1);try{typeof _.current.removeAllListeners=="function"&&_.current.removeAllListeners()}catch(T){console.log("Error removing barcode listeners:",T)}}if(E.current){const T=E.current.getFrameSource();if(T&&(console.log("Stopping camera during cleanup"),Promise.resolve(T.switchToDesiredState(Bf.Off)).catch(M=>console.error("Error stopping camera during cleanup:",M))),S.current)try{console.log("Disconnecting data capture view"),typeof S.current.disconnectFromElement=="function"&&S.current.disconnectFromElement()}catch(M){console.log("Error disconnecting view:",M)}typeof E.current.dispose=="function"&&(console.log("Disposing data capture context"),E.current.dispose())}}catch(T){console.error("Error during Scandit scanner cleanup:",T)}}),[]),n.jsxs(Ae,{className:"w-full max-w-md mx-auto",children:[n.jsx(Be,{className:"pb-2",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs(Ve,{className:"flex items-center",children:[n.jsx(ki,{className:"h-5 w-5 mr-2 text-primary"}),r]}),n.jsx(ct,{children:i})]}),o&&s&&n.jsx(H,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8",children:n.jsx(ys,{className:"h-4 w-4"})})]})}),n.jsx(Ee,{children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("div",{ref:c,className:"w-full h-64 bg-muted rounded-md overflow-hidden relative flex items-center justify-center",children:!d&&n.jsxs("div",{className:"text-center p-4",children:[n.jsx(ki,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"Camera preview will appear here"})]})}),g&&n.jsxs(Cr,{variant:"destructive",className:"relative",children:[n.jsx(Sr,{children:g}),n.jsxs(H,{onClick:()=>{m(null),setTimeout(()=>C(),500)},size:"sm",className:"mt-2",variant:"outline",children:[n.jsx(Qa,{className:"h-4 w-4 mr-2"}),"Retry Scanner Initialization"]})]}),p&&n.jsx(Cr,{children:n.jsxs(Sr,{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium",children:"Last scanned:"}),n.jsx("span",{className:"font-mono text-sm",children:p})]})}),n.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[n.jsx(JC,{className:"h-4 w-4"}),n.jsx("span",{children:j})]})]})}),n.jsx(Pn,{className:"flex gap-2 pt-0",children:d?n.jsxs(H,{onClick:L,variant:"outline",className:"flex-1 gap-1",children:[n.jsx(ys,{className:"h-4 w-4"}),"Stop Scanning"]}):n.jsxs(H,{onClick:I,className:"flex-1 gap-1",disabled:!!g,children:[n.jsx(em,{className:"h-4 w-4"}),"Start Scanning"]})})]})}function Yve({onScan:t,onError:e,onClose:s,showClose:r=!1,title:i="Scandit SparkScan",description:a="Enterprise-grade barcode scanning with enhanced UI"}){const[o]=y.useState("Scandit SparkScan package is not available. This requires an enterprise license and the @scandit/web-sparkscan package."),c=()=>{t("SPARKSCANDEMO12345")};return n.jsxs(Ae,{className:"w-full max-w-md mx-auto",children:[n.jsx(Be,{className:"pb-2",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs(Ve,{className:"flex items-center",children:[n.jsx(Sb,{className:"h-5 w-5 mr-2 text-primary"}),i]}),n.jsx(ct,{children:a})]}),r&&s&&n.jsx(H,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8",children:n.jsx(ys,{className:"h-4 w-4"})})]})}),n.jsx(Ee,{children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("div",{className:"w-full h-64 bg-muted rounded-md overflow-hidden relative flex items-center justify-center",children:n.jsxs("div",{className:"text-center p-4",children:[n.jsx(_p,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"SparkScan preview would appear here"})]})}),n.jsx(Cr,{variant:"destructive",children:n.jsx(Sr,{children:o})}),n.jsx(Cr,{children:n.jsxs(Sr,{className:"text-sm",children:[n.jsx("p",{children:"Scandit SparkScan requires an enterprise license and the following package:"}),n.jsx("code",{className:"bg-muted px-2 py-1 rounded mt-1 inline-block",children:"@scandit/web-sparkscan"}),n.jsx("p",{className:"mt-2",children:"This package is not publicly available and requires a special enterprise subscription."})]})}),n.jsx("div",{className:"text-sm text-muted-foreground",children:n.jsxs("p",{children:["For more information, visit the ",n.jsx("a",{href:"https://docs.scandit.com/web-sdk/frameworks/javascript-spa/react-js.html",target:"_blank",rel:"noopener noreferrer",className:"underline text-primary",children:"Scandit Documentation"}),"."]})})]})}),n.jsxs(Pn,{className:"flex gap-2 pt-0",children:[n.jsxs(H,{onClick:c,className:"flex-1 gap-1",variant:"outline",children:[n.jsx(Sb,{className:"h-4 w-4"}),"Simulate SparkScan"]}),s&&n.jsxs(H,{onClick:s,variant:"default",className:"flex-1",children:[n.jsx(ys,{className:"h-4 w-4 mr-2"}),"Close"]})]})]})}function Kve(){const[t,e]=y.useState(""),[s,r]=y.useState([]),[i,a]=y.useState(!1),[o,c]=y.useState(null),[d,h]=y.useState("html5"),[g,m]=y.useState(!1),p=(N,E=d)=>{console.log("Barcode scanned:",N,"from",E),e(N),r(_=>[{value:N,timestamp:new Date,source:E},..._].slice(0,10)),c(null)},v=N=>{if(c(N),(d==="scandit"||d==="sparkscan")&&["initialization failed","barcode configuration issue","license key issue","undefined is not an object","Camera error","Failed to start camera","timed out","null is not an object","permission","not available","TypeError","Cannot read","is not a function","Failed to initialize","no camera","No camera"].some(S=>N.includes(S))){console.log("Scandit scanner error detected, falling back to HTML5 scanner"),console.log("Error that triggered fallback:",N);let S="configuration issue";N.match(/camera|Camera|video|webcam|permission|timed out/i)?S="camera access issue":N.match(/license|key|authorization|authenticated/i)?S="license key issue":N.match(/TypeError|null|undefined|not an object|cannot read/i)&&(S="initialization error"),m(!0),setTimeout(()=>{h("html5"),c(`Scandit scanner failed due to ${S}. Automatically switched to HTML5 scanner.`),console.log(`Switched to HTML5 scanner due to: ${S}`)},500)}},j=()=>{a(N=>!N),c(null),i&&m(!1)};return n.jsxs(n.Fragment,{children:[n.jsx(um,{children:n.jsx("title",{children:"Barcode Scanner Demo | Pool Service Management"})}),n.jsxs("div",{className:"container max-w-5xl py-6 space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Barcode Scanner Demo"}),n.jsx("p",{className:"text-muted-foreground",children:"Compare different barcode scanning implementations"})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-6",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(U1,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-blue-700 font-medium mb-1",children:"Information"}),n.jsxs("div",{className:"text-blue-600 text-sm",children:["This page demonstrates three barcode scanning implementations:",n.jsxs("ul",{className:"list-disc list-inside mt-2 ml-2",children:[n.jsx("li",{children:"HTML5-QR-Code: A lightweight JavaScript library for QR and barcode scanning"}),n.jsx("li",{children:"Scandit Classic: The standard enterprise-grade scanning SDK"}),n.jsx("li",{children:"Scandit SparkScan: Enhanced scanning with a modern UI and better performance"})]}),n.jsx("p",{className:"mt-2",children:"Note: Both Scandit implementations require a license key and package installation."})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsxs(Ve,{className:"flex items-center gap-2",children:[n.jsx(ki,{className:"h-5 w-5 text-primary"}),"Barcode Scanner Controls"]}),n.jsx(ct,{children:"Test different scanner implementations"})]}),n.jsx(Ee,{className:"space-y-4",children:n.jsxs(ps,{defaultValue:"html5",onValueChange:N=>h(N),children:[n.jsxs(gs,{className:"grid w-full grid-cols-3",children:[n.jsx(Ge,{value:"html5",children:"HTML5-QR-Code"}),n.jsx(Ge,{value:"scandit",children:"Scandit Classic"}),n.jsx(Ge,{value:"sparkscan",children:"Scandit SparkScan"})]}),n.jsxs(Qe,{value:"html5",className:"space-y-4 pt-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"The HTML5-QR-Code scanner is an open-source library that uses the WebRTC API to access the device camera and decode barcodes in real-time."}),i?null:n.jsxs(H,{onClick:j,className:"w-full",children:[n.jsx(ki,{className:"mr-2 h-4 w-4"}),"Open HTML5 Scanner"]})]}),n.jsxs(Qe,{value:"scandit",className:"space-y-4 pt-4",children:[n.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(U1,{className:"h-5 w-5 text-amber-600 mt-0.5 mr-3 flex-shrink-0"}),n.jsxs("div",{className:"text-amber-700 text-sm",children:[n.jsx("p",{className:"mb-2",children:"Scandit offers an enterprise-grade barcode scanning experience with advanced features."}),n.jsx("p",{className:"mb-2",children:"This implementation uses the following Scandit packages:"}),n.jsxs("ul",{className:"list-disc list-inside ml-2 mb-2",children:[n.jsx("li",{children:n.jsx("code",{className:"bg-amber-100 px-1 rounded",children:"@scandit/web-datacapture-core"})}),n.jsx("li",{children:n.jsx("code",{className:"bg-amber-100 px-1 rounded",children:"@scandit/web-datacapture-barcode"})})]}),n.jsx("p",{children:"The valid Scandit license key has been configured."})]})]})}),i?null:n.jsxs(H,{onClick:j,className:"w-full",children:[n.jsx(LG,{className:"mr-2 h-4 w-4"}),"Open Scandit Scanner"]})]}),n.jsxs(Qe,{value:"sparkscan",className:"space-y-4 pt-4",children:[n.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-md p-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(U1,{className:"h-5 w-5 text-purple-600 mt-0.5 mr-3 flex-shrink-0"}),n.jsxs("div",{className:"text-purple-700 text-sm",children:[n.jsx("p",{className:"mb-2",children:"Scandit SparkScan is a high-performance barcode scanning experience with a modern UI."}),n.jsxs("p",{className:"mb-2",children:[n.jsx("strong",{children:"Note:"})," This is an enterprise feature. The package ",n.jsx("code",{className:"bg-purple-100 px-1 rounded",children:"@scandit/web-sparkscan"})," is not available in the public npm registry and requires a special Scandit enterprise license."]}),n.jsx("p",{children:"This demo will show error messages indicating the missing package."})]})]})}),i?null:n.jsxs(H,{onClick:j,className:"w-full",children:[n.jsx(Sb,{className:"mr-2 h-4 w-4"}),"Open SparkScan Scanner"]})]})]})})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{children:[n.jsxs(Ve,{className:"flex items-center gap-2",children:[n.jsx(ki,{className:"h-5 w-5 text-primary"}),"Scan Results"]}),n.jsx(ct,{children:"View your most recent scan results"})]}),n.jsxs(Ee,{className:"space-y-4",children:[t?n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:[n.jsx("h4",{className:"text-green-700 font-medium mb-1",children:"Last Scanned Value"}),n.jsx("div",{className:"text-green-600 font-mono",children:t})]}):n.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No barcode scanned yet"}),o&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[n.jsx("h4",{className:"text-red-700 font-medium mb-1",children:"Error"}),n.jsx("div",{className:"text-red-600",children:o})]})]}),n.jsxs(Pn,{className:"flex flex-col items-start",children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Scan History"}),s.length>0?n.jsx("div",{className:"w-full",children:s.map((N,E)=>n.jsxs("div",{className:"flex justify-between items-center py-2 border-b last:border-0",children:[n.jsx("span",{className:"font-mono text-sm truncate max-w-[60%]",children:N.value}),n.jsxs("div",{className:"flex flex-col items-end text-xs text-muted-foreground",children:[n.jsx("span",{children:N.timestamp.toLocaleTimeString()}),n.jsx("span",{className:"uppercase text-xs",children:N.source})]})]},E))}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"No scan history yet"})]})]})]}),i&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:n.jsx("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md",children:d==="html5"||g?n.jsx(Rxe,{onScan:N=>p(N,"html5"),onError:v,onClose:j,showClose:!0,title:g&&d!=="html5"?"HTML5 Scanner (Fallback)":"HTML5 Barcode Scanner",description:g?"Automatically switched to HTML5 scanner due to issues with Scandit":void 0}):d==="scandit"?n.jsx(Gve,{onScan:N=>p(N,"scandit"),onError:v,onClose:j,showClose:!0,title:"Scandit Barcode Scanner",description:"Professional-grade barcode scanning",licenseKey:TN}):n.jsx(Yve,{onScan:N=>p(N,"sparkscan"),onError:v,onClose:j,showClose:!0,title:"Scandit SparkScan",description:"Enterprise-grade scanning experience",licenseKey:TN})})}),i&&!g&&d!=="html5"&&n.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-[60]",children:n.jsxs(H,{onClick:()=>{m(!0),h("html5")},variant:"secondary",className:"shadow-lg",children:[n.jsx(Qa,{className:"h-4 w-4 mr-2"}),"Switch to HTML5 Scanner"]})})]})]})}function Zve(t){const e=new Date(t),r=Math.abs(new Date().getTime()-e.getTime()),i=Math.ceil(r/(1e3*60*60*24));return i===0?"Today":i===1?"Tomorrow":`${i} days`}const Qve=[{id:"TASK-1",title:"Create new landing page",assignee:"John Smith",status:"in progress",priority:"high",estimatedHours:6,endDate:"2025-03-19",labels:["design","frontend"]},{id:"TASK-2",title:"Fix API endpoint",assignee:"Jane Doe",status:"todo",priority:"medium",estimatedHours:3,endDate:"2025-03-20",labels:["backend","api"]},{id:"TASK-3",title:"Implement authentication",assignee:"John Smith",status:"done",priority:"high",estimatedHours:8,endDate:"2025-03-15",labels:["security","backend"]},{id:"TASK-4",title:"Design product page",assignee:"Sarah Johnson",status:"todo",priority:"low",estimatedHours:4,endDate:"2025-03-21",labels:["design"]},{id:"TASK-5",title:"Fix mobile responsiveness",assignee:"Jane Doe",status:"in progress",priority:"medium",estimatedHours:5,endDate:"2025-03-18",labels:["frontend","mobile"]}];function Xve(){const t=[{id:"select",header:({table:s})=>n.jsx(Ri,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:r=>s.toggleAllPageRowsSelected(!!r),"aria-label":"Select all"}),cell:({row:s})=>n.jsx(Ri,{checked:s.getIsSelected(),onCheckedChange:r=>s.toggleSelected(!!r),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"id",header:"ID",cell:({row:s})=>n.jsx("div",{children:s.getValue("id")})},{accessorKey:"title",header:"Title",cell:({row:s})=>n.jsx("div",{className:"font-medium",children:s.getValue("title")})},{accessorKey:"assignee",header:"Assignee",cell:({row:s})=>n.jsx("div",{children:s.getValue("assignee")})},{accessorKey:"status",header:"Status",cell:({row:s})=>{const r=s.getValue("status"),i={todo:{label:"To Do",color:"bg-blue-100 text-blue-800"},"in progress":{label:"In Progress",color:"bg-yellow-100 text-yellow-800"},done:{label:"Done",color:"bg-green-100 text-green-800"},canceled:{label:"Canceled",color:"bg-red-100 text-red-800"}},{label:a,color:o}=i[r]||{label:r,color:"bg-gray-100"};return n.jsx(Ze,{variant:"outline",className:`${o} border-none`,children:a})}},{accessorKey:"priority",header:"Priority",cell:({row:s})=>{const r=s.getValue("priority"),i={low:{label:"Low",color:"bg-blue-100 text-blue-800"},medium:{label:"Medium",color:"bg-yellow-100 text-yellow-800"},high:{label:"High",color:"bg-red-100 text-red-800"}},{label:a,color:o}=i[r]||{label:r,color:"bg-gray-100"};return n.jsx(Ze,{variant:"outline",className:`${o} border-none`,children:a})}},{accessorKey:"estimatedHours",header:"Est. Hours",cell:({row:s})=>n.jsx("div",{children:s.getValue("estimatedHours")})},{accessorKey:"endDate",header:"End Date",cell:({row:s})=>{const r=s.getValue("endDate");return n.jsx("div",{children:Zve(r)})}},{accessorKey:"labels",header:"Labels",cell:({row:s})=>{const r=s.getValue("labels");return n.jsx("div",{className:"flex flex-wrap gap-1",children:r.map(i=>n.jsx(Ze,{variant:"outline",className:"px-2 py-0 text-xs",children:i},i))})}},{id:"actions",cell:({row:s})=>{const r=s.original;return n.jsxs(oi,{children:[n.jsx(li,{asChild:!0,children:n.jsxs(H,{variant:"ghost",className:"h-8 w-8 p-0",children:[n.jsx("span",{className:"sr-only",children:"Open menu"}),n.jsx(ri,{className:"h-4 w-4"})]})}),n.jsxs(Yr,{align:"end",children:[n.jsx(_m,{children:"Actions"}),n.jsx(bt,{onClick:()=>navigator.clipboard.writeText(r.id),children:"Copy task ID"}),n.jsx(sl,{}),n.jsxs(bt,{children:[n.jsx(xo,{className:"mr-2 h-4 w-4"}),"View"]}),n.jsxs(bt,{children:[n.jsx(Gr,{className:"mr-2 h-4 w-4"}),"Edit"]}),n.jsxs(bt,{className:"text-red-600",children:[n.jsx(Ni,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})}}],e=[{id:"title",title:"Title",type:"text"},{id:"status",title:"Status",type:"select",options:[{label:"To Do",value:"todo"},{label:"In Progress",value:"in progress"},{label:"Done",value:"done"},{label:"Canceled",value:"canceled"}]},{id:"priority",title:"Priority",type:"select",options:[{label:"Low",value:"low"},{label:"Medium",value:"medium"},{label:"High",value:"high"}]},{id:"assignee",title:"Assignee",type:"text"},{id:"estimatedHours",title:"Estimated Hours",type:"number",operators:[{label:"Equals",value:"equals"},{label:"Greater than",value:"greaterThan"},{label:"Less than",value:"lessThan"},{label:"Between",value:"between"}]},{id:"endDate",title:"End Date",type:"date",operators:[{label:"Before",value:"before"},{label:"After",value:"after"},{label:"Between",value:"between"},{label:"Is today",value:"isToday"}]}];return n.jsxs("div",{className:"container mx-auto py-10",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Tasks"}),n.jsx(zB,{columns:t,data:Qve,filterableColumns:e,globalSearchPlaceholder:"Search all tasks..."})]})}function Jve(){return n.jsxs(n.Fragment,{children:[n.jsx(um,{children:n.jsx("title",{children:"Data Table Demo | Pool Management"})}),n.jsxs("div",{className:"container mx-auto py-10",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Data Table Filters Demo"}),n.jsx("p",{className:"text-muted-foreground mb-8",children:"This page demonstrates the implementation of advanced data table filters using TanStack Table and the bazza/ui components."}),n.jsx("div",{className:"rounded-lg border p-4",children:n.jsx(Xve,{})})]})]})}const eye=q.object({email:q.string().email("Please enter a valid email address"),password:q.string().min(6,"Password must be at least 6 characters"),confirmPassword:q.string(),name:q.string().min(1,"Full name is required"),organizationName:q.string().min(2,"Organization name is required"),role:q.enum(["client","technician","manager","admin"]),phone:q.string().optional(),address:q.string().optional()}).refine(t=>t.password===t.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});function tye(){const{toast:t}=Lt(),{register:e,isLoading:s}=Kr(),[,r]=_n(),i=mn({resolver:pn(eye),defaultValues:{email:"",password:"",confirmPassword:"",name:"",organizationName:"",role:"client",phone:"",address:""}});async function a(o){const{confirmPassword:c,organizationName:d,...h}=o,g=h.email,m={...h,username:g,organizationName:d};try{if(await e(m)){const j=d.replace(/\s+/g,"-").toLowerCase().replace(/[^a-z0-9-]/g,"");r(`/pricing?name=${encodeURIComponent(d)}&slug=${j}`)}}catch(p){console.error("Registration submission error:",p),t({title:"Registration error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}}return n.jsx("div",{className:"container flex items-center justify-center min-h-screen py-8 overflow-auto",children:n.jsxs(Ae,{className:"w-full max-w-lg my-8",children:[n.jsxs(Be,{className:"space-y-1",children:[n.jsx(Ve,{className:"text-2xl text-center",children:"Create Account"}),n.jsx(ct,{className:"text-center",children:"Enter your information to register a new account"})]}),n.jsx(Ee,{children:n.jsx(fn,{...i,children:n.jsxs("form",{onSubmit:i.handleSubmit(a),className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[n.jsx(J,{control:i.control,name:"organizationName",render:({field:o})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Organization Name"}),n.jsx(Q,{children:n.jsx(ve,{...o,placeholder:"Enter your organization name",disabled:s})}),n.jsx(ne,{})]})}),n.jsx(J,{control:i.control,name:"name",render:({field:o})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Full Name"}),n.jsx(Q,{children:n.jsx(ve,{...o,placeholder:"Enter your full name",disabled:s})}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:i.control,name:"email",render:({field:o})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Email"}),n.jsx(Q,{children:n.jsx(ve,{...o,type:"email",placeholder:"Enter your email",disabled:s})}),n.jsx(ne,{})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[n.jsx(J,{control:i.control,name:"password",render:({field:o})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Password"}),n.jsx(Q,{children:n.jsx(ve,{...o,type:"password",placeholder:"Create a password",disabled:s})}),n.jsx(ne,{})]})}),n.jsx(J,{control:i.control,name:"confirmPassword",render:({field:o})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Confirm Password"}),n.jsx(Q,{children:n.jsx(ve,{...o,type:"password",placeholder:"Confirm your password",disabled:s})}),n.jsx(ne,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[n.jsx(J,{control:i.control,name:"role",render:({field:o})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Role"}),n.jsxs(gt,{disabled:s,onValueChange:o.onChange,defaultValue:o.value,children:[n.jsx(Q,{children:n.jsx(ut,{children:n.jsx(xt,{placeholder:"Select a role"})})}),n.jsxs(ht,{children:[n.jsx(ue,{value:"client",children:"Client"}),n.jsx(ue,{value:"technician",children:"Technician"}),n.jsx(ue,{value:"manager",children:"Manager"}),n.jsx(ue,{value:"admin",children:"Administrator"})]})]}),n.jsx(ne,{})]})}),n.jsx(J,{control:i.control,name:"phone",render:({field:o})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Phone (Optional)"}),n.jsx(Q,{children:n.jsx(ve,{...o,placeholder:"Enter your phone number",disabled:s})}),n.jsx(ne,{})]})})]}),n.jsx(J,{control:i.control,name:"address",render:({field:o})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Address (Optional)"}),n.jsx(Q,{children:n.jsx(ve,{...o,placeholder:"Enter your address",disabled:s})}),n.jsx(ne,{})]})}),n.jsx(H,{type:"submit",className:"w-full",disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Registering..."]}):"Register"})]})})}),n.jsx(Pn,{className:"flex justify-center",children:n.jsx(H,{variant:"link",className:"px-0",onClick:()=>r("/login"),disabled:s,children:"Already have an account? Login"})})]})})}function nye({plan:t,isSelected:e,onSelect:s}){const r=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(o);t.tier;const i=(o,c)=>n.jsxs("div",{className:"flex items-start mb-2 sm:mb-3",children:[o?n.jsx(Ao,{className:"h-5 w-5 text-green-500 mr-2 shrink-0"}):n.jsx(ys,{className:"h-5 w-5 text-gray-400 mr-2 shrink-0"}),n.jsx("span",{className:`text-sm sm:text-base ${o?"text-blue-900":"text-gray-500"}`,children:c})]}),a=()=>[{label:"Unlimited Clients",basic:!0,pro:!0,enterprise:!0},{label:"Maintenance Scheduling",basic:!0,pro:!0,enterprise:!0},{label:"Basic Customer Portal",basic:!0,pro:!0,enterprise:!0},{label:"Service Reports",basic:!0,pro:!0,enterprise:!0},{label:"Mobile App Access",basic:!1,pro:!0,enterprise:!0},{label:"Route Optimization",basic:!1,pro:!0,enterprise:!0},{label:"Chemical Tracking",basic:!1,pro:!0,enterprise:!0},{label:"Inventory Management",basic:!1,pro:!1,enterprise:!0},{label:"Advanced Analytics",basic:!1,pro:!1,enterprise:!0},{label:"Custom Integrations",basic:!1,pro:!1,enterprise:!0}].map(c=>({label:c.label,available:t.tier==="basic"?c.basic:t.tier==="professional"?c.pro:c.enterprise}));return n.jsxs(Ae,{className:`overflow-hidden transition-all border ${e?"border-blue-500 ring-1 ring-blue-300":"border-gray-200"}`,children:[n.jsxs(Be,{className:"pb-3 pt-5 px-4 sm:pb-4 sm:pt-6 sm:px-6 bg-white",children:[n.jsx("h3",{className:"text-xl font-bold text-blue-900",children:t.name}),n.jsxs("div",{className:"mt-2",children:[n.jsx("span",{className:"text-3xl font-bold text-blue-900",children:r(t.price)}),n.jsxs("span",{className:"text-gray-500 ml-1",children:["/",t.billingCycle==="monthly"?"month":"year"]})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-2",children:t.description})]}),n.jsx(Ee,{className:"pt-3 px-4 sm:pt-4 sm:px-6 overflow-y-auto max-h-[360px] sm:max-h-full",children:n.jsx("div",{className:"space-y-0.5",children:a().map((o,c)=>n.jsx("div",{children:i(o.available,o.label)},c))})}),n.jsx(Pn,{className:"pt-3 pb-5 px-4 sm:pt-4 sm:pb-6 sm:px-6 flex justify-center",children:n.jsx(H,{onClick:s,variant:e?"default":"outline",className:`w-full ${e?"bg-blue-600 hover:bg-blue-700 text-white border-transparent":"border-blue-600 text-blue-600 hover:bg-blue-50"}`,children:e?"Selected":"Select Plan"})})]})}function sye({selectedCycle:t,onCycleChange:e,onSelectPlan:s,defaultSelectedPlanId:r=0}){console.log("PricingPlans component initialized");const[i,a]=y.useState(r),[o,c]=y.useState([]);console.log("Starting to fetch subscription plans...");const{data:d,isLoading:h,error:g}=wt({queryKey:["/api/stripe/plans"],retry:3,retryDelay:E=>Math.min(1e3*2**E,3e4)});console.log("Query state:",{isLoading:h,error:g?"Error occurred":"No error"}),console.log("API response:",d),d!=null&&d.plans&&d.plans.forEach((E,_)=>{console.log(`Plan ${_+1} structure:`,JSON.stringify(E))});const m=(d==null?void 0:d.plans)||[];console.log("Extracted plans:",m),y.useEffect(()=>{if(console.log("Effect running with selectedCycle:",t),console.log("Current plans data:",m),m&&m.length>0){console.log("Filtering plans for cycle:",t);const E=m.filter(_=>(console.log("Checking plan:",_),(_.active!==void 0?_.active:!0)&&_.billingCycle===t));E.sort((_,S)=>_.price-S.price),c(E),i!==0&&!E.some(_=>_.id===i)&&(a(0),s(0))}},[m,t,i,s]);const p=E=>{a(E),s(E)},v=E=>{e(E?"yearly":"monthly")},j=()=>{if(!m)return 0;const E=m.filter(L=>(L.active!==void 0?L.active:!0)&&L.tier==="professional");if(E.length<2)return 0;const _=E.find(L=>L.billingCycle==="monthly"),S=E.find(L=>L.billingCycle==="yearly");if(!_||!S)return 0;const C=_.price*12,I=S.price,P=(C-I)/C*100;return Math.round(P)};if(h)return n.jsxs("div",{children:[n.jsx("div",{className:"flex justify-center mb-10",children:n.jsx(_e,{className:"h-8 w-64"})}),n.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[1,2,3].map(E=>n.jsx(_e,{className:"h-[500px] w-full rounded-lg"},E))})]});if(g)return n.jsxs("div",{className:"text-center py-12",children:[n.jsx("h3",{className:"text-lg font-medium text-red-500 mb-2",children:"Unable to load subscription plans"}),n.jsx("p",{className:"text-muted-foreground",children:"Please try again later or contact support for assistance."})]});const N=j();return n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-center items-center mb-8 sm:mb-12 space-x-4",children:[n.jsx(Wr,{htmlFor:"billing-toggle",className:"text-sm font-medium text-blue-800",children:"Monthly Billing"}),n.jsxs("div",{className:"relative",children:[n.jsx(is,{id:"billing-toggle",checked:t==="yearly",onCheckedChange:v}),N>0&&n.jsxs("span",{className:"absolute -top-7 left-1/2 transform -translate-x-1/2 bg-green-100 text-green-800 text-xs font-medium px-2.5 py-1 rounded-full",children:["Save ",N,"%"]})]}),n.jsx(Wr,{htmlFor:"billing-toggle",className:"text-sm font-medium text-blue-800",children:"Annual Billing"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 overflow-visible",children:o.length>0?o.map(E=>n.jsx(nye,{plan:E,isSelected:i===E.id,onSelect:()=>p(E.id)},E.id)):n.jsxs("div",{className:"col-span-3 text-center py-12",children:[n.jsx("h3",{className:"text-lg font-medium mb-2",children:"No subscription plans available"}),n.jsx("p",{className:"text-muted-foreground",children:"Please check back later for available subscription options."})]})})]})}function rye(){console.log("Pricing page component rendering"),console.log("Pricing page rendered at:",new Date().toISOString()),_n();const{toast:t}=Lt(),[e,s]=y.useState("monthly"),[r,i]=y.useState(0),[a,o]=y.useState(""),[c,d]=y.useState("");y.useEffect(()=>{console.log("Pricing page: reading URL params");const m=new URLSearchParams(window.location.search),p=m.get("name"),v=m.get("slug");console.log("Organization params from URL:",{name:p,slug:v}),p&&o(p),v&&d(v)},[]);const h=Pt({mutationFn:m=>(console.log("Creating checkout session with data:",m),pt("/api/stripe/checkout-session","POST",{planId:m.planId,successUrl:`${window.location.origin}/subscription/success`,cancelUrl:`${window.location.origin}/pricing`})),onSuccess:m=>{if(console.log("Checkout session created successfully:",m),!m.success){t({title:"Checkout Error",description:m.message||"There was an error processing your request",variant:"destructive"});return}if(!m.url){t({title:"Checkout Error",description:"No checkout URL was returned. Please try again or contact support.",variant:"destructive"});return}console.log("Redirecting to Stripe checkout:",m.url),window.location.href=m.url},onError:m=>{console.error("Checkout error:",m);let p="There was an error creating your checkout session. Please try again.";if(m.response&&m.response.data){const v=m.response.data;p=v.message||v.error||p,console.log("Server returned error:",v)}else m.message&&(p=m.message);t({title:"Checkout Failed",description:p,variant:"destructive"})}}),g=()=>{if(r===0){t({title:"No Plan Selected",description:"Please select a subscription plan to continue.",variant:"destructive"});return}h.mutate({planId:r,organizationName:a,organizationSlug:c})};return n.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col overflow-x-hidden",children:[n.jsx("div",{className:"bg-blue-50 border-b border-blue-100",children:n.jsx("div",{className:"container mx-auto py-8 px-4 sm:py-10",children:n.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold mb-3 text-blue-900",children:"Choose Your Plan"}),n.jsx("p",{className:"text-lg text-blue-700 mb-4",children:"Select the perfect plan for your pool service business needs"})]})})}),n.jsxs("div",{className:"py-6 sm:py-8 container mx-auto px-4",children:[n.jsx(sye,{selectedCycle:e,onCycleChange:s,onSelectPlan:i}),n.jsx("div",{className:"mt-8 flex justify-center",children:n.jsx(H,{size:"lg",className:"px-8 bg-blue-600 hover:bg-blue-700 text-white border-transparent",onClick:g,disabled:h.isPending||r===0,children:h.isPending?n.jsxs("span",{className:"flex items-center",children:[n.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):n.jsxs("span",{className:"flex items-center",children:[n.jsx(hL,{className:"mr-2 h-5 w-5"}),"Proceed to Checkout"]})})})]}),n.jsx("div",{className:"bg-muted/50 py-16",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Why Choose SmartWater Pools?"}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"bg-background p-6 rounded-lg shadow-sm",children:[n.jsx("div",{className:"bg-primary/10 p-3 rounded-full w-12 h-12 flex items-center justify-center mb-4",children:n.jsx(wm,{className:"text-primary h-6 w-6"})}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Secure & Reliable"}),n.jsx("p",{className:"text-muted-foreground",children:"Bank-level security protects your data. Regular backups ensure you never lose important information."})]}),n.jsxs("div",{className:"bg-background p-6 rounded-lg shadow-sm",children:[n.jsx("div",{className:"bg-primary/10 p-3 rounded-full w-12 h-12 flex items-center justify-center mb-4",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-primary h-6 w-6",children:n.jsx("path",{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"})})}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Simple & Intuitive"}),n.jsx("p",{className:"text-muted-foreground",children:"Our user-friendly interface makes it easy to manage clients, schedule services, and track inventory."})]}),n.jsxs("div",{className:"bg-background p-6 rounded-lg shadow-sm",children:[n.jsx("div",{className:"bg-primary/10 p-3 rounded-full w-12 h-12 flex items-center justify-center mb-4",children:n.jsx(mu,{className:"text-primary h-6 w-6"})}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Expert Support"}),n.jsx("p",{className:"text-muted-foreground",children:"Our dedicated support team is ready to help with any questions or issues you may encounter."})]})]})]})}),n.jsxs("div",{className:"py-16 container mx-auto px-4",children:[n.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Frequently Asked Questions"}),n.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Can I change my plan later?"}),n.jsx("p",{className:"text-muted-foreground",children:"Yes, you can upgrade or downgrade your plan at any time. Changes take effect at the next billing cycle."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Do you offer a free trial?"}),n.jsx("p",{className:"text-muted-foreground",children:"All plans include a 14-day free trial so you can explore the platform before being charged."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"How does billing work?"}),n.jsx("p",{className:"text-muted-foreground",children:"We use Stripe for secure payment processing. You can use any major credit card, and receipts are automatically sent to your email."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"What happens if I cancel my subscription?"}),n.jsx("p",{className:"text-muted-foreground",children:"If you cancel, you'll continue to have access until the end of your current billing period. After that, your access will be limited until you resubscribe."})]})]})]}),n.jsx("div",{className:"bg-primary text-primary-foreground py-16",children:n.jsxs("div",{className:"container mx-auto px-4 text-center",children:[n.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Transform Your Pool Service Business?"}),n.jsx("p",{className:"text-xl opacity-90 mb-8 max-w-2xl mx-auto",children:"Join thousands of pool service professionals who trust SmartWater Pools to streamline their operations."}),n.jsx(H,{size:"lg",variant:"secondary",className:"px-8",onClick:g,disabled:h.isPending||r===0,children:"Get Started Today"})]})})]})}const iye=()=>{const t=Kr(),[e,s]=y.useState(!0),r={isAuthenticated:t.isAuthenticated,user:t.user},i=y.useCallback(async()=>{s(!0),await t.checkSession(),s(!1)},[t]);return y.useEffect(()=>{t.isLoading||s(!1)},[t.isLoading]),{session:r,isLoading:e||t.isLoading,refreshSession:i}};function aye(){const[,t]=_n(),{session:e,isLoading:s,refreshSession:r}=iye(),[i,a]=y.useState(5),c=new URLSearchParams(window.location.search).get("plan")||"subscription";return y.useEffect(()=>{if(r(),!s&&!e.isAuthenticated){t("/login");return}const d=setInterval(()=>{a(h=>{var g,m,p,v,j;return h<=1?(clearInterval(d),((g=e.user)==null?void 0:g.role)==="system_admin"||((m=e.user)==null?void 0:m.role)==="org_admin"||((p=e.user)==null?void 0:p.role)==="admin"?t("/admin"):((v=e.user)==null?void 0:v.role)==="technician"?t("/technician"):((j=e.user)==null?void 0:j.role)==="client"?t("/client-portal"):t("/dashboard"),0):h-1})},1e3);return()=>clearInterval(d)},[s,e,t,r]),n.jsx("div",{className:"container max-w-4xl py-12 mx-auto",children:n.jsxs(Ae,{className:"w-full mx-auto",children:[n.jsxs(Be,{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center",children:n.jsx(mu,{className:"h-8 w-8 text-primary"})})}),n.jsx(Ve,{className:"text-3xl",children:"Subscription Activated!"}),n.jsxs(ct,{className:"text-lg",children:["Thank you for subscribing to our ",c," plan"]})]}),n.jsxs(Ee,{className:"space-y-6",children:[n.jsxs("div",{className:"bg-primary/5 p-4 rounded-lg",children:[n.jsx("h3",{className:"font-medium mb-2",children:"Your subscription has been successfully activated"}),n.jsx("p",{className:"text-muted-foreground",children:"You now have full access to all features included in your plan. Your subscription details have been sent to your email."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"What happens next?"}),n.jsxs("div",{className:"grid gap-2",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"bg-primary/10 p-1 rounded-full mt-0.5",children:n.jsx("span",{className:"text-primary text-sm font-bold",children:"1"})}),n.jsxs("p",{children:["You'll be redirected to your dashboard in ",i," seconds"]})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"bg-primary/10 p-1 rounded-full mt-0.5",children:n.jsx("span",{className:"text-primary text-sm font-bold",children:"2"})}),n.jsx("p",{children:"You can set up your pool service company profile"})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"bg-primary/10 p-1 rounded-full mt-0.5",children:n.jsx("span",{className:"text-primary text-sm font-bold",children:"3"})}),n.jsx("p",{children:"Add your team members and clients"})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"bg-primary/10 p-1 rounded-full mt-0.5",children:n.jsx("span",{className:"text-primary text-sm font-bold",children:"4"})}),n.jsx("p",{children:"Start managing your pool service operations"})]})]})]}),n.jsx(pr,{}),n.jsx("div",{className:"text-center text-muted-foreground",children:n.jsx("p",{children:"If you have any questions or need help getting started, please contact our support team."})})]}),n.jsx(Pn,{className:"flex justify-center",children:n.jsxs(H,{onClick:()=>{var d,h,g,m,p;((d=e.user)==null?void 0:d.role)==="system_admin"||((h=e.user)==null?void 0:h.role)==="org_admin"||((g=e.user)==null?void 0:g.role)==="admin"?t("/admin"):((m=e.user)==null?void 0:m.role)==="technician"?t("/technician"):((p=e.user)==null?void 0:p.role)==="client"?t("/client-portal"):t("/dashboard")},className:"px-8",size:"lg",children:["Go to Dashboard",n.jsx(ph,{className:"ml-2 h-4 w-4"})]})})]})})}function oye(){const[,t]=_n();return n.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background px-4",children:n.jsxs("div",{className:"text-center space-y-6 max-w-md",children:[n.jsx(QC,{className:"h-24 w-24 text-red-500 mx-auto"}),n.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Access Denied"}),n.jsx("p",{className:"text-xl text-muted-foreground",children:"You don't have permission to access this page."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center pt-6",children:[n.jsxs(H,{onClick:()=>window.history.back(),variant:"outline",className:"flex items-center gap-2",children:[n.jsx(kl,{className:"h-4 w-4"}),"Go Back"]}),n.jsxs(H,{onClick:()=>t("/"),className:"flex items-center gap-2",children:[n.jsx(py,{className:"h-4 w-4"}),"Go to Dashboard"]})]})]})})}function lye(){return n.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50","data-testid":"404-not-found",children:n.jsx(Ae,{className:"w-full max-w-md mx-4",children:n.jsxs(Ee,{className:"pt-6",children:[n.jsxs("div",{className:"flex mb-4 gap-2",children:[n.jsx(fs,{className:"h-8 w-8 text-red-500"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),n.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function cye(){return n.jsx("div",{className:"container max-w-4xl py-12 mx-auto",children:n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"text-center mb-10",children:[n.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Privacy Policy"}),n.jsxs("p",{className:"text-muted-foreground",children:["Last updated: ",new Date().toLocaleDateString()]})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"1. Introduction"}),n.jsx("p",{children:'Welcome to SmartWater Pools Management System ("we," "our," or "us"). We respect your privacy and are committed to protecting your personal data. This privacy policy will inform you about how we look after your personal data when you visit our website and tell you about your privacy rights and how the law protects you.'})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"2. Data We Collect"}),n.jsx("p",{children:"We may collect, use, store, and transfer different kinds of personal data about you which we have grouped together as follows:"}),n.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Identity Data"})," includes first name, last name, username or similar identifier."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Contact Data"})," includes billing address, email address, and telephone numbers."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Technical Data"})," includes internet protocol (IP) address, your login data, browser type and version."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Profile Data"})," includes your username and password, your preferences, feedback, and survey responses."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Usage Data"})," includes information about how you use our website and services."]})]})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"3. How We Use Your Data"}),n.jsx("p",{children:"We will only use your personal data when the law allows us to. Most commonly, we will use your personal data in the following circumstances:"}),n.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[n.jsx("li",{children:"To register you as a new customer."}),n.jsx("li",{children:"To process and deliver your service."}),n.jsx("li",{children:"To manage our relationship with you."}),n.jsx("li",{children:"To improve our website, products/services, marketing, or customer relationships."}),n.jsx("li",{children:"To recommend products or services that may interest you."})]})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"4. Google Sign-In"}),n.jsx("p",{children:"When you sign in using Google, we collect information that Google provides to us, which may include your name, email address, and profile picture. We use this information to create and manage your account with us. We do not share this information with third parties except as necessary to provide our services or as required by law."})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"5. Data Security"}),n.jsx("p",{children:"We have implemented appropriate security measures to prevent your personal data from being accidentally lost, used, or accessed in an unauthorized way, altered, or disclosed. We limit access to your personal data to those employees, agents, contractors, and other third parties who have a business need to know."})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"6. Your Legal Rights"}),n.jsx("p",{children:"Under certain circumstances, you have rights under data protection laws in relation to your personal data, including the right to:"}),n.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[n.jsx("li",{children:"Request access to your personal data."}),n.jsx("li",{children:"Request correction of your personal data."}),n.jsx("li",{children:"Request erasure of your personal data."}),n.jsx("li",{children:"Object to processing of your personal data."}),n.jsx("li",{children:"Request restriction of processing your personal data."}),n.jsx("li",{children:"Request transfer of your personal data."}),n.jsx("li",{children:"Right to withdraw consent."})]})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"7. Contact Us"}),n.jsx("p",{children:"If you have any questions about this privacy policy or our privacy practices, please contact us at:"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," privacy@smartwaterpools.com",n.jsx("br",{}),n.jsx("strong",{children:"Phone:"})," (555) 123-4567",n.jsx("br",{}),n.jsx("strong",{children:"Address:"})," 123 Main Street, Suite 100, Anytown, USA 12345"]})]}),n.jsx("div",{className:"pt-6 border-t",children:n.jsx(rs,{to:"/",className:"text-primary hover:underline",children:" Return to home page"})})]})})}function dye(){return n.jsx("div",{className:"container max-w-4xl py-12 mx-auto",children:n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"text-center mb-10",children:[n.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Terms of Service"}),n.jsxs("p",{className:"text-muted-foreground",children:["Last updated: ",new Date().toLocaleDateString()]})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"1. Introduction"}),n.jsx("p",{children:"Welcome to SmartWater Pools Management System. These Terms of Service govern your use of our website, application, and services. By accessing or using our services, you agree to be bound by these Terms of Service. If you disagree with any part of the terms, you may not access the service."})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"2. Accounts"}),n.jsx("p",{children:"When you create an account with us, you must provide accurate, complete, and current information. Failure to do so constitutes a breach of the Terms, which may result in immediate termination of your account."}),n.jsx("p",{children:"You are responsible for safeguarding the password used to access the service and for any activities or actions under your password. You agree not to disclose your password to any third party. You must notify us immediately upon becoming aware of any breach of security or unauthorized use of your account."})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"3. Service Usage"}),n.jsx("p",{children:"Our service allows you to manage pool maintenance, scheduling, client information, and related business operations. You agree to use the service only for legitimate business purposes related to pool management and maintenance."}),n.jsx("p",{children:"You agree not to use the service:"}),n.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[n.jsx("li",{children:"In any way that violates any applicable federal, state, local, or international law or regulation."}),n.jsx("li",{children:'To transmit, or procure the sending of, any advertising or promotional material, including any "junk mail," "chain letter," "spam," or any other similar solicitation.'}),n.jsx("li",{children:"To impersonate or attempt to impersonate the Company, a Company employee, another user, or any other person or entity."}),n.jsx("li",{children:"To engage in any other conduct that restricts or inhibits anyone's use or enjoyment of the service."})]})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"4. Google Sign-In"}),n.jsx("p",{children:"By using Google Sign-In, you agree to Google's Terms of Service and Privacy Policy. When you authenticate with Google, we store certain profile information necessary to provide our services, such as your name and email address."}),n.jsx("p",{children:"We do not control the authentication process provided by Google and are not responsible for any issues that arise during the authentication process on Google's platform."})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"5. Intellectual Property"}),n.jsx("p",{children:"The service and its original content, features, and functionality are and will remain the exclusive property of SmartWater Pools Management System and its licensors. The service is protected by copyright, trademark, and other laws. Our trademarks and trade dress may not be used in connection with any product or service without the prior written consent."})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"6. Termination"}),n.jsx("p",{children:"We may terminate or suspend your account immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach the Terms. Upon termination, your right to use the service will immediately cease. If you wish to terminate your account, you may simply discontinue using the service."})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"7. Limitation of Liability"}),n.jsx("p",{children:"In no event shall SmartWater Pools Management System, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from your access to or use of or inability to access or use the service."})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"8. Changes to Terms"}),n.jsx("p",{children:"We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material, we will try to provide at least 30 days' notice prior to any new terms taking effect. What constitutes a material change will be determined at our sole discretion."})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"9. Contact Us"}),n.jsx("p",{children:"If you have any questions about these Terms, please contact us at:"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," terms@smartwaterpools.com",n.jsx("br",{}),n.jsx("strong",{children:"Phone:"})," (555) 123-4567",n.jsx("br",{}),n.jsx("strong",{children:"Address:"})," 123 Main Street, Suite 100, Anytown, USA 12345"]})]}),n.jsx("div",{className:"pt-6 border-t",children:n.jsx(rs,{to:"/",className:"text-primary hover:underline",children:" Return to home page"})})]})})}function uye(){return n.jsx("div",{className:"container max-w-4xl py-12 mx-auto",children:n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"text-center mb-10",children:[n.jsx("h1",{className:"text-3xl font-bold mb-4",children:"OAuth Consent Information"}),n.jsx("p",{className:"text-muted-foreground",children:"Learn about our Google authentication integration"})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"About Our Google Integration"}),n.jsx("p",{children:"SmartWater Pools Management System offers Google Sign-In as a convenient and secure authentication method. This page explains what information we collect and how we use it when you sign in with Google."})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"Information We Collect"}),n.jsx("p",{children:"When you sign in with Google, we receive the following information from your Google account:"}),n.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Profile Information:"})," Your name and profile picture to personalize your account"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Email Address:"})," To identify your account and send important notifications"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Google ID:"})," A unique identifier to link your Google account with our service"]})]}),n.jsx("p",{className:"mt-4",children:"We do not receive or store your Google password or access to other Google services unless you explicitly grant such permissions."})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"How We Use This Information"}),n.jsx("p",{children:"The information we collect through Google Sign-In is used for the following purposes:"}),n.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[n.jsx("li",{children:"Creating and maintaining your account"}),n.jsx("li",{children:"Providing personalized service experience"}),n.jsx("li",{children:"Sending important notifications about your account or service"}),n.jsx("li",{children:"Improving our authentication services"})]})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"Data Protection and Security"}),n.jsx("p",{children:"We take the security of your information seriously and implement appropriate measures to protect your data:"}),n.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[n.jsx("li",{children:"Secure encrypted connections for data transfer"}),n.jsx("li",{children:"Regular security audits of our systems"}),n.jsx("li",{children:"Strict access controls to personal information"}),n.jsx("li",{children:"No sharing of your Google account information with third parties without your consent"})]})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"Managing Your Consent"}),n.jsx("p",{children:"You can review and manage the applications connected to your Google account at any time:"}),n.jsxs("ol",{className:"list-decimal pl-6 space-y-2",children:[n.jsxs("li",{children:["Visit your ",n.jsx("a",{href:"https://myaccount.google.com/permissions",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Google Account Permissions"})]}),n.jsx("li",{children:'Find "SmartWater Pools Management System" in the list of connected applications'}),n.jsx("li",{children:'Click "Remove Access" to revoke access'})]}),n.jsx("p",{className:"mt-4",children:"Note: Revoking access will disconnect your Google account from our service, but your account with us will remain active. You may need to set up a password to continue using our service."})]}),n.jsxs("div",{className:"pt-6 mt-8 border-t flex flex-col sm:flex-row justify-between",children:[n.jsx(rs,{to:"/privacy-policy",className:"text-primary hover:underline mb-2 sm:mb-0",children:"Privacy Policy"}),n.jsx(rs,{to:"/terms-of-service",className:"text-primary hover:underline mb-2 sm:mb-0",children:"Terms of Service"}),n.jsx(rs,{to:"/",className:"text-primary hover:underline",children:"Return to Home"})]})]})})}function hye(){var N,E,_,S,C,I;const{user:t,isAuthenticated:e,isLoading:s,checkSession:r}=Kr();_n();const[i,a]=y.useState(null),[o,c]=y.useState(!1),[d,h]=y.useState(null),[g,m]=y.useState([]),[p,v]=y.useState({});y.useEffect(()=>(document.body.classList.add("h-full","overflow-auto"),()=>{document.body.classList.remove("h-full","overflow-auto")}),[]);const j=async()=>{c(!0);try{const P=await fetch("/api/auth/session",{method:"GET",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}),L={};P.headers.forEach((M,k)=>{L[k]=M}),v(L);const T=await P.json();a(T),m(M=>[{timestamp:new Date,data:T,headers:L},...M.slice(0,9)]),h(new Date),r()}catch(P){console.error("Error checking session:",P)}finally{c(!1)}};return y.useEffect(()=>{const P=document.createElement("style");return P.innerHTML=`
      html, body, #root {
        height: auto !important;
        min-height: 100%;
        overflow: auto !important;
      }
      .overflow-hidden {
        overflow: visible !important;
      }
    `,document.head.appendChild(P),()=>{document.head.removeChild(P)}},[]),y.useEffect(()=>{j();const P=setInterval(()=>{j()},15e3);return()=>clearInterval(P)},[]),n.jsxs("div",{className:"container mx-auto py-8 space-y-8 pb-20",style:{maxHeight:"none",overflow:"auto",height:"auto",minHeight:"100vh",position:"relative",zIndex:10},children:[n.jsxs("div",{className:"flex justify-between items-center sticky top-0 bg-background z-10 py-2",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"OAuth Authentication Debug"}),n.jsx(H,{onClick:j,disabled:o,variant:"outline",children:o?n.jsxs(n.Fragment,{children:[n.jsx(Qa,{className:"mr-2 h-4 w-4 animate-spin"}),"Checking..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Qa,{className:"mr-2 h-4 w-4"}),"Refresh Session"]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(Ae,{children:[n.jsxs(Be,{className:"pb-3",children:[n.jsxs(Ve,{className:"flex items-center",children:[n.jsx(QC,{className:"mr-2 h-5 w-5 text-primary"}),"Authentication Status"]}),n.jsx(ct,{children:"Current authentication state from context"})]}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"Status:"}),n.jsx(Ze,{variant:e?"default":"destructive",className:"ml-2",children:e?"Authenticated":"Not Authenticated"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"Loading:"}),n.jsx(Ze,{variant:s?"outline":"secondary",className:"ml-2",children:s?"Loading...":"Completed"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"User ID:"}),n.jsx("span",{className:"text-sm font-mono bg-muted px-2 py-1 rounded",children:(t==null?void 0:t.id)||"None"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"Email:"}),n.jsx("span",{className:"text-sm",children:(t==null?void 0:t.email)||"None"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"Auth Provider:"}),n.jsx(Ze,{variant:(t==null?void 0:t.authProvider)==="google"?"default":"secondary",className:"ml-2",children:(t==null?void 0:t.authProvider)||"None"})]})]})}),n.jsx(Pn,{className:"pt-0 text-xs text-muted-foreground",children:d?`Last checked: ${d.toLocaleTimeString()}`:"Not checked yet"})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{className:"pb-3",children:[n.jsxs(Ve,{className:"flex items-center",children:[n.jsx(fy,{className:"mr-2 h-5 w-5 text-primary"}),"Session Details"]}),n.jsx(ct,{children:"Raw session data from server"})]}),n.jsx(Ee,{className:"space-y-4",children:i?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"Session ID:"}),n.jsxs("span",{className:"text-xs font-mono bg-muted px-2 py-1 rounded truncate max-w-[180px]",title:i.sessionID,children:[(N=i.sessionID)==null?void 0:N.substring(0,12),"..."]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"Session Exists:"}),n.jsx(Ze,{variant:i.sessionExists?"default":"destructive",children:i.sessionExists?"Yes":"No"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"Authenticated:"}),n.jsx(Ze,{variant:i.isAuthenticated?"default":"destructive",children:i.isAuthenticated?"Yes":"No"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"OAuth Pending:"}),n.jsx(Ze,{variant:i.oauthPending?"default":"secondary",children:i.oauthPending?"Yes":"No"})]}),i.hasPendingOAuthUser&&n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"OAuth Email:"}),n.jsx("span",{className:"text-sm font-medium",children:i.oauthEmail})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"Session Store:"}),n.jsx("span",{className:"text-sm",children:i.sessionStore||"Unknown"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"New Session:"}),n.jsx(Ze,{variant:i.isNew?"outline":"secondary",children:i.isNew?"Yes":"No"})]})]}):n.jsx("div",{className:"flex items-center justify-center h-48",children:n.jsx("p",{className:"text-muted-foreground",children:"Loading session data..."})})}),n.jsxs(Pn,{className:"pt-0 text-xs text-muted-foreground",children:["Cookie: ",(i==null?void 0:i.sessionCookieName)||"Unknown"]})]}),n.jsxs(Ae,{children:[n.jsxs(Be,{className:"pb-3",children:[n.jsxs(Ve,{className:"flex items-center",children:[n.jsx(RG,{className:"mr-2 h-5 w-5 text-primary"}),"Cookie Configuration"]}),n.jsx(ct,{children:"Session cookie settings from server"})]}),n.jsx(Ee,{className:"space-y-4",children:i?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"Max Age:"}),n.jsx("span",{className:"text-sm",children:i.cookieMaxAge?`${Math.round(i.cookieMaxAge/86400)}d ${Math.round(i.cookieMaxAge%86400/3600)}h`:"None"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"Expires:"}),n.jsx("span",{className:"text-sm",children:i.cookieExpires?new Date(i.cookieExpires).toLocaleDateString():"None"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"HttpOnly:"}),n.jsx(Ze,{variant:i.cookieHttpOnly?"default":"destructive",children:i.cookieHttpOnly?"Yes":"No"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"Secure:"}),n.jsx(Ze,{variant:i.cookieSecure?"default":"destructive",children:i.cookieSecure?"Yes":"No"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"SameSite:"}),n.jsx(Ze,{variant:(E=p["set-cookie"])!=null&&E.includes("SameSite=None")?"default":"outline",children:(_=p["set-cookie"])!=null&&_.includes("SameSite=None")?"None":(S=p["set-cookie"])!=null&&S.includes("SameSite=Lax")?"Lax":(C=p["set-cookie"])!=null&&C.includes("SameSite=Strict")?"Strict":"Unknown"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"Cookie Found:"}),n.jsx(Ze,{variant:i.hasSwpSidCookie?"default":"destructive",children:i.hasSwpSidCookie?"Yes":"No"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"Cookie Name:"}),n.jsx("span",{className:"text-sm font-mono",children:i.sessionCookieName||"Unknown"})]})]}):n.jsx("div",{className:"flex items-center justify-center h-48",children:n.jsx("p",{className:"text-muted-foreground",children:"Loading cookie data..."})})}),n.jsxs(Pn,{className:"pt-0 flex space-x-2",children:[(i==null?void 0:i.cookieSecure)===!0&&n.jsxs(Ze,{variant:"outline",className:"bg-green-50",children:[n.jsx(zc,{className:"mr-1 h-3 w-3"}),"Secure"]}),(i==null?void 0:i.cookieHttpOnly)===!0&&n.jsxs(Ze,{variant:"outline",className:"bg-green-50",children:[n.jsx(zc,{className:"mr-1 h-3 w-3"}),"HttpOnly"]}),((I=p["set-cookie"])==null?void 0:I.includes("SameSite=None"))&&n.jsxs(Ze,{variant:"outline",className:"bg-green-50",children:[n.jsx(zc,{className:"mr-1 h-3 w-3"}),"SameSite=None"]})]})]})]}),n.jsxs(Ae,{className:"mt-8",children:[n.jsxs(Be,{children:[n.jsxs(Ve,{className:"flex items-center",children:[n.jsx(fL,{className:"mr-2 h-5 w-5 text-primary"}),"Response Headers"]}),n.jsx(ct,{children:"Headers from session response"})]}),n.jsx(Ee,{children:n.jsx("div",{className:"bg-muted rounded-md p-4 overflow-auto max-h-[200px]",children:n.jsx("pre",{className:"text-xs font-mono whitespace-pre-wrap",children:JSON.stringify(p,null,2)})})})]}),n.jsxs(Ae,{className:"mt-8",children:[n.jsxs(Be,{children:[n.jsxs(Ve,{className:"flex items-center",children:[n.jsx(hg,{className:"mr-2 h-5 w-5 text-primary"}),"OAuth Status"]}),n.jsx(ct,{children:"Special route for testing Google OAuth authentication"})]}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("p",{className:"text-sm",children:"Test your OAuth authentication by going through the full authentication flow."}),n.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-6",children:[n.jsxs("div",{className:"rounded-lg border bg-card p-4 flex-1",children:[n.jsxs("h3",{className:"font-semibold text-lg mb-2 flex items-center",children:[n.jsx(fs,{className:"mr-2 h-4 w-4 text-primary"}),"Test OAuth Login"]}),n.jsx("p",{className:"text-sm mb-4",children:"Authenticate with Google through the standard login process."}),n.jsx(H,{variant:"default",className:"w-full",onClick:()=>window.location.href="/login?source=oauthdebug",children:"Go to Login Page"})]}),n.jsxs("div",{className:"rounded-lg border bg-card p-4 flex-1",children:[n.jsxs("h3",{className:"font-semibold text-lg mb-2 flex items-center",children:[n.jsx(Zf,{className:"mr-2 h-4 w-4 text-primary"}),"Direct OAuth Attempt"]}),n.jsx("p",{className:"text-sm mb-4",children:"Directly trigger the Google OAuth flow, bypassing the login page."}),n.jsx(H,{variant:"outline",className:"w-full",onClick:async()=>{try{const L=await(await fetch("/api/auth/prepare-oauth")).json();L.success?window.location.href=`/api/auth/google?state=${L.state}&originPath=/oauth-debug`:alert("Failed to prepare OAuth session: "+L.message)}catch(P){console.error("Error preparing OAuth:",P),alert("Error preparing OAuth session")}},children:"Test Direct OAuth"})]})]})]})})]}),n.jsxs(Ae,{className:"mt-8",children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Session History"}),n.jsx(ct,{children:"Track changes in your session over time"})]}),n.jsx(Ee,{children:g.length>0?n.jsx("div",{className:"space-y-4",children:g.map((P,L)=>{var T;return n.jsxs("div",{className:"rounded-lg border p-4",children:[n.jsxs("div",{className:"flex justify-between mb-2",children:[n.jsx("h4",{className:"font-medium",children:P.timestamp.toLocaleTimeString()}),n.jsx(Ze,{variant:P.data.isAuthenticated?"default":"secondary",children:P.data.isAuthenticated?"Authenticated":"Not Authenticated"})]}),n.jsx(pr,{className:"my-2"}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Session ID:"})," ",(T=P.data.sessionID)==null?void 0:T.substring(0,10),"..."]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Auth Headers:"})," ",P.headers["x-auth-status"]]}),P.data.hasPendingOAuthUser&&n.jsxs("div",{className:"text-xs font-medium text-amber-600 mt-1",children:["Has pending OAuth user: ",P.data.oauthEmail]})]},L)})}):n.jsx("p",{className:"text-center text-muted-foreground",children:"No history recorded yet"})})]})]})}function mye(){return n.jsx("div",{className:"container mx-auto py-16 px-4",children:n.jsxs("div",{className:"max-w-3xl mx-auto text-center space-y-12",children:[n.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"SmartWater Pools Debug Tools"}),n.jsx("p",{className:"text-xl text-muted-foreground mt-4",children:"Developer tools for testing and debugging authentication features"}),n.jsxs("div",{className:"grid gap-6 mt-12 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:[n.jsxs("div",{className:"flex flex-col items-center p-6 bg-card rounded-lg border",children:[n.jsx("div",{className:"rounded-full bg-primary/10 p-3 mb-4",children:n.jsx(wm,{className:"h-8 w-8 text-primary"})}),n.jsx("h3",{className:"text-lg font-medium",children:"OAuth Debug"}),n.jsx("p",{className:"text-sm text-muted-foreground text-center mt-2 mb-4",children:"Test OAuth authentication flow and session management"}),n.jsx(rs,{href:"/oauth-debug",children:n.jsx(H,{className:"mt-auto",size:"sm",children:"Open OAuth Debug"})})]}),n.jsxs("div",{className:"flex flex-col items-center p-6 bg-card rounded-lg border",children:[n.jsx("div",{className:"rounded-full bg-primary/10 p-3 mb-4",children:n.jsx(fy,{className:"h-8 w-8 text-primary"})}),n.jsx("h3",{className:"text-lg font-medium",children:"Session Debug"}),n.jsx("p",{className:"text-sm text-muted-foreground text-center mt-2 mb-4",children:"Inspect session details and test session operations"}),n.jsx(H,{className:"mt-auto",variant:"outline",size:"sm",children:"Coming Soon"})]}),n.jsxs("div",{className:"flex flex-col items-center p-6 bg-card rounded-lg border",children:[n.jsx("div",{className:"rounded-full bg-primary/10 p-3 mb-4",children:n.jsx(so,{className:"h-8 w-8 text-primary"})}),n.jsx("h3",{className:"text-lg font-medium",children:"API Tools"}),n.jsx("p",{className:"text-sm text-muted-foreground text-center mt-2 mb-4",children:"Test API endpoints and responses"}),n.jsx(H,{className:"mt-auto",variant:"outline",size:"sm",children:"Coming Soon"})]})]}),n.jsx("div",{className:"mt-16",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"These tools are for development and troubleshooting purposes only."})})]})})}const fye=q.object({name:q.string().min(2,"Name must be at least 2 characters"),email:q.string().email("Please enter a valid email").min(1,"Email is required"),password:q.string().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number").regex(/[^A-Za-z0-9]/,"Password must contain at least one special character"),confirmPassword:q.string().min(1,"Please confirm your password")}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),pye=()=>{const{toast:t}=Lt(),[,e]=_n(),[s,r]=y.useState(!0),[i,a]=y.useState(!0),[o,c]=y.useState(!1),[d,h]=y.useState(null),[g,m]=y.useState(null),[p,v]=y.useState(null),[j,N]=y.useState(!1),E=mn({resolver:pn(fye),defaultValues:{name:"",email:"",password:"",confirmPassword:""}});y.useEffect(()=>{const I=new URLSearchParams(window.location.search).get("token");if(!I){v("No invitation token provided"),a(!1),r(!1);return}h(I),_(I)},[]);const _=async C=>{try{a(!0);const I=await pt(`/api/invitations/verify?token=${C}`,{method:"GET"});I.success&&I.invitation?(m(I.invitation),E.setValue("name",I.invitation.name),E.setValue("email",I.invitation.email)):v(I.message||"Invalid or expired invitation")}catch(I){v(I.message||"Error verifying invitation")}finally{a(!1),r(!1)}},S=async C=>{if(!d||!g){v("Invalid invitation state");return}try{c(!0);const I=await pt("/api/auth/register-invitation",{method:"POST",data:{name:C.name,email:C.email,password:C.password,token:d,organizationId:g.organization.id,role:g.role}});I.success?(N(!0),t({title:"Registration successful!",description:"Your account has been created. You can now log in."}),setTimeout(()=>{e("/login")},3e3)):(v(I.message||"Failed to register"),t({title:"Registration failed",description:I.message||"An error occurred during registration",variant:"destructive"}))}catch(I){v(I.message||"An unexpected error occurred"),t({title:"Error",description:I.message||"Failed to register",variant:"destructive"})}finally{c(!1)}};return s?n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:n.jsxs(Ae,{className:"w-full max-w-md mx-auto",children:[n.jsxs(Be,{className:"text-center",children:[n.jsx(Ve,{children:"Verifying Invitation"}),n.jsx(ct,{children:"Please wait while we verify your invitation..."})]}),n.jsx(Ee,{className:"flex justify-center py-6",children:n.jsx(Kt,{className:"h-16 w-16 animate-spin text-primary"})})]})}):p?n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:n.jsxs(Ae,{className:"w-full max-w-md mx-auto",children:[n.jsxs(Be,{className:"text-center",children:[n.jsxs(Ve,{className:"text-destructive flex items-center justify-center",children:[n.jsx(Np,{className:"mr-2 h-6 w-6"}),"Invitation Error"]}),n.jsx(ct,{children:"We couldn't verify your invitation"})]}),n.jsx(Ee,{children:n.jsxs("div",{className:"text-center py-4",children:[n.jsx("p",{className:"text-destructive font-semibold",children:p}),n.jsx("p",{className:"mt-4",children:"If you believe this is an error, please contact your organization administrator."})]})}),n.jsx(Pn,{className:"flex justify-center",children:n.jsx(H,{onClick:()=>e("/login"),children:"Go to Login"})})]})}):j?n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:n.jsxs(Ae,{className:"w-full max-w-md mx-auto",children:[n.jsxs(Be,{className:"text-center",children:[n.jsxs(Ve,{className:"text-primary flex items-center justify-center",children:[n.jsx(mu,{className:"mr-2 h-6 w-6"}),"Registration Complete!"]}),n.jsx(ct,{children:"Your account has been created successfully"})]}),n.jsx(Ee,{children:n.jsxs("div",{className:"text-center py-4",children:[n.jsxs("p",{children:["You have successfully joined ",g==null?void 0:g.organization.name,"."]}),n.jsx("p",{className:"mt-2",children:"You will be redirected to the login page in a moment..."})]})}),n.jsx(Pn,{className:"flex justify-center",children:n.jsx(H,{onClick:()=>e("/login"),children:"Go to Login"})})]})}):n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:n.jsxs(Ae,{className:"w-full max-w-md mx-auto",children:[n.jsxs(Be,{children:[n.jsx(Ve,{children:"Complete Your Registration"}),n.jsxs(ct,{children:["You've been invited to join ",g==null?void 0:g.organization.name," as a ",g==null?void 0:g.role,"."]})]}),n.jsx(Ee,{children:n.jsx(fn,{...E,children:n.jsxs("form",{onSubmit:E.handleSubmit(S),className:"space-y-4",children:[n.jsx(J,{control:E.control,name:"name",render:({field:C})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Full Name"}),n.jsx(Q,{children:n.jsx(ve,{...C,disabled:!0,placeholder:"Your name"})}),n.jsx(ne,{})]})}),n.jsx(J,{control:E.control,name:"email",render:({field:C})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Email"}),n.jsx(Q,{children:n.jsx(ve,{...C,type:"email",disabled:!0,placeholder:"Your email"})}),n.jsx(ne,{})]})}),n.jsx(J,{control:E.control,name:"password",render:({field:C})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Password"}),n.jsx(Q,{children:n.jsx(ve,{...C,type:"password",placeholder:"Create a password"})}),n.jsx(ne,{})]})}),n.jsx(J,{control:E.control,name:"confirmPassword",render:({field:C})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Confirm Password"}),n.jsx(Q,{children:n.jsx(ve,{...C,type:"password",placeholder:"Confirm your password"})}),n.jsx(ne,{})]})}),n.jsx(H,{type:"submit",className:"w-full",disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating your account..."]}):n.jsxs(n.Fragment,{children:[n.jsx(hg,{className:"mr-2 h-4 w-4"}),"Complete Registration"]})})]})})}),n.jsxs(Pn,{className:"flex flex-col items-center justify-center text-sm text-muted-foreground",children:[n.jsxs("p",{children:["This invitation expires on ",new Date((g==null?void 0:g.expiresAt)||"").toLocaleDateString()]}),n.jsxs("p",{className:"mt-2",children:["Already have an account?"," ",n.jsx("a",{href:"/login",className:"text-primary hover:underline",children:"Log in"})]})]})]})})},gye=q.object({organizationName:q.string().min(3,"Organization name must be at least 3 characters long"),organizationType:q.enum(["company","individual"])}),xye=q.object({invitationCode:q.string().min(6,"Invitation code must be at least 6 characters long")});function vye(){const{googleId:t}=id(),[,e]=_n(),[s,r]=y.useState("create"),[i,a]=y.useState(!1),[o,c]=y.useState(null),{toast:d}=Lt(),h=mn({resolver:pn(gye),defaultValues:{organizationName:"",organizationType:"company"}}),g=mn({resolver:pn(xye),defaultValues:{invitationCode:""}}),{data:m,isLoading:p,isError:v}=wt({queryKey:["/api/oauth/pending",t],queryFn:async()=>await pt(`/api/oauth/pending/${t}`,"GET"),retry:!1}),j=async _=>{try{a(!0);const S=await pt(`/api/oauth/verify-invitation/${_}`,"GET");S.success?(c({id:S.organizationId,name:S.organizationName}),d({title:"Invitation verified",description:`You can join ${S.organizationName}`,variant:"default"})):(d({title:"Invalid invitation",description:S.message||"The invitation code is invalid or expired",variant:"destructive"}),c(null))}catch(S){let C="Could not verify the invitation code";S.message&&(C=S.message),d({title:"Verification failed",description:C,variant:"destructive"}),c(null)}finally{a(!1)}},N=async _=>{try{a(!0);const S=await pt("/api/oauth/complete-registration","POST",{googleId:t,action:"create",organizationName:_.organizationName,organizationType:_.organizationType});S.success?(d({title:"Organization created",description:"Your organization has been created successfully",variant:"default"}),S.redirectTo?e(S.redirectTo):e("/dashboard")):d({title:"Creation failed",description:S.message||"Failed to create organization",variant:"destructive"})}catch(S){let C="An unexpected error occurred";S.message&&(C=S.message),d({title:"Error",description:C,variant:"destructive"})}finally{a(!1)}},E=async _=>{try{a(!0);const S=await pt("/api/oauth/complete-registration","POST",{googleId:t,action:"join",invitationCode:_.invitationCode});S.success?(d({title:"Organization joined",description:"You have successfully joined the organization",variant:"default"}),S.redirectTo?e(S.redirectTo):e("/dashboard")):d({title:"Failed to join",description:S.message||"Could not join the organization",variant:"destructive"})}catch(S){let C="An unexpected error occurred";S.message&&(C=S.message),d({title:"Error",description:C,variant:"destructive"})}finally{a(!1)}};return y.useEffect(()=>{const _=g.watch("invitationCode");if(_&&_.length>=6){const S=setTimeout(()=>{j(_)},500);return()=>clearTimeout(S)}else c(null)},[g.watch("invitationCode")]),p?n.jsxs("div",{className:"flex h-screen items-center justify-center",children:[n.jsx(Kt,{className:"h-8 w-8 animate-spin text-primary"}),n.jsx("p",{className:"ml-2",children:"Loading user data..."})]}):v||!(m!=null&&m.success)?n.jsx("div",{className:"flex h-screen flex-col items-center justify-center gap-4 p-4",children:n.jsxs(Ae,{className:"w-full max-w-md",children:[n.jsx(Be,{children:n.jsx(Ve,{className:"text-center",children:"Error"})}),n.jsxs(Ee,{className:"text-center",children:[n.jsx("p",{children:"Could not find your account information. This could be due to:"}),n.jsxs("ul",{className:"mt-2 list-disc pl-6 text-left",children:[n.jsx("li",{children:"Your session has expired"}),n.jsx("li",{children:"You have already completed the registration"}),n.jsx("li",{children:"An error occurred in the authentication process"})]}),n.jsxs("div",{className:"mt-4 rounded-md bg-amber-50 p-3 text-left text-sm text-amber-800",children:[n.jsx("p",{className:"font-medium",children:"Debug information:"}),n.jsxs("p",{children:["Google ID: ",t||"Not provided"]}),m&&n.jsxs("p",{children:["Error message: ",m.message||"No specific error message"]}),n.jsx(H,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>window.location.href="/auth/login",children:"Return to Login"})]})]}),n.jsx(Pn,{className:"flex justify-center",children:n.jsx(H,{onClick:()=>window.location.href="/auth/login",children:"Return to Login"})})]})}):n.jsx("div",{className:"flex h-screen flex-col items-center justify-center bg-muted/30 p-4",children:n.jsxs(Ae,{className:"w-full max-w-lg",children:[n.jsxs(Be,{children:[n.jsx(Ve,{className:"text-center text-2xl",children:"Welcome to Smart Water Pools"}),n.jsx(ct,{className:"text-center",children:"Complete your account setup by creating or joining an organization"})]}),n.jsxs(Ee,{children:[n.jsx("div",{className:"mb-6 flex items-center justify-center",children:n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"relative h-16 w-16 overflow-hidden rounded-full border-2 border-primary shadow-md",children:n.jsx("img",{src:m.user.photoUrl||"/placeholder-user.png",alt:"User",className:"h-full w-full object-cover"})}),n.jsx("p",{className:"mt-2 font-medium",children:m.user.displayName}),n.jsx("p",{className:"text-sm text-muted-foreground",children:m.user.email})]})}),n.jsxs(ps,{value:s,onValueChange:r,className:"mt-4",children:[n.jsxs(gs,{className:"grid w-full grid-cols-2",children:[n.jsx(Ge,{value:"create",children:"Create Organization"}),n.jsx(Ge,{value:"join",children:"Join Organization"})]}),n.jsx(Qe,{value:"create",className:"mt-4",children:n.jsx(fn,{...h,children:n.jsxs("form",{onSubmit:h.handleSubmit(N),className:"space-y-6",children:[n.jsx(J,{control:h.control,name:"organizationName",render:({field:_})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Organization Name"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter your organization name",..._,disabled:i})}),n.jsx(ne,{})]})}),n.jsx(J,{control:h.control,name:"organizationType",render:({field:_})=>n.jsxs(Z,{className:"space-y-3",children:[n.jsx(X,{children:"Organization Type"}),n.jsx(Q,{children:n.jsxs(WS,{onValueChange:_.onChange,defaultValue:_.value,className:"flex flex-col space-y-1",disabled:i,children:[n.jsxs(Z,{className:"flex items-center space-x-3 space-y-0",children:[n.jsx(Q,{children:n.jsx(Ih,{value:"company"})}),n.jsx(X,{className:"font-normal",children:"Company"})]}),n.jsxs(Z,{className:"flex items-center space-x-3 space-y-0",children:[n.jsx(Q,{children:n.jsx(Ih,{value:"individual"})}),n.jsx(X,{className:"font-normal",children:"Individual"})]})]})}),n.jsx(ne,{})]})}),n.jsxs(H,{type:"submit",className:"w-full",disabled:i,children:[i&&n.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Organization"]})]})})}),n.jsx(Qe,{value:"join",className:"mt-4",children:n.jsx(fn,{...g,children:n.jsxs("form",{onSubmit:g.handleSubmit(E),className:"space-y-6",children:[n.jsx(J,{control:g.control,name:"invitationCode",render:({field:_})=>n.jsxs(Z,{children:[n.jsx(X,{children:"Invitation Code"}),n.jsx(Q,{children:n.jsx(ve,{placeholder:"Enter your invitation code",..._,disabled:i})}),n.jsx(ne,{})]})}),o&&n.jsxs("div",{className:"rounded-md bg-primary/10 p-3",children:[n.jsx("p",{className:"text-sm font-medium",children:"You will join:"}),n.jsx("p",{className:"mt-1 font-medium",children:o.name})]}),n.jsxs(H,{type:"submit",className:"w-full",disabled:i||!o,children:[i&&n.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Join Organization"]})]})})})]})]}),n.jsxs(Pn,{className:"flex flex-col items-center justify-center gap-2",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"By continuing, you agree to our Terms of Service and Privacy Policy."}),n.jsx("div",{className:"flex gap-2",children:n.jsx(H,{variant:"link",onClick:()=>window.location.href="/auth/login",children:"Back to Login"})})]})]})})}function yye({isOpen:t,onClose:e,title:s="Test Dialog"}){return console.log("SimpleTestDialog: Rendering with isOpen =",t),t?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-bold",children:s}),n.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-800",children:""})]}),n.jsx("p",{className:"text-gray-600 mb-4",children:"This is a simple test dialog to verify that modal dialogs work in this application."}),n.jsx("div",{className:"flex justify-end",children:n.jsx(H,{onClick:e,children:"Close"})})]})}):null}function AT(){const[t,e]=y.useState(!1);console.log("TestPage: Rendering with isDialogOpen =",t);const s=()=>{console.log("Test Page: Opening dialog"),e(!0)},r=()=>{console.log("Test Page: Closing dialog"),e(!1)};return n.jsxs("div",{className:"container mx-auto py-10",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Test Page"}),n.jsxs(Ae,{className:"mb-6",children:[n.jsx(Be,{children:n.jsx(Ve,{children:"Dialog Test"})}),n.jsxs(Ee,{children:[n.jsx("p",{className:"mb-4",children:"This is a test page to verify that basic dialog functionality is working."}),n.jsx(H,{onClick:s,children:"Open Test Dialog"})]})]}),n.jsxs(Ae,{children:[n.jsx(Be,{children:n.jsx(Ve,{children:"Component Status"})}),n.jsx(Ee,{children:n.jsxs("p",{children:["Dialog is currently: ",n.jsx("strong",{children:t?"OPEN":"CLOSED"})]})})]}),n.jsx(yye,{isOpen:t,onClose:r,title:"Simple Test Dialog"})]})}function wye({mobileMenuOpen:t,toggleMobileMenu:e,closeMobileMenu:s}){const{isLoading:r}=Kr(),[i,a]=y.useState(!1);return console.log("Auth loading state:",r),y.useEffect(()=>{if(r){a(!1);const o=setTimeout(()=>{console.log("Auth loading timeout reached, forcing UI to render"),a(!0)},3e3);return()=>clearTimeout(o)}},[r]),r&&console.log("Auth is still loading, but we're rendering UI anyway to avoid getting stuck"),n.jsxs(UY,{children:[n.jsx("div",{className:"flex h-screen overflow-hidden bg-background",children:n.jsxs(SE,{children:[n.jsx(sn,{path:"/register",children:n.jsx(tye,{})}),n.jsx(sn,{path:"/unauthorized",children:n.jsx(oye,{})}),n.jsx(sn,{path:"/privacy-policy",children:n.jsx(cye,{})}),n.jsx(sn,{path:"/terms-of-service",children:n.jsx(dye,{})}),n.jsx(sn,{path:"/oauth-consent",children:n.jsx(uye,{})}),n.jsx(sn,{path:"/invite",children:n.jsx(pye,{})}),n.jsx(sn,{path:"/pricing",children:n.jsx(rye,{})}),n.jsx(sn,{path:"/subscription/success",children:n.jsx(aye,{})}),n.jsx(sn,{path:"/organization-selection/:googleId",children:n.jsx(vye,{})}),n.jsx(sn,{path:"/debug",children:n.jsx(mye,{})}),n.jsx(sn,{path:"/oauth-debug",children:n.jsx(hye,{})}),n.jsx(sn,{path:"/test",children:n.jsx(AT,{})}),n.jsx(sn,{children:n.jsxs(gJ,{children:[n.jsx("div",{className:"hidden md:block",children:n.jsx(ZY,{})}),n.jsx(kX,{isOpen:t,onClose:s}),n.jsxs("div",{className:"flex flex-col flex-1 w-full",children:[n.jsx(DX,{toggleMobileMenu:e}),n.jsx(WY,{}),n.jsxs("main",{className:"flex-1 overflow-y-auto bg-background p-4 pb-20 md:p-6 md:pb-6",children:[n.jsx(PX,{}),n.jsxs(SE,{children:[n.jsx(sn,{path:"/dashboard",children:n.jsx(B4,{})}),n.jsx(sn,{path:"/",children:n.jsx(B4,{})}),n.jsx(sn,{path:"/projects",children:n.jsx(cle,{})}),n.jsx(sn,{path:"/projects/:id",children:n.jsx(yle,{})}),n.jsx(sn,{path:"/maintenance",children:()=>n.jsx(Tce,{})}),n.jsx(sn,{path:"/maintenance/map",children:()=>n.jsx(Mce,{})}),n.jsx(sn,{path:"/maintenance/list",children:()=>n.jsx(y_,{})}),n.jsx(sn,{path:"/maintenance/routes",children:()=>n.jsx(y_,{defaultTab:"routes"})}),n.jsx(sn,{path:"/repairs",children:n.jsx(Uce,{})}),n.jsx(sn,{path:"/clients",children:n.jsx(Wce,{})}),n.jsx(sn,{path:"/clients/enhanced",children:n.jsx(rme,{})}),n.jsx(sn,{path:"/clients/add",children:n.jsx(Ffe,{})}),n.jsx(sn,{path:"/clients/:id/edit",children:n.jsx(zfe,{})}),n.jsx(sn,{path:"/clients/:id/pool-wizard",children:n.jsx(JI,{})}),n.jsx(sn,{path:"/pool-wizard/:id",children:n.jsx(JI,{})}),n.jsx(sn,{path:"/clients/:id",children:n.jsx(Pfe,{})}),n.jsx(sn,{path:"/technicians",children:n.jsx(Wfe,{})}),n.jsx(sn,{path:"/client-portal",children:n.jsx(Hfe,{})}),n.jsx(sn,{path:"/service-report/:id",children:n.jsx(tpe,{})}),n.jsx(sn,{path:"/maintenance-report/:id",children:n.jsx(npe,{})}),n.jsx(sn,{path:"/communications",children:n.jsx(spe,{})}),n.jsx(sn,{path:"/business",children:n.jsx(sge,{})}),n.jsx(sn,{path:"/inventory",children:n.jsx(gge,{})}),n.jsx(sn,{path:"/inventory/transfers",children:n.jsx(dge,{})}),n.jsx(sn,{path:"/inventory/barcode-demo",children:n.jsx(Kve,{})}),n.jsx(sn,{path:"/fleetmatics/settings",children:n.jsx(vge,{})}),n.jsx(sn,{path:"/fleetmatics/vehicle-mapping",children:n.jsx(yge,{})}),n.jsx(sn,{path:"/fleetmatics/vehicle-tracking",children:n.jsx(wge,{})}),n.jsx(sn,{path:"/settings",children:n.jsx(Txe,{})}),n.jsx(sn,{path:"/admin",children:n.jsx(Pxe,{})}),n.jsx(sn,{path:"/demo/data-table",children:n.jsx(Jve,{})}),n.jsx(sn,{path:"/test-page",children:n.jsx(AT,{})}),n.jsx(sn,{children:n.jsx(lye,{})})]})]})]})]})})]})}),n.jsx(sJ,{})]})}function jye(){return sessionStorage.removeItem("maintenanceActiveTab"),!0}function bye(){const[t,e]=y.useState(!1),[s]=_n();y.useEffect(()=>{jye()},[]),y.useEffect(()=>{e(!1)},[s]);const r=()=>{e(!t)},i=()=>{e(!1)};return n.jsx(lG,{client:ga,children:n.jsx(fJ,{children:n.jsx(KY,{children:n.jsx(wye,{mobileMenuOpen:t,toggleMobileMenu:r,closeMobileMenu:i})})})})}document.addEventListener("DOMContentLoaded",()=>{console.log("DOMContentLoaded event fired, attempting to render React app");const t=document.getElementById("root");if(!t){console.error("Cannot find #root element to mount React application!");const e=document.createElement("div");e.style.padding="20px",e.style.margin="20px",e.style.backgroundColor="#ffeeee",e.style.border="2px solid red",e.style.borderRadius="4px",e.innerHTML=`
      <h2 style="color: red;">React Mounting Error</h2>
      <p>Could not find the #root element to mount the React application.</p>
      <p>This could be due to:</p>
      <ul>
        <li>HTML template missing the root element</li>
        <li>Script running before DOM is fully loaded</li>
        <li>A network or loading issue with the HTML</li>
      </ul>
    `,document.body.appendChild(e);return}try{kR(t).render(n.jsx(bye,{})),console.log("React app successfully rendered")}catch(e){console.error("Error rendering React application:",e);const s=document.createElement("div");s.style.color="red",s.style.padding="20px",s.style.margin="20px",s.style.border="2px solid red",s.innerHTML=`
      <h2>React Rendering Error</h2>
      <p>${e instanceof Error?e.message:"Unknown error"}</p>
      <pre>${e instanceof Error?e.stack:"No stack trace available"}</pre>
    `,t.appendChild(s)}});export{Np as A,H as B,Ur as C,oi as D,ri as E,fr as F,ga as G,_n as H,mJ as I,Sme as J,ro as K,ym as L,bi as M,tn as N,gz as O,Ez as P,DS as Q,Ne as R,_e as S,P_ as T,xi as U,R_ as V,L_ as W,yN as X,kz as Y,Lt as a,Pt as b,li as c,Yr as d,bt as e,ln as f,sl as g,Ae as h,Be as i,n as j,Ve as k,ct as l,Ze as m,Vc as n,Ee as o,gt as p,ut as q,y as r,xt as s,ht as t,wt as u,ue as v,Pn as w,_m as x,DG as y,Ao as z};
